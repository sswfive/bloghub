{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Home","text":"<p>AstonWang\u2018s Blog</p> <p> <p> </p> <p> </p>        \u7f16\u7a0b\u662f\u4e00\u79cd\u6280\u827a\uff0c\u4e00\u79cd\u9700\u8981\u7528\u5fc3\u5b66\u4e60\u7684\u6280\u827a         <p></p> <ul> <li>\u4e00\u5207\u770b\u4f3c\u901d\u53bb\u7684\uff0c\u90fd\u4e0d\u66fe\u79bb\u5f00\uff0c\u4f60\u6240\u7ed9\u4e88\u7684\u7231\u4e0e\u6e29\u6696\uff0c\u8ba9\u6211\u6267\u7740\u5730\u5b88\u62a4\u7740\u8fd9\u91cc \uff01    </li> <li>All problems in computer science can be solved by another level of indirection !</li> </ul>"},{"location":"postlist/","title":"\u6587\u7ae0\u5f52\u6863","text":"<p>Info</p> <p>\u6709\u4eba\u8bf4\uff1a\u79cd\u4e00\u9897\u6811\uff0c\u6700\u597d\u7684\u65f6\u95f4\u662f\u5341\u5e74\u524d\uff0c\u5176\u6b21\u662f\u73b0\u5728...</p> 2024202320222021 <ul> <li>2024-08-18 k8s\u5305\u7ba1\u7406\u5de5\u5177Helm\u7684\u4f7f\u7528</li> <li>2024-08-16 K8S\u96c6\u7fa4\u90e8\u7f72\u6307\u5357(v1.27.9)</li> <li>2024-07-17 k8s\u5b9e\u7528\u5de5\u5177\u4e4bKtConnect </li> </ul> <ul> <li>2023-08-19 \u5b66\u4e60\u5e94\u8be5\u81ea\u5e95\u5411\u4e0a\uff0c\u8fd8\u662f\u81ea\u9876\u5411\u4e0b </li> <li>2023-06-15 \u4e2a\u4eba\u6218\u7565\u4e0a\u7684\u805a\u7126\u548c\u653e\u5f03 </li> </ul> <ul> <li>2022-11-10 \u63d0\u95ee\u7684\u667a\u6167</li> <li>2022-10-18 \u5982\u4f55\u9ad8\u6548\u5b66\u4e60\u5f00\u6e90\u9879\u76ee </li> <li>2022-05-01 \u6280\u672f\u4e00\u8a00</li> <li>2022-02-03 \u5982\u4f55\u66f4\u806a\u660e\u7684\u505a\u4e8b\u60c5 </li> </ul> <ul> <li>2021-07-12 k8s\u4e2detcd\u6302\u8f7d\u5185\u5b58\u5377\u6b65\u9aa4</li> <li>2021-07-10 k8s\u7684storageclass-nfs\u5b89\u88c5\u548c\u4f7f\u7528</li> <li>2021-07-08 k8s\u7684Dashboard\u5b89\u88c5</li> <li>2021-03-22 k8s\u90e8\u7f72\u5e38\u89c1\u95ee\u9898\u6c47\u603b</li> <li>2021-03-21 k8s\u4e2dyaml\u6587\u4ef6\u7684\u7f16\u5199\u548c\u4f7f\u7528</li> <li>2021-03-18 k8s\u5b9e\u7528\u5c0f\u6280\u5de7</li> <li>2021-03-18 k8s\u6838\u5fc3\u6982\u5ff5</li> <li>2021-03-09 k8s\u5e38\u7528\u547d\u4ee4\u603b\u7ed3</li> <li>2021-03-02 k8s\u96c6\u7fa4\u90e8\u7f72\u6307\u5357(v1.19.4) </li> </ul>"},{"location":"about/profile/","title":"\u4e2a\u4eba\u4e3b\u9875","text":"<p>AstonWang\u2018s Blog</p> <p>\u4e00\u5207\u770b\u4f3c\u901d\u53bb\u7684\uff0c\u90fd\u4e0d\u66fe\u79bb\u5f00\uff0c\u4f60\u6240\u7ed9\u4e88\u7684\u7231\u4e0e\u6e29\u6696\uff0c\u8ba9\u6211\u6267\u7740\u5730\u5b88\u62a4\u5728\u8fd9\u91cc</p> <p>About Site</p> <p>\u56e0\u4e2a\u4eba\u5e73\u65f6\u559c\u6b22\u559d\u5496\u5561\u548c\u542c\u97f3\u4e50\uff0c\u6240\u4ee5\u5c06\u672c\u7ad9\u53d6\u540d\u4e3aIceCoffee[\u7a7a\u8c37\u5e7d\u5170]\uff0cIceCoffee\u7684\u610f\u4e3a\u51b0\u5496\u5561\uff0c\u300a\u7a7a\u8c37\u5e7d\u5170\u300b\u5219\u662f\u53d6\u81ea\u97f3\u4e50\u8bd7\u4eba\u8bb8\u5dcd\u7684\u6b4c\u66f2\uff1b</p> <p>\u56de\u671b\u8d70\u8fc7\u7684\u8fd9\u4e9b\u5e74\uff0c\u65e0\u8bba\u662f\u8d70\u8fc7\u7684\u8def\u8fd8\u662f\u505a\u8fc7\u7684\u4e8b\uff0c\u603b\u4f1a\u5728\u65e0\u58f0\u7684\u65f6\u95f4\u91cc\u88ab\u6162\u6162\u6c89\u6dc0\uff0c\u4e8e\u6b64\u540c\u65f6\uff0c\u8bb0\u5fc6\u4e5f\u5728\u6162\u6162\u7684\u88ab\u65f6\u95f4\u7a00\u91ca\uff0c\u7a81\u7136\u7684\u67d0\u4e2a\u77ac\u95f4\uff0c\u53d1\u73b0\u4ec5\u9760\u8bb0\u5fc6\u53bb\u8bb0\u5f55\u7684\u751f\u6d3b\uff0c\u8fc7\u53bb\u7684\u5f88\u591a\u5149\u5f71\u90fd\u5df2\u6401\u6d45\u5728\u8bb0\u5f55\u91cc\uff0c\u4efb\u51ed\u81ea\u5df1\u600e\u4e48\u52aa\u529b\u56de\u60f3\uff0c\u80fd\u627e\u56de\u7684\u4e5f\u53ea\u6709\u96f6\u661f\u70b9\u70b9...</p> <p>\u4e8e\u662f\u4e4e\uff0c\u51b3\u5b9a\u4e3a\u672a\u6765\u7684\u81ea\u5df1\u505a\u4e00\u70b9\u6709\u8ff9\u53ef\u5faa\u7684\u4e8b\uff0c\u56e0\u6b64\u4fbf\u6709\u4e86\u8fd9\u4e2a\u7ad9\u70b9IceCoffee[\u7a7a\u8c37\u5e7d\u5170]\uff0c\u5f80\u540e\u7684\u65e5\u5b50\u5e0c\u671b\u81ea\u5df1\u80fd\u505a\u4e00\u4e2a\u957f\u671f\u4e3b\u4e49\u8005\uff0c\u575a\u6301\u4e0b\u53bb\uff0c\u7528\u5fc3\u6292\u5199...</p> <p>PS: \u8fd9\u4e00\u6b21\uff0c\u91cd\u65b0\u51fa\u53d1\uff0c\u628a\u4ee5\u524d\u96f6\u788e\u5206\u522b\u5206\u6563\u5728\u6709\u9053\u4e91\u7b14\u8bb0\u3001Notion\u3001\u8bed\u96c0\u4e2d\u5173\u4e8e\u5b66\u4e60\u3001\u5173\u4e8e\u6280\u672f\u3001\u5173\u4e8e\u60f3\u6cd5\u7684\u788e\u7247\u5316\u7684\u5185\u5bb9\uff0c\u91cd\u65b0\u601d\u8003\u603b\u7ed3\u8f93\u51fa\u5230\u6b64\u7ad9\u70b9\uff0c\u5e0c\u671b\u80fd\u5e2e\u52a9\u5230\u5927\u5bb6\uff0c\u4e5f\u5e0c\u671b\u5927\u5bb6\u80fd\u591f\u591a\u591a\u652f\u6301\uff01\uff08\u5982\u679c\u9519\u8bef\uff0c\u6b22\u8fce\u6307\u6b63\uff01\uff09</p> <p></p> <p>About Me</p> <ul> <li> Hey, I'm AstonWang! \u4e00\u4e2a\u5496\u5561\u91cd\u5ea6\u7231\u597d\u8005...</li> <li> \u76ee\u524d\u4e3b\u8981\u4ece\u4e8b\u540e\u7aef+ModelOps\u65b9\u5411\u7684\u5de5\u4f5c...</li> <li> \u559c\u6b22\u7814\u7a76\u65b0\u6280\u672f\uff0c\u70ed\u8877\u5728Github\u95f2\u901b,\u529b\u4e89\u505a\u4e00\u4e2a\u5168\u6cbe\u624b\u827a\u4eba...</li> </ul> <p>About \u4e00\u8a00</p> <ul> <li> \u6211\u8ba4\u6e05\u65f6\u95f4\u7684\u65f6\u5019\uff0c\u53ea\u5269\u4e0b\u4e00\u5bf8\u5149\u9634\uff0c\u8fd9\u662f\u6211\u7684\u4e2a\u4eba\u4e3b\u9875\uff0c\u5230\u5904\u662f\u5c81\u6708\u75d5\u8ff9...</li> <li> \u65e5\u51fa\u672a\u5fc5\u610f\u5473\u7740\u5149\u660e\uff0c\u592a\u9633\u4e5f\u65e0\u975e\u662f\u4e00\u9897\u6668\u661f\uff0c\u53ea\u6709\u5728\u6211\u4eec\u9192\u7740\u65f6\uff0c\u624d\u662f\u771f\u6b63\u7684\u7834\u6653...</li> </ul> Python Go \u6570\u636e\u5206\u6790 \u673a\u5668\u5b66\u4e60 Shell <p> <p> </p> <p> </p> <p>Send Email </p>"},{"location":"notehub/cloud_native/k8s/helm_usage/","title":"k8s\u5305\u7ba1\u7406\u5de5\u5177Helm\u7684\u4f7f\u7528","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm","title":"Helm\u6982\u8ff0","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#_1","title":"\u57fa\u672c\u4fe1\u606f","text":"<ul> <li>Github\u5730\u5740\uff1aHelm</li> <li>\u6587\u6863\u5730\u5740</li> <li>\u5f53\u524d\u6700\u65b0\u7248\u672cv3.15.4\uff0c\u5f53\u524dStar\u657026.6k.</li> <li>Chart\u5305\u6258\u7ba1\u5e73\u53f0\uff1aArtifactHub</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_1","title":"Helm\u662f\u4ec0\u4e48\uff1f","text":"<p>Helm\u662fKubernetes\uff08K8S\uff09\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0cHelm\u4e3b\u8981\u662f\u7528\u6765\u7ba1\u7406Chart\u5305\uff0c\u7c7b\u4f3c\u4e8ePython\u7684pip\u3001CentOS\u7684yum\u3001MacOS\u7684brew\u7b49\u3002Helm\u4e3b\u8981\u6709\u4e09\u5927\u57fa\u672c\u6982\u5ff5\uff0c\u5206\u522b\u4e3a\uff1a</p> <ul> <li>Chart: \u4ee3\u8868\u4e00\u4e2aHelm\u5305\uff0c\u5b83\u5305\u542b\u4e86\u5728K8S\u96c6\u7fa4\u4e2d\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u3001\u5de5\u5177\u6216\u670d\u52a1\u6240\u9700\u8981\u7684\u6240\u6709YAML\u683c\u5f0f\u7684\u8d44\u6e90\u5b9a\u4e49\u6587\u4ef6\u4ee5\u53ca\u8fd9\u4e9b\u8d44\u6e90\u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u901a\u8fc7Helm Chart\u5305\u6765\u6574\u4f53\u7ef4\u62a4\u8fd9\u4e9b\u8d44\u6e90\u3002</li> <li>Repository\uff1a\u5b83\u662f\u7528\u6765\u5b58\u653e\u548c\u5171\u4eabHelm Chart\u7684\u5730\u65b9\uff0c\u7c7b\u4f3c\u4e8e\u5b58\u653e\u6e90\u7801\u7684Github\u7684Repository\uff0c\u4ee5\u53ca\u5b58\u653e\u955c\u50cf\u7684Docker\u7684Repository\u3002</li> <li>Release: \u5b83\u662f\u8fd0\u884c\u5728K8S\u96c6\u7fa4\u4e2d\u7684Chart\u7684\u5b9e\u4f8b\u3002\u4e00\u4e2aChart\u901a\u5e38\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u96c6\u7fa4\u4e2d\u5b89\u88c5\u591a\u6b21\u3002\u6bcf\u4e00\u6b21\u5b89\u88c5\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Release\u3002</li> </ul> <p>Helm\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2ahelm\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u8be5\u5de5\u5177\u53ef\u4ee5\u57fa\u4e8eChartb\u5305\u4e00\u952e\u521b\u5efa\u5e94\u7528\uff0c\u5728\u521b\u5efa\u5e94\u7528\u65f6\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49Chart\u914d\u7f6e\u3002\u5e94\u7528\u53d1\u5e03\u8005\u53ef\u4ee5\u901a\u8fc7Helm\u6253\u5305\u5e94\u7528\u3001\u7ba1\u7406\u5e94\u7528\u4f9d\u8d56\u7ba1\u7406\uff0c\u7ba1\u7406\u5e94\u7528\u7248\u672c\u3001\u5e76\u53d1\u5e03\u5e94\u7528\u5230\u8f6f\u4ef6\u4ed3\u5e93\u3002</p> <ul> <li>\u5bf9\u4e8e\u4f7f\u7528\u8005\u6765\u8bf4\uff0c\u4f7f\u7528Helm\u540e\u4e0d\u9700\u8981\u5199\u590d\u6742\u7684\u5e94\u7528\u90e8\u7f72\u6587\u4ef6\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u5728K8S\u4e0a\u67e5\u627e\u3001\u5b89\u88c5\u3001\u5347\u7ea7\u3001\u56de\u6eda\u4ee5\u53ca\u5378\u8f7d\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_2","title":"Helm\u67b6\u6784","text":"<p>Helm Client\uff08helm\u547d\u4ee4\uff09\u548cHelm Chart\u5305\u65f6\u6838\u5fc3\uff0chelm\u547d\u4ee4\u53ef\u4ee5\u4eceChart Repository\u4e2d\u4e0b\u8f7dHelm Chart\u5305\uff0c\u8bfb\u53d6kubeconfig\u6587\u4ef6\uff0c\u5e76\u6784\u5efakube-apiserver REST API \u63a5\u53e3\u7684HTTP\u8bf7\u6c42\uff0c\u901a\u8fc7\u8c03\u7528K8S\u63d0\u4f9b\u7684REST API \u63a5\u53e3\uff0c\u5c06Chart\u5305\u4e2d\u5305\u542b\u7684YAML\u683c\u5f0f\u5b9a\u4e49\u7684K8S\u8d44\u6e90\uff0c\u5728K8S\u96c6\u7fa4\u4e2d\u521b\u5efa\uff0c \u8fd9\u4e9b\u8d44\u6e90\u4ee5Release\u7684\u5f62\u5f0f\u5b58\u5728\u4e0eK8S\u96c6\u7fa4\u4e2d\uff0c\u6bcf\u4e2aRelease \u53c8\u5305\u542b\u591a\u4e2aK8S\u8d44\u6e90\uff0c\u5982Deployment\u3001Pod\u3001Service\u7b49\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_3","title":"Helm\u7ec4\u6210","text":"<ul> <li> <p>\u6a21\u677f\u6587\u4ef6</p> </li> <li> <p>\u3010\u901a\u5e38\u6709\u591a\u4e2a\u3011\uff0c\u57fa\u4e8e<code>text/template</code> \u6a21\u677f\u6587\u4ef6\uff0c\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u6a21\u677f\u6e32\u67d3\u80fd\u529b\u3002Helm\u53ef\u4ee5\u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u503c\u6e32\u67d3\u8fdb\u6a21\u677f\u6587\u4ef6\u4e2d\uff0c\u6700\u7ec8\u751f\u6210\u4e00\u4e2a\u53ef\u4ee5\u90e8\u7f72\u7684K8S YAML\u683c\u5f0f\u7684\u8d44\u6e90\u5b9a\u4e49\u6587\u4ef6\u3002</p> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6</p> </li> <li> <p>\u3010\u901a\u5e38\u6709\u4e00\u4e2a\u3011\u3002</p> </li> </ul> <p>\u603b\u7ed3\uff1a</p> <ul> <li>\u5728Helm\u4e2d\uff0c\u90e8\u7f72\u4e00\u4e2a\u5e94\u7528\u53ef\u4ee5\u7b80\u5316\u4e3aChart\u6a21\u677f\uff08\u591a\u4e2a\u670d\u52a1\uff09+ Chart\u914d\u7f6e \u2014&gt; \u5e94\u7528\u3002</li> <li>Chart\u6a21\u677f\u4e00\u4e2a\u5e94\u7528\u53ea\u7528\u7f16\u5199\u4e00\u6b21\uff0c\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\uff0c\u518d\u90e8\u7f72\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684\u914d\u7f6e\uff0c\u4ece\u800c\u5c06\u5e94\u7528\u90e8\u7f72\u5230\u4e0d\u540c\u73af\u5883\u6216\u540c\u4e00\u73af\u5883\u90e8\u7f72\u4e0d\u540c\u914d\u7f6e\u7684\u5e94\u7528\u3002</li> </ul> <p></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_4","title":"Helm\u5b89\u88c5","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<ul> <li>\u4e00\u4e2a\u53ef\u7528\u7684K8S\u96c6\u7fa4</li> <li>\u786e\u5b9a\u5b89\u88c5\u7248\u672c\u548c\u5b89\u5168\u914d\u7f6e</li> <li>\u5b89\u88c5\u548c\u914d\u7f6eHelm</li> </ul> <p>\u5b89\u88c5</p> <ul> <li>\u5b98\u65b9\u5b89\u88c5\u6307\u5357</li> <li>Helm \u5404\u4e2a\u7248\u672c\u5b89\u88c5\u5305\uff1aHelm Releases</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#_3","title":"\u5b89\u88c5\u6b65\u9aa4","text":"Bash<pre><code>$ wget https://get.helm.sh/helm-v3.15.4-linux-amd64.tar.gz\n$ tar -xvzf helm-v3.15.4-linux-amd64.tar.gz\n$ mv linux-amd64/helm /usr/local/bin/helm\n$ chmod +x /usr/local/bin/helm\n$ helm version  # \u8f93\u51fa\u7248\u672c\u53f7\u5373\u8868\u793a\u5b89\u88c5\u6210\u529f\n######log info ########\nversion.BuildInfo{Version:\"v3.15.4\", GitCommit:\"fa9efb07d9d8debbb4306d72af76a383895aa8c4\", GitTreeState:\"clean\", GoVersion:\"go1.22.6\"}\n</code></pre> <p>\u5b89\u88c5helm\u547d\u4ee4\u81ea\u52a8\u8865\u5168\u811a\u672c\uff08\u975e\u5fc5\u987b\uff09</p> <ul> <li>\u6587\u6863\u53c2\u8003</li> </ul> Bash<pre><code>helm completion bash &gt; /etc/bash_completion.d/helm\n</code></pre> <ul> <li>\u6267\u884c helm comp\uff0c\u5c31\u4f1a\u81ea\u52a8\u8865\u5168\u4e3ahelm completion\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_5","title":"Helm\u4f7f\u7528","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_6","title":"Helm\u5e38\u7528\u547d\u4ee4\u6c47\u603b","text":"\u547d\u4ee4 \u63cf\u8ff0 completion \u751f\u6210\u6307\u5b9aShell\u7684\u81ea\u52a8\u8865\u5168\u811a\u672c\uff0c\u6bd4\u5982bash\u3001zsh\u7b49 create \u521b\u5efa\u4e00\u4e2a Chart \u5e76\u6307\u5b9a\u540d\u5b57 dependency \u7ba1\u7406 Chart \u4f9d\u8d56 env \u6253\u5370Helm\u5ba2\u6237\u7aef\u7684\u73af\u5883\u53d8\u91cf\u4fe1\u606f\uff0c\u4f8b\u5982HELM_CACHE_HOME\u3001HELM_NAMESPACE\u3001HELM_REPOSITORY_CONFIG\u7b49 get \u4e0b\u8f7d\u4e00\u4e2a Release\u3002\u53ef\u7528\u5b50\u547d\u4ee4\uff1aall\u3001hooks\u3001manifest\u3001notes\u3001values help \u6253\u5370helm\u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f history \u83b7\u53d6 Release\u5386\u53f2 install \u5b89\u88c5\u4e00\u4e2a Chart lint \u68c0\u67e5\u4e00\u4e2aChart\u5305\uff0c\u5e76\u6253\u5370\u6f5c\u5728\u7684\u95ee\u9898 list \u5217\u51fa Release package \u5c06 Chart \u76ee\u5f55\u6253\u5305\u5230 Chart \u5b58\u50a8\u6587\u4ef6\u4e2d plugin Helm\u63d2\u4ef6 pull \u4ece\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u4e0b\u8f7d Chart \u5e76\u89e3\u538b\u5230\u672c\u5730\uff0c\u4f8b\u5982helm pull stable/redis --untar repo \u6dfb\u52a0\uff08add\uff09\u3001\u5217\u51fa\uff08list\uff09\u3001\u79fb\u9664\uff08remove\uff09\u3001\u66f4\u65b0\uff08update\uff09\u548c\u7d22\u5f15\uff08index\uff09Chart \u4ed3\u5e93 rollback \u4ece\u4e4b\u524d\u7248\u672c\u56de\u6eda search \u6839\u636e\u5173\u952e\u5b57\u641c\u7d22 Charts\uff0c\u53ef\u7528\u5b50\u547d\u4ee4\uff1ahub\u3001repo show \u67e5\u770b Chart \u8be6\u7ec6\u4fe1\u606f\u3002\u53ef\u7528\u5b50\u547d\u4ee4\uff1aall\u3001chart\u3001readme\u3001values status \u663e\u793a\u5df2\u547d\u540d\u7248\u672c\u7684\u72b6\u6001 template \u672c\u5730\u5448\u73b0\u6a21\u677f test \u5728 Release \u4e2d\u8fd0\u884c Helm \u4e2d\u7684\u9884\u5b9a\u4e49\u6d4b\u8bd5 uninstall \u5378\u8f7d\u4e00\u4e2a Release upgrade \u66f4\u65b0\u4e00\u4e2a Release verify \u9a8c\u8bc1\u7ed9\u5b9a\u8def\u5f84\u7684Chart\u662f\u5426\u5df2\u88ab\u7b7e\u540d\u4e14\u6709\u6548 version \u67e5\u770b Helm \u5ba2\u6237\u7aef\u7248\u672c","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/","title":"k8s\u5e38\u7528\u547d\u4ee4\u603b\u7ed3","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#1","title":"1. \u521b\u5efa/\u5220\u9664\u8d44\u6e90","text":"<p>\u4e00\u822c\u4f1a\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u901a\u8fc7yaml\u6587\u4ef6</li> <li>\u547d\u4ee4\u521b\u5efa\u3002</li> </ul> Bash<pre><code># \u901a\u8fc7\u6587\u4ef6\u521b\u5efa\u4e00\u4e2aDeployment\nkubectl create -f /path/to/deployment.yaml\ncat /path/to/deployment.yaml | kubectl create -f -\n\n# \u4e0d\u8fc7\u4e00\u822c\u53ef\u80fd\u66f4\u5e38\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u521b\u5efa\u8d44\u6e90\nkubectl apply -f /path/to/deployment.yaml\n\n# \u5220\u9664\u8d44\u6e90\nkubectl delete -f /path/to/deployment.yaml\n\u6216 \nkubectl delete pod pod\u540d\u79f0\n\n\n# \u901a\u8fc7kubectl\u547d\u4ee4\u76f4\u63a5\u521b\u5efa\nkubectl run nginx_app --image=nginx:1.9.1 --replicas=3\n</code></pre> <p>kubectl\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u66f4\u65b0\u8d44\u6e90\u7684\u547d\u4ee4\uff0c\u5982</p> <ul> <li>kubectl edit</li> <li>kubectl patch</li> <li>kubectl replace</li> </ul> Bash<pre><code># kubectl edit\uff1a\u76f8\u5f53\u4e8e\u5148\u7528get\u53bb\u83b7\u53d6\u8d44\u6e90\uff0c\u7136\u540e\u8fdb\u884c\u66f4\u65b0\uff0c\u6700\u540e\u5bf9\u66f4\u65b0\u540e\u7684\u8d44\u6e90\u8fdb\u884capply\nkubectl edit deployment/nginx_app\n\n# kubectl patch\uff1a\u4f7f\u7528\u8865\u4e01\u4fee\u6539\u3001\u66f4\u65b0\u67d0\u4e2a\u8d44\u6e90\u7684\u5b57\u6bb5\uff0c\u6bd4\u5982\u66f4\u65b0\u67d0\u4e2anode\nkubectl patch node/node-0 -p '{\"spec\":{\"unschedulable\":true}}'\nkubectl patch -f node-0.json -p '{\"spec\": {\"unschedulable\": \"true\"}}'\n\n# kubectl replace\uff1a\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u6765\u66ff\u6362\u8d44\u6e90\nkubectl replace -f /path/to/new_nginx_app.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#2","title":"2. \u67e5\u770b\u8d44\u6e90","text":"<p>\u83b7\u53d6\u4e0d\u540c\u79cd\u7c7b\u8d44\u6e90\u7684\u4fe1\u606f\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#21-nodes","title":"2.1 nodes\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl get nodes  # \u67e5\u770b\u96c6\u7fa4\u7684\u4fe1\u606f\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#22-pod","title":"2.2 pod\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl get pods  # \u67e5\u770bpods \n\nkubectl get pod -o wide  # \u67e5\u770b\u6307\u5b9apod\u7684\u8be6\u7ec6\u4fe1\u606f\n\nkubectl get pods --all-namespaces  # \u67e5\u770b\u6240\u6709\u547d\u540d\u7a7a\u95f4\u7684pods\n\u6216\u8005\nkubectl get pods -A\n\nkubectl get pods -n \u547d\u540d\u7a7a\u95f4\u540d pod\u540d\u79f0\n\n# kubectl describe \u8d44\u6e90\u7c7b\u578b \u8d44\u6e90\u540d\u79f0  \nkubectl describe pod nginx-XXXXXX  # \u67e5\u770b\u540d\u79f0\u4e3anginx-XXXXXX\u7684Pod\u7684\u4fe1\u606f\n\nkubectl delete pod pod\u540d --grace-period=0 --force  # \u5f3a\u5236\u5220\u9664\u4e00\u4e2apod(\u9002\u7528\u4e8e\u666e\u901adelete\u65e0\u6cd5\u5220\u9664\u7684\u573a\u666f)\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#23-deployments","title":"2.3 deployments\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl get deployments-A  # \u67e5\u770b\u6240\u6709\u7a7a\u95f4\u7684deployments\n\u6216\u8005\nkubectl get deployments --all-namespaces\n\nkubectl get deployments -n kube-system  # \u67e5\u770b\u6307\u5b9a\u547d\u540d\u7a7a\u95f4\u7684deployments\n\nkubectl describe deployment nginx  #\u67e5\u770b\u540d\u79f0\u4e3anginx\u7684Deployment\u7684\u4fe1\u606f\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#24-logs","title":"2.4  logs\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl logs\u00a0- \u67e5\u770bpod\u4e2d\u7684\u5bb9\u5668\u7684\u6253\u5370\u65e5\u5fd7\n\n(\u548c\u547d\u4ee4docker logs \u7c7b\u4f3c)\n\n# kubectl logs Pod\u540d\u79f0\n\n#\u67e5\u770b\u540d\u79f0\u4e3anginx-pod-XXXXXXX\u7684Pod\u5185\u7684\u5bb9\u5668\u6253\u5370\u7684\u65e5\u5fd7\n\nkubectl logs -f nginx-pod-XXXXXXX\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#25-exec","title":"2.5  exec \u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl exec\n- \u5728pod\u4e2d\u7684\u5bb9\u5668\u73af\u5883\u5185\u6267\u884c\u547d\u4ee4(\u548c\u547d\u4ee4docker exec \u7c7b\u4f3c)\n\n# kubectl exec Pod\u540d\u79f0 \u64cd\u4f5c\u547d\u4ee4\n\n# \u5728\u540d\u79f0\u4e3anginx-pod-xxxxxx\u7684Pod\u4e2d\u8fd0\u884cbash\nkubectl exec-it nginx-pod-xxxxxx /bin/bash\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#26-namespace","title":"2.6 namespace \u64cd\u4f5c","text":"Bash<pre><code>kubectl delete namespace \u540d\u79f0  # \u5220\u9664\u6307\u5b9anamespace \n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#26","title":"2.6 \u5176\u4ed6\u547d\u4ee4","text":"Bash<pre><code># \u6307\u5b9a\u8d44\u6e90\u7684\u4fe1\u606f\uff0c\u683c\u5f0f\uff1akubectl get &lt;resource_type&gt;/&lt;resource_name&gt;\uff0c\u6bd4\u5982\u83b7\u53d6deployment nginx_app\u7684\u4fe1\u606f\nkubectl get deployment/nginx_app -o wide\n\n# \u4e5f\u53ef\u4ee5\u5bf9\u6307\u5b9a\u7684\u8d44\u6e90\u8fdb\u884c\u683c\u5f0f\u5316\u8f93\u51fa\uff0c\u6bd4\u5982\u8f93\u51fa\u683c\u5f0f\u4e3ajson\u3001yaml\u7b49\nkubectl get deployment/nginx_app -o json\n\n# \u8fd8\u53ef\u4ee5\u5bf9\u8f93\u51fa\u7ed3\u679c\u8fdb\u884c\u81ea\u5b9a\u4e49\uff0c\u6bd4\u5982\u5bf9pod\u53ea\u8f93\u51fa\u5bb9\u5668\u540d\u79f0\u548c\u955c\u50cf\u540d\u79f0\nkubectl get pod httpd-app-5bc589d9f7-rnhj7 -o custom-columns=CONTAINER:.spec.containers[0].name,IMAGE:.spec.containers[0].image\n\n# \u83b7\u53d6\u67d0\u4e2a\u7279\u5b9akey\u7684\u503c\u8fd8\u53ef\u4ee5\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\u5f97\u5230\uff0c\u6b64\u76ee\u5f55\u53c2\u7167go template\u7684\u7528\u6cd5\uff0c\u4e14\u547d\u4ee4\u7ed3\u5c3e'\\n'\u662f\u4e3a\u4e86\u8f93\u51fa\u7ed3\u679c\u6362\u884c\nkubectl get pod httpd-app-5bc589d9f7-rnhj7 -o template --template='{{(index spec.containers 0).name}}{{\"\\n\"}}'\n\n#\u5176\u4ed6\u66f4\u591a\u547d\u4ee4\u4f7f\u7528kubectl get --help\u67e5\u770b\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#3","title":"3. \u90e8\u7f72\u547d\u4ee4\u96c6","text":"<p>\u90e8\u7f72\u547d\u4ee4\u5305\u62ec\u8d44\u6e90\u7684\u8fd0\u884c\u7ba1\u7406\u547d\u4ee4\u3001\u6269\u5bb9\u548c\u7f29\u5bb9\u547d\u4ee4\u548c\u81ea\u52a8\u6269\u7f29\u5bb9\u547d\u4ee4\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#31-rollout","title":"3.1 rollout\u547d\u4ee4","text":"<p>\u7ba1\u7406\u8d44\u6e90\u7684\u8fd0\u884c\uff0c\u6bd4\u5982eployment\u3001Daemonet\u3001StatefulSet\u7b49\u8d44\u6e90\u3002</p> <ul> <li>\u67e5\u770b\u90e8\u7f72\u72b6\u6001\uff1a\u6bd4\u5982\u66f4\u65b0deployment/nginx_app\u4e2d\u5bb9\u5668\u7684\u955c\u50cf\u540e\u67e5\u770b\u5176\u66f4\u65b0\u7684\u72b6\u6001\u3002</li> </ul> Bash<pre><code>kubectl set image deployment/nginx_app nginx=nginx:1.9.1\nkubectl rollout status deployment/nginx_app\n</code></pre> <ul> <li>\u8d44\u6e90\u7684\u6682\u505c\u53ca\u6062\u590d\uff1a\u53d1\u51fa\u4e00\u6b21\u6216\u591a\u6b21\u66f4\u65b0\u524d\u6682\u505c\u4e00\u4e2a Deployment\uff0c\u7136\u540e\u518d\u6062\u590d\u5b83\uff0c\u8fd9\u6837\u5c31\u80fd\u5728Deployment\u6682\u505c\u671f\u95f4\u8fdb\u884c\u591a\u6b21\u4fee\u590d\u5de5\u4f5c\uff0c\u800c\u4e0d\u4f1a\u53d1\u51fa\u4e0d\u5fc5\u8981\u7684 rollout\u3002</li> </ul> Bash<pre><code># \u6682\u505c\nkubectl rollout pause deployment/nginx_app\n\n# \u5b8c\u6210\u6240\u6709\u7684\u66f4\u65b0\u64cd\u4f5c\u547d\u4ee4\u540e\u8fdb\u884c\u6062\u590d\nkubectl rollout resume deployment/nginx_app\n</code></pre> <ul> <li>\u56de\u6eda\uff1a\u5982\u4e0a\u5bf9\u4e00\u4e2aDeployment\u7684image\u505a\u4e86\u66f4\u65b0\uff0c\u4f46\u662f\u5982\u679c\u9047\u5230\u66f4\u65b0\u5931\u8d25\u6216\u8bef\u66f4\u65b0\u7b49\u60c5\u51b5\u65f6\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u56de\u6eda\u3002</li> </ul> Bash<pre><code># \u56de\u6eda\u4e4b\u524d\u5148\u67e5\u770b\u5386\u53f2\u7248\u672c\u4fe1\u606f\nkubectl rollout history deployment/nginx_app\n\n# \u56de\u6eda\nkubectl rollout undo deployment/nginx_app\n\n# \u5f53\u7136\u4e5f\u53ef\u4ee5\u6307\u5b9a\u7248\u672c\u53f7\u56de\u6eda\u81f3\u6307\u5b9a\u7248\u672c\nkubectl rollout undo deployment/nginx_app --to-revision=&lt;version_index&gt;\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#32-scale","title":"3.2 scale\u547d\u4ee4","text":"<p>\u5bf9\u4e00\u4e2aDeployment\u3001RS\u3001StatefulSet\u8fdb\u884c\u6269/\u7f29\u5bb9\u3002</p> Bash<pre><code># \u6269\u5bb9\nkubectl scale deployment/nginx_app --replicas=5\n# \u5982\u679c\u662f\u7f29\u5bb9\uff0c\u628a\u5bf9\u5e94\u7684\u526f\u672c\u6570\u8bbe\u7f6e\u7684\u6bd4\u5f53\u524d\u7684\u526f\u672c\u6570\u5c0f\u5373\u53ef\n\n# \u53e6\u5916\uff0c\u8fd8\u53ef\u4ee5\u9488\u5bf9\u5f53\u524d\u7684\u526f\u672c\u6570\u76ee\u505a\u6761\u4ef6\u9650\u5236\uff0c\u6bd4\u5982\u5f53\u524d\u526f\u672c\u6570\u662f5\u5219\u8fdb\u884c\u7f29\u5bb9\u81f3\u526f\u672c\u6570\u76ee\u4e3a3\nkubectl scale --current-replicas=5 --replicas=3 deployment/nginx_app\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#33-autoscale","title":"3.3 autoscale\u547d\u4ee4","text":"<p>\u901a\u8fc7\u521b\u5efa\u4e00\u4e2aautoscaler\uff0c\u53ef\u4ee5\u81ea\u52a8\u9009\u62e9\u548c\u8bbe\u7f6e\u5728K8s\u96c6\u7fa4\u4e2dPod\u7684\u6570\u91cf\u3002</p> Bash<pre><code># \u57fa\u4e8eCPU\u7684\u4f7f\u7528\u7387\u521b\u5efa3-10\u4e2apod\nkubectl autoscale deployment/nginx_app --min=3 --max=10 --cpu_percent=80\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#4","title":"4. \u96c6\u7fa4\u7ba1\u7406\u547d\u4ee4","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#41-cordon-uncordon","title":"4.1 cordon &amp; uncordon\u547d\u4ee4","text":"<p>\u8bbe\u7f6e\u662f\u5426\u80fd\u591f\u5c06pod\u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a\u3002</p> Bash<pre><code># \u4e0d\u53ef\u8c03\u5ea6\nkubectl cordon node-0\n\n# \u5f53\u67d0\u4e2a\u8282\u70b9\u9700\u8981\u7ef4\u62a4\u65f6\uff0c\u53ef\u4ee5\u9a71\u9010\u8be5\u8282\u70b9\u4e0a\u7684\u6240\u6709pods(\u4f1a\u5220\u9664\u8282\u70b9\u4e0a\u7684pod\uff0c\u5e76\u4e14\u81ea\u52a8\u901a\u8fc7\u4e0a\u9762\u547d\u4ee4\u8bbe\u7f6e\n# \u8be5\u8282\u70b9\u4e0d\u53ef\u8c03\u5ea6\uff0c\u7136\u540e\u5728\u5176\u4ed6\u53ef\u7528\u8282\u70b9\u91cd\u65b0\u542f\u52a8pods)\nkubectl drain node-0\n\n# \u5f85\u5176\u7ef4\u62a4\u5b8c\u6210\u540e\uff0c\u53ef\u518d\u8bbe\u7f6e\u8be5\u8282\u70b9\u4e3a\u53ef\u8c03\u5ea6\nkubectl uncordon node-0\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#42-taint","title":"4.2 taint\u547d\u4ee4","text":"<p>\u76ee\u524d\u4ec5\u80fd\u4f5c\u7528\u4e8e\u8282\u70b9\u8d44\u6e90\uff0c\u4e00\u822c\u8fd9\u4e2a\u547d\u4ee4\u901a\u5e38\u4f1a\u7ed3\u5408pod\u7684tolerations\u5b57\u6bb5\u7ed3\u5408\u4f7f\u7528\uff0c\u5bf9\u4e8e\u6ca1\u6709\u8bbe\u7f6e\u5bf9\u5e94toleration\u7684pod\u662f\u4e0d\u4f1a\u8c03\u5ea6\u5230\u6709\u8be5taint\u7684\u8282\u70b9\u4e0a\u7684\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u907f\u514dpod\u88ab\u8c03\u5ea6\u5230\u4e0d\u5408\u9002\u7684\u8282\u70b9\u4e0a\u3002\u4e00\u4e2a\u8282\u70b9\u7684taint\u4e00\u822c\u4f1a\u5305\u62eckey\u3001value\u548ceffect(effect\u53ea\u80fd\u5728NoSchedule, PreferNoSchedule, NoExecute\u4e2d\u53d6\u503c)\u3002</p> Bash<pre><code># \u8bbe\u7f6etaint\nkubecl taint nodes node-0 key1=value1:NoSchedule\n\n# \u79fb\u9664taint\nkubecl taint nodes node-0 key1:NoSchedule-\n</code></pre> <p>\u5982\u679cpod\u60f3\u8981\u88ab\u8c03\u5ea6\u5230\u4e0a\u8ff0\u8bbe\u7f6e\u4e86taint\u7684\u8282\u70b9node-0\u4e0a\uff0c\u5219\u9700\u8981\u5728\u8be5pod\u7684spec\u7684tolerations\u5b57\u6bb5\u8bbe\u7f6e\uff1a</p> YAML<pre><code>tolerations:\n- key: \"key1\"\n  operator: \"Equal\"\n  value: \"value1\"\n  effect: \"NoSchedule\"\n\n# \u6216\u8005\ntolerations:\n- key: \"key1\"\n  operator: \"Exists\"\n  effect: \"NoSchedule\"\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#5","title":"5. \u5176\u5b83","text":"Bash<pre><code># \u6620\u5c04\u7aef\u53e3\u5141\u8bb8\u5916\u90e8\u8bbf\u95ee\nkubectl expose deployment/nginx_app --type='NodePort' --port=80\n# \u7136\u540e\u901a\u8fc7kubectl get services -o wide\u6765\u67e5\u770b\u88ab\u968f\u673a\u6620\u5c04\u7684\u7aef\u53e3\n# \u5982\u6b64\u5c31\u53ef\u4ee5\u901a\u8fc7node\u7684\u5916\u90e8IP\u548c\u7aef\u53e3\u6765\u8bbf\u95eenginx\u670d\u52a1\u4e86\n\n# \u8f6c\u53d1\u672c\u5730\u7aef\u53e3\u8bbf\u95eePod\u7684\u5e94\u7528\u670d\u52a1\u7a0b\u5e8f\nkubectl port-forward nginx_app_pod_0 8090:80\n# \u5982\u6b64\uff0c\u672c\u5730\u53ef\u4ee5\u8bbf\u95ee\uff1acurl -i localhost:8090\n\n# \u5728\u521b\u5efa\u6216\u542f\u52a8\u67d0\u4e9b\u8d44\u6e90\u7684\u65f6\u5019\u6ca1\u6709\u8fbe\u5230\u9884\u671f\u7ed3\u679c\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5148\u7b80\u5355\u8fdb\u884c\u6545\u969c\u5b9a\u4f4d\nkubectl describe deployment/nginx_app\nkubectl logs nginx_pods\nkubectl exec nginx_pod -c nginx-app &lt;command&gt;\n\n# \u96c6\u7fa4\u5185\u90e8\u8c03\u7528\u63a5\u53e3(\u6bd4\u5982\u7528curl\u547d\u4ee4)\uff0c\u53ef\u4ee5\u91c7\u7528\u4ee3\u7406\u7684\u65b9\u5f0f\uff0c\u6839\u636e\u8fd4\u56de\u7684ip\u53ca\u7aef\u53e3\u4f5c\u4e3abaseurl\nkubectl proxy &amp;\n\n# \u67e5\u770bK8s\u652f\u6301\u7684\u5b8c\u6574\u8d44\u6e90\u5217\u8868\nkubectl api-resources\n\n# \u67e5\u770bK8s\u652f\u6301\u7684api\u7248\u672c\nkubectl api-versions\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#_1","title":"\u672a\u5f52\u6863\u547d\u4ee4\u5927\u7efc\u5408","text":"Bash<pre><code># \u67e5\u770b\u5177\u4f53pods\uff0c\u8bb0\u5f97\u540e\u8fb9\u8ddfnamespace\u540d\u5b57\u54e6\nkubectl get pods  kubernetes-dashboard-76479d66bb-nj8wr --namespace=kube-system\n# \u67e5\u770bpods\u5177\u4f53\u4fe1\u606f\nkubectl get pods -o wide kubernetes-dashboard-76479d66bb-nj8wr --namespace=kube-system\n# \u67e5\u770b\u96c6\u7fa4\u5065\u5eb7\u72b6\u6001\nkubectl get cs\n# \u83b7\u53d6\u6240\u6709deployment\nkubectl get deployment --all-namespaces\n# \u5217\u51fa\u8be5 namespace \u4e2d\u7684\u6240\u6709 pod \u5305\u62ec\u672a\u521d\u59cb\u5316\u7684\nkubectl get pods --include-uninitialized\n# \u67e5\u770bdeployment()\nkubectl get deployment nginx-app\n# \u67e5\u770brc\u548cservers\nkubectl get rc,services\n# \u67e5\u770bpods\u7ed3\u6784\u4fe1\u606f\uff08\u91cd\u70b9\uff0c\u901a\u8fc7\u8fd9\u4e2a\u770b\u65e5\u5fd7\u5206\u6790\u9519\u8bef\uff09\n# \u5bf9\u63a7\u5236\u5668\u548c\u670d\u52a1\uff0cnode\u540c\u6837\u6709\u6548\nkubectl describe pods xxxxpodsname --namespace=xxxnamespace\n# \u5176\u4ed6\u63a7\u5236\u5668\u7c7b\u4f3c\u5427\uff0c\u5c31\u662fkubectl get \u63a7\u5236\u5668 \u63a7\u5236\u5668\u5177\u4f53\u540d\u79f0\n# \u67e5\u770bpod\u65e5\u5fd7\nkubectl logs $POD_NAME\n# \u67e5\u770bpod\u53d8\u91cf\nkubectl exec my-nginx-5j8ok -- printenv | grep SERVICE\n# \u96c6\u7fa4\nkubectl get cs           # \u96c6\u7fa4\u5065\u5eb7\u60c5\u51b5\nkubectl cluster-info     # \u96c6\u7fa4\u6838\u5fc3\u7ec4\u4ef6\u8fd0\u884c\u60c5\u51b5\nkubectl get namespaces    # \u8868\u7a7a\u95f4\u540d\nkubectl version           # \u7248\u672c\nkubectl api-versions      # API\nkubectl get events       # \u67e5\u770b\u4e8b\u4ef6\nkubectl get nodes      //\u83b7\u53d6\u5168\u90e8\u8282\u70b9\nkubectl delete node k8s2  //\u5220\u9664\u8282\u70b9\nkubectl rollout status deploy nginx-test\n# \u521b\u5efa\nkubectl create -f ./nginx.yaml           # \u521b\u5efa\u8d44\u6e90\nkubectl create -f .                            # \u521b\u5efa\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709yaml\u8d44\u6e90\nkubectl create -f ./nginx1.yaml -f ./mysql2.yaml     # \u4f7f\u7528\u591a\u4e2a\u6587\u4ef6\u521b\u5efa\u8d44\u6e90\nkubectl create -f ./dir                        # \u4f7f\u7528\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6e05\u5355\u6587\u4ef6\u6765\u521b\u5efa\u8d44\u6e90\nkubectl create -f https://git.io/vPieo         # \u4f7f\u7528 url \u6765\u521b\u5efa\u8d44\u6e90\nkubectl run -i --tty busybox --image=busybox    ----\u521b\u5efa\u5e26\u6709\u7ec8\u7aef\u7684pod\nkubectl run nginx --image=nginx                # \u542f\u52a8\u4e00\u4e2a nginx \u5b9e\u4f8b\nkubectl run mybusybox --image=busybox --replicas=5    ----\u542f\u52a8\u591a\u4e2apod\nkubectl explain pods,svc                       # \u83b7\u53d6 pod \u548c svc \u7684\u6587\u6863\n# \u66f4\u65b0\nkubectl rolling-update python-v1 -f python-v2.json           # \u6eda\u52a8\u66f4\u65b0 pod frontend-v1\nkubectl rolling-update python-v1 python-v2 --image=image:v2  # \u66f4\u65b0\u8d44\u6e90\u540d\u79f0\u5e76\u66f4\u65b0\u955c\u50cf\nkubectl rolling-update python --image=image:v2                 # \u66f4\u65b0 frontend pod \u4e2d\u7684\u955c\u50cf\nkubectl rolling-update python-v1 python-v2 --rollback        # \u9000\u51fa\u5df2\u5b58\u5728\u7684\u8fdb\u884c\u4e2d\u7684\u6eda\u52a8\u66f4\u65b0\ncat pod.json | kubectl replace -f -                              # \u57fa\u4e8e stdin \u8f93\u5165\u7684 JSON \u66ff\u6362 pod\n\u5f3a\u5236\u66ff\u6362\uff0c\u5220\u9664\u540e\u91cd\u65b0\u521b\u5efa\u8d44\u6e90\u3002\u4f1a\u5bfc\u81f4\u670d\u52a1\u4e2d\u65ad\u3002\nkubectl replace --force -f ./pod.json\n\u4e3a nginx RC \u521b\u5efa\u670d\u52a1\uff0c\u542f\u7528\u672c\u5730 80 \u7aef\u53e3\u8fde\u63a5\u5230\u5bb9\u5668\u4e0a\u7684 8000 \u7aef\u53e3\nkubectl expose rc nginx --port=80 --target-port=8000\n\n\u66f4\u65b0\u5355\u5bb9\u5668 pod \u7684\u955c\u50cf\u7248\u672c\uff08tag\uff09\u5230 v4\nkubectl get pod nginx-pod -o yaml | sed 's/\\(image: myimage\\):.*$/\\1:v4/' | kubectl replace -f -\nkubectl label pods nginx-pod new-label=awesome                      # \u6dfb\u52a0\u6807\u7b7e\nkubectl annotate pods nginx-pod icon-url=http://goo.gl/XXBTWq       # \u6dfb\u52a0\u6ce8\u89e3\nkubectl autoscale deployment foo --min=2 --max=10                # \u81ea\u52a8\u6269\u5c55 deployment \u201cfoo\u201d\n# \u7f16\u8f91\u8d44\u6e90\nkubectl edit svc/docker-registry                      # \u7f16\u8f91\u540d\u4e3a docker-registry \u7684 service\nKUBE_EDITOR=\"nano\" kubectl edit svc/docker-registry   # \u4f7f\u7528\u5176\u5b83\u7f16\u8f91\u5668\n# \u52a8\u6001\u4f38\u7f29pod\nkubectl scale --replicas=3 rs/foo                                 # \u5c06foo\u526f\u672c\u96c6\u53d8\u62103\u4e2a\nkubectl scale --replicas=3 -f foo.yaml                            # \u7f29\u653e\u201cfoo\u201d\u4e2d\u6307\u5b9a\u7684\u8d44\u6e90\u3002\nkubectl scale --current-replicas=2 --replicas=3 deployment/mysql  # \u5c06deployment/mysql\u4ece2\u4e2a\u53d8\u62103\u4e2a\nkubectl scale --replicas=5 rc/foo rc/bar rc/baz                   # \u53d8\u66f4\u591a\u4e2a\u63a7\u5236\u5668\u7684\u6570\u91cf\nkubectl rollout status deploy deployment/mysql                         # \u67e5\u770b\u53d8\u66f4\u8fdb\u5ea6\n# \u5220\u9664\nkubectl delete -f ./pod.json                                              # \u5220\u9664 pod.json \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u7c7b\u578b\u548c\u540d\u79f0\u7684 pod\nkubectl delete pod,service baz foo                                        # \u5220\u9664\u540d\u4e3a\u201cbaz\u201d\u7684 pod \u548c\u540d\u4e3a\u201cfoo\u201d\u7684 service\nkubectl delete pods,services -l name=myLabel                              # \u5220\u9664\u5177\u6709 name=myLabel \u6807\u7b7e\u7684 pod \u548c serivce\nkubectl delete pods,services -l name=myLabel --include-uninitialized      # \u5220\u9664\u5177\u6709 name=myLabel \u6807\u7b7e\u7684 pod \u548c service\uff0c\u5305\u62ec\u5c1a\u672a\u521d\u59cb\u5316\u7684\nkubectl -n my-ns delete po,svc --all # \u5220\u9664 my-ns namespace\u4e0b\u7684\u6240\u6709 pod \u548c serivce\uff0c\u5305\u62ec\u5c1a\u672a\u521d\u59cb\u5316\u7684\nkubectl delete pods prometheus-7fcfcb9f89-qkkf7 --grace-period=0 --force \u5f3a\u5236\u5220\u9664\n\n# \u4ea4\u4e92\nkubectl logs nginx-pod                                 # dump \u8f93\u51fa pod \u7684\u65e5\u5fd7\uff08stdout\uff09\nkubectl logs nginx-pod -c my-container                 # dump \u8f93\u51fa pod \u4e2d\u5bb9\u5668\u7684\u65e5\u5fd7\uff08stdout\uff0cpod \u4e2d\u6709\u591a\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff09\nkubectl logs -f nginx-pod                              # \u6d41\u5f0f\u8f93\u51fa pod \u7684\u65e5\u5fd7\uff08stdout\uff09\nkubectl logs -f nginx-pod -c my-container              # \u6d41\u5f0f\u8f93\u51fa pod \u4e2d\u5bb9\u5668\u7684\u65e5\u5fd7\uff08stdout\uff0cpod \u4e2d\u6709\u591a\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff09\nkubectl run -i --tty busybox --image=busybox -- sh  # \u4ea4\u4e92\u5f0f shell \u7684\u65b9\u5f0f\u8fd0\u884c pod\nkubectl attach nginx-pod -i                            # \u8fde\u63a5\u5230\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\nkubectl port-forward nginx-pod 5000:6000               # \u8f6c\u53d1 pod \u4e2d\u7684 6000 \u7aef\u53e3\u5230\u672c\u5730\u7684 5000 \u7aef\u53e3\nkubectl exec nginx-pod -- ls /                         # \u5728\u5df2\u5b58\u5728\u7684\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4\uff08\u53ea\u6709\u4e00\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\uff09\nkubectl exec nginx-pod -c my-container -- ls /         # \u5728\u5df2\u5b58\u5728\u7684\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4\uff08pod \u4e2d\u6709\u591a\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\uff09\nkubectl top pod POD_NAME --containers               # \u663e\u793a\u6307\u5b9a pod\u548c\u5bb9\u5668\u7684\u6307\u6807\u5ea6\u91cf\n# \u8c03\u5ea6\u914d\u7f6e\n$ kubectl cordon k8s-node                                                # \u6807\u8bb0 my-node \u4e0d\u53ef\u8c03\u5ea6\n$ kubectl drain k8s-node                                                 # \u6e05\u7a7a my-node \u4ee5\u5f85\u7ef4\u62a4\n$ kubectl uncordon k8s-node                                              # \u6807\u8bb0 my-node \u53ef\u8c03\u5ea6\n$ kubectl top node k8s-node                                              # \u663e\u793a my-node \u7684\u6307\u6807\u5ea6\u91cf\n$ kubectl cluster-info dump                                             # \u5c06\u5f53\u524d\u96c6\u7fa4\u72b6\u6001\u8f93\u51fa\u5230 stdout                                    \n$ kubectl cluster-info dump --output-directory=/path/to/cluster-state   # \u5c06\u5f53\u524d\u96c6\u7fa4\u72b6\u6001\u8f93\u51fa\u5230 /path/to/cluster-state\n#\u5982\u679c\u8be5\u952e\u548c\u5f71\u54cd\u7684\u6c61\u70b9\uff08taint\uff09\u5df2\u5b58\u5728\uff0c\u5219\u4f7f\u7528\u6307\u5b9a\u7684\u503c\u66ff\u6362\n$ kubectl taint nodes foo dedicated=special-user:NoSchedule\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/","title":"k8s\u90e8\u7f72\u5e38\u89c1\u95ee\u9898\u6c47\u603b","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#16643-was-refused","title":"1.\u7cfb\u7edf\u91cd\u542f\u4ee5\u540e6643 was refused","text":"Bash<pre><code># \u62a5\u9519\u5185\u5bb9\uff1a\n[root@centos801 ~]# kubectl get nodes\nThe connection to the server 192.168.33.130:6443 was refused - did you specify the right host or port?\n\n# \u89e3\u51b3\u65b9\u6848\nsudo -i  # \u4e3a\u4e86\u9891\u7e41\u7684\u6267\u884c\u67d0\u4e9b\u53ea\u6709\u8d85\u7ea7\u7528\u6237\u624d\u80fd\u6267\u884c\u7684\u6743\u9650\uff0c\u800c\u4e0d\u7528\u6bcf\u6b21\u8f93\u5165\u5bc6\u7801\nswapoff -a  # \u5173\u95ed\u7cfb\u7edf\u7684\u4ea4\u6362\u533a\u3002\nexit\nstrace -eopenat kubectl version\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#2nodejoin","title":"2.node\u8282\u70b9\u91cd\u65b0join\u65f6\uff0c\u9700\u8981\u6267\u884c\u4e0b\u5217\u547d\u4ee4","text":"Bash<pre><code>kubeadm reset\n\n# \u5982\u679c\u6709\u62a5\u9519\u4fe1\u606f\u5982\u4e0b\uff1a\nThe reset process does not clean CNI configuration. To do so, you must remove /etc/cni/net.d\n\nThe reset process does not reset or clean up iptables rules or IPVS tables.\nIf you wish to reset iptables, you must do so manually by using the \"iptables\" command.\n\nIf your cluster was setup to utilize IPVS, run ipvsadm --clear (or similar)\nto reset your system's IPVS tables.\n\nThe reset process does not clean your kubeconfig files and you must remove them manually.\nPlease, check the contents of the $HOME/.kube/config file.\n[root@centos803 ~]# iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n\n# \u5219\u6267\u884c\u547d\u4ee4\uff0c\u7136\u540e\u518d\u6267\u884cjoin\u64cd\u4f5c\niptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#3kube-flannel","title":"3.kube-flannel\u7684\u72b6\u6001\u5f02\u5e38","text":"<ul> <li> <p>\u5177\u4f53\u5f02\u5e38\u4fe1\u606f Bash<pre><code>[root@centos801 ~]# kubectl get pods -n kube-system\nNAME                                READY   STATUS              RESTARTS   AGE\ncoredns-6d56c8448f-hnjbz            0/1     ContainerCreating   0          14m\ncoredns-6d56c8448f-tc4j2            0/1     ContainerCreating   0          14m\netcd-centos801                      1/1     Running             0          14m\nkube-apiserver-centos801            1/1     Running             0          14m\nkube-controller-manager-centos801   1/1     Running             0          14m\nkube-flannel-ds-8bvql               0/1     CrashLoopBackOff    6          9m41s\nkube-flannel-ds-lj5vp               0/1     CrashLoopBackOff    6          8m52s\nkube-flannel-ds-qxgq9               0/1     CrashLoopBackOff    7          11m\nkube-proxy-jsssg                    1/1     Running             0          14m\nkube-proxy-pq9rf                    1/1     Running             0          8m52s\nkube-proxy-z77tv                    1/1     Running             0          9m41s\nkube-scheduler-centos801            1/1     Running             0          14m\n</code></pre></p> </li> <li> <p>\u9519\u8bef\u539f\u56e0\u662f\u5728\u8fdb\u884ckubeadm init\u65f6\u6ca1\u6709\u6dfb\u52a0\u5982\u4e0b\u53c2\u6570 Bash<pre><code>--pod-network-cidr=10.244.0.0/16\n</code></pre></p> </li> <li> <p>\u4f46\u662f\u68c0\u67e5\u521d\u59cb\u5316\u547d\u4ee4\u6709\u8fdb\u884c\u8bbe\u7f6e\u6b64\u53c2\u6570 Bash<pre><code>kubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.19.4 \\\n--service-cidr=10.96.0.0/12 \n--pod-network-cidr=10.244.0.0/16\n</code></pre></p> </li> <li> <p>\u5bfb\u601d\u5343\u904d\uff0c\u82b1\u4e86\u8fd1\u4e09\u4e2a\u5c0f\u65f6\u5728chrome\u3001kubeadm init\u3001kube join \u4e4b\u95f4\u8f97\u8f6c\u53cd\u4fa7 Bash<pre><code>[root@centos801 ~]# kubeadm init \\\n&gt; --apiserver-advertise-address=192.168.33.131 \\\n&gt; --image-repository registry.aliyuncs.com/google_containers \\\n&gt; --kubernetes-version v1.19.4 \nW0312 14:43:44.370062  280711 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[init] Using Kubernetes version: v1.19.4\n[preflight] Running pre-flight checks\n        [WARNING FileExisting-tc]: tc not found in system path\n        [WARNING Hostname]: hostname \"centos801\" could not be reached\n        [WARNING Hostname]: hostname \"centos801\": lookup centos801 on 114.114.114.114:53: no such host\n</code></pre></p> </li> <li> <p>\u53d1\u73b0\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u4e22\u5931\uff0c\u6700\u7ec8\u4eba\u50bb\u6389\u4e86\uff0c--pod-network-cidr \u524d\u9762\u6dfb\u52a0\u4e00\u4e2a \"\\\",\u518d\u91cd\u65b0\u6267\u884cinit\u547d\u4ee4\uff0c\u5373\u53ef\u89e3\u51b3\u95ee\u9898 Bash<pre><code>kubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.19.4 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16\n\n[root@centos801 ~]# kubectl get pods -n kube-system\nNAME                                READY   STATUS    RESTARTS   AGE\ncoredns-6d56c8448f-qhftp            1/1     Running   0          3m42s\ncoredns-6d56c8448f-w8h9n            1/1     Running   0          3m42s\netcd-centos801                      1/1     Running   0          3m58s\nkube-apiserver-centos801            1/1     Running   0          3m59s\nkube-controller-manager-centos801   1/1     Running   0          3m58s\nkube-flannel-ds-5fljb               1/1     Running   0          52s\nkube-flannel-ds-cxk58               1/1     Running   0          22s\nkube-flannel-ds-z9zpr               1/1     Running   0          2m2s\nkube-proxy-ftvsz                    1/1     Running   0          3m42s\nkube-proxy-j6x7f                    1/1     Running   0          22s\nkube-proxy-l6pxl                    1/1     Running   0          52s\nkube-scheduler-centos801            1/1     Running   0          3m58s\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#4initjoin","title":"4.\u91cd\u65b0\u8fdb\u884c\u96c6\u7fa4init\u548cjoin\u64cd\u4f5c\u7684\u6b63\u786e\u6d41\u7a0b","text":"Bash<pre><code># master\u548cnode\u8282\u70b9\u90fd\u9700\u8981\u6267\u884c\nkubeadm reset --force\niptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n\n# \u53ea\u5728master\u8282\u70b9\u6267\u884c\nkubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.19.4 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16 \n\n# \u53ea\u5728node\u8282\u70b9\u6267\u884c\nkubeadm join 192.168.33.131:6443 --token hxxxre.qbaa224113efwjs1 \\\n  --discovery-token-ca-cert-hash sha256:208d7b79e19f460c5311eeeddfc9102316932d877f717b8bb1bc86dbb85133a7\n</code></pre> <p>1/ \u5404\u7ec4\u4ef6\u542f\u52a8\u5931\u8d25\u65f6\uff0c\u5982\u4f55\u65b9\u4fbf\u7684\u67e5\u770b\u9519\u8bef\uff1f \u53ef\u4f7f\u7528\u547d\u4ee4 <code>systemctl status &lt;\u7ec4\u4ef6\u540d&gt;</code> \u6216 <code>journalctl -xefu &lt;\u7ec4\u4ef6\u540d&gt;</code>\u67e5\u770b\u65e5\u5fd7\u3002 2/ \u6ce8\u610fcgroup\u542f\u52a8\u95ee\u9898 Text Only<pre><code>failed to create kubelet: misconfiguration: kubelet cgroup driver: \"cgroupfs\" is different from docker cgroup driver: \"systemd\"\n</code></pre> kubelet \u9ed8\u8ba4\u4f7f\u7528 <code>cgroupfs</code> \u542f\u52a8\uff0c\u53ef\u4fee\u6539\u4e3adocker \u7684<code>systemd</code>\uff0c \u6216\u4fee\u6539docker \u542f\u52a8\u4e3a <code>cgroupfs</code>\u3002 docker \u4fee\u6539\u7684\u5730\u65b9\u4e3a /etc/docker/daemon.json Text Only<pre><code>{\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\n</code></pre> kuberlet \u53ef\u4fee\u6539systemd \u7684service\u4e2d\u542f\u52a8\u547d\u4ee4\u589e\u52a0<code>--cgroup-driver</code>\u53c2\u6570\uff1a Text Only<pre><code># \u53ef\u6307\u5b9a\u542f\u52a8\u53c2\u6570 \nDOCKER_CGROUPS=$(docker info | grep 'Cgroup' | cut -d' ' -f3)\n--cgroup-driver=$DOCKER_CGROUPS\n</code></pre> 3/ \u8282\u70b9\u5220\u9664\u540e\u5982\u4f55\u91cd\u65b0\u6388\u6743\uff1f \u8282\u70b9\u5220\u9664\u540e\uff0c\u91cd\u542f kubelet\u3002\u5728Master \u7aef\u662f\u770b\u4e0d\u5230\u7533\u8bf7\u4fe1\u606f\u7684\uff0c\u9700\u8981\u5c06\u4e0a\u6b21\u7533\u8bf7\u7684\u8bc1\u4e66\u5220\u9664\uff0c\u518d\u91cd\u542f\u3002 Text Only<pre><code># master\nkubectl delete node node01\n# node01 \nrm -f /opt/kubernetes/ssl/kubelet*\nsystemctl restart kubelet\n</code></pre> 4/ \u6392\u67e5pod\u65e0\u6cd5\u542f\u52a8\u7684\u601d\u8def Text Only<pre><code># 1. \u5148\u67e5\u770bpod\u7684\u6700\u8fd1\u7684\u64cd\u4f5c\nkubectl describe pod &lt;pod-name&gt; -n kube-system \n# 2. \u67e5\u770bpod \u7684\u65e5\u5fd7\nkubectl logs pod &lt;pod-name&gt;\n</code></pre> 5/ \u89e3\u51b3Dashboard 2.0 chrome\u6d4f\u89c8\u5668\u4e0d\u80fd\u8bbf\u95ee\u7684\u95ee\u9898 Text Only<pre><code>mkdir key &amp;&amp; cd key\n# 1 \u751f\u6210\u8bc1\u4e66\nopenssl genrsa -out dashboard.key 2048\nopenssl req -new -out dashboard.csr -key dashboard.key -subj '/CN=kubernetes-dashboard-certs'\nopenssl x509 -req -in dashboard.csr -signkey dashboard.key -out dashboard.crt\n# 2 \u5220\u9664\u539f\u6709\u7684\u8bc1\u4e66secret\nkubectl delete secret kubernetes-dashboard-certs -n kube-system\n# 3 \u521b\u5efa\u65b0\u7684\u8bc1\u4e66secret\nkubectl create secret generic kubernetes-dashboard-certs --from-file=dashboard.key --from-file=dashboard.crt -n kube-system\n# 4 \u67e5\u770bdashboard pod\uff0cv2.0\u662f -n kubernetes-dashboard\nkubectl get pod -n kube-system\n# 5 \u91cd\u542fdashboard pod\uff0cv2.0\u662f -n kubernetes-dashboard\nkubectl delete pod &lt;pod name&gt; -n kube-system\n</code></pre> 6/ \u5982\u4f55\u5f7b\u5e95\u7684\u5220\u9664\u4e00\u4e2apod? K8S\u4e2dpod \u662f\u6709<code>deployments</code>\u6765\u53d1\u5e03\u7684\uff0c\u6240\u4ee5\u76f4\u63a5\u5220\u9664pod\u540e\uff0ck8s\u65e0\u6cd5\u8bc6\u522b\u662f\u4eba\u4e3a\u8fd8\u662f\u6545\u969c\uff0c\u5b83\u4f1a\u6839\u636e<code>deployments</code> \u63cf\u8ff0\u7684\u4fe1\u606f\uff0c\u91cd\u65b0\u542f\u52a8\u4e00\u4e2apod\u3002\u6240\u4ee5\u8981\u5220\u9664pod \u65f6\uff0c\u76f4\u63a5\u5220\u9664\u5bf9\u5e94\u7684 <code>deployments</code>\uff0cpod\u4f1a\u81ea\u52a8\u5220\u9664\u3002 Text Only<pre><code>kubectl delete deployment &lt;deployment_name&gt; -n &lt;namespace&gt;\n</code></pre> 7/ \u8282\u70b9\u7ef4\u62a4\u65f6\uff0c\u5982\u4f55\u624b\u52a8\u9a71\u8d76pod? Text Only<pre><code># 1\u3001\u6807\u8bb0\u8282\u70b9\u4e0d\u53ef\u8c03\u5ea6\nkubectl cordon &lt;node name&gt;\n# 2\u3001\u624b\u52a8\u8fc1\u79fbpod \nkubectl drain &lt;node name&gt; --delete-local-data --ignore-daemonsets --force\n# 3\u3001\u5e26\u8282\u70b9\u7ef4\u62a4\u5b8c\u6210\u4e4b\u540e\uff0c\u6062\u590d\u53ef\u8c03\u5ea6\nkubectl uncordon &lt;node name&gt;\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#5-kubeadm-k8s1194","title":"5. kubeadm \u5b89\u88c5k8s1.19.4\u9700\u8981\u7684\u955c\u50cf\u8bf4\u660e\uff1a","text":"<p>\u6267\u884ckubeadm init \u5361\u5728pull image \uff0c\u7531\u4e8e\u9ed8\u8ba4\u6e90\u662f\u8c37\u6b4c\uff0c\u955c\u50cf\u901a\u5e38\u62c9\u53d6\u4e0d\u4e0b\u6765\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u56fd\u5185\u6e90\u8fdb\u884c\u5fc5\u8981\u955c\u50cf\u7684\u62c9\u53d6</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step1kubeadm","title":"step1:\u67e5\u770b\u5f53\u524d\u7248\u672c\u7684kubeadm \u9700\u8981\u7684\u955c\u50cf\u5305\u548c\u7248\u672c","text":"Bash<pre><code>kubeadm  config images list  \n</code></pre> <ul> <li>\u65e5\u5fd7 Bash<pre><code>(base) [root@automlgpu4 k8s]# kubeadm config images list\nW0608 17:33:50.021855   83264 version.go:102] could not fetch a Kubernetes version from the internet: unable to get URL \"https://dl.k8s.io/release/stable-1.txt\": Get \"https://dl.k8s.io/release/stable-1.txt\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)\nW0608 17:33:50.022758   83264 version.go:103] falling back to the local client version: v1.19.4\nW0608 17:33:50.023105   83264 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\nk8s.gcr.io/kube-apiserver:v1.19.4\nk8s.gcr.io/kube-controller-manager:v1.19.4\nk8s.gcr.io/kube-scheduler:v1.19.4\nk8s.gcr.io/kube-proxy:v1.19.4\nk8s.gcr.io/pause:3.2\nk8s.gcr.io/etcd:3.4.13-0\nk8s.gcr.io/coredns:1.7.0\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step2","title":"step2:\u5c06\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\u5bfc\u51fa\u5e76\u7f16\u8f91","text":"<p>Bash<pre><code>kubeadm config print init-defaults &gt; kubeadm.conf \nvim kubeadm.conf  # \u6253\u5f00\u6587\u4ef6\u5e76\u4fee\u6539\n</code></pre> Bash<pre><code>(base) [root@automlgpu4 k8s]# vim kubeadm.conf \n\n 1 kubeadm.conf                                                                                                                                                                            X \n apiVersion: kubeadm.k8s.io/v1beta2\n bootstrapTokens:\n - groups:\n   - system:bootstrappers:kubeadm:default-node-token\n   token: abcdef.0123456789abcdef\n   ttl: 24h0m0s\n   usages:\n   - signing\n   - authentication\n kind: InitConfiguration\n localAPIEndpoint:\n   advertiseAddress: 172.16.2.117  # \u672c\u673a\u7684ip\n   bindPort: 6443\n nodeRegistration:\n   criSocket: /var/run/dockershim.sock\n   name: automlgpu4\n   taints:\n   - effect: NoSchedule\n     key: node-role.kubernetes.io/master\n ---\n apiServer:\n   timeoutForControlPlane: 4m0s\n apiVersion: kubeadm.k8s.io/v1beta2\n certificatesDir: /etc/kubernetes/pki\n clusterName: kubernetes\n controllerManager: {}\n dns:\n   type: CoreDNS\n etcd:\n   local:\n     dataDir: /var/lib/etcd\n imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers  # \u66f4\u66f4\u6362\u4e3a\u963f\u91cc\u955c\u50cf\u6e90\n kind: ClusterConfiguration\n kubernetesVersion: v1.19.4\n networking:\n   dnsDomain: cluster.local\n   serviceSubnet: 10.96.0.0/12\n scheduler: {}\n ~                                                                                                                                                                                           \n ~                                                                                                                                                                                           \n ~             \n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step3image","title":"step3:\u62c9\u53d6image","text":"Bash<pre><code>kubeadm config images pull --config kubeadm.conf \n</code></pre> <ul> <li>\u65e5\u5fd7 Bash<pre><code>(base) [root@automlgpu4 k8s]# kubeadm config images pull --config kubeadm.conf\nW0608 17:09:52.812134   60183 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.13-0\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step4","title":"step4: \u4fee\u6539\u955c\u50cf\u6807\u7b7e","text":"Bash<pre><code>docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.4 k8s.gcr.io/kube-apiserver:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.4 k8s.gcr.io/kube-controller-manager:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.4 k8s.gcr.io/kube-scheduler:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.4 k8s.gcr.io/kube-proxy:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2 k8s.gcr.io/pause:3.2\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.13-0 k8s.gcr.io/etcd:3.4.13-0\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0 k8s.gcr.io/coredns:1.7.0\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step5kubeadm-init","title":"step5:\u6267\u884ckubeadm init \u64cd\u4f5c","text":"Bash<pre><code>kubeadm init --config kubeadm.conf\n</code></pre> <ul> <li>\u65e5\u5fd7\uff1a Bash<pre><code>(base) [root@automlgpu4 k8s]# kubeadm init --config kubeadm.conf \nW0608 17:24:49.913798   72683 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[init] Using Kubernetes version: v1.19.4\n[preflight] Running pre-flight checks\n[preflight] Pulling images required for setting up a Kubernetes cluster\n[preflight] This might take a minute or two, depending on the speed of your internet connection\n[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'\n[certs] Using certificateDir folder \"/etc/kubernetes/pki\"\n[certs] Generating \"ca\" certificate and key\n[certs] Generating \"apiserver\" certificate and key\n[certs] apiserver serving cert is signed for DNS names [automlgpu4 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 172.16.2.117]\n[certs] Generating \"apiserver-kubelet-client\" certificate and key\n[certs] Generating \"front-proxy-ca\" certificate and key\n[certs] Generating \"front-proxy-client\" certificate and key\n[certs] Generating \"etcd/ca\" certificate and key\n[certs] Generating \"etcd/server\" certificate and key\n[certs] etcd/server serving cert is signed for DNS names [automlgpu4 localhost] and IPs [172.16.2.117 127.0.0.1 ::1]\n[certs] Generating \"etcd/peer\" certificate and key\n[certs] etcd/peer serving cert is signed for DNS names [automlgpu4 localhost] and IPs [172.16.2.117 127.0.0.1 ::1]\n[certs] Generating \"etcd/healthcheck-client\" certificate and key\n[certs] Generating \"apiserver-etcd-client\" certificate and key\n[certs] Generating \"sa\" key and public key\n[kubeconfig] Using kubeconfig folder \"/etc/kubernetes\"\n[kubeconfig] Writing \"admin.conf\" kubeconfig file\n[kubeconfig] Writing \"kubelet.conf\" kubeconfig file\n[kubeconfig] Writing \"controller-manager.conf\" kubeconfig file\n[kubeconfig] Writing \"scheduler.conf\" kubeconfig file\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Starting the kubelet\n[control-plane] Using manifest folder \"/etc/kubernetes/manifests\"\n[control-plane] Creating static Pod manifest for \"kube-apiserver\"\n[control-plane] Creating static Pod manifest for \"kube-controller-manager\"\n[control-plane] Creating static Pod manifest for \"kube-scheduler\"\n[etcd] Creating static Pod manifest for local etcd in \"/etc/kubernetes/manifests\"\n[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory \"/etc/kubernetes/manifests\". This can take up to 4m0s\n[apiclient] All control plane components are healthy after 17.004681 seconds\n[upload-config] Storing the configuration used in ConfigMap \"kubeadm-config\" in the \"kube-system\" Namespace\n[kubelet] Creating a ConfigMap \"kubelet-config-1.19\" in namespace kube-system with the configuration for the kubelets in the cluster\n[upload-certs] Skipping phase. Please see --upload-certs\n[mark-control-plane] Marking the node automlgpu4 as control-plane by adding the label \"node-role.kubernetes.io/master=''\"\n[mark-control-plane] Marking the node automlgpu4 as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]\n[bootstrap-token] Using token: abcdef.0123456789abcdef\n[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials\n[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token\n[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster\n[bootstrap-token] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace\n[kubelet-finalize] Updating \"/etc/kubernetes/kubelet.conf\" to point to a rotatable kubelet client certificate and key\n[addons] Applied essential addon: CoreDNS\n[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 172.16.2.117:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:ede5cb0692ec5bf94eb0b2305ac3bea32e25bc10e87dce5a9c9be25bbcedc9cc \n(base) [root@automlgpu4 k8s]# mkdir -p $HOME/.kube\n(base) [root@automlgpu4 k8s]# sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n(base) [root@automlgpu4 k8s]# sudo chown $(id -u):$(id -g) $HOME/.kube/config\n(base) [root@automlgpu4 k8s]# kubectl get node \nNAME         STATUS     ROLES    AGE   VERSION\nautomlgpu4   NotReady   master   41s   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_core_name/","title":"k8s\u6838\u5fc3\u6982\u5ff5","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_core_name/#_1","title":"\u58f0\u660e\u5f0f\u7ba1\u7406","text":"<ul> <li>\u901a\u8fc7yml\u58f0\u660e\u671f\u671b\u7684\u72b6\u6001\uff0ck8s\u81ea\u52a8\u6839\u636e\u5b9a\u4e49\u7684\u72b6\u6001\u8fdb\u884c\u8c03\u5ea6\uff08\u76f8\u5bf9\u547d\u4ee4\u5f0f\u7ba1\u7406\u800c\u8a00\uff0ck8s\u4e5f\u63d0\u4f9b\u547d\u4ee4\u5f0f\u7ba1\u7406\u7684\u65b9\u5f0f</li> <li>\u58f0\u660e\u5f0f\uff1a<code>kubectl apply -f &lt;directory&gt;</code></li> <li>\u547d\u4ee4\u5f0f\uff1a<code>kubectl run xxx,  kubectl expose...</code></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_core_name/#_2","title":"\u540d\u8bcd\u53ca\u89e3\u91ca","text":"<ul> <li>Master node: \u96c6\u7fa4\u4e3b\u63a7\u8282\u70b9\uff0c\u4e0a\u9762\u8fd0\u884c\u8c03\u5ea6\u5bb9\u5668\uff0c\u7ba1\u7406\u5bb9\u5668\uff1b</li> <li>Worker node:\u5de5\u4f5c\u8282\u70b9\uff0c\u4e0a\u9762\u8fd0\u884c\u5e94\u7528\u7684\u5bb9\u5668\uff1b</li> <li>Pods: \u5bb9\u5668\uff0ck8s\u5bf9\u5bb9\u5668\u8fdb\u884c\u7ba1\u7406\uff0c \u81ea\u52a8\u521b\u5efa\u3001\u9500\u6bc1\u5bb9\u5668\uff1b </li> <li>Service: \u4f7f\u7528\u6807\u7b7e\u9009\u62e9\u7b97\u7b26\uff08selectors) \u6807\u8bc6\u4e00\u7ec4pod,\u5728\u96c6\u7fa4\u5185\u6709\u56fa\u5b9aIP,\u53ef\u4ee5\u7528\u4e8e\u96c6\u7fa4\u5185\u90e8\u5bb9\u5668/\u5e94\u7528\u63d0\u4f9b\u7a33\u5b9a\u7684\u8bbf\u95ee\u5165\u53e3\uff0c\u53ef\u4ee5\u901a\u8fc7service\u540d\u79f0\u8bbf\u95ee\u5230\u670d\u52a1</li> <li>Deployment:\u4e00\u5957\u90e8\u7f72\u5bb9\u5668\u7684\u96c6\u5408\uff1b</li> <li>ReplicationController:\u53ef\u4ee5\u590d\u5236\u7684\u5bb9\u5668\uff0c\u529f\u80fd\u96c6\u6bd4ReplicaSet\u5c11\uff0c\u5df2\u4e0d\u63a8\u8350\u4f7f\u7528\uff1b</li> <li>ReplicaSet:\u53ef\u4ee5\u6269\u5bb9\u3001\u7f29\u5bb9\u7684\u5bb9\u5668\u526f\u672c\u96c6\uff0c\u5728\u5bb9\u5668\u96c6\u4e0d\u9700\u8981\u72b6\u6001\uff0c\u4e5f\u4e0d\u9700\u8981\u88ab\u5176\u4ed6\u5bb9\u5668\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528ReplicaSet.\u5176\u4ed6\u5bb9\u5668\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95eeRS\uff0c \u53ef\u4ee5\u901a\u8fc7service\u6765\u8bbf\u95ee\uff1b</li> <li>StatefulSet:\u6709\u72b6\u6001\u7684\u670d\u52a1\uff0c\u6bd4\u5982zookeeper,\u96c6\u7fa4\u88ab\u5916\u90e8\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u9700\u8981\u6307\u5b9a\u591a\u4e2azookeeper\u670d\u52a1\u7684ip\u6216\u8005hostname.\u7531\u4e8e\u662f\u6709\u72b6\u6001\u7684\uff0c\u6bd4\u59823\u4e2a\u8282\u70b9\u7684zookeeper\uff0c \u4e0d\u8bba\u5982\u4f55\u7f29\u5bb9\uff08\u5305\u62ec\u5b95\u673a\u6062\u590d\uff09\uff0c3\u4e2a\u8282\u70b9\u5bb9\u5668\u540d\u79f0/\u4e3b\u673a\u540d\u603b\u662fzk-0, zk-1, zk-2</li> <li>Ingress: \u5bf9\u5916\u66b4\u9732\u53ef\u4ee5\u8bbf\u95ee\u7684\u5165\u53e3\uff0c\u4e3a\u670d\u52a1\u63d0\u4f9b\u5916\u7f51\uff08\u4ece\u96c6\u7fa4\u5916\uff09\u7684\u8bbf\u95ee\u5165\u53e3\uff1b</li> <li>Namespace:\u8d44\u6e90\u53ef\u4ee5\u653e\u5728namespace\u4e0b\u9762\uff0c \u4e0d\u540cnamespace\u4e4b\u95f4\u76f8\u4e92\u9694\u79bb\uff1b</li> <li>Controller:\u5305\u62ec\u6709\u8282\u70b9\u63a7\u5236\u5668\u3001\u8def\u7531\u63a7\u5236\u5668\u3001\u670d\u52a1\u63a7\u5236\u5668\uff1b</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_dashboard/","title":"k8s\u7684Dashboard\u5b89\u88c5","text":"Bash<pre><code># step1:\nwget https://raw.githubusercontent.com/kubernetes/dashboard/v2.2.0/aio/deploy/recommended.yaml\nvim recommended.yaml\n# \u4fee\u6539Service\u4e3aNodePort\u7c7b\u578b\n---\n......\nkind: Service\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nspec:\n  ports:\n    - port: 443\n      targetPort: 8443\n  selector:\n    k8s-app: kubernetes-dashboard\n  type: NodePort  # \u52a0\u4e0atype=NodePort\u53d8\u6210NodePort\u7c7b\u578b\u7684\u670d\u52a1\n---\n\n# step2:\n# \u521b\u5efa\nkubectl apply -f recommended.yaml \n\n# \u67e5\u770bpod\u7684\u72b6\u6001\nkubectl get pods -n kubernetes-dashboard -l k8s-app=kubernetes-dashboard\n\n# \u67e5\u770bsvc\u5206\u914d\u7684\u7aef\u53e3(note:\u8bbf\u95ee\u65f6\u9700\u8981\u4f7f\u7528https)\nkubectl get svc -n kubernetes-dashboard\n\n# step3:\n# \u521b\u5efa\u4e00\u4e2a\u5177\u6709\u5168\u5c40\u6240\u6709\u6743\u9650\u7684\u7528\u6237\u6765\u767b\u5f55Dashboard\uff1a(dashboard-admin.yaml)\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: admin\n  annotations:\n    rbac.authorization.kubernetes.io/autoupdate: \"true\"\nroleRef:\n  kind: ClusterRole\n  name: cluster-admin\n  apiGroup: rbac.authorization.k8s.io\nsubjects:\n- kind: ServiceAccount\n  name: admin\n  namespace: kubernetes-dashboard\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin\n  namespace: kubernetes-dashboard\n\n---\n# \u521b\u5efa\nkubectl apply -f admin.yaml\n\n# \u67e5\u770bsecret\nkubectl get secret -n kubernetes-dashboard|grep admin-token\n\n# \u4f1a\u751f\u6210\u4e00\u4e32\u5f88\u957f\u7684base64\u540e\u7684\u5b57\u7b26\u4e32\uff08echo &lt;token\u503c&gt; | base64 -d \uff09\nkubectl get secret &lt;secret\u540d\u79f0&gt; -o jsonpath={.data.token} -n kubernetes-dashboard |base64 -d\n\n# \u7528\u4e0a\u9762\u7684 base64 \u89e3\u7801\u540e\u7684\u5b57\u7b26\u4e32\u4f5c\u4e3a token \u767b\u5f55 Dashboard \u5373\u53ef\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/","title":"k8s\u4e2detcd\u6302\u8f7d\u5185\u5b58\u5377\u6b65\u9aa4","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step1-api-server-etcd","title":"STEP1: \u505c\u6389API-server\u548c etcd","text":"Bash<pre><code>systemctl stop kubelet &amp;&amp; systemctl stop containerd\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step2-etcfstab-tmpfs","title":"STEP2: \u4fee\u6539/etc/fstab \u52a0\u4e0atmpfs\u6302\u8f7d\u9879","text":"Bash<pre><code>mkdir /data/etcd-data\nmount -a\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step3","title":"STEP3\uff1a \u62f7\u8d1d\u6570\u636e\u5230\u65b0\u7684\u6587\u4ef6\u5939\u4e0b\uff0c \u7136\u540e\u521b\u5efa\u8f6f\u8fde\u63a5","text":"Bash<pre><code>cp -r /var/lib/etcd/* /data/etcd-data\nrm -rf /var/lib/etcd\nln -s /data/etcd-data /var/lib/etcd\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step4-api-server-etcd","title":"STEP4: \u91cd\u542fAPI-server \u548c etcd \u89c2\u5bdf\u96c6\u7fa4\u662f\u5426\u6b63\u5e38","text":"Bash<pre><code>systemctl stop containerd &amp;&amp; systemctl stop kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step5","title":"STEP5: \u8bbe\u7f6e\u81ea\u52a8\u5907\u4efd\u548c\u6062\u590d","text":"Bash<pre><code>mkdir /data/etcd-data-backup\n\n# \u5907\u4efd\nrsync  -a --delete --recursive --force /data/etcd-data /data/etcd-data-backup\n\n# \u8fd8\u539f\nrsync -a --recursive --force /data/etcd-data-backup /data/etcd-data\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/","title":"\u5b89\u88c5\uff1a","text":"<p>\u5171\u4eab\u6570\u636e\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a/data/k8s/share/</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#k8s-masternfs-server","title":"k8s-master\u8282\u70b9\u5b89\u88c5\uff08nfs-server\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#1","title":"1.\u5173\u95ed\u9632\u706b\u5899","text":"Bash<pre><code>systemctl stop firewalld.service &amp;&amp; systemctl disable firewalld.service\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#2nfs","title":"2.\u5b89\u88c5nfs\u53ca\u4f9d\u8d56","text":"Bash<pre><code> yum -y install nfs-utils rpcbind\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#3","title":"3.\u8bbe\u7f6e\u5171\u4eab\u76ee\u5f55\u6743\u9650","text":"Bash<pre><code>chmod 755 /data/k8s/share/\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#4nfs","title":"4.\u914d\u7f6enfs","text":"<p>\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a/etc/exports</p> Bash<pre><code>$ vi /etc/exports\n/data/k8s/share  *(rw,sync,no_root_squash)\n</code></pre> <ul> <li>\u914d\u7f6e\u53c2\u6570\u8bf4\u660e\uff1a</li> <li>*\uff1a\u8868\u793a\u4efb\u4f55\u4eba\u90fd\u6709\u6743\u9650\u8fde\u63a5\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u7f51\u6bb5\uff0c\u4e00\u4e2a IP\uff0c\u4e5f\u53ef\u4ee5\u662f\u57df\u540d</li> <li>rw\uff1a\u8bfb\u5199\u7684\u6743\u9650</li> <li>sync\uff1a\u8868\u793a\u6587\u4ef6\u540c\u65f6\u5199\u5165\u786c\u76d8\u548c\u5185\u5b58</li> <li>no_root_squash\uff1a\u5f53\u767b\u5f55 NFS \u4e3b\u673a\u4f7f\u7528\u5171\u4eab\u76ee\u5f55\u7684\u4f7f\u7528\u8005\u662f root \u65f6\uff0c\u5176\u6743\u9650\u5c06\u88ab\u8f6c\u6362\u6210\u4e3a\u533f\u540d\u4f7f\u7528\u8005\uff0c\u901a\u5e38\u5b83\u7684 UID \u4e0e GID\uff0c\u90fd\u4f1a\u53d8\u6210 nobody \u8eab\u4efd</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#5nfs-rpcbind","title":"5.\u542f\u52a8nfs\u4f9d\u8d56-rpcbind","text":"Bash<pre><code>systemctl start rpcbind.service &amp;&amp; systemctl enable rpcbind\n\n# \u67e5\u770b\u72b6\u6001\u662f\u5426\u4e3aactive\nsystemctl status rpcbind\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#6nfs","title":"6.\u542f\u52a8nfs","text":"Bash<pre><code>systemctl start nfs.service &amp;&amp; systemctl enable nfs\n\n# \u67e5\u770b\u72b6\u6001\u662f\u5426\u4e3aactive\nsystemctl status nfs\n</code></pre> <ul> <li>\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e0b\u547d\u4ee4\u786e\u8ba4\u662f\u5426\u5b89\u88c5\u542f\u52a8\u6210\u529f Bash<pre><code>$ rpcinfo -p|grep nfs\n    100003    3   tcp   2049  nfs\n    100003    4   tcp   2049  nfs\n    100227    3   tcp   2049  nfs_acl\n    100003    3   udp   2049  nfs\n    100003    4   udp   2049  nfs\n    100227    3   udp   2049  nfs_acl\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#7","title":"7.\u67e5\u770b\u6302\u8f7d\u76ee\u5f55\u6743\u9650","text":"Bash<pre><code>$ cat /var/lib/nfs/etab \n/data/k8s/share *(rw,sync,wdelay,hide,nocrossmnt,secure,no_root_squash,no_all_squash,no_subtree_check,secure_locks,acl,no_pnfs,anonuid=65534,anongid=65534,sec=sys,rw,secure,no_root_squash,no_all_squash)\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#k8s-nodenfs-client","title":"k8s-node\u8282\u70b9\u5b89\u88c5\uff08nfs-client\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#1server","title":"1.\u5173\u95ed\u9632\u706b\u5899\uff08\u540cserver\u7aef\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#2nfsserver","title":"2.\u5b89\u88c5nfs\u53ca\u4f9d\u8d56\uff08\u540cserver\u7aef\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#3nfsserver","title":"3.\u542f\u52a8nfs\u548c\u4f9d\u8d56\uff08\u540cserver\u7aef\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#4nfs_1","title":"4.\u68c0\u67e5nfs\u6536\u662f\u5426\u6709\u5171\u4eab\u76ee\u5f55","text":"Bash<pre><code>$ showmount -e 172.16.2.117\nExport list for 172.16.2.117:\n/data/k8s/share *\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#5client","title":"5.\u5728client\u65b0\u5efa\u76ee\u5f55","text":"Bash<pre><code>$ mkdir -p /data/kubeadm/data\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#6nfs_1","title":"6.\u5c06nfs\u5171\u4eab\u76ee\u5f55\u6302\u8f7d\u5230\u4e0a\u8ff0\u65b0\u5efa\u76ee\u5f55\u4e2d","text":"Bash<pre><code>$ mount -t nfs 172.16.2.117:/data/k8s/share /data/kubeadm/data\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#7_1","title":"7.\u6d4b\u8bd5","text":"<ul> <li>\u5728client\u7aef\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6</li> <li>\u5728server\u67e5\u770b\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#_2","title":"\u4f7f\u7528\uff1a","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#1nfs-client-classyaml","title":"1.\u521b\u5efanfs-client-class.yaml","text":"YAML<pre><code>apiVersion: storage.k8s.io/v1\n kind: StorageClass\n metadata:\n   name: kubeflow-nfs-storage\n   annotations:\n     storageclass.kubernetes.io/is-default-class: \"true\"\n provisioner: fuseim.pri/ifs # or choose another name, must match deployment's env PROVISIONER_NAME'\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#2nfs-client-deploymentyaml","title":"2.\u521b\u5efanfs-client-deployment.yaml","text":"YAML<pre><code>apiVersion: apps/v1\n kind: Deployment\n metadata:\n   name: nfs-client-provisioner\n   labels:\n     app: nfs-client-provisioner\n   namespace: default\n spec:\n   replicas: 1\n   strategy:\n     type: Recreate\n   selector:\n     matchLabels:\n       app: nfs-client-provisioner\n   template:\n     metadata:\n       labels:\n         app: nfs-client-provisioner\n     spec:\n       serviceAccountName: nfs-client-provisioner\n       containers:\n         - name: nfs-client-provisioner\n           image: quay.io/external_storage/nfs-client-provisioner:latest\n           volumeMounts:\n             - name: nfs-client-root\n               mountPath: /persistentvolumes\n           env:\n             - name: PROVISIONER_NAME\n               value: fuseim.pri/ifs\n             - name: NFS_SERVER\n               value: 172.16.2.117\n             - name: NFS_PATH\n               value: /data/k8s/share\n       volumes:\n         - name: nfs-client-root\n           nfs:\n             server: 172.16.2.117\n             path: /data/k8s/share\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#3nfs-client-sayaml","title":"3.\u521b\u5efanfs-client-sa.yaml","text":"YAML<pre><code>apiVersion: v1\n kind: ServiceAccount\n metadata:\n   name: nfs-client-provisioner\n\n ---\n kind: ClusterRole\n apiVersion: rbac.authorization.k8s.io/v1\n metadata:\n   name: nfs-client-provisioner-runner\n rules:\n   - apiGroups: [\"\"]\n     resources: [\"persistentvolumes\"]\n     verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"]\n   - apiGroups: [\"\"]\n     resources: [\"persistentvolumeclaims\"]\n     verbs: [\"get\", \"list\", \"watch\", \"update\"]\n   - apiGroups: [\"storage.k8s.io\"]\n     resources: [\"storageclasses\"]\n     verbs: [\"get\", \"list\", \"watch\"]\n   - apiGroups: [\"\"]\n     resources: [\"events\"]\n     verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n   - apiGroups: [\"\"]\n     resources: [\"endpoints\"]\n     verbs: [\"create\", \"delete\", \"get\", \"list\", \"watch\", \"patch\", \"update\"]\n\n ---\n kind: ClusterRoleBinding\n apiVersion: rbac.authorization.k8s.io/v1\n metadata:\n   name: run-nfs-client-provisioner\n subjects:\n   - kind: ServiceAccount\n     name: nfs-client-provisioner\n     namespace: default\n roleRef:\n   kind: ClusterRole\n   name: nfs-client-provisioner-runner\n   apiGroup: rbac.authorization.k8s.io\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#4","title":"4.\u6267\u884c\uff1a","text":"Bash<pre><code>kubectl apply -f nfs-client-class.yaml\nkubectl apply -f nfs-client-deployment.yaml\nkubectl apply -f nfs-client-sa.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#5","title":"5.\u67e5\u770b\uff1a","text":"Bash<pre><code>$ kubectl get pods \nNAME                                      READY   STATUS             RESTARTS   AGE\nnfs-client-provisioner-5bb4f74bfb-v9sqz   1/1     running            13         5d20h\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/","title":"k8s\u5b9e\u7528\u5c0f\u6280\u5de7","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#1yaml","title":"1.\u5feb\u901f\u7f16\u5199yaml\u6587\u4ef6","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#step1yaml","title":"STEP1:\u4f7f\u7528\u547d\u4ee4\u751f\u6210yaml\u6587\u4ef6","text":"Bash<pre><code># kubectl create \nkubectl create deployment web --image=nginx -o yaml --dry-run\n# -o \u4f7f\u7528yaml\u683c\u5f0f\u5c55\u793a\n# -dry-run \u5c1d\u8bd5\u8fd0\u884c\uff0c\u5e76\u4e0d\u4f1a\u771f\u6b63\u8fd0\u884c\n# \u4fdd\u5b58\u81f3myweb.yaml\n\nkubectl create deployment web --image=nginx -o yaml --dry-run &gt; myweb.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#step2-yaml","title":"STEP2:\u4f7f\u7528\u547d\u4ee4\u5bfc\u51fa yaml \u6587\u4ef6","text":"Bash<pre><code>kubectl get\nkubectl get deploy # \u67e5\u770b\u90e8\u7f72\nkubectl get deploy nginx -o yaml --export &gt; myweb.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#_1","title":"k8s\u5b9e\u7528\u5c0f\u6280\u5de7","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#_2","title":"k8s\u5b9e\u7528\u5c0f\u6280\u5de7","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#2composek8s","title":"2.\u628acompose\u6587\u4ef6\u8f6c\u6362\u6210k8s\u58f0\u660e\u5f0f\u914d\u7f6e\u6587\u4ef6\u3002","text":"<ul> <li> <p>\u4e0b\u8f7d\u94fe\u63a5\uff1ahttps://github.com/kubernetes/kompose/releases/ Bash<pre><code># \u4e0b\u8f7d\u5b89\u88c5\ncurl -L https://github.com/kubernetes/kompose/releases/download/v1.22.0/kompose-darwin-amd64 -o kompose\n\nchmod +x compose &amp;&amp; sudo mv kompose /usr/local/bin/\n\n# \u4f7f\u7528\n#step1:\nkompose convert     \n\nstep2:\u8c03\u6574\u8f6c\u6362\u540e\u7684\u6587\u4ef6\u5185\u5bb9\n\nstep3:kubectl apply -f k8s  # \u5b89\u88c5\u5e94\u7528\u5230k8s\u96c6\u7fa4\n</code></pre></p> </li> <li> <p>\u6548\u679c Bash<pre><code>(base) \u279c  bluewhale_docker ls\nbk-docker-compose.yml bluewhale             compose               docker-compose.yml    frontend              mysql\n(base) \u279c  bluewhale_docker kompose convert\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/compose/mysql/init/init.sql\" isn't supported - ignoring path on the host\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/compose/mysql/conf/my.cnf\" isn't supported - ignoring path on the host\nINFO Network db_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nINFO Network web_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/bluewhale\" isn't supported - ignoring path on the host\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/compose/bw_uwsgi\" isn't supported - ignoring path on the host\nINFO Network web_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nINFO Network db_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nINFO Kubernetes file \"mysqldb-service.yaml\" created\nINFO Kubernetes file \"nginx-service.yaml\" created\nINFO Kubernetes file \"website-service.yaml\" created\nINFO Kubernetes file \"mysqldb-pod.yaml\" created\nINFO Kubernetes file \"mysqldb-claim0-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"bluewhale-db-vol-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"mysqldb-claim2-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"db_network-networkpolicy.yaml\" created\nINFO Kubernetes file \"nginx-pod.yaml\" created\nINFO Kubernetes file \"static-volume-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"web_network-networkpolicy.yaml\" created\nINFO Kubernetes file \"website-pod.yaml\" created\nINFO Kubernetes file \"website-claim0-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"website-claim2-persistentvolumeclaim.yaml\" created\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#3k8sdjango","title":"3.\u4f7f\u7528k8s\u90e8\u7f72django\u5e94\u7528\u7684\u6d41\u7a0b\uff1a","text":"<ol> <li>\u642d\u5efak8s\u96c6\u7fa4\u73af\u5883</li> <li>\u914d\u7f6ekube/config\u6587\u4ef6\uff08<code>vim ~/.kube/config</code>\uff09   </li> <li>\u914d\u7f6e\u5b8c\u6210\u4ee5\u540e\u53ef\u4ee5\u901a\u8fc7<code>kubectl</code> \u548c\u96c6\u7fa4\u8fdb\u884c\u4ea4\u4e92</li> <li>\u4f7f\u7528Dockerfile\u6587\u4ef6\u7f16\u5199Django\u670d\u52a1\u5e76\u751f\u6210\u955c\u50cf\uff0c\u6216\u8005\u4f7f\u7528docker-compose\u751f\u6210\uff0c</li> <li>\u5982\u679c\u4f7f\u7528docker-compose\u751f\u6210\u7684\u955c\u50cf\uff0c\u53ef\u4ee5\u4f7f\u7528kompose \u811a\u672c\u5de5\u5177\u5bf9docker-compose\u6587\u4ef6\u8f6c\u6210k8s\u7684yaml\u6587\u4ef6</li> <li>\u4fee\u6539\u751f\u6210\u7684yaml\u6587\u4ef6\uff0c</li> <li>\u4f7f\u7528<code>kubectl apply -f \u6587\u4ef6/\u6587\u4ef6\u5939</code> \uff0c\u8fd0\u884c \u670d\u52a1\u7684\u5bb9\u5668\u0153</li> </ol>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#4-djangok8s","title":"4. \u90e8\u7f72django\u670d\u52a1\u5230\u963f\u91cc\u4e91\u7684k8s\u96c6\u7fa4\u7684\u6d41\u7a0b","text":"<ul> <li>step1\uff1a\u521b\u5efakubernetes\u96c6\u7fa4\uff0c\u521b\u5efa\u955c\u50cf\u4ed3\u5e93</li> <li>step2: \u914d\u7f6e\u672c\u5730\u7684kubeconfig</li> <li>step3: Docker login \u5230\u955c\u50cf\u4ed3\u5e93</li> <li>step4: Docker build &amp; docker push \u63a8\u9001\u955c\u50cf\u5230\u955c\u50cf\u4ed3\u5e93</li> <li>step5:  k8s \u90e8\u7f72\u5230\u96c6\u7fa4\uff1a<code>kubectl apply -f k8s</code></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/","title":"k8s\u5b9e\u7528\u5de5\u5177\u4e4bKtConnect","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#_1","title":"\u6982\u8ff0","text":"<ul> <li>\u5b98\u7f51\u94fe\u63a5</li> </ul> <p>KtConnect \u662f\u963f\u91cc\u5f00\u6e90\u7684\u4e00\u6b3e\u4e91\u539f\u751f\u534f\u540c\u5f00\u53d1\u6d4b\u8bd5\u89e3\u51b3\u65b9\u6848,\u65e8\u5728\u63d0\u5347\u5f00\u53d1\u8005\u5728Kubernetes \u573a\u666f\u4e0b\u7684\u672c\u5730\u5f00\u53d1\u6d4b\u8bd5\u6548\u7387,\u5b83\u901a\u8fc7\u5efa\u7acb\u672c\u5730\u5230K8S\u96c6\u7fa4\u7684\u53cc\u5411\u901a\u9053,\u5141\u8bb8\u5f00\u53d1\u8005\u5728\u672c\u5730\u76f4\u63a5\u8bbf\u95eeK8S\u96c6\u7fa4\u670d\u52a1,\u6216\u5c06K8S\u96c6\u7fa4\u7684\u6d41\u91cf\u8f6c\u53d1\u5230\u672c\u5730.\u7b80\u8a00\u4e4b,KtConnect\u662f\u9762\u5411K8S\u7684\u672c\u5730\u5f00\u53d1\u8005\u8f85\u52a9\u5de5\u5177.</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#_2","title":"\u5b89\u88c5","text":"<ul> <li>\u4e0b\u8f7d\u94fe\u63a5</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#1kubectl-client","title":"1\u3001\u4e0b\u8f7dkubectl client \u547d\u4ee4\u884c\u5de5\u5177","text":"<ul> <li>\u94fe\u63a5</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#2","title":"2\u3001\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u5e76\u9a8c\u8bc1","text":"Bash<pre><code>kubectl version --client\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4]\u276f kubectl version --client\nClient Version: v1.29.2\nKustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#3k8sconfig","title":"3\u3001\u914d\u7f6eK8S\u96c6\u7fa4\u7684config","text":"<ul> <li>\u5c06k8s\u96c6\u7fa4\u7684config\u914d\u7f6e\u6587\u4ef6\u62f7\u8d1d\u5230<code>C:\\Users\\xxxx\\.kube</code> \u6587\u4ef6\u5939\u4e2d</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#4k8s","title":"4\u3001\u9a8c\u8bc1\u662f\u5426\u80fd\u8fde\u63a5\u5230k8s\u96c6\u7fa4","text":"Bash<pre><code>kubectl cluster-info\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4] \u276f kubectl cluster-info\nKubernetes control plane is running at https://172.x.x.x:6443\nCoreDNS is running at https://172.16.2.129:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#5ktconnect","title":"5\u3001\u4e0b\u8f7dktconnect\u5e76\u914d\u7f6e","text":"<ul> <li>\u4e0b\u8f7d kt connect \u5e76\u5c06\u5176\u653e\u5230\u548ckubectl client \u7684\u540c\u4e00\u4e2a bin\u76ee\u5f55\u4e0b</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#6","title":"6\u3001\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f","text":"Bash<pre><code>ktctl -v\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4] \u276f ktctl -v\nktctl version 0.3.7\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#7","title":"7\u3001\u542f\u52a8","text":"<ul> <li>\u4f7f\u7528\u7ba1\u7406\u5458\u542f\u52a8Powershell,\u5e76\u542f\u52a8kt-connect</li> </ul> Bash<pre><code>ktctl connect -n &lt;namespace name&gt; --excludeIps 172.16.2.0/24   # &lt;\u7f51\u5173\u5730\u5740\u9700\u8981\u66f4\u6362\u6210\u4e3a\u81ea\u5df1\u7684\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4] \u276f ktctl connect -n bluewhale-platform --excludeIps 172.16.2.0/24\n4:15PM INF Using cluster context kubernetes-admin@kubernetes (kubernetes)\n4:15PM INF KtConnect 0.3.7 start at 22548 (windows amd64)\n4:15PM INF Fetching cluster time ...\n4:15PM INF Using tun2socks mode\n4:15PM INF Successful create config map kt-connect-shadow-odtnt\n4:15PM INF Deploying shadow pod kt-connect-shadow-odtnt in namespace bluewhale-platform\n4:15PM INF Waiting for pod kt-connect-shadow-odtnt ...\n4:15PM INF Pod kt-connect-shadow-odtnt is ready\n4:15PM INF Port forward local:10441 -&gt; pod kt-connect-shadow-odtnt:22 established\n4:15PM INF Socks proxy established\n2024/08/23 16:15:17 Using existing driver 0.14\n2024/08/23 16:15:17 Creating adapter\n4:15PM INF Tun device KtConnectTunnel is ready\n2024/08/23 16:15:17 Removed orphaned adapter \"KtConnectTunnel 1\"\n4:15PM INF Adding route to 10.96.0.0/16\n4:15PM INF Adding route to 100.90.254.0/24\n4:15PM INF Adding route to 100.82.112.0/24\n4:15PM INF Adding route to 100.85.170.0/24\n4:15PM INF Adding route to 100.103.44.0/24\n4:15PM INF Route to tun device completed\n4:15PM INF Setting up dns in local mode\n4:15PM INF Port forward local:45198 -&gt; pod kt-connect-shadow-odtnt:53 established\n4:15PM INF Setup local DNS with upstream [tcp:127.0.0.1:45198 udp:172.16.1.117:53]\n4:15PM INF Creating udp dns on port 53\n4:15PM INF ---------------------------------------------------------------\n4:15PM INF  All looks good, now you can access to resources in the kubernetes cluster\n4:15PM INF ---------------------------------------------------------------\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/","title":"kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.19.4)","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step1","title":"STEP1: \u524d\u7f6e\u5de5\u4f5c(\u51c6\u5907/\u68c0\u67e5\u73af\u5883)","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1","title":"1.\u96c6\u7fa4\u670d\u52a1\u5668\u8981\u6c42\uff1a","text":"<ul> <li>\u6bcf\u53f0\u673a\u5668 2 GB \u6216\u66f4\u591a\u7684\u5185\u5b58 (\u5982\u679c\u5c11\u4e8e\u8fd9\u4e2a\u6570\u5b57\u5c06\u4f1a\u5f71\u54cd\u60a8\u5e94\u7528\u7684\u8fd0\u884c\u5185\u5b58)</li> <li>2 CPU \u6216\u66f4\u591a</li> <li>\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u673a\u5668\u7684\u7f51\u7edc\u4e92\u901a</li> <li>\u53ef\u4ee5\u8bbf\u95ee\u5916\u7f51</li> <li>\u7981\u6b62 swap \u5206\u533a <p>eg:</p> </li> </ul> IP \u4e3b\u673a\u540d \u7cfb\u7edf\u7248\u672c CPU \u5185\u5b58 \u5907\u6ce8 192.168.33.131 master1 centos8.2 2G 2 <p>\u6b64\u914d\u7f6e\u4e3a\u6700\u4f4e\u8981\u6c42 | | 192.168.33.132 | node1 | centos8.2 | 2G | 2 |  | | 192.168.33.133 | node2 | centos8.2 | 2G | 2 |  |</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2ipdnshosts","title":"2.\u8bbe\u7f6e\u670d\u52a1\u5668\u9759\u6001IP/DNS/hosts\u4e3b\u673a\u540d","text":"<p>eg\uff1a</p> Bash<pre><code># \u67e5\u770b\u7f51\u5361\u540d\u5b57\nnmcli d\n\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0cxxx\u4e3a\u5bf9\u5e94\u7f51\u5361\u7684\u540d\u5b57\nvim /etc/sysconfig/network-scripts/ifcfg-xxx   \n\n# \u4fee\u6539\u5e76\u4fdd\u5b58\u7f51\u5361\u4fe1\u606f\uff08\u4fee\u6539demo\u5982\u4e0b\uff1a\uff09\nTYPE=\"Ethernet\"\nPROXY_METHOD=\"none\"\nBROWSER_ONLY=\"no\"\nBOOTPROTO=\"static\" #\u542f\u7528\u9759\u6001IP\u5730\u5740\nDEFROUTE=\"yes\"\nIPV4_FAILURE_FATAL=\"no\"\nIPV6INIT=\"yes\"\nIPV6_AUTOCONF=\"yes\"\nIPV6_DEFROUTE=\"yes\"\nIPV6_FAILURE_FATAL=\"no\"\nIPV6_ADDR_GEN_MODE=\"stable-privacy\"\nNAME=\"ens33\"\nUUID=\"5e51c653-26b7-4e87-bbe6-4a06df6ff1d4\"\nDEVICE=\"ens33\"\nONBOOT=\"yes\"\nIPADDR=\"192.168.33.132\" #\u8bbe\u7f6eIP\u5730\u5740\nNETMASK=\"255.255.255.0\"  #\u8bbe\u7f6e\u5b50\u7f51\u63a9\u7801\nGATEWAY=\"192.168.189.2\"  #\u8bbe\u7f6e\u7f51\u5173\nDNS1=\"8.8.8.8\"           #DNS\nDNS2=\"114.114.114.114\"\n\n# \u4fdd\u5b58\u9000\u51fa\u5e76\u91cd\u542f\u7f51\u5361 xxx\u4e3a\u7f51\u5361\u540d\nifup xxx\n\uff08eg: ifup ens33\uff09\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3hostname","title":"3.\u8bbe\u7f6e\u4e3b\u673a\u540d\uff08hostname\uff09","text":"Bash<pre><code># xxx\u4e3a\u4e3b\u673a\u540d \nhostnamectl set-hostname xxx \n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#4hosts","title":"4.\u67e5\u770b\u6216\u8bbe\u7f6ehosts","text":"<ul> <li>\u8282\u70b9\u7684 hostname \u5fc5\u987b\u4f7f\u7528\u6807\u51c6\u7684 DNS \u547d\u540d\uff0c\u53e6\u5916\u5343\u4e07\u4e0d\u7528\u4ec0\u4e48\u9ed8\u8ba4\u7684\u00a0<code>localhost</code>\u00a0\u7684 hostname\uff0c\u4f1a\u5bfc\u81f4\u5404\u79cd\u9519\u8bef\u51fa\u73b0\u7684\u3002\u5728 Kubernetes \u9879\u76ee\u91cc\uff0c\u673a\u5668\u7684\u540d\u5b57\u4ee5\u53ca\u4e00\u5207\u5b58\u50a8\u5728 Etcd \u4e2d\u7684 API \u5bf9\u8c61\uff0c\u90fd\u5fc5\u987b\u4f7f\u7528\u6807\u51c6\u7684 DNS \u547d\u540d\uff08RFC 1123\uff09\u3002\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u00a0<code>hostnamectl set-hostname ydzs-node1</code>\u00a0\u6765\u4fee\u6539 hostname\u3002 Bash<pre><code>vim /etc/hosts \u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\n192.168.33.131 master1\n192.168.33.132 node1\n192.168.33.133 node2\n\n\u6216\ncat &gt;&gt; /etc/hosts &lt;&lt; EOF\n192.168.33.131 master1\n192.168.33.132 node1\n192.168.33.133 node2\nEOF\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#5","title":"5.\u7981\u7528\u9632\u706b\u5899\uff1a","text":"Bash<pre><code>systemctl stop firewalld &amp;&amp; systemctl disable firewalld\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#6swap","title":"6.\u7981\u7528swap\uff08\u4ea4\u6362\u5206\u533a\uff09","text":"Bash<pre><code>swapoff -a  &amp;&amp; sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n\n\n# \u5907\u6ce8\u53c2\u8003\uff08\u901a\u5e38\u4ec5\u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u5373\u53ef\uff09\uff1a\n# \u5173\u95edSwap\uff0c\u673a\u5668\u91cd\u542f\u540e\u4e0d\u751f\u6548\nswapoff -a\n\n# \u4fee\u6539/etc/fstab\u6c38\u4e45\u5173\u95edSwap\ncp -p /etc/fstab /etc/fstab.bak$(date '+%Y%m%d%H%M%S')\n\n# CentOS\nsed -i \"s/\\/dev\\/mapper\\/centos-swap/\\#\\/dev\\/mapper\\/centos-swap/g\" /etc/fstab\n\n# \u4fee\u6539\u540e\u91cd\u65b0\u6302\u8f7d\u5168\u90e8\u6302\u8f7d\u70b9\nmount -a\n\n# \u67e5\u770bSwap\nfree -m\ncat /proc/swaps\n\n# \u6216\nsed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#7selinux","title":"7.\u7981\u7528selinux","text":"Bash<pre><code>setenforce 0    # \u4e34\u65f6\nsed -i \"s/^SELINUX=enforcing/SELINUX=disabled/g\" /etc/sysconfig/selinux\nsed -i \"s/^SELINUX=enforcing/SELINUX=disabled/g\" /etc/selinux/config\nsed -i \"s/^SELINUX=permissive/SELINUX=disabled/g\" /etc/sysconfig/selinux\nsed -i \"s/^SELINUX=permissive/SELINUX=disabled/g\" /etc/selinux/config\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#8br_netfilter","title":"8.\u52a0\u8f7dbr_netfilter\u6a21\u5757","text":"<ul> <li>\u7531\u4e8e\u5f00\u542f\u5185\u6838 ipv4 \u8f6c\u53d1\u9700\u8981\u52a0\u8f7d br_netfilter \u6a21\u5757 Bash<pre><code> modprobe br_netfilter\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#9ipv4iptables","title":"9.\u5c06\u6865\u63a5\u7684IPv4\u6d41\u91cf\u4f20\u9012\u5230iptables\u7684\u94fe","text":"Bash<pre><code>cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\nEOF\n\n# \u91cd\u542f\u751f\u6548\nsysctl --system \n\u6216\nsysctl -p /etc/sysctl.d/k8s.conf\n</code></pre> <p>Explain: bridge-nf \u4f7f\u5f97 netfilter \u53ef\u4ee5\u5bf9 Linux \u7f51\u6865\u4e0a\u7684 IPv4/ARP/IPv6 \u5305\u8fc7\u6ee4\u3002\u6bd4\u5982\uff0c\u8bbe\u7f6e<code>net.bridge.bridge-nf-call-iptables\uff1d1</code>\u540e\uff0c\u4e8c\u5c42\u7684\u7f51\u6865\u5728\u8f6c\u53d1\u5305\u65f6\u4e5f\u4f1a\u88ab iptables\u7684 FORWARD \u89c4\u5219\u6240\u8fc7\u6ee4\u3002\u5e38\u7528\u7684\u9009\u9879\u5305\u62ec\uff1a    - net.bridge.bridge-nf-call-arptables\uff1a\u662f\u5426\u5728 arptables \u7684 FORWARD \u4e2d\u8fc7\u6ee4\u7f51\u6865\u7684 ARP \u5305    - net.bridge.bridge-nf-call-ip6tables\uff1a\u662f\u5426\u5728 ip6tables \u94fe\u4e2d\u8fc7\u6ee4 IPv6 \u5305    - net.bridge.bridge-nf-call-iptables\uff1a\u662f\u5426\u5728 iptables \u94fe\u4e2d\u8fc7\u6ee4 IPv4 \u5305    - net.bridge.bridge-nf-filter-vlan-tagged\uff1a\u662f\u5426\u5728 iptables/arptables \u4e2d\u8fc7\u6ee4\u6253\u4e86 vlan \u6807\u7b7e\u7684\u5305\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#10-ipvs","title":"10.\u5b89\u88c5 ipvs\uff1a","text":"<ul> <li> <p>\u4fdd\u8bc1\u5728\u8282\u70b9\u91cd\u542f\u540e\u80fd\u81ea\u52a8\u52a0\u8f7d\u6240\u9700\u6a21\u5757\u3002\u4f7f\u7528<code>lsmod | grep -e ip_vs -e nf_conntrack_ipv4</code>\u547d\u4ee4\u67e5\u770b\u662f\u5426\u5df2\u7ecf\u6b63\u786e\u52a0\u8f7d\u6240\u9700\u7684\u5185\u6838\u6a21\u5757 Bash<pre><code>cat &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;EOF\n#!/bin/bash\nmodprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack_ipv4\nEOF\n\nchmod 755 /etc/sysconfig/modules/ipvs.modules &amp;&amp; bash /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4\n</code></pre></p> </li> <li> <p>\u63a5\u4e0b\u6765\u8fd8\u9700\u8981\u786e\u4fdd\u5404\u4e2a\u8282\u70b9\u4e0a\u5df2\u7ecf\u5b89\u88c5\u4e86 ipset \u8f6f\u4ef6\u5305\uff1a Bash<pre><code>yum install ipset\n</code></pre></p> </li> <li> <p>\u4e3a\u4e86\u4fbf\u4e8e\u67e5\u770b ipvs \u7684\u4ee3\u7406\u89c4\u5219\uff0c\u6700\u597d\u5b89\u88c5\u4e00\u4e0b\u7ba1\u7406\u5de5\u5177 ipvsadm\uff1a Bash<pre><code>yum install ipvsadm -y\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#11","title":"11.\u540c\u6b65\u670d\u52a1\u5668\u65f6\u95f4","text":"Bash<pre><code>#yum\u548cdnf\u90fd\u53ef\u4ee5\u5b89\u88c5\uff0c\u63a8\u8350\u7528dnf\nyum install chrony -y\nsystemctl enable chronyd &amp;&amp; systemctl start chronyd\n\n#\u5907\u4efd\u914d\u7f6e\ncp /etc/chrony.conf  /etc/chrony.conf.orig\n#\u6ce8\u89e3\u6389pool\nsed -i '/^pool/s/^/#/' /etc/chrony.conf\ngrep '#pool' /etc/chrony.conf\nsed -i '/#pool/a\\server cn.pool.ntp.org iburst' /etc/chrony.conf\nsed -i '/#pool/a\\server ntp.ntsc.ac.cn iburst' /etc/chrony.conf\nsed -i '/#pool/a\\server ntp1.aliyun.com iburst' /etc/chrony.conf\ngrep -A 3 '#pool' /etc/chrony.conf\n\n# \u91cd\u542f\nsystemctl restart chronyd.service\n\nchronyc sources\n# \u8f93\u51fa\u5982\u4e0b\u5185\u5bb9\n210 Number of sources = 4\nMS Name/IP address         Stratum Poll Reach LastRx Last sample               \n===============================================================================\n^- 0.cl.ntp.edgeuno.com          3   6     7     1  -3631us[+4657us] +/-  286ms\n^? ntp8.flashdance.cx            2   6     5     1  -6585us[+1703us] +/-  172ms\n^* time.neu.edu.cn               1   6     7     1   -104us[+8184us] +/-   29ms\n^+ ntp6.flashdance.cx            2   6     7     0    -16ms[  -16ms] +/-  188ms\n(base) [root@automlgpu3 ~]# date\nWed Jun 30 13:53:22 CST 2021\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#12","title":"12.\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6","text":"Bash<pre><code>yum install -y vim  lrzsz wget curl man tree rsync gcc gcc-c++ cmake telnet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step2docker","title":"STEP2:\u5b89\u88c5\u4f9d\u8d56\u2014\u2014Docker","text":"<p>\u8be6\u60c5\u67e5\u9605\uff1a\u3010docker-\u5b89\u88c5-\u5378\u8f7d\u6307\u5357\u3011</p> <ul> <li>Note:</li> <li>\u7531\u4e8e\u9ed8\u8ba4\u60c5\u51b5\u4e0b kubelet \u4f7f\u7528\u7684 cgroupdriver \u662f systemd\uff0c\u6240\u4ee5\u9700\u8981\u4fdd\u6301 docker \u548ckubelet \u7684 cgroupdriver \u4e00\u81f4\uff0c\u6211\u4eec\u8fd9\u91cc\u4fee\u6539 docker \u7684 cgroupdriver=systemd\u3002\u5982\u679c\u4e0d\u4fee\u6539 docker \u5219\u9700\u8981\u4fee\u6539 kubelet \u7684\u542f\u52a8\u914d\u7f6e\uff0c\u9700\u8981\u4fdd\u8bc1\u4e24\u8005\u4e00\u81f4\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step3kubeadmkubeletkubectl","title":"STEP3:\u5b89\u88c5kubeadm/kubelet/kubectl","text":"<p>Note:  - \u6267\u884c\u6b64\u6b65\u9aa4\u524d\u786e\u4fddSTEP1\u548cSTEP2\u90fd\u6210\u529f\u6267\u884c - \u4e0b\u5217\u8fc7\u7a0b\u4f7f\u7528\u6267\u884cyum\u6e90\u7684\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5 - \u6b64\u6b65\u9aa4\u6240\u6709\u7684\u7ed3\u70b9\u90fd\u9700\u8981\u6267\u884c</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1yum","title":"1.\u8bbe\u7f6eyum\u6e90","text":"<ul> <li> <p>\u80fd\u4f7f\u7528\u79d1\u5b66\u4e0a\u7f51\u8bbe\u7f6e\u6e90\u7684\u65b9\u5f0f Bash<pre><code>cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg\n        https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg\nEOF\n</code></pre></p> </li> <li> <p>\u4e0d\u80fd\u79d1\u5b66\u4e0a\u7f51\u8bbe\u7f6e\u6e90\u7684\u65b9\u5f0f Bash<pre><code>cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\n        http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2yum","title":"2.\u91cd\u65b0\u6784\u5efayum\u7f13\u5b58","text":"Bash<pre><code>yum -y install epel-release\nyum clean all\nyum makecache\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3kubeadmkubeletkubectl","title":"3.\u5b89\u88c5kubeadm/kubelet/kubectl","text":"Bash<pre><code>yum -y install kubelet-1.19.4 kubeadm-1.19.4 kubectl-1.19.4\n\n# \u67e5\u770b k8s \u7684\u7248\u672c\nkubelet --version\n\n# \u67e5\u770b kubeadm \u7684\u7248\u672c\nkubeadm version\n\n# \u67e5\u770b kubectl \u7248\u672c\nkubectl version --client\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#4kubelet","title":"4.\u8bbe\u7f6ekubelet\u670d\u52a1\u5f00\u673a\u542f\u52a8","text":"Bash<pre><code>systemctl enable kubelet &amp;&amp; systemctl start kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step4","title":"STEP4: \u521d\u59cb\u5316\u96c6\u7fa4","text":"<p>Note: master\u7ed3\u70b9\u914d\u7f6ekubeadm \u521d\u59cb\u5316\u6587\u4ef6 - \u6267\u884c\u7684\u521d\u59cb\u5316\u7684\u65b9\u5f0f\u6709\u591a\u79cd    - \u914d\u7f6eyaml\u7684\u65b9\u5f0f    - \u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u914d\u7f6e\u53c2\u6570\u65b9\u5f0f</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#yaml","title":"\u65b9\u5f0f\u4e00\uff1a\u914d\u7f6eyaml\u7684\u65b9\u5f0f","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1_1","title":"1.\u5bfc\u51fa\u9ed8\u8ba4\u7684\u521d\u59cb\u5316\u914d\u7f6e\uff1a","text":"Bash<pre><code>$ kubeadm config print init-defaults &gt; kubeadm.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2","title":"2.\u6839\u636e\u9700\u6c42\u4fee\u6539\u914d\u7f6e","text":"<ul> <li>kube-proxy \u7684\u6a21\u5f0f\u4e3a ipvs</li> <li>\u5b89\u88c5 flannel \u7f51\u7edc\u63d2\u4ef6,\u9700\u8981\u5c06 networking.podSubnet \u8bbe\u7f6e\u4e3a<code>10.244.0.0/16</code>\uff1a</li> </ul> YAML<pre><code>apiVersion: kubeadm.k8s.io/v1beta2\nbootstrapTokens:\n- groups:\n  - system:bootstrappers:kubeadm:default-node-token\n  token: abcdef.0123456789abcdef\n  ttl: 24h0m0s\n  usages:\n  - signing\n  - authentication\nkind: InitConfiguration\nlocalAPIEndpoint:\n  advertiseAddress: 192.168.33.131  # apiserver \u8282\u70b9\u5185\u7f51IP\n  bindPort: 6443\nnodeRegistration:\n  criSocket: /var/run/dockershim.sock\n  name: ydzs-master  # \u9ed8\u8ba4\u8bfb\u53d6\u5f53\u524dmaster\u8282\u70b9\u7684hostname\n  taints:\n  - effect: NoSchedule\n    key: node-role.kubernetes.io/master\n---\napiServer:\n  timeoutForControlPlane: 4m0s\napiVersion: kubeadm.k8s.io/v1beta2\ncertificatesDir: /etc/kubernetes/pki\nclusterName: kubernetes\ncontrollerManager: {}\ndns:\n  type: CoreDNS\netcd:\n  local:\n    dataDir: /var/lib/etcd\nimageRepository: registry.aliyuncs.com/google_containers  # \u4fee\u6539\u6210\u963f\u91cc\u4e91\u955c\u50cf\u6e90\nkind: ClusterConfiguration\nkubernetesVersion: v1.16.2\nnetworking:\n  dnsDomain: cluster.local\n  podSubnet: 10.244.0.0/16  # Pod \u7f51\u6bb5\uff0cflannel\u63d2\u4ef6\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u7f51\u6bb5\n  serviceSubnet: 10.96.0.0/12\nscheduler: {}\n---\napiVersion: kubeproxy.config.k8s.io/v1alpha1\nkind: KubeProxyConfiguration\nmode: ipvs  # kube-proxy \u6a21\u5f0f\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3","title":"3.\u6267\u884c\u521d\u59cb\u5316","text":"Bash<pre><code>kubeadm init --config kubeadm.yaml\n\n# \u6267\u884c\u6210\u529f\u4f1a\u663e\u793a\u5982\u4e0b\u5185\u5bb9\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.33.131:6443 --token j7t5rh.7ao1kxy4ngj3ua2u \\\n    --discovery-token-ca-cert-hash sha256:22a3006ef3935419f13f3da59592f2450da4fd33035f81bd0d8048efd0cb38aa \n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_1","title":"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u914d\u7f6e\u53c2\u6570\u65b9\u5f0f","text":"Bash<pre><code>kubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.18.2 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16 \n</code></pre> <ul> <li>\u53c2\u6570\u8bf4\u660e\uff1a Bash<pre><code>--apiserver-advertise-address\uff1a\u672c\u673aIP\uff08\u4e5f\u662f Master\u7684IP\uff09\uff0c\u4f7f\u7528\u5185\u7f51IP\n--image-repository registry.aliyuncs.com/google_containers \uff1a\u62c9\u53d6\u955c\u50cf\u7684\u5730\u5740\uff0c\u8fd9\u91cc\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u955c\u50cf\u4ed3\u5e93\n--kubernetes-version\uff1a k8s \u7248\u672c\u53f7\n--service-cidr\uff1a\u66b4\u9732\u670d\u52a1\u7684IP\u7f51\u6bb5\uff0cIP\u4e0d\u4e0e\u73b0\u6709\u7684\u51b2\u7a81\u5c31\u53ef\u4ee5\n--pod-network-cidr\uff1a Pod\u7684IP\u7f51\u6bb5\uff0cIP\u4e0d\u4e0e\u73b0\u6709\u7684\u51b2\u7a81\u5c31\u53ef\u4ee5\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#kubeconfig","title":"\u62f7\u8d1d kubeconfig \u6587\u4ef6","text":"Bash<pre><code>$ mkdir -p $HOME/.kube\n$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n$ sudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_2","title":"\u67e5\u770b\u8282\u70b9\u4fe1\u606f","text":"<ul> <li>\u72b6\u6001\u4e3aNoteReady\u7684\u539f\u56e0\u662f\u6ca1\u6709\u5b89\u88c5\u7f51\u5361 Bash<pre><code>kubectl get nodes\n\n# \u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   NotReady   master   4h55m   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step5","title":"STEP5:\u6dfb\u52a0\u8282\u70b9","text":"<p>Note:  - \u5b89\u88c5kubeadm \u3001 kubelet \u3001kubectl  - \u5982\u679c\u5fd8\u4e86token\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u5217\u547d\u4ee4\u91cd\u65b0\u751f\u6210    - kubeadm token create --print-join-command</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1kubeadm-kubelet-kubectl","title":"1.\u5b89\u88c5kubeadm \u3001 kubelet \u3001kubectl","text":"<ul> <li>\u53ef\u4ee5\u53c2\u8003\u4e0a\u9762master\u8282\u70b9\u7684\u5b89\u88c5\u65b9\u5f0f</li> <li>\u6ce8\u610f:node\u8282\u70b9\u4e0d\u9700\u8981\u6267\u884cinit\u7684\u64cd\u4f5c</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2join","title":"2.\u6267\u884cjoin\u64cd\u4f5c","text":"Bash<pre><code>kubeadm join 192.168.33.131:6443 --token j7t5rh.7ao1kxy4ngj3ua2u \\\n    --discovery-token-ca-cert-hash sha256:22a3006ef3935419f13f3da59592f2450da4fd33035f81bd0d8048efd0cb38aa \n\n# \u6267\u884c\u6210\u529f\u540e\u4f1a\u663e\u793a\u5982\u4e0b\u5185\u5bb9\uff1a\n[root@centos803 ~]# kubeadm join 192.168.33.131:6443 --token whrgqy.u4qqzag60frlk4vw     --discovery-token-ca-cert-hash sha256:5846f57ce7e8843f5adc272a3261a8b5b158867328134ee745622eef2185e532\nW0304 14:10:56.883083   26739 join.go:346] [preflight] WARNING: JoinControlPane.controlPlane settings will be ignored when control-plane flag is not set.\n[preflight] Running pre-flight checks\n        [WARNING Hostname]: hostname \"centos803\" could not be reached\n        [WARNING Hostname]: hostname \"centos803\": lookup centos803 on 8.8.8.8:53: no such host\n[preflight] Reading configuration from the cluster...\n[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -oyaml'\n[kubelet-start] Downloading configuration for the kubelet from the \"kubelet-config-1.18\" ConfigMap in the kube-system namespace\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Starting the kubelet\n[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...\n\nThis node has joined the cluster:\n* Certificate signing request was sent to apiserver and a response was received.\n* The Kubelet was informed of the new secure connection details.\n\nRun 'kubectl get nodes' on the control-plane to see this node join the cluster.\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3master","title":"3.\u5728master\u67e5\u770b\u8282\u70b9\u4fe1\u606f","text":"<ul> <li>\u72b6\u6001\u4e3aNoteReady\u7684\u539f\u56e0\u662f\u6ca1\u6709\u5b89\u88c5\u7f51\u5361 Bash<pre><code>kubectl get nodes\n\n# \u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   NotReady   master   4h55m   v1.19.4\ncentos802   NotReady   &lt;none&gt;   4h16m   v1.19.4\ncentos803   NotReady   &lt;none&gt;   3h46m   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step6","title":"STEP6: \u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6","text":"<p>Note: \u5728master\u8282\u70b9\u5b89\u88c5\u5c31\u597d</p> <p>\u5e38\u7528\u7684kubernetes\u7f51\u7edc\u63d2\u4ef6\u6709\uff1a - flannel\uff08\u6b64\u5904\u9009\u62e9\u5b89\u88c5\uff09 - calico</p> <p>k8s\u5b98\u65b9\u6587\u6863\u4e2d\u7f51\u7edc\u63d2\u4ef6\u8bf4\u660e</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1flannel","title":"1.\u5b89\u88c5flannel","text":"<p>\u5f53\u6211\u4eec\u90e8\u7f72\u5b8c\u7f51\u7edc\u63d2\u4ef6\u540e\u6267\u884c ifconfig \u547d\u4ee4\uff0c\u6b63\u5e38\u4f1a\u770b\u5230\u65b0\u589e\u7684<code>cni0</code>\u4e0e<code>flannel1</code>\u8fd9\u4e24\u4e2a\u865a\u62df\u8bbe\u5907\uff0c\u4f46\u662f\u5982\u679c\u6ca1\u6709\u770b\u5230<code>cni0</code>\u8fd9\u4e2a\u8bbe\u5907\u4e5f\u4e0d\u7528\u592a\u62c5\u5fc3\uff0c\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf<code>/var/lib/cni</code>\u76ee\u5f55\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5e76\u4e0d\u662f\u8bf4\u90e8\u7f72\u6709\u95ee\u9898\uff0c\u800c\u662f\u8be5\u8282\u70b9\u4e0a\u6682\u65f6\u8fd8\u6ca1\u6709\u5e94\u7528\u8fd0\u884c\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u8be5\u8282\u70b9\u4e0a\u8fd0\u884c\u4e00\u4e2a Pod \u5c31\u53ef\u4ee5\u770b\u5230\u8be5\u76ee\u5f55\u4f1a\u88ab\u521b\u5efa\uff0c\u5e76\u4e14<code>cni0</code>\u8bbe\u5907\u4e5f\u4f1a\u88ab\u521b\u5efa\u51fa\u6765\u3002</p> Bash<pre><code>$ wget https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml\n# \u56e0\u4e3a\u6709\u8282\u70b9\u662f\u591a\u7f51\u5361\uff0c\u6240\u4ee5\u9700\u8981\u5728\u8d44\u6e90\u6e05\u5355\u6587\u4ef6\u4e2d\u6307\u5b9a\u5185\u7f51\u7f51\u5361\n# \u641c\u7d22\u5230\u540d\u4e3a kube-flannel-ds-amd64 \u7684 DaemonSet\uff0c\u5728kube-flannel\u5bb9\u5668\u4e0b\u9762\n$ vi kube-flannel.yml\n......\ncontainers:\n- name: kube-flannel\n  image: quay.io/coreos/flannel:v0.11.0-amd64\n  command:\n  - /opt/bin/flanneld\n  args:\n  - --ip-masq\n  - --kube-subnet-mgr\n  - --iface=eth0  # \u5982\u679c\u662f\u591a\u7f51\u5361\u7684\u8bdd\uff0c\u6307\u5b9a\u5185\u7f51\u7f51\u5361\u7684\u540d\u79f0\n......\n$ kubectl apply -f kube-flannel.yml  # \u5b89\u88c5 flannel \u7f51\u7edc\u63d2\u4ef6\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2master","title":"2.\u518d\u6b21\u5728master\u67e5\u770b\u8282\u70b9\u4fe1\u606f","text":"<ul> <li>\u72b6\u6001\u4e3aNoteReady\u7684\u539f\u56e0\u662f\u6ca1\u6709\u5b89\u88c5\u7f51\u5361 Bash<pre><code>kubectl get nodes\n\n# \u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   Ready      master   4h55m   v1.19.4\ncentos802   Ready      &lt;none&gt;   4h16m   v1.19.4\ncentos803   Ready      &lt;none&gt;   3h46m   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_3","title":"\u5907\u6ce8\u5185\u5bb9\uff1a","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_4","title":"\u91cd\u7f6e\u7684\u65b9\u6cd5\uff1a","text":"<p>\u5982\u679c\u4f60\u7684\u96c6\u7fa4\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u9047\u5230\u4e86\u5176\u4ed6\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u8fdb\u884c\u91cd\u7f6e\uff1a Bash<pre><code>$ kubeadm reset\n$ ifconfig cni0 down &amp;&amp; ip link delete cni0\n$ ifconfig flannel.1 down &amp;&amp; ip link delete flannel.1\n$ rm -rf /var/lib/cni/\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_5","title":"\u5f7b\u5e95\u5378\u8f7d\u7684\u65b9\u6cd5","text":"Bash<pre><code>#!/bin/bash\nkubeadm reset -f\nmodprobe -r ipip\nlsmod\nrm -rf ~/.kube/\nrm -rf /etc/kubernetes/\nrm -rf /etc/systemd/system/kubelet.service.d\nrm -rf /etc/systemd/system/kubelet.service\nrm -rf /usr/bin/kube*\nrm -rf /etc/cni\nrm -rf /opt/cni\nrm -rf /var/lib/etcd\nrm -rf /var/etcd\nyum -y remove kubeadm kubectl kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_6","title":"\u5e38\u7528\u63d2\u4ef6\u5b89\u88c5","text":"<p>\u6240\u6709\u7684\u63d2\u4ef6\u90fd\u5728master\u4e3b\u673a\u4e0a\u5b89\u88c5\uff0c\u5b83\u4f1a\u81ea\u52a8\u63a8\u9001\u5230node\u8282\u70b9\u4e0a\u5b89\u88c5\uff0c\u5982\u9700\u8981\u4f1a\u8fde\u63a5\u4e0amaster</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1kubernetes-dashboard","title":"1.\u5b89\u88c5kubernetes-dashboard","text":"<ul> <li> <p>\u4e0b\u8f7d\u5b89\u88c5 Text Only<pre><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.3/aio/deploy/recommended.yaml\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u662f\u5426\u5b89\u88c5\u6210\u529f Bash<pre><code>kubectl get po --all-namespaces|grep dashboard\n</code></pre></p> </li> <li> <p>\u4fee\u6539node\u4e3aNodePort\u6a21\u5f0f Bash<pre><code>kubectl patch svc -n kubernetes-dashboard kubernetes-dashboard -p '{\"spec\":{\"type\":\"NodePort\"}}'\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u670d\u52a1 svc\u662fservice\u662f\u7f29\u5199 Bash<pre><code>kubectl get svc -n kubernetes-dashboard\n</code></pre></p> </li> <li> <p>\u8bbf\u95ee\u6d4f\u89c8\u5668,\u4f7f\u7528https\u7684\u65b9\u5f0f\u8bbf\u95ee Text Only<pre><code>https://192.168.33.130:32005/\n</code></pre></p> </li> <li> <p>\u8f93\u5165\u521a\u521a\u521d\u59cb\u5316\u751f\u6210\u7684token: tsmqw9.wbp9qzvd2owjgj6s Text Only<pre><code>kubeadm join 192.168.33.132:6443 --token  \\\n    --discovery-token-ca-cert-hash sha256:5ca47847041f5f152d818e38355a8972174413cdb9f0f515393ffce773a5a2db\n</code></pre></p> </li> <li> <p>\u521b\u5efadashboard\u7ba1\u7406\u7528\u6237\u53catoken Text Only<pre><code># \u521b\u5efadashboard\u7ba1\u7406\u7528\u6237\nkubectl create serviceaccount dashboard-admin -n kubernetes-dashboard\n\n# \u7ed1\u5b9a\u7528\u6237\u4e3a\u96c6\u7fa4\u7ba1\u7406\u7528\u6237\nkubectl create clusterrolebinding dashboard-cluster-admin --clusterrole=cluster-admin \\\n--serviceaccount=kubernetes-dashboard:dashboard-admin\n\n# \u67e5\u770b\u7ba1\u7406\u7528\u6237\u7684token, \u5e76\u590d\u5236\u5230\u6d4f\u89c8\u5668\u4e2d\u767b\u5f55\nkubectl describe secret -n kubernetes-dashboard dashboard-admin-token\n</code></pre></p> </li> <li> <p>\u4e0b\u5217\u4e3a\u5b89\u88c5dashboard\u65f6\u6267\u884c\u6b65\u9aa4\u7684log\uff0c\u4f9b\u53c2\u8003 Text Only<pre><code>[root@centos801 ~]# kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.3/aio/deploy/recommended.yaml\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nnamespace/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nserviceaccount/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nservice/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nsecret/kubernetes-dashboard-certs configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nsecret/kubernetes-dashboard-csrf configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nsecret/kubernetes-dashboard-key-holder configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nconfigmap/kubernetes-dashboard-settings configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nrole.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nclusterrole.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nclusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\ndeployment.apps/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nservice/dashboard-metrics-scraper configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\ndeployment.apps/dashboard-metrics-scraper configured\n[root@centos801 ~]# kubectl get po --all-namespaces|grep dashboard\nkubernetes-dashboard   dashboard-metrics-scraper-6b4884c9d5-kmr82   1/1     Running            0          132m\nkubernetes-dashboard   dashboard-metrics-scraper-6b4884c9d5-nq7ns   1/1     Terminating        0          5h8m\nkubernetes-dashboard   kubernetes-dashboard-7bfbb48676-phc8t        1/1     Terminating        0          5h8m\nkubernetes-dashboard   kubernetes-dashboard-7bfbb48676-pjfgb        1/1     Running            0          132m\nkubernetes-dashboard   kubernetes-dashboard-7f99b75bf4-765h8        0/1     Pending            0          16s\n[root@centos801 ~]# kubectl patch svc -n kubernetes-dashboard kubernetes-dashboard -p '{\"spec\":{\"type\":\"NodePort\"}}'\n\nservice/kubernetes-dashboard patched\n[root@centos801 ~]# service/kubernetes-dashboard patched\n-bash: service/kubernetes-dashboard: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\n[root@centos801 ~]# kubectl patch svc -n kubernetes-dashboard kubernetes-dashboard -p '{\"spec\":{\"type\":\"NodePort\"}}'\nservice/kubernetes-dashboard patched (no change)\n[root@centos801 ~]# kubectl get svc -n kubernetes-dashboard\nNAME                        TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)         AGE\ndashboard-metrics-scraper   ClusterIP   10.106.23.98    &lt;none&gt;        8000/TCP        5h10m\nkubernetes-dashboard        NodePort    10.108.155.79   &lt;none&gt;        443:32005/TCP   5h10m\n[root@centos801 ~]# kubectl create serviceaccount dashboard-admin -n kubernetes-dashboard\nserviceaccount/dashboard-admin created\n[root@centos801 ~]# kubectl create clusterrolebinding dashboard-cluster-admin --clusterrole=cluster-admin \\\n&gt; --serviceaccount=kubernetes-dashboard:dashboard-admin\nclusterrolebinding.rbac.authorization.k8s.io/dashboard-cluster-admin created\n[root@centos801 ~]# kubectl describe secret -n kubernetes-dashboard dashboard-admin-token\nName:         dashboard-admin-token-qflhd\nNamespace:    kubernetes-dashboard\nLabels:       &lt;none&gt;\nAnnotations:  kubernetes.io/service-account.name: dashboard-admin\n              kubernetes.io/service-account.uid: 8a81530d-8abf-4af1-aa66-f026bbee16f7\n\nType:  kubernetes.io/service-account-token\n\nData\n====\ntoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6IldWZTB2aWVxWE0tVUhad3pQdnRhM1Z2a01PSi1rMS1EemdvQk44bVNMVkUifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tdG9rZW4tcWZsaGQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGFzaGJvYXJkLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiOGE4MTUzMGQtOGFiZi00YWYxLWFhNjYtZjAyNmJiZWUxNmY3Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.GdJoeFOZB_p0qvc1RmU0o2MfyCZl_ElWQzrieILwKCkPZpJlfDCPdXGBPkrtGlCIBfBvufaLwyFBeer9USb-3AcfwYBfACI5ZUUE6Wu6svTJwsMFdIIgCtWBDldcqKU1TRcGPaOaEIPkne_OZX4sn2hSny04wc4ewfv99iUakTBi8etBx4cBBs5V55lZ47aTb0DCsit8cKRsj-7nEqWX3yzlREe_UBvAa7nRXQaM4dcgGXolWphYYxQQAdLi3Iq2qzqxu3jdodWKgOa2pvMM0Opd_zbtVKsABZA0TihxtWs6w5clHpScsRt-urBNTJVz7tuYHkkV6AyO6CZ-8ZOCYg\nca.crt:     1025 bytes\nnamespace:  20 bytes\n\n[root@centos801 ~]# kubectl get nodes\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   Ready      master   6h47m   v1.18.2\ncentos802   NotReady   &lt;none&gt;   6h8m    v1.18.2\ncentos803   Ready      &lt;none&gt;   5h38m   v1.18.2\n</code></pre></p> </li> <li> <p>\u96c6\u7fa4\u6210\u529f\u90e8\u7f72</p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_7","title":"\u6269\u5c55","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1ca","title":"1.\u83b7\u53d6ca\u8bc1\u4e66\u7684\u65b9\u6cd5","text":"<p>discovery-token-ca-cert-hash \u7684\u503c\u662f\u4e0d\u4f1a\u53d8\u7684\uff0c\u60f3\u8981\u67e5\u770b\u5219\u6267\u884c\uff1a</p> Text Only<pre><code>openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed 's/^.* //'\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2_1","title":"2.\u914d\u7f6e\u81ea\u52a8\u8865\u5168\u7684\u547d\u4ee4","text":"Text Only<pre><code># \u5b89\u88c5bash\u81ea\u52a8\u8865\u5168\u63d2\u4ef6\nyum install bash-completion -y\n\n# \u8bbe\u7f6ekubectl\u4e0ekubeadm\u547d\u4ee4\u8865\u5168\uff0c\u4e0b\u6b21login\u751f\u6548\nkubectl completion bash &gt;/etc/bash_completion.d/kubectl\nkubeadm completion bash &gt; /etc/bash_completion.d/kubeadm\n\n------------------------------------\u6216\u8005\u4e0b\u9762\u7684\u65b9\u5f0f----------------------------------------------------------------\ndnf install bash-completion -y\nsource /usr/share/bash-completion/bash_completion\nsource &lt;(kubectl completion bash)\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/","title":"kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.27.9)","text":"<p>\u518d\u51fa\u53d1\uff0c\u5e94\u4e1a\u52a1\u9700\u8981\uff0c\u9700\u8981\u518d\u6b21\u7740\u624b\u90e8\u7f72 kubernetes \u96c6\u7fa4\uff0c\u4e4b\u524d\u5206\u522b\u9646\u7eed\u7528\u4e0d\u540c\u5de5\u5177\u90e8\u7f72\u8fc7\u4e0d\u540c\u7684\u7248\u672c\uff0c\u5728\u6b64\u518d\u505a\u4e00\u6b21\u5168\u65b0\u7684\u90e8\u7f72\uff0c\u5e76\u91cd\u65b0\u6574\u7406\u548c\u5f52\u6863\u4ee5\u524d\u90e8\u7f72\u7684\u6d41\u7a0b\u6b65\u9aa4\u548c\u9047\u5230\u7684\u95ee\u9898\u53ca\u89e3\u51b3\u529e\u6cd5\u3002\u2014\u20142024\u5e7408\u670816\u65e523:50:14\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#kubeadm-v1279","title":"kubeadm \u90e8\u7f72 v1.27.9 \u7248\u672c","text":"<p>\u672c\u6b21\u76ee\u6807\u662f\u642d\u5efa\u4e00\u4e2a\u4e00\u4e3b\u4e24\u4ece\u7684 k8s \u96c6\u7fa4\u3002\u786c\u4ef6\u8981\u6c42\u5efa\u8bae\u4e0d\u8981\u4f4e\u4e8e2 \u6838 CPU\u30012G \u5185\u5b58\u300120G \u786c\u76d8\uff0c\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u662f Linux\u3002 \u4e09\u53f0\u673a\u5668\u4e4b\u95f4\u9700\u8981\u914d\u7f6e SSH \u514d\u5bc6\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#_1","title":"\u524d\u7f6e\u51c6\u5907\u8bf4\u660e","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u9700\u8981\u5206\u522b\u5728\u6240\u6709\u673a\u5668\u4e0a\u6267\u884c\uff01\uff01\uff01</p> <ul> <li>\u786c\u4ef6\u8981\u6c42</li> </ul> \u673a\u5668\u914d\u7f6e \u7528\u9014 \u670d\u52a1\u5668\u4e3b\u673a\u540d \u5185\u7f51IP\u5730\u5740 2\u68384G\u5185\u5b58\uff0c50G\u786c\u76d8\uff0cCentOS 7.9\u64cd\u4f5c\u7cfb\u7edf \u7ba1\u7406\u8282\u70b9 node77 172.16.3.77 2\u68382G\u5185\u5b58\uff0c50G\u786c\u76d8\uff0cCentOS 7.9\u64cd\u4f5c\u7cfb\u7edf \u5de5\u4f5c\u8282\u70b9 node78 172.16.3.78 2\u68382G\u5185\u5b58\uff0c50G\u786c\u76d8\uff0cCentOS 7.9\u64cd\u4f5c\u7cfb\u7edf \u5de5\u4f5c\u8282\u70b9 node79 172.16.3.79 <ol> <li> <p>\u5173\u95ed\u9632\u706b\u5899\u53ca\u76f8\u5173\u914d\u7f6e Bash<pre><code># \u5173\u95ed\u548c\u7981\u7528\u9632\u706b\u5899\nsystemctl stop firewalld\nsystemctl disable firewalld\n\n# \u5173\u95edselinux\uff0cselinux \u662f Linux \u7cfb\u7edf\u4e0b\u7684\u4e00\u4e2a\u5b89\u5168\u670d\u52a1\uff0c\u9700\u8981\u5173\u95ed\nsetenforce 0  # \u4e34\u65f6\nsed -i 's/enforcing/disabled/' /etc/selinux/config  # \u6c38\u4e45\n\n# \u5173\u95ed Linux \u7684 swap \u5206\u533a\uff0c\u63d0\u5347 Kubernetes \u7684\u6027\u80fd\nswapoff -a  # \u4e34\u65f6\nsed -ri 's/.*swap.*/#&amp;/' /etc/fstab    # \u6c38\u4e45\n</code></pre></p> </li> <li> <p>\u6309\u7167\u89c4\u5212\u4fee\u6539\u4e3b\u673a\u540d</p> <p>K8s \u4f7f\u7528\u4e3b\u673a\u540d\u8fdb\u884c\u8282\u70b9\u7684\u901a\u4fe1\uff0c\u6240\u4ee5\u9700\u8981\u6309\u7167\u8868\u683c\u4e2d\u7684\u4e3b\u673a\u540d\u4fee\u6539 3 \u53f0\u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u3002\u6ce8\u610f\uff1aK8s \u8981\u6c42\u4e3b\u673a\u540d\u4f7f\u7528 \u201c-\u201d \u6216\u8005 \u201c.\u201d \u8fde\u63a5\uff0c\u4e0d\u80fd\u4f7f\u7528\u4e0b\u5212\u7ebf \u201c_\u201d\u3002</p> </li> </ol> Bash<pre><code># \u5728192.168.1.11 \u8fd9\u4e2a\u673a\u5668\u4e0a\u6267\u884c\u4fee\u6539\u4e3b\u673a\u540d\u547d\u4ee4\nhostnamectl set-hostname k8s-master\n\n# \u5728192.168.1.12 \u8fd9\u4e2a\u673a\u5668\u4e0a\u6267\u884c\u4fee\u6539\u4e3b\u673a\u540d\u547d\u4ee4\nhostnamectl set-hostname k8s-worker1\n\n# \u5728192.168.1.13 \u8fd9\u4e2a\u673a\u5668\u4e0a\u6267\u884c\u4fee\u6539\u4e3b\u673a\u540d\u547d\u4ee4\nhostnamectl set-hostname k8s-worker2\n</code></pre> <ol> <li> <p>\u4e3b\u673a\u540d\u89e3\u6790 Bash<pre><code># \u6dfb\u52a0\u5404\u4e2a\u8282\u70b9\u7684\u89e3\u6790\uff0cIP \u5730\u5740\u9700\u8981\u66ff\u6362\u4e3a\u4f60\u81ea\u5df1\u670d\u52a1\u5668\u7684\u5185\u7f51 IP \u5730\u5740\u3002\ncat &gt;&gt; /etc/hosts &lt;&lt; EOF\n192.168.1.11 k8s-master\n192.168.1.12 k8s-worker1\n192.168.1.13 k8s-worker2\nEOF\n</code></pre></p> </li> <li> <p>\u65f6\u95f4\u540c\u6b65</p> <p>K8s \u8981\u6c42\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u65f6\u95f4\u4e00\u81f4\uff0c\u4f7f\u7528 ntpdate\uff08Network Time Protocol\uff09\u4ece\u7f51\u7edc\u540c\u6b65\u65f6\u95f4\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 ntpdate\uff0c\u4e4b\u540e\u518d\u6267\u884c\u540c\u6b65\u547d\u4ee4\u3002</p> </li> </ol> Bash<pre><code># \u5b89\u88c5ntp\u670d\u52a1\nyum install ntpdate -y\n\n# \u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u65f6\u95f4\u670d\u52a1\u540c\u6b65\u65f6\u95f4 \nntpdate ntp1.aliyun.com\n\n\n###############PS#######################\n# \u5982\u679c\u63d0\u793a\u6ca1\u6709\u5339\u914d\u5230 ntpdate\uff08Unable to find a match: ntpdate\uff09\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 wlnmp \u7684\u8f6f\u4ef6\u6e90\u5b89\u88c5 wntp\uff0c\n# \u7136\u540e\u518d\u6267\u884c\u65f6\u95f4\u540c\u6b65\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n\nrpm -ivh http://mirrors.wlnmp.com/centos/wlnmp-release-centos.noarch.rpm\nyum install wntp -y\n\n# \u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u65f6\u95f4\u670d\u52a1\u540c\u6b65\u65f6\u95f4 \nntpdate ntp1.aliyun.com\n###############PS#######################\n</code></pre> <ol> <li>\u914d\u7f6e\u7f51\u8def <p>\u4e3a\u4e86\u8ba9 K8s \u80fd\u591f\u8f6c\u53d1\u7f51\u7edc\u6d41\u91cf\uff0c\u9700\u8981\u4fee\u6539 iptables \u7684\u914d\u7f6e\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5feb\u901f\u7f16\u8f91 \u201cetc/sysctl.d/k8s.conf\u201d \u914d\u7f6e\u6587\u4ef6\uff0c\u589e\u52a0 iptables \u7684\u914d\u7f6e\u3002</p> </li> </ol> Bash<pre><code># \u4fee\u6539 Linux \u5185\u6838\u53c2\u6570\uff0c\u6dfb\u52a0\u7f51\u6865\u8fc7\u6ee4\u548c\u5730\u5740\u8f6c\u53d1\u529f\u80fd\ncat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF\n\n# \u4f7f\u914d\u7f6e\u751f\u6548\nsudo sysctl --system\n</code></pre> <ol> <li>\u91cd\u542f\u670d\u52a1\u5668 Bash<pre><code># \u8fd0\u884c \u201creboot\u201d \u547d\u4ee4\uff0c\u91cd\u542f\u670d\u52a1\u5668\uff0c\u8ba9\u4ee5\u4e0a\u914d\u7f6e\u751f\u6548\nreboot\n</code></pre></li> </ol>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#_2","title":"\u5b89\u88c5\u76f8\u5173\u8f6f\u4ef6","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u9700\u8981\u5206\u522b\u5728\u6240\u6709\u673a\u5668\u4e0a\u6267\u884c\uff01\uff01\uff01</p> <ol> <li>\u5b89\u88c5 Docker <p>\u53ef\u4ee5\u4f7f\u7528 Docker \u6216 Podman \u4f5c\u4e3a\u8fd0\u884c\u5bb9\u5668\u7684\u8fd0\u884c\u65f6\u7ec4\u4ef6\uff0c\u518d\u6b21\u4f7f\u7528 Docker</p> </li> </ol> Bash<pre><code># \u901a\u8fc7 wget \u547d\u4ee4\u83b7\u53d6 docker \u8f6f\u4ef6\u4ed3\u5e93\u4fe1\u606f\nwget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo\n\n# \u5b89\u88c5 docker-ce\nyum -y install docker-ce\n\n# \u5f00\u542f docker \u670d\u52a1\nsystemctl enable docker &amp;&amp; systemctl start docker\n</code></pre> <p>Docker \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u914d\u7f6e\u963f\u91cc\u4e91\u63d0\u4f9b\u7684\u955c\u50cf\u5e93\u6765\u52a0\u901f\u955c\u50cf\u4e0b\u8f7d\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5feb\u901f\u7f16\u8f91 \u201c/etc/docker/daemon.json\u201d \u6587\u4ef6\uff0c\u589e\u52a0\u955c\u50cf\u5e93\u914d\u7f6e\uff0c\u6700\u540e\u518d\u91cd\u542f Docker \u670d\u52a1\u3002</p> Bash<pre><code># \u914d\u7f6e\u955c\u50cf\u4e0b\u8f7d\u52a0\u901f\u5668\uff0c\u56fd\u5185\u4f7f\u7528\u963f\u91cc\u4e91\u955c\u50cf\u5e93\u4f1a\u66f4\u5feb\ncat &gt; /etc/docker/daemon.json &lt;&lt; EOF\n{\n  \"registry-mirrors\": [\"https://b9pmyelo.mirror.aliyuncs.com\"],\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\nEOF\n\n# \u91cd\u542f docker \u670d\u52a1\nsystemctl restart docker\n</code></pre> <ol> <li>\u5b89\u88c5 cri-dockered <p>cri-dockerd \u7528\u4e8e\u4e3a Docker \u63d0\u4f9b\u4e00\u4e2a\u80fd\u591f\u652f\u6301 K8s \u5bb9\u5668\u8fd0\u884c\u65f6\u6807\u51c6\u7684\u5de5\u5177\uff0c\u4ece\u800c\u80fd\u591f\u8ba9 Docker \u4f5c\u4e3a K8s \u5bb9\u5668\u5f15\u64ce\u3002\u901a\u8fc7 wget \u4e0b\u8f7d cri-dockerd \u5b89\u88c5\u5305\uff0c\u7136\u540e\u901a\u8fc7 rpm \u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\u3002\u5982\u679c\u5b98\u65b9\u5730\u5740\u4e0b\u8f7d\u592a\u6162\uff0c\u53ef\u4ee5\u4f7f\u7528\u79bb\u7ebf\u5b89\u88c5\u5305\u8fdb\u884c\u5b89\u88c5</p> </li> </ol> Bash<pre><code># \u901a\u8fc7 wget \u547d\u4ee4\u83b7\u53d6 cri-dockerd\u8f6f\u4ef6\nwget https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.12/cri-dockerd-0.3.12-3.el7.x86_64.rpm\n# \u901a\u8fc7 rpm \u547d\u4ee4\u6267\u884c\u5b89\u88c5\u5305\nrpm -ivh cri-dockerd-0.3.12-3.el7.x86_64.rpm\n</code></pre> <p>\u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528 vi \u7f16\u8f91\u5668\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff08/usr/lib/systemd/system/cri-docker.service\uff09\uff0c\u5728 \u201cExecStart=/usr/bin/cri-dockerd --container-runtime-endpoint fd://\u201d \u8fd9\u4e00\u884c\u589e\u52a0 \u201c\u2013pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9\u201d\u3002</p> Bash<pre><code># \u6253\u5f00 cri-docker.service \u914d\u7f6e\u6587\u4ef6\nvi /usr/lib/systemd/system/cri-docker.service\n\n# \u4fee\u6539\u5bf9\u5e94\u7684\u914d\u7f6e\u9879\nExecStart=/usr/bin/cri-dockerd --container-runtime-endpoint fd:// --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u91cd\u65b0\u52a0\u8f7d\u5e76\u5f00\u542f cri-dockered \u670d\u52a1</p> Bash<pre><code># \u52a0\u8f7d\u914d\u7f6e\u5e76\u5f00\u542f\u670d\u52a1\nsystemctl daemon-reload\nsystemctl enable cri-docker &amp;&amp; systemctl start cri-docker\n</code></pre> <ol> <li>\u6dfb\u52a0\u963f\u91cc\u4e91 YUM \u8f6f\u4ef6\u6e90 <p>\u56fd\u5185\u662f\u65e0\u6cd5\u8bbf\u95ee K8s \u5b98\u65b9\u7684\u955c\u50cf\u5e93\uff0c\u5982\u679c\u4e0d\u589e\u52a0\u8fd9\u4e2a\u914d\u7f6e\uff0c\u540e\u7eed\u5c31\u65e0\u6cd5\u5b89\u88c5\u76f8\u5173\u5de5\u5177\u3002</p> </li> </ol> Bash<pre><code># \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5feb\u901f\u7f16\u8f91 \u201c/etc/yum.repos.d/kubernetes.repo\u201d \u914d\u7f6e\u6587\u4ef6\uff0c\u6dfb\u52a0\u963f\u91cc\u4e91\u7684\u955c\u50cf\u5e93\u3002\ncat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; EOF\n[kubernetes]\nname=Kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#kubeadmkubeletkubectl","title":"\u5b89\u88c5 kubeadm\u3001kubelet\u3001kubectl","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u9700\u8981\u5206\u522b\u5728\u6240\u6709\u673a\u5668\u4e0a\u6267\u884c\uff01\uff01\uff01</p> <p>kubeadm \u7528\u6765\u521d\u59cb\u5316 K8s \u96c6\u7fa4\uff1bkubelet \u662f\u6bcf\u4e2a\u8282\u70b9\u7684 K8s \u7ba1\u7406\u5458\uff1bkubectl \u662f K8s \u7684\u547d\u4ee4\u884c\u4ea4\u4e92\u5de5\u5177</p> Bash<pre><code># \u6307\u5b9a\u4e86\u5b89\u88c5\u7684\u7248\u672c\u662f 1.28.0\nyum install -y kubelet-1.28.0 kubeadm-1.28.0 kubectl-1.28.0\n\n# \u5b89\u88c5\u6210\u529f\u540e\uff0c\u914d\u7f6e\u5f00\u673a\u542f\u52a8\u670d\u52a1\nsystemctl enable kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#master-k8s","title":"Master \u8282\u70b9\u521d\u59cb\u5316 k8s","text":"<p>\u53ea\u9700\u8981\u5728 Master \u8282\u70b9\u4e0a\u6267\u884c\u4ee5\u4e0b\u521d\u59cb\u5316\u547d\u4ee4\uff01\uff01\uff01 Bash<pre><code># \u201capiserver-advertise-address\u201d \u53c2\u6570\u9700\u8981\u66ff\u6362\u6210\u81ea\u5df1\u7684 Master \u8282\u70b9\u670d\u52a1\u5668\u7684\u5185\u7f51 IP\u3002\n\nkubeadm init \\\n  --apiserver-advertise-address=192.168.1.11 \\\n  --image-repository registry.aliyuncs.com/google_containers \\\n  --kubernetes-version v1.28.0 \\\n  --service-cidr=10.96.0.0/12 \\\n  --pod-network-cidr=10.244.0.0/16 \\\n  --cri-socket=unix:///var/run/cri-dockerd.sock \\\n  --ignore-preflight-errors=all\n\n\n###############\u53c2\u6570\u8bf4\u660e#######################\n# apiserver-advertise-address\uff1a\u96c6\u7fa4\u5e7f\u64ad\u5730\u5740\uff0c\u7528 master \u8282\u70b9\u7684\u5185\u7f51 IP\u3002\n# image-repository\uff1a\u7531\u4e8e\u9ed8\u8ba4\u62c9\u53d6\u955c\u50cf\u5730\u5740 k8s.gcr.io \u56fd\u5185\u65e0\u6cd5\u8bbf\u95ee\uff0c\u8fd9\u91cc\u6307\u5b9a\u963f\u91cc\u4e91\u955c\u50cf\u4ed3\u5e93\u5730\u5740\u3002\n# kubernetes-version\uff1a K8s \u7248\u672c\uff0c\u4e0e\u4e0a\u9762\u5b89\u88c5\u7684\u8f6f\u4ef6\u7248\u672c\u4e00\u81f4\u3002\n# service-cidr\uff1a\u96c6\u7fa4 Service \u7f51\u6bb5\u3002pod-network-cidr\uff1a\u96c6\u7fa4 Pod \u7f51\u6bb5\u3002\n# cri-socket\uff1a\u6307\u5b9a cri-socket \u63a5\u53e3\uff0c\u6211\u4eec\u8fd9\u91cc\u4f7f\u7528 unix:///var/run/cri-dockerd.sock\u3002\n###############\u53c2\u6570\u8bf4\u660e#######################\n</code></pre></p> <p>\u6267\u884c\u6210\u529f\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u5185\u5bb9</p> <p>Bash<pre><code>[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.1.11:6443 --token xxxxxx \\\n        --discovery-token-ca-cert-hash sha256:xxxxxx\n</code></pre> \u5728\u4ee5\u4e0a\u8fd4\u56de\u7ed3\u679c\u4e2d\u6709 3 \u6761\u547d\u4ee4\u9700\u8981\u7acb\u5373\u6267\u884c\uff0c\u8fd9\u662f\u7528\u6765\u8bbe\u7f6e kubectl \u5de5\u5177\u7684\u7ba1\u7406\u5458\u6743\u9650\uff0c\u6267\u884c\u4e4b\u540e\u5c31\u53ef\u4ee5\u5728 Master \u8282\u70b9\u4e0a\u901a\u8fc7\u7ec8\u7aef\u7a97\u53e3\u4f7f\u7528 kubectl \u547d\u4ee4\u4e86\u3002 Bash<pre><code># \u5728 Master \u8282\u70b9\u4e0a\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre> \u5728\u8fd4\u56de\u7ed3\u679c\u7684\u6700\u540e\uff0c\u8fd8\u6709 1 \u6761 \u201ckubeadm join\u201d \u547d\u4ee4\uff0c\u8fd9\u4e2a\u662f\u7528\u6765\u52a0\u5165\u5de5\u4f5c\u8282\u70b9\u7684\uff0c\u9700\u8981\u5728\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#work-k8s","title":"work \u8282\u70b9\u52a0\u5165 k8s \u96c6\u7fa4","text":"<p>K8s \u521d\u59cb\u5316\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u5176\u4ed6 2 \u4e2a\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c \u201ckubeadm join\u201d \u547d\u4ee4\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u4e86 cri-dockerd \uff0c\u9700\u8981\u5728\u547d\u4ee4\u52a0\u4e0a \u201c\u2013cri-socket=unix:///var/run/cri-dockerd.sock\u201d \u53c2\u6570\uff08\u6ce8\uff1a\u5982\u679c\u4f7f\u7528\u516c\u6709\u4e91\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5148\u6253\u5f00 Master \u8282\u70b9\u6240\u5728\u670d\u52a1\u5668\u7684 6443 \u7aef\u53e3\uff0c\u8fd9\u4e2a\u662f K8s \u7684 API server \u7aef\u53e3\u3002\uff09 Bash<pre><code># \u5728\u4e24\u4e2a\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c\nkubeadm join 192.168.1.11:6443 --token xxxxxx \\\n        --discovery-token-ca-cert-hash sha256:xxxxxx \\\n        --cri-socket=unix:///var/run/cri-dockerd.sock\n\n\n###############PS#######################\n# \u547d\u4ee4\u4e2d token \u6709\u6548\u671f\u4e3a 24 \u5c0f\u65f6\uff0c\u5f53 token \u8fc7\u671f\u4e4b\u540e\uff0c\u6267\u884c \u201ckubeadm join\u201d \u547d\u4ee4\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u65f6\u53ef\u4ee5\u76f4\u63a5\u5728 Master \u8282\u70b9\u4e0a\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210\u65b0\u7684 token\uff0c\u7136\u540e\u518d\u4f7f\u7528 \u201ckubeadm join\u201d \u547d\u4ee4\u52a0\u5165\u8282\u70b9\u3002\nkubeadm token create --print-join-command\n###############PS#######################\n</code></pre> \u6b64\u65f6\uff0c\u6211\u4eec\u7684\u96c6\u7fa4\u5c31\u90e8\u7f72\u6210\u529f\u4e86\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 \u201ckubectl get node\u201d \u547d\u4ee4\u6765\u67e5\u770b\u96c6\u7fa4\u8282\u70b9\u72b6\u6001\u3002</p> <p>\u4f60\u4f1a\u6ce8\u610f\u5230\u6240\u6709\u8282\u70b9\u7684\u72b6\u6001\u90fd\u662f \u201cNotReady\u201d\uff0c\u8fd9\u662f\u7531\u4e8e\u96c6\u7fa4\u8fd8\u7f3a\u5c11\u7f51\u7edc\u63d2\u4ef6\uff0c\u96c6\u7fa4\u7684\u5185\u90e8\u7f51\u7edc\u8fd8\u6ca1\u6709\u6b63\u5e38\u8fd0\u4f5c\u3002</p> <p>Bash<pre><code>[root@k8s-master ~]# kubectl get node\nNAME           STATUS     ROLES           AGE   VERSION\nk8s-master     NotReady   control-plane   84m   v1.28.0\nk8s-worker1    NotReady   &lt;none&gt;          82m   v1.28.0\nk8s-worker2    NotReady   &lt;none&gt;          47s   v1.28.0\n</code></pre> \u5b89\u88c5 k8s \u7f51\u7edc\u63d2\u4ef6 K8s \u7f51\u7edc\u63d2\u4ef6\uff0c\u4e5f\u79f0\u4e3a\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3\uff08CNI\uff09\u63d2\u4ef6\uff0c\u662f\u5b9e\u73b0 K8s \u96c6\u7fa4\u4e2d\u5bb9\u5668\u95f4\u901a\u4fe1\u548c\u7f51\u7edc\u8fde\u63a5\u7684\u5173\u952e\u7ec4\u4ef6\u3002\u5728\u8fd9\u91cc\u6211\u4f7f\u7528 Calico \u4f5c\u4e3a\u96c6\u7fa4\u7684\u7f51\u7edc\u63d2\u4ef6\u3002Calico \u662f\u901a\u8fc7\u6267\u884c\u4e00\u4e2a YAML \u6587\u4ef6\u90e8\u7f72\u5230 K8s \u96c6\u7fa4\u91cc\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9996\u5148\u9700\u8981\u901a\u8fc7 \u201cwget\u201d \u547d\u4ee4\u4e0b\u8f7d\u8fd9\u4e2a YAML \u6587\u4ef6\u3002 Bash<pre><code># \u4e0b\u8f7d Calico \u63d2\u4ef6\u90e8\u7f72\u6587\u4ef6\nwget https://docs.projectcalico.org/manifests/calico.yaml\n</code></pre> \u5176\u6b21\uff0c\u901a\u8fc7 vi \u7f16\u8f91\u5668\u4fee\u6539 \u201ccalico.yaml\u201d \u6587\u4ef6\u4e2d\u7684 \u201cCALICO_IPV4POOL_CIDR\u201d \u53c2\u6570\uff0c\u9700\u8981\u4e0e\u524d\u9762 \u201ckubeadm init\u201d \u547d\u4ee4\u4e2d\u7684 \u201c\u2013pod-network-cidr\u201d \u53c2\u6570\u4e00\u6837\uff0810.244.0.0/16\uff09,\u4fee\u6539\u4f4d\u7f6e\u5982\u4e0b\u6240\u793a Bash<pre><code># \u4fee\u6539\u6587\u4ef6\u65f6\u6ce8\u610f\u683c\u5f0f\u5bf9\u9f50\n4598 # The default IPv4 pool to create on startup if none exists. Pod IPs will be\n4599 # chosen from this range. Changing this value after installation will have\n4600 # no effect. This should fall within `--cluster-cidr`.\n4601 - name: CALICO_IPV4POOL_CIDR\n4602   value: \"10.244.0.0/16\"\n4603 # Disable file logging so `kubectl logs` works.\n4604 - name: CALICO_DISABLE_FILE_LOGGING\n4605   value: \"true\"\n</code></pre> \u6700\u540e\uff0c\u4f7f\u7528 \u201ckubectl apply\u201d \u547d\u4ee4\u5c06 Calico \u63d2\u4ef6\u90e8\u7f72\u5230\u96c6\u7fa4\u91cc\uff0c\u90e8\u7f72 YAML \u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a Bash<pre><code>kubectl apply -f calico.yaml\n</code></pre> Calico \u90e8\u7f72\u4f1a\u6bd4\u8f83\u6162\uff0c\u5927\u6982\u7b49\u4e2a\u51e0\u5206\u949f\uff0c\u7b49\u5f85 Calico \u90e8\u7f72\u5b8c\u6210\u540e\uff0c\u518d\u6b21\u901a\u8fc7\u547d\u4ee4 \u201ckubectl get node\u201d \u67e5\u770b\u8282\u70b9\u72b6\u6001\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u6240\u6709\u8282\u70b9\u5df2\u7ecf\u51c6\u5907\u5c31\u7eea\uff0c\u606d\u559c\u4f60\uff01\u6b64\u65f6\u96c6\u7fa4\u6b63\u5f0f\u642d\u5efa\u6210\u529f\u3002 Bash<pre><code>[root@k8s-master ~]# kubectl get node\nNAME           STATUS   ROLES           AGE   VERSION\nk8s-master     Ready    control-plane   12h   v1.28.0\nk8s-worker1    Ready    &lt;none&gt;          12h   v1.28.0\nk8s-worker2    Ready    &lt;none&gt;          10h   v1.28.0\n</code></pre> PS: \u79bb\u7ebf\u5b89\u88c5\u65b9\u5f0f\uff08\u5728\u7ebf\u5b89\u88c5\u5931\u8d25\u65f6\u4f7f\u7528\u6b64\u65b9\u6cd5\uff09 Bash<pre><code># \u5047\u5b9a\u4e0b\u8f7d\u7684\u6587\u4ef6\u540d\u4e3a\uff1a\u201ccalico-image-3.25.1.zip\u201d\uff0c \u89e3\u538b\u540e\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u6267\u884c\u5bfc\u5165\u547d\u4ee4\u3002\nls *.tar |xargs -i docker load -i {}\n\n# \u201ccalico-yaml.zip\u201d \u4e2d\u662f\u90e8\u7f72\u6587\u4ef6\uff0c\u5728 Master \u8282\u70b9\u4e0a\u4f9d\u6b21\u90e8\u7f72\u4e24\u4e2a YAML \u6587\u4ef6\u3002\n# \u5148\u5220\u9664\u4e4b\u524d\u90e8\u7f72\u4e0d\u6210\u529f\u7684 Calico\nkubectl delete -f calico.yaml\n\n# \u4f9d\u6b21\u90e8\u7f72\u4e24\u4e2a yaml \u6587\u4ef6\nkubectl apply -f tigera-operator.yaml --server-sidekubectl apply -f custom-resources.yaml\n\n# \u7136\u540e\u7b49\u5f85\u90e8\u7f72\u5b8c\u6210\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u6240\u6709\u8282\u70b9\u51c6\u5907\u5c31\u7eea\u3002\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/","title":"k8s\u4e2dyaml\u6587\u4ef6\u7684\u7f16\u5199\u548c\u4f7f\u7528","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#yaml","title":"YAML\u57fa\u672c\u8bed\u6cd5","text":"<ul> <li>\u5927\u5c0f\u5199\u654f\u611f</li> <li>\u4f7f\u7528\u7f29\u8fdb\u8868\u793a\u5c42\u7ea7\u5173\u7cfb</li> <li>\u7f29\u8fdb\u65f6\u4e0d\u5141\u8bb8\u4f7f\u7528Tab\u952e\uff0c\u53ea\u5141\u8bb8\u4f7f\u7528\u7a7a\u683c\u3002</li> <li>\u7f29\u8fdb\u7684\u7a7a\u683c\u6570\u76ee\u4e0d\u91cd\u8981\uff0c\u53ea\u8981\u76f8\u540c\u5c42\u7ea7\u7684\u5143\u7d20\u5de6\u4fa7\u5bf9\u9f50\u5373\u53ef</li> <li><code>#</code> \u8868\u793a\u6ce8\u91ca\uff0c\u4ece\u8fd9\u4e2a\u5b57\u7b26\u4e00\u76f4\u5230\u884c\u5c3e\uff0c\u90fd\u4f1a\u88ab\u89e3\u6790\u5668\u5ffd\u7565\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#maps","title":"Maps","text":"<ul> <li>Map \u662f\u5b57\u5178\uff0c\u5c31\u662f\u4e00\u4e2a<code>key:value</code>\u7684\u952e\u503c\u5bf9\uff0c\u4f8b\u5982\uff1a</li> </ul> <p>YAML<pre><code>---\napiVersion: v1\nkind: Pod\n\n#######PS##########\n# \u7b2c\u4e00\u884c\u7684`---`\u662f\u5206\u9694\u7b26\uff0c\u662f\u53ef\u9009\u7684\uff0c\u5728\u5355\u4e00\u6587\u4ef6\u4e2d\uff0c\u53ef\u7528\u8fde\u7eed\u4e09\u4e2a\u8fde\u5b57\u53f7`---`\u533a\u5206\u591a\u4e2a\u6587\u4ef6\n# \u8f6c\u4e3aJSON\u5219\u4e3a\uff1a\n{\n    \"apiVersion\": \"v1\",\n    \"kind\": \"pod\"\n}\n#######PS##########\n</code></pre> \u6211\u4eec\u5728\u521b\u5efa\u4e00\u4e2a\u76f8\u5bf9\u590d\u6742\u4e00\u70b9\u7684 YAML \u6587\u4ef6\uff0c\u521b\u5efa\u4e00\u4e2a KEY \u5bf9\u5e94\u7684\u503c\u4e0d\u662f\u5b57\u7b26\u4e32\u800c\u662f\u4e00\u4e2a Maps\uff1a Text Only<pre><code>---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: kube100-site\n  labels:\n    app: web\n</code></pre> - \u7528\u4e86\u4e24\u4e2a\u7a7a\u683c\u4f5c\u4e3a\u7f29\u8fdb\uff0c\u7a7a\u683c\u7684\u6570\u91cf\u5e76\u4e0d\u91cd\u8981\uff0c\u4f46\u662f\u5f97\u4fdd\u6301\u4e00\u81f4\uff0c\u5e76\u4e14\u81f3\u5c11\u8981\u6c42\u4e00\u4e2a\u7a7a\u683c**\uff08\u4ec0\u4e48\u610f\u601d\uff1f\u5c31\u662f\u4f60\u522b\u4e00\u4f1a\u7f29\u8fdb\u4e24\u4e2a\u7a7a\u683c\uff0c\u4e00\u4f1a\u7f29\u8fdb4\u4e2a\u7a7a\u683c\uff09\u3002 - \u5728 YAML \u6587\u4ef6\u4e2d\u7edd\u5bf9\u4e0d\u8981\u4f7f\u7528 tab \u952e\u3002</p> <p>\u540c\u6837\u7684\u5c06\u4e0a\u9762\u7684 YAML \u6587\u4ef6\u8f6c\u6362\u6210 JSON \u6587\u4ef6\uff1a JSON<pre><code>{\n  \"apiVersion\": \"v1\",\n  \"kind\": \"Pod\",\n  \"metadata\": {\n    \"name\": \"kube100-site\",\n    \"labels\": {\n      \"app\": \"web\"\n    }\n  }\n}\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#lists","title":"Lists","text":"<p>Lists \u5c31\u662f\u5217\u8868\uff0c\u8bf4\u767d\u4e86\u5c31\u662f\u6570\u7ec4\uff0c\u5728 YAML \u6587\u4ef6\u4e2d\u53ef\u4ee5\u8fd9\u6837\u5b9a\u4e49\uff1a YAML<pre><code>args\n  - Cat\n  - Dog\n  - Fish\n</code></pre> - \u53ef\u4ee5\u6709\u4efb\u4f55\u6570\u91cf\u7684\u9879\u5728\u5217\u8868\u4e2d\uff0c\u6bcf\u4e2a\u9879\u7684\u5b9a\u4e49\u4ee5\u7834\u6298\u53f7\uff08-\uff09\u5f00\u5934\u7684\uff0c\u4e0e\u7236\u5143\u7d20\u76f4\u63a5\u53ef\u4ee5\u7f29\u8fdb\u4e00\u4e2a\u7a7a\u683c\u3002\u5bf9\u5e94\u7684 JSON \u683c\u5f0f\u5982\u4e0b\uff1a</p> JSON<pre><code>{\n    \"args\": [\"Cat\", \"Dog\", \"Fish\"]\n}\n</code></pre> <p>list \u7684\u5b50\u9879\u4e5f\u53ef\u4ee5\u662f Maps\uff0cMaps \u7684\u5b50\u9879\u4e5f\u53ef\u4ee5\u662flist\u5982\u4e0b\u6240\u793a\uff1a</p> <p>YAML<pre><code>---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: kube100-site\n  labels:\n    app: web\nspec:\n  containers:\n    - name: front-end\n      image: nginx\n      ports:\n        - containerPort: 80\n    - name: flaskapp-demo\n      image: jcdemo/flaskapp\n      ports:\n        - containerPort: 5000\n</code></pre> \u6211\u4eec\u53ef\u4ee5\u8f6c\u6210\u5982\u4e0b JSON \u683c\u5f0f\u6587\u4ef6\uff1a JSON<pre><code>{\n    \"apiVersion\": \"v1\",\n    \"kind\": \"Pod\",\n    \"metadata\": {\n        \"name\": \"kube100-site\",\n        \"labels\": {\n            \"app\": \"web\"\n        }\n    },\n    \"spec\": {\n        \"containers\": [{\n            \"name\": \"front-end\",\n            \"image\": \"nginx\",\n            \"ports\": [{\n                \"containerPort\": 80\n            }]\n        }, {\n            \"name\": \"flaskapp-demo\",\n            \"image\": \"jcdemo/flaskapp\",\n            \"ports\": [{\n                \"containerPort\": 5000\n            }]\n        }]\n    }\n}\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_1","title":"\u5b57\u9762\u91cf\u4e0e\u6298\u53e0\u6837\u5f0f","text":"<p>\u5bf9\u4e8e\u8f83\u957f\u7684\u5b57\u7b26\u4e32\u6216\u8005\u5217\u8868\uff0cYAML\u63d0\u4f9b\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u8868\u793a\u65b9\u5f0f\uff1a\u5b57\u9762\u91cf\u6837\u5f0f(literal style)\u548c\u6298\u53e0\u6837\u5f0f(folded style)\u3002</p> <ul> <li>\u5b57\u9762\u91cf\u6837\u5f0f (\u4f7f\u7528 <code>|</code> \u7b26\u53f7):</li> </ul> YAML<pre><code>description: |\n  This is a long description that spans multiple lines.\n  It can include indents and newlines which will be preserved.\n</code></pre> <ul> <li>\u6298\u53e0\u6837\u5f0f (\u4f7f\u7528 <code>&gt;</code> \u7b26\u53f7):</li> </ul> YAML<pre><code>description: &gt;\n  This is a long description that spans multiple lines.\n  It can include indents and newlines which will be folded into a single line.\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_2","title":"\u951a\u70b9\u4e0e\u522b\u540d","text":"<p>\u951a\u70b9(anchor)\u548c\u522b\u540d(alias)\u53ef\u4ee5\u5e2e\u52a9\u907f\u514d\u91cd\u590d\u7684\u6570\u636e\u3002</p> <ul> <li>\u951a\u70b9 (\u4f7f\u7528 <code>&amp;name</code> \u5b9a\u4e49):</li> </ul> YAML<pre><code>&amp;baseImage\nimage: nginx\ntag: 1.19.2\n</code></pre> <ul> <li>\u522b\u540d (\u4f7f\u7528 <code>*name</code> \u5f15\u7528):</li> </ul> YAML<pre><code>containers:\n  - name: nginx-container\n    &lt;&lt;: *baseImage\n  - name: another-container\n    &lt;&lt;: *baseImage\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_3","title":"\u73af\u5883\u53d8\u91cf","text":"<p>\u5728YAML\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u6765\u52a8\u6001\u586b\u5145\u67d0\u4e9b\u5b57\u6bb5\u3002\u8fd9\u5bf9\u4e8e\u9700\u8981\u5728\u90e8\u7f72\u65f6\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u53d8\u5316\u7684\u503c\u975e\u5e38\u6709\u7528\u3002</p> YAML<pre><code>image: ${MY_REGISTRY}/nginx:${NGINX_VERSION}\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_4","title":"\u6761\u4ef6\u8868\u8fbe\u5f0f","text":"<p>\u867d\u7136YAML\u672c\u8eab\u4e0d\u652f\u6301\u6761\u4ef6\u903b\u8f91\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u6a21\u677f\u5f15\u64ce\uff08\u5982Jinja2\uff09\u7ed3\u5408YAML\u6765\u5b9e\u73b0\u590d\u6742\u7684\u6761\u4ef6\u903b\u8f91\u3002</p>","tags":["K8S"]},{"location":"thinking/","title":"Thinking","text":"<p>Info</p> <p>\u8fd9\u91cc\u662f\u4e2a\u4eba\u7684\u968f\u601d\u3001\u968f\u60f3\u3001\u53ca\u611f\u609f\uff0c\u5199\u70b9\u6280\u672f\u4e4b\u5916\u7684\u4e1c\u897f...</p>"},{"location":"thinking/posts/01_smart_to_do_things/","title":"\u5982\u4f55\u660e\u660e\u767d\u767d\u7684\u505a\u4e8b","text":"","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_2","title":"\u505a\u4e8b\u7684\u6838\u5fc3\u4e09\u8981\u7d20","text":"<ol> <li>\u7406\u6e05\u695a</li> <li>\u8bb2\u660e\u767d</li> <li>\u505a\u5230\u4f4d</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_3","title":"\u5982\u4f55\u7406\u6e05\u695a\u95ee\u9898","text":"<ol> <li>\u6700\u539f\u59cb\u7684\u9700\u6c42/\u95ee\u9898\u662f\u4ec0\u4e48\uff1f</li> <li>\u4e3a\u4ec0\u4e48\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f\u4e0d\u89e3\u51b3\u4f1a\u6709\u4ec0\u4e48\u5f71\u54cd\uff0c\u4e0d\u505a\u6548\u7387\u6700\u9ad8</li> <li>\u95ee\u9898\u53d1\u751f\u7684\u6839\u672c\u539f\u56e0\u662f\u4ec0\u4e48\uff1f</li> <li>\u8fd9\u4e2a\u5b9a\u4e49\u5bf9\u4e8e\u5176\u4ed6\u4eba\u80fd\u5426\u542c\u7684\u61c2\uff1f</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_4","title":"\u5e38\u7528\u62c6\u89e3\u95ee\u9898\u7684\u601d\u7ef4\u6a21\u578b","text":"<ul> <li>MECE\u5206\u89e3\u6cd5\uff1a</li> <li>\u76f8\u5bf9\u72ec\u7acb\uff0c\u5b8c\u5168\u7a77\u5c3d\u7684\u5206\u89e3\u51fa\u6700\u5c0f\u7684\u95ee\u9898 \u2014&gt; \u5206\u7c7b</li> <li>\u5f52\u56e0\u56de\u6eaf\u6cd5\uff1a</li> <li>\u901a\u8fc7\u4e0d\u540c\u5730\u53cd\u63a8\u8ffd\u95ee\uff0c\u4ece\u800c\u627e\u5230\u6df1\u5c42\u7684\u539f\u56e0 \u2014&gt; \u5047\u8bbe</li> <li>5W2H\uff1a</li> <li>What\u3001Who\u3001Where\u3001When\u3001Why\u3001How\u3001How Much \u2014&gt; \u89d2\u5ea6</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#mece","title":"MECE\u5206\u89e3\u6cd5","text":"<p>Mutually Exclusive\u5404\u90e8\u5206\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0cCollectively Exhaustive\u6240\u6709\u90e8\u5206\u5b8c\u5168\u7a77\u5c3d\u3002\u7528\u4e8e\u5c06\u4e00\u4e2a\u5927\u95ee\u9898\u62c6\u5206\u6210\u82e5\u5e72\u4e2a\u4e92\u76f8\u6392\u65a5\u4e14\u96c6\u5408\u5b8c\u5907\u7684\u5c0f\u95ee\u9898\uff0c\u8ba9\u4f60\u5f88\u6e05\u6670\u7b80\u5355\u7684\u89e3\u51b3\u3002</p> <ul> <li>\u4e8c\u5206\u6cd5\uff1a\u627e\u4e00\u4e2a\u7ef4\u5ea6\uff0c\u5206\u62102\u4e2a\u90e8\u5206\uff0c\u5982\u4e2d\u56fd/\u5916\u56fd</li> <li>\u8fc7\u7a0b\u6cd5\uff1a\u4e8b\u60c5\u53d1\u5c55\u7684\u65f6\u95f4\u987a\u5e8f\uff0c\u6d41\u7a0b\uff0c\u7a0b\u5e8f\uff0c\u5982SOP</li> <li>\u8981\u7d20\u6cd5\uff1a\u6839\u636e\u4e8b\u7269\u91cd\u8981\u7684\u51e0\u4e2a\u8981\u7d20\u8fdb\u884c\u5212\u5206\uff0c\u5982\u5938\u4eba</li> <li>\u516c\u5f0f\u6cd5\uff1a\u7b80\u5355\u6570\u5b66\u516c\u5f0f\uff0c\u5982 \u8017\u65f6=\u524d\u7aef+\u4f20\u8f93+\u63a5\u53e3</li> <li>\u77e9\u9635\u6cd5\uff1a\u5c06\u4e00\u4e2a\u4e8b\u7269\u62c6\u5206\u6210\u4e24\u7ef4\u5ea6\u53d8\u62104\u4e2a\u8c61\u9650\uff0c\u5982\u91cd\u8981\u7d27\u6025</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_5","title":"\u5f52\u56e0\u56de\u6eaf\u6cd5","text":"<p>\u4e00\u79cd\u901a\u8fc7 \u9010\u6b65\u6392\u67e5\u548c\u5206\u6790\u591a\u4e2a\u53ef\u80fd \u7684\u539f\u56e0\uff0c\u6765\u5bfb\u627e\u4e8b\u4ef6\u771f\u6b63\u7684\u539f\u56e0\u7684\u65b9\u6cd5\uff0c\u4ece\u4e8b\u4ef6\u53d1\u751f\u540e\u7684\u7ed3\u679c\u5165\u624b\uff0c\u9006\u5e8f\u63a8\u65ad\uff0c\u6700\u7ec8\u627e\u5230\u771f\u6b63\u7684\u539f\u56e0\u3002 eg: \u4e00\u4e2a\u89c6\u9891\u5ba2\u6237\u7aef\uff0c\u64ad\u653e\u7a33\u5b9a\u6027\u6570\u636e\u7a81\u7136\u53d1\u751f\u4e8630%\u7684\u4e0b\u964d\uff0c\u5982\u4f55\u7528\u627e\u5230\u95ee\u9898</p> <ul> <li>\u662f\u4e0d\u662f\u7cfb\u7edf\u7684\u539f\u56e0-&gt;\u662f\u4e0d\u662f\u7f51\u7edc\u7684\u95ee\u9898-&gt;\u662f\u4e0d\u662f\u624b\u673a\u54c1\u724c\u7684\u539f\u56e0-&gt;\u662f\u4e0d\u662fApp\u7248\u672c\u95ee\u9898</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#5w2h","title":"5W2H\u6cd5","text":"<ul> <li>What\u3001Who\u3001Where\u3001When\u3001Why\u3001How\u3001How Much</li> <li>\u5728 \u8ba1\u5212\u505a\u4e00\u6b3e\u4ea7\u54c1 \u7684\u65f6\u5019\uff0c\u7528\u8fd9\u4e2a\u65b9\u6cd5\u6765\u660e\u786e\u9700\u6c42\u75db\u70b9</li> <li>\u7528\u4e8e\u81ea\u95ee\u81ea\u7b54\u7684\u65b9\u5f0f\u6765 \u53d1\u89c9\u95ee\u9898\u6df1\u5c42\u6b21\u7684\u539f\u56e0</li> </ul> <p>*eg: *\u8fd9\u662f\u4ec0\u4e48\u4ea7\u54c1-&gt;\u4ec0\u4e48\u65f6\u5019\u4e0a\u7ebf-&gt;\u5728\u4ec0\u4e48\u5730\u65b9\u4f7f\u7528-&gt;\u4e3a\u4ec0\u4e48\u9700\u8981\u505a\u5b83-&gt;\u4e3b\u8981\u7528\u6237\u662f\u8c01-&gt;\u600e\u4e48\u6765\u5b9e\u73b0-&gt;\u9700\u8981\u82b1\u8d39\u5565</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_6","title":"\u5982\u4f55\u5224\u65ad\u95ee\u9898\u7406\u6e05\u695a\u4e86","text":"<ul> <li>\u8fd8\u6709\u6ca1\u6709\u61f5\u903c\u7684\u5730\u65b9\u5417\uff1f</li> <li>\u8fd8\u6709\u6ca1\u6709\u6ca1\u6709\u8003\u8651\u5230\u5230\u7684\u70b9\uff1f</li> <li>\u4f60\u5df2\u7ecf\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\u56f0\u607c\u4e86</li> <li>\u65e0\u8bba\u522b\u4e2a\u600e\u4e48argue\uff0c\u6211\u57fa\u672c\u4e0a\u53ef\u4ee5\u7b54\u5f97\u4e0a\u6765</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_7","title":"\u5982\u4f55\u8bb2\u660e\u767d\u95ee\u9898","text":"<p>\u5982\u4f55\u8ba9\u5176\u4ed6\u4eba\u4e5f\u5f88\u6e05\u695a\u8fd9\u4e2a\u4e8b\u60c5</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_8","title":"\u5982\u4f55\u5199\u4e00\u4e2a\u5f88\u660e\u767d\u7684\u6587\u6863","text":"<p>\u5224\u65ad\u5982\u4f55\u5199\u660e\u767d\u4e86\uff1a\u522b\u4eba\u770b\u7740\u4f60\u7684\u6587\u6863\uff0c\u4e5f\u5c31\u53ef\u4ee5\u5f00\u59cb\u5199\u4ee3\u7801\u4e86</p> <ol> <li>\u7ec4\u7ec7\u7ed3\u6784\u6709\u903b\u8f91\u611f\uff0c\u6807\u9898\u548c\u526f\u6807\u9898\u3001\u6bb5\u843d\u5206\u7ec4\uff0c\u8111\u56fe\u5148\u884c</li> <li>\u7b80\u5355\u63a5\u5730\u6c14\u7684\u8868\u8fbe\uff0c\u6e05\u6670\u6613\u7406\u89e3\u7684\u63cf\u8ff0\uff0c\u770b\u5f97\u61c2\uff0c\u8bb2\u903b\u8f91</li> <li>\u5f88\u6070\u5f53\u7684\u4f8b\u5b50\uff0c\u5b9e\u9645\u6216\u8005\u6a21\u62df\u7684\u6848\u4f8b\u3001Demo\u7684\u6848\u4f8b\u3001\u6d41\u7a0b\u56fe</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#rfc","title":"\u53ef\u4ee5\u53bb\u67e5\u4e00\u4e0bRFC","text":"<p>Request for Comments\uff0c\u4e00\u79cd\u6307\u5bfc\u5236\u5b9a\u4e92\u8054\u7f51\u6807\u51c6\u7684\u6587\u6863\u683c\u5f0f </p> <ol> <li>\u660e\u786e\u662f\u8c01\u6765\u8bfb\uff0c\u6587\u7ae0\u76ee\u7684\uff0c\u5e76\u786e\u5b9a\u5176\u9002\u7528\u7684\u8303\u56f4</li> <li>\u63cf\u8ff0\u95ee\u9898\u7684\u80cc\u666f\u548c\u76f8\u5173\u7684\u5df2\u6709\u89e3\u51b3\u65b9\u6848</li> <li>\u5bf9\u89e3\u51b3\u65b9\u6848\u8be6\u7ec6\u9610\u8ff0\uff0c\u6709\u6e05\u6670\u7684\u903b\u8f91\u63a8\u7406\u548c\u53ef\u5b9e\u73b0\u7684\u7ec6\u8282</li> <li>\u672a\u89e3\u51b3\u7684\u95ee\u9898\u4ee5\u53ca\u672a\u6765\u53ef\u80fd\u6027\u7684\u8bf4\u660e</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_9","title":"\u5199\u6587\u6863\u7684\u53cd\u4f8b\u601d\u8003","text":"<ul> <li>\u4e3a\u4e86\u4e07\u65e0\u4e00\u5931\uff0c\u662f\u5426\u9700\u8981\u5bf9\u4e0d\u540c\u7684\u4eba\u5199\u4e0d\u540c\u7684\u6587\u6863\uff1f</li> <li>\u662f\u5426\u4e3a\u4e86\u663e\u793a\u6211\u7684\u725b\u903c\uff0c\u5c06\u7b80\u5355\u903b\u8f91\u5199\u5f97\u5f88\u590d\u6742\uff1f</li> <li>\u4e3a\u4e86\u663e\u793a\u6211\u5f88\u6709\u201c\u5473\u9053\u201d\uff0c\u51fa\u73b0\u5927\u91cf\u8d4b\u80fd\u3001\u6293\u624b\u3001\u9ebb\u5c06\u5927\u56fe</li> <li>\u7531\u4e8eTL\u50ac\u6211\u4ea4\u4f5c\u4e1a\uff0c\u60f3\u4e0d\u51fa\u6765\u53ea\u80fd\u7f16\uff0c\u5176\u5b9e\u6211\u81ea\u5df1\u90fd\u89c9\u5f97\u4e0d\u9760\u8c31</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#-star","title":"\u8bb2\u660e\u767d\u4e8b\u60c5\u5e38\u7528\u6a21\u578b- STAR","text":"<ul> <li>Situation\uff1a\u9047\u5230\u7684\u5177\u4f53\u60c5\u666f</li> <li>Task\uff1a\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\u6216\u4efb\u52a1</li> <li>Action\uff1a\u91c7\u53d6\u7684\u884c\u52a8\u548c\u5b9e\u65bd\u7684\u8fc7\u7a0b</li> <li>Result\uff1a\u91c7\u53d6\u884c\u52a8\u7684\u7ed3\u679c</li> </ul> <p>*eg: *\u6211\u4eec\u6253\u7b97\u5982\u4f55\u89e3\u51b3XXX\u7684\u6027\u80fd\u4f53\u9a8c\u95ee\u9898\uff1f</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_10","title":"\u6211\u8bb2\u4e8b\u60c5\u7684\u65f6\u5019\u5f88\u5bb9\u6613\u7d27\u5f20\uff1f","text":"<ol> <li>\u9996\u5148\u660e\u786e\u4efb\u4f55\u4eba\u8bb2\u4e1c\u897f\u90fd\u4f1a\u7d27\u5f20\uff0c\u53ea\u4e0d\u8fc7\u4ed6\u719f\u7ec3\u4e86\u800c\u5df2</li> <li>\u4f60\u611f\u89c9\u5230\u7684\u666e\u901a\u7d27\u5f20\uff0c\u5176\u5b9e\u522b\u4eba\u770b\u4e0d\u51fa\u6765</li> <li>\u5047\u5982\u4f60\u51c6\u5907\u597d\u4e86\uff0c\u4f60\u4f1a\u5f88\u81ea\u4fe1\uff0c\u8ba9\u4f60\u6ca1\u6709\u90a3\u4e48\u7d27\u5f20 <p>eg: \u5982\u4f55\u8ba9\u5408\u4f5c\u65b9\u4e70\u8d26- SCQA - Situation\uff1a\u7531\u5927\u5bb6\u90fd\u719f\u6089\u7684\u60c5\u666f\u4e8b\u5b9e\u5f15\u5165 - Complication\uff1a\u5b9e\u9645\u60c5\u51b5\u5f80\u5f80\u548c\u6211\u4eec\u7684\u8981\u6c42\u6709\u51b2\u7a81 - Question\uff1a\u51fa\u73b0\u95ee\u9898\u600e\u4e48\u529e - Answer\uff1a\u56de\u7b54\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u662f\u4ec0\u4e48</p> <p>\u4e00\u53e5\u4f60\u53ef\u80fd\u8bb0\u5f97\u4f4f\u4e00\u8f88\u5b50\u7684\u5e7f\u544a\u8bed\uff0c\u201c\u5f97\u4e86\u7070\u6307\u7532\uff0c\u4e00\u4e2a\u4f20\u67d3\u4fe9\uff0c\u95ee\u6211\u600e\u4e48\u529e\uff0c\u9a6c\u4e0a\u7528\u4eae\u7532\u201d</p> </li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_11","title":"\u6ca1\u6709\u8bb2\u660e\u767d\u7684\u60c5\u51b5","text":"<ul> <li>\u542c\u7684\u4eba\u81ea\u5df1\u5728\u505a\u81ea\u5df1\u7684\u4e8b\u60c5\uff0c\u751a\u81f3\u6709\u4e00\u70b9\u60f3\u7761\u89c9</li> <li>\u542c\u7684\u4eba\u6ca1\u6709\u4efb\u4f55\u548c\u4f60\u8ba8\u8bba\u7684\u70b9\uff0c\u4e00\u95ee\u5c31\u662f\u597d\u597d\u597d</li> <li>\u542c\u7684\u4eba\u4e00\u8111\u888b\u7684\u95ee\u53f7\uff1f\uff1f\u4e0d\u65adargue</li> <li>\"\u6211\"\u9ad8\u5ea6\u592a\u9ad8\u4e86\uff0c\u4f60\u4eec\u542c\u4e0d\u61c2\u662f\u4f60\u4eec\u80fd\u529b\u4e0d\u591f</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_12","title":"\u5982\u4f55\u53bb\u660e\u767d\u7684\u505a","text":"<p>Last but not least</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_13","title":"\u5982\u4f55\u8bc1\u660e\u81ea\u5df1\u505a\u597d\u4e86\u5462\uff1f","text":"<ul> <li>\u5236\u5b9a\u9a8c\u6536\u6807\u51c6\uff0c\u5b8c\u6210\u540e\u8fdb\u884c\u9a8c\u8bc1</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/02_tech_yiyan/","title":"\u6280\u672f\u4e00\u8a00","text":"<ul> <li> <p>\u9700\u6c42\uff0c\u4f1a\u6539\u53d8\u4eba\u770b\u5f85\u4e16\u754c\u7684\u65b9\u5f0f\u3002</p> </li> <li> <p>\u6280\u672f\u662f\u5de5\u7a0b\uff0c\u800c\u5de5\u7a0b\u662f\u65f6\u95f4\u3001\u8d44\u6e90\u3001\u4eba\u529b\u7b49\u7eb7\u7e41\u590d\u6742\u4e8b\u60c5\u7684\u6298\u8877\u3002</p> </li> <li> <p>\u4e00\u95e8\u5de5\u7a0b\u6700\u9700\u8981\u7684\u662fhands on dirty work(\u52a8\u624b\u505a\u810f\u6d3b)\uff0c\u624d\u80fd\u8ba9\u81ea\u5df1\u7684\u80fd\u529b\u5f97\u5230\u672c\u8d28\u7684\u63d0\u5347\u3002</p> </li> <li> <p>\u8fdb\u9636\u7684\u4ee3\u7801\u8bbe\u8ba1\u662f\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u8ba9\u4ee3\u7801\u66f4\u80fd\u6709\u6548\u7684\u5b9e\u73b0\u3002\u7ec8\u6781\u7684\u4ee3\u7801\u8bbe\u8ba1\u662f\u54f2\u5b66\uff0c\u662f\u4ee3\u7801\u4e2d\u8868\u8fbe\u51fa\u6765\u7684\u4ef7\u503c\u89c2\u3002</p> </li> <li> <p>\u8981\u5b66\u4e60\u4e00\u95e8\u8bed\u8a00\uff0c\u6700\u7ec8\u76ee\u7684\u5c31\u662f\u5b66\u4f1a\u7528\u8fd9\u95e8\u7f16\u7a0b\u8bed\u8a00\u7684\u601d\u7ef4\u53bb\u5199\u8fd9\u95e8\u8bed\u8a00\u7684\u4ee3\u7801\uff0cgo coding in go way, \u800c\u4e0d\u662f\uff0cgo coding in c way, or java way.</p> </li> <li> <p>\u5b66\u4e60\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u5176\u5b9e\u5c31\u662f\u8981\u5b66\u4e60\u8bed\u8a00\u63d0\u4f9b\u7684\u7f16\u7a0b\u6a21\u578b\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u7f16\u7a0b\u6a21\u578b\u4f1a\u5e26\u7ed9\u4f60\u4e0d\u540c\u7684\u601d\u7ef4\u65b9\u5f0f\u3002</p> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/","title":"\u5982\u4f55\u9ad8\u6548\u5b66\u4e60\u5f00\u6e90\u9879\u76ee","text":"","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_1","title":"\u5b66\u4e60\u539f\u5219\uff1a","text":"<ul> <li>\u9605\u8bfb\u5b98\u65b9\u539f\u7248\u6587\u6863\uff0c\u800c\u4e0d\u662f\u9605\u8bfb\u7ecf\u8fc7\u7ffb\u8bd1\u6216\u8005\u8fc7\u6ee4\u7684\u6587\u6863</li> <li>\u5982\u679c\u53d7\u9650\u4e8e\u82f1\u8bed\u9605\u8bfb\u80fd\u529b\uff0c\u9000\u800c\u6c42\u5176\u6b21\u7684\u65b9\u6cd5\u662f\uff0c\u5148\u9605\u8bfb\u7ffb\u8bd1\u540e\u7684\u6587\u6863\uff0c\u518d\u9605\u8bfb\u539f\u7248\u6587\u6863\uff0c\u53ef\u4ee5\u7ea0\u6b63\u6216\u907f\u514d\u7ffb\u8bd1\u6587\u6863\u4e2d\u51fa\u73b0\u7684\u9519\u6f0f\u70b9\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_2","title":"\u5b66\u4e60\u5f00\u6e90\u9879\u76ee\u7684\u9ad8\u6548\u6d41\u7a0b\uff1a","text":"","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#1","title":"1\u3001\u901a\u8bfb\u5b98\u65b9\u6587\u6863\uff08\u539f\u7248\uff09\u4e86\u89e3\u5f00\u6e90\u9879\u76ee","text":"<ul> <li>\u76ee\u7684\uff1a\u4e86\u89e3\u8be5\u9879\u76ee\u7684\u6574\u4f53\u7ed3\u6784\uff0c\u529f\u80fd\u7279\u6027\u3001\u5173\u952e\u6280\u672f\u3001\u5b9e\u73b0\u539f\u7406\u548c\u76f8\u5173\u751f\u6001</li> <li>\u7ec6\u5206\u6d41\u7a0b\uff1a<ol> <li>\u9605\u8bfbQuick Start\u5185\u5bb9\uff0c\u642d\u5efa\u73af\u5883\uff0c\u5b9e\u64cd\u5185\u5bb9\u6848\u4f8b<ul> <li>\u521d\u6b65\u5bf9\u8be5\u9879\u76ee\u6709\u4e00\u4e2a\u611f\u6027\u8ba4\u8bc6\uff0c\u4fbf\u4e8e\u5728\u540e\u7eed\u6df1\u5165\u5b66\u4e60\u7684\u65f6\u5019\u8fd0\u884c\u4e00\u4e9b\u4f8b\u5b50</li> </ul> </li> <li>\u8be6\u7ec6\u7ea6\u5b9aIntroduction\uff08\u4e00\u822c\u662f\u9879\u76ee\u7684\u57fa\u672c\u4ecb\u7ecd\uff09<ul> <li>\u627e\u5230\u8be5\u9879\u76ee\u7528\u5230\u7684\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5\u548c\u540d\u8bcd\u7684\u4ecb\u7ecd\uff0c\u8fdb\u884c\u7406\u89e3\u548c\u52a0\u6df1\u5370\u8c61</li> </ul> </li> <li>\u9605\u8bfb\u5173\u4e8e\u8be5\u9879\u76ee\u4f7f\u7528\u573a\u666f\u548c\u529f\u80fd\u7279\u6027\u53ca\u76f8\u5173\u751f\u6001\u7cfb\u7edf\u4ecb\u7ecd\u7684\u76f8\u5173\u5185\u5bb9<ul> <li>\u6bd4\u5982kafka\u6587\u6863\u4e2d\u7684Use cases \u548c Ecosystem</li> </ul> </li> </ol> </li> <li>\u8bfb\u5b8c\u4ee5\u540e\u9700\u8981\u8fbe\u5230\u7684\u6548\u679c\uff1a<ol> <li>\u8fd9\u4e2a\u9879\u76ee\u662f\u5e72\u4ec0\u4e48\u7684\uff0c\u80fd\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\uff1f</li> <li>\u9002\u5408\u5728\u54ea\u4e9b\u573a\u666f\u4f7f\u7528</li> <li>\u6709\u54ea\u4e9b\u529f\u80fd\uff1f\u5982\u4f55\u4f7f\u7528\uff1f</li> </ol> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#2","title":"2\u3001\u8bfb\u80cc\u540e\u7684\u8bba\u6587\uff0c\u4e86\u89e3\u5176\u5b9e\u73b0\u539f\u7406","text":"<ul> <li>\u4e00\u822c\u4e00\u4e2a\u4f18\u79c0\u7684\u5f00\u6e90\u9879\u76ee\uff0c\u4e00\u822c\u90fd\u6765\u6e90\u4e8e\u67d0\u4e2a\u77e5\u540d\u8bba\u6587\uff0c\u7136\u540e\u88ab\u5927\u725b\u5b9e\u73b0\u51fa\u6765\u3002</li> <li>\u5982\u679c\u5b9e\u5728\u4e0d\u77e5\u9053\u8fd9\u4e2a\u9879\u76ee\u80cc\u540e\u7684\u8bba\u6587\u662f\u5565\uff0c\u6280\u672f\u8df3\u8fc7</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#3","title":"3\u3001\u5e26\u7740\u95ee\u9898\u9605\u8bfb\u6e90\u7801","text":"<ul> <li>\u4e00\u822c\u6587\u6863\u662f\u6811\u72b6\u7ed3\u6784\uff0c\u800c\u9879\u76ee\u6e90\u7801\u662f\u7f51\u72b6\u7ed3\u6784\uff0c</li> <li>\u6700\u4f73\u5b9e\u8df5\u662f\u5e26\u7740\u95ee\u9898\u548c\u7b54\u6848\u53bb\u8bfb\u6e90\u7801\uff0c\u800c\u4e0d\u662f\u4ecemain\u65b9\u6cd5\u8fd8\u662f\u6cdb\u6cdb\u7684\u53bb\u770b\uff0c<ul> <li>\u6bd4\u5982\uff1aEtcd\u662f\u5982\u4f55\u5b9e\u73b0\u670d\u52a1\u6ce8\u518c\u7684\uff1f</li> </ul> </li> <li>\u80fd\u591f\u8fbe\u6210\u7684\u6548\u679c\uff1a<ul> <li>\u4ee5\u95ee\u9898\u7684\u548c\u7b54\u6848\u7684\u65b9\u5f0f\u9605\u8bfb\u6e90\u7801\uff0c\u6bcf\u6b21\u901a\u5e38\u53ea\u4f1a\u82b1\u5f88\u77ed\u7684\u65f6\u95f4\uff0c\u9605\u8bfb\u5f88\u5c11\u90e8\u5206\u7684\u6e90\u7801\uff0c\u5c31\u80fd\u89e3\u51b3\u4e00\u4e2a\u95ee\u9898\uff0c\u5f97\u5230\u4e00\u4e9b\u6536\u83b7\u3002\u968f\u7740\u95ee\u9898\u89e3\u51b3\u6570\u91cf\u589e\u52a0\uff0c\u5c31\u4f1a\u6e10\u6e10\u5730\u5bf9\u9879\u76ee\u6e90\u7801\u8d8a\u6765\u8d8a\u4e86\u89e3\u3002</li> </ul> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_3","title":"\u5b9e\u8df5\u5e94\u7528","text":"","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_4","title":"\u5982\u4f55\u5728\u81ea\u5df1\u56e2\u961f\u7684\u9879\u76ee\u4e2d\u907f\u514d\u76f2\u76ee\u7684\u5f15\u5165\u5f00\u6e90\u9879\u76ee\uff1f","text":"<ol> <li>\u4e0d\u80fd\u4ec5\u4ec5\u77e5\u9053\u5982\u4f55\u4f7f\u7528\u8fd9\u4e2a\u5f00\u6e90\u9879\u76ee</li> <li>\u56e2\u961f\u4e2d\u5fc5\u987b\u81f3\u5c11\u4e00\u4e2a\u4eba\u719f\u6089\u8be5\u5f00\u6e90\u9879\u76ee\u7684\u5b98\u65b9\u6587\u6863\uff0c\u638c\u63e1\u5176\u5b9e\u73b0\u539f\u7406\u548c\u5f88\u591a\u7684\u7ec6\u8282</li> <li>\u5f00\u53d1\u8005\u53ea\u6709\u638c\u63e1\u4e86\u539f\u7406\uff0c\u5728\u7cfb\u7edf\u51fa\u95ee\u9898\u65f6\uff0c\u624d\u6709\u53ef\u80fd\u57fa\u4e8e\u5b83\u7684\u5b9e\u73b0\u539f\u7406\uff0c\u518d\u6839\u636e\u4e00\u4e9b\u73b0\u8c61\u6765\u6392\u67e5\u95ee\u9898\u7684\u539f\u56e0</li> <li>\u5728\u4ee5\u4e0a\u4e09\u70b9\u6709\u4e00\u4e2a\u4e0d\u6ee1\u8db3\uff0c\u90fd\u4e0d\u8981\u8f7b\u6613\u5728\u81ea\u5df1\u7684\u7cfb\u7edf\u4e2d\u5f15\u5165\u76f8\u5173\u5f00\u6e90\u9879\u76ee</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/","title":"\u63d0\u95ee\u7684\u667a\u6167","text":"","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_1","title":"\u6587\u7ae0\u94fe\u63a5","text":"<ul> <li>How To Ask Questions The Smart Way</li> <li>\u4f60\u4f1a\u95ee\u95ee\u95ee\u9898\u5417\uff1f</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_2","title":"\u6838\u5fc3\u89c2\u70b9","text":"","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_3","title":"\u63d0\u95ee\u524d","text":"<ul> <li>\u5728\u63d0\u51fa\u81ea\u5df1\u7684\u95ee\u9898\u4e4b\u524d\uff0c\u9996\u5148\u9700\u8981\u81ea\u5df1\u5148\u5c1d\u8bd5\u5bfb\u627e\u95ee\u9898\u7684\u7b54\u6848\uff0c\u6bd4\u5982\u901a\u8fc7\u641c\u7d22\u5f15\u64ce\u67e5\u770b\u662f\u5426\u6709\u5176\u4ed6\u4eba\u5df2\u7ecf\u9047\u5230\u8fc7\u4e86\u6216\u5df2\u89e3\u51b3\u8fc7\uff0c\u6bd4\u5982\u901a\u8fc7\u7ffb\u9605\u76f8\u5173\u4e66\u7c4d\u6765\u5b66\u4e60\u548c\u7406\u89e3\u5e76\u6392\u9664\u5bf9\u5e94\u95ee\u9898\u7b49\u3002</li> <li>\u5982\u679c\u6211\u4eec\u901a\u8fc7\u4e0a\u8ff0\u7684\u65b9\u5f0f\u5c06\u95ee\u9898\u89e3\u51b3\u6389\u7684\u8bdd\uff0c\u4e00\u65b9\u9762\u953b\u70bc\u7684\u81ea\u5df1\u5904\u7406\u95ee\u9898\u7684\u80fd\u529b\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\uff0c\u6bd5\u7adf\u63d0\u51fa\u95ee\u9898\u4e5f\u662f\u4e00\u4ef6\u975e\u5e38\u9ebb\u70e6\u7684\u4e8b\u60c5\u3002\u4e0d\u7136\u7684\u8bdd\uff0c\u6211\u4eec\u5373\u6d6a\u8d39\u4e86\u81ea\u5df1\u7684\u65f6\u95f4\uff0c\u4e5f\u6d6a\u8d39\u4e86\u4ed6\u4eba\u7684\u65f6\u95f4\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_4","title":"\u63d0\u95ee\u65f6","text":"<ul> <li>\u5728\u8bba\u575b\u3001\u7fa4\u7ec4\u548c\u9891\u9053\u91cc\u9762\u63d0\u95ee\u9898\u65f6\uff0c\u4e00\u5b9a\u4e0d\u8981\u4e00\u4e0a\u6765\u5c31\u95ee\u5728\u5417\uff1f\u6216\u8005\u6709\u6ca1\u6709\u54ea\u4f4d\u5927\u4f6c\u80fd\u5e2e\u5e2e\u6211\uff01\u4e4b\u7c7b\u7684\u8a00\u8bed\u3002\u6709\u4ec0\u4e48\u95ee\u9898\uff0c\u6211\u4eec\u76f4\u63a5\u8dd1\u51fa\u6765\u5373\u53ef\uff0c\u770b\u5230\u7684\u4eba\u6216\u8005\u61c2\u7684\u4eba\u81ea\u7136\u4f1a\u56de\u7b54\u6211\u4eec\u7684\u95ee\u9898\uff0c\u524d\u63d0\u662f\u5bf9\u6211\u4eec\u7684\u95ee\u9898\u611f\u5174\u8da3\u3002</li> <li>\u540c\u65f6\uff0c\u5728\u6211\u4eec\u63d0\u51fa\u95ee\u9898\u7684\u65f6\u5019\uff0c\u5199\u4e00\u4e0b\u81ea\u5df1\u662f\u5982\u4f55\u5bfb\u627e\u7b54\u6848\u7684(\u6311\u6709\u4ef7\u503c\u6216\u91cd\u70b9\u7684\u5730\u65b9\u8fdb\u884c\u9648\u8ff0)\uff0c\u8fd9\u6837\u4f1a\u8ba9\u4ed6\u4eba\u77e5\u9053\u6211\u4eec\u5e76\u4e0d\u662f\u4f38\u624b\u515a\uff0c\u5373\u4f7f\u5bf9\u65b9\u4e0d\u77e5\u9053\u7b54\u6848\u4e5f\u4f1a\u544a\u8bc9\u4f60\u4e0d\u77e5\u9053\uff0c\u800c\u975e\u4e00\u7b11\u800c\u8fc7\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_5","title":"\u63d0\u95ee\u4e2d","text":"<ul> <li>\u8981\u5b66\u4f1a\u5305\u88c5\u95ee\u9898\uff0c\u5c3d\u91cf\u4f7f\u7528\u8f83\u5c11\u7684\u8bed\u8a00\u6765\u5b8c\u6574\u63cf\u8ff0\u51fa\u81ea\u5df1\u7684\u95ee\u9898\uff0c\u5c3d\u91cf\u505a\u5230\u8a00\u7b80\u610f\u8d45\uff0c\u70b9\u660e\u4e3b\u65e8\u3002\u6bd4\u5982\uff0c\u8c01\u505a\u4ec0\u4e48\uff0c\u7ed3\u679c\u600e\u4e48\u6837\u3002</li> <li>\u5982\u679c\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u80fd\u591f\u590d\u73b0\u6211\u4eec\u95ee\u9898\u7684\u6700\u5c0f\u793a\u4f8b\u7684\u8bdd\uff0c\u5c31\u5e94\u8be5\u4f18\u5148\u63d0\u4f9b\u51fa\u6765\uff0c\u65b9\u4fbf\u5bf9\u65b9\u8c03\u8bd5\u6216\u8005\u6392\u9664\u95ee\u9898\uff0c\u8fd9\u6837\u53ef\u4ee5\u8282\u7ea6\u53cc\u65b9\u7684\u65f6\u95f4\u3002</li> <li>\u5982\u679c\u4e0d\u53ef\u4ee5\u590d\u73b0\u6216\u8005\u662f\u4e2a\u6781\u5c0f\u6982\u7387\u7684\u95ee\u9898\uff0c\u6211\u4eec\u770b\u662f\u5426\u53ef\u4ee5\u63d0\u4f9b\u5bf9\u5e94\u73af\u5883\u51fa\u53bb\uff0c\u8ba9\u5bf9\u65b9\u6392\u9664\u548c\u9a8c\u8bc1(\u524d\u63d0\u662f\u4e0d\u6d89\u53ca\u516c\u53f8\u548c\u4e2a\u4eba\u9690\u79c1\u7684\u60c5\u51b5\u4e0b)\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_6","title":"\u63d0\u95ee\u540e","text":"<ul> <li>\u5176\u5b9e\u5f88\u591a\u4eba\u90fd\u6ca1\u6709\u602a\u7656\uff0c\u4ec0\u4e48\u793c\u8c8c\u4ed6\u4eec\u4e00\u70b9\u90fd\u4e0d\u5728\u4e4e\uff0c\u6240\u4ee5\u4e0d\u7528\u975e\u5f97\u7528\u656c\u8bcd\uff0c\u4f1a\u8ba9\u4eba\u6d51\u8eab\u4e0d\u8212\u670d\u7684\u3002</li> <li>\u63d0\u51fa\u95ee\u9898\u4e4b\u540e\uff0c\u6211\u4eec\u5e94\u8be5\u53ca\u65f6\u56de\u7b54\u5bf9\u65b9\u63d0\u51fa\u7684\u95ee\u9898\u548c\u51fa\u95ee\u9898\u7684\u7ec6\u8282\uff0c\u4fdd\u6301\u6d3b\u8dc3\u5ea6\uff0c\u8fd9\u6837\u95ee\u9898\u624d\u80fd\u591f\u66f4\u5feb\u7684\u89e3\u51b3\u6389\u3002</li> <li>\u5982\u679c\u95ee\u9898\u7ecf\u8fc7\u6c9f\u901a\u6216\u8005\u8ba8\u8bba\u89e3\u51b3\u6389\u7684\u8bdd\uff0c\u6211\u4eec\u4e8b\u540e\u9700\u8981\u8fdb\u884c\u590d\u76d8\uff0c\u770b\u770b\u662f\u5426\u65e5\u540e\u53ef\u4ee5\u81ea\u884c\u89e3\u51b3\uff0c\u4ee5\u53ca\u5bf9\u5e94\u95ee\u9898\u7684\u6392\u67e5\u601d\u8def\u548c\u65b9\u6cd5\uff0c\u6bd5\u7adf\u6388\u4eba\u9c7c\u9c7c\u4e0d\u5982\u6388\u4eba\u4ee5\u6e14\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/05_personal_focus_and_abandon/","title":"\u4e2a\u4eba\u6218\u7565\u4e0a\u7684\u805a\u7126\u548c\u653e\u5f03","text":"<p>Info</p> <p>\u4fd7\u8bdd\u8bf4\uff1a\u6709\u820d\u624d\u6709\u5f97\uff01\uff01\uff01</p> <p>\u4f55\u4e3a\u6218\u7565\uff1f\u6218\u7565\u5176\u5b9e\u5c31\u662f\u51b3\u5b9a\u8be5\u505a\u4ec0\u4e48\uff0c\u4e0d\u8be5\u505a\u4ec0\u4e48\uff01\uff01\uff01</p> <p>\u6700\u8fd1\u4e00\u6bb5\u65f6\u95f4\u4ee5\u6765\uff0c\u8d8a\u53d1\u611f\u89c9\u81ea\u5df1\u5728\u5de5\u4f5c\u4e0a\u8d8a\u6765\u8d8a\u7d2f\uff0c\u4e0d\u7ecf\u610f\u95f4\uff0c\u60f3\u8d77\u6765\u4e86\u66fe\u7ecf\u8bfb\u8fc7\u7684\u4e00\u672c\u4e66\uff0c\u89c9\u5f97\u633a\u7b26\u5408\u5f53\u4e0b\u81ea\u5df1\u7684\u73b0\u72b6\u7684\uff0c\u4e66\u4e2d\u7684\u5185\u5bb9\u5927\u6982\u662f\u8fd9\u6837\u7684\uff1a</p> <ul> <li>\u5728\u5de5\u4f5c\u4e2d\uff0c\u5fc5\u987b\u8981\u610f\u8bc6\u5230\uff0c\u4e00\u4e2a\u4eba\u5f88\u96be\u5728\u591a\u4e2a\u6709\u6311\u6218\u7684\u4efb\u52a1\u4e0a\uff0c\u5168\u90e8\u5b9e\u73b0\u7a81\u7834\uff0c\u5982\u679c\u4e0d\u53bb\u533a\u5206\u5de5\u4f5c\u7684\u91cd\u70b9\uff0c\u5c31\u5f88\u6709\u53ef\u80fd\u5f15\u53d1\u79cd\u79cd\u8fde\u9501\u95ee\u9898\uff0c\u597d\u4e00\u70b9\u7684\u60c5\u51b5\u662f\uff0c\u628a\u4efb\u52a1\u90fd\u5b8c\u6210\u4e86\uff0c\u7d2f\u7684\u591f\u545b\uff0c\u4f46\u5168\u90e8\u90fd\u6ca1\u6709\u4eae\u70b9\u548c\u7a81\u7834\uff0c\u6d41\u4e8e\u5e73\u5eb8\uff1b\u574f\u4e00\u70b9\u7684\u60c5\u51b5\u662f\uff0c\u9ad8\u4f30\u4e86\u81ea\u5df1\u7684\u6267\u884c\u80fd\u529b\uff0c\u591a\u4e2a\u4efb\u52a1\u4e25\u91cdDelay\uff0c\u4ea7\u751f\u534f\u4f5c\u95ee\u9898\uff0c\u4e5f\u975e\u5e38\u5f71\u54cd\u81ea\u8eab\u7684\u5fc3\u6001\u3002</li> </ul> <p>\u611f\u89e6\u771f\u7684\u975e\u5e38\u6df1\uff0c\u7684\u786e\u662f\u5982\u6b64\u3002</p> <p>\u4e3a\u4e86\u5feb\u901f\u8c03\u6574\u597d\u81ea\u5df1\u7684\u5fc3\u6001\u548c\u72b6\u6001\uff0c\u5728\u6df1\u5ea6\u601d\u8003\u540e\uff0c\u5b66\u4f1a\u805a\u7126\uff0c\u505a\u597d\u805a\u7126\u7684\u60f3\u6cd5\u5c31\u4ea7\u751f\u4e86\uff0c\u56e0\u4e3a\u53ea\u6709\u5c06\u66f4\u591a\u7cbe\u529b\u805a\u7126\u5230\u66f4\u5c11\u66f4\u6709\u610f\u4e49\u7684\u4e8b\u4e0a\uff0c\u901a\u5e38\u8fd9\u6837\u505a\u4e8b\u7684\u6548\u679c\u4e00\u822c\u90fd\u4e0d\u4f1a\u5dee\u3002</p> <p>\u90a3\u4e48\u5982\u4f55\u53bb\u505a\u597d\u805a\u7126\u5462\uff0c\u53ef\u80fd\u5927\u5bb6\u90fd\u660e\u767d\u805a\u7126\u5176\u5b9e\u662f\u4e0d\u96be\u7684\uff0c\u96be\u7684\u820d\u5f03\uff0c\u6709\u820d\u624d\u6709\u5f97\u561b\uff0c\u53ea\u6709\u820d\u5f03\u638990%\u7684\u5e72\u6270\u4e8b\u9879\u7684\u4eba\uff0c\u624d\u53ef\u80fd\u771f\u6b63\u7684\u805a\u7126\u5230\u90a310%\u7684\u6838\u5fc3\u4efb\u52a1\u4e0a\uff0c\u6211\u8bb0\u5f97\u66fe\u6709\u4eba\u7ed9\u4ed6\u63d0\u70bc\u4e3a\uff1a\u820d\u4e5d\u53d6\u4e00\u3002</p> <p>\u7ed3\u5408\u81ea\u5df1\u5f53\u524d\u5de5\u4f5c\u7684\u5185\u5bb9\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u65b9\u5411\u5f00\u59cb\u53bb\u5b9e\u65bd\u805a\u7126\u3002</p> <p>\u4e2a\u4eba\u6210\u957f\u7684\u805a\u7126\uff0c\u505a\u66f4\u4f18\u79c0\u7684\u81ea\u5df1\u3002</p> <p>\u4f18\u79c0\u7684\u5b9a\u4e49\uff1a\u505a\u540c\u6837\u7684\u4e8b\u60c5\uff0c\u8868\u73b0\u7684\u5c31\u662f\u6bd4\u522b\u4eba\u597d\uff01</p> <ul> <li>\u89d2\u8272\uff1a\u3010Do\u3011  <ul> <li>\u6709\u76ee\u6807\u7684\u6267\u884c\uff0c\u7528\u76ee\u6807\u6307\u5f15\u81ea\u5df1\u7684\u5b66\u4e60\uff08\u8d39\u66fc\u5b66\u4e60\u6cd5\uff09\uff0c\u627e\u5230\u5de5\u4f5c\u7684\u91cd\u70b9\uff0c\u627e\u91cd\u70b9\u5176\u5b9e\u5c31\u662f\u5728\u805a\u7126\uff1b</li> <li>\u627e\u5230\u76ee\u6807\u540e\uff0c\u8981\u575a\u6301\uff0c\u76ee\u6807\u53ef\u4ee5\u5f88\u5c0f\uff0c\u4f46\u957f\u5e74\u575a\u6301\u4e0b\u6765\uff0c\u4f18\u79c0\u5c31\u4f1a\u53d8\u6210\u4e00\u79cd\u4e60\u60ef\uff0c\u79ef\u7d2f\u7684\u591a\u4e86\uff0c\u66f4\u5927\u7684\u76ee\u6807\u4e5f\u5c31\u5b9e\u73b0\u4e86\u3002</li> </ul> </li> <li>\u76ee\u6807\uff1aT\u578b\u53d1\u5c55<ul> <li>\u805a\u7126\u65b9\u5411\uff1a\u9996\u5148\u8981\u5728\u67d0\u4e2a\u7ef4\u5ea6\u4e0a\u505a\u5230\u5c3d\u53ef\u80fd\u7684\u597d\uff0c\u5fc5\u987b\u610f\u8bc6\u5230\uff0c\u60f3\u8981\u505a\u597d\u5e7f\u5ea6\uff0c\u5fc5\u987b\u5148\u505a\u597d\u6df1\u5ea6\uff0c\u56e0\u4e3a\u5e7f\u5ea6\u6c38\u8fdc\u90fd\u662f\u6df1\u5ea6\u7684\u9644\u5c5e\u54c1\uff0c\u6ca1\u6709\u6df1\u5ea6\u7684\u5e7f\u5ea6\uff0c\u4e00\u5207\u90fd\u53ea\u4f1a\u6d6e\u4e8e\u8868\u9762\uff0c\u65f6\u95f4\u4e00\u4e45\uff0c\u53ea\u4f1a\u9ebb\u75f9\u81ea\u5df1\u3002</li> </ul> </li> <li>\u5b9e\u8df5\uff1a<ul> <li>\u5b9a\u671f\u6574\u7406\u66f4\u65b0\u81ea\u5df1\u7684\u4e8b\u9879\u6e05\u5355\uff0c\u6309\u4f18\u5148\u7ea7\u6392\u5e8f\uff0c\u4f7f\u7528\u5355\u70b9\u7a81\u7834\u7684\u601d\u60f3\uff0c \u5148\u53bb\u505a\u6700\u4e0a\u9762\u7684\u4e8b\u9879\uff08\u76ee\u6807\u8981\u5177\u4f53\uff09\uff0c\u786e\u7acb\u76ee\u6807\uff0c\u8bbe\u5b9aDeadLine\uff08\u8981\u6709\u5177\u4f53\u65f6\u95f4\u8282\u70b9\uff09\uff0c \u7136\u540e\u805a\u7126\u7684\u53bb\u505a\u53bb\u5b66\uff0c\u6ca1\u6709\u76ee\u6807\u7684\u5b66\u4e60\uff0c\u5c31\u4e0d\u53ef\u80fd\u5728\u77ed\u65f6\u95f4\u5185\u5b9e\u73b0\u7a81\u7834\uff0c\u6bd5\u7adf\u4eba\u7684\u7cbe\u529b\u90fd\u662f\u6709\u9650\u7684\u3002</li> <li>\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\uff0c\u53ea\u5c06\u6ce8\u610f\u529b\u805a\u7126\u5230\u4e00\u4e2a\uff08\u6700\u591a\u4e24\u4e2a\uff09\u4e8b\u60c5\u4e0a\u3002\u8fd9\u79cd\u7b56\u7565\u5f88\u91cd\u8981\u3002</li> </ul> </li> <li>\u5927\u9053\u81f3\u7b80\uff1a<ul> <li>\u805a\u7126\u4e0d\u4f46\u4f1a\u5f71\u54cd\u6210\u957f\u7684\u901f\u5ea6\uff0c\u8fd8\u4f1a\u5f71\u54cd\u6210\u957f\u7684\u8d28\u91cf\uff1b</li> <li>\u8fd9\u4e2a\u793e\u4f1a\u4e0d\u4f1a\u5956\u52b1\u9762\u9762\u4ff1\u5230\uff0c\u4f46\u6bcf\u9879\u90fd\u5f88\u5e73\u5eb8\u7684\u4eba\uff0c\u5149\u73af\u6c38\u8fdc\u90fd\u5c5e\u4e8e\u90a3\u4e9b\u6709\u660e\u663e\u4f18\u52bf\uff0c\u6709\u660e\u663e\u957f\u5904\u7684\u4eba\u3002</li> </ul> </li> </ul> <p>\u6280\u672f\u7ba1\u7406\u7684\u805a\u7126\uff0c\u8ba9\u56e2\u961f\u66f4\u597d\u7684\u8fd0\u8f6c\u8d77\u6765\u3002</p> <p>\u7ba1\u7406\u7684\u672c\u8d28\uff1a\u6700\u5927\u9650\u5ea6\u7684\u6fc0\u53d1\u56e2\u961f\u7684\u534f\u540c\uff0c\u4f7f\u4e4b\u4ef7\u503c\u6700\u5927\u5316\u3002</p> <ul> <li>\u89d2\u8272\uff1a\u3010Manage\u3011<ul> <li>\u534f\u8c03\u56e2\u961f\u5b8c\u6210\u4efb\u52a1\u3002</li> </ul> </li> <li>\u76ee\u6807\uff1a<ul> <li>\u8ba9\u56e2\u961f\u5728\u7ec4\u7ec7\u4e2d\u53d1\u6325\u66f4\u5927\u7684\u4ef7\u503c</li> </ul> </li> <li>\u5b9e\u8df5\uff1a<ul> <li>\u6280\u672f\u7ba1\u7406\uff0c\u53ea\u6709\u6253\u597d\u4e86\u6280\u672f\u57fa\u7840\u540e\uff08\u5982\u4f55\u5b9a\u4e49\u6280\u672f\u57fa\u7840OK: \u5f53\u6280\u672f\u6df1\u5ea6\uff0c\u8db3\u4ee5\u8f85\u52a9\u56e2\u961f\u505a\u6280\u672f\u9009\u578b\u548c\u51b3\u7b56\u662f\uff0c\u5c31\u53ef\u4ee5\u805a\u7126\u6280\u672f\u7ba1\u7406\u5de5\u4f5c\u4e86\uff09\uff0c\u6280\u672f\u7ba1\u7406\u7684\u5de5\u4f5c\u624d\u80fd\u66f4\u597d\u7684\u805a\u7126\u3002</li> <li>\u7ba1\u7406\u5de5\u4f5c\u7684\u805a\u7126\uff0c\u5176\u5b9e\u5c31\u662f\u627e\u5230\u6700\u91cd\u8981\u7684\u90a3\u4e2a\u4efb\u52a1\uff0c\u53bb\u66f4\u5feb\u66f4\u597d\u7684\u7a81\u7834\u5b83\uff0c\u7136\u540e\u4e0b\u4e00\u4e2a\uff0c\u518d\u4e0b\u4e00\u4e2a\u3002</li> <li>\u57f9\u517b\u81ea\u5df1\u548c\u56e2\u961f\u7684\u5168\u5c40\u601d\u7ef4\uff0c\u53ea\u6709\u770b\u5230\u5168\u5c40\uff0c\u624d\u80fd\u505a\u597d\u805a\u7126\uff0c\u770b\u6e05\u95ee\u9898\u7684\u5168\u8c8c\uff0c\u662f\u505a\u597d\u805a\u7126\u7684\u5927\u524d\u63d0\u3002</li> <li>\u65e5\u5e38\u7a81\u7834\u4e2d\uff0c\u5b66\u4ee5\u81f4\u7528\u975e\u5e38\u91cd\u8981\uff0c\u5b66\u4e86\u5c31\u8981\u9a6c\u4e0a\u7528\uff0c\u5b66\u4e86\u4e0d\u7528\u7b49\u4e8e\u767d\u5b66\u3002</li> </ul> </li> <li>\u5927\u9053\u81f3\u7b80\uff1a<ul> <li>\u8d8a\u6765\u8d8a\u8ba4\u77e5\u5230\uff1a\u5f88\u591a\u5de5\u4f5c\u7684\u4ef7\u503c\uff0c\u662f\u9700\u8981\u9760\u56e2\u961f\u7684\u529b\u91cf\u6765\u5b9e\u73b0\uff0c\u4e2a\u4eba\u7684\u80fd\u529b\u518d\u5f3a\u6709\u65f6\u5019\u4e5f\u662f\u4e8e\u4e8b\u65e0\u6d4e\uff0c\u56e0\u4e3a\u518d\u4f18\u79c0\u7684\u5956\u52b1\uff0c\u4e5f\u5f97\u9700\u8981\u6709\u5f97\u529b\u7684\u5e72\u5c06\u6765\u8f85\u52a9\u3002</li> </ul> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/06_learn_top2down_or_bottom2up/","title":"\u5b66\u4e60\u5e94\u8be5\u81ea\u5e95\u5411\u4e0a\uff0c\u8fd8\u662f\u81ea\u9876\u5411\u4e0b?","text":"<p>\u6d3b\u5230\u8001\uff0c\u5b66\u5230\u8001\uff0c\u662f\u81ea\u7136\u754c\u7684\u751f\u5b58\u6cd5\u5219\uff0c\u5bf9\u4e8e\u8f6f\u4ef6\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u8fd9\u4e2a\u6cd5\u5219\u66f4\u4e3a\u9002\u7528\uff0c\u4e5f\u66f4\u5e94\u8be5\u9075\u5b88\u548c\u6267\u884c\uff0c\u90a3\u4e48\u5982\u4f55\u5b66\u4e60\uff1f\u5982\u4f55\u9ad8\u6548\u7684\u5b66\u4e60\uff1f\u5c31\u662f\u503c\u5f97\u601d\u8003\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u601d\u8003\u4e86\u5f88\u4e45\uff0c\u63a5\u4e0b\u6765\u6211\u5c31\u8c08\u8c08\u4e2a\u4eba\u5728\u5b66\u4e60\u5b9e\u8df5\u4e2d\u7684\u4e00\u4e9b\u601d\u8003\u548c\u60f3\u6cd5\u3002</p> <p>\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u901a\u5e38\u6709\u4e24\u79cd\u7b56\u7565\uff1a\u4e00\u79cd\u662f\u81ea\u5e95\u5411\u4e0a\uff0c\u53e6\u4e00\u79cd\u662f\u81ea\u9876\u5411\u4e0b\uff1b\u5177\u4f53\u70b9\u8bf4\u5c31\u662f\uff0c\u7cfb\u7edf\u6027\u7684\u4ece\u57fa\u7840\u70b9\u5f00\u59cb\u5b66\uff0c\u7136\u540e\u518d\u5b66\u4e60\u66f4\u9ad8\u9636\u7684\u77e5\u8bc6\u7684\u65b9\u6cd5\u5c31\u662f\u81ea\u5e95\u5411\u4e0a\u7684\u3002\u5e26\u7740\u95ee\u9898\u548c\u76ee\u6807\u7684\u53bb\u5b66\u4e60\uff0c\u4f18\u5148\u5b66\u4e60\u80fd\u89e3\u51b3\u95ee\u9898\u6216\u8fbe\u5230\u76ee\u6807\u7684\u77e5\u8bc6\uff0c\u5728\u6b64\u8fc7\u7a0b\u4e2d\u5982\u679c\u9047\u5230\u6df1\u5c42\u6b21\u4e0d\u592a\u7406\u89e3\u7684\u77e5\u8bc6\uff0c\u518d\u6839\u636e\u76f8\u5173\u77e5\u8bc6\u70b9\u518d\u6df1\u5165\u5b66\u4e60\u8be5\u77e5\u8bc6\u70b9\uff0c\u5982\u679c\u5728\u6b64\u8fc7\u7a0b\u4e2d\u518d\u6b64\u9047\u5230\u6df1\u5c42\u6b21\u4e0d\u7406\u89e3\u7684\u70b9\uff0c\u518d\u6b64\u8fed\u4ee3\u5faa\u73af\u7684\u4f7f\u7528\u524d\u9762\u7684\u65b9\u5f0f\u53bb\u5b66\u4e60\uff0c\u8fd9\u79cd\u5b66\u4e60\u65b9\u5f0f\u5c31\u662f\u81ea\u9876\u5411\u4e0b\u7684\u3002</p> <p>\u5728\u8fc7\u5f80\u7684\u6210\u957f\u7ecf\u5386\u4e2d\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u6bcf\u4e2a\u4eba\u5728\u53d7\u6559\u80b2\u7ecf\u5386\u9636\u6bb5\uff0c\u5c31\u662f\u4e00\u4e2a\u4ece\u81ea\u5e95\u5411\u4e0a\u5230\u81ea\u9876\u5411\u4e0b\u7684\u7b56\u7565\u4f18\u5316\u7684\u8fc7\u7a0b\uff0c\u5728\u4e5d\u5e74\u4e49\u52a1\u6559\u80b2\u9636\u6bb5\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u81ea\u5e95\u5411\u4e0a\u7684\u65b9\u5f0f\uff0c\u5728\u9ad8\u4e2d\u9636\u6bb5\u5c31\u662f\u4e00\u4e2a\u9010\u6e10\u5f00\u59cb\u8fdb\u5165\u534a\u81ea\u5e95\u5411\u4e0a\u7684\u5b66\u4e60\u65b9\u5f0f\uff0c\u56e0\u4e3a\u4e3a\u4e86\u5907\u6218\u9ad8\u8003\uff0c\u9010\u6e10\u4e0d\u518d\u5b66\u4e60\u90a3\u4e9b\u4e0d\u5728\u8003\u8bd5\u8303\u56f4\u7684\u77e5\u8bc6\u5b66\u79d1\uff0c\u5230\u4e86\u5927\u5b66\u9636\u6bb5\uff0c\u62c9\u957f\u65f6\u95f4\u7684\u957f\u6cb3\uff0c\u4ece\u5b8f\u89c2\u89c6\u89d2\u4e0b\u770b\uff0c\u5c31\u662f\u4e00\u4e2a\u81ea\u9876\u5411\u4e0b\u7684\u65b9\u5f0f\uff0c\u56e0\u4e3a\u6240\u9009\u4e13\u4e1a\u5c31\u5df2\u7ecf\u51b3\u5b9a\u4e86\u9700\u8981\u5b66\u4e60\u7684\u77e5\u8bc6\u3002\u4ece\u5fae\u89c2\u89c6\u89d2\u4e0b\uff0c\u4e13\u4e1a\u5b66\u4e60\u5176\u5b9e\u4e5f\u662f\u81ea\u5e95\u5411\u4e0a\u7684\u65b9\u5f0f\uff0c\u5de5\u4f5c\u4e2d\u540c\u6837\u4e5f\u662f\u5982\u6b64\u3002</p> <p>\u5728\u8fc7\u5f80\u7684\u5b66\u4e60\u4e2d\uff0c\u6211\u8ffd\u6c42\u7684\u662f\u81ea\u5e95\u5411\u4e0a\u7684\u5b66\u4e60\u7b56\u7565\uff0c\u56e0\u4e3a\u8fd9\u6837\u80fd\u5c06\u77e5\u8bc6\u5b66\u4e60\u7684\u66f4\u624e\u5b9e\uff0c\u5b66\u4e60\u6216\u5de5\u4f5c\u4e2d\uff0c\u90fd\u5e0c\u671b\u5c06\u77e5\u8bc6\u70b9\u5b66\u624e\u5b9e\uff0c\u57fa\u7840\u6253\u7262\u56fa\uff0c\u4f46\u8fd9\u79cd\u5b66\u4e60\u7b56\u7565\uff0c\u4ece\u77ed\u671f\u770b\uff0c\u6536\u76ca\u662f\u7f13\u6162\u7684\uff0c\u5bf9\u7cbe\u529b\u6d88\u8017\u4e5f\u662f\u5de8\u5927\u7684\uff0c\u968f\u7740\u751f\u6d3b\u548c\u5de5\u4f5c\u538b\u529b\u7684\u589e\u5927\uff0c\u8fd9\u79cd\u5b66\u4e60\u65b9\u5f0f\uff0c\u8ba9\u81ea\u5df1\u53d8\u7684\u75b2\u4e4f\u4e14\u96be\u4ee5\u575a\u6301\u3002</p> <p>\u5bf9\u4e8e\u8f6f\u4ef6\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u654f\u6377\u3001\u5feb\u901f\u53d1\u5e03\u3001\u5feb\u901f\u8fed\u4ee3\uff1b\u8fd9\u4e9b\u8bcd\u4e00\u5b9a\u4e0d\u964c\u751f\uff0c\u8fd9\u4e9b\u8bcd\u7684\u5728\u9610\u91ca\u4e00\u4e2a\u9053\u7406\uff1a\u5feb\u901f\u5f00\u59cb\uff0c\u5feb\u901f\u53cd\u9988\uff0c\u5feb\u901f\u5b8c\u5584\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u518d\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u4e0d\u7ba1\u8fd9\u4e2a\u4e1c\u897f\u505a\u7684\u600e\u4e48\u6837\uff0c\u53ea\u8981\u5b83\u80fd\u89e3\u51b3\u5b9e\u9645\u95ee\u9898\u5c31\u884c\u4e86\uff0c\u540e\u7eed\u518d\u9010\u6e10\u53bb\u5b8c\u5584\u3002</p> <p>\u6240\u4ee5\uff0c\u5728\u5b66\u4e60\u4e2d\uff0c\u6211\u8c03\u6574\u4e86\u81ea\u5df1\u7684\u5b66\u4e60\u7b56\u7565\uff0c\u4e5f\u5b9e\u8df5\u4e86\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\uff0c\u53d1\u73b0\u8fd9\u79cd\u6548\u679c\u633a\u4e0d\u9519\uff0c\u660e\u663e\u611f\u89c9\u81ea\u5df1\u4e5f\u6ca1\u6709\u4ee5\u524d\u90a3\u4e48\u75b2\u4e4f\u4e86\u3002\u5728\u5982\u4eca\u8fd9\u4e2a\u6280\u672f\u9ad8\u901f\u53d1\u5c55\u548c\u53d8\u5316\u7684\u65f6\u4ee3\uff0c\u7504\u522b\u53d8\u5316\u4e2d\u7684\u4e0d\u53d8\u662f\u4e00\u9879\u91cd\u8981\u7684\u6280\u80fd\uff1a</p> <p>\u76ee\u6807\u9a71\u52a8</p> <p>\u6613\u53d8\u7684\uff1a\u5bf9\u4e8e\u5de5\u4f5c\u4e2d\u9700\u8981\u9a6c\u4e0a\u7528\u5230\u7684\u6280\u672f\u6216\u77e5\u8bc6\uff0c\u91c7\u7528\u81ea\u9876\u5411\u4e0b\u7684\u7b56\u7565\u53bb\u5b66\u4e60\uff0c\u4ee5\u8fbe\u5230\u89e3\u51b3\u5b9e\u9645\u95ee\u9898\u4e3a\u76ee\u6807\u5373\u53ef\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u9ad8\u5f3a\u5ea6\u5de5\u4f5c\u6d88\u8017\u6389\u7684\u7cbe\u529b\uff1b</p> <p>\u80fd\u529b\u9a71\u52a8</p> <p>\u4e0d\u53d8\u7684\uff1a\u5bf9\u4e8e\u8fd9\u4e9b\u4e0d\u53d8\u7684\u4e1c\u897f\uff0c\u9700\u8981\u5408\u7406\u7684\u5b89\u6392\u65f6\u95f4\uff0c\u505a\u6301\u4e45\u5b66\u4e60\u7684\u51c6\u5907\uff0c\u4f7f\u7528\u81ea\u5e95\u5411\u4e0a\u7684\u7b56\u7565\u53bb\u5b66\u4e60\uff1b\u6bd5\u7adf\uff0c\u57fa\u7840\u7684\u4e1c\u897f\u90fd\u662f\u7ecf\u8fc7\u7684\u65f6\u95f4\u7684\u8003\u9a8c\u548c\u6c89\u6dc0\uff0c\u638c\u63e1\u4e86\u5c31\u4f1a\u7ec8\u751f\u53d7\u76ca\uff0c\u4e07\u53d8\u4e0d\u79bb\u5176\u5b97\u8bf4\u7684\u5c31\u662f\u8fd9\u4e2a\u9053\u7406\u3002</p>","tags":["Thinking"]},{"location":"tags/","title":"Tags","text":"<p>Tip</p> <p>\u4ee5\u4e0b\u662f\u76f8\u5173\u6807\u7b7e\u7684\u5217\u8868</p>"},{"location":"tags/#k8s","title":"K8S","text":"<ul> <li>k8s\u5305\u7ba1\u7406\u5de5\u5177Helm\u7684\u4f7f\u7528</li> <li>k8s\u5e38\u7528\u547d\u4ee4\u603b\u7ed3</li> <li>k8s\u90e8\u7f72\u5e38\u89c1\u95ee\u9898\u6c47\u603b</li> <li>k8s\u6838\u5fc3\u6982\u5ff5</li> <li>k8s\u7684Dashboard\u5b89\u88c5</li> <li>k8s\u4e2detcd\u6302\u8f7d\u5185\u5b58\u5377\u6b65\u9aa4</li> <li>k8s\u7684storageclass-nfs\u5b89\u88c5\u548c\u4f7f\u7528</li> <li>k8s\u5b9e\u7528\u5c0f\u6280\u5de7</li> <li>k8s\u5b9e\u7528\u5de5\u5177\u4e4bKtConnect</li> <li>kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.19.4)</li> <li>kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.27.9)</li> <li>k8s\u4e2dyaml\u6587\u4ef6\u7684\u7f16\u5199\u548c\u4f7f\u7528</li> </ul>"},{"location":"tags/#thinking","title":"Thinking","text":"<ul> <li>\u5982\u4f55\u66f4\u806a\u660e\u7684\u505a\u4e8b\u60c5</li> <li>\u6280\u672f\u4e00\u8a00</li> <li>\u5982\u4f55\u9ad8\u6548\u5b66\u4e60\u5f00\u6e90\u9879\u76ee</li> <li>\u63d0\u95ee\u7684\u667a\u6167</li> <li>\u4e2a\u4eba\u6218\u7565\u4e0a\u7684\u805a\u7126\u548c\u653e\u5f03</li> <li>\u5b66\u4e60\u5e94\u8be5\u81ea\u5e95\u5411\u4e0a,\u8fd8\u662f\u81ea\u9876\u5411\u4e0b</li> </ul>"}]}