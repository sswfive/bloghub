
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="sswfive">
      
      
        <link rel="canonical" href="https://sswfive.github.io/bloghub/python/pyweb/django/django_lazyobject_analysis/">
      
      
        <link rel="prev" href="../orm_query_summary/">
      
      
        <link rel="next" href="../../../python_core/coding_standard/">
      
      
      <link rel="icon" href="https://s2.loli.net/2024/04/26/PmRdM9iGnvOJHgu.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.28">
    
    
      
        <title>django源码学习之LazyObject - 空谷幽兰</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../customize/stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../../customize/stylesheets/link.css">
    
      <link rel="stylesheet" href="../../../../customize/stylesheets/customize.css">
    
      <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config",""),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
    <link rel="stylesheet" href="../../../../assets/stylesheets/custom.00c04c01.min.css">
  
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="不再显示此消息">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
              </button>
            
            
     Follow <strong>@Wcowin</strong> on
    <a rel="me" href="https://space.bilibili.com/1407028951?spm_id_from=333.1007.0.0">
      <span class="twemoji bilibili">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0s16.1 2.868 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0c8.8 0 16.1 2.868 21.9 8.603 5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1zm-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8 6.3-6.5 9.7-14.3 10.1-23.5V173.8zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5-9.6 0-17.5-3.2-23.6-9.5-6.1-6.3-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2 6.3-6.3 13.2-9.6 23.3-10 9.2.4 17 3.7 23.3 10zm191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.1 6.3-14 9.5-23.6 9.5-9.6 0-17.4-3.2-23.6-9.5-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2 6.3-6.3 14.1-9.6 23.3-10 9.2.4 17 3.7 23.3 10z"/></svg>
      </span>
      <strong>Bilibili</strong>
    </a>
    and
    <a href="https://twitter.com/Wcowin_">
      <span class="twemoji twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </span>
      <strong>Twitter</strong>
    </a>
  
          </div>
          
            <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../.." title="空谷幽兰" class="md-header__button md-logo" aria-label="空谷幽兰" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            空谷幽兰
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              django源码学习之LazyObject
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="关闭自动模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="关闭自动模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="切换至夜间模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="切换至日间模式"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sswfive" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sswfive
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../.." class="md-tabs__link">
          
  
    
  
  主页

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../orm_fields_summary/" class="md-tabs__link">
          
  
    
  
  Python编程

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../codecore/design_patterns/object_oriented_principles/" class="md-tabs__link">
          
  
    
  
  编程内功

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../blogs/solutionhub/opshub/server_disk_full_solution/" class="md-tabs__link">
          
  
    
  
  迎刃而解

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../toolbox/git/git_multi_ssh/" class="md-tabs__link">
          
  
    
  
  工具箱

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../tag/" class="md-tabs__link">
        
  
    
  
  标签

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="空谷幽兰" class="md-nav__button md-logo" aria-label="空谷幽兰" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    空谷幽兰
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sswfive" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sswfive
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    主页
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            主页
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../about/personal_profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Python编程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Python编程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Web 框架
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Web 框架
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Django
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            Django
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../orm_fields_summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    django中ORM字段总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../orm_query_summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    django中ORM查询方法总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    django源码学习之LazyObject
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    django源码学习之LazyObject
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      导入
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazyobject" class="md-nav__link">
    <span class="md-ellipsis">
      LazyObject源码分析
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      总结：
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demo" class="md-nav__link">
    <span class="md-ellipsis">
      Demo示例
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#django" class="md-nav__link">
    <span class="md-ellipsis">
      django项目中的应用
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Python编程实践
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Python编程实践
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    规范与语法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            规范与语法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_core/coding_standard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python编码规范
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    开发与管理工具
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            开发与管理工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_core/devtools/dev_tool_selection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python开发工具汇总
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_core/devtools/env_package_selection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python版本及包管理工具选型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_core/devtools/pypi_source_usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常用Pypi源汇总及使用
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Python常用库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Python常用库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/lib_common_summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    热门库汇总
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/daily_lib_summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常用库笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    笔记清单
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            笔记清单
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/libs/numpy.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据分析之Numpy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/libs/pandas.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据分析之Pandas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/libs/pyflink.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分布式流计算之PyFlink
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/libs/mlflow.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    模型管理工具之MLFlow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/libs/supervisor.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    进程管理之Supervisor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/libs/subprocess/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    子进程管理之subprocess
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/libs/apscheduler.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    定时任务工具之APScheduler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python_lib/libs/pathlib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    路径操作之pathlib
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    编程内功
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            编程内功
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    设计模式
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            设计模式
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../codecore/design_patterns/object_oriented_principles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    面向对象设计原则
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../codecore/design_patterns/design_patterns_categories/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设计模式分类总览
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    迎刃而解
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            迎刃而解
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    迎刃而解
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            迎刃而解
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    运维手记
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            运维手记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/opshub/server_disk_full_solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    服务器磁盘空间满的解决办法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/opshub/centos_yum_source_delete_solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Centos的yum源误删解决方法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/opshub/win10_git_chinese_solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    win10的cmd中操作git中文乱码解决方法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/opshub/mac_brew_service_error_solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mac使用brew services报错
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Bugs复盘
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            Bugs复盘
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/bughub/jupyterhub_deploy_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jupyterhub离线部署踩坑总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/bughub/jupyter_matplotlib_font_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jupyter matplotlib画图中文字体缺失
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/bughub/jupyter_asyncio_run_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jupyter运行asyncio run报错
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/bughub/window_install_pip_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    window环境中pip安装报错
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/bughub/conda_rename_env_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conda修改虚拟环境名导致异常
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blogs/solutionhub/bughub/rsa_encryption_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多语言之间的RSA加解密问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    工具箱
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            工具箱
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    开发工具
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            开发工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1_1" id="__nav_5_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Git
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1">
            <span class="md-nav__icon md-icon"></span>
            Git
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../toolbox/git/git_multi_ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git同时配置多个平台的SSH
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    标签
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      导入
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazyobject" class="md-nav__link">
    <span class="md-ellipsis">
      LazyObject源码分析
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      总结：
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demo" class="md-nav__link">
    <span class="md-ellipsis">
      Demo示例
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#django" class="md-nav__link">
    <span class="md-ellipsis">
      django项目中的应用
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  
<nav class="md-tags" >
  
    
    
    
      <a href="../../../../tag/#python" class="md-tag">Python</a>
    
  
    
    
    
      <a href="../../../../tag/#django" class="md-tag">Django</a>
    
  
</nav>


  
    <a href="https://github.com/sswfive/edit/master/docs/python/pyweb/django/django_lazyobject_analysis.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/sswfive/raw/master/docs/python/pyweb/django/django_lazyobject_analysis.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


  <h1>django源码学习之LazyObject</h1>

<h3 id="_1">导入<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>from django.utils.functional import LazyObject
</code></pre></div></td></tr></table></div>
<h3 id="lazyobject">LazyObject源码分析<a class="headerlink" href="#lazyobject" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">  1</a></span>
<span class="normal"><a href="#__codelineno-1-2">  2</a></span>
<span class="normal"><a href="#__codelineno-1-3">  3</a></span>
<span class="normal"><a href="#__codelineno-1-4">  4</a></span>
<span class="normal"><a href="#__codelineno-1-5">  5</a></span>
<span class="normal"><a href="#__codelineno-1-6">  6</a></span>
<span class="normal"><a href="#__codelineno-1-7">  7</a></span>
<span class="normal"><a href="#__codelineno-1-8">  8</a></span>
<span class="normal"><a href="#__codelineno-1-9">  9</a></span>
<span class="normal"><a href="#__codelineno-1-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-1-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-1-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-1-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-1-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-1-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-1-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-1-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-1-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-1-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-1-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-1-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-1-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-1-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-1-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-1-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-1-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-1-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-1-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-1-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-1-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-1-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-1-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-1-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-1-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-1-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-1-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-1-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-1-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-1-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-1-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-1-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-1-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-1-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-1-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-1-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-1-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-1-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-1-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-1-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-1-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-1-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-1-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-1-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-1-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-1-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-1-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-1-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-1-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-1-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-1-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-1-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-1-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-1-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-1-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-1-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-1-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-1-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-1-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-1-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-1-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-1-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-1-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-1-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-1-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-1-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-1-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-1-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-1-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-1-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-1-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-1-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-1-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-1-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-1-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-1-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-1-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-1-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-1-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-1-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-1-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-1-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-1-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-1-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-1-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-1-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-1-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-1-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-1-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-1-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-1-100">100</a></span>
<span class="normal"><a href="#__codelineno-1-101">101</a></span>
<span class="normal"><a href="#__codelineno-1-102">102</a></span>
<span class="normal"><a href="#__codelineno-1-103">103</a></span>
<span class="normal"><a href="#__codelineno-1-104">104</a></span>
<span class="normal"><a href="#__codelineno-1-105">105</a></span>
<span class="normal"><a href="#__codelineno-1-106">106</a></span>
<span class="normal"><a href="#__codelineno-1-107">107</a></span>
<span class="normal"><a href="#__codelineno-1-108">108</a></span>
<span class="normal"><a href="#__codelineno-1-109">109</a></span>
<span class="normal"><a href="#__codelineno-1-110">110</a></span>
<span class="normal"><a href="#__codelineno-1-111">111</a></span>
<span class="normal"><a href="#__codelineno-1-112">112</a></span>
<span class="normal"><a href="#__codelineno-1-113">113</a></span>
<span class="normal"><a href="#__codelineno-1-114">114</a></span>
<span class="normal"><a href="#__codelineno-1-115">115</a></span>
<span class="normal"><a href="#__codelineno-1-116">116</a></span>
<span class="normal"><a href="#__codelineno-1-117">117</a></span>
<span class="normal"><a href="#__codelineno-1-118">118</a></span>
<span class="normal"><a href="#__codelineno-1-119">119</a></span>
<span class="normal"><a href="#__codelineno-1-120">120</a></span>
<span class="normal"><a href="#__codelineno-1-121">121</a></span>
<span class="normal"><a href="#__codelineno-1-122">122</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>empty = object()  # empty是一个object对象，表示还未初始化
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>&quot;&quot;&quot;
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>#为类方法实现通用的惰性加载方法，即查看对象是否实例化
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>#若还未实例化，调用子类实例化方法
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>#最后在生成的实例上调用原来的func类方法
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>&quot;&quot;&quot;
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>def new_method_proxy(func):  
<a id="__codelineno-1-9" name="__codelineno-1-9"></a># new_method_proxy是个工厂函数，为其他函数增加实例化的功能，
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>    def inner(self, *args):
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>        # 判断是否empty,表示为空，未实例化
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>        if self._wrapped is empty:
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>            # 调用继承类实现的_setup,实例化类
<a id="__codelineno-1-14" name="__codelineno-1-14"></a>            self._setup()
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>        return func(self._wrapped, *args)
<a id="__codelineno-1-16" name="__codelineno-1-16"></a>    return inner
<a id="__codelineno-1-17" name="__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a>class LazyObject(object):
<a id="__codelineno-1-20" name="__codelineno-1-20"></a>    &quot;&quot;&quot;
<a id="__codelineno-1-21" name="__codelineno-1-21"></a>    A wrapper for another class that can be used to delay instantiation of the
<a id="__codelineno-1-22" name="__codelineno-1-22"></a>    wrapped class.
<a id="__codelineno-1-23" name="__codelineno-1-23"></a>
<a id="__codelineno-1-24" name="__codelineno-1-24"></a>    By subclassing, you have the opportunity to intercept and alter the
<a id="__codelineno-1-25" name="__codelineno-1-25"></a>    instantiation. If you don&#39;t need to do that, use SimpleLazyObject.
<a id="__codelineno-1-26" name="__codelineno-1-26"></a>    &quot;&quot;&quot;
<a id="__codelineno-1-27" name="__codelineno-1-27"></a>
<a id="__codelineno-1-28" name="__codelineno-1-28"></a>    # Avoid infinite recursion when tracing __init__ (#19456).
<a id="__codelineno-1-29" name="__codelineno-1-29"></a>    _wrapped = None
<a id="__codelineno-1-30" name="__codelineno-1-30"></a>
<a id="__codelineno-1-31" name="__codelineno-1-31"></a>    def __init__(self):
<a id="__codelineno-1-32" name="__codelineno-1-32"></a>        # Note: if a subclass overrides __init__(), it will likely need to
<a id="__codelineno-1-33" name="__codelineno-1-33"></a>        # override __copy__() and __deepcopy__() as well.
<a id="__codelineno-1-34" name="__codelineno-1-34"></a>        self._wrapped = empty  #标记是否有实例化
<a id="__codelineno-1-35" name="__codelineno-1-35"></a>
<a id="__codelineno-1-36" name="__codelineno-1-36"></a>     # 通过工厂函数生成__getattr__方法，为其判断是否实例化，如果未实例化，则调用_setup实例化类
<a id="__codelineno-1-37" name="__codelineno-1-37"></a>    __getattr__ = new_method_proxy(getattr)  
<a id="__codelineno-1-38" name="__codelineno-1-38"></a>
<a id="__codelineno-1-39" name="__codelineno-1-39"></a>    def __setattr__(self, name, value):
<a id="__codelineno-1-40" name="__codelineno-1-40"></a>        if name == &quot;_wrapped&quot;: #若修改的为_wrapped，特殊处理
<a id="__codelineno-1-41" name="__codelineno-1-41"></a>            # Assign to __dict__ to avoid infinite __setattr__ loops.
<a id="__codelineno-1-42" name="__codelineno-1-42"></a>            self.__dict__[&quot;_wrapped&quot;] = value
<a id="__codelineno-1-43" name="__codelineno-1-43"></a>        else:
<a id="__codelineno-1-44" name="__codelineno-1-44"></a>            if self._wrapped is empty:
<a id="__codelineno-1-45" name="__codelineno-1-45"></a>                self._setup()
<a id="__codelineno-1-46" name="__codelineno-1-46"></a>            setattr(self._wrapped, name, value)   #实例化后，修改实例的属性
<a id="__codelineno-1-47" name="__codelineno-1-47"></a>
<a id="__codelineno-1-48" name="__codelineno-1-48"></a>    def __delattr__(self, name):
<a id="__codelineno-1-49" name="__codelineno-1-49"></a>        if name == &quot;_wrapped&quot;:  #不可删除_wrapped属性
<a id="__codelineno-1-50" name="__codelineno-1-50"></a>            raise TypeError(&quot;can&#39;t delete _wrapped.&quot;)
<a id="__codelineno-1-51" name="__codelineno-1-51"></a>        if self._wrapped is empty:
<a id="__codelineno-1-52" name="__codelineno-1-52"></a>            self._setup()
<a id="__codelineno-1-53" name="__codelineno-1-53"></a>        delattr(self._wrapped, name)
<a id="__codelineno-1-54" name="__codelineno-1-54"></a>
<a id="__codelineno-1-55" name="__codelineno-1-55"></a>    # 需要子类实现自己的_setup
<a id="__codelineno-1-56" name="__codelineno-1-56"></a>    def _setup(self):
<a id="__codelineno-1-57" name="__codelineno-1-57"></a>        &quot;&quot;&quot;
<a id="__codelineno-1-58" name="__codelineno-1-58"></a>        Must be implemented by subclasses to initialize the wrapped object.
<a id="__codelineno-1-59" name="__codelineno-1-59"></a>        &quot;&quot;&quot;
<a id="__codelineno-1-60" name="__codelineno-1-60"></a>        #只可由子类调用
<a id="__codelineno-1-61" name="__codelineno-1-61"></a>        raise NotImplementedError(&#39;subclasses of LazyObject must provide a _setup() method&#39;)
<a id="__codelineno-1-62" name="__codelineno-1-62"></a>
<a id="__codelineno-1-63" name="__codelineno-1-63"></a>    # Because we have messed with __class__ below, we confuse pickle as to what
<a id="__codelineno-1-64" name="__codelineno-1-64"></a>    # class we are pickling. We&#39;re going to have to initialize the wrapped
<a id="__codelineno-1-65" name="__codelineno-1-65"></a>    # object to successfully pickle it, so we might as well just pickle the
<a id="__codelineno-1-66" name="__codelineno-1-66"></a>    # wrapped object since they&#39;re supposed to act the same way.
<a id="__codelineno-1-67" name="__codelineno-1-67"></a>    #
<a id="__codelineno-1-68" name="__codelineno-1-68"></a>    # Unfortunately, if we try to simply act like the wrapped object, the ruse
<a id="__codelineno-1-69" name="__codelineno-1-69"></a>    # will break down when pickle gets our id(). Thus we end up with pickle
<a id="__codelineno-1-70" name="__codelineno-1-70"></a>    # thinking, in effect, that we are a distinct object from the wrapped
<a id="__codelineno-1-71" name="__codelineno-1-71"></a>    # object, but with the same __dict__. This can cause problems (see #25389).
<a id="__codelineno-1-72" name="__codelineno-1-72"></a>    #
<a id="__codelineno-1-73" name="__codelineno-1-73"></a>    # So instead, we define our own __reduce__ method and custom unpickler. We
<a id="__codelineno-1-74" name="__codelineno-1-74"></a>    # pickle the wrapped object as the unpickler&#39;s argument, so that pickle
<a id="__codelineno-1-75" name="__codelineno-1-75"></a>    # will pickle it normally, and then the unpickler simply returns its
<a id="__codelineno-1-76" name="__codelineno-1-76"></a>    # argument.
<a id="__codelineno-1-77" name="__codelineno-1-77"></a>    def __reduce__(self):
<a id="__codelineno-1-78" name="__codelineno-1-78"></a>        if self._wrapped is empty:
<a id="__codelineno-1-79" name="__codelineno-1-79"></a>            self._setup()
<a id="__codelineno-1-80" name="__codelineno-1-80"></a>        return (unpickle_lazyobject, (self._wrapped,))
<a id="__codelineno-1-81" name="__codelineno-1-81"></a>
<a id="__codelineno-1-82" name="__codelineno-1-82"></a>    def __copy__(self):
<a id="__codelineno-1-83" name="__codelineno-1-83"></a>        if self._wrapped is empty:
<a id="__codelineno-1-84" name="__codelineno-1-84"></a>            # If uninitialized, copy the wrapper. Use type(self), not
<a id="__codelineno-1-85" name="__codelineno-1-85"></a>            # self.__class__, because the latter is proxied.
<a id="__codelineno-1-86" name="__codelineno-1-86"></a>            return type(self)()
<a id="__codelineno-1-87" name="__codelineno-1-87"></a>        else:
<a id="__codelineno-1-88" name="__codelineno-1-88"></a>            # If initialized, return a copy of the wrapped object.
<a id="__codelineno-1-89" name="__codelineno-1-89"></a>            return copy.copy(self._wrapped)
<a id="__codelineno-1-90" name="__codelineno-1-90"></a>
<a id="__codelineno-1-91" name="__codelineno-1-91"></a>    def __deepcopy__(self, memo):
<a id="__codelineno-1-92" name="__codelineno-1-92"></a>        if self._wrapped is empty:
<a id="__codelineno-1-93" name="__codelineno-1-93"></a>            # We have to use type(self), not self.__class__, because the
<a id="__codelineno-1-94" name="__codelineno-1-94"></a>            # latter is proxied.
<a id="__codelineno-1-95" name="__codelineno-1-95"></a>            result = type(self)()
<a id="__codelineno-1-96" name="__codelineno-1-96"></a>            memo[id(self)] = result
<a id="__codelineno-1-97" name="__codelineno-1-97"></a>            return result
<a id="__codelineno-1-98" name="__codelineno-1-98"></a>        return copy.deepcopy(self._wrapped, memo)
<a id="__codelineno-1-99" name="__codelineno-1-99"></a>
<a id="__codelineno-1-100" name="__codelineno-1-100"></a>    __bytes__ = new_method_proxy(bytes)
<a id="__codelineno-1-101" name="__codelineno-1-101"></a>    __str__ = new_method_proxy(str)
<a id="__codelineno-1-102" name="__codelineno-1-102"></a>    __bool__ = new_method_proxy(bool)
<a id="__codelineno-1-103" name="__codelineno-1-103"></a>
<a id="__codelineno-1-104" name="__codelineno-1-104"></a>    # Introspection support
<a id="__codelineno-1-105" name="__codelineno-1-105"></a>    __dir__ = new_method_proxy(dir)
<a id="__codelineno-1-106" name="__codelineno-1-106"></a>
<a id="__codelineno-1-107" name="__codelineno-1-107"></a>    # Need to pretend to be the wrapped class, for the sake of objects that
<a id="__codelineno-1-108" name="__codelineno-1-108"></a>    # care about this (especially in equality tests)
<a id="__codelineno-1-109" name="__codelineno-1-109"></a>    __class__ = property(new_method_proxy(operator.attrgetter(&quot;__class__&quot;)))
<a id="__codelineno-1-110" name="__codelineno-1-110"></a>    __eq__ = new_method_proxy(operator.eq)
<a id="__codelineno-1-111" name="__codelineno-1-111"></a>    __lt__ = new_method_proxy(operator.lt)
<a id="__codelineno-1-112" name="__codelineno-1-112"></a>    __gt__ = new_method_proxy(operator.gt)
<a id="__codelineno-1-113" name="__codelineno-1-113"></a>    __ne__ = new_method_proxy(operator.ne)
<a id="__codelineno-1-114" name="__codelineno-1-114"></a>    __hash__ = new_method_proxy(hash)
<a id="__codelineno-1-115" name="__codelineno-1-115"></a>
<a id="__codelineno-1-116" name="__codelineno-1-116"></a>    # List/Tuple/Dictionary methods support
<a id="__codelineno-1-117" name="__codelineno-1-117"></a>    __getitem__ = new_method_proxy(operator.getitem)
<a id="__codelineno-1-118" name="__codelineno-1-118"></a>    __setitem__ = new_method_proxy(operator.setitem)
<a id="__codelineno-1-119" name="__codelineno-1-119"></a>    __delitem__ = new_method_proxy(operator.delitem)
<a id="__codelineno-1-120" name="__codelineno-1-120"></a>    __iter__ = new_method_proxy(iter)
<a id="__codelineno-1-121" name="__codelineno-1-121"></a>    __len__ = new_method_proxy(len)
<a id="__codelineno-1-122" name="__codelineno-1-122"></a>    __contains__ = new_method_proxy(operator.contains)
</code></pre></div></td></tr></table></div>
<h3 id="_2">总结：<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ol>
<li>LazyObject的核心逻辑，初始化的时候把_wrapped设置为empty，未对实际的类进行实例化操作，达到延迟类实例化的效果。只有对结果需要进行某些操作的时候，比如获取属性，才会去调用_setup进行实例化。而且_setup必须由子类实现。</li>
<li>如果想要让某个类有延迟实例化的功能，必须做两件事情，1）继承LazyObject；2）实现_setup方法。</li>
</ol>
<h3 id="demo">Demo示例<a class="headerlink" href="#demo" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a># 有延迟实例化需求的类DemoObject
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>class DemoObject(object):  
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    def __init__(self):  
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>        self.title = &#39;just a demo&#39;  
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a># 因为继承了LazyObject，所以DemoLazyObject有延迟实例化的功能
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>class DemoLazyObject(LazyObject):
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>    # 子类需要重新实现_setup方法，该方法实例化类DemoObject，并把生成的对象赋给_wrapped。
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>    def _setup(self):
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>        self._wrapped = DemoObject()  
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a># 实例化类DemoLazyObject，生成对象a_demo，此时并没有实际实例化类DemoObject。
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>a_demo = DemoLazyObject()
<a id="__codelineno-2-14" name="__codelineno-2-14"></a># 调用a_demo.title的时候，会触发类DemoObject的实例化
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>print(a_demo.title)
</code></pre></div></td></tr></table></div>
代码运行流程：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>当实例化类DemoLazyObject时，并没有真正去实例化类 DemoObject，它的实例化在_setup里面。只有执行了后面那行print(a_demo.title)，才会真正触发类 DemoObject的实例化。

第一次的调用流程是print(a_demo.title)-&gt;LazyObject.__getattr__-&gt;new_method_proxy(getattr)-&gt;DemoLazyObject._setup(self)-&gt;DemoObject.__init__(self)-&gt;LazyObject.getattr(self._wrapped, *args)。

以后再调用的时候就不会进入DemoLazyObject._setup(self)和DemoObject.__init__(self)，而是直接返回LazyObject.getattr(self._wrapped, *args)。
</code></pre></div></td></tr></table></div>
<hr />
<h3 id="django">django项目中的应用<a class="headerlink" href="#django" title="Permanent link">&para;</a></h3>
<p><strong>情景需求：调用oss的api去实现将压缩包文件上传到oss的private bucket中</strong>
- models:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>file_path = models.FileField(u&#39;文件路径(*.tar.gz)&#39;,upload_to=generate_package_filename, max_length=1024,storage=system_package_storage)
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>FileField:字符串类型，路径保存到数据库，文件上传到指定目录
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>upload_to:上传文件的保存路径
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>storage:存储组件，默认是django.core.files.storage.FileSystemStorage
</code></pre></div></td></tr></table></div>
- 生成上传文件的保存路径的方法
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>def generate_package_filename(instance, filename):
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>    return {&#39;product_key&#39;: instance.product.product_key}, &#39;system_package/%d/%s/%s%s&#39; % (
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>        instance.device_type, instance.version, int(time.mktime(datetime.now().timetuple())), file_extension(filename))
</code></pre></div></td></tr></table></div>
- system_package_storage的实现</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">  1</a></span>
<span class="normal"><a href="#__codelineno-5-2">  2</a></span>
<span class="normal"><a href="#__codelineno-5-3">  3</a></span>
<span class="normal"><a href="#__codelineno-5-4">  4</a></span>
<span class="normal"><a href="#__codelineno-5-5">  5</a></span>
<span class="normal"><a href="#__codelineno-5-6">  6</a></span>
<span class="normal"><a href="#__codelineno-5-7">  7</a></span>
<span class="normal"><a href="#__codelineno-5-8">  8</a></span>
<span class="normal"><a href="#__codelineno-5-9">  9</a></span>
<span class="normal"><a href="#__codelineno-5-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-5-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-5-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-5-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-5-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-5-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-5-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-5-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-5-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-5-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-5-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-5-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-5-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-5-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-5-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-5-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-5-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-5-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-5-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-5-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-5-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-5-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-5-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-5-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-5-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-5-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-5-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-5-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-5-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-5-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-5-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-5-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-5-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-5-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-5-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-5-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-5-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-5-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-5-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-5-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-5-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-5-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-5-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-5-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-5-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-5-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-5-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-5-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-5-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-5-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-5-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-5-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-5-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-5-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-5-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-5-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-5-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-5-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-5-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-5-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-5-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-5-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-5-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-5-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-5-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-5-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-5-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-5-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-5-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-5-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-5-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-5-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-5-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-5-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-5-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-5-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-5-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-5-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-5-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-5-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-5-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-5-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-5-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-5-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-5-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-5-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-5-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-5-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-5-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-5-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-5-100">100</a></span>
<span class="normal"><a href="#__codelineno-5-101">101</a></span>
<span class="normal"><a href="#__codelineno-5-102">102</a></span>
<span class="normal"><a href="#__codelineno-5-103">103</a></span>
<span class="normal"><a href="#__codelineno-5-104">104</a></span>
<span class="normal"><a href="#__codelineno-5-105">105</a></span>
<span class="normal"><a href="#__codelineno-5-106">106</a></span>
<span class="normal"><a href="#__codelineno-5-107">107</a></span>
<span class="normal"><a href="#__codelineno-5-108">108</a></span>
<span class="normal"><a href="#__codelineno-5-109">109</a></span>
<span class="normal"><a href="#__codelineno-5-110">110</a></span>
<span class="normal"><a href="#__codelineno-5-111">111</a></span>
<span class="normal"><a href="#__codelineno-5-112">112</a></span>
<span class="normal"><a href="#__codelineno-5-113">113</a></span>
<span class="normal"><a href="#__codelineno-5-114">114</a></span>
<span class="normal"><a href="#__codelineno-5-115">115</a></span>
<span class="normal"><a href="#__codelineno-5-116">116</a></span>
<span class="normal"><a href="#__codelineno-5-117">117</a></span>
<span class="normal"><a href="#__codelineno-5-118">118</a></span>
<span class="normal"><a href="#__codelineno-5-119">119</a></span>
<span class="normal"><a href="#__codelineno-5-120">120</a></span>
<span class="normal"><a href="#__codelineno-5-121">121</a></span>
<span class="normal"><a href="#__codelineno-5-122">122</a></span>
<span class="normal"><a href="#__codelineno-5-123">123</a></span>
<span class="normal"><a href="#__codelineno-5-124">124</a></span>
<span class="normal"><a href="#__codelineno-5-125">125</a></span>
<span class="normal"><a href="#__codelineno-5-126">126</a></span>
<span class="normal"><a href="#__codelineno-5-127">127</a></span>
<span class="normal"><a href="#__codelineno-5-128">128</a></span>
<span class="normal"><a href="#__codelineno-5-129">129</a></span>
<span class="normal"><a href="#__codelineno-5-130">130</a></span>
<span class="normal"><a href="#__codelineno-5-131">131</a></span>
<span class="normal"><a href="#__codelineno-5-132">132</a></span>
<span class="normal"><a href="#__codelineno-5-133">133</a></span>
<span class="normal"><a href="#__codelineno-5-134">134</a></span>
<span class="normal"><a href="#__codelineno-5-135">135</a></span>
<span class="normal"><a href="#__codelineno-5-136">136</a></span>
<span class="normal"><a href="#__codelineno-5-137">137</a></span>
<span class="normal"><a href="#__codelineno-5-138">138</a></span>
<span class="normal"><a href="#__codelineno-5-139">139</a></span>
<span class="normal"><a href="#__codelineno-5-140">140</a></span>
<span class="normal"><a href="#__codelineno-5-141">141</a></span>
<span class="normal"><a href="#__codelineno-5-142">142</a></span>
<span class="normal"><a href="#__codelineno-5-143">143</a></span>
<span class="normal"><a href="#__codelineno-5-144">144</a></span>
<span class="normal"><a href="#__codelineno-5-145">145</a></span>
<span class="normal"><a href="#__codelineno-5-146">146</a></span>
<span class="normal"><a href="#__codelineno-5-147">147</a></span>
<span class="normal"><a href="#__codelineno-5-148">148</a></span>
<span class="normal"><a href="#__codelineno-5-149">149</a></span>
<span class="normal"><a href="#__codelineno-5-150">150</a></span>
<span class="normal"><a href="#__codelineno-5-151">151</a></span>
<span class="normal"><a href="#__codelineno-5-152">152</a></span>
<span class="normal"><a href="#__codelineno-5-153">153</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>class AliyunBaseStorage(Storage):  # 继承from django.core.files.storage import Storage
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>    &quot;&quot;&quot;
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>    Aliyun OSS2 Storage
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>    &quot;&quot;&quot;
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>    private = False
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>    def __init__(self):
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>        self.kwargs = {}
<a id="__codelineno-5-10" name="__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a>    &#39;&#39;&#39;
<a id="__codelineno-5-12" name="__codelineno-5-12"></a>    &#39; 根据model中定义的upload_to函数返回值，取出文件存储路径
<a id="__codelineno-5-13" name="__codelineno-5-13"></a>    &#39; 默认直接传一个文件名，
<a id="__codelineno-5-14" name="__codelineno-5-14"></a>    &#39; 跟product相关的会传product相关属性过来
<a id="__codelineno-5-15" name="__codelineno-5-15"></a>    &#39;&#39;&#39;
<a id="__codelineno-5-16" name="__codelineno-5-16"></a>    def get_available_name(self, upload_to):
<a id="__codelineno-5-17" name="__codelineno-5-17"></a>        super(AliyunBaseStorage, self).get_available_name(upload_to)
<a id="__codelineno-5-18" name="__codelineno-5-18"></a>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a>    def get_iot_service(self):
<a id="__codelineno-5-20" name="__codelineno-5-20"></a>        kwargs = self.kwargs
<a id="__codelineno-5-21" name="__codelineno-5-21"></a>        if not kwargs.has_key(&#39;product_name&#39;) and not kwargs.has_key(&#39;product_key&#39;):
<a id="__codelineno-5-22" name="__codelineno-5-22"></a>            kwargs.update({ &#39;product_name&#39; : &#39;wastebin&#39; })
<a id="__codelineno-5-23" name="__codelineno-5-23"></a>        return AliyunIoTService(**kwargs)
<a id="__codelineno-5-24" name="__codelineno-5-24"></a>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a>    def get_bucket_read(self):
<a id="__codelineno-5-26" name="__codelineno-5-26"></a>        iot_service = self.get_iot_service()
<a id="__codelineno-5-27" name="__codelineno-5-27"></a>        if self.private:
<a id="__codelineno-5-28" name="__codelineno-5-28"></a>            return iot_service.get_private_bucket(aliyun_sts_type=AliyunSTSType.STSReadOnly)
<a id="__codelineno-5-29" name="__codelineno-5-29"></a>        return iot_service.get_media_bucket(aliyun_sts_type=AliyunSTSType.STSReadOnly)
<a id="__codelineno-5-30" name="__codelineno-5-30"></a>
<a id="__codelineno-5-31" name="__codelineno-5-31"></a>    def get_bucket_write(self):
<a id="__codelineno-5-32" name="__codelineno-5-32"></a>        iot_service = self.get_iot_service()
<a id="__codelineno-5-33" name="__codelineno-5-33"></a>        if self.private:
<a id="__codelineno-5-34" name="__codelineno-5-34"></a>            return iot_service.get_private_bucket(aliyun_sts_type=AliyunSTSType.STSWriteOnly)
<a id="__codelineno-5-35" name="__codelineno-5-35"></a>        return iot_service.get_media_bucket(aliyun_sts_type=AliyunSTSType.STSWriteOnly)
<a id="__codelineno-5-36" name="__codelineno-5-36"></a>
<a id="__codelineno-5-37" name="__codelineno-5-37"></a>    def get_location(self):
<a id="__codelineno-5-38" name="__codelineno-5-38"></a>        return ALIYUN_SERVER_TYPE.lower()
<a id="__codelineno-5-39" name="__codelineno-5-39"></a>
<a id="__codelineno-5-40" name="__codelineno-5-40"></a>    def _clean_name(self, name):
<a id="__codelineno-5-41" name="__codelineno-5-41"></a>        clean_name = posixpath.normpath(name).replace(&#39;\\&#39;, &#39;/&#39;)
<a id="__codelineno-5-42" name="__codelineno-5-42"></a>
<a id="__codelineno-5-43" name="__codelineno-5-43"></a>        if name.endswith(&#39;/&#39;) and not clean_name.endswith(&#39;/&#39;):
<a id="__codelineno-5-44" name="__codelineno-5-44"></a>            return clean_name + &#39;/&#39;
<a id="__codelineno-5-45" name="__codelineno-5-45"></a>        else:
<a id="__codelineno-5-46" name="__codelineno-5-46"></a>            return clean_name
<a id="__codelineno-5-47" name="__codelineno-5-47"></a>
<a id="__codelineno-5-48" name="__codelineno-5-48"></a>    def _normalize_name(self, name):
<a id="__codelineno-5-49" name="__codelineno-5-49"></a>        base_path = force_text(self.get_location())
<a id="__codelineno-5-50" name="__codelineno-5-50"></a>        base_path = base_path.rstrip(&#39;/&#39;)
<a id="__codelineno-5-51" name="__codelineno-5-51"></a>
<a id="__codelineno-5-52" name="__codelineno-5-52"></a>        final_path = urljoin(base_path.rstrip(&#39;/&#39;) + &quot;/&quot;, name)
<a id="__codelineno-5-53" name="__codelineno-5-53"></a>
<a id="__codelineno-5-54" name="__codelineno-5-54"></a>        base_path_len = len(base_path)
<a id="__codelineno-5-55" name="__codelineno-5-55"></a>        if (not final_path.startswith(base_path) or
<a id="__codelineno-5-56" name="__codelineno-5-56"></a>                final_path[base_path_len:base_path_len + 1] not in (&#39;&#39;, &#39;/&#39;)):
<a id="__codelineno-5-57" name="__codelineno-5-57"></a>            raise SuspiciousOperation(&quot;Attempted access to &#39;%s&#39; denied.&quot; %
<a id="__codelineno-5-58" name="__codelineno-5-58"></a>                                      name)
<a id="__codelineno-5-59" name="__codelineno-5-59"></a>        return final_path.lstrip(&#39;/&#39;)
<a id="__codelineno-5-60" name="__codelineno-5-60"></a>
<a id="__codelineno-5-61" name="__codelineno-5-61"></a>    def _get_target_name(self, name):
<a id="__codelineno-5-62" name="__codelineno-5-62"></a>        name = self._normalize_name(self._clean_name(name))
<a id="__codelineno-5-63" name="__codelineno-5-63"></a>        if six.PY2:
<a id="__codelineno-5-64" name="__codelineno-5-64"></a>            name = name.encode(&#39;utf-8&#39;)
<a id="__codelineno-5-65" name="__codelineno-5-65"></a>        return name
<a id="__codelineno-5-66" name="__codelineno-5-66"></a>
<a id="__codelineno-5-67" name="__codelineno-5-67"></a>    def _open(self, name, mode=&#39;rb&#39;):
<a id="__codelineno-5-68" name="__codelineno-5-68"></a>        return AliyunFile(name, self, mode)
<a id="__codelineno-5-69" name="__codelineno-5-69"></a>
<a id="__codelineno-5-70" name="__codelineno-5-70"></a>    def _save(self, name, content):
<a id="__codelineno-5-71" name="__codelineno-5-71"></a>        # 为保证django行为的一致性，保存文件时，应该返回相对于`media path`的相对路径。
<a id="__codelineno-5-72" name="__codelineno-5-72"></a>        target_name = self._get_target_name(name)
<a id="__codelineno-5-73" name="__codelineno-5-73"></a>
<a id="__codelineno-5-74" name="__codelineno-5-74"></a>        content.open()
<a id="__codelineno-5-75" name="__codelineno-5-75"></a>        content_str = b&#39;&#39;.join(chunk for chunk in content.chunks())
<a id="__codelineno-5-76" name="__codelineno-5-76"></a>        self.get_bucket_write().put_object(target_name, content_str)
<a id="__codelineno-5-77" name="__codelineno-5-77"></a>        content.close()
<a id="__codelineno-5-78" name="__codelineno-5-78"></a>
<a id="__codelineno-5-79" name="__codelineno-5-79"></a>        return self._clean_name(name)
<a id="__codelineno-5-80" name="__codelineno-5-80"></a>
<a id="__codelineno-5-81" name="__codelineno-5-81"></a>    def get_file_header(self, name):
<a id="__codelineno-5-82" name="__codelineno-5-82"></a>        name = self._get_target_name(name)
<a id="__codelineno-5-83" name="__codelineno-5-83"></a>        return self.get_bucket_read().head_object(name)
<a id="__codelineno-5-84" name="__codelineno-5-84"></a>
<a id="__codelineno-5-85" name="__codelineno-5-85"></a>    def exists(self, name):
<a id="__codelineno-5-86" name="__codelineno-5-86"></a>        return self.get_bucket_read().object_exists(name)
<a id="__codelineno-5-87" name="__codelineno-5-87"></a>
<a id="__codelineno-5-88" name="__codelineno-5-88"></a>    def size(self, name):
<a id="__codelineno-5-89" name="__codelineno-5-89"></a>        file_info = self.get_file_header(name)
<a id="__codelineno-5-90" name="__codelineno-5-90"></a>        return file_info.content_length
<a id="__codelineno-5-91" name="__codelineno-5-91"></a>
<a id="__codelineno-5-92" name="__codelineno-5-92"></a>    def modified_time(self, name):
<a id="__codelineno-5-93" name="__codelineno-5-93"></a>        file_info = self.get_file_header(name)
<a id="__codelineno-5-94" name="__codelineno-5-94"></a>        return datetime.datetime.fromtimestamp(file_info.last_modified)
<a id="__codelineno-5-95" name="__codelineno-5-95"></a>
<a id="__codelineno-5-96" name="__codelineno-5-96"></a>    def listdir(self, name):
<a id="__codelineno-5-97" name="__codelineno-5-97"></a>        name = self._normalize_name(self._clean_name(name))
<a id="__codelineno-5-98" name="__codelineno-5-98"></a>        if name and name.endswith(&#39;/&#39;):
<a id="__codelineno-5-99" name="__codelineno-5-99"></a>            name = name[:-1]
<a id="__codelineno-5-100" name="__codelineno-5-100"></a>
<a id="__codelineno-5-101" name="__codelineno-5-101"></a>        files = []
<a id="__codelineno-5-102" name="__codelineno-5-102"></a>        dirs = set()
<a id="__codelineno-5-103" name="__codelineno-5-103"></a>
<a id="__codelineno-5-104" name="__codelineno-5-104"></a>        for obj in ObjectIterator(self.get_bucket_read(), prefix=name, delimiter=&#39;/&#39;):
<a id="__codelineno-5-105" name="__codelineno-5-105"></a>            if obj.is_prefix():
<a id="__codelineno-5-106" name="__codelineno-5-106"></a>                dirs.add(obj.key)
<a id="__codelineno-5-107" name="__codelineno-5-107"></a>            else:
<a id="__codelineno-5-108" name="__codelineno-5-108"></a>                files.append(obj.key)
<a id="__codelineno-5-109" name="__codelineno-5-109"></a>
<a id="__codelineno-5-110" name="__codelineno-5-110"></a>        return list(dirs), files
<a id="__codelineno-5-111" name="__codelineno-5-111"></a>
<a id="__codelineno-5-112" name="__codelineno-5-112"></a>    def url(self, name):
<a id="__codelineno-5-113" name="__codelineno-5-113"></a>        name = self._normalize_name(self._clean_name(name))
<a id="__codelineno-5-114" name="__codelineno-5-114"></a>        # name = filepath_to_uri(name) # 这段会导致二次encode
<a id="__codelineno-5-115" name="__codelineno-5-115"></a>        name = name.encode(&#39;utf8&#39;)
<a id="__codelineno-5-116" name="__codelineno-5-116"></a>        # 做这个转化，是因为下面的_make_url会用urllib.quote转码，转码不支持unicode，会报错，在python2环境下。
<a id="__codelineno-5-117" name="__codelineno-5-117"></a>        return self.get_bucket_read()._make_url(self.get_bucket_read().bucket_name, name)
<a id="__codelineno-5-118" name="__codelineno-5-118"></a>
<a id="__codelineno-5-119" name="__codelineno-5-119"></a>    def read(self, name):
<a id="__codelineno-5-120" name="__codelineno-5-120"></a>        pass
<a id="__codelineno-5-121" name="__codelineno-5-121"></a>
<a id="__codelineno-5-122" name="__codelineno-5-122"></a>    def delete(self, name):
<a id="__codelineno-5-123" name="__codelineno-5-123"></a>        name = self._get_target_name(name)
<a id="__codelineno-5-124" name="__codelineno-5-124"></a>        result = self.get_bucket_write().delete_object(name)
<a id="__codelineno-5-125" name="__codelineno-5-125"></a>        if result.status &gt;= 400:
<a id="__codelineno-5-126" name="__codelineno-5-126"></a>            raise AliyunOperationError(result.resp)
<a id="__codelineno-5-127" name="__codelineno-5-127"></a>
<a id="__codelineno-5-128" name="__codelineno-5-128"></a>
<a id="__codelineno-5-129" name="__codelineno-5-129"></a>class AliyunSystemPackageStorage(AliyunBaseStorage):
<a id="__codelineno-5-130" name="__codelineno-5-130"></a>
<a id="__codelineno-5-131" name="__codelineno-5-131"></a>    private = True
<a id="__codelineno-5-132" name="__codelineno-5-132"></a>
<a id="__codelineno-5-133" name="__codelineno-5-133"></a>    def _save(self, name, content):
<a id="__codelineno-5-134" name="__codelineno-5-134"></a>        super(AliyunSystemPackageStorage, self)._save(name, content)
<a id="__codelineno-5-135" name="__codelineno-5-135"></a>        return name
<a id="__codelineno-5-136" name="__codelineno-5-136"></a>
<a id="__codelineno-5-137" name="__codelineno-5-137"></a>    def get_available_name(self, upload_to):
<a id="__codelineno-5-138" name="__codelineno-5-138"></a>        kwargs, name = upload_to
<a id="__codelineno-5-139" name="__codelineno-5-139"></a>        self.kwargs.update(kwargs)
<a id="__codelineno-5-140" name="__codelineno-5-140"></a>
<a id="__codelineno-5-141" name="__codelineno-5-141"></a>        dir_name, file_name = os.path.split(name)
<a id="__codelineno-5-142" name="__codelineno-5-142"></a>        file_root, file_ext = os.path.splitext(file_name)
<a id="__codelineno-5-143" name="__codelineno-5-143"></a>        count = itertools.count(1)
<a id="__codelineno-5-144" name="__codelineno-5-144"></a>        while self.exists(name):
<a id="__codelineno-5-145" name="__codelineno-5-145"></a>            name = os.path.join(dir_name, &quot;%s_%s%s&quot; % (file_root, next(count), file_ext))
<a id="__codelineno-5-146" name="__codelineno-5-146"></a>
<a id="__codelineno-5-147" name="__codelineno-5-147"></a>        return name
<a id="__codelineno-5-148" name="__codelineno-5-148"></a>
<a id="__codelineno-5-149" name="__codelineno-5-149"></a>class OSSSystemPackageStorage(LazyObject):
<a id="__codelineno-5-150" name="__codelineno-5-150"></a>    def _setup(self):
<a id="__codelineno-5-151" name="__codelineno-5-151"></a>        self._wrapped = AliyunSystemPackageStorage()
<a id="__codelineno-5-152" name="__codelineno-5-152"></a>
<a id="__codelineno-5-153" name="__codelineno-5-153"></a>system_package_storage = OSSSystemPackageStorage()
</code></pre></div></td></tr></table></div>
<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Render date of last update -->


<!-- Render date of creation -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render authors -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render committers from GitHub -->


<!-- Render committers from GitLab -->


<!-- Render committers -->


<!-- ---------------------------------------------------------------------- -->

<!-- Determine date of last update -->

  
    
  

  <!-- Determine date of creation -->
  


<!-- Source file information -->

  <aside class="md-source-file">

    <!-- Date of last update -->
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-07-09</span>
  </span>

    

    <!-- Date of creation -->
    

    <!-- Authors (git-authors plugin) -->
    

    <!-- Authors (git-committers plugin) -->
    
  </aside>

<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine feedback configuration -->

  


<!-- Determine whether to show feedback -->


<!-- Was this page helpful? -->

<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Comment system -->





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    
      
      <nav
        class="md-footer__inner md-grid"
        aria-label="页脚"
        
      >

        <!-- Link to previous page -->
        
          
          <a
            href="../orm_query_summary/"
            class="md-footer__link md-footer__link--prev"
            aria-label="上一页: django中ORM查询方法总结"
          >
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                django中ORM查询方法总结
              </div>
            </div>
            
          </a>
        

        <!-- Link to next page -->
        
          
          <a
            href="../../../python_core/coding_standard/"
            class="md-footer__link md-footer__link--next"
            aria-label="下一页: Python编码规范"
          >
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                Python编码规范
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid" style="display: flex; justify-content: center; ">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2017~2024 AstonWang/All Rights Reserved.
    </div>
  
  
</div>

      <font color="#B9B9B9">
      <div class="md-footer-meta__inner md-grid" style="display: flex; justify-content: center; "></div>
        <div id='box11' style="font-size: 14px;"> &nbsp;| &nbsp; 本站已经运行: <span id="timer"></span></div>
      </font>

    <!-- 本站访问量：<script async src="//finicounter.eu.org/finicounter.js"></script> -->
    <!-- <span id="finicount_views"></span>    &nbsp;|&nbsp; -->
    <!-- <footer> -->
      <!-- <a href="https://icp.gov.moe/?keyword=20230640" target="_blank">萌ICP备20230640号</a> -->
    <!-- </footer> -->
  </div>
      </font>
   
    <!-- <font color="#B9B9B9">
      <div class="footer-visit-count" style="display: flex; justify-content: center; align-items: center;">
    本站访问量：<script async src="//finicounter.eu.org/finicounter.js"></script>
    <span id="finicount_views"></span>    &nbsp;|&nbsp;
    <footer>
      <a href="https://icp.gov.moe/?keyword=20230640" target="_blank">萌ICP备20230640号</a>
    </footer>
  </div>
      </font> -->

      <style>
        .footer-visit-count {
            height: fit-content;
            min-height: 55px; /* 根据实际情况调整此高度 */
        }
        </style>
      
    </div>
  </div>
</footer>


<script>
  document.addEventListener('DOMContentLoaded', (event) => {
  function timingTime(){
    let start = '2024-06-28 00:00:00'
    let startTime = new Date(start).getTime()
    let currentTime = new Date().getTime()
    let difference = currentTime - startTime
    let m =  Math.floor(difference / (1000))
    let mm = m % 60  // 秒
    let f = Math.floor(m / 60)
    let ff = f % 60 // 分钟
    let s = Math.floor(f/ 60) // 小时
    let ss = s % 24
    let day = Math.floor(s  / 24 ) // 天数
    return day + "天" + ss + "时" + ff + "分" + mm +'秒'
  }
  setInterval(()=>{
    document.getElementById('timer').innerHTML = timingTime()
  },1000)
  });
</script>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["announce.dismiss", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "navigation.indexes", "content.tabs.link", "content.tooltips", "content.code.copy", "content.action.edit", "content.action.view", "content.code.annotate"], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
    
      <script src="../../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../../../customize/javascripts/extra.js"></script>
      
        <script src="../../../../customize/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.0.2/dist/add-html-label-6e56ed67.min.js"></script>
      
    
    <script src="../../../../assets/javascripts/custom.9458f965.min.js"></script>
  
  </body>
</html>