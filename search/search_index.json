{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Home","text":"<p>AstonWang\u2018s Blog</p> <p> <p> </p> <p> </p>        \u7f16\u7a0b\u662f\u4e00\u79cd\u6280\u827a\uff0c\u4e00\u79cd\u9700\u8981\u7528\u5fc3\u5b66\u4e60\u7684\u6280\u827a         <p></p> <ul> <li>\u4e00\u5207\u770b\u4f3c\u901d\u53bb\u7684\uff0c\u90fd\u4e0d\u66fe\u79bb\u5f00\uff0c\u4f60\u6240\u7ed9\u4e88\u7684\u7231\u4e0e\u6e29\u6696\uff0c\u8ba9\u6211\u6267\u7740\u5730\u5b88\u62a4\u7740\u8fd9\u91cc \uff01    </li> <li>All problems in computer science can be solved by another level of indirection !</li> </ul>"},{"location":"postlist/","title":"\u6587\u7ae0\u5f52\u6863","text":"<p>Info</p> <p>\u6709\u4eba\u8bf4\uff1a\u79cd\u4e00\u9897\u6811\uff0c\u6700\u597d\u7684\u65f6\u95f4\u662f\u5341\u5e74\u524d\uff0c\u5176\u6b21\u662f\u73b0\u5728...</p> 2024202320222021 <ul> <li>2024-08-21 Docker\u955c\u50cf\u65e0\u6cd5\u62c9\u53d6\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848</li> <li>2024-08-18 k8s\u5305\u7ba1\u7406\u5de5\u5177Helm\u7684\u4f7f\u7528</li> <li>2024-08-16 K8S\u96c6\u7fa4\u90e8\u7f72\u6307\u5357(v1.27.9)</li> <li>2024-07-30 \u7504\u9009GPT-AI\u5de5\u5177</li> <li>2024-07-17 k8s\u5b9e\u7528\u5de5\u5177\u4e4bKtConnect </li> <li>2024-06-18 \u5e38\u7528\u63d2\u4ef6\u96c6</li> <li>2024-06-15 \u5e38\u7528\u8f6f\u4ef6\u547d\u4ee4\u901f\u67e5</li> </ul> <ul> <li>2023-08-19 \u5b66\u4e60\u5e94\u8be5\u81ea\u5e95\u5411\u4e0a\uff0c\u8fd8\u662f\u81ea\u9876\u5411\u4e0b </li> <li>2023-08-15 Flink(On YARN)\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-15 Spark(ON YARN\uff09\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-15 YARN\u96c6\u7fa4\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-15 Hadoop\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-14 kafka\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-14 Zookeeper\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-13 Java\u73af\u5883\u5b89\u88c5</li> <li>2023-08-02 dockerignore\u6587\u4ef6</li> <li>2022-07-28 Mongodb\u7684\u5b89\u88c5\u6307\u5357</li> <li>2023-07-20 PostgreSQL\u4e3b\u4ece\u90e8\u7f72</li> <li>2023-07-20 Etcd\u96c6\u7fa4\u90e8\u7f72</li> <li>2023-07-20 Redis\u4e3b\u4ece-\u54e8\u5175\u90e8\u7f72</li> <li>2023-07-20 Nginx\u90e8\u7f72</li> <li>2023-07-19 [\u67e5\u770bDocker\u5bb9\u5668\u542f\u52a8\u7684\u8be6\u7ec6\u547d\u4ee4\u53ca\u53c2\u6570]</li> <li>2023-06-15 \u4e2a\u4eba\u6218\u7565\u4e0a\u7684\u805a\u7126\u548c\u653e\u5f03 </li> <li>2023-05-06 Mac\u4f7f\u7528brew services\u62a5\u9519</li> <li>2023-04-15 gitflow\u7684\u4f7f\u7528</li> <li>2023-04-06  win10\u7684cmd\u4e2d\u64cd\u4f5cgit\u4e2d\u6587\u4e71\u7801\u89e3\u51b3\u65b9\u6cd5</li> <li>2023-04-02 git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5</li> <li>2023-03-08 git\u5b9e\u7528\u914d\u7f6e</li> <li>2023-03-05 git\u4f7f\u7528\u603b\u7ed3</li> <li>2023-02-11 Mac\u5e38\u7528\u5feb\u6377\u952e</li> </ul> <ul> <li>2022-11-10 \u63d0\u95ee\u7684\u667a\u6167</li> <li>2022-10-18 \u5982\u4f55\u9ad8\u6548\u5b66\u4e60\u5f00\u6e90\u9879\u76ee </li> <li>2022-09-26 Jupyter matplotlib\u753b\u56fe\u4e2d\u6587\u5b57\u4f53\u7f3a\u5931</li> <li>2022-08-30 Jupyter\u8fd0\u884casyncio run\u62a5\u9519</li> <li>2022-07-31 \u7504\u9009\u5b9e\u7528\u8f6f\u4ef6</li> <li>2022-07-28 \u591a\u8bed\u8a00\u4e4b\u95f4\u7684RSA\u52a0\u89e3\u5bc6\u95ee\u9898</li> <li>2022-07-08 Conda\u4fee\u6539\u865a\u62df\u73af\u5883\u540d\u5bfc\u81f4\u5f02\u5e38</li> <li>2022-07-06 Centos\u7684yum\u6e90\u8bef\u5220\u89e3\u51b3\u65b9\u6cd5</li> <li>2022-05-01 \u6280\u672f\u4e00\u8a00</li> <li>2022-04-25 docker-compose\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5\u6c47\u603b</li> <li>2022-04-21 docker-compose\u4f7f\u7528\u603b\u7ed3</li> <li>2022-04-15 Dockerfile\u5e38\u7528\u547d\u4ee4\u4e0e\u7f16\u5199\u6307\u5357</li> <li>2022-04-10 docker-registry\u642d\u5efa\u4e0e\u4f7f\u7528</li> <li>2022-04-04 Docker\u5e38\u7528\u547d\u4ee4\u901f\u67e5</li> <li>2022-04-02 Docker\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u6c47\u603b</li> <li>2022-04-01 Docker\u5b9e\u7528\u6280\u5de7 2022-04-01 Docker\u5b89\u88c5\u5378\u8f7d\u6307\u5357</li> <li>2022-03-27 Docker\u67b6\u6784\u548c\u539f\u7406\u5b66\u4e60</li> <li>2022-02-06 \u670d\u52a1\u5668\u78c1\u76d8\u7a7a\u95f4\u6ee1\u7684\u89e3\u51b3\u529e\u6cd5</li> <li>2022-02-03 \u5982\u4f55\u66f4\u806a\u660e\u7684\u505a\u4e8b\u60c5 </li> <li>2022-01-05  window\u73af\u5883\u4e2dpip\u5b89\u88c5\u62a5\u9519</li> <li>2022-01-02 Jupyterhub\u79bb\u7ebf\u90e8\u7f72\u8e29\u5751\u603b\u7ed3</li> </ul> <ul> <li>2021-10-06 RabbitMQ\u4ecb\u7ecd\u548c\u4f7f\u7528</li> <li>2021-08-09 Zabbix\u5e38\u7528\u914d\u7f6e</li> <li>2021-07-12 k8s\u4e2detcd\u6302\u8f7d\u5185\u5b58\u5377\u6b65\u9aa4</li> <li>2021-07-10 k8s\u7684storageclass-nfs\u5b89\u88c5\u548c\u4f7f\u7528</li> <li>2021-07-08 k8s\u7684Dashboard\u5b89\u88c5</li> <li>2021-03-22 k8s\u90e8\u7f72\u5e38\u89c1\u95ee\u9898\u6c47\u603b</li> <li>2021-03-21 k8s\u4e2dyaml\u6587\u4ef6\u7684\u7f16\u5199\u548c\u4f7f\u7528</li> <li>2021-03-18 k8s\u5b9e\u7528\u5c0f\u6280\u5de7</li> <li>2021-03-18 k8s\u6838\u5fc3\u6982\u5ff5</li> <li>2021-03-09 k8s\u5e38\u7528\u547d\u4ee4\u603b\u7ed3</li> <li>2021-03-02 k8s\u96c6\u7fa4\u90e8\u7f72\u6307\u5357(v1.19.4) </li> </ul>"},{"location":"about/profile/","title":"\u4e2a\u4eba\u4e3b\u9875","text":"<p>AstonWang\u2018s Blog</p> <p>\u4e00\u5207\u770b\u4f3c\u901d\u53bb\u7684\uff0c\u90fd\u4e0d\u66fe\u79bb\u5f00\uff0c\u4f60\u6240\u7ed9\u4e88\u7684\u7231\u4e0e\u6e29\u6696\uff0c\u8ba9\u6211\u6267\u7740\u5730\u5b88\u62a4\u5728\u8fd9\u91cc</p> <p>About Site</p> <p>\u56e0\u4e2a\u4eba\u5e73\u65f6\u559c\u6b22\u559d\u5496\u5561\u548c\u542c\u97f3\u4e50\uff0c\u6240\u4ee5\u5c06\u672c\u7ad9\u53d6\u540d\u4e3aIceCoffee[\u7a7a\u8c37\u5e7d\u5170]\uff0cIceCoffee\u7684\u610f\u4e3a\u51b0\u5496\u5561\uff0c\u300a\u7a7a\u8c37\u5e7d\u5170\u300b\u5219\u662f\u53d6\u81ea\u97f3\u4e50\u8bd7\u4eba\u8bb8\u5dcd\u7684\u6b4c\u66f2\uff1b</p> <p>\u56de\u671b\u8d70\u8fc7\u7684\u8fd9\u4e9b\u5e74\uff0c\u65e0\u8bba\u662f\u8d70\u8fc7\u7684\u8def\u8fd8\u662f\u505a\u8fc7\u7684\u4e8b\uff0c\u603b\u4f1a\u5728\u65e0\u58f0\u7684\u65f6\u95f4\u91cc\u88ab\u6162\u6162\u6c89\u6dc0\uff0c\u4e8e\u6b64\u540c\u65f6\uff0c\u8bb0\u5fc6\u4e5f\u5728\u6162\u6162\u7684\u88ab\u65f6\u95f4\u7a00\u91ca\uff0c\u7a81\u7136\u7684\u67d0\u4e2a\u77ac\u95f4\uff0c\u53d1\u73b0\u4ec5\u9760\u8bb0\u5fc6\u53bb\u8bb0\u5f55\u7684\u751f\u6d3b\uff0c\u8fc7\u53bb\u7684\u5f88\u591a\u5149\u5f71\u90fd\u5df2\u6401\u6d45\u5728\u8bb0\u5f55\u91cc\uff0c\u4efb\u51ed\u81ea\u5df1\u600e\u4e48\u52aa\u529b\u56de\u60f3\uff0c\u80fd\u627e\u56de\u7684\u4e5f\u53ea\u6709\u96f6\u661f\u70b9\u70b9...</p> <p>\u4e8e\u662f\u4e4e\uff0c\u51b3\u5b9a\u4e3a\u672a\u6765\u7684\u81ea\u5df1\u505a\u4e00\u70b9\u6709\u8ff9\u53ef\u5faa\u7684\u4e8b\uff0c\u56e0\u6b64\u4fbf\u6709\u4e86\u8fd9\u4e2a\u7ad9\u70b9IceCoffee[\u7a7a\u8c37\u5e7d\u5170]\uff0c\u5f80\u540e\u7684\u65e5\u5b50\u5e0c\u671b\u81ea\u5df1\u80fd\u505a\u4e00\u4e2a\u957f\u671f\u4e3b\u4e49\u8005\uff0c\u575a\u6301\u4e0b\u53bb\uff0c\u7528\u5fc3\u6292\u5199...</p> <p>PS: \u8fd9\u4e00\u6b21\uff0c\u91cd\u65b0\u51fa\u53d1\uff0c\u628a\u4ee5\u524d\u96f6\u788e\u5206\u522b\u5206\u6563\u5728\u6709\u9053\u4e91\u7b14\u8bb0\u3001Notion\u3001\u8bed\u96c0\u4e2d\u5173\u4e8e\u5b66\u4e60\u3001\u5173\u4e8e\u6280\u672f\u3001\u5173\u4e8e\u60f3\u6cd5\u7684\u788e\u7247\u5316\u7684\u5185\u5bb9\uff0c\u91cd\u65b0\u601d\u8003\u603b\u7ed3\u8f93\u51fa\u5230\u6b64\u7ad9\u70b9\uff0c\u5e0c\u671b\u80fd\u5e2e\u52a9\u5230\u5927\u5bb6\uff0c\u4e5f\u5e0c\u671b\u5927\u5bb6\u80fd\u591f\u591a\u591a\u652f\u6301\uff01\uff08\u5982\u679c\u9519\u8bef\uff0c\u6b22\u8fce\u6307\u6b63\uff01\uff09</p> <p></p> <p>About Me</p> <ul> <li> Hey, I'm AstonWang! \u4e00\u4e2a\u5496\u5561\u91cd\u5ea6\u7231\u597d\u8005...</li> <li> \u76ee\u524d\u4e3b\u8981\u4ece\u4e8b\u540e\u7aef+ModelOps\u65b9\u5411\u7684\u5de5\u4f5c...</li> <li> \u559c\u6b22\u7814\u7a76\u65b0\u6280\u672f\uff0c\u70ed\u8877\u5728Github\u95f2\u901b,\u529b\u4e89\u505a\u4e00\u4e2a\u5168\u6cbe\u624b\u827a\u4eba...</li> </ul> <p>About \u4e00\u8a00</p> <ul> <li> \u6211\u8ba4\u6e05\u65f6\u95f4\u7684\u65f6\u5019\uff0c\u53ea\u5269\u4e0b\u4e00\u5bf8\u5149\u9634\uff0c\u8fd9\u662f\u6211\u7684\u4e2a\u4eba\u4e3b\u9875\uff0c\u5230\u5904\u662f\u5c81\u6708\u75d5\u8ff9...</li> <li> \u65e5\u51fa\u672a\u5fc5\u610f\u5473\u7740\u5149\u660e\uff0c\u592a\u9633\u4e5f\u65e0\u975e\u662f\u4e00\u9897\u6668\u661f\uff0c\u53ea\u6709\u5728\u6211\u4eec\u9192\u7740\u65f6\uff0c\u624d\u662f\u771f\u6b63\u7684\u7834\u6653...</li> </ul> Python Go \u6570\u636e\u5206\u6790 \u673a\u5668\u5b66\u4e60 Shell <p> <p> </p> <p> </p> <p>Send Email </p>"},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/","title":"Docker\u67b6\u6784\u548c\u539f\u7406\u5b66\u4e60","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker","title":"Docker\u4ecb\u7ecd","text":"<p>Docker\u5b98\u7f51\u5730\u5740</p> <ul> <li>Docker\u662f\u4e00\u6b3e\u7528Go\u8bed\u8a00\u5f00\u53d1\u7684\uff0c\u7528\u4e8e\u5f00\u53d1\u3001\u8fd0\u884c\u548c\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u653e\u7ba1\u7406\u5e73\u53f0\uff1b\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5728\u5b8c\u5168\u9694\u79bb\u73af\u5883\u4e2d\u8fd0\u884c\u548c\u6253\u5305\u5e94\u7528\u7a0b\u5e8f\u7684\u80fd\u529b\uff0c\u901a\u5e38\u5c06\u8fd9\u4e2a\u9694\u79bb\u7684\u73af\u5883\u6210\u4e3a\u5bb9\u5668\uff1b</li> <li>Docker\u5df2\u7ecf\u63d0\u4f9b\u5de5\u5177\u548c\u7ec4\u4ef6(Docker Client\u3001Docker Daemon\u7b49)\u6765\u7ba1\u7406\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\uff1a</li> <li>\u7531\u4e8e\u5bb9\u5668\u662f\u9694\u79bb\u7684\u73af\u5883\uff0c\u6240\u4ee5\u5176\u5177\u6709\u9694\u79bb\u6027\u548c\u5b89\u5168\u6027\uff1b</li> <li>\u53ef\u4ee5\u5728\u4e00\u4e2a\u5bbf\u4e3b\u673a\u4e0a\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u5bb9\u5668\uff0c\u4e14\u4e0d\u4f1a\u76f8\u4e92\u5e72\u6270\uff1b</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker_1","title":"Docker \u4e3b\u8981\u89e3\u51b3\u7684\u95ee\u9898","text":"<ul> <li>\u4fdd\u8bc1\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883\u7684\u4e00\u81f4\u6027\uff1b</li> <li>\u964d\u4f4e\u914d\u7f6e\u5f00\u53d1\u73af\u5883\u3001\u751f\u4ea7\u73af\u5883\u7684\u590d\u6742\u5ea6\u548c\u6210\u672c\uff1b</li> <li>\u5b9e\u73b0\u7a0b\u5e8f\u7684\u5feb\u901f\u90e8\u7f72\u548c\u5206\u53d1\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker_2","title":"Docker\u548c\u865a\u62df\u673a\u7684\u533a\u522b","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker-cs","title":"Docker\u67b6\u6784 (C/S)","text":"<p>Docker\u662f\u4e00\u79cdC/S\u67b6\u6784\u7684\u4ea7\u54c1\uff08Docker Engine\uff09</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#dockerdocker-engine","title":"Docker\u5f15\u64ce\uff08Docker Engine\uff09","text":"<ul> <li>Server\u7aef\uff1a\u672c\u8d28\u4e0a\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff08docker daemon\uff09,\u4e3b\u8981\u7684\u804c\u8d23\u662f\u8d1f\u8d23\u521b\u5efa\u5e76\u7ba1\u7406Docker\u7684\u5bf9\u8c61\uff08\u955c\u50cf\u3001\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u6570\u636e\u5377\uff09</li> <li>REST API: \u4e00\u5957\u7528\u4e8e\u4e0e\u548cDocker Daemon\u901a\u4fe1\u7684\u63a5\u53e3\u534f\u8bae</li> <li>Client\u7aef\uff1a\u672c\u8d28\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u63a5\u53e3\uff08Command Line Interface\uff09,\u4e3b\u8981\u7684\u804c\u8d23\u662f\u63a5\u6536\u7528\u6237\u5728\u547d\u4ee4\u884c\u7684\u6307\u4ee4\uff0c\u901a\u8fc7\u534f\u8bae\uff08REST API\uff09\u76f4\u63a5\u64cd\u4f5cDocker Daemon\u6267\u884c\u7528\u6237\u64cd\u4f5c\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#_1","title":"\u7ed3\u6784\u56fe","text":"<ul> <li>Docker\u5ba2\u6237\u7aef(Docker Client)</li> <li>Docker\u5ba2\u6237\u7aef(Docker Client)\u662f\u7528\u6237\u4e0eDocker\u8fdb\u884c\u4ea4\u4e92\u7684\u6700\u4e3b\u8981\u65b9\u5f0f\u3002\u5f53\u5728\u7ec8\u7aef\u8f93\u5165docker\u547d\u4ee4\u65f6\uff0c\u5bf9\u5e94\u7684\u5c31\u4f1a\u5728\u670d\u52a1\u7aef\u4ea7\u751f\u5bf9\u5e94\u7684\u4f5c\u7528\uff0c\u5e76\u628a\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002Docker Client\u9664\u4e86\u8fde\u63a5\u672c\u5730\u670d\u52a1\u7aef\uff0c\u901a\u8fc7\u66f4\u6539\u6216\u6307\u5b9aDOCKER_HOST\u8fde\u63a5\u8fdc\u7a0b\u670d\u52a1\u7aef\u3002</li> <li>Docker\u670d\u52a1\u7aef(Docker Server)</li> <li>Docker Daemon\u5176\u5b9e\u5c31\u662fDocker \u7684\u670d\u52a1\u7aef\u3002\u5b83\u8d1f\u8d23\u76d1\u542cDocker API\u8bf7\u6c42(\u5982Docker Client)\u5e76\u7ba1\u7406Docker\u5bf9\u8c61(Docker Objects)\uff0c\u5982\u955c\u50cf\u3001\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u6570\u636e\u5377\u7b49</li> <li>Docker Registries</li> <li>\u4fd7\u79f0Docker\u4ed3\u5e93\uff0c\u4e13\u95e8\u7528\u4e8e\u5b58\u50a8\u955c\u50cf\u7684\u4e91\u670d\u52a1\u73af\u5883.</li> <li>Docker Hub\u5c31\u662f\u4e00\u4e2a\u516c\u6709\u7684\u5b58\u653e\u955c\u50cf\u7684\u5730\u65b9\uff0c\u7c7b\u4f3cGithub\u5b58\u50a8\u4ee3\u7801\u6587\u4ef6\u3002\u540c\u6837\u7684\u4e5f\u53ef\u4ee5\u7c7b\u4f3cGithub\u90a3\u6837\u642d\u5efa\u79c1\u6709\u7684\u4ed3\u5e93\u3002</li> <li>Docker \u5bf9\u8c61(Docker Objects)</li> <li>Image\uff08\u955c\u50cf\uff09\uff1a\u4e00\u4e2aDocker\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u62ec\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u6240\u6709\u4ee3\u7801\u5185\u5bb9\u3001\u4f9d\u8d56\u5e93\u3001\u73af\u5883\u53d8\u91cf\u548c\u914d\u7f6e\u6587\u4ef6\u7b49\u3002</li> <li>Container\uff08\u5bb9\u5668\uff09\uff1a\u955c\u50cf\u88ab\u8fd0\u884c\u8d77\u6765\u540e\u7684\u5b9e\u4f8b\u3002</li> <li>Network\uff08\u7f51\u7edc\uff09\uff1a\u5916\u90e8\u6216\u8005\u5bb9\u5668\u95f4\u5982\u4f55\u4e92\u76f8\u8bbf\u95ee\u7684\u7f51\u7edc\u65b9\u5f0f\uff0c\u5982host\u6a21\u5f0f\u3001bridge\u6a21\u5f0f\u3002</li> <li>Volume\uff08\u6570\u636e\u5377\uff09\uff1a\u5bb9\u5668\u4e0e\u5bbf\u4e3b\u673a\u4e4b\u95f4\u3001\u5bb9\u5668\u4e0e\u5bb9\u5668\u4e4b\u95f4\u5171\u4eab\u5b58\u50a8\u65b9\u5f0f\uff0c\u7c7b\u4f3c\u865a\u62df\u673a\u4e0e\u4e3b\u673a\u4e4b\u95f4\u7684\u5171\u4eab\u6587\u4ef6\u76ee\u5f55\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker_3","title":"Docker \u5e95\u5c42\u6280\u672f\u5b9e\u73b0","text":"<ul> <li>Docker\u4f7f\u7528Go\u8bed\u8a00\u5b9e\u73b0\u3002</li> <li>Docker\u5229\u7528linux\u5185\u6838\u7684\u51e0\u4e2a\u7279\u6027\u6765\u5b9e\u73b0\u529f\u80fd:</li> <li>\u5229\u7528linux\u7684\u547d\u540d\u7a7a\u95f4(Namespaces)</li> <li>\u5229\u7528linux\u63a7\u5236\u7ec4(Control Groups)</li> <li>\u5229\u7528linux\u7684\u8054\u5408\u6587\u4ef6\u7cfb\u7edf(Union File Systems)</li> <li>Docker\u53ea\u80fd\u5728linux\u4e0a\u8fd0\u884c\uff0c\u5728windows\u3001MacOS\u4e0a\u8fd0\u884cDocker\uff0c\u5176\u5b9e\u672c\u8d28\u4e0a\u662f\u501f\u52a9\u4e86\u865a\u62df\u5316\u6280\u672f\uff0c\u7136\u540e\u5728linux\u865a\u62df\u673a\u4e0a\u8fd0\u884c\u7684Docker\u7a0b\u5e8f</li> <li>\u5bb9\u5668\u683c\u5f0f\uff08 Container Format \uff09:</li> <li>Docker Engine\u5c06namespace\u3001cgroups\u3001UnionFS\u8fdb\u884c\u7ec4\u5408\u540e\u7684\u4e00\u4e2apackage\uff0c\u5c31\u662f\u4e00\u4e2a\u5bb9\u5668\u683c\u5f0f(Container Format)\u3002Docker\u901a\u8fc7\u5bf9\u8fd9\u4e2apackage\u4e2d\u7684namespace\u3001cgroups\u3001UnionFS\u8fdb\u884c\u7ba1\u7406\u63a7\u5236\u5b9e\u73b0\u5bb9\u5668\u7684\u521b\u5efa\u548c\u751f\u547d\u5468\u671f\u7ba1\u7406\u3002</li> <li>\u5bb9\u5668\u683c\u5f0f(Container Format)\u6709\u591a\u79cd\uff0c\u5176\u4e2dDocker\u76ee\u524d\u4f7f\u7528\u7684\u5bb9\u5668\u683c\u5f0f\u88ab\u79f0\u4e3alibcontainer</li> <li>Namespaces\uff08\u547d\u540d\u7a7a\u95f4\uff09\uff1a\u4e3aDocker\u5bb9\u5668\u63d0\u4f9b\u64cd\u4f5c\u7cfb\u7edf\u5c42\u9762\u7684\u9694\u79bb</li> <li>\u8fdb\u7a0b\u53f7\u9694\u79bb\uff1a\u6bcf\u4e00\u4e2a\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u53f7\u603b\u662f\u4ece1\u5f00\u59cb\u8d77\u7b97</li> <li>\u7f51\u7edc\u9694\u79bb\uff1a\u5bb9\u5668\u7684\u7f51\u7edc\u4e0e\u5bbf\u4e3b\u673a\u6216\u5176\u4ed6\u5bb9\u5668\u7684\u7f51\u7edc\u662f\u9694\u79bb\u7684\u3001\u5206\u5f00\u7684\uff0c\u4e5f\u5c31\u662f\u76f8\u5f53\u4e8e\u4e24\u4e2a\u7f51\u7edc</li> <li>\u8fdb\u7a0b\u95f4\u901a\u9694\u79bb\uff1a\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u4e0e\u5bbf\u4e3b\u673a\u6216\u5176\u4ed6\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u662f\u4e92\u76f8\u4e0d\u53ef\u89c1\u7684\uff0c\u901a\u4fe1\u9700\u8981\u501f\u52a9\u7f51\u7edc</li> <li>\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u9694\u79bb: \u5bb9\u5668\u62e5\u6709\u81ea\u5df1\u5355\u72ec\u7684\u5de5\u4f5c\u76ee\u5f55</li> <li>\u5185\u6838\u4ee5\u53ca\u7cfb\u7edf\u7248\u672c\u53f7\u9694\u79bb\uff1a\u5bb9\u5668\u67e5\u770b\u5185\u6838\u7248\u672c\u53f7\u6216\u8005\u7cfb\u7edf\u7248\u672c\u53f7\u65f6\uff0c\u67e5\u770b\u7684\u662f\u5bb9\u5668\u7684\uff0c\u800c\u975e\u5bbf\u4e3b\u673a\u7684</li> <li>Control Groups\uff08\u63a7\u5236\u7ec4-cgroups\uff09\uff1a\u4e3aDocker\u5bb9\u5668\u63d0\u4f9b\u786c\u4ef6\u5c42\u9762\u7684\u9694\u79bb</li> <li>\u63a7\u5236\u7ec4\u80fd\u63a7\u5236\u5e94\u7528\u7a0b\u5e8f\u6240\u4f7f\u7528\u7684\u786c\u4ef6\u8d44\u6e90\u3002</li> <li>\u57fa\u4e8e\u8be5\u7279\u6027\uff0c\u63a7\u5236\u7ec4\u5e2e\u52a9docker\u5f15\u64ce\u5c06\u786c\u4ef6\u8d44\u6e90\u5171\u4eab\u7ed9\u5bb9\u5668\u4f7f\u7528\uff0c\u5e76\u4e14\u52a0\u4ee5\u7ea6\u675f\u548c\u9650\u5236\u3002\u5982\u63a7\u5236\u5bb9\u5668\u6240\u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f\u3002</li> <li>Union File Systems\uff08\u8054\u5408\u6587\u4ef6\u7cfb\u7edf--UnionFS\uff09\uff1a\u5229\u7528\u5206\u5c42(layer)\u601d\u60f3\u7ba1\u7406\u955c\u50cf\u548c\u5bb9\u5668</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/","title":"Docker\u5e38\u7528\u547d\u4ee4\u901f\u67e5","text":"<p>docker \u76ee\u5f55\uff1a - /etc/docker/   -----------&gt; docker\u7684\u8ba4\u8bc1\u76ee\u5f55 - /var/lib/docker/ ----------&gt; docker \u7684\u5e94\u7528\u5b89\u88c5\u76ee\u5f55</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_1","title":"\u955c\u50cf\u7ba1\u7406\u547d\u4ee4","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_2","title":"\u641c\u7d22\u955c\u50cf","text":"Bash<pre><code>docker search [iamge_name]\n# eg:\ndocker search centos   \n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_3","title":"\u83b7\u53d6\u955c\u50cf","text":"Bash<pre><code>docker pull [iamge_name]\n# eg:\ndocker pull centos   \n\n# \u5907\u6ce8\uff1a\u83b7\u53d6\u7684\u955c\u50cf\u5b58\u5728\u5728/var/lib/docekr \u76ee\u5f55\u91cc\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_4","title":"\u67e5\u770b\u955c\u50cf","text":"Bash<pre><code># \u67e5\u770b\u6307\u5b9a\u955c\u50cf\ndocker images &lt;image_name&gt;\n\n# \u67e5\u770b\u6240\u6709\u955c\u50cf\ndocker images\ndocker image ls\n\n# \u67e5\u770b\u6240\u6709\u672c\u5730\u7684iamges,\u5305\u62ec\u5df2\u5220\u9664\u7684\u955c\u50cf\u8bb0\u5f55\ndocker images -a\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_5","title":"\u67e5\u770b\u955c\u50cf\u5386\u53f2","text":"Bash<pre><code>docker history [image_name]\n# \u53ef\u4ee5\u67e5\u770b\u6b64\u955c\u50cf\u9ed8\u8ba4\u542f\u52a8\u4e86\u54ea\u4e9b\u547d\u4ee4\uff0c\u6216\u8005\u5c01\u8d26\u4e86\u54ea\u4e9b\u7cfb\u7edf\u5c42\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_6","title":"\u91cd\u547d\u540d\u955c\u50cf","text":"Bash<pre><code>docker tag [old_image]:[old_version] [new_image]:[new_version]\n# eg:\ndocker tag nginx:latest sswang-nginx:v1.0\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_7","title":"\u5220\u9664\u955c\u50cf","text":"Bash<pre><code>docker rmi [image_id/image_name:image_version]\n# eg:\ndocker rmi 3fa822599e10 \n\n# \u5982\u679c\u4e00\u4e2aimage_id\u5b58\u5728\u591a\u4e2a\u540d\u79f0\uff0c\u90a3\u4e48\u5e94\u8be5\u4f7f\u7528name:tag\u7684\u683c\u5f0f\u5220\u9664\u955c\u50cf\u6e05\u9664\u72b6\u6001\u4e3adangling\u7684\u955c\u50cf\ndocker image prune \n\n# \u79fb\u9664\u6240\u6709\u672a\u88ab\u4f7f\u7528\u7684\u955c\u50cf\ndocker image prune -a\n\n# \u5220\u9664\u90e8\u5206\u955c\u50cf\ndocker image prune -a --filter \"until=24h\"\n\n# \u5220\u9664\u5168\u90e8\u7684images\uff0c\ndocker rmi $(docker images -q)\ndocker rmi -f $(docker images -q)  # \u5f3a\u5236\u5220\u9664\u52a0-f\n\n# \u5220\u9664\u6240\u6709\u60ac\u6302\u72b6\u6001\u7684\u955c\u50cf\ndocker image rm $(docker image ls -f dangling=true -q)\ndocker image \n\n# \u5220\u9664untagged images\uff0c\u4e5f\u5c31\u662f\u90a3\u4e9bid\u4e3a\u7684image\u7684\u8bdd\u53ef\u4ee5\u7528\ndocker rmi $(docker images | grep \"^\" | awk \"{print $3}\") \n\n# \u5220\u9664\u6240\u6709\u4e0d\u4f7f\u7528\u7684\u955c\u50cf\ndocker image prune --force --all\u6216\u8005docker image prune -f -a\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_8","title":"\u5b9a\u5236\u955c\u50cf","text":"<ul> <li> <p>\u5f53\u6211\u4eec\u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u7684\u65f6\u5019\uff08\u5982\u679c\u4e0d\u4f7f\u7528\u5377\u7684\u8bdd\uff09\uff0c\u6211\u4eec\u505a\u7684\u4efb\u4f55\u6587\u4ef6\u4fee\u6539\u90fd\u4f1a\u88ab\u8bb0\u5f55\u4e8e\u5bb9\u5668\u5b58\u50a8\u5c42\u91cc\u3002\u800c Docker \u63d0\u4f9b\u4e86\u4e00\u4e2a<code>docker commit</code>\u547d\u4ee4\uff0c\u53ef\u4ee5\u5c06\u5bb9\u5668\u7684\u5b58\u50a8\u5c42\u4fdd\u5b58\u4e0b\u6765\u6210\u4e3a\u955c\u50cf\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f\u5728\u539f\u6709\u955c\u50cf\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u53e0\u52a0\u4e0a\u5bb9\u5668\u7684\u5b58\u50a8\u5c42\uff0c\u5e76\u6784\u6210\u65b0\u7684\u955c\u50cf\u3002\u4ee5\u540e\u6211\u4eec\u8fd0\u884c\u8fd9\u4e2a\u65b0\u955c\u50cf\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u62e5\u6709\u539f\u6709\u5bb9\u5668\u6700\u540e\u7684\u6587\u4ef6\u53d8\u5316\u3002 Bash<pre><code>docker run --name webserver -d -p 80:80 nginx  # \u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\n\ndocker commit \\\n --author \"wss\" \\\n --message \"\u4fee\u6539\u4e86\u5185\u5bb9\" \\\n webserver \\\n nginx:v2 \n\n # webserver \u542f\u52a8\u7684\u5bb9\u5668\n</code></pre></p> </li> <li> <p>\u53ef\u4ee5\u4f7f\u7528docker diff \u67e5\u770b\u4fee\u6539\u7684\u5185\u5bb9</p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_9","title":"\u5bfc\u5165\u5bfc\u51fa\u955c\u50cf\u65b9\u5f0f\u4e00\uff1a","text":"Bash<pre><code>docker save -o [\u5305\u6587\u4ef6] [\u955c\u50cf]   # docker save \u4f1a\u4fdd\u5b58\u955c\u50cf\u7684\u6240\u6709\u5386\u53f2\u8bb0\u5f55\u548c\u5143\u6570\u636e\u4fe1\u606f\ndocker save [\u955c\u50cf 1] ... [\u955c\u50cf n] &gt; [\u5305\u6587\u4ef6]\n# eg:\ndocker save -o nginx.tar sswang-nginx\n\ndocker load &lt; [image.tar_name]  # docker load \u4e0d\u80fd\u6307\u5b9a\u955c\u50cf\u7684\u540d\u79f0\ndocker load --input [image.tar_name]\n# eg:\ndocker load &lt; nginx.tar\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_10","title":"\u5bfc\u5165\u5bfc\u51fa\u955c\u50cf\u65b9\u5f0f\u4e8c","text":"Bash<pre><code># cat \u955c\u50cf\u538b\u7f29\u5305 | docker import \u955c\u50cf\u540d\uff1a\u7248\u672c   \ncat op_docker_img.tar | docker import - op_docker:v1\n\n# \u955c\u50cf\u5bfc\u5165\u5230\u672c\u5730  \ndocker export \u955c\u50cfid &gt; \u672c\u5730\u4fdd\u5b58\u8def\u5f84.tar\n\n# \u672c\u5730\u5bfc\u5165\u955c\u50cf\ndocker import - \u955c\u50cf\u540d &lt; \u672c\u5730\u4fdd\u5b58\u8def\u5f84.tar\n</code></pre> <p>\u4e0a\u4f20\u955c\u50cf\u5230\u4ed3\u5e93 Bash<pre><code>docker login   \ndocker pushdocker push \u955c\u50cf\u540d\uff1atags\n</code></pre></p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_11","title":"\u5bb9\u5668\u7ba1\u7406\u547d\u4ee4","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_12","title":"\u67e5\u770b\u5bb9\u5668","text":"Bash<pre><code>docker ps  # ps \u663e\u793a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\ndocker ps -a  # \u663e\u793a\u6240\u6709\u8fd0\u884c\u8fc7\u7684\u5bb9\u5668\uff0c\u5305\u62ec\u5df2\u7ecf\u4e0d\u8fd0\u884c\u7684\u5bb9\u5668\ndocker container ls  # \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\ndocker ps -aq  # \u5217\u51fa\u6240\u6709\u7684\u5bb9\u5668id\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_13","title":"\u542f\u52a8\uff08\u8fd0\u884c\uff09\u5bb9\u5668","text":"Bash<pre><code>docker run &lt;\u53c2\u6570\uff0c\u53ef\u9009&gt; [docker_image] [\u6267\u884c\u7684\u547d\u4ee4]\ndocker run -d nginx  # -d \u8868\u793a\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u8fd0\u884c\n-i \u8868\u793a\u4ee5\u201c\u4ea4\u4e92\u6a21\u5f0f\u201d\u8fd0\u884c\u5bb9\u5668\n-t \u8868\u793a\u5bb9\u5668\u542f\u52a8\u540e\u4f1a\u8fdb\u5165\u5176\u547d\u4ee4\u884c\u3002\u52a0\u5165\u8fd9\u4e24\u4e2a\u53c2\u6570\u540e\uff0c\u5bb9\u5668\u521b\u5efa\u5c31\u80fd\u767b\u5f55\u8fdb\u53bb\u3002\u5373 \u5206\u914d\u4e00\u4e2a\u4f2a\u7ec8\u7aef\u3002\n--name \u4e3a\u521b\u5efa\u7684\u5bb9\u5668\u547d\u540d\n-v \u8868\u793a\u76ee\u5f55\u6620\u5c04\u5173\u7cfb(\u524d\u8005\u662f\u5bbf\u4e3b\u673a\u76ee\u5f55\uff0c\u540e\u8005\u662f\u6620\u5c04\u5230\u5bbf\u4e3b\u673a\u4e0a\u7684\u76ee\u5f55\uff0c\u5373 \u5bbf\u4e3b\u673a\u76ee\u5f55:\u5bb9\u5668\u4e2d\u76ee\u5f55)\uff0c\u53ef\u4ee5\u4f7f \u7528\u591a\u4e2a-v \u505a\u591a\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6\u6620\u5c04\u3002\u6ce8\u610f:\u6700\u597d\u505a\u76ee\u5f55\u6620\u5c04\uff0c\u5728\u5bbf\u4e3b\u673a\u4e0a\u505a\u4fee\u6539\uff0c\u7136\u540e \u5171\u4eab\u5230\u5bb9\u5668\u4e0a\u3002\n-d \u5728run\u540e\u9762\u52a0\u4e0a-d\u53c2\u6570,\u5219\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b88\u62a4\u5f0f\u5bb9\u5668\u5728\u540e\u53f0\u8fd0\u884c(\u8fd9\u6837\u521b\u5efa\u5bb9\u5668\u540e\u4e0d \u4f1a\u81ea\u52a8\u767b\u5f55\u5bb9\u5668\uff0c\u5982\u679c\u53ea\u52a0-i -t \u4e24\u4e2a\u53c2\u6570\uff0c\u521b\u5efa\u540e\u5c31\u4f1a\u81ea\u52a8\u8fdb\u53bb\u5bb9\u5668)\u3002\n-p \u8868\u793a\u7aef\u53e3\u6620\u5c04\uff0c\u524d\u8005\u662f\u5bbf\u4e3b\u673a\u7aef\u53e3\uff0c\u540e\u8005\u662f\u5bb9\u5668\u5185\u7684\u6620\u5c04\u7aef\u53e3\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a-p \u505a\u591a\u4e2a\u7aef\u53e3\u6620\u5c04\n-e \u4e3a\u5bb9\u5668\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\n--network=host \u8868\u793a\u5c06\u4e3b\u673a\u7684\u7f51\u7edc\u73af\u5883\u6620\u5c04\u5230\u5bb9\u5668\u4e2d\uff0c\u5bb9\u5668\u7684\u7f51\u7edc\u4e0e\u4e3b\u673a\u76f8\u540c\n\n\n\n# \u542f\u52a8\u5df2\u7ecf\u7ec8\u6b62\u7684\u5bb9\u5668\ndocker start [container_id]\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_14","title":"\u5173\u95ed\u5bb9\u5668","text":"Bash<pre><code>docker stop [container_id]\n# eg:\ndocker stop 8005c40a1d16\n\ndocker stop $(docker ps -aq)   # \u505c\u6b62\u6240\u6709\u7684container\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_15","title":"\u5220\u9664\u5bb9\u5668","text":"Bash<pre><code># \u6b63\u5e38\u5220\u9664\u5bb9\u5668\ndocker rm [container_id]\ndocker container prune  # \u5220\u9664\u6240\u6709\u505c\u6b62\u7684\u5bb9\u5668\n# eg:\ndocker rm 1a5f6a0c9443\n\n# \u5f3a\u5236\u5220\u9664\ndocker rm -f [container_id]\n# eg:\ndocker rm -f 8005c40a1d16\n\n# \u5220\u9664\u90e8\u5206\u5bb9\u5668\ndocker container prune --filter \"until=24h\"\n\n# \u6279\u91cf\u5173\u95ed\u5bb9\u5668\ndocker rm -f $(docker ps -aq)\n\n# \u4e00\u952e\u5220\u9664\u6240\u6709\u5df2\u7ecf\u505c\u6b62\u7684\u5bb9\u5668\ndocker container prune\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_16","title":"\u6e05\u9664\u5bb9\u5668","text":"Bash<pre><code>docker system prune  # \u53ef\u4ee5\u7528\u4e8e\u6e05\u7406\u78c1\u76d8\uff0c\u5220\u9664\u5173\u95ed\u7684\u5bb9\u5668\u3001\u65e0\u7528\u7684\u6570\u636e\u5377\u548c\u7f51\u7edc\uff0c\u4ee5\u53ca dangling \u955c\u50cf\uff08\u5373\u65e0 tag \u7684\u955c\u50cf\uff09\u3002\ndocker system prune -a # \u6e05\u7406\u5f97\u66f4\u52a0\u5f7b\u5e95\uff0c\u53ef\u4ee5\u5c06\u6ca1\u6709\u5bb9\u5668\u4f7f\u7528 Docker\u955c\u50cf\u90fd\u5220\u6389\u3002\n\ndocker container prune : \u4ec5\u5220\u9664\u505c\u6b62\u8fd0\u884c\u7684\u5bb9\u5668\u3002\ndocker ps -aq \u540c\u4e0a\n\ndocker rm -f $(docker ps -aq) : \u5220\u9664\u6240\u6709\u5bb9\u5668\uff08\u5305\u62ec\u505c\u6b62\u7684\u3001\u6b63\u5728\u8fd0\u884c\u7684\uff09\u3002\ndocker container rm -f $(docker container ls -aq) : \u540c\u4e0a\u3002\n\ndocker builder prune  # \u5220\u9664 build cache\u3002\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_17","title":"\u67e5\u770b\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5","text":"Bash<pre><code>docker system df \n\n[root@centos801 bluewhale]# docker system df\nTYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE\nImages          14        10        2.671GB   1.267GB (47%)\nContainers      19        17        125.2kB   0B (0%)\nLocal Volumes   0         0         0B        0B\nBuild Cache     0         0         0B        0B\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_18","title":"\u8fdb\u5165\u5bb9\u5668","text":"<p>docker \u5bb9\u5668\u542f\u52a8\u547d\u4ee4\u53c2\u6570\u8be6\u89e3\uff1a --name:\u7ed9\u5bb9\u5668\u5b9a\u4e49\u4e00\u4e2a\u540d\u79f0 -i:\u5219\u8ba9\u5bb9\u5668\u7684\u6807\u51c6\u8f93\u5165\u4fdd\u6301\u6253\u5f00\u3002 -t:\u8ba9docker\u5206\u914d\u4e00\u4e2a\u4f2a\u7ec8\u7aef,\u5e76\u7ed1\u5b9a\u5230\u5bb9\u5668\u7684\u6807\u51c6\u8f93\u5165\u4e0a /bin/bash:\u6267\u884c\u4e00\u4e2a\u547d\u4ee4</p> Bash<pre><code># \u521b\u5efa\u5e76\u8fdb\u5165\u5bb9\u5668\ndocker run --name [container_name] -it [docker_image] /bin/bash\n\n# \u624b\u5de5\u65b9\u5f0f\u8fdb\u5165\u5bb9\u5668\ndocker exec -it \u5bb9\u5668id /bin/bash\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_19","title":"\u9000\u51fa\u5bb9\u5668","text":"Bash<pre><code>exit\nCtrl + D\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_20","title":"\u57fa\u4e8e\u5bb9\u5668\u521b\u5efa\u955c\u50cf","text":"Bash<pre><code>docker commit -m '\u6539\u52a8\u4fe1\u606f' -a \"\u4f5c\u8005\u4fe1\u606f\" [container_id] [new_image:tag]\n# eg:\ndocker commit -m 'mkdir /sswang' -a \"sswang\" d74fff341687 sswang-nginx:v0.2\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_21","title":"\u67e5\u770b\u65e5\u5fd7","text":"Bash<pre><code># \u67e5\u770b\u5bb9\u5668\u8fd0\u884c\u65e5\u5fd7\ndocker logs [\u5bb9\u5668id]\n# eg:\ndocker logs 7c5a24a68f96\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_22","title":"\u67e5\u770b\u4fe1\u606f","text":"Bash<pre><code># \u67e5\u770b\u5bb9\u5668\u5168\u90e8\u4fe1\u606f\ndocker inspect [\u5bb9\u5668id]\n# eg:\ndocker inspect 930f29ccdf8a\n\n# \u67e5\u770b\u5bb9\u5668\u7f51\u7edc\u4fe1\u606f\ndocker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' 930f29ccdf8a\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_23","title":"\u6570\u636e\u7ba1\u7406\u547d\u4ee4","text":"<p><code>\u6570\u636e\u5377</code>\u662f\u4e00\u4e2a\u53ef\u4f9b\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u4f7f\u7528\u7684\u7279\u6b8a\u76ee\u5f55\uff0c\u5b83\u7ed5\u8fc7<code>UFS</code>\uff0c\u53ef\u4ee5\u63d0\u4f9b\u5f88\u591a\u6709\u7528\u7684\u7279\u6027\uff1a</p> <ul> <li>\u6570\u636e\u5377 \u53ef\u4ee5\u5728\u5bb9\u5668\u4e4b\u95f4\u5171\u4eab\u548c\u91cd\u7528</li> <li>\u5bf9 \u6570\u636e\u5377 \u7684\u4fee\u6539\u4f1a\u7acb\u9a6c\u751f\u6548</li> <li>\u5bf9 \u6570\u636e\u5377 \u7684\u66f4\u65b0\uff0c\u4e0d\u4f1a\u5f71\u54cd\u955c\u50cf</li> <li> <p>\u6570\u636e\u5377 \u9ed8\u8ba4\u4f1a\u4e00\u76f4\u5b58\u5728\uff0c\u5373\u4f7f\u5bb9\u5668\u88ab\u5220\u9664</p> <p>\u6570\u636e\u5377 \u7684\u4f7f\u7528\uff0c\u7c7b\u4f3c\u4e8e Linux \u4e0b\u5bf9\u76ee\u5f55\u6216\u6587\u4ef6\u8fdb\u884c mount\uff0c\u955c\u50cf\u4e2d\u7684\u88ab\u6307\u5b9a\u4e3a\u6302\u8f7d\u70b9\u7684\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u4f1a\u9690\u85cf\u6389\uff0c\u80fd\u663e\u793a\u770b\u7684\u662f\u6302\u8f7d\u7684 \u6570\u636e\u5377\u3002</p> </li> <li> <p>\u9009\u62e9 -v \u8fd8\u662f -\u2013mount \u53c2\u6570\uff1a Docker \u65b0\u7528\u6237\u5e94\u8be5\u9009\u62e9<code>--mount</code>\u53c2\u6570\uff0c\u7ecf\u9a8c\u4e30\u5bcc\u7684 Docker \u4f7f\u7528\u8005\u5bf9<code>-v</code>\u6216\u8005\u00a0<code>--volume</code>\u5df2\u7ecf\u5f88\u719f\u6089\u4e86\uff0c\u4f46\u662f\u63a8\u8350\u4f7f\u7528<code>--mount</code>\u53c2\u6570\u3002</p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_24","title":"\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5377\uff1a","text":"Bash<pre><code>docker volume create my-vol\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_25","title":"\u67e5\u770b\u6240\u6709\u7684\u6570\u636e\u5377\uff1a","text":"Bash<pre><code>$ docker volume ls\nlocal               my-vol\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_26","title":"\u5728\u4e3b\u673a\u91cc\u67e5\u770b\u6307\u5b9a\u6570\u636e\u5377\u7684\u4fe1\u606f","text":"Bash<pre><code>$ docker volume inspect my-vol\n[\n    {\n        \"Driver\": \"local\",\n        \"Labels\": {},\n        \"Mountpoint\": \"/var/lib/docker/volumes/my-vol/_data\",\n        \"Name\": \"my-vol\",\n        \"Options\": {},\n        \"Scope\": \"local\"\n    }\n]\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#run","title":"\u5728\u8fd0\u884crun\u547d\u4ee4\u65f6\u6302\u8f7d\u6570\u636e\u5377","text":"<ul> <li>\u4f7f\u7528<code>--mount</code>\u6807\u8bb0\u6765\u5c06 \u6570\u636e\u5377 \u6302\u8f7d\u5230\u5bb9\u5668\u91cc</li> <li>\u5728\u4e00\u6b21<code>docker run</code>\u4e2d\u53ef\u4ee5\u6302\u8f7d\u591a\u4e2a \u6570\u636e\u5377\u3002 Bash<pre><code>$ docker run -d -P \\\n    --name web \\\n    # -v my-vol:/wepapp \\\n    --mount source=my-vol,target=/webapp \\\n    training/webapp \\\n    python app.py\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_27","title":"\u67e5\u770b\u6570\u636e\u5377\u7684\u5177\u4f53\u4fe1\u606f","text":"Bash<pre><code>$ docker inspect web\n...\n\"Mounts\": [\n    {\n        \"Type\": \"volume\",\n        \"Name\": \"my-vol\",\n        \"Source\": \"/var/lib/docker/volumes/my-vol/_data\",\n        \"Destination\": \"/app\",\n        \"Driver\": \"local\",\n        \"Mode\": \"\",\n        \"RW\": true,\n        \"Propagation\": \"\"\n    }\n],\n...\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_28","title":"\u5220\u9664\u6570\u636e\u5377\uff1a","text":"<ul> <li>\u6570\u636e\u5377\u4f5c\u7528\u7528\u6765\u6570\u636e\u6301\u4e45\u5316\uff0c\u72ec\u7acb\u4e8e\u5bb9\u5668\u4e4b\u5916\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u5bb9\u5668\u88ab\u5220\u9664\u800c\u6570\u636e\u5377\u88ab\u5220\u9664\u7684</li> <li> <p>\u5982\u679c\u9700\u8981\u5728\u5220\u9664\u5bb9\u5668\u7684\u540c\u65f6\u79fb\u9664\u6570\u636e\u5377\u3002\u53ef\u4ee5\u5728\u5220\u9664\u5bb9\u5668\u7684\u65f6\u5019\u4f7f\u7528<code>docker rm -v</code>\u8fd9\u4e2a\u547d\u4ee4\u3002 Bash<pre><code>docker volume rm my-vol\n</code></pre></p> </li> <li> <p>\u65e0\u4e3b\u7684\u6570\u636e\u5377\u53ef\u80fd\u4f1a\u5360\u636e\u5f88\u591a\u7a7a\u95f4\uff0c\u8981\u6e05\u7406\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4 Bash<pre><code>docker volume prune\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_29","title":"\u6302\u8f7d\u4e3b\u673a\u76ee\u5f55","text":"<ul> <li>Docker \u65b0\u7528\u6237\u5e94\u8be5\u9009\u62e9 --mount \u53c2\u6570</li> <li>\u7ecf\u9a8c\u4e30\u5bcc\u7684 Docker \u4f7f\u7528\u8005\u5bf9 -v \u6216\u8005 --volume \u5df2\u7ecf\u5f88\u719f\u6089\u4e86</li> <li>\u63a8\u8350\u4f7f\u7528 --mount \u53c2\u6570\u3002</li> <li>\u5907\u6ce8\uff1a</li> <li>-v:\u5982\u679c\u672c\u5730\u76ee\u5f55\u4e0d\u5b58\u5728 Docker \u4f1a\u81ea\u52a8\u4e3a\u4f60\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939</li> <li>--mount \u53c2\u6570\u65f6\u5982\u679c\u672c\u5730\u76ee\u5f55\u4e0d\u5b58\u5728\uff0cDocker \u4f1a\u62a5\u9519\u3002</li> <li> <p>Docker \u6302\u8f7d\u4e3b\u673a\u76ee\u5f55\u7684\u9ed8\u8ba4\u6743\u9650\u662f \u8bfb\u5199\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u589e\u52a0<code>readonly</code>\u6307\u5b9a\u4e3a \u53ea\u8bfb\u3002 Bash<pre><code>$ docker run -d -P \\\n    --name web \\\n    # -v /src/webapp:/opt/webapp \\\n    --mount type=bind,source=/src/webapp,target=/opt/webapp, readonly \\\n    training/webapp \\\n    python app.py\n# \u4e0a\u8ff0\u547d\u4ee4\u7684\u610f\u601d\u662f\u52a0\u8f7d\u4e3b\u673a\u7684 /src/webapp \u76ee\u5f55\u5230\u5bb9\u5668\u7684 /opt/webapp\u76ee\u5f55\n</code></pre></p> </li> <li> <p>\u52a0\u4e86<code>readonly</code>\u4e4b\u540e\uff0c\u5c31\u6302\u8f7d\u4e3a \u53ea\u8bfb \u4e86\u3002\u5982\u679c\u4f60\u5728\u5bb9\u5668\u5185 /opt/webapp \u76ee\u5f55\u65b0\u5efa\u6587\u4ef6\uff0c\u4f1a\u663e\u793a\u5982\u4e0b\u9519\u8bef: Bash<pre><code>/opt/webapp # touch new.txt\ntouch: new.txt: Read-only file system\n\n# \u67e5\u770b\u6570\u636e\u5377\u7684\u5177\u4f53\u5185\u5bb9\n$ docker inspect web\n...\n\"Mounts\": [\n    {\n        \"Type\": \"bind\",\n        \"Source\": \"/src/webapp\",\n        \"Destination\": \"/opt/webapp\",\n        \"Mode\": \"\",\n        \"RW\": true,\n        \"Propagation\": \"rprivate\"\n    }\n],\n</code></pre></p> </li> <li> <p><code>--mount</code>\u6807\u8bb0\u4e5f\u53ef\u4ee5\u4ece\u4e3b\u673a\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u5230\u5bb9\u5668\u4e2d</p> </li> <li>\u5c0f\u6280\u5de7\uff1a\u8bb0\u5f55\u5728\u5bb9\u5668\u8f93\u5165\u8fc7\u7684\u547d\u4ee4\u3002 Bash<pre><code>$ docker run --rm -it \\\n   # -v $HOME/.bash_history:/root/.bash_history \\\n   --mount type=bind,source=$HOME/.bash_history,target=/root/.bash_history \\\n   ubuntu:17.10 \\\n   bash\n\nroot@2affd44b4667:/# history\n1  ls\n2  diskutil list\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_30","title":"\u7f51\u7edc\u7ba1\u7406\u547d\u4ee4","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#bridge","title":"Bridge\u6a21\u5f0f","text":"<p>\u5f53<code>Docker</code>\u8fdb\u7a0b\u542f\u52a8\u65f6\uff0c\u4f1a\u5728\u4e3b\u673a\u4e0a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a<code>docker0</code>\u7684\u865a\u62df\u7f51\u6865\uff0c\u6b64\u4e3b\u673a\u4e0a\u542f\u52a8\u7684<code>Docker</code>\u5bb9\u5668\u4f1a\u8fde\u63a5\u5230\u8fd9\u4e2a\u865a\u62df\u7f51\u6865\u4e0a\u3002\u865a\u62df\u7f51\u6865\u7684\u5de5\u4f5c\u65b9\u5f0f\u548c\u7269\u7406\u4ea4\u6362\u673a\u7c7b\u4f3c\uff0c\u8fd9\u6837\u4e3b\u673a\u4e0a\u7684\u6240\u6709\u5bb9\u5668\u5c31\u901a\u8fc7\u4ea4\u6362\u673a\u8fde\u5728\u4e86\u4e00\u4e2a\u4e8c\u5c42\u7f51\u7edc\u4e2d\u3002\u4ece<code>docker0</code>\u5b50\u7f51\u4e2d\u5206\u914d\u4e00\u4e2a IP \u7ed9\u5bb9\u5668\u4f7f\u7528\uff0c\u5e76\u8bbe\u7f6e docker0 \u7684 IP \u5730\u5740\u4e3a\u5bb9\u5668\u7684\u9ed8\u8ba4\u7f51\u5173\u3002\u5728\u4e3b\u673a\u4e0a\u521b\u5efa\u4e00\u5bf9\u865a\u62df\u7f51\u5361<code>veth pair</code>\u8bbe\u5907\uff0cDocker \u5c06 veth pair \u8bbe\u5907\u7684\u4e00\u7aef\u653e\u5728\u65b0\u521b\u5efa\u7684\u5bb9\u5668\u4e2d\uff0c\u5e76\u547d\u540d\u4e3a<code>eth0</code>\uff08\u5bb9\u5668\u7684\u7f51\u5361\uff09\uff0c\u53e6\u4e00\u7aef\u653e\u5728\u4e3b\u673a\u4e2d\uff0c\u4ee5<code>vethxxx</code>\u8fd9\u6837\u7c7b\u4f3c\u7684\u540d\u5b57\u547d\u540d\uff0c\u5e76\u5c06\u8fd9\u4e2a\u7f51\u7edc\u8bbe\u5907\u52a0\u5165\u5230 docker0 \u7f51\u6865\u4e2d\u3002\u53ef\u4ee5\u901a\u8fc7<code>brctl show</code>\u547d\u4ee4\u67e5\u770b\u3002 <code>bridge</code>\u6a21\u5f0f\u662f docker \u7684\u9ed8\u8ba4\u7f51\u7edc\u6a21\u5f0f\uff0c\u4e0d\u5199<code>\u2013net</code>\u53c2\u6570\uff0c\u5c31\u662f<code>bridge</code>\u6a21\u5f0f\u3002\u4f7f\u7528<code>docker run -p</code>\u65f6\uff0cdocker \u5b9e\u9645\u662f\u5728<code>iptables</code>\u505a\u4e86<code>DNAT</code>\u89c4\u5219\uff0c\u5b9e\u73b0\u7aef\u53e3\u8f6c\u53d1\u529f\u80fd\u3002\u53ef\u4ee5\u4f7f\u7528<code>iptables -t nat -vnL</code>\u67e5\u770b\u3002<code>bridge</code>\u6a21\u5f0f\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6f14\u793a\uff1a Bash<pre><code>$ docker run -tid --net=bridge --name docker_bri1 \\\n             ubuntu-base:v3\n             docker run -tid --net=bridge --name docker_bri2 \\\n             ubuntu-base:v3 \n$ brctl show\n$ docker exec -ti docker_bri1 /bin/bash\n$ ifconfig \u2013a\n$ route \u2013n\n</code></pre> \u5982\u679c\u4f60\u4e4b\u524d\u6709 Docker \u4f7f\u7528\u7ecf\u9a8c\uff0c\u4f60\u53ef\u80fd\u5df2\u7ecf\u4e60\u60ef\u4e86\u4f7f\u7528<code>--link</code>\u53c2\u6570\u6765\u4f7f\u5bb9\u5668\u4e92\u8054\u3002 \u968f\u7740 Docker \u7f51\u7edc\u7684\u5b8c\u5584\uff0c\u5f3a\u70c8\u5efa\u8bae\u5927\u5bb6\u5c06\u5bb9\u5668\u52a0\u5165\u81ea\u5b9a\u4e49\u7684 Docker \u7f51\u7edc\u6765\u8fde\u63a5\u591a\u4e2a\u5bb9\u5668\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 --link \u53c2\u6570\u3002 \u4e0b\u9762\u5148\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Docker \u7f51\u7edc\u3002 Bash<pre><code>$ docker network create -d bridge my-net\n</code></pre> <code>-d</code>\u53c2\u6570\u6307\u5b9a Docker \u7f51\u7edc\u7c7b\u578b\uff0c\u6709 <code>bridge overlay</code>\u3002\u5176\u4e2d overlay \u7f51\u7edc\u7c7b\u578b\u7528\u4e8e Swarm mode\uff0c\u5728\u672c\u5c0f\u8282\u4e2d\u4f60\u53ef\u4ee5\u5ffd\u7565\u5b83\u3002 \u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u5e76\u8fde\u63a5\u5230\u65b0\u5efa\u7684 my-net \u7f51\u7edc Bash<pre><code>$ docker run -it --rm --name busybox1 --network my-net busybox sh\n</code></pre> \u6253\u5f00\u65b0\u7684\u7ec8\u7aef\uff0c\u518d\u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u5e76\u52a0\u5165\u5230 my-net \u7f51\u7edc Bash<pre><code>$ docker run -it --rm --name busybox2 --network my-net busybox sh\n</code></pre> \u518d\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u7ec8\u7aef\u67e5\u770b\u5bb9\u5668\u4fe1\u606f Bash<pre><code>$ docker container ls\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\nb47060aca56b        busybox             \"sh\"                11 minutes ago      Up 11 minutes                           busybox2\n8720575823ec        busybox             \"sh\"                16 minutes ago      Up 16 minutes                           busybox1\n</code></pre> \u4e0b\u9762\u901a\u8fc7 ping \u6765\u8bc1\u660e busybox1 \u5bb9\u5668\u548c busybox2 \u5bb9\u5668\u5efa\u7acb\u4e86\u4e92\u8054\u5173\u7cfb\u3002 \u5728 busybox1 \u5bb9\u5668\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 Bash<pre><code>/ # ping busybox2\nPING busybox2 (172.19.0.3): 56 data bytes\n64 bytes from 172.19.0.3: seq=0 ttl=64 time=0.072 ms\n64 bytes from 172.19.0.3: seq=1 ttl=64 time=0.118 ms\n</code></pre> \u7528 ping \u6765\u6d4b\u8bd5\u8fde\u63a5 busybox2 \u5bb9\u5668\uff0c\u5b83\u4f1a\u89e3\u6790\u6210 172.19.0.3\u3002 \u540c\u7406\u5728 busybox2 \u5bb9\u5668\u6267\u884c ping busybox1\uff0c\u4e5f\u4f1a\u6210\u529f\u8fde\u63a5\u5230\u3002 Bash<pre><code>/ # ping busybox1\nPING busybox1 (172.19.0.2): 56 data bytes\n64 bytes from 172.19.0.2: seq=0 ttl=64 time=0.064 ms\n64 bytes from 172.19.0.2: seq=1 ttl=64 time=0.143 ms\n</code></pre> \u8fd9\u6837\uff0cbusybox1 \u5bb9\u5668\u548c busybox2 \u5bb9\u5668\u5efa\u7acb\u4e86\u4e92\u8054\u5173\u7cfb\u3002 \u5982\u679c\u4f60\u6709\u591a\u4e2a\u5bb9\u5668\u4e4b\u95f4\u9700\u8981\u4e92\u76f8\u8fde\u63a5\uff0c\u63a8\u8350\u4f7f\u7528<code>Docker Compose</code>\u3002</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#host","title":"Host \u6a21\u5f0f","text":"<p>\u5982\u679c\u542f\u52a8\u5bb9\u5668\u7684\u65f6\u5019\u4f7f\u7528<code>host</code>\u6a21\u5f0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5bb9\u5668\u5c06\u4e0d\u4f1a\u83b7\u5f97\u4e00\u4e2a\u72ec\u7acb\u7684<code>Network Namespace</code>\uff0c\u800c\u662f\u548c\u5bbf\u4e3b\u673a\u5171\u7528\u4e00\u4e2a Network Namespace\u3002\u5bb9\u5668\u5c06\u4e0d\u4f1a\u865a\u62df\u51fa\u81ea\u5df1\u7684\u7f51\u5361\uff0c\u914d\u7f6e\u81ea\u5df1\u7684 IP \u7b49\uff0c\u800c\u662f\u4f7f\u7528\u5bbf\u4e3b\u673a\u7684 IP \u548c\u7aef\u53e3\u3002\u4f46\u662f\uff0c\u5bb9\u5668\u7684\u5176\u4ed6\u65b9\u9762\uff0c\u5982\u6587\u4ef6\u7cfb\u7edf\u3001\u8fdb\u7a0b\u5217\u8868\u7b49\u8fd8\u662f\u548c\u5bbf\u4e3b\u673a\u9694\u79bb\u7684\u3002 Host\u6a21\u5f0f\u5982\u4e0b\u56fe\u6240\u793a\uff1a  \u6f14\u793a\uff1a Bash<pre><code>$ docker run -tid --net=host --name docker_host1 ubuntu-base:v3\n$ docker run -tid --net=host --name docker_host2 ubuntu-base:v3\n$ docker exec -ti docker_host1 /bin/bash\n$ docker exec -ti docker_host1 /bin/bash\n$ ifconfig \u2013a\n$ route \u2013n\n</code></pre></p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#container","title":"Container \u6a21\u5f0f","text":"<p>\u8fd9\u4e2a\u6a21\u5f0f\u6307\u5b9a\u65b0\u521b\u5efa\u7684\u5bb9\u5668\u548c\u5df2\u7ecf\u5b58\u5728\u7684\u4e00\u4e2a\u5bb9\u5668\u5171\u4eab\u4e00\u4e2a Network Namespace\uff0c\u800c\u4e0d\u662f\u548c\u5bbf\u4e3b\u673a\u5171\u4eab\u3002\u65b0\u521b\u5efa\u7684\u5bb9\u5668\u4e0d\u4f1a\u521b\u5efa\u81ea\u5df1\u7684\u7f51\u5361\uff0c\u914d\u7f6e\u81ea\u5df1\u7684 IP\uff0c\u800c\u662f\u548c\u4e00\u4e2a\u6307\u5b9a\u7684\u5bb9\u5668\u5171\u4eab IP\u3001\u7aef\u53e3\u8303\u56f4\u7b49\u3002\u540c\u6837\uff0c\u4e24\u4e2a\u5bb9\u5668\u9664\u4e86\u7f51\u7edc\u65b9\u9762\uff0c\u5176\u4ed6\u7684\u5982\u6587\u4ef6\u7cfb\u7edf\u3001\u8fdb\u7a0b\u5217\u8868\u7b49\u8fd8\u662f\u9694\u79bb\u7684\u3002\u4e24\u4e2a\u5bb9\u5668\u7684\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7 lo \u7f51\u5361\u8bbe\u5907\u901a\u4fe1\u3002 Container\u6a21\u5f0f\u793a\u610f\u56fe\uff1a \u6f14\u793a\uff1a Bash<pre><code>$ docker run -tid --net=container:docker_bri1 \\\n              --name docker_con1 ubuntu-base:v3\n$ docker exec -ti docker_con1 /bin/bash\n$ docker exec -ti docker_bri1 /bin/bash\n$ ifconfig \u2013a\n$ route -n\n</code></pre></p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#none","title":"None\u6a21\u5f0f","text":"<p>\u4f7f\u7528<code>none</code>\u6a21\u5f0f\uff0cDocker \u5bb9\u5668\u62e5\u6709\u81ea\u5df1\u7684 Network Namespace\uff0c\u4f46\u662f\uff0c\u5e76\u4e0d\u4e3aDocker \u5bb9\u5668\u8fdb\u884c\u4efb\u4f55\u7f51\u7edc\u914d\u7f6e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a Docker \u5bb9\u5668\u6ca1\u6709\u7f51\u5361\u3001IP\u3001\u8def\u7531\u7b49\u4fe1\u606f\u3002\u9700\u8981\u6211\u4eec\u81ea\u5df1\u4e3a Docker \u5bb9\u5668\u6dfb\u52a0\u7f51\u5361\u3001\u914d\u7f6e IP \u7b49\u3002 None\u6a21\u5f0f\u793a\u610f\u56fe: \u6f14\u793a\uff1a Bash<pre><code>$ docker run -tid --net=none --name \\\n                docker_non1 ubuntu-base:v3\n$ docker exec -ti docker_non1 /bin/bash\n$ ifconfig \u2013a\n$ route -n\n</code></pre></p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_31","title":"\u5e38\u7528\u6e05\u7406\u547d\u4ee4","text":"<ul> <li> <p>\u4e00\u952e\u5220\u9664\u6240\u6709\u5df2\u7ecf\u505c\u6b62\u7684\u5bb9\u5668 Text Only<pre><code>docker container prune\n</code></pre></p> </li> <li> <p>\u5220\u9664\u6240\u6709\u5bb9\u5668\uff08\u5305\u542b\u505c\u6b62\u7684 \u6b63\u5728\u8fd0\u884c\u7684\uff09 Text Only<pre><code>docker rm -f $(docker ps -aq)\ndocker container rm -f $(docker container ls -aq)\n</code></pre></p> </li> <li> <p>\u6240\u6709\u60ac\u6302\u72b6\u6001\u7684\u955c\u50cf Text Only<pre><code>docker image ls -f dangling=true\n</code></pre></p> </li> <li> <p>\u5220\u9664\u6240\u6709\u60ac\u6302\u72b6\u6001\u7684\u955c\u50cf Text Only<pre><code>docker image rm $(docker image ls -f dangling=true -q)\ndocker image prune\n</code></pre></p> </li> <li> <p>\u5220\u9664\u4e0d\u5728\u4f7f\u7528\u7684\u6570\u636e\u96c6 Text Only<pre><code>docker volume rm $(docker volume ls -q)\ndocker volume prune\n</code></pre></p> </li> <li> <p>\u5220\u9664build cache Text Only<pre><code>docker builder prune\n</code></pre></p> </li> <li> <p>\u4e00\u952e\u6e05\u7406 Text Only<pre><code>docker system prune\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#compose","title":"compose\u547d\u4ee4","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#docker-composeyml","title":"docker-compose.yml","text":"Bash<pre><code>version: \"3\"\nservices:\n website:\n   build: ./bluewhale\n   hostname: website\n   command: bash -c \"python3 manage.py collectstatic --no-input &amp;&amp;\n                     python manage.py makemigrations &amp;&amp;\n                     python3 manage.py migrate &amp;&amp;\n                     gunicorn bluewhale.wsgi:application --bind 0.0.0.0:8001\"\n   expose:\n      - \"8001\"\n   volumes:\n      - ./bluewhale:/data/projects/bluewhale_docker/bluewhale:rw # \u6302\u8f7d\u9879\u76ee\u4ee3\u7801\n      - static-volume:/data/projects/bluewhale_docker/bluewhale/static\n      - ./compose/bw_uwsgi:/tmp # \u6302\u8f7duwsgi\u65e5\u5fd7\n   links:\n      - mysqldb\n   depends_on: # \u4f9d\u8d56\u5173\u7cfb\n      - mysqldb\n   networks:\n      - web_network\n      - db_network\n   environment:\n      - DEBUG=False\n   restart: \"on-failure\"\n   tty: true\n   stdin_open: true\n\nnetworks:\n  web_network:\n    driver: bridge\n  db_network:\n    driver: bridge\nvolumes:\n  static-volume:\n  bluewhale_db_vol:\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_32","title":"\u542f\u52a8\u3001\u505c\u6b62\u3001\u5220\u9664","text":"Bash<pre><code>docker-compose up -d  # -d\u8868\u793a\u5b88\u62a4\u8fdb\u7a0b\u542f\u52a8\ndocker-compose stop  \ndocker-compose rm \n\n#\u505c\u6b62\u548c\u5220\u9664\u53ef\u4ee5\u5408\u5e76\u6267\u884c\ndocker-compose stop &amp;&amp; docker-compose rm\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_common_software_install/","title":"Docker\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u6c47\u603b","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_common_software_install/#docker-mysql-","title":"docker-mysql-\u5b89\u88c5","text":"<ul> <li> <p>\u5b89\u88c5\u6307\u4ee4\u548c\u6307\u4ee4\u53c2\u6570\u8bf4\u660e Bash<pre><code>docker run -p 3306:3306 --name mymysql -v $PWD/conf:/etc/mysql/conf.d -v $PWD/logs:/logs -v $PWD/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7\n\n-p 3306:3306  : \u5c06\u5bb9\u5668\u76843306\u7aef\u53e3\u6620\u5c04\u5230\u4e3b\u673a\u76843306\u7aef\u53e3\n\n-v  -v $PWD/logs:/logs  : \u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684conf/my.cnf \u6302\u8f7d\u5230\u5bb9\u5668\u7684/etc/mysql/my.cnf\n\n-v  -v $PWD/data:/var/lib/mysql   : \u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684data\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684/var/lib/mysql\n\n-e  -e MYSQL_ROOT_PASSWORD=123456  : \u521d\u59cb\u5316root\u7528\u6237\u7684\u5bc6\u7801\n</code></pre></p> </li> <li> <p>\u8fdb\u5165\u5bb9\u5668\u914d\u7f6e Bash<pre><code>docker exec -it \u5bb9\u5668id /bin/bash\n\n# \u8fdb\u5165MySQL\nmysql -uroot -p123456;\n\n#\u3000\u5efa\u7acb\u7528\u6237\u5e76\u6388\u6743\nGRANT ALL PRIVILEGES ON  *.* TO 'root'@'%' IDENTIFIED BY 'root123' WITH GRANT OPTION;\n\nflush privileges;\n</code></pre></p> </li> </ul> <ul> <li>https://github.com/Ryan-Miao/docker-yapi</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_detail_commands/","title":"\u67e5\u770bDocker\u5bb9\u5668\u542f\u52a8\u7684\u8be6\u7ec6\u547d\u4ee4\u53ca\u53c2\u6570","text":"<p>\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0c\u524d\u4eba\u5728\u4f7f\u7528docker\u90e8\u7f72\u7684\u670d\u52a1\u65f6\u5e76\u6ca1\u6709\u7559\u4e0b\u8be6\u7ec6\u7684\u90e8\u7f72\u6587\u6863\uff0c\u56e0\u670d\u52a1\u610f\u5916\u6302\u6389\u540e\uff0c\u9700\u8981\u5bf9\u5176\u91cd\u542f\uff0c\u5e26\u7740\u8fd9\u6837\u7684\u9700\u6c42\uff0c\u5c1d\u8bd5\u4e86\u4ee5\u4e0b\u51e0\u79cd\u65b9\u6848\uff0c\u6545\u6b64\u8bb0\u5f55\u603b\u7ed3\u4e00\u4e0b\uff1b</p> <p>\u901a\u8fc7<code>docker ps -a</code>\u627e\u5230\u9700\u8981\u542f\u52a8\u7684\u5bb9\u5668\u540d\u79f0</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_detail_commands/#docker","title":"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 docker\u539f\u751f\u547d\u4ee4","text":"<ul> <li><code>docker inspect &lt;container name&gt;</code> \u67e5\u770b</li> <li>\u53d1\u73b0\u8f93\u51fa\u7684\u4fe1\u606f\u6bd4\u8f83\u8be6\u7ec6\uff0c\u9700\u8981\u6709\u4e00\u5b9a\u7684\u4e0a\u4e0b\u6587\u80cc\u666f\uff0c\u624d\u53ef\u80fd\u77e5\u9053\u5f53\u65f6\u8be5\u670d\u52a1\u5bb9\u5668\u7684\u542f\u52a8\u547d\u4ee4\uff0c\u4f53\u9a8c\u4e0d\u662f\u5f88\u53cb\u597d JSON<pre><code># \u4ee5\u4e0b\u65e5\u5fd7\u4ec5\u5c55\u793a\u4e86\u90e8\u5206\u8f93\u51fa\u5b57\u6bb5\n\n[root@automlgpu4 bluewhale_dev]# docker inspect product-pg-1\n[\n    {\n        \"Id\": \"19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c\",\n        \"Created\": \"2023-07-04T06:56:17.349741798Z\",\n        \"Path\": \"docker-entrypoint.sh\",\n        \"Args\": [\n            \"postgres\"\n        ],\n        \"Image\": \"sha256:1149d285a5f5c4340cefa2211869c3a6b1128ac78974545e0b4fe62d3d0e66a8\",\n        \"ResolvConfPath\": \"/data/docker/containers/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c/resolv.conf\",\n        \"HostnamePath\": \"/data/docker/containers/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c/hostname\",\n        \"HostsPath\": \"/data/docker/containers/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c/hosts\",\n        \"LogPath\": \"/data/docker/containers/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c-json.log\",\n        \"Name\": \"/product-pg-1\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\"\uff0c\n        \"ExecIDs\": null,\n        \"GraphDriver\": {\n            \"Data\": {},\n            \"Name\": \"overlay2\"\n        },\n        \"Config\": {\n            \"Hostname\": \"pg\",\n            \"Domainname\": \"\",\n            \"User\": \"\"\n            },\n            \"Env\": [\n                \"POSTGRES_USER=root\",\n                \"POSTGRES_PASSWORD=2023\",\n                \"TZ=Asia/Shanghai\",\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"LANG=en_US.utf8\",\n                \"PG_MAJOR=14\",\n                \"PG_VERSION=14.1\",\n                \"PG_SHA256=4d3c101ea7ae38982f06bdc73758b53727fb6402ecd9382006fa5ecc7c2ca41f\",\n                \"PGDATA=/var/lib/postgresql/data\"\n            ],\n            \"Cmd\": [\n                \"postgres\"\n            ],\n            \"Image\": \"postgres:14-alpine\",\n            \"Volumes\": {\n                \"/var/lib/postgresql/data\": {}\n            },\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": [\n                \"docker-entrypoint.sh\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"com.docker.compose.config-hash\": \"f7d46590f5568ccc12b47ec4e104686e98fa22e081b8f1b2f57af3670affaef1\",\n                \"com.docker.compose.container-number\": \"1\",\n                \"com.docker.compose.depends_on\": \"\",\n                \"com.docker.compose.image\": \"sha256:1149d285a5f5c4340cefa2211869c3a6b1128ac78974545e0b4fe62d3d0e66a8\",\n                \"com.docker.compose.oneoff\": \"False\",\n                \"com.docker.compose.project\": \"product\"\uff0c\n                \"com.docker.compose.service\": \"pg\",\n                \"com.docker.compose.version\": \"2.13.0\"\n            },\n            \"StopSignal\": \"SIGINT\"\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"e637937788ef9cdb7b6b72b3fff145520cc990ce342bab28fdf27b8da9a87987\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"5432/tcp\": null\n            },\n            \"Networks\": {\n                \"product_back\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": [\n                        \"product-pg-1\",\n                        \"pg\",\n                        \"19ec2701ca0d\"\n                    ],\n                    \"NetworkID\": \"1bf3395d104c6b062e42d96dc58d7fbd32c8c25615a749be04820fb9eb5701ae\",\n                    \"EndpointID\": \"ef940c3a5b9b6ee928c30ac48ece25551e63b3ed840c64eb02ab972c15e692e4\",\n                    \"Gateway\": \"172.25.0.1\",\n                    \"IPAddress\": \"172.25.0.9\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:19:00:09\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_detail_commands/#_1","title":"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528\u7b2c\u4e09\u65b9\u5de5\u5177","text":"<ul> <li><code>get_command_4_run_container</code> </li> <li> <p>\u901a\u8fc7\u641c\u7d22\u5f15\u64ce\u627e\u5230\u8be5\u5de5\u5177\uff0c\u4e8e\u662f\u4fbf\u5f00\u59cb\u5c1d\u8bd5\u9a8c\u8bc1\uff0c\u5177\u4f53\u4f7f\u7528\u5982\u4e0b\uff1b Bash<pre><code># \u62c9\u53d6\u955c\u50cf\ndocker pull cucker/get_command_4_run_container\n\n# \u542f\u52a8\ndocker run --rm -v /var/run/docker.sock:/var/run/docker.sock cucker/get_command_4_run_container [\u5bb9\u5668\u540d\u79f0]/[\u5bb9\u5668ID]\n\n# \u67e5\u770b\u8f93\u51fa\u7ed3\u679c\n</code></pre></p> </li> <li> <p>\u5bf9\u4e8e\u542f\u52a8\u547d\u4ee4\u5c01\u88c5\u6210\u4e00\u4e2abash\u547d\u4ee4\uff0c\u540e\u7eed\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 <code>get_docker_command [\u5bb9\u5668\u540d\u79f0]/[\u5bb9\u5668ID]</code> Bash<pre><code>echo \"alias get_docker_command='docker run --rm -v /var/run/docker.sock:/var/run/docker.sock cucker/get_command_4_run_container'\" &gt;&gt; ~/.bashrc \\\n&amp;&amp; \\\n. ~/.bashrc\n</code></pre></p> </li> <li> <p>\u64cd\u4f5c\u65e5\u5fd7\u5982\u4e0b\uff1a Bash<pre><code>[root@automlgpu4 bluewhale_dev]# docker pull cucker/get_command_4_run_container\nUsing default tag: latest\nlatest: Pulling from cucker/get_command_4_run_container\n8a49fdb3b6a5: Pull complete \n0357922e53aa: Pull complete \n9676b6d4b964: Pull complete \nddbd03ee1059: Pull complete \n877a053836a3: Pull complete \na68de691a1fb: Pull complete \nac3fd788d9e3: Pull complete \n51fb85f07a5a: Pull complete \nDigest: sha256:d3fba2642b3bd30dc8bd7379b18e889c6ad9d76c138ffe870b47b7fb6b9c9e94\nStatus: Downloaded newer image for cucker/get_command_4_run_container:latest\ndocker.io/cucker/get_command_4_run_container:latest\n[root@automlgpu4 bluewhale_dev]# docker run --rm -v /var/run/docker.sock:/var/run/docker.sock cucker/get_command_4_run_container bluewhale_dev-pg-1\ndocker run -d \\\n --name bluewhale_dev-pg-1 \\\n --cgroupns host \\\n --env POSTGRES_PASSWORD=lanjing.2022 \\\n --env TZ=Asia/Shanghai \\\n --env POSTGRES_USER=root \\\n --hostname pg \\\n --label com.docker.compose.config-hash=5a31f16dd78cccc6759eba8ae3183d729013898d96a7b364124fec1efcabf280 \\\n --label com.docker.compose.container-number=1 \\\n --label com.docker.compose.depends_on=\"\" \\\n --label com.docker.compose.image=sha256:1149d285a5f5c4340cefa2211869c3a6b1128ac78974545e0b4fe62d3d0e66a8 \\\n --label com.docker.compose.oneoff=False \\\n --label com.docker.compose.project=bluewhale_dev \\\n --label com.docker.compose.project.config_files=/data/bluewhale/bluewhale_dev/docker-compose.yml \\\n --label com.docker.compose.project.working_dir=/data/bluewhale/bluewhale_dev \\\n --label com.docker.compose.service=pg \\\n --label com.docker.compose.version=2.13.0 \\\n --log-opt max-size=100m \\\n --network=bluewhale_dev_looklook_net \\\n -p 5532:5432/tcp \\\n --stop-signal SIGINT \\\n -v /data/bluewhale/bluewhale_dev/data/pg:/var/lib/postgresql/data:rw \\\n postgres:14-alpine\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/","title":"Docker\u955c\u50cf\u65e0\u6cd5\u62c9\u53d6\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#_1","title":"\u4e8b\u51fa\u6709\u56e0\uff1a","text":"<p>\u81ea2024\u5e745\u6708\u5e956\u6708\u521d\uff0c\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\uff0c\u7a81\u7136\u95f4\u5728\u56fd\u5185\u5c31\u65e0\u6cd5\u6b63\u5e38\u8bbf\u95ee\u548c\u62c9\u53d6Docker\u955c\u50cf\u6e90\uff0c\u9274\u4e8e\u672c\u4eba\u76ee\u524d\u4ece\u4e8b\u4e91\u539f\u751fModelOps\u5de5\u4f5c\uff0c\u51e0\u4e4e\u6bcf\u5929\u90fd\u8981\u548cK8S\u3001Docker\u6253\u4ea4\u9053\uff0c\u955c\u50cf\u65e0\u6cd5\u62c9\u53d6\u4e00\u76f4\u8ba9\u4eba\u5f88\u82e6\u607c\u548c\u65e0\u5948\uff0c\u6240\u4ee5\u5728\u65e5\u5e38\u5de5\u4f5c\u548c\u63a2\u7d22\u4e2d\uff0c\u603b\u7ed3\u6c47\u603b\u4e86\u5982\u4e0b\u53ef\u4ee5\u62c9\u53bb\u7684\u5b98\u65b9\u955c\u50cf\u6e90\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u8fd9\u4e9b\u65b9\u6848\u53ef\u80fd\u4f1a\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u65e0\u6cd5\u4f7f\u7528\uff0c\u82e5\u662f\u5982\u6b64\u8bf7\u89c1\u8c05!</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#_3","title":"\u65b9\u6848\u4e00\uff1a\u5728\u7ebf\u4e0b\u8f7d","text":"<ul> <li>\u6e21\u6e21\u9e1f\u7684\u5bb9\u5668\u955c\u50cf\u5c0f\u7ad9\uff1a\u672c\u7ad9\u4f5c\u8005\u5ba3\u4f20100%\u540c\u6b65\u5b98\u65b9\u955c\u50cf\uff0c\u76ee\u524d\u652f\u6301\u540c\u6b65\u955c\u50cf\u6e90\uff1agcr.io ghcr.io quay.io k8s.gcr.io docker.io registry.k8s.io docker.elastic.co skywalking.docker.scarf.sh \u5355\u4e2a\u955c\u50cf\u5927\u5c0f\u9650\u52362G\uff0c\u5168\u7ad9\u76ee\u524d\u955c\u50cf\u7d22\u5f15\u6570\u91cf4262\uff0c\u540c\u6b651502GB;</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#_4","title":"\u65b9\u6848\u4e8c\uff1a\u5728\u62c9\u53d6\u955c\u50cf\u52a0\u4e0a\u4e0b\u5217\u524d\u7f00","text":"<ul> <li>\u63a8\u8350\u9879\u76ee1\uff1ahttps://github.com/DaoCloud/public-image-mirror</li> <li>\u63a8\u8350\u9879\u76ee2\uff1ahttps://github.com/kubesre/docker-registry-mirrors</li> </ul> \u6e90\u7ad9 \u66ff\u6362\u4e3a cr.l5d.io l5d.kubesre.xyz docker.elastic.co elastic.kubesre.xyz docker.io dhub.kubesre.xyz gcr.io gcr.kubesre.xyz ghcr.io ghcr.kubesre.xyz k8s.gcr.io k8s-gcr.kubesre.xyz registry.k8s.io k8s.kubesre.xyz mcr.microsoft.com mcr.kubesre.xyz nvcr.io nvcr.kubesre.xyz quay.io quay.kubesre.xyz registry.jujucharms.com jujucharms.kubesre.xy <p>Bash<pre><code># \u793a\u4f8b\ndocker pull k8s.kubesre.xyz/ingress-nginx/opentelemetry-1.25.3-v20240813-b93310d\n</code></pre> </p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#issue","title":"\u65b9\u6848\u4e09\uff1a \u901a\u8fc7\u5f00\u6e90\u9879\u76ee\u7684 issue","text":"<p>\u6b64\u65b9\u6848\u9002\u7528\u4e8e\u53ef\u4ee5\u8bbf\u95eeDocker\u955c\u50cf\u4ed3\u5e93\uff0c\u4f46\u65e0\u6cd5\u8bbf\u95ee\u5176\u4ed6\u955c\u50cf\u4ed3\u5e93\uff08registry.k8s.io\u3001gcr.io \u7b49\uff09\u3002</p> <ul> <li>https://github.com/myysophia/hub-mirror</li> </ul> <p>\u4f7f\u7528\u8bf4\u660e\uff1a</p> <ol> <li>\u5728\u8be5\u9879\u76ee\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0issue\uff0c\u4f1a\u51fa\u73b0\u4e00\u4e2a\u6a21\u677f\uff0c\u5c06\u6a21\u677f\u5185\u5bb9\u4fee\u6539\u4e3a\u9700\u8981\u62c9\u53bb\u7684\u955c\u50cf\uff0c\u63d0\u4ea4issue\uff0c\u5c31\u4f1a\u89e6\u53d1github\u7684CI\uff0c\u5c31\u4f1a\u8fdb\u884c\u62c9\u53bb\u62c9\u53d6\u955c\u50cf\uff0c\u5e76\u63a8\u9001\u5230\u516c\u5f00Docker\u4ed3\u5e93\u3002</li> </ol> JSON<pre><code>{\n    \"hub-mirror\": [\n        \"\u4f60\u9700\u8981\u8f6c\u6362\u7684\u955c\u50cf\",\n        \"\u4f60\u9700\u8981\u8f6c\u6362\u7684\u955c\u50cf\",\n        \"\u6bcf\u6b21\u6700\u591a 11 \u4e2a\",\n        \"\u6539\u8fd9\u4e2a json \u5c31\u53ef\u4ee5\u4e86\",\n        \"\u522b\u4e71\u6539\u5185\u5bb9\",\n        \"\u6807\u9898\u968f\u610f\uff0c\u4fdd\u6301\u9635\u578b\u662f\u6700\u597d\u7684\",\n        \"hub-mirror \u6807\u7b7e\u662f\u5fc5\u9009\u7684\",\n        \"......\"\n    ]\n}\n\n####################PS\u6539\u6210\u4e0b\u9762\u8fd9\u4e2a################\n{\n\"hub-mirror\": [\n  \"registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.4.3\"\n  ]\n}\n####################PS\u6539\u6210\u4e0b\u9762\u8fd9\u4e2a################\n</code></pre> <ol> <li>\u7136\u540e\u4ecedocker\u955c\u50cf\u4ed3\u5e93\u62c9\u53bb\u6240\u9700\u8981\u7684\u955c\u50cf </li> </ol>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/","title":"Docker\u5b89\u88c5\u5378\u8f7d\u6307\u5357","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#install-for-centos","title":"Install for CentOS","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#step1","title":"step1: \u5378\u8f7d\u65e7\u7248\u672c","text":"<ul> <li>\u65e7\u7248\u672c\u7684 Docker \u53eb\u00a0<code>docker</code>\u00a0\u6216\u8005\u00a0<code>docker-engine</code>\uff0c\u73b0\u5728\u7684\u7248\u672c\u88ab\u79f0\u4e3a<code>docker-ce</code>\uff0c\u5982\u679c\u4e4b\u524d\u5b89\u88c5\u8fc7\uff0c\u5219\u5148\u5378\u8f7d\u6389\u4e4b\u524d\u7684\u7248\u672c\uff1a Bash<pre><code>$ sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#step2docker-ce","title":"step2:\u5b89\u88c5Docker-CE","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_1","title":"\u79bb\u7ebf\u5b89\u88c5","text":"Bash<pre><code>https://download.docker.com/linux/centos/7/x86_64/stable/Packages/ \n\n# \u5728\u4e0a\u8ff0\u7f51\u5740\u4e2d\u4e0b\u8f7d\u81ea\u5df1\u60f3\u8981\u5b89\u88c5\u7684\u7248\u672c\uff08.rpm\u6587\u4ef6\uff09\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_2","title":"\u5728\u7ebf\u5b89\u88c5","text":"<ul> <li> <p>\u5b89\u88c5\u73af\u5883\u4f9d\u8d56\uff08yum-utils\u63d0\u4f9b\u4e86yum-config-manager\u7684\u4e00\u4e9b\u5b9e\u7528\u7684\u529f\u80fd\uff09 Bash<pre><code>yum install -y yum-utils  device-mapper-persistent-data lvm2\n</code></pre></p> </li> <li> <p>\u6dfb\u52a0stable\u7248\u672c\u7684docker\u4ed3\u5e93 Bash<pre><code>sudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\n</code></pre></p> </li> <li> <p>\u5b89\u88c5\u6700\u65b0\u7248\u672c Bash<pre><code>yum install docker-ce docker-ce-cli containerd.io\n</code></pre></p> </li> <li> <p>\u5b89\u88c5\u6307\u5b9a\u7248\u672c Bash<pre><code># \u67e5\u770b\u53ef\u5b89\u88c5\u7684\u7248\u672c\u547d\u4ee4\nyum list docker-ce --showduplicates | sort -r\n\n# \u4e0a\u8ff0\u547d\u4ee4\u8f93\u51fa\u5982\u4e0b\uff1a\n * updates: mirrors.tuna.tsinghua.edu.cn\nLoading mirror speeds from cached hostfile\nLoaded plugins: fastestmirror, langpacks\n * extras: mirrors.huaweicloud.com\ndocker-ce.x86_64            3:19.03.4-3.el7                     docker-ce-stable\n......\ndocker-ce.x86_64            3:18.09.9-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.8-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.7-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.6-3.el7                     docker-ce-stable\n......\ndocker-ce.x86_64            18.06.0.ce-3.el7                    docker-ce-stable\n\n# eg: \u5b89\u88c5docker-ce-18.09.9\u7248\u672c\nsudo yum -y install docker-ce-18.09.9 docker-ce-cli-18.09.9 containerd.io \n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_3","title":"\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u542f\u52a8","text":"Bash<pre><code>systemctl daemon-reload \n\nsystemctl enable docker  &amp;&amp; systemctl start docker\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_4","title":"\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f","text":"<ul> <li>\u5982\u679c\u51fa\u73b0docker\u7684\u7248\u672c\u4fe1\u606f\u5219\u8868\u793a\u6210\u529f\u5b89\u88c5 Bash<pre><code>docker info \n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_5","title":"\u914d\u7f6e\u6269\u5c55\uff08\u975e\u5fc5\u987b\u4f46\u662f\u5efa\u8bae\uff09","text":"<ul> <li>\u65b0\u5efadocker.json\u7684docker\u914d\u7f6e\u6587\u4ef6 <p>\u83b7\u53d6\u963f\u91cc\u4e91\u63d0\u4f9b\u7684\u955c\u50cf\u52a0\u901f\u670d\u52a1\u7684\u94fe\u63a5\uff1a https://cr.console.aliyun.com/cn-beijing/instances/mirrors\u3002</p> </li> </ul> Bash<pre><code>mkdir -p /etc/docker/\n\nvim /etc/docker/daemon.json\n{\n  \"data-root\": \"/data/software/docker\",\n  \"registry-mirrors\": [\"https://p0rish3o.mirror.aliyuncs.com\"],\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\n</code></pre> <ul> <li>daemon.json\u5185\u5bb9\u8bf4\u660e\uff1a</li> <li>data-root\uff1a \u4fee\u6539\u5b89\u88c5\u76ee\u5f55\uff08\u9ed8\u8ba4\u5b89\u88c5\u76ee\u5f55\u5728/var/lib/docker\u4e0b\uff09<ul> <li>\u53c2\u8003\u94fe\u63a5:  \u8fc1\u79fb Docker \u7684\u9ed8\u8ba4\u5b89\u88c5(\u5b58\u50a8)\u76ee\u5f55</li> </ul> </li> <li>registry-mirrors\uff1a \u914d\u7f6e\u963f\u91cc\u4e91\u4f5c\u4e3a\u955c\u50cf\u52a0\u901f\u670d\u52a1</li> <li>exec-opts\uff1a \u6b64\u914d\u7f6e\u4e3a\u5b89\u88c5k8s\u6240\u5fc5\u987b</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#install-for-ubuntu","title":"Install for Ubuntu","text":"Bash<pre><code># step1. \u66f4\u65b0ubuntu\u7684apt\u6e90\u7d22\u5f15\nsudo apt-get update\n\n# step2: \u5b89\u88c5\u5305\u5141\u8bb8apt\u901a\u8fc7HTTPS\u4f7f\u7528\u4ed3\u5e93\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common gnupg lsb-release\n\n# step3: \u6dfb\u52a0Docker\u5b98\u65b9GPG key\n# curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\n# step4: \u8bbe\u7f6eDocker\u7a33\u5b9a\u7248\u4ed3\u5e93\n# sudo add-apt-repository \\\n#    \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n#    $(lsb_release -cs) \\\n#    stable\"\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n\n# step5: \u6dfb\u52a0\u4ed3\u5e93\u540e\uff0c\u66f4\u65b0apt\u6e90\u7d22\u5f15\nsudo apt-get update\n\n# step7: \u5b89\u88c5\u6700\u65b0\u7248Docker CE\uff08\u793e\u533a\u7248\uff09\nsudo apt-get install docker-ce  docker-ce-cli containerd.io docker-compose-plugin\n\n# step8: \u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f,\u62c9\u53d6\u6210\u529f\u5219\u8868\u793a\u5b89\u88c5\u5b8c\u6210\nsudo docker run hello-world\n</code></pre> <p>\u5907\u6ce8\uff1a\u4e3a\u4e86\u907f\u514d\u6bcf\u6b21\u547d\u4ee4\u90fd\u8f93\u5165sudo\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u7528\u6237\u6743\u9650\uff0c\u6ce8\u610f\u6267\u884c\u540e\u987b\u6ce8\u9500\u91cd\u65b0\u767b\u5f55</p> Bash<pre><code>sudo usermod -a -G docker $USER\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_6","title":"\u5378\u8f7d\u6307\u5357\uff1a","text":"Bash<pre><code>yum list installed | grep docker \n\nyum -y remove  docker.x86_64   docker-client.x86_64  docker-common.x86_64\n\nrm -rf  /var/lib/docker\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/","title":"Docker\u5b9e\u7528\u6280\u5de7","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#load","title":"| \u6279\u91cfload\u955c\u50cf","text":"<p>\u4e00\u952eload\u6587\u4ef6\u5939\u91cc\u7684\u8bf4\u7528\u955c\u50cf</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#_1","title":"\u65b9\u5f0f\u4e00\uff1a","text":"Bash<pre><code> ls -F /data/package_3th/*.tar | awk '{cmd=\"docker load -i \"$0;print(cmd);system(cmd)}'\n # /data/package_3th \u4e3a\u955c\u50cf\u7684\u6587\u4ef6\u5939\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#_2","title":"\u65b9\u5f0f\u4e8c\uff1a","text":"Python<pre><code>import os\nimport sys\n\nif __name__ == \"__main__\":\n    workdir = '/data/package_3th'\n    os.chdir(workdir)\n    files = os.listdir(workdir)\n    for filename in files:\n        print(filename)\n        os.system('docker load -i %s'%filename)\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#runlike","title":"| runlike:\u901a\u8fc7\u5bb9\u5668\u6253\u5370\u51fa\u5bb9\u5668\u7684\u542f\u52a8\u547d\u4ee4","text":"<p>\u5728runlike\u4f20\u9012\u4e00\u4e2a\u5bb9\u5668\u540d\u79f0\uff0c\u5c31\u4f1a\u76f4\u63a5\u6253\u5370\u51fa\u8be5\u5bb9\u5668\u7684\u8fd0\u884c\u547d\u4ee4\u3002<code>runlike</code>\u4f7f\u7528\u8d77\u6765\u975e\u5e38\u65b9\u4fbf\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7<code>pip</code>\u5b89\u88c5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5bb9\u5668\u65b9\u5f0f\u514d\u5b89\u88c5\u4f7f\u7528:</p> Bash<pre><code># pip\n$ pip install runlike\n\n# by docker\n$ alias runlike=\"docker run --rm -v /var/run/docker.sock:/var/run/docker.sock assaflavie/runlike\"\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#whaler-dockerfile","title":"| whaler: \u901a\u8fc7\u955c\u50cf\u5bfc\u51fadockerfile","text":"<p>\u901a\u8fc7\u00a0whaler[2] \u6765\u5feb\u901f\u7684\u5bfc\u51fa. \u8fd9\u91cc\u6211\u4eec\u4f9d\u65e7\u4e0d\u5b89\u88c5\uff0c\u901a\u8fc7\u5bb9\u5668\u5316\u7684\u65b9\u5f0f\u4f7f\u7528dfimage\u547d\u4ee4\uff0c\u4fbf\u4e8e\u4f7f\u7528\uff0c\u6211\u4eec\u5c06\u8be5\u547d\u4ee4\u5199\u6210\u547d\u4ee4\u522b\u540d\uff1a</p> Bash<pre><code># alias export docker image to dockerfile\n$ alias whaler=\"docker run -t --rm -v /var/run/docker.sock:/var/run/docker.sock:ro pegleg/whaler\"\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/","title":"docker-registry\u642d\u5efa\u4e0e\u4f7f\u7528","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#docker-hub","title":"Docker Hub","text":"<ul> <li>\u662fdocker \u5b98\u65b9\u7ef4\u62a4\u7684\u4e00\u4e2a\u516c\u5171\u4ed3\u5e93</li> <li>\u5f53\u62c9\u53d6\u955c\u50cf\u6bd4\u8f83\u6162\u65f6\uff0c\u53ef\u4ee5\u914d\u7f6e\u955c\u50cf\u52a0\u901f\u5668\uff1ahttp://docker-cn.com/</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_1","title":"\u6ce8\u518c","text":"<ul> <li>\u5728 https://cloud.docker.com \u514d\u8d39\u6ce8\u518c\u4e00\u4e2a Docker \u8d26\u53f7\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_2","title":"\u767b\u5f55","text":"<ul> <li>\u901a\u8fc7\u6267\u884c<code>docker login</code>\u547d\u4ee4\u4ea4\u4e92\u5f0f\u7684\u8f93\u5165\u7528\u6237\u540d\u53ca\u5bc6\u7801\u6765\u5b8c\u6210\u5728\u547d\u4ee4\u884c\u754c\u9762\u767b\u5f55 Docker Hub\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_3","title":"\u6ce8\u9500","text":"<ul> <li>\u4f60\u53ef\u4ee5\u901a\u8fc7<code>docker logout</code>\u9000\u51fa\u767b\u5f55\u3002 \u62c9\u53d6\u955c\u50cf</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_4","title":"\u62c9\u53d6\u955c\u50cf","text":"<ul> <li>\u901a\u8fc7<code>docker search</code>\u547d\u4ee4\u6765\u67e5\u627e\u5b98\u65b9\u4ed3\u5e93\u4e2d\u7684\u955c\u50cf</li> <li> <p><code>\u901a\u8fc7docker pull</code>\u547d\u4ee4\u6765\u5c06\u5b83\u4e0b\u8f7d\u5230\u672c\u5730\u3002 Bash<pre><code>$ docker search centos\nNAME                                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\ncentos                                          The official build of CentOS.                   465       [OK]\ntianon/centos                                   CentOS 5 and 6, created using rinse instea...   28\nblalor/centos                                   Bare-bones base CentOS 6.5 image                6                    [OK]\nsaltstack/centos-6-minimal                                                                      6                    [OK]\ntutum/centos-6.4                                DEPRECATED. Use tutum/centos:6.4 instead. ...   5                    [OK]\n</code></pre></p> </li> <li> <p>\u5b98\u65b9\u7684\u955c\u50cf\u8bf4\u660e\u662f\u5b98\u65b9\u9879\u76ee\u7ec4\u521b\u5efa\u548c\u7ef4\u62a4\u7684\uff0c<code>automated</code>\u8d44\u6e90\u5141\u8bb8\u7528\u6237\u9a8c\u8bc1\u955c\u50cf\u7684\u6765\u6e90\u548c\u5185\u5bb9\u3002</p> </li> <li>\u6839\u636e\u662f\u5426\u662f\u5b98\u65b9\u63d0\u4f9b\uff0c\u53ef\u5c06\u955c\u50cf\u8d44\u6e90\u5206\u4e3a\u4e24\u7c7b\u3002</li> <li>\u4e00\u79cd\u662f\u7c7b\u4f3c centos \u8fd9\u6837\u7684\u955c\u50cf\uff0c\u88ab\u79f0\u4e3a\u57fa\u7840\u955c\u50cf\u6216\u6839\u955c\u50cf\u3002\u8fd9\u4e9b\u57fa\u7840\u955c\u50cf\u7531 Docker \u516c\u53f8\u521b\u5efa\u3001\u9a8c\u8bc1\u3001\u652f\u6301\u3001\u63d0\u4f9b\u3002\u8fd9\u6837\u7684\u955c\u50cf\u5f80\u5f80\u4f7f\u7528\u5355\u4e2a\u5355\u8bcd\u4f5c\u4e3a\u540d\u5b57\u3002</li> <li>\u8fd8\u6709\u4e00\u79cd\u7c7b\u578b\uff0c\u6bd4\u5982 tianon/centos \u955c\u50cf\uff0c\u5b83\u662f\u7531 Docker \u7684\u7528\u6237\u521b\u5efa\u5e76\u7ef4\u62a4\u7684\uff0c\u5f80\u5f80\u5e26\u6709\u7528\u6237\u540d\u79f0\u524d\u7f00\u3002\u53ef\u4ee5\u901a\u8fc7\u524d\u7f00<code>username/</code>\u6765\u6307\u5b9a\u4f7f\u7528\u67d0\u4e2a\u7528\u6237\u63d0\u4f9b\u7684\u955c\u50cf\uff0c\u6bd4\u5982 tianon \u7528\u6237\u3002</li> <li>\u5728\u67e5\u627e\u7684\u65f6\u5019\u901a\u8fc7<code>--filter=stars=N</code>\u53c2\u6570\u53ef\u4ee5\u6307\u5b9a\u4ec5\u663e\u793a\u6536\u85cf\u6570\u91cf\u4e3a N \u4ee5\u4e0a\u7684\u955c\u50cf\u3002\u4e0b\u8f7d\u5b98\u65b9 centos \u955c\u50cf\u5230\u672c\u5730\u3002 Bash<pre><code>$ docker pull centos\nPulling repository centos\n0b443ba03958: Download complete\n539c0211cd76: Download complete\n511136ea3c5a: Download complete\n7064731afe90: Download complete\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_5","title":"\u63a8\u9001\u955c\u50cf","text":"<ul> <li>\u767b\u5f55\u540e\u901a\u8fc7<code>docker push</code>\u547d\u4ee4\u6765\u5c06\u81ea\u5df1\u7684\u955c\u50cf\u63a8\u9001\u5230 Docker Hub\u3002 Bash<pre><code>$ docker tag ubuntu:17.10 username/ubuntu:17.10\n$ docker image ls\nREPOSITORY                                               TAG                    IMAGE ID            CREATED             SIZE\nubuntu                                                   17.10                  275d79972a86        6 days ago          94.6MB\nusername/ubuntu                                          17.10                  275d79972a86        6 days ago          94.6MB\n$ docker push username/ubuntu:17.10\n$ docker search username\nNAME                      DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nusername/ubuntu\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_6","title":"\u79c1\u6709\u4ed3\u5e93","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_7","title":"\u642d\u5efa\u6d41\u7a0b","text":"<ul> <li> <p><code>docker-registry</code>\u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u4e8e\u6784\u5efa\u79c1\u6709\u7684\u955c\u50cf\u4ed3\u5e93\u3002\u672c\u6587\u5185\u5bb9\u57fa\u4e8e docker-registry v2.x \u7248\u672c\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u83b7\u53d6\u5b98\u65b9 registry \u955c\u50cf\u6765\u8fd0\u884c\u3002 Bash<pre><code>$ docker run -d -p 30001:5000 --restart=always --name registry docker.io/registry\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\uff1a Bash<pre><code>vim /etc/docker/daemon.json\n\n{\n    \"registry-mirrors\":[\"https://docker.mirrors.ustc.edu.cn\"],\n    \"insecure-registries\":[\"127.0.0.1:30001\"]  # \u670d\u52a1\u5668ip\u548c\u7aef\u53e3\n}\n</code></pre></p> </li> <li> <p>\u91cd\u542fdocker\u670d\u52a1 Bash<pre><code>systemctl restart docker\n</code></pre></p> </li> <li> <p>\u8fd9\u5c06\u4f7f\u7528\u5b98\u65b9\u7684<code>registry</code>\u955c\u50cf\u6765\u542f\u52a8\u79c1\u6709\u4ed3\u5e93\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed3\u5e93\u4f1a\u88ab\u521b\u5efa\u5728\u5bb9\u5668\u7684<code>/var/lib/registry</code>\u76ee\u5f55\u4e0b\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7 -v \u53c2\u6570\u6765\u5c06\u955c\u50cf\u6587\u4ef6\u5b58\u653e\u5728\u672c\u5730\u7684\u6307\u5b9a\u8def\u5f84\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\u5c06\u4e0a\u4f20\u7684\u955c\u50cf\u653e\u5230\u672c\u5730\u7684 /opt/data/registry \u76ee\u5f55\u3002 Bash<pre><code>$ docker run -d -p 30001:5000 --restart=always -v /opt/data/registry:/var/lib/registry docker.io/registry\n</code></pre></p> </li> <li> <p>\u8bbf\u95ee\uff1ahttp://127.0.0.1:30001/v2/_catalog JSON<pre><code>{\n\"repositories\": [\n]\n}\n</code></pre></p> </li> <li> <p>\u767b\u5f55 Bash<pre><code>docker login -u \u7528\u6237\u540d -p \u5bc6\u7801\n</code></pre></p> </li> <li> <p>\u4e0a\u4f20\u955c\u50cf\u5230\u4ed3\u5e93 Bash<pre><code>docker tag frontend_docker:v1 127.0.0.1:30001/frontend_docker:v1  # \u6253\u6807\u7b7e\ndocker push 127.0.0.1:30001/frontend_docker:v1  \n\n{\n\"repositories\": [\n\"frontend_docker\"\n]\n}\n</code></pre></p> </li> <li> <p>\u62c9\u53d6\u955c\u50cf Bash<pre><code>docker pull 127.0.0.1:30001/frontend_docker:v1\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_8","title":"\u5728\u79c1\u6709\u4ed3\u5e93\u4e0a\u4f20\u3001\u641c\u7d22\u3001\u4e0b\u8f7d\u955c\u50cf","text":"<ul> <li> <p>\u521b\u5efa\u597d\u79c1\u6709\u4ed3\u5e93\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528<code>docker tag</code>\u6765\u6807\u8bb0\u4e00\u4e2a\u955c\u50cf\uff0c\u7136\u540e\u63a8\u9001\u5b83\u5230\u4ed3\u5e93\u3002\u4f8b\u5982\u79c1\u6709\u4ed3\u5e93\u5730\u5740\u4e3a 127.0.0.1:5000\u3002\u5148\u5728\u672c\u673a\u67e5\u770b\u5df2\u6709\u7684\u955c\u50cf\u3002 Text Only<pre><code>$ docker image ls\nREPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB\n</code></pre></p> </li> <li> <p>\u4f7f\u7528<code>docker tag</code>\u5c06 ubuntu:latest \u8fd9\u4e2a\u955c\u50cf\u6807\u8bb0\u4e3a 127.0.0.1:5000/ubuntu:latest\u3002 </p> </li> <li> <p>\u683c\u5f0f\u4e3a docker tag IMAGE[:TAG] [REGISTRY_HOST[:REGISTRY_PORT]/]REPOSITORY[:TAG] Text Only<pre><code>$ docker tag ubuntu:latest 127.0.0.1:5000/ubuntu:latest\n$ docker image ls\nREPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB\n127.0.0.1:5000/ubuntu:latest      latest              ba5877dc9bec        6 weeks ago         192.7 MB\n</code></pre></p> </li> <li> <p>\u4f7f\u7528<code>docker push</code>\u4e0a\u4f20\u6807\u8bb0\u7684\u955c\u50cf\u3002 Text Only<pre><code>$ docker push 127.0.0.1:5000/ubuntu:latest\nThe push refers to repository [127.0.0.1:5000/ubuntu]\n373a30c24545: Pushed\na9148f5200b0: Pushed\ncdd3de0940ab: Pushedfc56279bbb33: Pushed\nb38367233d37: Pushed\n2aebd096e0e2: Pushed\nlatest: digest: sha256:fe4277621f10b5026266932ddf760f5a756d2facd505a94d2da12f4f52f71f5a size: 1568\n</code></pre></p> </li> <li> <p>\u7528<code>curl</code>\u67e5\u770b\u4ed3\u5e93\u4e2d\u7684\u955c\u50cf\u3002 Text Only<pre><code>$ curl 127.0.0.1:5000/v2/_catalog\n{\"repositories\":[\"ubuntu\"]}\n</code></pre></p> </li> <li> <p>\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230 {\"repositories\":[\"ubuntu\"]}\uff0c\u8868\u660e\u955c\u50cf\u5df2\u7ecf\u88ab\u6210\u529f\u4e0a\u4f20\u4e86\u3002</p> </li> <li>\u4ece\u79c1\u6709\u4ed3\u5e93\u4e2d\u4e0b\u8f7d\u8fd9\u4e2a\u955c\u50cf\u3002 Text Only<pre><code>$ docker image rm 127.0.0.1:5000/ubuntu:latest\n$ docker pull 127.0.0.1:5000/ubuntu:latest\nPulling repository 127.0.0.1:5000/ubuntu:latest\nba5877dc9bec: Download complete\n511136ea3c5a: Download complete\n9bad880da3d2: Download complete\n25f11f5fb0cb: Download complete\nebc34468f71d: Download complete\n2318d26665ef: Download complete\n$ docker image ls\nREPOSITORY                         TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\n127.0.0.1:5000/ubuntu:latest       latest              ba5877dc9bec        6 weeks ago         192.7 MB\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_9","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528 127.0.0.1:5000 \u4f5c\u4e3a\u4ed3\u5e93\u5730\u5740\uff0c\u6bd4\u5982\u60f3\u8ba9\u672c\u7f51\u6bb5\u7684\u5176\u4ed6\u4e3b\u673a\u4e5f\u80fd\u628a\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u4ed3\u5e93\u3002\u4f60\u5c31\u5f97\u628a\u4f8b\u5982 192.168.199.100:5000 \u8fd9\u6837\u7684\u5185\u7f51\u5730\u5740\u4f5c\u4e3a\u79c1\u6709\u4ed3\u5e93\u5730\u5740\uff0c\u8fd9\u65f6\u4f60\u4f1a\u53d1\u73b0\u65e0\u6cd5\u6210\u529f\u63a8\u9001\u955c\u50cf\u3002</li> <li>\u8fd9\u662f\u56e0\u4e3a Docker \u9ed8\u8ba4\u4e0d\u5141\u8bb8\u975e HTTPS \u65b9\u5f0f\u63a8\u9001\u955c\u50cf\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 Docker \u7684\u914d\u7f6e\u9009\u9879\u6765\u53d6\u6d88\u8fd9\u4e2a\u9650\u5236\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#ubuntu-1404-debian-7-wheezy","title":"Ubuntu 14.04, Debian 7 Wheezy","text":"<ul> <li> <p>\u5bf9\u4e8e\u4f7f\u7528 upstart \u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u7f16\u8f91<code>/etc/default/docker</code>\u6587\u4ef6\uff0c\u5728\u5176\u4e2d\u7684<code>DOCKER_OPTS</code>\u4e2d\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a Text Only<pre><code>DOCKER_OPTS=\"--registry-mirror=https://registry.docker-cn.com --insecure-registries=192.168.199.100:5000\"\n</code></pre></p> </li> <li> <p>\u91cd\u65b0\u542f\u52a8\u670d\u52a1: Text Only<pre><code>$ sudo service docker restart\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#ubuntu-1604-debian-8-centos-7","title":"Ubuntu 16.04+, Debian 8+, centos 7","text":"<ul> <li>\u5bf9\u4e8e\u4f7f\u7528 systemd \u7684\u7cfb\u7edf\uff0c\u8bf7\u5728<code>/etc/docker/daemon.json</code>\u4e2d\u5199\u5165\u5982\u4e0b\u5185\u5bb9\uff08\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u8bf7\u65b0\u5efa\u8be5\u6587\u4ef6\uff09 Text Only<pre><code>{\n  \"registry-mirror\": [\n    \"https://registry.docker-cn.com\"\n  ],\n  \"insecure-registries\": [\n    \"192.168.199.100:5000\"\n  ]\n}   \n</code></pre> <p>\u6ce8\u610f\uff1a\u8be5\u6587\u4ef6\u5fc5\u987b\u7b26\u5408<code>json</code>\u89c4\u8303\uff0c\u5426\u5219 Docker \u5c06\u4e0d\u80fd\u542f\u52a8\u3002</p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_10","title":"\u5176\u4ed6","text":"<p>\u5bf9\u4e8e Docker for Windows\u3001Docker for Mac \u5728\u8bbe\u7f6e\u4e2d\u7f16\u8f91<code>daemon.json</code>\u589e\u52a0\u548c\u4e0a\u8fb9\u4e00\u6837\u7684\u5b57\u7b26\u4e32\u5373\u53ef\u3002</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/","title":"Dockerfile\u5e38\u7528\u547d\u4ee4\u4e0e\u7f16\u5199\u6307\u5357","text":"<p>Dockerfile\u4e2d\u7684\u6bcf\u4e00\u4e2a\u6307\u4ee4\u90fd\u4f1a\u5efa\u7acb\u4e00\u5c42\u955c\u50cf</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#from","title":"FROM\uff1a\u6307\u5b9a\u57fa\u7840\u955c\u50cf","text":"<ul> <li>\u5728dockerfile\u6587\u4ef6\u4e2d\u5fc5\u987b\u662f\u7b2c\u4e00\u6761\u547d\u4ee4</li> <li>\u53ef\u4ee5\u4f7f\u7528Docker store\u4e0a\u5b98\u65b9\u955c\u50cf\uff08nginx\u3001redis\u3001mongo\u3001mysql\u3001httpd\u3001php\u3001tomcat \u7b49\uff09</li> <li>\u53ef\u4ee5\u4f7f\u7528\u65b9\u4fbf\u5f00\u53d1\uff0c\u6784\u5efa\uff0c\u8fd0\u884c\u5404\u79cd\u8bed\u8a00\u7684\u5e94\u7528\u955c\u50cf\uff08node\u3001openjdk\u3001python\u3001ruby\u3001golang\u00a0\u7b49\uff09</li> <li>\u53ef\u4ee5\u4f7f\u7528\u66f4\u4e3a\u57fa\u7840\u7684\u64cd\u4f5c\u7cfb\u7edf\u955c\u50cf\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u7684\u8f6f\u4ef6\u5e93\u63d0\u4f9b\u4e86\u66f4\u5e7f\u9614\u7684\u6269\u5c55\u7a7a\u95f4\uff08ubuntu\u3001debian\u3001centos\u3001fedora\u3001alpine \u7b49\uff09</li> <li>\u53ef\u4ee5\u4f7f\u7528\u7a7a\u767d\u955c\u50cf\uff08scratch\uff09,\u4e00\u822cgo\u5f00\u53d1\u7684\u4f7f\u7528\u6bd4\u8f83\u591a Docker<pre><code>FROM nginx\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#run","title":"RUN\uff1a\u6267\u884c\u547d\u4ee4","text":"<ul> <li>RUN \u7684\u683c\u5f0f\u6709\u4e24\u79cd\uff1a</li> <li> <p>shell\u683c\u5f0f\uff1aRUN &lt;\u547d\u4ee4&gt;\uff0c \u548c\u5728\u547d\u4ee4\u884c\u76f4\u63a5\u8f93\u5165\u547d\u4ee4\u7684\u6548\u679c\u4e00\u6837\u3002 Docker<pre><code>RUN echo '&lt;h1&gt;Hello, Docker!&lt;/h1&gt;' &gt; /usr/share/nginx/html/index.html\n</code></pre></p> </li> <li> <p>exec\u683c\u5f0f\uff1aRUN [\"\u53ef\u6267\u884c\u6587\u4ef6\", \"\u53c2\u65701\", \"\u53c2\u65702\"]\uff0c\u8fd9\u66f4\u50cf\u662f\u51fd\u6570\u8c03\u7528\u4e2d\u7684\u683c\u5f0f Docker<pre><code>FROM debian:jessie\nRUN apt-get update\nRUN apt-get install -y gcc libc6-dev make\nRUN wget -O redis.tar.gz \"http://download.redis.io/releases/redis-3.2.5.tar.gz\"\nRUN mkdir -p /usr/src/redis\nRUN tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1\nRUN make -C /usr/src/redis\nRUN make -C /usr/src/redis install\n# \u4e0a\u8ff0\u8fd9\u79cd\u5199\u6cd5\uff0c\u521b\u5efa\u4e867\u5c42\u955c\u50cf\u3002\u901a\u5e38\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u662f\u6ca1\u6709\u5fc5\u8981\u7684\uff0c\u53ef\u4ee5\u4f18\u5316\u4e3a\u4e0b\u5217\u5f62\u5f0f\nFROM debian:jessie\nRUN buildDeps='gcc libc6-dev make' \\\n&amp;&amp; apt-get update \\\n&amp;&amp; apt-get install -y $buildDeps \\\n&amp;&amp; wget -O redis.tar.gz \"http://download.redis.io/releases/redis-3.2.5.tar.gz\" \\\n&amp;&amp; mkdir -p /usr/src/redis \\\n&amp;&amp; tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1 \\\n&amp;&amp; make -C /usr/src/redis \\\n&amp;&amp; make -C /usr/src/redis install \\\n&amp;&amp; rm -rf /var/lib/apt/lists/* \\\n&amp;&amp; rm redis.tar.gz \\\n&amp;&amp; rm -r /usr/src/redis \\\n&amp;&amp; apt-get purge -y --auto-remove $buildDeps\n\n# \u6b64\u65f6\u53ea\u521b\u5efa\u4e86\u4e00\u5c42\u955c\u50cf\uff0c\u8282\u7701\u4e86\u7a7a\u95f4\uff0c\u52a0\u5feb\u4e86\u5236\u4f5c\u955c\u50cf\u7684\u901f\u5ea6\uff0c\n# \u53e6\u5916\u901a\u5e38\u5728\u6267\u884c\u5b8c\u5b89\u88c5\u547d\u4ee4\u4ee5\u540e\uff0c\u4e00\u822c\u9700\u8981\u53bb\u6e05\u7406\u6389\u8f6f\u4ef6\u5305\u548c\u7f13\u5b58\u3002\u7f29\u5c0f\u955c\u50cf\u7684\u5927\u5c0f\u3002\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#build","title":"Build: \u6784\u5efa\u955c\u50cf","text":"Bash<pre><code>docker build [\u9009\u9879] &lt;\u4e0a\u4e0b\u6587\u8def\u5f84/URL/-&gt;\n\n$ docker build -t nginx:v3 .\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM nginx\n---&gt; e43d811ce2f4\nStep 2 : RUN echo '&lt;h1&gt;Hello, Docker!&lt;/h1&gt;' &gt; /usr/share/nginx/html/index.html\n---&gt; Running in 9cdc27646c7b\n---&gt; 44aa4490ce2c\nRemoving intermediate container 9cdc27646c7b\nSuccessfully built 44aa4490ce2c\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#context","title":"Context\uff1a\u955c\u50cf\u6784\u5efa\u4e0a\u4e0b\u6587","text":"<p>\u5f53\u6211\u4eec\u8fdb\u884c\u955c\u50cf\u6784\u5efa\u7684\u65f6\u5019\uff0c\u5e76\u975e\u6240\u6709\u5b9a\u5236\u90fd\u4f1a\u901a\u8fc7 RUN \u6307\u4ee4\u5b8c\u6210\uff0c\u7ecf\u5e38\u4f1a\u9700\u8981\u5c06\u4e00\u4e9b\u672c\u5730\u6587\u4ef6\u590d\u5236\u8fdb\u955c\u50cf\uff0c\u6bd4\u5982\u901a\u8fc7 COPY \u6307\u4ee4\u3001ADD \u6307\u4ee4\u7b49\u3002\u800c docker build \u547d\u4ee4\u6784\u5efa\u955c\u50cf\uff0c\u5176\u5b9e\u5e76\u975e\u5728\u672c\u5730\u6784\u5efa\uff0c\u800c\u662f\u5728\u670d\u52a1\u7aef\uff0c\u4e5f\u5c31\u662f Docker \u5f15\u64ce\u4e2d\u6784\u5efa\u7684\u3002\u90a3\u4e48\u5728\u8fd9\u79cd\u5ba2\u6237\u7aef/\u670d\u52a1\u7aef\u7684\u67b6\u6784\u4e2d\uff0c\u5982\u4f55\u624d\u80fd\u8ba9\u670d\u52a1\u7aef\u83b7\u5f97\u672c\u5730\u6587\u4ef6\u5462\uff1f \u8fd9\u5c31\u5f15\u5165\u4e86\u4e0a\u4e0b\u6587\u7684\u6982\u5ff5\u3002\u5f53\u6784\u5efa\u7684\u65f6\u5019\uff0c\u7528\u6237\u4f1a\u6307\u5b9a\u6784\u5efa\u955c\u50cf\u4e0a\u4e0b\u6587\u7684\u8def\u5f84\uff0cdocker build \u547d\u4ee4\u5f97\u77e5\u8fd9\u4e2a\u8def\u5f84\u540e\uff0c\u4f1a\u5c06\u8def\u5f84\u4e0b\u7684\u6240\u6709\u5185\u5bb9\u6253\u5305\uff0c\u7136\u540e\u4e0a\u4f20\u7ed9 Docker \u5f15\u64ce\u3002\u8fd9\u6837 Docker \u5f15\u64ce\u6536\u5230\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u5305\u540e\uff0c\u5c55\u5f00\u5c31\u4f1a\u83b7\u5f97\u6784\u5efa\u955c\u50cf\u6240\u9700\u7684\u4e00\u5207\u6587\u4ef6\u3002</p> Docker<pre><code>COPY ./package.json /app/\n\n# \u8fd9\u5e76\u4e0d\u662f\u8981\u590d\u5236\u6267\u884c docker build \u547d\u4ee4\u6240\u5728\u7684\u76ee\u5f55\u4e0b\u7684 package.json\uff0c\u4e5f\u4e0d\u662f\u590d\u5236 Dockerfile \u6240\u5728\u76ee\u5f55\u4e0b\u7684 package.json\uff0c\n# \u800c\u662f\u590d\u5236 \u4e0a\u4e0b\u6587\uff08context\uff09 \u76ee\u5f55\u4e0b\u7684 package.json\u3002\n</code></pre> <p><code>COPY</code>\u8fd9\u7c7b\u6307\u4ee4\u4e2d\u7684\u6e90\u6587\u4ef6\u7684\u8def\u5f84\u90fd\u662f\u76f8\u5bf9\u8def\u5f84\u3002\u8fd9\u4e5f\u662f\u521d\u5b66\u8005\u7ecf\u5e38\u4f1a\u95ee\u7684\u4e3a\u4ec0\u4e48 COPY ../package.json /app \u6216\u8005 COPY /opt/xxxx /app \u65e0\u6cd5\u5de5\u4f5c\u7684\u539f\u56e0\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u8def\u5f84\u5df2\u7ecf\u8d85\u51fa\u4e86\u4e0a\u4e0b\u6587\u7684\u8303\u56f4\uff0cDocker \u5f15\u64ce\u65e0\u6cd5\u83b7\u5f97\u8fd9\u4e9b\u4f4d\u7f6e\u7684\u6587\u4ef6\u3002\u5982\u679c\u771f\u7684\u9700\u8981\u90a3\u4e9b\u6587\u4ef6\uff0c\u5e94\u8be5\u5c06\u5b83\u4eec\u590d\u5236\u5230\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e2d\u53bb\u3002</p> Bash<pre><code>$ docker build -t nginx:v3 .\nSending build context to Docker daemon 2.048 kB\n...\n# \u901a\u8fc7build \u8f93\u51fa\uff0c\u53ef\u4ee5\u770b\u5230\u53d1\u9001\u4e0a\u4e0b\u6587\u7684\u8fc7\u7a0b\n</code></pre> <ul> <li>\u7ecf\u9a8cNote:</li> <li>\u4e00\u822c\u6765\u8bf4\uff0c\u5e94\u8be5\u4f1a\u5c06 Dockerfile \u7f6e\u4e8e\u4e00\u4e2a\u7a7a\u76ee\u5f55\u4e0b\uff0c\u6216\u8005\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u3002\u5982\u679c\u8be5\u76ee\u5f55\u4e0b\u6ca1\u6709\u6240\u9700\u6587\u4ef6\uff0c\u90a3\u4e48\u5e94\u8be5\u628a\u6240\u9700\u6587\u4ef6\u590d\u5236\u4e00\u4efd\u8fc7\u6765\u3002\u5982\u679c\u76ee\u5f55\u4e0b\u6709\u4e9b\u4e1c\u897f\u786e\u5b9e\u4e0d\u5e0c\u671b\u6784\u5efa\u65f6\u4f20\u7ed9 Docker \u5f15\u64ce\uff0c\u90a3\u4e48\u53ef\u4ee5\u7528 .gitignore \u4e00\u6837\u7684\u8bed\u6cd5\u5199\u4e00\u4e2a<code>.dockerignore</code>\uff0c\u8be5\u6587\u4ef6\u662f\u7528\u4e8e\u5254\u9664\u4e0d\u9700\u8981\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u4f20\u9012\u7ed9 Docker \u5f15\u64ce\u7684\u3002</li> <li>\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4f1a\u6709\u4eba\u8bef\u4ee5\u4e3a\u00a0.\u00a0\u662f\u6307\u5b9a Dockerfile \u6240\u5728\u76ee\u5f55\u5462\uff1f\u8fd9\u662f\u56e0\u4e3a\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4e0d\u989d\u5916\u6307\u5b9a Dockerfile \u7684\u8bdd\uff0c\u4f1a\u5c06\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e0b\u7684\u540d\u4e3a Dockerfile \u7684\u6587\u4ef6\u4f5c\u4e3a Dockerfile\u3002</li> <li>\u8fd9\u53ea\u662f\u9ed8\u8ba4\u884c\u4e3a\uff0c\u5b9e\u9645\u4e0a Dockerfile \u7684\u6587\u4ef6\u540d\u5e76\u4e0d\u8981\u6c42\u5fc5\u987b\u4e3a Dockerfile\uff0c\u800c\u4e14\u5e76\u4e0d\u8981\u6c42\u5fc5\u987b\u4f4d\u4e8e\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e2d\uff0c\u6bd4\u5982\u53ef\u4ee5\u7528<code>-f ../Dockerfile.php</code>\u53c2\u6570\u6307\u5b9a\u67d0\u4e2a\u6587\u4ef6\u4f5c\u4e3a Dockerfile\u3002</li> <li>\u4e00\u822c\u5927\u5bb6\u4e60\u60ef\u6027\u7684\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u7684\u6587\u4ef6\u540d Dockerfile\uff0c\u4ee5\u53ca\u4f1a\u5c06\u5176\u7f6e\u4e8e\u955c\u50cf\u6784\u5efa\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e2d\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#_1","title":"\u8fc1\u79fb\u955c\u50cf","text":"<p>Docker \u8fd8\u63d0\u4f9b\u4e86docker load\u548cdocker save\u547d\u4ee4\uff0c\u7528\u4ee5\u5c06\u955c\u50cf\u4fdd\u5b58\u4e3a\u4e00\u4e2a tar \u6587\u4ef6\uff0c\u7136\u540e\u4f20\u8f93\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\u4e0a\uff0c\u518d\u52a0\u8f7d\u8fdb\u6765\u3002\u8fd9\u662f\u5728\u6ca1\u6709 Docker Registry \u65f6\u7684\u505a\u6cd5\uff0c\u73b0\u5728\u5df2\u7ecf\u4e0d\u63a8\u8350\uff0c\u955c\u50cf\u8fc1\u79fb\u5e94\u8be5\u76f4\u63a5\u4f7f\u7528 Docker Registry\uff0c\u65e0\u8bba\u662f\u76f4\u63a5\u4f7f\u7528 Docker Hub \u8fd8\u662f\u4f7f\u7528\u5185\u7f51\u79c1\u6709 Registry \u90fd\u53ef\u4ee5\u3002</p> <p>\u4f7f\u7528docker save\u547d\u4ee4\u53ef\u4ee5\u5c06\u955c\u50cf\u4fdd\u5b58\u4e3a\u5f52\u6863\u6587\u4ef6\u3002\u6bd4\u5982\u6211\u4eec\u5e0c\u671b\u4fdd\u5b58\u8fd9\u4e2a alpine \u955c\u50cf\u3002 Bash<pre><code>docker image ls alpine\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nalpine              latest              baa5d63471ea        5 weeks ago         4.803 MB\n\n# \u4fdd\u5b58\u955c\u50cf\u7684\u547d\u4ee4\u4e3a\uff1a\ndocker save alpine | gzip &gt; alpine-latest.tar.gz\n\n# \u52a0\u8f7d\u955c\u50cf\ndocker load -i alpine-latest.tar.gz\nLoaded image: alpine:latest\n</code></pre></p> <ul> <li>\u4e0a\u8ff0\u4e24\u6761\u547d\u4ee4\u53ef\u4ee5\u5408\u5e76\u4e3a\u4e00\u6761\u547d\u4ee4,\u5e76\u4e14\u5e26\u6709\u8fdb\u5ea6\u6761 Bash<pre><code>docker save &lt;\u955c\u50cf\u540d&gt; | bzip2 | pv | ssh &lt;\u7528\u6237\u540d&gt;@&lt;\u4e3b\u673a\u540d&gt; 'cat | docker load'\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerignore_template/","title":"dockerignore\u6587\u4ef6","text":"Docker<pre><code>**/__pycache__\n**/*venv\n**/.classpath\n**/.dockerignore\n**/.env\n**/.git\n**/.gitignore\n**/.project\n**/.settings\n**/.toolstarget\n**/.vs\n**/.vscode\n**/*.*proj.user\n**/*.dbmdl\n**/*.jfm\n**/bin\n**/charts\n**/docker-compose*\n**/compose*\n**/Dockerfile*\n**/node_modules\n**/npm-debug.log\n**/obj\n**/secrets.dev.yaml\n**/values.dev.yaml\n*.db\n.python-version\nLICENSE\nREADME.md\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_software_usage/","title":"docker-compose\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5\u6c47\u603b","text":"","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_software_usage/#yapi","title":"\u5b89\u88c5YApi","text":"<ul> <li>\u65b9\u5f0f\u4e00\uff1a</li> </ul> YAML<pre><code>version: '3'\n\nservices:\n  yapi-web:\n    image: liuqingzheng/yapi:latest\n    container_name: yapi-web\n    ports:\n      - 3000:3000\n    environment:\n      - YAPI_ADMIN_ACCOUNT=466640681@qq.com\n      - YAPI_ADMIN_PASSWORD=Aa123456!\n      - YAPI_CLOSE_REGISTER=true\n      - YAPI_DB_SERVERNAME=yapi-mongo\n      - YAPI_DB_PORT=27017\n      - YAPI_DB_DATABASE=yapi\n      - YAPI_MAIL_ENABLE=false\n      - YAPI_LDAP_LOGIN_ENABLE=false\n      - YAPI_PLUGINS=[]\n    depends_on:\n      - yapi-mongo\n    links:\n      - yapi-mongo\n    restart: unless-stopped\n  yapi-mongo:\n    image: mongo:latest\n    container_name: yapi-mongo\n    volumes:\n      - ./data/db:/data/db\n    expose:\n      - 27017\n    restart: unless-stopped\n</code></pre> YAML<pre><code>docker-compose up -d # \u542f\u52a8\ndocker-compose stop  # \u505c\u6b62\ndocker-compose rm    # \u5220\u9664\n\nhttp://127.0.0.1:3000/\n\u8f93\u5165\u90ae\u7bb1\uff1a466640681@qq.com\n\u8f93\u5165\u5bc6\u7801\uff1aAa123456!\n</code></pre> <ul> <li>\u65b9\u5f0f\u4e8c\uff1a</li> <li>\u53c2\u8003\u94fe\u63a5\uff1a[https://github.com/Ryan-Miao/docker-yapi]</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/","title":"docker-compose\u4f7f\u7528\u603b\u7ed3","text":"","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#compose","title":"compose\u7b80\u8ff0","text":"<ul> <li><code>Docker Compose</code>\u662f<code>Docker</code>\u5b98\u65b9\u7f16\u6392\uff08Orchestration\uff09\u9879\u76ee\u4e4b\u4e00\uff0c\u8d1f\u8d23\u5feb\u901f\u7684\u90e8\u7f72\u5206\u5e03\u5f0f\u5e94\u7528</li> <li>\u5b83\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u4e00\u4e2a\u5355\u72ec\u7684\u00a0<code>docker-compose.yml</code>\u6a21\u677f\u6587\u4ef6\uff08YAML \u683c\u5f0f\uff09\u6765\u5b9a\u4e49\u4e00\u7ec4\u76f8\u5173\u8054\u7684\u5e94\u7528\u5bb9\u5668\u4e3a\u4e00\u4e2a\u9879\u76ee</li> <li>\u9002\u7528\u4e8e\u5f00\u53d1\u73af\u5883\u6216\u8005\u5355\u673a\u73af\u5883\u4e0b\u7684\u5bb9\u5668\u7f16\u6392</li> <li>Compose \u4e2d\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a</li> <li>\u670d\u52a1 (service)\uff1a\u4e00\u4e2a\u5e94\u7528\u7684\u5bb9\u5668\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5305\u62ec\u82e5\u5e72\u8fd0\u884c\u76f8\u540c\u955c\u50cf\u7684\u5bb9\u5668\u5b9e\u4f8b\u3002</li> <li>\u9879\u76ee (project)\uff1a\u7531\u4e00\u7ec4\u5173\u8054\u7684\u5e94\u7528\u5bb9\u5668\u7ec4\u6210\u7684\u4e00\u4e2a\u5b8c\u6574\u4e1a\u52a1\u5355\u5143\uff0c\u5728 docker-compose.yml \u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_1","title":"\u5b89\u88c5","text":"","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_2","title":"\u4e8c\u8fdb\u5236\u5b89\u88c5","text":"<ul> <li>\u4ece \u5b98\u65b9 GitHub Release \u5904\u76f4\u63a5\u4e0b\u8f7d\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u5373\u53ef\u3002\u4f8b\u5982\uff0c\u5728 Linux 64 \u4f4d\u7cfb\u7edf\u4e0a\u76f4\u63a5\u4e0b\u8f7d\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u5305\u3002 Text Only<pre><code>sudo curl -L https://github.com/docker/compose/releases/download/1.17.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose\n\nsudo chmod +x /usr/local/bin/docker-compose\n\ndocker-compose version\n</code></pre></li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#pip","title":"PIP \u5b89\u88c5","text":"<p>\u6ce8\uff1a x86_64 \u67b6\u6784\u7684 Linux \u5efa\u8bae\u6309\u7167\u4e0a\u8fb9\u7684\u65b9\u6cd5\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305\u8fdb\u884c\u5b89\u88c5\uff0c\u5982\u679c\u60a8\u8ba1\u7b97\u673a\u7684\u67b6\u6784\u662f ARM (\u4f8b\u5982\uff0c\u6811\u8393\u6d3e)\uff0c\u518d\u4f7f\u7528 pip \u5b89\u88c5\u3002</p> <p>\u8fd9\u79cd\u65b9\u5f0f\u662f\u5c06 Compose \u5f53\u4f5c\u4e00\u4e2a Python \u5e94\u7528\u6765\u4ece pip \u6e90\u4e2d\u5b89\u88c5\u3002\u6267\u884c\u5b89\u88c5\u547d\u4ee4\uff1a Bash<pre><code>$ sudo pip install -U docker-compose\nCollecting docker-compose\n  Downloading docker-compose-1.17.1.tar.gz (149kB): 149kB downloaded\n...\nSuccessfully installed docker-compose cached-property requests texttable websocket-client docker-py dockerpty six enum34 backports.ssl-match-hostname ipaddress\n</code></pre></p> <ul> <li>bash \u8865\u5168\u547d\u4ee4\uff1a Bash<pre><code>$ curl -L https://raw.githubusercontent.com/docker/compose/1.8.0/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose\n</code></pre></li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_3","title":"\u5bb9\u5668\u4e2d\u6267\u884c","text":"<p>Compose \u65e2\u7136\u662f\u4e00\u4e2a Python \u5e94\u7528\uff0c\u81ea\u7136\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7528\u5bb9\u5668\u6765\u6267\u884c\u5b83\u3002 Text Only<pre><code>$ curl -L https://github.com/docker/compose/releases/download/1.8.0/run.sh &gt; /usr/local/bin/docker-compose\n$ chmod +x /usr/local/bin/docker-compose\n</code></pre> \u5b9e\u9645\u4e0a\uff0c\u67e5\u770b\u4e0b\u8f7d\u7684<code>run.sh</code>\u811a\u672c\u5185\u5bb9\uff0c\u5982\u4e0b: Text Only<pre><code>set -e\nVERSION=\"1.8.0\"\nIMAGE=\"docker/compose:$VERSION\"\n# Setup options for connecting to docker hostif [ -z \"$DOCKER_HOST\" ]; then\n    DOCKER_HOST=\"/var/run/docker.sock\"fiif [ -S \"$DOCKER_HOST\" ]; then\n    DOCKER_ADDR=\"-v $DOCKER_HOST:$DOCKER_HOST -e DOCKER_HOST\"else\n    DOCKER_ADDR=\"-e DOCKER_HOST -e DOCKER_TLS_VERIFY -e DOCKER_CERT_PATH\"fi\n# Setup volume mounts for compose config and contextif [ \"$(pwd)\" != '/' ]; then\n    VOLUMES=\"-v $(pwd):$(pwd)\"fiif [ -n \"$COMPOSE_FILE\" ]; then\n    compose_dir=$(dirname $COMPOSE_FILE)fi# TODO: also check --file argumentif [ -n \"$compose_dir\" ]; then\n    VOLUMES=\"$VOLUMES -v $compose_dir:$compose_dir\"fiif [ -n \"$HOME\" ]; then\n    VOLUMES=\"$VOLUMES -v $HOME:$HOME -v $HOME:/root\" # mount $HOME in /root to share docker.configfi\n# Only allocate tty if we detect oneif [ -t 1 ]; then\n    DOCKER_RUN_OPTIONS=\"-t\"fiif [ -t 0 ]; then\n    DOCKER_RUN_OPTIONS=\"$DOCKER_RUN_OPTIONS -i\"fi\nexec docker run --rm $DOCKER_RUN_OPTIONS $DOCKER_ADDR $COMPOSE_OPTIONS $VOLUMES -w \"$(pwd)\" $IMAGE \"$@\"\n</code></pre></p> <ul> <li>\u53ef\u4ee5\u770b\u5230\uff0c\u5b83\u5176\u5b9e\u662f\u4e0b\u8f7d\u4e86<code>docker/compose</code>\u955c\u50cf\u5e76\u8fd0\u884c\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_4","title":"\u5378\u8f7d","text":"<ul> <li> <p>\u5982\u679c\u662f\u4e8c\u8fdb\u5236\u5305\u65b9\u5f0f\u5b89\u88c5\u7684\uff0c\u5220\u9664\u4e8c\u8fdb\u5236\u6587\u4ef6\u5373\u53ef\u3002 Text Only<pre><code>$ sudo rm /usr/local/bin/docker-compose\n</code></pre></p> </li> <li> <p>\u5982\u679c\u662f\u901a\u8fc7 pip \u5b89\u88c5\u7684\uff0c\u5219\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5373\u53ef\u5220\u9664\u3002 Text Only<pre><code>$ sudo pip uninstall docker-compose\n</code></pre></p> </li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_5","title":"\u4f7f\u7528","text":"<ul> <li> <p>\u7f16\u5199<code>Dockerfile</code>\u6587\u4ef6 Text Only<pre><code>FROM python:3.6-alpine\nADD . /code\nWORKDIR /code\nRUN pip install redis flask\nCMD [\"python\", \"app.py\"]\n</code></pre></p> </li> <li> <p>\u7f16\u5199<code>docker-compose.yml</code>\u6587\u4ef6 Text Only<pre><code>version: '3'\nservices:\n  web:    \n  build: .    \n  ports:    \n  - \"5000:5000\"\n  volumes:\n       - .:/code\n  redis:    \n  image: \"redis:alpine\"\n</code></pre></p> </li> <li> <p>\u8fd0\u884c compose \u9879\u76ee: Text Only<pre><code>$ docker-compose up\n</code></pre></p> </li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#compose_1","title":"Compose \u547d\u4ee4","text":"","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_6","title":"\u5e38\u7528\u547d\u4ee4\u603b\u7ed3","text":"Bash<pre><code>docker-compose up -d    \u4ee5\u5b88\u62a4\u8fdb\u7a0b\u6a21\u5f0f\u8fd0\u884c\u52a0-d\u9009\u9879\ndocker-compose ps   \u5217\u51fa\u6240\u6709\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668,\u7c7b\u4f3cdocker ps\ndocker-compose logs web \u67e5\u770bweb\u670d\u52a1\u65e5\u5fd7\ndocker-compose stop \u505c\u6b62\u5df2\u8fd0\u884c\u7684\u670d\u52a1\ndocker-compose down \u505c\u6b62\u5e76\u79fb\u9664\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u955c\u50cf\u548c\u6570\u636e\u5377.\u6bd4stop\u66f4\u5f7b\u5e95\ndocker-compose restart  \u91cd\u542fYAML\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u670d\u52a1\ndocker-compose kill \u505c\u6b62\u670d\u52a1\ndocker-compose rm   \u5220\u9664\u6307\u5b9a\u5df2\u7ecf\u505c\u6b62\u670d\u52a1\u7684\u5bb9\u5668\ndocker-compose build    \u6784\u5efa\u6216\u91cd\u5efa\u670d\u52a1\ndocker-compose images   \u5217\u51fa\u6240\u6709\u955c\u50cf\ndocker-compose pull \u62c9\u53bb\u5e76\u4e0b\u8f7d\u6307\u5b9a\u670d\u52a1\u955c\u50cf\ndocker-compose push push\u670d\u52a1\u955c\u50cf\ndocker-compose top  \u663e\u793a\u5404\u4e2a\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u8fdb\u7a0b\n</code></pre>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_7","title":"\u67e5\u770b\u547d\u4ee4\u4f7f\u7528\u683c\u5f0f","text":"<ul> <li>docker-compose [COMMAND] --help</li> <li> <p>docker-compose help [COMMAND] Text Only<pre><code>docker-compose [-f=&lt;arg&gt;...] [options] [COMMAND] [ARGS...]\n</code></pre> \u547d\u4ee4\u9009\u9879\uff1a</p> </li> <li> <p>-f, --file FILE \u6307\u5b9a\u4f7f\u7528\u7684 Compose \u6a21\u677f\u6587\u4ef6\uff0c\u9ed8\u8ba4\u4e3a docker-compose.yml\uff0c\u53ef\u4ee5\u591a\u6b21\u6307\u5b9a\u3002</p> </li> <li>-p, --project-name NAME \u6307\u5b9a\u9879\u76ee\u540d\u79f0\uff0c\u9ed8\u8ba4\u5c06\u4f7f\u7528\u6240\u5728\u76ee\u5f55\u540d\u79f0\u4f5c\u4e3a\u9879\u76ee\u540d\u3002</li> <li>--x-networking \u4f7f\u7528 Docker \u7684\u53ef\u62d4\u63d2\u7f51\u7edc\u540e\u7aef\u7279\u6027</li> <li>--x-network-driver DRIVER \u6307\u5b9a\u7f51\u7edc\u540e\u7aef\u7684\u9a71\u52a8\uff0c\u9ed8\u8ba4\u4e3a bridge</li> <li>--verbose \u8f93\u51fa\u66f4\u591a\u8c03\u8bd5\u4fe1\u606f\u3002</li> <li>-v, --version \u6253\u5370\u7248\u672c\u5e76\u9000\u51fa\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#build","title":"build \u683c\u5f0f","text":"<ul> <li>*docker-compose build [options] [SERVICE...]\uff0c *\u6784\u5efa\uff08\u91cd\u65b0\u6784\u5efa\uff09\u9879\u76ee\u4e2d\u7684\u670d\u52a1\u5bb9\u5668</li> <li>\u53ef\u4ee5\u968f\u65f6\u5728\u9879\u76ee\u76ee\u5f55\u4e0b\u8fd0\u884c<code>docker-compose build</code>\u6765\u91cd\u65b0\u6784\u5efa\u670d\u52a1\u3002\u9009\u9879\u5305\u62ec\uff1a</li> <li>--force-rm \u5220\u9664\u6784\u5efa\u8fc7\u7a0b\u4e2d\u7684\u4e34\u65f6\u5bb9\u5668\u3002</li> <li>--no-cache \u6784\u5efa\u955c\u50cf\u8fc7\u7a0b\u4e2d\u4e0d\u4f7f\u7528 cache\uff08\u8fd9\u5c06\u52a0\u957f\u6784\u5efa\u8fc7\u7a0b\uff09\u3002</li> <li>--pull \u59cb\u7ec8\u5c1d\u8bd5\u901a\u8fc7 pull \u6765\u83b7\u53d6\u66f4\u65b0\u7248\u672c\u7684\u955c\u50cf\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#config","title":"config:","text":"<ul> <li>\u9a8c\u8bc1 Compose \u6587\u4ef6\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff0c\u82e5\u6b63\u786e\u5219\u663e\u793a\u914d\u7f6e\uff0c\u82e5\u683c\u5f0f\u9519\u8bef\u663e\u793a\u9519\u8bef\u539f\u56e0\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#down","title":"down\uff1a","text":"<ul> <li>\u6b64\u547d\u4ee4\u5c06\u4f1a\u505c\u6b62 up \u547d\u4ee4\u6240\u542f\u52a8\u7684\u5bb9\u5668\uff0c\u5e76\u79fb\u9664\u7f51\u7edc</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#exec","title":"exec\uff1a","text":"<ul> <li>\u8fdb\u5165\u6307\u5b9a\u7684\u5bb9\u5668\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#help","title":"help\uff1a","text":"<ul> <li>\u83b7\u5f97\u4e00\u4e2a\u547d\u4ee4\u7684\u5e2e\u52a9\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#images","title":"images\uff1a","text":"<ul> <li>\u5217\u51fa Compose \u6587\u4ef6\u4e2d\u5305\u542b\u7684\u955c\u50cf\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#kill","title":"kill\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose kill [options] [SERVICE...]\u3002</li> <li>\u901a\u8fc7\u53d1\u9001<code>SIGKILL</code>\u4fe1\u53f7\u6765\u5f3a\u5236\u505c\u6b62\u670d\u52a1\u5bb9\u5668\u3002\u652f\u6301\u901a\u8fc7<code>-s</code>\u53c2\u6570\u6765\u6307\u5b9a\u53d1\u9001\u7684\u4fe1\u53f7\uff0c\u4f8b\u5982\u901a\u8fc7\u5982\u4e0b\u6307\u4ee4\u53d1\u9001<code>SIGINT</code>\u4fe1\u53f7\u3002 Text Only<pre><code>$ docker-compose kill -s SIGINT\n</code></pre></li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#logs","title":"logs\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose logs [options] [SERVICE...]\uff0c</li> <li>\u67e5\u770b\u670d\u52a1\u5bb9\u5668\u7684\u8f93\u51fa\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cdocker-compose \u5c06\u5bf9\u4e0d\u540c\u7684\u670d\u52a1\u8f93\u51fa\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6765\u533a\u5206\u3002\u53ef\u4ee5\u901a\u8fc7 <code>--no-color</code>\u6765\u5173\u95ed\u989c\u8272\u3002\u8be5\u547d\u4ee4\u5728\u8c03\u8bd5\u95ee\u9898\u7684\u65f6\u5019\u5341\u5206\u6709\u7528\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#pause","title":"pause\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose pause [SERVICE...]\uff0c\u6682\u505c\u4e00\u4e2a\u670d\u52a1\u5bb9\u5668\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#port","title":"port\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose port [options] SERVICE PRIVATE_PORT\uff0c\u6253\u5370\u67d0\u4e2a\u5bb9\u5668\u7aef\u53e3\u6240\u6620\u5c04\u7684\u516c\u5171\u7aef\u53e3\u3002\u9009\u9879\uff1a</li> <li>--protocol=proto \u6307\u5b9a\u7aef\u53e3\u534f\u8bae\uff0ctcp\uff08\u9ed8\u8ba4\u503c\uff09\u6216\u8005 udp\u3002</li> <li>--index=index \u5982\u679c\u540c\u4e00\u670d\u52a1\u5b58\u5728\u591a\u4e2a\u5bb9\u5668\uff0c\u6307\u5b9a\u547d\u4ee4\u5bf9\u8c61\u5bb9\u5668\u7684\u5e8f\u53f7\uff08\u9ed8\u8ba4\u4e3a 1\uff09\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#ps","title":"ps\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose ps [options] [SERVICE...]\uff0c\u5217\u51fa\u9879\u76ee\u4e2d\u76ee\u524d\u7684\u6240\u6709\u5bb9\u5668\u3002\u9009\u9879\uff1a</li> <li><code>-q</code>\u53ea\u6253\u5370\u5bb9\u5668\u7684 ID \u4fe1\u606f\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#pull","title":"pull\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3a<code>docker-compose pull [options] [SERVICE...]</code>\uff0c\u62c9\u53d6\u670d\u52a1\u4f9d\u8d56\u7684\u955c\u50cf\u3002\u9009\u9879\uff1a</li> <li>--ignore-pull-failures \u5ffd\u7565\u62c9\u53d6\u955c\u50cf\u8fc7\u7a0b\u4e2d\u7684\u9519\u8bef\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#push","title":"push\uff1a","text":"<ul> <li>\u63a8\u9001\u670d\u52a1\u4f9d\u8d56\u7684\u955c\u50cf\u5230 Docker \u955c\u50cf\u4ed3\u5e93\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#restart","title":"restart\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose restart [options] [SERVICE...]\uff0c\u91cd\u542f\u9879\u76ee\u4e2d\u7684\u670d\u52a1\u3002\u9009\u9879\uff1a</li> <li>-t, --timeout TIMEOUT \u6307\u5b9a\u91cd\u542f\u524d\u505c\u6b62\u5bb9\u5668\u7684\u8d85\u65f6\uff08\u9ed8\u8ba4\u4e3a 10 \u79d2\uff09\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#rm","title":"rm\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose rm [options] [SERVICE...],\u5220\u9664\u6240\u6709\uff08\u505c\u6b62\u72b6\u6001\u7684\uff09\u670d\u52a1\u5bb9\u5668\u3002\u63a8\u8350\u5148\u6267\u884c <code>docker-compose stop</code>\u547d\u4ee4\u6765\u505c\u6b62\u5bb9\u5668\u3002\u9009\u9879\uff1a</li> <li>-f, --force \u5f3a\u5236\u76f4\u63a5\u5220\u9664\uff0c\u5305\u62ec\u975e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\u3002\u4e00\u822c\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\u8be5\u9009\u9879\u3002</li> <li>-v \u5220\u9664\u5bb9\u5668\u6240\u6302\u8f7d\u7684\u6570\u636e\u5377\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#run","title":"run\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose run [options] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]\uff0c\u5728\u6307\u5b9a\u670d\u52a1\u4e0a\u6267\u884c\u4e00\u4e2a\u547d\u4ee4\u3002\u4f8b\u5982\uff1a Bash<pre><code>$ docker-compose run ubuntu ping docker.com\n</code></pre> <p>\u5c06\u4f1a\u542f\u52a8\u4e00\u4e2a ubuntu \u670d\u52a1\u5bb9\u5668\uff0c\u5e76\u6267\u884c ping docker.com \u547d\u4ee4\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u5b58\u5728\u5173\u8054\uff0c\u5219\u6240\u6709\u5173\u8054\u7684\u670d\u52a1\u5c06\u4f1a\u81ea\u52a8\u88ab\u542f\u52a8\uff0c\u9664\u975e\u8fd9\u4e9b\u670d\u52a1\u5df2\u7ecf\u5728\u8fd0\u884c\u4e2d\u3002 \u8be5\u547d\u4ee4\u7c7b\u4f3c\u542f\u52a8\u5bb9\u5668\u540e\u8fd0\u884c\u6307\u5b9a\u7684\u547d\u4ee4\uff0c\u76f8\u5173\u5377\u3001\u94fe\u63a5\u7b49\u7b49\u90fd\u5c06\u4f1a\u6309\u7167\u914d\u7f6e\u81ea\u52a8\u521b\u5efa\u3002</p> </li> </ul> <p>\u7ed9\u5b9a\u547d\u4ee4\u5c06\u4f1a\u8986\u76d6\u539f\u6709\u7684\u81ea\u52a8\u8fd0\u884c\u547d\u4ee4\uff1b \u4e0d\u4f1a\u81ea\u52a8\u521b\u5efa\u7aef\u53e3\uff0c\u4ee5\u907f\u514d\u51b2\u7a81\u3002</p> <ul> <li> <p>\u5982\u679c\u4e0d\u5e0c\u671b\u81ea\u52a8\u542f\u52a8\u5173\u8054\u7684\u5bb9\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528<code>--no-deps</code>\u9009\u9879\uff0c\u4f8b\u5982: Bash<pre><code>$ docker-compose run --no-deps web python manage.py shell\n</code></pre> \u5c06\u4e0d\u4f1a\u542f\u52a8 web \u5bb9\u5668\u6240\u5173\u8054\u7684\u5176\u5b83\u5bb9\u5668,\u9009\u9879\uff1a</p> </li> <li> <p>-d \u540e\u53f0\u8fd0\u884c\u5bb9\u5668\u3002</p> </li> <li>--name NAME \u4e3a\u5bb9\u5668\u6307\u5b9a\u4e00\u4e2a\u540d\u5b57\u3002</li> <li>--entrypoint CMD \u8986\u76d6\u9ed8\u8ba4\u7684\u5bb9\u5668\u542f\u52a8\u6307\u4ee4\u3002</li> <li>-e KEY=VAL \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u503c\uff0c\u53ef\u591a\u6b21\u4f7f\u7528\u9009\u9879\u6765\u8bbe\u7f6e\u591a\u4e2a\u73af\u5883\u53d8\u91cf\u3002</li> <li>-u, --user=\"\" \u6307\u5b9a\u8fd0\u884c\u5bb9\u5668\u7684\u7528\u6237\u540d\u6216\u8005 uid\u3002</li> <li>--no-deps \u4e0d\u81ea\u52a8\u542f\u52a8\u5173\u8054\u7684\u670d\u52a1\u5bb9\u5668\u3002</li> <li>--rm \u8fd0\u884c\u547d\u4ee4\u540e\u81ea\u52a8\u5220\u9664\u5bb9\u5668\uff0cd \u6a21\u5f0f\u4e0b\u5c06\u5ffd\u7565\u3002</li> <li>-p, --publish=[] \u6620\u5c04\u5bb9\u5668\u7aef\u53e3\u5230\u672c\u5730\u4e3b\u673a\u3002</li> <li>--service-ports \u914d\u7f6e\u670d\u52a1\u7aef\u53e3\u5e76\u6620\u5c04\u5230\u672c\u5730\u4e3b\u673a\u3002</li> <li>-T \u4e0d\u5206\u914d\u4f2a tty\uff0c\u610f\u5473\u7740\u4f9d\u8d56 tty \u7684\u6307\u4ee4\u5c06\u65e0\u6cd5\u8fd0\u884c\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#scale","title":"scale\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose scale [options] [SERVICE=NUM...]\uff0c\u8bbe\u7f6e\u6307\u5b9a\u670d\u52a1\u8fd0\u884c\u7684\u5bb9\u5668\u4e2a\u6570\u3002 </li> <li> <p>\u901a\u8fc7 service=num \u7684\u53c2\u6570\u6765\u8bbe\u7f6e\u6570\u91cf\u3002\u4f8b\u5982\uff1a Bash<pre><code>$ docker-compose scale web=3 db=2\n</code></pre> \u5c06\u542f\u52a8 3 \u4e2a\u5bb9\u5668\u8fd0\u884c web \u670d\u52a1\uff0c2 \u4e2a\u5bb9\u5668\u8fd0\u884c db \u670d\u52a1\u3002 \u4e00\u822c\u7684\uff0c\u5f53\u6307\u5b9a\u6570\u76ee\u591a\u4e8e\u8be5\u670d\u52a1\u5f53\u524d\u5b9e\u9645\u8fd0\u884c\u5bb9\u5668\uff0c\u5c06\u65b0\u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668\uff1b\u53cd\u4e4b\uff0c\u5c06\u505c\u6b62\u5bb9\u5668\u3002\u9009\u9879\uff1a</p> </li> <li> <p>-t, --timeout TIMEOUT \u505c\u6b62\u5bb9\u5668\u65f6\u5019\u7684\u8d85\u65f6\uff08\u9ed8\u8ba4\u4e3a 10 \u79d2\uff09\u3002</p> </li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#start","title":"start\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose start [SERVICE...]\uff0c\u542f\u52a8\u5df2\u7ecf\u5b58\u5728\u7684\u670d\u52a1\u5bb9\u5668\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#stop","title":"stop\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose stop [options] [SERVICE...], \u505c\u6b62\u5df2\u7ecf\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\u7684\u5bb9\u5668\uff0c\u4f46\u4e0d\u5220\u9664\u5b83\u3002\u901a\u8fc7<code>docker-compose start</code>\u53ef\u4ee5\u518d\u6b21\u542f\u52a8\u8fd9\u4e9b\u5bb9\u5668\u3002\u9009\u9879\uff1a</li> <li>-t, --timeout TIMEOUT \u505c\u6b62\u5bb9\u5668\u65f6\u5019\u7684\u8d85\u65f6\uff08\u9ed8\u8ba4\u4e3a 10 \u79d2\uff09\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#top","title":"top\uff1a","text":"<ul> <li>\u67e5\u770b\u5404\u4e2a\u670d\u52a1\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u8fdb\u7a0b\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#unpause","title":"unpause\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose unpause [SERVICE...]\uff0c\u6062\u590d\u5904\u4e8e\u6682\u505c\u72b6\u6001\u4e2d\u7684\u670d\u52a1\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#up","title":"up\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose up [options] [SERVICE...]\uff0c\u8be5\u547d\u4ee4\u5341\u5206\u5f3a\u5927\uff0c\u5b83\u5c06\u5c1d\u8bd5\u81ea\u52a8\u5b8c\u6210\u5305\u62ec\u6784\u5efa\u955c\u50cf\uff0c\uff08\u91cd\u65b0\uff09\u521b\u5efa\u670d\u52a1\uff0c\u542f\u52a8\u670d\u52a1\uff0c\u5e76\u5173\u8054\u670d\u52a1\u76f8\u5173\u5bb9\u5668\u7684\u4e00\u7cfb\u5217\u64cd\u4f5c\u3002\u94fe\u63a5\u7684\u670d\u52a1\u90fd\u5c06\u4f1a\u88ab\u81ea\u52a8\u542f\u52a8\uff0c\u9664\u975e\u5df2\u7ecf\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\u3002 \u53ef\u4ee5\u8bf4\uff0c\u5927\u90e8\u5206\u65f6\u5019\u90fd\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u8be5\u547d\u4ee4\u6765\u542f\u52a8\u4e00\u4e2a\u9879\u76ee\u3002</li> <li>\u9ed8\u8ba4\u60c5\u51b5\uff0c<code>docker-compose up</code>\u542f\u52a8\u7684\u5bb9\u5668\u90fd\u5728\u524d\u53f0\uff0c\u63a7\u5236\u53f0\u5c06\u4f1a\u540c\u65f6\u6253\u5370\u6240\u6709\u5bb9\u5668\u7684\u8f93\u51fa\u4fe1\u606f\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u8fdb\u884c\u8c03\u8bd5\u3002 \u5f53\u901a\u8fc7 Ctrl-C \u505c\u6b62\u547d\u4ee4\u65f6\uff0c\u6240\u6709\u5bb9\u5668\u5c06\u4f1a\u505c\u6b62\u3002</li> <li>\u5982\u679c\u4f7f\u7528<code>docker-compose up -d</code>\uff0c\u5c06\u4f1a\u5728\u540e\u53f0\u542f\u52a8\u5e76\u8fd0\u884c\u6240\u6709\u7684\u5bb9\u5668\u3002\u4e00\u822c\u63a8\u8350\u751f\u4ea7\u73af\u5883\u4e0b\u4f7f\u7528\u8be5\u9009\u9879\u3002</li> <li>\u9ed8\u8ba4\u60c5\u51b5\uff0c\u5982\u679c\u670d\u52a1\u5bb9\u5668\u5df2\u7ecf\u5b58\u5728\uff0c<code>docker-compose up</code>\u5c06\u4f1a\u5c1d\u8bd5\u505c\u6b62\u5bb9\u5668\uff0c\u7136\u540e\u91cd\u65b0\u521b\u5efa\uff08\u4fdd\u6301\u4f7f\u7528 volumes-from \u6302\u8f7d\u7684\u5377\uff09\uff0c\u4ee5\u4fdd\u8bc1\u65b0\u542f\u52a8\u7684\u670d\u52a1\u5339\u914d docker-compose.yml \u6587\u4ef6\u7684\u6700\u65b0\u5185\u5bb9\u3002\u5982\u679c\u7528\u6237\u4e0d\u5e0c\u671b\u5bb9\u5668\u88ab\u505c\u6b62\u5e76\u91cd\u65b0\u521b\u5efa\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>docker-compose up --no-recreate</code>\u3002\u8fd9\u6837\u5c06\u53ea\u4f1a\u542f\u52a8\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\uff0c\u800c\u5ffd\u7565\u5df2\u7ecf\u8fd0\u884c\u7684\u670d\u52a1\u3002</li> <li>\u5982\u679c\u7528\u6237\u53ea\u60f3\u91cd\u65b0\u90e8\u7f72\u67d0\u4e2a\u670d\u52a1\uff0c\u53ef\u4ee5\u4f7f\u7528<code>docker-compose up --no-deps -d &lt;SERVICE_NAME&gt;</code>\u6765\u91cd\u65b0\u521b\u5efa\u670d\u52a1\u5e76\u540e\u53f0\u505c\u6b62\u65e7\u670d\u52a1\uff0c\u542f\u52a8\u65b0\u670d\u52a1\uff0c\u5e76\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u6240\u4f9d\u8d56\u7684\u670d\u52a1\u3002\u9009\u9879\uff1a</li> <li>-d \u5728\u540e\u53f0\u8fd0\u884c\u670d\u52a1\u5bb9\u5668\u3002</li> <li>--no-color \u4e0d\u4f7f\u7528\u989c\u8272\u6765\u533a\u5206\u4e0d\u540c\u7684\u670d\u52a1\u7684\u63a7\u5236\u53f0\u8f93\u51fa\u3002</li> <li>--no-deps \u4e0d\u542f\u52a8\u670d\u52a1\u6240\u94fe\u63a5\u7684\u5bb9\u5668\u3002</li> <li>--force-recreate \u5f3a\u5236\u91cd\u65b0\u521b\u5efa\u5bb9\u5668\uff0c\u4e0d\u80fd\u4e0e<code>--no-recreate</code>\u540c\u65f6\u4f7f\u7528\u3002 <code>--no-recreate</code>\u5982\u679c\u5bb9\u5668\u5df2\u7ecf\u5b58\u5728\u4e86\uff0c\u5219\u4e0d\u91cd\u65b0\u521b\u5efa\uff0c\u4e0d\u80fd\u4e0e <code>--force-recreate</code>\u540c\u65f6\u4f7f\u7528\u3002 <code>--no-build</code>\u4e0d\u81ea\u52a8\u6784\u5efa\u7f3a\u5931\u7684\u670d\u52a1\u955c\u50cf\u3002</li> <li>-t, --timeout TIMEOUT \u505c\u6b62\u5bb9\u5668\u65f6\u5019\u7684\u8d85\u65f6\uff08\u9ed8\u8ba4\u4e3a 10 \u79d2\uff09\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/k8s/helm_usage/","title":"k8s\u5305\u7ba1\u7406\u5de5\u5177Helm\u7684\u4f7f\u7528","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm","title":"Helm\u6982\u8ff0","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#_1","title":"\u57fa\u672c\u4fe1\u606f","text":"<ul> <li>Github\u5730\u5740\uff1aHelm</li> <li>\u6587\u6863\u5730\u5740</li> <li>\u5f53\u524d\u6700\u65b0\u7248\u672cv3.15.4\uff0c\u5f53\u524dStar\u657026.6k.</li> <li>Chart\u5305\u6258\u7ba1\u5e73\u53f0\uff1aArtifactHub</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_1","title":"Helm\u662f\u4ec0\u4e48\uff1f","text":"<p>Helm\u662fKubernetes\uff08K8S\uff09\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0cHelm\u4e3b\u8981\u662f\u7528\u6765\u7ba1\u7406Chart\u5305\uff0c\u7c7b\u4f3c\u4e8ePython\u7684pip\u3001CentOS\u7684yum\u3001MacOS\u7684brew\u7b49\u3002Helm\u4e3b\u8981\u6709\u4e09\u5927\u57fa\u672c\u6982\u5ff5\uff0c\u5206\u522b\u4e3a\uff1a</p> <ul> <li>Chart: \u4ee3\u8868\u4e00\u4e2aHelm\u5305\uff0c\u5b83\u5305\u542b\u4e86\u5728K8S\u96c6\u7fa4\u4e2d\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u3001\u5de5\u5177\u6216\u670d\u52a1\u6240\u9700\u8981\u7684\u6240\u6709YAML\u683c\u5f0f\u7684\u8d44\u6e90\u5b9a\u4e49\u6587\u4ef6\u4ee5\u53ca\u8fd9\u4e9b\u8d44\u6e90\u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u901a\u8fc7Helm Chart\u5305\u6765\u6574\u4f53\u7ef4\u62a4\u8fd9\u4e9b\u8d44\u6e90\u3002</li> <li>Repository\uff1a\u5b83\u662f\u7528\u6765\u5b58\u653e\u548c\u5171\u4eabHelm Chart\u7684\u5730\u65b9\uff0c\u7c7b\u4f3c\u4e8e\u5b58\u653e\u6e90\u7801\u7684Github\u7684Repository\uff0c\u4ee5\u53ca\u5b58\u653e\u955c\u50cf\u7684Docker\u7684Repository\u3002</li> <li>Release: \u5b83\u662f\u8fd0\u884c\u5728K8S\u96c6\u7fa4\u4e2d\u7684Chart\u7684\u5b9e\u4f8b\u3002\u4e00\u4e2aChart\u901a\u5e38\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u96c6\u7fa4\u4e2d\u5b89\u88c5\u591a\u6b21\u3002\u6bcf\u4e00\u6b21\u5b89\u88c5\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Release\u3002</li> </ul> <p>Helm\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2ahelm\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u8be5\u5de5\u5177\u53ef\u4ee5\u57fa\u4e8eChartb\u5305\u4e00\u952e\u521b\u5efa\u5e94\u7528\uff0c\u5728\u521b\u5efa\u5e94\u7528\u65f6\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49Chart\u914d\u7f6e\u3002\u5e94\u7528\u53d1\u5e03\u8005\u53ef\u4ee5\u901a\u8fc7Helm\u6253\u5305\u5e94\u7528\u3001\u7ba1\u7406\u5e94\u7528\u4f9d\u8d56\u7ba1\u7406\uff0c\u7ba1\u7406\u5e94\u7528\u7248\u672c\u3001\u5e76\u53d1\u5e03\u5e94\u7528\u5230\u8f6f\u4ef6\u4ed3\u5e93\u3002</p> <ul> <li>\u5bf9\u4e8e\u4f7f\u7528\u8005\u6765\u8bf4\uff0c\u4f7f\u7528Helm\u540e\u4e0d\u9700\u8981\u5199\u590d\u6742\u7684\u5e94\u7528\u90e8\u7f72\u6587\u4ef6\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u5728K8S\u4e0a\u67e5\u627e\u3001\u5b89\u88c5\u3001\u5347\u7ea7\u3001\u56de\u6eda\u4ee5\u53ca\u5378\u8f7d\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_2","title":"Helm\u67b6\u6784","text":"<p>Helm Client\uff08helm\u547d\u4ee4\uff09\u548cHelm Chart\u5305\u65f6\u6838\u5fc3\uff0chelm\u547d\u4ee4\u53ef\u4ee5\u4eceChart Repository\u4e2d\u4e0b\u8f7dHelm Chart\u5305\uff0c\u8bfb\u53d6kubeconfig\u6587\u4ef6\uff0c\u5e76\u6784\u5efakube-apiserver REST API \u63a5\u53e3\u7684HTTP\u8bf7\u6c42\uff0c\u901a\u8fc7\u8c03\u7528K8S\u63d0\u4f9b\u7684REST API \u63a5\u53e3\uff0c\u5c06Chart\u5305\u4e2d\u5305\u542b\u7684YAML\u683c\u5f0f\u5b9a\u4e49\u7684K8S\u8d44\u6e90\uff0c\u5728K8S\u96c6\u7fa4\u4e2d\u521b\u5efa\uff0c \u8fd9\u4e9b\u8d44\u6e90\u4ee5Release\u7684\u5f62\u5f0f\u5b58\u5728\u4e0eK8S\u96c6\u7fa4\u4e2d\uff0c\u6bcf\u4e2aRelease \u53c8\u5305\u542b\u591a\u4e2aK8S\u8d44\u6e90\uff0c\u5982Deployment\u3001Pod\u3001Service\u7b49\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_3","title":"Helm\u7ec4\u6210","text":"<ul> <li> <p>\u6a21\u677f\u6587\u4ef6</p> </li> <li> <p>\u3010\u901a\u5e38\u6709\u591a\u4e2a\u3011\uff0c\u57fa\u4e8e<code>text/template</code> \u6a21\u677f\u6587\u4ef6\uff0c\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u6a21\u677f\u6e32\u67d3\u80fd\u529b\u3002Helm\u53ef\u4ee5\u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u503c\u6e32\u67d3\u8fdb\u6a21\u677f\u6587\u4ef6\u4e2d\uff0c\u6700\u7ec8\u751f\u6210\u4e00\u4e2a\u53ef\u4ee5\u90e8\u7f72\u7684K8S YAML\u683c\u5f0f\u7684\u8d44\u6e90\u5b9a\u4e49\u6587\u4ef6\u3002</p> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6</p> </li> <li> <p>\u3010\u901a\u5e38\u6709\u4e00\u4e2a\u3011\u3002</p> </li> </ul> <p>\u603b\u7ed3\uff1a</p> <ul> <li>\u5728Helm\u4e2d\uff0c\u90e8\u7f72\u4e00\u4e2a\u5e94\u7528\u53ef\u4ee5\u7b80\u5316\u4e3aChart\u6a21\u677f\uff08\u591a\u4e2a\u670d\u52a1\uff09+ Chart\u914d\u7f6e \u2014&gt; \u5e94\u7528\u3002</li> <li>Chart\u6a21\u677f\u4e00\u4e2a\u5e94\u7528\u53ea\u7528\u7f16\u5199\u4e00\u6b21\uff0c\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\uff0c\u518d\u90e8\u7f72\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684\u914d\u7f6e\uff0c\u4ece\u800c\u5c06\u5e94\u7528\u90e8\u7f72\u5230\u4e0d\u540c\u73af\u5883\u6216\u540c\u4e00\u73af\u5883\u90e8\u7f72\u4e0d\u540c\u914d\u7f6e\u7684\u5e94\u7528\u3002</li> </ul> <p></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_4","title":"Helm\u5b89\u88c5","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<ul> <li>\u4e00\u4e2a\u53ef\u7528\u7684K8S\u96c6\u7fa4</li> <li>\u786e\u5b9a\u5b89\u88c5\u7248\u672c\u548c\u5b89\u5168\u914d\u7f6e</li> <li>\u5b89\u88c5\u548c\u914d\u7f6eHelm</li> </ul> <p>\u5b89\u88c5</p> <ul> <li>\u5b98\u65b9\u5b89\u88c5\u6307\u5357</li> <li>Helm \u5404\u4e2a\u7248\u672c\u5b89\u88c5\u5305\uff1aHelm Releases</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#_3","title":"\u5b89\u88c5\u6b65\u9aa4","text":"Bash<pre><code>$ wget https://get.helm.sh/helm-v3.15.4-linux-amd64.tar.gz\n$ tar -xvzf helm-v3.15.4-linux-amd64.tar.gz\n$ mv linux-amd64/helm /usr/local/bin/helm\n$ chmod +x /usr/local/bin/helm\n$ helm version  # \u8f93\u51fa\u7248\u672c\u53f7\u5373\u8868\u793a\u5b89\u88c5\u6210\u529f\n######log info ########\nversion.BuildInfo{Version:\"v3.15.4\", GitCommit:\"fa9efb07d9d8debbb4306d72af76a383895aa8c4\", GitTreeState:\"clean\", GoVersion:\"go1.22.6\"}\n</code></pre> <p>\u5b89\u88c5helm\u547d\u4ee4\u81ea\u52a8\u8865\u5168\u811a\u672c\uff08\u975e\u5fc5\u987b\uff09</p> <ul> <li>\u6587\u6863\u53c2\u8003</li> </ul> Bash<pre><code>helm completion bash &gt; /etc/bash_completion.d/helm\n</code></pre> <ul> <li>\u6267\u884c helm comp\uff0c\u5c31\u4f1a\u81ea\u52a8\u8865\u5168\u4e3ahelm completion\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_5","title":"Helm\u4f7f\u7528","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_6","title":"Helm\u5e38\u7528\u547d\u4ee4\u6c47\u603b","text":"\u547d\u4ee4 \u63cf\u8ff0 completion \u751f\u6210\u6307\u5b9aShell\u7684\u81ea\u52a8\u8865\u5168\u811a\u672c\uff0c\u6bd4\u5982bash\u3001zsh\u7b49 create \u521b\u5efa\u4e00\u4e2a Chart \u5e76\u6307\u5b9a\u540d\u5b57 dependency \u7ba1\u7406 Chart \u4f9d\u8d56 env \u6253\u5370Helm\u5ba2\u6237\u7aef\u7684\u73af\u5883\u53d8\u91cf\u4fe1\u606f\uff0c\u4f8b\u5982HELM_CACHE_HOME\u3001HELM_NAMESPACE\u3001HELM_REPOSITORY_CONFIG\u7b49 get \u4e0b\u8f7d\u4e00\u4e2a Release\u3002\u53ef\u7528\u5b50\u547d\u4ee4\uff1aall\u3001hooks\u3001manifest\u3001notes\u3001values help \u6253\u5370helm\u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f history \u83b7\u53d6 Release\u5386\u53f2 install \u5b89\u88c5\u4e00\u4e2a Chart lint \u68c0\u67e5\u4e00\u4e2aChart\u5305\uff0c\u5e76\u6253\u5370\u6f5c\u5728\u7684\u95ee\u9898 list \u5217\u51fa Release package \u5c06 Chart \u76ee\u5f55\u6253\u5305\u5230 Chart \u5b58\u50a8\u6587\u4ef6\u4e2d plugin Helm\u63d2\u4ef6 pull \u4ece\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u4e0b\u8f7d Chart \u5e76\u89e3\u538b\u5230\u672c\u5730\uff0c\u4f8b\u5982helm pull stable/redis --untar repo \u6dfb\u52a0\uff08add\uff09\u3001\u5217\u51fa\uff08list\uff09\u3001\u79fb\u9664\uff08remove\uff09\u3001\u66f4\u65b0\uff08update\uff09\u548c\u7d22\u5f15\uff08index\uff09Chart \u4ed3\u5e93 rollback \u4ece\u4e4b\u524d\u7248\u672c\u56de\u6eda search \u6839\u636e\u5173\u952e\u5b57\u641c\u7d22 Charts\uff0c\u53ef\u7528\u5b50\u547d\u4ee4\uff1ahub\u3001repo show \u67e5\u770b Chart \u8be6\u7ec6\u4fe1\u606f\u3002\u53ef\u7528\u5b50\u547d\u4ee4\uff1aall\u3001chart\u3001readme\u3001values status \u663e\u793a\u5df2\u547d\u540d\u7248\u672c\u7684\u72b6\u6001 template \u672c\u5730\u5448\u73b0\u6a21\u677f test \u5728 Release \u4e2d\u8fd0\u884c Helm \u4e2d\u7684\u9884\u5b9a\u4e49\u6d4b\u8bd5 uninstall \u5378\u8f7d\u4e00\u4e2a Release upgrade \u66f4\u65b0\u4e00\u4e2a Release verify \u9a8c\u8bc1\u7ed9\u5b9a\u8def\u5f84\u7684Chart\u662f\u5426\u5df2\u88ab\u7b7e\u540d\u4e14\u6709\u6548 version \u67e5\u770b Helm \u5ba2\u6237\u7aef\u7248\u672c","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/","title":"k8s\u5e38\u7528\u547d\u4ee4\u603b\u7ed3","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#1","title":"1. \u521b\u5efa/\u5220\u9664\u8d44\u6e90","text":"<p>\u4e00\u822c\u4f1a\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u901a\u8fc7yaml\u6587\u4ef6</li> <li>\u547d\u4ee4\u521b\u5efa\u3002</li> </ul> Bash<pre><code># \u901a\u8fc7\u6587\u4ef6\u521b\u5efa\u4e00\u4e2aDeployment\nkubectl create -f /path/to/deployment.yaml\ncat /path/to/deployment.yaml | kubectl create -f -\n\n# \u4e0d\u8fc7\u4e00\u822c\u53ef\u80fd\u66f4\u5e38\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u521b\u5efa\u8d44\u6e90\nkubectl apply -f /path/to/deployment.yaml\n\n# \u5220\u9664\u8d44\u6e90\nkubectl delete -f /path/to/deployment.yaml\n\u6216 \nkubectl delete pod pod\u540d\u79f0\n\n\n# \u901a\u8fc7kubectl\u547d\u4ee4\u76f4\u63a5\u521b\u5efa\nkubectl run nginx_app --image=nginx:1.9.1 --replicas=3\n</code></pre> <p>kubectl\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u66f4\u65b0\u8d44\u6e90\u7684\u547d\u4ee4\uff0c\u5982</p> <ul> <li>kubectl edit</li> <li>kubectl patch</li> <li>kubectl replace</li> </ul> Bash<pre><code># kubectl edit\uff1a\u76f8\u5f53\u4e8e\u5148\u7528get\u53bb\u83b7\u53d6\u8d44\u6e90\uff0c\u7136\u540e\u8fdb\u884c\u66f4\u65b0\uff0c\u6700\u540e\u5bf9\u66f4\u65b0\u540e\u7684\u8d44\u6e90\u8fdb\u884capply\nkubectl edit deployment/nginx_app\n\n# kubectl patch\uff1a\u4f7f\u7528\u8865\u4e01\u4fee\u6539\u3001\u66f4\u65b0\u67d0\u4e2a\u8d44\u6e90\u7684\u5b57\u6bb5\uff0c\u6bd4\u5982\u66f4\u65b0\u67d0\u4e2anode\nkubectl patch node/node-0 -p '{\"spec\":{\"unschedulable\":true}}'\nkubectl patch -f node-0.json -p '{\"spec\": {\"unschedulable\": \"true\"}}'\n\n# kubectl replace\uff1a\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u6765\u66ff\u6362\u8d44\u6e90\nkubectl replace -f /path/to/new_nginx_app.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#2","title":"2. \u67e5\u770b\u8d44\u6e90","text":"<p>\u83b7\u53d6\u4e0d\u540c\u79cd\u7c7b\u8d44\u6e90\u7684\u4fe1\u606f\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#21-nodes","title":"2.1 nodes\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl get nodes  # \u67e5\u770b\u96c6\u7fa4\u7684\u4fe1\u606f\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#22-pod","title":"2.2 pod\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl get pods  # \u67e5\u770bpods \n\nkubectl get pod -o wide  # \u67e5\u770b\u6307\u5b9apod\u7684\u8be6\u7ec6\u4fe1\u606f\n\nkubectl get pods --all-namespaces  # \u67e5\u770b\u6240\u6709\u547d\u540d\u7a7a\u95f4\u7684pods\n\u6216\u8005\nkubectl get pods -A\n\nkubectl get pods -n \u547d\u540d\u7a7a\u95f4\u540d pod\u540d\u79f0\n\n# kubectl describe \u8d44\u6e90\u7c7b\u578b \u8d44\u6e90\u540d\u79f0  \nkubectl describe pod nginx-XXXXXX  # \u67e5\u770b\u540d\u79f0\u4e3anginx-XXXXXX\u7684Pod\u7684\u4fe1\u606f\n\nkubectl delete pod pod\u540d --grace-period=0 --force  # \u5f3a\u5236\u5220\u9664\u4e00\u4e2apod(\u9002\u7528\u4e8e\u666e\u901adelete\u65e0\u6cd5\u5220\u9664\u7684\u573a\u666f)\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#23-deployments","title":"2.3 deployments\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl get deployments-A  # \u67e5\u770b\u6240\u6709\u7a7a\u95f4\u7684deployments\n\u6216\u8005\nkubectl get deployments --all-namespaces\n\nkubectl get deployments -n kube-system  # \u67e5\u770b\u6307\u5b9a\u547d\u540d\u7a7a\u95f4\u7684deployments\n\nkubectl describe deployment nginx  #\u67e5\u770b\u540d\u79f0\u4e3anginx\u7684Deployment\u7684\u4fe1\u606f\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#24-logs","title":"2.4  logs\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl logs\u00a0- \u67e5\u770bpod\u4e2d\u7684\u5bb9\u5668\u7684\u6253\u5370\u65e5\u5fd7\n\n(\u548c\u547d\u4ee4docker logs \u7c7b\u4f3c)\n\n# kubectl logs Pod\u540d\u79f0\n\n#\u67e5\u770b\u540d\u79f0\u4e3anginx-pod-XXXXXXX\u7684Pod\u5185\u7684\u5bb9\u5668\u6253\u5370\u7684\u65e5\u5fd7\n\nkubectl logs -f nginx-pod-XXXXXXX\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#25-exec","title":"2.5  exec \u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl exec\n- \u5728pod\u4e2d\u7684\u5bb9\u5668\u73af\u5883\u5185\u6267\u884c\u547d\u4ee4(\u548c\u547d\u4ee4docker exec \u7c7b\u4f3c)\n\n# kubectl exec Pod\u540d\u79f0 \u64cd\u4f5c\u547d\u4ee4\n\n# \u5728\u540d\u79f0\u4e3anginx-pod-xxxxxx\u7684Pod\u4e2d\u8fd0\u884cbash\nkubectl exec-it nginx-pod-xxxxxx /bin/bash\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#26-namespace","title":"2.6 namespace \u64cd\u4f5c","text":"Bash<pre><code>kubectl delete namespace \u540d\u79f0  # \u5220\u9664\u6307\u5b9anamespace \n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#26","title":"2.6 \u5176\u4ed6\u547d\u4ee4","text":"Bash<pre><code># \u6307\u5b9a\u8d44\u6e90\u7684\u4fe1\u606f\uff0c\u683c\u5f0f\uff1akubectl get &lt;resource_type&gt;/&lt;resource_name&gt;\uff0c\u6bd4\u5982\u83b7\u53d6deployment nginx_app\u7684\u4fe1\u606f\nkubectl get deployment/nginx_app -o wide\n\n# \u4e5f\u53ef\u4ee5\u5bf9\u6307\u5b9a\u7684\u8d44\u6e90\u8fdb\u884c\u683c\u5f0f\u5316\u8f93\u51fa\uff0c\u6bd4\u5982\u8f93\u51fa\u683c\u5f0f\u4e3ajson\u3001yaml\u7b49\nkubectl get deployment/nginx_app -o json\n\n# \u8fd8\u53ef\u4ee5\u5bf9\u8f93\u51fa\u7ed3\u679c\u8fdb\u884c\u81ea\u5b9a\u4e49\uff0c\u6bd4\u5982\u5bf9pod\u53ea\u8f93\u51fa\u5bb9\u5668\u540d\u79f0\u548c\u955c\u50cf\u540d\u79f0\nkubectl get pod httpd-app-5bc589d9f7-rnhj7 -o custom-columns=CONTAINER:.spec.containers[0].name,IMAGE:.spec.containers[0].image\n\n# \u83b7\u53d6\u67d0\u4e2a\u7279\u5b9akey\u7684\u503c\u8fd8\u53ef\u4ee5\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\u5f97\u5230\uff0c\u6b64\u76ee\u5f55\u53c2\u7167go template\u7684\u7528\u6cd5\uff0c\u4e14\u547d\u4ee4\u7ed3\u5c3e'\\n'\u662f\u4e3a\u4e86\u8f93\u51fa\u7ed3\u679c\u6362\u884c\nkubectl get pod httpd-app-5bc589d9f7-rnhj7 -o template --template='{{(index spec.containers 0).name}}{{\"\\n\"}}'\n\n#\u5176\u4ed6\u66f4\u591a\u547d\u4ee4\u4f7f\u7528kubectl get --help\u67e5\u770b\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#3","title":"3. \u90e8\u7f72\u547d\u4ee4\u96c6","text":"<p>\u90e8\u7f72\u547d\u4ee4\u5305\u62ec\u8d44\u6e90\u7684\u8fd0\u884c\u7ba1\u7406\u547d\u4ee4\u3001\u6269\u5bb9\u548c\u7f29\u5bb9\u547d\u4ee4\u548c\u81ea\u52a8\u6269\u7f29\u5bb9\u547d\u4ee4\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#31-rollout","title":"3.1 rollout\u547d\u4ee4","text":"<p>\u7ba1\u7406\u8d44\u6e90\u7684\u8fd0\u884c\uff0c\u6bd4\u5982eployment\u3001Daemonet\u3001StatefulSet\u7b49\u8d44\u6e90\u3002</p> <ul> <li>\u67e5\u770b\u90e8\u7f72\u72b6\u6001\uff1a\u6bd4\u5982\u66f4\u65b0deployment/nginx_app\u4e2d\u5bb9\u5668\u7684\u955c\u50cf\u540e\u67e5\u770b\u5176\u66f4\u65b0\u7684\u72b6\u6001\u3002</li> </ul> Bash<pre><code>kubectl set image deployment/nginx_app nginx=nginx:1.9.1\nkubectl rollout status deployment/nginx_app\n</code></pre> <ul> <li>\u8d44\u6e90\u7684\u6682\u505c\u53ca\u6062\u590d\uff1a\u53d1\u51fa\u4e00\u6b21\u6216\u591a\u6b21\u66f4\u65b0\u524d\u6682\u505c\u4e00\u4e2a Deployment\uff0c\u7136\u540e\u518d\u6062\u590d\u5b83\uff0c\u8fd9\u6837\u5c31\u80fd\u5728Deployment\u6682\u505c\u671f\u95f4\u8fdb\u884c\u591a\u6b21\u4fee\u590d\u5de5\u4f5c\uff0c\u800c\u4e0d\u4f1a\u53d1\u51fa\u4e0d\u5fc5\u8981\u7684 rollout\u3002</li> </ul> Bash<pre><code># \u6682\u505c\nkubectl rollout pause deployment/nginx_app\n\n# \u5b8c\u6210\u6240\u6709\u7684\u66f4\u65b0\u64cd\u4f5c\u547d\u4ee4\u540e\u8fdb\u884c\u6062\u590d\nkubectl rollout resume deployment/nginx_app\n</code></pre> <ul> <li>\u56de\u6eda\uff1a\u5982\u4e0a\u5bf9\u4e00\u4e2aDeployment\u7684image\u505a\u4e86\u66f4\u65b0\uff0c\u4f46\u662f\u5982\u679c\u9047\u5230\u66f4\u65b0\u5931\u8d25\u6216\u8bef\u66f4\u65b0\u7b49\u60c5\u51b5\u65f6\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u56de\u6eda\u3002</li> </ul> Bash<pre><code># \u56de\u6eda\u4e4b\u524d\u5148\u67e5\u770b\u5386\u53f2\u7248\u672c\u4fe1\u606f\nkubectl rollout history deployment/nginx_app\n\n# \u56de\u6eda\nkubectl rollout undo deployment/nginx_app\n\n# \u5f53\u7136\u4e5f\u53ef\u4ee5\u6307\u5b9a\u7248\u672c\u53f7\u56de\u6eda\u81f3\u6307\u5b9a\u7248\u672c\nkubectl rollout undo deployment/nginx_app --to-revision=&lt;version_index&gt;\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#32-scale","title":"3.2 scale\u547d\u4ee4","text":"<p>\u5bf9\u4e00\u4e2aDeployment\u3001RS\u3001StatefulSet\u8fdb\u884c\u6269/\u7f29\u5bb9\u3002</p> Bash<pre><code># \u6269\u5bb9\nkubectl scale deployment/nginx_app --replicas=5\n# \u5982\u679c\u662f\u7f29\u5bb9\uff0c\u628a\u5bf9\u5e94\u7684\u526f\u672c\u6570\u8bbe\u7f6e\u7684\u6bd4\u5f53\u524d\u7684\u526f\u672c\u6570\u5c0f\u5373\u53ef\n\n# \u53e6\u5916\uff0c\u8fd8\u53ef\u4ee5\u9488\u5bf9\u5f53\u524d\u7684\u526f\u672c\u6570\u76ee\u505a\u6761\u4ef6\u9650\u5236\uff0c\u6bd4\u5982\u5f53\u524d\u526f\u672c\u6570\u662f5\u5219\u8fdb\u884c\u7f29\u5bb9\u81f3\u526f\u672c\u6570\u76ee\u4e3a3\nkubectl scale --current-replicas=5 --replicas=3 deployment/nginx_app\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#33-autoscale","title":"3.3 autoscale\u547d\u4ee4","text":"<p>\u901a\u8fc7\u521b\u5efa\u4e00\u4e2aautoscaler\uff0c\u53ef\u4ee5\u81ea\u52a8\u9009\u62e9\u548c\u8bbe\u7f6e\u5728K8s\u96c6\u7fa4\u4e2dPod\u7684\u6570\u91cf\u3002</p> Bash<pre><code># \u57fa\u4e8eCPU\u7684\u4f7f\u7528\u7387\u521b\u5efa3-10\u4e2apod\nkubectl autoscale deployment/nginx_app --min=3 --max=10 --cpu_percent=80\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#4","title":"4. \u96c6\u7fa4\u7ba1\u7406\u547d\u4ee4","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#41-cordon-uncordon","title":"4.1 cordon &amp; uncordon\u547d\u4ee4","text":"<p>\u8bbe\u7f6e\u662f\u5426\u80fd\u591f\u5c06pod\u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a\u3002</p> Bash<pre><code># \u4e0d\u53ef\u8c03\u5ea6\nkubectl cordon node-0\n\n# \u5f53\u67d0\u4e2a\u8282\u70b9\u9700\u8981\u7ef4\u62a4\u65f6\uff0c\u53ef\u4ee5\u9a71\u9010\u8be5\u8282\u70b9\u4e0a\u7684\u6240\u6709pods(\u4f1a\u5220\u9664\u8282\u70b9\u4e0a\u7684pod\uff0c\u5e76\u4e14\u81ea\u52a8\u901a\u8fc7\u4e0a\u9762\u547d\u4ee4\u8bbe\u7f6e\n# \u8be5\u8282\u70b9\u4e0d\u53ef\u8c03\u5ea6\uff0c\u7136\u540e\u5728\u5176\u4ed6\u53ef\u7528\u8282\u70b9\u91cd\u65b0\u542f\u52a8pods)\nkubectl drain node-0\n\n# \u5f85\u5176\u7ef4\u62a4\u5b8c\u6210\u540e\uff0c\u53ef\u518d\u8bbe\u7f6e\u8be5\u8282\u70b9\u4e3a\u53ef\u8c03\u5ea6\nkubectl uncordon node-0\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#42-taint","title":"4.2 taint\u547d\u4ee4","text":"<p>\u76ee\u524d\u4ec5\u80fd\u4f5c\u7528\u4e8e\u8282\u70b9\u8d44\u6e90\uff0c\u4e00\u822c\u8fd9\u4e2a\u547d\u4ee4\u901a\u5e38\u4f1a\u7ed3\u5408pod\u7684tolerations\u5b57\u6bb5\u7ed3\u5408\u4f7f\u7528\uff0c\u5bf9\u4e8e\u6ca1\u6709\u8bbe\u7f6e\u5bf9\u5e94toleration\u7684pod\u662f\u4e0d\u4f1a\u8c03\u5ea6\u5230\u6709\u8be5taint\u7684\u8282\u70b9\u4e0a\u7684\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u907f\u514dpod\u88ab\u8c03\u5ea6\u5230\u4e0d\u5408\u9002\u7684\u8282\u70b9\u4e0a\u3002\u4e00\u4e2a\u8282\u70b9\u7684taint\u4e00\u822c\u4f1a\u5305\u62eckey\u3001value\u548ceffect(effect\u53ea\u80fd\u5728NoSchedule, PreferNoSchedule, NoExecute\u4e2d\u53d6\u503c)\u3002</p> Bash<pre><code># \u8bbe\u7f6etaint\nkubecl taint nodes node-0 key1=value1:NoSchedule\n\n# \u79fb\u9664taint\nkubecl taint nodes node-0 key1:NoSchedule-\n</code></pre> <p>\u5982\u679cpod\u60f3\u8981\u88ab\u8c03\u5ea6\u5230\u4e0a\u8ff0\u8bbe\u7f6e\u4e86taint\u7684\u8282\u70b9node-0\u4e0a\uff0c\u5219\u9700\u8981\u5728\u8be5pod\u7684spec\u7684tolerations\u5b57\u6bb5\u8bbe\u7f6e\uff1a</p> YAML<pre><code>tolerations:\n- key: \"key1\"\n  operator: \"Equal\"\n  value: \"value1\"\n  effect: \"NoSchedule\"\n\n# \u6216\u8005\ntolerations:\n- key: \"key1\"\n  operator: \"Exists\"\n  effect: \"NoSchedule\"\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#5","title":"5. \u5176\u5b83","text":"Bash<pre><code># \u6620\u5c04\u7aef\u53e3\u5141\u8bb8\u5916\u90e8\u8bbf\u95ee\nkubectl expose deployment/nginx_app --type='NodePort' --port=80\n# \u7136\u540e\u901a\u8fc7kubectl get services -o wide\u6765\u67e5\u770b\u88ab\u968f\u673a\u6620\u5c04\u7684\u7aef\u53e3\n# \u5982\u6b64\u5c31\u53ef\u4ee5\u901a\u8fc7node\u7684\u5916\u90e8IP\u548c\u7aef\u53e3\u6765\u8bbf\u95eenginx\u670d\u52a1\u4e86\n\n# \u8f6c\u53d1\u672c\u5730\u7aef\u53e3\u8bbf\u95eePod\u7684\u5e94\u7528\u670d\u52a1\u7a0b\u5e8f\nkubectl port-forward nginx_app_pod_0 8090:80\n# \u5982\u6b64\uff0c\u672c\u5730\u53ef\u4ee5\u8bbf\u95ee\uff1acurl -i localhost:8090\n\n# \u5728\u521b\u5efa\u6216\u542f\u52a8\u67d0\u4e9b\u8d44\u6e90\u7684\u65f6\u5019\u6ca1\u6709\u8fbe\u5230\u9884\u671f\u7ed3\u679c\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5148\u7b80\u5355\u8fdb\u884c\u6545\u969c\u5b9a\u4f4d\nkubectl describe deployment/nginx_app\nkubectl logs nginx_pods\nkubectl exec nginx_pod -c nginx-app &lt;command&gt;\n\n# \u96c6\u7fa4\u5185\u90e8\u8c03\u7528\u63a5\u53e3(\u6bd4\u5982\u7528curl\u547d\u4ee4)\uff0c\u53ef\u4ee5\u91c7\u7528\u4ee3\u7406\u7684\u65b9\u5f0f\uff0c\u6839\u636e\u8fd4\u56de\u7684ip\u53ca\u7aef\u53e3\u4f5c\u4e3abaseurl\nkubectl proxy &amp;\n\n# \u67e5\u770bK8s\u652f\u6301\u7684\u5b8c\u6574\u8d44\u6e90\u5217\u8868\nkubectl api-resources\n\n# \u67e5\u770bK8s\u652f\u6301\u7684api\u7248\u672c\nkubectl api-versions\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#_1","title":"\u672a\u5f52\u6863\u547d\u4ee4\u5927\u7efc\u5408","text":"Bash<pre><code># \u67e5\u770b\u5177\u4f53pods\uff0c\u8bb0\u5f97\u540e\u8fb9\u8ddfnamespace\u540d\u5b57\u54e6\nkubectl get pods  kubernetes-dashboard-76479d66bb-nj8wr --namespace=kube-system\n# \u67e5\u770bpods\u5177\u4f53\u4fe1\u606f\nkubectl get pods -o wide kubernetes-dashboard-76479d66bb-nj8wr --namespace=kube-system\n# \u67e5\u770b\u96c6\u7fa4\u5065\u5eb7\u72b6\u6001\nkubectl get cs\n# \u83b7\u53d6\u6240\u6709deployment\nkubectl get deployment --all-namespaces\n# \u5217\u51fa\u8be5 namespace \u4e2d\u7684\u6240\u6709 pod \u5305\u62ec\u672a\u521d\u59cb\u5316\u7684\nkubectl get pods --include-uninitialized\n# \u67e5\u770bdeployment()\nkubectl get deployment nginx-app\n# \u67e5\u770brc\u548cservers\nkubectl get rc,services\n# \u67e5\u770bpods\u7ed3\u6784\u4fe1\u606f\uff08\u91cd\u70b9\uff0c\u901a\u8fc7\u8fd9\u4e2a\u770b\u65e5\u5fd7\u5206\u6790\u9519\u8bef\uff09\n# \u5bf9\u63a7\u5236\u5668\u548c\u670d\u52a1\uff0cnode\u540c\u6837\u6709\u6548\nkubectl describe pods xxxxpodsname --namespace=xxxnamespace\n# \u5176\u4ed6\u63a7\u5236\u5668\u7c7b\u4f3c\u5427\uff0c\u5c31\u662fkubectl get \u63a7\u5236\u5668 \u63a7\u5236\u5668\u5177\u4f53\u540d\u79f0\n# \u67e5\u770bpod\u65e5\u5fd7\nkubectl logs $POD_NAME\n# \u67e5\u770bpod\u53d8\u91cf\nkubectl exec my-nginx-5j8ok -- printenv | grep SERVICE\n# \u96c6\u7fa4\nkubectl get cs           # \u96c6\u7fa4\u5065\u5eb7\u60c5\u51b5\nkubectl cluster-info     # \u96c6\u7fa4\u6838\u5fc3\u7ec4\u4ef6\u8fd0\u884c\u60c5\u51b5\nkubectl get namespaces    # \u8868\u7a7a\u95f4\u540d\nkubectl version           # \u7248\u672c\nkubectl api-versions      # API\nkubectl get events       # \u67e5\u770b\u4e8b\u4ef6\nkubectl get nodes      //\u83b7\u53d6\u5168\u90e8\u8282\u70b9\nkubectl delete node k8s2  //\u5220\u9664\u8282\u70b9\nkubectl rollout status deploy nginx-test\n# \u521b\u5efa\nkubectl create -f ./nginx.yaml           # \u521b\u5efa\u8d44\u6e90\nkubectl create -f .                            # \u521b\u5efa\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709yaml\u8d44\u6e90\nkubectl create -f ./nginx1.yaml -f ./mysql2.yaml     # \u4f7f\u7528\u591a\u4e2a\u6587\u4ef6\u521b\u5efa\u8d44\u6e90\nkubectl create -f ./dir                        # \u4f7f\u7528\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6e05\u5355\u6587\u4ef6\u6765\u521b\u5efa\u8d44\u6e90\nkubectl create -f https://git.io/vPieo         # \u4f7f\u7528 url \u6765\u521b\u5efa\u8d44\u6e90\nkubectl run -i --tty busybox --image=busybox    ----\u521b\u5efa\u5e26\u6709\u7ec8\u7aef\u7684pod\nkubectl run nginx --image=nginx                # \u542f\u52a8\u4e00\u4e2a nginx \u5b9e\u4f8b\nkubectl run mybusybox --image=busybox --replicas=5    ----\u542f\u52a8\u591a\u4e2apod\nkubectl explain pods,svc                       # \u83b7\u53d6 pod \u548c svc \u7684\u6587\u6863\n# \u66f4\u65b0\nkubectl rolling-update python-v1 -f python-v2.json           # \u6eda\u52a8\u66f4\u65b0 pod frontend-v1\nkubectl rolling-update python-v1 python-v2 --image=image:v2  # \u66f4\u65b0\u8d44\u6e90\u540d\u79f0\u5e76\u66f4\u65b0\u955c\u50cf\nkubectl rolling-update python --image=image:v2                 # \u66f4\u65b0 frontend pod \u4e2d\u7684\u955c\u50cf\nkubectl rolling-update python-v1 python-v2 --rollback        # \u9000\u51fa\u5df2\u5b58\u5728\u7684\u8fdb\u884c\u4e2d\u7684\u6eda\u52a8\u66f4\u65b0\ncat pod.json | kubectl replace -f -                              # \u57fa\u4e8e stdin \u8f93\u5165\u7684 JSON \u66ff\u6362 pod\n\u5f3a\u5236\u66ff\u6362\uff0c\u5220\u9664\u540e\u91cd\u65b0\u521b\u5efa\u8d44\u6e90\u3002\u4f1a\u5bfc\u81f4\u670d\u52a1\u4e2d\u65ad\u3002\nkubectl replace --force -f ./pod.json\n\u4e3a nginx RC \u521b\u5efa\u670d\u52a1\uff0c\u542f\u7528\u672c\u5730 80 \u7aef\u53e3\u8fde\u63a5\u5230\u5bb9\u5668\u4e0a\u7684 8000 \u7aef\u53e3\nkubectl expose rc nginx --port=80 --target-port=8000\n\n\u66f4\u65b0\u5355\u5bb9\u5668 pod \u7684\u955c\u50cf\u7248\u672c\uff08tag\uff09\u5230 v4\nkubectl get pod nginx-pod -o yaml | sed 's/\\(image: myimage\\):.*$/\\1:v4/' | kubectl replace -f -\nkubectl label pods nginx-pod new-label=awesome                      # \u6dfb\u52a0\u6807\u7b7e\nkubectl annotate pods nginx-pod icon-url=http://goo.gl/XXBTWq       # \u6dfb\u52a0\u6ce8\u89e3\nkubectl autoscale deployment foo --min=2 --max=10                # \u81ea\u52a8\u6269\u5c55 deployment \u201cfoo\u201d\n# \u7f16\u8f91\u8d44\u6e90\nkubectl edit svc/docker-registry                      # \u7f16\u8f91\u540d\u4e3a docker-registry \u7684 service\nKUBE_EDITOR=\"nano\" kubectl edit svc/docker-registry   # \u4f7f\u7528\u5176\u5b83\u7f16\u8f91\u5668\n# \u52a8\u6001\u4f38\u7f29pod\nkubectl scale --replicas=3 rs/foo                                 # \u5c06foo\u526f\u672c\u96c6\u53d8\u62103\u4e2a\nkubectl scale --replicas=3 -f foo.yaml                            # \u7f29\u653e\u201cfoo\u201d\u4e2d\u6307\u5b9a\u7684\u8d44\u6e90\u3002\nkubectl scale --current-replicas=2 --replicas=3 deployment/mysql  # \u5c06deployment/mysql\u4ece2\u4e2a\u53d8\u62103\u4e2a\nkubectl scale --replicas=5 rc/foo rc/bar rc/baz                   # \u53d8\u66f4\u591a\u4e2a\u63a7\u5236\u5668\u7684\u6570\u91cf\nkubectl rollout status deploy deployment/mysql                         # \u67e5\u770b\u53d8\u66f4\u8fdb\u5ea6\n# \u5220\u9664\nkubectl delete -f ./pod.json                                              # \u5220\u9664 pod.json \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u7c7b\u578b\u548c\u540d\u79f0\u7684 pod\nkubectl delete pod,service baz foo                                        # \u5220\u9664\u540d\u4e3a\u201cbaz\u201d\u7684 pod \u548c\u540d\u4e3a\u201cfoo\u201d\u7684 service\nkubectl delete pods,services -l name=myLabel                              # \u5220\u9664\u5177\u6709 name=myLabel \u6807\u7b7e\u7684 pod \u548c serivce\nkubectl delete pods,services -l name=myLabel --include-uninitialized      # \u5220\u9664\u5177\u6709 name=myLabel \u6807\u7b7e\u7684 pod \u548c service\uff0c\u5305\u62ec\u5c1a\u672a\u521d\u59cb\u5316\u7684\nkubectl -n my-ns delete po,svc --all # \u5220\u9664 my-ns namespace\u4e0b\u7684\u6240\u6709 pod \u548c serivce\uff0c\u5305\u62ec\u5c1a\u672a\u521d\u59cb\u5316\u7684\nkubectl delete pods prometheus-7fcfcb9f89-qkkf7 --grace-period=0 --force \u5f3a\u5236\u5220\u9664\n\n# \u4ea4\u4e92\nkubectl logs nginx-pod                                 # dump \u8f93\u51fa pod \u7684\u65e5\u5fd7\uff08stdout\uff09\nkubectl logs nginx-pod -c my-container                 # dump \u8f93\u51fa pod \u4e2d\u5bb9\u5668\u7684\u65e5\u5fd7\uff08stdout\uff0cpod \u4e2d\u6709\u591a\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff09\nkubectl logs -f nginx-pod                              # \u6d41\u5f0f\u8f93\u51fa pod \u7684\u65e5\u5fd7\uff08stdout\uff09\nkubectl logs -f nginx-pod -c my-container              # \u6d41\u5f0f\u8f93\u51fa pod \u4e2d\u5bb9\u5668\u7684\u65e5\u5fd7\uff08stdout\uff0cpod \u4e2d\u6709\u591a\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff09\nkubectl run -i --tty busybox --image=busybox -- sh  # \u4ea4\u4e92\u5f0f shell \u7684\u65b9\u5f0f\u8fd0\u884c pod\nkubectl attach nginx-pod -i                            # \u8fde\u63a5\u5230\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\nkubectl port-forward nginx-pod 5000:6000               # \u8f6c\u53d1 pod \u4e2d\u7684 6000 \u7aef\u53e3\u5230\u672c\u5730\u7684 5000 \u7aef\u53e3\nkubectl exec nginx-pod -- ls /                         # \u5728\u5df2\u5b58\u5728\u7684\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4\uff08\u53ea\u6709\u4e00\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\uff09\nkubectl exec nginx-pod -c my-container -- ls /         # \u5728\u5df2\u5b58\u5728\u7684\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4\uff08pod \u4e2d\u6709\u591a\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\uff09\nkubectl top pod POD_NAME --containers               # \u663e\u793a\u6307\u5b9a pod\u548c\u5bb9\u5668\u7684\u6307\u6807\u5ea6\u91cf\n# \u8c03\u5ea6\u914d\u7f6e\n$ kubectl cordon k8s-node                                                # \u6807\u8bb0 my-node \u4e0d\u53ef\u8c03\u5ea6\n$ kubectl drain k8s-node                                                 # \u6e05\u7a7a my-node \u4ee5\u5f85\u7ef4\u62a4\n$ kubectl uncordon k8s-node                                              # \u6807\u8bb0 my-node \u53ef\u8c03\u5ea6\n$ kubectl top node k8s-node                                              # \u663e\u793a my-node \u7684\u6307\u6807\u5ea6\u91cf\n$ kubectl cluster-info dump                                             # \u5c06\u5f53\u524d\u96c6\u7fa4\u72b6\u6001\u8f93\u51fa\u5230 stdout                                    \n$ kubectl cluster-info dump --output-directory=/path/to/cluster-state   # \u5c06\u5f53\u524d\u96c6\u7fa4\u72b6\u6001\u8f93\u51fa\u5230 /path/to/cluster-state\n#\u5982\u679c\u8be5\u952e\u548c\u5f71\u54cd\u7684\u6c61\u70b9\uff08taint\uff09\u5df2\u5b58\u5728\uff0c\u5219\u4f7f\u7528\u6307\u5b9a\u7684\u503c\u66ff\u6362\n$ kubectl taint nodes foo dedicated=special-user:NoSchedule\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/","title":"k8s\u90e8\u7f72\u5e38\u89c1\u95ee\u9898\u6c47\u603b","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#16643-was-refused","title":"1.\u7cfb\u7edf\u91cd\u542f\u4ee5\u540e6643 was refused","text":"Bash<pre><code># \u62a5\u9519\u5185\u5bb9\uff1a\n[root@centos801 ~]# kubectl get nodes\nThe connection to the server 192.168.33.130:6443 was refused - did you specify the right host or port?\n\n# \u89e3\u51b3\u65b9\u6848\nsudo -i  # \u4e3a\u4e86\u9891\u7e41\u7684\u6267\u884c\u67d0\u4e9b\u53ea\u6709\u8d85\u7ea7\u7528\u6237\u624d\u80fd\u6267\u884c\u7684\u6743\u9650\uff0c\u800c\u4e0d\u7528\u6bcf\u6b21\u8f93\u5165\u5bc6\u7801\nswapoff -a  # \u5173\u95ed\u7cfb\u7edf\u7684\u4ea4\u6362\u533a\u3002\nexit\nstrace -eopenat kubectl version\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#2nodejoin","title":"2.node\u8282\u70b9\u91cd\u65b0join\u65f6\uff0c\u9700\u8981\u6267\u884c\u4e0b\u5217\u547d\u4ee4","text":"Bash<pre><code>kubeadm reset\n\n# \u5982\u679c\u6709\u62a5\u9519\u4fe1\u606f\u5982\u4e0b\uff1a\nThe reset process does not clean CNI configuration. To do so, you must remove /etc/cni/net.d\n\nThe reset process does not reset or clean up iptables rules or IPVS tables.\nIf you wish to reset iptables, you must do so manually by using the \"iptables\" command.\n\nIf your cluster was setup to utilize IPVS, run ipvsadm --clear (or similar)\nto reset your system's IPVS tables.\n\nThe reset process does not clean your kubeconfig files and you must remove them manually.\nPlease, check the contents of the $HOME/.kube/config file.\n[root@centos803 ~]# iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n\n# \u5219\u6267\u884c\u547d\u4ee4\uff0c\u7136\u540e\u518d\u6267\u884cjoin\u64cd\u4f5c\niptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#3kube-flannel","title":"3.kube-flannel\u7684\u72b6\u6001\u5f02\u5e38","text":"<ul> <li> <p>\u5177\u4f53\u5f02\u5e38\u4fe1\u606f Bash<pre><code>[root@centos801 ~]# kubectl get pods -n kube-system\nNAME                                READY   STATUS              RESTARTS   AGE\ncoredns-6d56c8448f-hnjbz            0/1     ContainerCreating   0          14m\ncoredns-6d56c8448f-tc4j2            0/1     ContainerCreating   0          14m\netcd-centos801                      1/1     Running             0          14m\nkube-apiserver-centos801            1/1     Running             0          14m\nkube-controller-manager-centos801   1/1     Running             0          14m\nkube-flannel-ds-8bvql               0/1     CrashLoopBackOff    6          9m41s\nkube-flannel-ds-lj5vp               0/1     CrashLoopBackOff    6          8m52s\nkube-flannel-ds-qxgq9               0/1     CrashLoopBackOff    7          11m\nkube-proxy-jsssg                    1/1     Running             0          14m\nkube-proxy-pq9rf                    1/1     Running             0          8m52s\nkube-proxy-z77tv                    1/1     Running             0          9m41s\nkube-scheduler-centos801            1/1     Running             0          14m\n</code></pre></p> </li> <li> <p>\u9519\u8bef\u539f\u56e0\u662f\u5728\u8fdb\u884ckubeadm init\u65f6\u6ca1\u6709\u6dfb\u52a0\u5982\u4e0b\u53c2\u6570 Bash<pre><code>--pod-network-cidr=10.244.0.0/16\n</code></pre></p> </li> <li> <p>\u4f46\u662f\u68c0\u67e5\u521d\u59cb\u5316\u547d\u4ee4\u6709\u8fdb\u884c\u8bbe\u7f6e\u6b64\u53c2\u6570 Bash<pre><code>kubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.19.4 \\\n--service-cidr=10.96.0.0/12 \n--pod-network-cidr=10.244.0.0/16\n</code></pre></p> </li> <li> <p>\u5bfb\u601d\u5343\u904d\uff0c\u82b1\u4e86\u8fd1\u4e09\u4e2a\u5c0f\u65f6\u5728chrome\u3001kubeadm init\u3001kube join \u4e4b\u95f4\u8f97\u8f6c\u53cd\u4fa7 Bash<pre><code>[root@centos801 ~]# kubeadm init \\\n&gt; --apiserver-advertise-address=192.168.33.131 \\\n&gt; --image-repository registry.aliyuncs.com/google_containers \\\n&gt; --kubernetes-version v1.19.4 \nW0312 14:43:44.370062  280711 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[init] Using Kubernetes version: v1.19.4\n[preflight] Running pre-flight checks\n        [WARNING FileExisting-tc]: tc not found in system path\n        [WARNING Hostname]: hostname \"centos801\" could not be reached\n        [WARNING Hostname]: hostname \"centos801\": lookup centos801 on 114.114.114.114:53: no such host\n</code></pre></p> </li> <li> <p>\u53d1\u73b0\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u4e22\u5931\uff0c\u6700\u7ec8\u4eba\u50bb\u6389\u4e86\uff0c--pod-network-cidr \u524d\u9762\u6dfb\u52a0\u4e00\u4e2a \"\\\",\u518d\u91cd\u65b0\u6267\u884cinit\u547d\u4ee4\uff0c\u5373\u53ef\u89e3\u51b3\u95ee\u9898 Bash<pre><code>kubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.19.4 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16\n\n[root@centos801 ~]# kubectl get pods -n kube-system\nNAME                                READY   STATUS    RESTARTS   AGE\ncoredns-6d56c8448f-qhftp            1/1     Running   0          3m42s\ncoredns-6d56c8448f-w8h9n            1/1     Running   0          3m42s\netcd-centos801                      1/1     Running   0          3m58s\nkube-apiserver-centos801            1/1     Running   0          3m59s\nkube-controller-manager-centos801   1/1     Running   0          3m58s\nkube-flannel-ds-5fljb               1/1     Running   0          52s\nkube-flannel-ds-cxk58               1/1     Running   0          22s\nkube-flannel-ds-z9zpr               1/1     Running   0          2m2s\nkube-proxy-ftvsz                    1/1     Running   0          3m42s\nkube-proxy-j6x7f                    1/1     Running   0          22s\nkube-proxy-l6pxl                    1/1     Running   0          52s\nkube-scheduler-centos801            1/1     Running   0          3m58s\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#4initjoin","title":"4.\u91cd\u65b0\u8fdb\u884c\u96c6\u7fa4init\u548cjoin\u64cd\u4f5c\u7684\u6b63\u786e\u6d41\u7a0b","text":"Bash<pre><code># master\u548cnode\u8282\u70b9\u90fd\u9700\u8981\u6267\u884c\nkubeadm reset --force\niptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n\n# \u53ea\u5728master\u8282\u70b9\u6267\u884c\nkubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.19.4 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16 \n\n# \u53ea\u5728node\u8282\u70b9\u6267\u884c\nkubeadm join 192.168.33.131:6443 --token hxxxre.qbaa224113efwjs1 \\\n  --discovery-token-ca-cert-hash sha256:208d7b79e19f460c5311eeeddfc9102316932d877f717b8bb1bc86dbb85133a7\n</code></pre> <p>1/ \u5404\u7ec4\u4ef6\u542f\u52a8\u5931\u8d25\u65f6\uff0c\u5982\u4f55\u65b9\u4fbf\u7684\u67e5\u770b\u9519\u8bef\uff1f \u53ef\u4f7f\u7528\u547d\u4ee4 <code>systemctl status &lt;\u7ec4\u4ef6\u540d&gt;</code> \u6216 <code>journalctl -xefu &lt;\u7ec4\u4ef6\u540d&gt;</code>\u67e5\u770b\u65e5\u5fd7\u3002 2/ \u6ce8\u610fcgroup\u542f\u52a8\u95ee\u9898 Text Only<pre><code>failed to create kubelet: misconfiguration: kubelet cgroup driver: \"cgroupfs\" is different from docker cgroup driver: \"systemd\"\n</code></pre> kubelet \u9ed8\u8ba4\u4f7f\u7528 <code>cgroupfs</code> \u542f\u52a8\uff0c\u53ef\u4fee\u6539\u4e3adocker \u7684<code>systemd</code>\uff0c \u6216\u4fee\u6539docker \u542f\u52a8\u4e3a <code>cgroupfs</code>\u3002 docker \u4fee\u6539\u7684\u5730\u65b9\u4e3a /etc/docker/daemon.json Text Only<pre><code>{\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\n</code></pre> kuberlet \u53ef\u4fee\u6539systemd \u7684service\u4e2d\u542f\u52a8\u547d\u4ee4\u589e\u52a0<code>--cgroup-driver</code>\u53c2\u6570\uff1a Text Only<pre><code># \u53ef\u6307\u5b9a\u542f\u52a8\u53c2\u6570 \nDOCKER_CGROUPS=$(docker info | grep 'Cgroup' | cut -d' ' -f3)\n--cgroup-driver=$DOCKER_CGROUPS\n</code></pre> 3/ \u8282\u70b9\u5220\u9664\u540e\u5982\u4f55\u91cd\u65b0\u6388\u6743\uff1f \u8282\u70b9\u5220\u9664\u540e\uff0c\u91cd\u542f kubelet\u3002\u5728Master \u7aef\u662f\u770b\u4e0d\u5230\u7533\u8bf7\u4fe1\u606f\u7684\uff0c\u9700\u8981\u5c06\u4e0a\u6b21\u7533\u8bf7\u7684\u8bc1\u4e66\u5220\u9664\uff0c\u518d\u91cd\u542f\u3002 Text Only<pre><code># master\nkubectl delete node node01\n# node01 \nrm -f /opt/kubernetes/ssl/kubelet*\nsystemctl restart kubelet\n</code></pre> 4/ \u6392\u67e5pod\u65e0\u6cd5\u542f\u52a8\u7684\u601d\u8def Text Only<pre><code># 1. \u5148\u67e5\u770bpod\u7684\u6700\u8fd1\u7684\u64cd\u4f5c\nkubectl describe pod &lt;pod-name&gt; -n kube-system \n# 2. \u67e5\u770bpod \u7684\u65e5\u5fd7\nkubectl logs pod &lt;pod-name&gt;\n</code></pre> 5/ \u89e3\u51b3Dashboard 2.0 chrome\u6d4f\u89c8\u5668\u4e0d\u80fd\u8bbf\u95ee\u7684\u95ee\u9898 Text Only<pre><code>mkdir key &amp;&amp; cd key\n# 1 \u751f\u6210\u8bc1\u4e66\nopenssl genrsa -out dashboard.key 2048\nopenssl req -new -out dashboard.csr -key dashboard.key -subj '/CN=kubernetes-dashboard-certs'\nopenssl x509 -req -in dashboard.csr -signkey dashboard.key -out dashboard.crt\n# 2 \u5220\u9664\u539f\u6709\u7684\u8bc1\u4e66secret\nkubectl delete secret kubernetes-dashboard-certs -n kube-system\n# 3 \u521b\u5efa\u65b0\u7684\u8bc1\u4e66secret\nkubectl create secret generic kubernetes-dashboard-certs --from-file=dashboard.key --from-file=dashboard.crt -n kube-system\n# 4 \u67e5\u770bdashboard pod\uff0cv2.0\u662f -n kubernetes-dashboard\nkubectl get pod -n kube-system\n# 5 \u91cd\u542fdashboard pod\uff0cv2.0\u662f -n kubernetes-dashboard\nkubectl delete pod &lt;pod name&gt; -n kube-system\n</code></pre> 6/ \u5982\u4f55\u5f7b\u5e95\u7684\u5220\u9664\u4e00\u4e2apod? K8S\u4e2dpod \u662f\u6709<code>deployments</code>\u6765\u53d1\u5e03\u7684\uff0c\u6240\u4ee5\u76f4\u63a5\u5220\u9664pod\u540e\uff0ck8s\u65e0\u6cd5\u8bc6\u522b\u662f\u4eba\u4e3a\u8fd8\u662f\u6545\u969c\uff0c\u5b83\u4f1a\u6839\u636e<code>deployments</code> \u63cf\u8ff0\u7684\u4fe1\u606f\uff0c\u91cd\u65b0\u542f\u52a8\u4e00\u4e2apod\u3002\u6240\u4ee5\u8981\u5220\u9664pod \u65f6\uff0c\u76f4\u63a5\u5220\u9664\u5bf9\u5e94\u7684 <code>deployments</code>\uff0cpod\u4f1a\u81ea\u52a8\u5220\u9664\u3002 Text Only<pre><code>kubectl delete deployment &lt;deployment_name&gt; -n &lt;namespace&gt;\n</code></pre> 7/ \u8282\u70b9\u7ef4\u62a4\u65f6\uff0c\u5982\u4f55\u624b\u52a8\u9a71\u8d76pod? Text Only<pre><code># 1\u3001\u6807\u8bb0\u8282\u70b9\u4e0d\u53ef\u8c03\u5ea6\nkubectl cordon &lt;node name&gt;\n# 2\u3001\u624b\u52a8\u8fc1\u79fbpod \nkubectl drain &lt;node name&gt; --delete-local-data --ignore-daemonsets --force\n# 3\u3001\u5e26\u8282\u70b9\u7ef4\u62a4\u5b8c\u6210\u4e4b\u540e\uff0c\u6062\u590d\u53ef\u8c03\u5ea6\nkubectl uncordon &lt;node name&gt;\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#5-kubeadm-k8s1194","title":"5. kubeadm \u5b89\u88c5k8s1.19.4\u9700\u8981\u7684\u955c\u50cf\u8bf4\u660e\uff1a","text":"<p>\u6267\u884ckubeadm init \u5361\u5728pull image \uff0c\u7531\u4e8e\u9ed8\u8ba4\u6e90\u662f\u8c37\u6b4c\uff0c\u955c\u50cf\u901a\u5e38\u62c9\u53d6\u4e0d\u4e0b\u6765\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u56fd\u5185\u6e90\u8fdb\u884c\u5fc5\u8981\u955c\u50cf\u7684\u62c9\u53d6</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step1kubeadm","title":"step1:\u67e5\u770b\u5f53\u524d\u7248\u672c\u7684kubeadm \u9700\u8981\u7684\u955c\u50cf\u5305\u548c\u7248\u672c","text":"Bash<pre><code>kubeadm  config images list  \n</code></pre> <ul> <li>\u65e5\u5fd7 Bash<pre><code>(base) [root@automlgpu4 k8s]# kubeadm config images list\nW0608 17:33:50.021855   83264 version.go:102] could not fetch a Kubernetes version from the internet: unable to get URL \"https://dl.k8s.io/release/stable-1.txt\": Get \"https://dl.k8s.io/release/stable-1.txt\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)\nW0608 17:33:50.022758   83264 version.go:103] falling back to the local client version: v1.19.4\nW0608 17:33:50.023105   83264 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\nk8s.gcr.io/kube-apiserver:v1.19.4\nk8s.gcr.io/kube-controller-manager:v1.19.4\nk8s.gcr.io/kube-scheduler:v1.19.4\nk8s.gcr.io/kube-proxy:v1.19.4\nk8s.gcr.io/pause:3.2\nk8s.gcr.io/etcd:3.4.13-0\nk8s.gcr.io/coredns:1.7.0\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step2","title":"step2:\u5c06\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\u5bfc\u51fa\u5e76\u7f16\u8f91","text":"<p>Bash<pre><code>kubeadm config print init-defaults &gt; kubeadm.conf \nvim kubeadm.conf  # \u6253\u5f00\u6587\u4ef6\u5e76\u4fee\u6539\n</code></pre> Bash<pre><code>(base) [root@automlgpu4 k8s]# vim kubeadm.conf \n\n 1 kubeadm.conf                                                                                                                                                                            X \n apiVersion: kubeadm.k8s.io/v1beta2\n bootstrapTokens:\n - groups:\n   - system:bootstrappers:kubeadm:default-node-token\n   token: abcdef.0123456789abcdef\n   ttl: 24h0m0s\n   usages:\n   - signing\n   - authentication\n kind: InitConfiguration\n localAPIEndpoint:\n   advertiseAddress: 172.16.2.117  # \u672c\u673a\u7684ip\n   bindPort: 6443\n nodeRegistration:\n   criSocket: /var/run/dockershim.sock\n   name: automlgpu4\n   taints:\n   - effect: NoSchedule\n     key: node-role.kubernetes.io/master\n ---\n apiServer:\n   timeoutForControlPlane: 4m0s\n apiVersion: kubeadm.k8s.io/v1beta2\n certificatesDir: /etc/kubernetes/pki\n clusterName: kubernetes\n controllerManager: {}\n dns:\n   type: CoreDNS\n etcd:\n   local:\n     dataDir: /var/lib/etcd\n imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers  # \u66f4\u66f4\u6362\u4e3a\u963f\u91cc\u955c\u50cf\u6e90\n kind: ClusterConfiguration\n kubernetesVersion: v1.19.4\n networking:\n   dnsDomain: cluster.local\n   serviceSubnet: 10.96.0.0/12\n scheduler: {}\n ~                                                                                                                                                                                           \n ~                                                                                                                                                                                           \n ~             \n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step3image","title":"step3:\u62c9\u53d6image","text":"Bash<pre><code>kubeadm config images pull --config kubeadm.conf \n</code></pre> <ul> <li>\u65e5\u5fd7 Bash<pre><code>(base) [root@automlgpu4 k8s]# kubeadm config images pull --config kubeadm.conf\nW0608 17:09:52.812134   60183 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.13-0\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step4","title":"step4: \u4fee\u6539\u955c\u50cf\u6807\u7b7e","text":"Bash<pre><code>docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.4 k8s.gcr.io/kube-apiserver:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.4 k8s.gcr.io/kube-controller-manager:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.4 k8s.gcr.io/kube-scheduler:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.4 k8s.gcr.io/kube-proxy:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2 k8s.gcr.io/pause:3.2\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.13-0 k8s.gcr.io/etcd:3.4.13-0\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0 k8s.gcr.io/coredns:1.7.0\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step5kubeadm-init","title":"step5:\u6267\u884ckubeadm init \u64cd\u4f5c","text":"Bash<pre><code>kubeadm init --config kubeadm.conf\n</code></pre> <ul> <li>\u65e5\u5fd7\uff1a Bash<pre><code>(base) [root@automlgpu4 k8s]# kubeadm init --config kubeadm.conf \nW0608 17:24:49.913798   72683 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[init] Using Kubernetes version: v1.19.4\n[preflight] Running pre-flight checks\n[preflight] Pulling images required for setting up a Kubernetes cluster\n[preflight] This might take a minute or two, depending on the speed of your internet connection\n[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'\n[certs] Using certificateDir folder \"/etc/kubernetes/pki\"\n[certs] Generating \"ca\" certificate and key\n[certs] Generating \"apiserver\" certificate and key\n[certs] apiserver serving cert is signed for DNS names [automlgpu4 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 172.16.2.117]\n[certs] Generating \"apiserver-kubelet-client\" certificate and key\n[certs] Generating \"front-proxy-ca\" certificate and key\n[certs] Generating \"front-proxy-client\" certificate and key\n[certs] Generating \"etcd/ca\" certificate and key\n[certs] Generating \"etcd/server\" certificate and key\n[certs] etcd/server serving cert is signed for DNS names [automlgpu4 localhost] and IPs [172.16.2.117 127.0.0.1 ::1]\n[certs] Generating \"etcd/peer\" certificate and key\n[certs] etcd/peer serving cert is signed for DNS names [automlgpu4 localhost] and IPs [172.16.2.117 127.0.0.1 ::1]\n[certs] Generating \"etcd/healthcheck-client\" certificate and key\n[certs] Generating \"apiserver-etcd-client\" certificate and key\n[certs] Generating \"sa\" key and public key\n[kubeconfig] Using kubeconfig folder \"/etc/kubernetes\"\n[kubeconfig] Writing \"admin.conf\" kubeconfig file\n[kubeconfig] Writing \"kubelet.conf\" kubeconfig file\n[kubeconfig] Writing \"controller-manager.conf\" kubeconfig file\n[kubeconfig] Writing \"scheduler.conf\" kubeconfig file\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Starting the kubelet\n[control-plane] Using manifest folder \"/etc/kubernetes/manifests\"\n[control-plane] Creating static Pod manifest for \"kube-apiserver\"\n[control-plane] Creating static Pod manifest for \"kube-controller-manager\"\n[control-plane] Creating static Pod manifest for \"kube-scheduler\"\n[etcd] Creating static Pod manifest for local etcd in \"/etc/kubernetes/manifests\"\n[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory \"/etc/kubernetes/manifests\". This can take up to 4m0s\n[apiclient] All control plane components are healthy after 17.004681 seconds\n[upload-config] Storing the configuration used in ConfigMap \"kubeadm-config\" in the \"kube-system\" Namespace\n[kubelet] Creating a ConfigMap \"kubelet-config-1.19\" in namespace kube-system with the configuration for the kubelets in the cluster\n[upload-certs] Skipping phase. Please see --upload-certs\n[mark-control-plane] Marking the node automlgpu4 as control-plane by adding the label \"node-role.kubernetes.io/master=''\"\n[mark-control-plane] Marking the node automlgpu4 as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]\n[bootstrap-token] Using token: abcdef.0123456789abcdef\n[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials\n[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token\n[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster\n[bootstrap-token] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace\n[kubelet-finalize] Updating \"/etc/kubernetes/kubelet.conf\" to point to a rotatable kubelet client certificate and key\n[addons] Applied essential addon: CoreDNS\n[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 172.16.2.117:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:ede5cb0692ec5bf94eb0b2305ac3bea32e25bc10e87dce5a9c9be25bbcedc9cc \n(base) [root@automlgpu4 k8s]# mkdir -p $HOME/.kube\n(base) [root@automlgpu4 k8s]# sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n(base) [root@automlgpu4 k8s]# sudo chown $(id -u):$(id -g) $HOME/.kube/config\n(base) [root@automlgpu4 k8s]# kubectl get node \nNAME         STATUS     ROLES    AGE   VERSION\nautomlgpu4   NotReady   master   41s   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_core_name/","title":"k8s\u6838\u5fc3\u6982\u5ff5","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_core_name/#_1","title":"\u58f0\u660e\u5f0f\u7ba1\u7406","text":"<ul> <li>\u901a\u8fc7yml\u58f0\u660e\u671f\u671b\u7684\u72b6\u6001\uff0ck8s\u81ea\u52a8\u6839\u636e\u5b9a\u4e49\u7684\u72b6\u6001\u8fdb\u884c\u8c03\u5ea6\uff08\u76f8\u5bf9\u547d\u4ee4\u5f0f\u7ba1\u7406\u800c\u8a00\uff0ck8s\u4e5f\u63d0\u4f9b\u547d\u4ee4\u5f0f\u7ba1\u7406\u7684\u65b9\u5f0f</li> <li>\u58f0\u660e\u5f0f\uff1a<code>kubectl apply -f &lt;directory&gt;</code></li> <li>\u547d\u4ee4\u5f0f\uff1a<code>kubectl run xxx,  kubectl expose...</code></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_core_name/#_2","title":"\u540d\u8bcd\u53ca\u89e3\u91ca","text":"<ul> <li>Master node: \u96c6\u7fa4\u4e3b\u63a7\u8282\u70b9\uff0c\u4e0a\u9762\u8fd0\u884c\u8c03\u5ea6\u5bb9\u5668\uff0c\u7ba1\u7406\u5bb9\u5668\uff1b</li> <li>Worker node:\u5de5\u4f5c\u8282\u70b9\uff0c\u4e0a\u9762\u8fd0\u884c\u5e94\u7528\u7684\u5bb9\u5668\uff1b</li> <li>Pods: \u5bb9\u5668\uff0ck8s\u5bf9\u5bb9\u5668\u8fdb\u884c\u7ba1\u7406\uff0c \u81ea\u52a8\u521b\u5efa\u3001\u9500\u6bc1\u5bb9\u5668\uff1b </li> <li>Service: \u4f7f\u7528\u6807\u7b7e\u9009\u62e9\u7b97\u7b26\uff08selectors) \u6807\u8bc6\u4e00\u7ec4pod,\u5728\u96c6\u7fa4\u5185\u6709\u56fa\u5b9aIP,\u53ef\u4ee5\u7528\u4e8e\u96c6\u7fa4\u5185\u90e8\u5bb9\u5668/\u5e94\u7528\u63d0\u4f9b\u7a33\u5b9a\u7684\u8bbf\u95ee\u5165\u53e3\uff0c\u53ef\u4ee5\u901a\u8fc7service\u540d\u79f0\u8bbf\u95ee\u5230\u670d\u52a1</li> <li>Deployment:\u4e00\u5957\u90e8\u7f72\u5bb9\u5668\u7684\u96c6\u5408\uff1b</li> <li>ReplicationController:\u53ef\u4ee5\u590d\u5236\u7684\u5bb9\u5668\uff0c\u529f\u80fd\u96c6\u6bd4ReplicaSet\u5c11\uff0c\u5df2\u4e0d\u63a8\u8350\u4f7f\u7528\uff1b</li> <li>ReplicaSet:\u53ef\u4ee5\u6269\u5bb9\u3001\u7f29\u5bb9\u7684\u5bb9\u5668\u526f\u672c\u96c6\uff0c\u5728\u5bb9\u5668\u96c6\u4e0d\u9700\u8981\u72b6\u6001\uff0c\u4e5f\u4e0d\u9700\u8981\u88ab\u5176\u4ed6\u5bb9\u5668\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528ReplicaSet.\u5176\u4ed6\u5bb9\u5668\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95eeRS\uff0c \u53ef\u4ee5\u901a\u8fc7service\u6765\u8bbf\u95ee\uff1b</li> <li>StatefulSet:\u6709\u72b6\u6001\u7684\u670d\u52a1\uff0c\u6bd4\u5982zookeeper,\u96c6\u7fa4\u88ab\u5916\u90e8\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u9700\u8981\u6307\u5b9a\u591a\u4e2azookeeper\u670d\u52a1\u7684ip\u6216\u8005hostname.\u7531\u4e8e\u662f\u6709\u72b6\u6001\u7684\uff0c\u6bd4\u59823\u4e2a\u8282\u70b9\u7684zookeeper\uff0c \u4e0d\u8bba\u5982\u4f55\u7f29\u5bb9\uff08\u5305\u62ec\u5b95\u673a\u6062\u590d\uff09\uff0c3\u4e2a\u8282\u70b9\u5bb9\u5668\u540d\u79f0/\u4e3b\u673a\u540d\u603b\u662fzk-0, zk-1, zk-2</li> <li>Ingress: \u5bf9\u5916\u66b4\u9732\u53ef\u4ee5\u8bbf\u95ee\u7684\u5165\u53e3\uff0c\u4e3a\u670d\u52a1\u63d0\u4f9b\u5916\u7f51\uff08\u4ece\u96c6\u7fa4\u5916\uff09\u7684\u8bbf\u95ee\u5165\u53e3\uff1b</li> <li>Namespace:\u8d44\u6e90\u53ef\u4ee5\u653e\u5728namespace\u4e0b\u9762\uff0c \u4e0d\u540cnamespace\u4e4b\u95f4\u76f8\u4e92\u9694\u79bb\uff1b</li> <li>Controller:\u5305\u62ec\u6709\u8282\u70b9\u63a7\u5236\u5668\u3001\u8def\u7531\u63a7\u5236\u5668\u3001\u670d\u52a1\u63a7\u5236\u5668\uff1b</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_dashboard/","title":"k8s\u7684Dashboard\u5b89\u88c5","text":"Bash<pre><code># step1:\nwget https://raw.githubusercontent.com/kubernetes/dashboard/v2.2.0/aio/deploy/recommended.yaml\nvim recommended.yaml\n# \u4fee\u6539Service\u4e3aNodePort\u7c7b\u578b\n---\n......\nkind: Service\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nspec:\n  ports:\n    - port: 443\n      targetPort: 8443\n  selector:\n    k8s-app: kubernetes-dashboard\n  type: NodePort  # \u52a0\u4e0atype=NodePort\u53d8\u6210NodePort\u7c7b\u578b\u7684\u670d\u52a1\n---\n\n# step2:\n# \u521b\u5efa\nkubectl apply -f recommended.yaml \n\n# \u67e5\u770bpod\u7684\u72b6\u6001\nkubectl get pods -n kubernetes-dashboard -l k8s-app=kubernetes-dashboard\n\n# \u67e5\u770bsvc\u5206\u914d\u7684\u7aef\u53e3(note:\u8bbf\u95ee\u65f6\u9700\u8981\u4f7f\u7528https)\nkubectl get svc -n kubernetes-dashboard\n\n# step3:\n# \u521b\u5efa\u4e00\u4e2a\u5177\u6709\u5168\u5c40\u6240\u6709\u6743\u9650\u7684\u7528\u6237\u6765\u767b\u5f55Dashboard\uff1a(dashboard-admin.yaml)\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: admin\n  annotations:\n    rbac.authorization.kubernetes.io/autoupdate: \"true\"\nroleRef:\n  kind: ClusterRole\n  name: cluster-admin\n  apiGroup: rbac.authorization.k8s.io\nsubjects:\n- kind: ServiceAccount\n  name: admin\n  namespace: kubernetes-dashboard\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin\n  namespace: kubernetes-dashboard\n\n---\n# \u521b\u5efa\nkubectl apply -f admin.yaml\n\n# \u67e5\u770bsecret\nkubectl get secret -n kubernetes-dashboard|grep admin-token\n\n# \u4f1a\u751f\u6210\u4e00\u4e32\u5f88\u957f\u7684base64\u540e\u7684\u5b57\u7b26\u4e32\uff08echo &lt;token\u503c&gt; | base64 -d \uff09\nkubectl get secret &lt;secret\u540d\u79f0&gt; -o jsonpath={.data.token} -n kubernetes-dashboard |base64 -d\n\n# \u7528\u4e0a\u9762\u7684 base64 \u89e3\u7801\u540e\u7684\u5b57\u7b26\u4e32\u4f5c\u4e3a token \u767b\u5f55 Dashboard \u5373\u53ef\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/","title":"k8s\u4e2detcd\u6302\u8f7d\u5185\u5b58\u5377\u6b65\u9aa4","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step1-api-server-etcd","title":"STEP1: \u505c\u6389API-server\u548c etcd","text":"Bash<pre><code>systemctl stop kubelet &amp;&amp; systemctl stop containerd\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step2-etcfstab-tmpfs","title":"STEP2: \u4fee\u6539/etc/fstab \u52a0\u4e0atmpfs\u6302\u8f7d\u9879","text":"Bash<pre><code>mkdir /data/etcd-data\nmount -a\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step3","title":"STEP3\uff1a \u62f7\u8d1d\u6570\u636e\u5230\u65b0\u7684\u6587\u4ef6\u5939\u4e0b\uff0c \u7136\u540e\u521b\u5efa\u8f6f\u8fde\u63a5","text":"Bash<pre><code>cp -r /var/lib/etcd/* /data/etcd-data\nrm -rf /var/lib/etcd\nln -s /data/etcd-data /var/lib/etcd\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step4-api-server-etcd","title":"STEP4: \u91cd\u542fAPI-server \u548c etcd \u89c2\u5bdf\u96c6\u7fa4\u662f\u5426\u6b63\u5e38","text":"Bash<pre><code>systemctl stop containerd &amp;&amp; systemctl stop kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step5","title":"STEP5: \u8bbe\u7f6e\u81ea\u52a8\u5907\u4efd\u548c\u6062\u590d","text":"Bash<pre><code>mkdir /data/etcd-data-backup\n\n# \u5907\u4efd\nrsync  -a --delete --recursive --force /data/etcd-data /data/etcd-data-backup\n\n# \u8fd8\u539f\nrsync -a --recursive --force /data/etcd-data-backup /data/etcd-data\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/","title":"\u5b89\u88c5\uff1a","text":"<p>\u5171\u4eab\u6570\u636e\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a/data/k8s/share/</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#k8s-masternfs-server","title":"k8s-master\u8282\u70b9\u5b89\u88c5\uff08nfs-server\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#1","title":"1.\u5173\u95ed\u9632\u706b\u5899","text":"Bash<pre><code>systemctl stop firewalld.service &amp;&amp; systemctl disable firewalld.service\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#2nfs","title":"2.\u5b89\u88c5nfs\u53ca\u4f9d\u8d56","text":"Bash<pre><code> yum -y install nfs-utils rpcbind\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#3","title":"3.\u8bbe\u7f6e\u5171\u4eab\u76ee\u5f55\u6743\u9650","text":"Bash<pre><code>chmod 755 /data/k8s/share/\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#4nfs","title":"4.\u914d\u7f6enfs","text":"<p>\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a/etc/exports</p> Bash<pre><code>$ vi /etc/exports\n/data/k8s/share  *(rw,sync,no_root_squash)\n</code></pre> <ul> <li>\u914d\u7f6e\u53c2\u6570\u8bf4\u660e\uff1a</li> <li>*\uff1a\u8868\u793a\u4efb\u4f55\u4eba\u90fd\u6709\u6743\u9650\u8fde\u63a5\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u7f51\u6bb5\uff0c\u4e00\u4e2a IP\uff0c\u4e5f\u53ef\u4ee5\u662f\u57df\u540d</li> <li>rw\uff1a\u8bfb\u5199\u7684\u6743\u9650</li> <li>sync\uff1a\u8868\u793a\u6587\u4ef6\u540c\u65f6\u5199\u5165\u786c\u76d8\u548c\u5185\u5b58</li> <li>no_root_squash\uff1a\u5f53\u767b\u5f55 NFS \u4e3b\u673a\u4f7f\u7528\u5171\u4eab\u76ee\u5f55\u7684\u4f7f\u7528\u8005\u662f root \u65f6\uff0c\u5176\u6743\u9650\u5c06\u88ab\u8f6c\u6362\u6210\u4e3a\u533f\u540d\u4f7f\u7528\u8005\uff0c\u901a\u5e38\u5b83\u7684 UID \u4e0e GID\uff0c\u90fd\u4f1a\u53d8\u6210 nobody \u8eab\u4efd</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#5nfs-rpcbind","title":"5.\u542f\u52a8nfs\u4f9d\u8d56-rpcbind","text":"Bash<pre><code>systemctl start rpcbind.service &amp;&amp; systemctl enable rpcbind\n\n# \u67e5\u770b\u72b6\u6001\u662f\u5426\u4e3aactive\nsystemctl status rpcbind\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#6nfs","title":"6.\u542f\u52a8nfs","text":"Bash<pre><code>systemctl start nfs.service &amp;&amp; systemctl enable nfs\n\n# \u67e5\u770b\u72b6\u6001\u662f\u5426\u4e3aactive\nsystemctl status nfs\n</code></pre> <ul> <li>\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e0b\u547d\u4ee4\u786e\u8ba4\u662f\u5426\u5b89\u88c5\u542f\u52a8\u6210\u529f Bash<pre><code>$ rpcinfo -p|grep nfs\n    100003    3   tcp   2049  nfs\n    100003    4   tcp   2049  nfs\n    100227    3   tcp   2049  nfs_acl\n    100003    3   udp   2049  nfs\n    100003    4   udp   2049  nfs\n    100227    3   udp   2049  nfs_acl\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#7","title":"7.\u67e5\u770b\u6302\u8f7d\u76ee\u5f55\u6743\u9650","text":"Bash<pre><code>$ cat /var/lib/nfs/etab \n/data/k8s/share *(rw,sync,wdelay,hide,nocrossmnt,secure,no_root_squash,no_all_squash,no_subtree_check,secure_locks,acl,no_pnfs,anonuid=65534,anongid=65534,sec=sys,rw,secure,no_root_squash,no_all_squash)\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#k8s-nodenfs-client","title":"k8s-node\u8282\u70b9\u5b89\u88c5\uff08nfs-client\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#1server","title":"1.\u5173\u95ed\u9632\u706b\u5899\uff08\u540cserver\u7aef\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#2nfsserver","title":"2.\u5b89\u88c5nfs\u53ca\u4f9d\u8d56\uff08\u540cserver\u7aef\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#3nfsserver","title":"3.\u542f\u52a8nfs\u548c\u4f9d\u8d56\uff08\u540cserver\u7aef\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#4nfs_1","title":"4.\u68c0\u67e5nfs\u6536\u662f\u5426\u6709\u5171\u4eab\u76ee\u5f55","text":"Bash<pre><code>$ showmount -e 172.16.2.117\nExport list for 172.16.2.117:\n/data/k8s/share *\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#5client","title":"5.\u5728client\u65b0\u5efa\u76ee\u5f55","text":"Bash<pre><code>$ mkdir -p /data/kubeadm/data\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#6nfs_1","title":"6.\u5c06nfs\u5171\u4eab\u76ee\u5f55\u6302\u8f7d\u5230\u4e0a\u8ff0\u65b0\u5efa\u76ee\u5f55\u4e2d","text":"Bash<pre><code>$ mount -t nfs 172.16.2.117:/data/k8s/share /data/kubeadm/data\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#7_1","title":"7.\u6d4b\u8bd5","text":"<ul> <li>\u5728client\u7aef\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6</li> <li>\u5728server\u67e5\u770b\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#_2","title":"\u4f7f\u7528\uff1a","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#1nfs-client-classyaml","title":"1.\u521b\u5efanfs-client-class.yaml","text":"YAML<pre><code>apiVersion: storage.k8s.io/v1\n kind: StorageClass\n metadata:\n   name: kubeflow-nfs-storage\n   annotations:\n     storageclass.kubernetes.io/is-default-class: \"true\"\n provisioner: fuseim.pri/ifs # or choose another name, must match deployment's env PROVISIONER_NAME'\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#2nfs-client-deploymentyaml","title":"2.\u521b\u5efanfs-client-deployment.yaml","text":"YAML<pre><code>apiVersion: apps/v1\n kind: Deployment\n metadata:\n   name: nfs-client-provisioner\n   labels:\n     app: nfs-client-provisioner\n   namespace: default\n spec:\n   replicas: 1\n   strategy:\n     type: Recreate\n   selector:\n     matchLabels:\n       app: nfs-client-provisioner\n   template:\n     metadata:\n       labels:\n         app: nfs-client-provisioner\n     spec:\n       serviceAccountName: nfs-client-provisioner\n       containers:\n         - name: nfs-client-provisioner\n           image: quay.io/external_storage/nfs-client-provisioner:latest\n           volumeMounts:\n             - name: nfs-client-root\n               mountPath: /persistentvolumes\n           env:\n             - name: PROVISIONER_NAME\n               value: fuseim.pri/ifs\n             - name: NFS_SERVER\n               value: 172.16.2.117\n             - name: NFS_PATH\n               value: /data/k8s/share\n       volumes:\n         - name: nfs-client-root\n           nfs:\n             server: 172.16.2.117\n             path: /data/k8s/share\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#3nfs-client-sayaml","title":"3.\u521b\u5efanfs-client-sa.yaml","text":"YAML<pre><code>apiVersion: v1\n kind: ServiceAccount\n metadata:\n   name: nfs-client-provisioner\n\n ---\n kind: ClusterRole\n apiVersion: rbac.authorization.k8s.io/v1\n metadata:\n   name: nfs-client-provisioner-runner\n rules:\n   - apiGroups: [\"\"]\n     resources: [\"persistentvolumes\"]\n     verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"]\n   - apiGroups: [\"\"]\n     resources: [\"persistentvolumeclaims\"]\n     verbs: [\"get\", \"list\", \"watch\", \"update\"]\n   - apiGroups: [\"storage.k8s.io\"]\n     resources: [\"storageclasses\"]\n     verbs: [\"get\", \"list\", \"watch\"]\n   - apiGroups: [\"\"]\n     resources: [\"events\"]\n     verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n   - apiGroups: [\"\"]\n     resources: [\"endpoints\"]\n     verbs: [\"create\", \"delete\", \"get\", \"list\", \"watch\", \"patch\", \"update\"]\n\n ---\n kind: ClusterRoleBinding\n apiVersion: rbac.authorization.k8s.io/v1\n metadata:\n   name: run-nfs-client-provisioner\n subjects:\n   - kind: ServiceAccount\n     name: nfs-client-provisioner\n     namespace: default\n roleRef:\n   kind: ClusterRole\n   name: nfs-client-provisioner-runner\n   apiGroup: rbac.authorization.k8s.io\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#4","title":"4.\u6267\u884c\uff1a","text":"Bash<pre><code>kubectl apply -f nfs-client-class.yaml\nkubectl apply -f nfs-client-deployment.yaml\nkubectl apply -f nfs-client-sa.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#5","title":"5.\u67e5\u770b\uff1a","text":"Bash<pre><code>$ kubectl get pods \nNAME                                      READY   STATUS             RESTARTS   AGE\nnfs-client-provisioner-5bb4f74bfb-v9sqz   1/1     running            13         5d20h\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/","title":"k8s\u5b9e\u7528\u5c0f\u6280\u5de7","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#1yaml","title":"1.\u5feb\u901f\u7f16\u5199yaml\u6587\u4ef6","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#step1yaml","title":"STEP1:\u4f7f\u7528\u547d\u4ee4\u751f\u6210yaml\u6587\u4ef6","text":"Bash<pre><code># kubectl create \nkubectl create deployment web --image=nginx -o yaml --dry-run\n# -o \u4f7f\u7528yaml\u683c\u5f0f\u5c55\u793a\n# -dry-run \u5c1d\u8bd5\u8fd0\u884c\uff0c\u5e76\u4e0d\u4f1a\u771f\u6b63\u8fd0\u884c\n# \u4fdd\u5b58\u81f3myweb.yaml\n\nkubectl create deployment web --image=nginx -o yaml --dry-run &gt; myweb.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#step2-yaml","title":"STEP2:\u4f7f\u7528\u547d\u4ee4\u5bfc\u51fa yaml \u6587\u4ef6","text":"Bash<pre><code>kubectl get\nkubectl get deploy # \u67e5\u770b\u90e8\u7f72\nkubectl get deploy nginx -o yaml --export &gt; myweb.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#_1","title":"k8s\u5b9e\u7528\u5c0f\u6280\u5de7","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#_2","title":"k8s\u5b9e\u7528\u5c0f\u6280\u5de7","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#2composek8s","title":"2.\u628acompose\u6587\u4ef6\u8f6c\u6362\u6210k8s\u58f0\u660e\u5f0f\u914d\u7f6e\u6587\u4ef6\u3002","text":"<ul> <li> <p>\u4e0b\u8f7d\u94fe\u63a5\uff1ahttps://github.com/kubernetes/kompose/releases/ Bash<pre><code># \u4e0b\u8f7d\u5b89\u88c5\ncurl -L https://github.com/kubernetes/kompose/releases/download/v1.22.0/kompose-darwin-amd64 -o kompose\n\nchmod +x compose &amp;&amp; sudo mv kompose /usr/local/bin/\n\n# \u4f7f\u7528\n#step1:\nkompose convert     \n\nstep2:\u8c03\u6574\u8f6c\u6362\u540e\u7684\u6587\u4ef6\u5185\u5bb9\n\nstep3:kubectl apply -f k8s  # \u5b89\u88c5\u5e94\u7528\u5230k8s\u96c6\u7fa4\n</code></pre></p> </li> <li> <p>\u6548\u679c Bash<pre><code>(base) \u279c  bluewhale_docker ls\nbk-docker-compose.yml bluewhale             compose               docker-compose.yml    frontend              mysql\n(base) \u279c  bluewhale_docker kompose convert\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/compose/mysql/init/init.sql\" isn't supported - ignoring path on the host\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/compose/mysql/conf/my.cnf\" isn't supported - ignoring path on the host\nINFO Network db_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nINFO Network web_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/bluewhale\" isn't supported - ignoring path on the host\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/compose/bw_uwsgi\" isn't supported - ignoring path on the host\nINFO Network web_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nINFO Network db_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nINFO Kubernetes file \"mysqldb-service.yaml\" created\nINFO Kubernetes file \"nginx-service.yaml\" created\nINFO Kubernetes file \"website-service.yaml\" created\nINFO Kubernetes file \"mysqldb-pod.yaml\" created\nINFO Kubernetes file \"mysqldb-claim0-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"bluewhale-db-vol-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"mysqldb-claim2-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"db_network-networkpolicy.yaml\" created\nINFO Kubernetes file \"nginx-pod.yaml\" created\nINFO Kubernetes file \"static-volume-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"web_network-networkpolicy.yaml\" created\nINFO Kubernetes file \"website-pod.yaml\" created\nINFO Kubernetes file \"website-claim0-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"website-claim2-persistentvolumeclaim.yaml\" created\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#3k8sdjango","title":"3.\u4f7f\u7528k8s\u90e8\u7f72django\u5e94\u7528\u7684\u6d41\u7a0b\uff1a","text":"<ol> <li>\u642d\u5efak8s\u96c6\u7fa4\u73af\u5883</li> <li>\u914d\u7f6ekube/config\u6587\u4ef6\uff08<code>vim ~/.kube/config</code>\uff09   </li> <li>\u914d\u7f6e\u5b8c\u6210\u4ee5\u540e\u53ef\u4ee5\u901a\u8fc7<code>kubectl</code> \u548c\u96c6\u7fa4\u8fdb\u884c\u4ea4\u4e92</li> <li>\u4f7f\u7528Dockerfile\u6587\u4ef6\u7f16\u5199Django\u670d\u52a1\u5e76\u751f\u6210\u955c\u50cf\uff0c\u6216\u8005\u4f7f\u7528docker-compose\u751f\u6210\uff0c</li> <li>\u5982\u679c\u4f7f\u7528docker-compose\u751f\u6210\u7684\u955c\u50cf\uff0c\u53ef\u4ee5\u4f7f\u7528kompose \u811a\u672c\u5de5\u5177\u5bf9docker-compose\u6587\u4ef6\u8f6c\u6210k8s\u7684yaml\u6587\u4ef6</li> <li>\u4fee\u6539\u751f\u6210\u7684yaml\u6587\u4ef6\uff0c</li> <li>\u4f7f\u7528<code>kubectl apply -f \u6587\u4ef6/\u6587\u4ef6\u5939</code> \uff0c\u8fd0\u884c \u670d\u52a1\u7684\u5bb9\u5668\u0153</li> </ol>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#4-djangok8s","title":"4. \u90e8\u7f72django\u670d\u52a1\u5230\u963f\u91cc\u4e91\u7684k8s\u96c6\u7fa4\u7684\u6d41\u7a0b","text":"<ul> <li>step1\uff1a\u521b\u5efakubernetes\u96c6\u7fa4\uff0c\u521b\u5efa\u955c\u50cf\u4ed3\u5e93</li> <li>step2: \u914d\u7f6e\u672c\u5730\u7684kubeconfig</li> <li>step3: Docker login \u5230\u955c\u50cf\u4ed3\u5e93</li> <li>step4: Docker build &amp; docker push \u63a8\u9001\u955c\u50cf\u5230\u955c\u50cf\u4ed3\u5e93</li> <li>step5:  k8s \u90e8\u7f72\u5230\u96c6\u7fa4\uff1a<code>kubectl apply -f k8s</code></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/","title":"k8s\u5b9e\u7528\u5de5\u5177\u4e4bKtConnect","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#_1","title":"\u6982\u8ff0","text":"<ul> <li>\u5b98\u7f51\u94fe\u63a5</li> </ul> <p>KtConnect \u662f\u963f\u91cc\u5f00\u6e90\u7684\u4e00\u6b3e\u4e91\u539f\u751f\u534f\u540c\u5f00\u53d1\u6d4b\u8bd5\u89e3\u51b3\u65b9\u6848,\u65e8\u5728\u63d0\u5347\u5f00\u53d1\u8005\u5728Kubernetes \u573a\u666f\u4e0b\u7684\u672c\u5730\u5f00\u53d1\u6d4b\u8bd5\u6548\u7387,\u5b83\u901a\u8fc7\u5efa\u7acb\u672c\u5730\u5230K8S\u96c6\u7fa4\u7684\u53cc\u5411\u901a\u9053,\u5141\u8bb8\u5f00\u53d1\u8005\u5728\u672c\u5730\u76f4\u63a5\u8bbf\u95eeK8S\u96c6\u7fa4\u670d\u52a1,\u6216\u5c06K8S\u96c6\u7fa4\u7684\u6d41\u91cf\u8f6c\u53d1\u5230\u672c\u5730.\u7b80\u8a00\u4e4b,KtConnect\u662f\u9762\u5411K8S\u7684\u672c\u5730\u5f00\u53d1\u8005\u8f85\u52a9\u5de5\u5177.</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#_2","title":"\u5b89\u88c5","text":"<ul> <li>\u4e0b\u8f7d\u94fe\u63a5</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#1kubectl-client","title":"1\u3001\u4e0b\u8f7dkubectl client \u547d\u4ee4\u884c\u5de5\u5177","text":"<ul> <li>\u94fe\u63a5</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#2","title":"2\u3001\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u5e76\u9a8c\u8bc1","text":"Bash<pre><code>kubectl version --client\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4]\u276f kubectl version --client\nClient Version: v1.29.2\nKustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#3k8sconfig","title":"3\u3001\u914d\u7f6eK8S\u96c6\u7fa4\u7684config","text":"<ul> <li>\u5c06k8s\u96c6\u7fa4\u7684config\u914d\u7f6e\u6587\u4ef6\u62f7\u8d1d\u5230<code>C:\\Users\\xxxx\\.kube</code> \u6587\u4ef6\u5939\u4e2d</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#4k8s","title":"4\u3001\u9a8c\u8bc1\u662f\u5426\u80fd\u8fde\u63a5\u5230k8s\u96c6\u7fa4","text":"Bash<pre><code>kubectl cluster-info\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4] \u276f kubectl cluster-info\nKubernetes control plane is running at https://172.x.x.x:6443\nCoreDNS is running at https://172.16.2.129:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#5ktconnect","title":"5\u3001\u4e0b\u8f7dktconnect\u5e76\u914d\u7f6e","text":"<ul> <li>\u4e0b\u8f7d kt connect \u5e76\u5c06\u5176\u653e\u5230\u548ckubectl client \u7684\u540c\u4e00\u4e2a bin\u76ee\u5f55\u4e0b</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#6","title":"6\u3001\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f","text":"Bash<pre><code>ktctl -v\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4] \u276f ktctl -v\nktctl version 0.3.7\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#7","title":"7\u3001\u542f\u52a8","text":"<ul> <li>\u4f7f\u7528\u7ba1\u7406\u5458\u542f\u52a8Powershell,\u5e76\u542f\u52a8kt-connect</li> </ul> Bash<pre><code>ktctl connect -n &lt;namespace name&gt; --excludeIps 172.16.2.0/24   # &lt;\u7f51\u5173\u5730\u5740\u9700\u8981\u66f4\u6362\u6210\u4e3a\u81ea\u5df1\u7684\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4] \u276f ktctl connect -n bluewhale-platform --excludeIps 172.16.2.0/24\n4:15PM INF Using cluster context kubernetes-admin@kubernetes (kubernetes)\n4:15PM INF KtConnect 0.3.7 start at 22548 (windows amd64)\n4:15PM INF Fetching cluster time ...\n4:15PM INF Using tun2socks mode\n4:15PM INF Successful create config map kt-connect-shadow-odtnt\n4:15PM INF Deploying shadow pod kt-connect-shadow-odtnt in namespace bluewhale-platform\n4:15PM INF Waiting for pod kt-connect-shadow-odtnt ...\n4:15PM INF Pod kt-connect-shadow-odtnt is ready\n4:15PM INF Port forward local:10441 -&gt; pod kt-connect-shadow-odtnt:22 established\n4:15PM INF Socks proxy established\n2024/08/23 16:15:17 Using existing driver 0.14\n2024/08/23 16:15:17 Creating adapter\n4:15PM INF Tun device KtConnectTunnel is ready\n2024/08/23 16:15:17 Removed orphaned adapter \"KtConnectTunnel 1\"\n4:15PM INF Adding route to 10.96.0.0/16\n4:15PM INF Adding route to 100.90.254.0/24\n4:15PM INF Adding route to 100.82.112.0/24\n4:15PM INF Adding route to 100.85.170.0/24\n4:15PM INF Adding route to 100.103.44.0/24\n4:15PM INF Route to tun device completed\n4:15PM INF Setting up dns in local mode\n4:15PM INF Port forward local:45198 -&gt; pod kt-connect-shadow-odtnt:53 established\n4:15PM INF Setup local DNS with upstream [tcp:127.0.0.1:45198 udp:172.16.1.117:53]\n4:15PM INF Creating udp dns on port 53\n4:15PM INF ---------------------------------------------------------------\n4:15PM INF  All looks good, now you can access to resources in the kubernetes cluster\n4:15PM INF ---------------------------------------------------------------\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/","title":"kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.19.4)","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step1","title":"STEP1: \u524d\u7f6e\u5de5\u4f5c(\u51c6\u5907/\u68c0\u67e5\u73af\u5883)","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1","title":"1.\u96c6\u7fa4\u670d\u52a1\u5668\u8981\u6c42\uff1a","text":"<ul> <li>\u6bcf\u53f0\u673a\u5668 2 GB \u6216\u66f4\u591a\u7684\u5185\u5b58 (\u5982\u679c\u5c11\u4e8e\u8fd9\u4e2a\u6570\u5b57\u5c06\u4f1a\u5f71\u54cd\u60a8\u5e94\u7528\u7684\u8fd0\u884c\u5185\u5b58)</li> <li>2 CPU \u6216\u66f4\u591a</li> <li>\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u673a\u5668\u7684\u7f51\u7edc\u4e92\u901a</li> <li>\u53ef\u4ee5\u8bbf\u95ee\u5916\u7f51</li> <li>\u7981\u6b62 swap \u5206\u533a <p>eg:</p> </li> </ul> IP \u4e3b\u673a\u540d \u7cfb\u7edf\u7248\u672c CPU \u5185\u5b58 \u5907\u6ce8 192.168.33.131 master1 centos8.2 2G 2 <p>\u6b64\u914d\u7f6e\u4e3a\u6700\u4f4e\u8981\u6c42 | | 192.168.33.132 | node1 | centos8.2 | 2G | 2 |  | | 192.168.33.133 | node2 | centos8.2 | 2G | 2 |  |</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2ipdnshosts","title":"2.\u8bbe\u7f6e\u670d\u52a1\u5668\u9759\u6001IP/DNS/hosts\u4e3b\u673a\u540d","text":"<p>eg\uff1a</p> Bash<pre><code># \u67e5\u770b\u7f51\u5361\u540d\u5b57\nnmcli d\n\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0cxxx\u4e3a\u5bf9\u5e94\u7f51\u5361\u7684\u540d\u5b57\nvim /etc/sysconfig/network-scripts/ifcfg-xxx   \n\n# \u4fee\u6539\u5e76\u4fdd\u5b58\u7f51\u5361\u4fe1\u606f\uff08\u4fee\u6539demo\u5982\u4e0b\uff1a\uff09\nTYPE=\"Ethernet\"\nPROXY_METHOD=\"none\"\nBROWSER_ONLY=\"no\"\nBOOTPROTO=\"static\" #\u542f\u7528\u9759\u6001IP\u5730\u5740\nDEFROUTE=\"yes\"\nIPV4_FAILURE_FATAL=\"no\"\nIPV6INIT=\"yes\"\nIPV6_AUTOCONF=\"yes\"\nIPV6_DEFROUTE=\"yes\"\nIPV6_FAILURE_FATAL=\"no\"\nIPV6_ADDR_GEN_MODE=\"stable-privacy\"\nNAME=\"ens33\"\nUUID=\"5e51c653-26b7-4e87-bbe6-4a06df6ff1d4\"\nDEVICE=\"ens33\"\nONBOOT=\"yes\"\nIPADDR=\"192.168.33.132\" #\u8bbe\u7f6eIP\u5730\u5740\nNETMASK=\"255.255.255.0\"  #\u8bbe\u7f6e\u5b50\u7f51\u63a9\u7801\nGATEWAY=\"192.168.189.2\"  #\u8bbe\u7f6e\u7f51\u5173\nDNS1=\"8.8.8.8\"           #DNS\nDNS2=\"114.114.114.114\"\n\n# \u4fdd\u5b58\u9000\u51fa\u5e76\u91cd\u542f\u7f51\u5361 xxx\u4e3a\u7f51\u5361\u540d\nifup xxx\n\uff08eg: ifup ens33\uff09\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3hostname","title":"3.\u8bbe\u7f6e\u4e3b\u673a\u540d\uff08hostname\uff09","text":"Bash<pre><code># xxx\u4e3a\u4e3b\u673a\u540d \nhostnamectl set-hostname xxx \n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#4hosts","title":"4.\u67e5\u770b\u6216\u8bbe\u7f6ehosts","text":"<ul> <li>\u8282\u70b9\u7684 hostname \u5fc5\u987b\u4f7f\u7528\u6807\u51c6\u7684 DNS \u547d\u540d\uff0c\u53e6\u5916\u5343\u4e07\u4e0d\u7528\u4ec0\u4e48\u9ed8\u8ba4\u7684\u00a0<code>localhost</code>\u00a0\u7684 hostname\uff0c\u4f1a\u5bfc\u81f4\u5404\u79cd\u9519\u8bef\u51fa\u73b0\u7684\u3002\u5728 Kubernetes \u9879\u76ee\u91cc\uff0c\u673a\u5668\u7684\u540d\u5b57\u4ee5\u53ca\u4e00\u5207\u5b58\u50a8\u5728 Etcd \u4e2d\u7684 API \u5bf9\u8c61\uff0c\u90fd\u5fc5\u987b\u4f7f\u7528\u6807\u51c6\u7684 DNS \u547d\u540d\uff08RFC 1123\uff09\u3002\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u00a0<code>hostnamectl set-hostname ydzs-node1</code>\u00a0\u6765\u4fee\u6539 hostname\u3002 Bash<pre><code>vim /etc/hosts \u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\n192.168.33.131 master1\n192.168.33.132 node1\n192.168.33.133 node2\n\n\u6216\ncat &gt;&gt; /etc/hosts &lt;&lt; EOF\n192.168.33.131 master1\n192.168.33.132 node1\n192.168.33.133 node2\nEOF\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#5","title":"5.\u7981\u7528\u9632\u706b\u5899\uff1a","text":"Bash<pre><code>systemctl stop firewalld &amp;&amp; systemctl disable firewalld\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#6swap","title":"6.\u7981\u7528swap\uff08\u4ea4\u6362\u5206\u533a\uff09","text":"Bash<pre><code>swapoff -a  &amp;&amp; sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n\n\n# \u5907\u6ce8\u53c2\u8003\uff08\u901a\u5e38\u4ec5\u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u5373\u53ef\uff09\uff1a\n# \u5173\u95edSwap\uff0c\u673a\u5668\u91cd\u542f\u540e\u4e0d\u751f\u6548\nswapoff -a\n\n# \u4fee\u6539/etc/fstab\u6c38\u4e45\u5173\u95edSwap\ncp -p /etc/fstab /etc/fstab.bak$(date '+%Y%m%d%H%M%S')\n\n# CentOS\nsed -i \"s/\\/dev\\/mapper\\/centos-swap/\\#\\/dev\\/mapper\\/centos-swap/g\" /etc/fstab\n\n# \u4fee\u6539\u540e\u91cd\u65b0\u6302\u8f7d\u5168\u90e8\u6302\u8f7d\u70b9\nmount -a\n\n# \u67e5\u770bSwap\nfree -m\ncat /proc/swaps\n\n# \u6216\nsed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#7selinux","title":"7.\u7981\u7528selinux","text":"Bash<pre><code>setenforce 0    # \u4e34\u65f6\nsed -i \"s/^SELINUX=enforcing/SELINUX=disabled/g\" /etc/sysconfig/selinux\nsed -i \"s/^SELINUX=enforcing/SELINUX=disabled/g\" /etc/selinux/config\nsed -i \"s/^SELINUX=permissive/SELINUX=disabled/g\" /etc/sysconfig/selinux\nsed -i \"s/^SELINUX=permissive/SELINUX=disabled/g\" /etc/selinux/config\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#8br_netfilter","title":"8.\u52a0\u8f7dbr_netfilter\u6a21\u5757","text":"<ul> <li>\u7531\u4e8e\u5f00\u542f\u5185\u6838 ipv4 \u8f6c\u53d1\u9700\u8981\u52a0\u8f7d br_netfilter \u6a21\u5757 Bash<pre><code> modprobe br_netfilter\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#9ipv4iptables","title":"9.\u5c06\u6865\u63a5\u7684IPv4\u6d41\u91cf\u4f20\u9012\u5230iptables\u7684\u94fe","text":"Bash<pre><code>cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\nEOF\n\n# \u91cd\u542f\u751f\u6548\nsysctl --system \n\u6216\nsysctl -p /etc/sysctl.d/k8s.conf\n</code></pre> <p>Explain: bridge-nf \u4f7f\u5f97 netfilter \u53ef\u4ee5\u5bf9 Linux \u7f51\u6865\u4e0a\u7684 IPv4/ARP/IPv6 \u5305\u8fc7\u6ee4\u3002\u6bd4\u5982\uff0c\u8bbe\u7f6e<code>net.bridge.bridge-nf-call-iptables\uff1d1</code>\u540e\uff0c\u4e8c\u5c42\u7684\u7f51\u6865\u5728\u8f6c\u53d1\u5305\u65f6\u4e5f\u4f1a\u88ab iptables\u7684 FORWARD \u89c4\u5219\u6240\u8fc7\u6ee4\u3002\u5e38\u7528\u7684\u9009\u9879\u5305\u62ec\uff1a    - net.bridge.bridge-nf-call-arptables\uff1a\u662f\u5426\u5728 arptables \u7684 FORWARD \u4e2d\u8fc7\u6ee4\u7f51\u6865\u7684 ARP \u5305    - net.bridge.bridge-nf-call-ip6tables\uff1a\u662f\u5426\u5728 ip6tables \u94fe\u4e2d\u8fc7\u6ee4 IPv6 \u5305    - net.bridge.bridge-nf-call-iptables\uff1a\u662f\u5426\u5728 iptables \u94fe\u4e2d\u8fc7\u6ee4 IPv4 \u5305    - net.bridge.bridge-nf-filter-vlan-tagged\uff1a\u662f\u5426\u5728 iptables/arptables \u4e2d\u8fc7\u6ee4\u6253\u4e86 vlan \u6807\u7b7e\u7684\u5305\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#10-ipvs","title":"10.\u5b89\u88c5 ipvs\uff1a","text":"<ul> <li> <p>\u4fdd\u8bc1\u5728\u8282\u70b9\u91cd\u542f\u540e\u80fd\u81ea\u52a8\u52a0\u8f7d\u6240\u9700\u6a21\u5757\u3002\u4f7f\u7528<code>lsmod | grep -e ip_vs -e nf_conntrack_ipv4</code>\u547d\u4ee4\u67e5\u770b\u662f\u5426\u5df2\u7ecf\u6b63\u786e\u52a0\u8f7d\u6240\u9700\u7684\u5185\u6838\u6a21\u5757 Bash<pre><code>cat &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;EOF\n#!/bin/bash\nmodprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack_ipv4\nEOF\n\nchmod 755 /etc/sysconfig/modules/ipvs.modules &amp;&amp; bash /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4\n</code></pre></p> </li> <li> <p>\u63a5\u4e0b\u6765\u8fd8\u9700\u8981\u786e\u4fdd\u5404\u4e2a\u8282\u70b9\u4e0a\u5df2\u7ecf\u5b89\u88c5\u4e86 ipset \u8f6f\u4ef6\u5305\uff1a Bash<pre><code>yum install ipset\n</code></pre></p> </li> <li> <p>\u4e3a\u4e86\u4fbf\u4e8e\u67e5\u770b ipvs \u7684\u4ee3\u7406\u89c4\u5219\uff0c\u6700\u597d\u5b89\u88c5\u4e00\u4e0b\u7ba1\u7406\u5de5\u5177 ipvsadm\uff1a Bash<pre><code>yum install ipvsadm -y\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#11","title":"11.\u540c\u6b65\u670d\u52a1\u5668\u65f6\u95f4","text":"Bash<pre><code>#yum\u548cdnf\u90fd\u53ef\u4ee5\u5b89\u88c5\uff0c\u63a8\u8350\u7528dnf\nyum install chrony -y\nsystemctl enable chronyd &amp;&amp; systemctl start chronyd\n\n#\u5907\u4efd\u914d\u7f6e\ncp /etc/chrony.conf  /etc/chrony.conf.orig\n#\u6ce8\u89e3\u6389pool\nsed -i '/^pool/s/^/#/' /etc/chrony.conf\ngrep '#pool' /etc/chrony.conf\nsed -i '/#pool/a\\server cn.pool.ntp.org iburst' /etc/chrony.conf\nsed -i '/#pool/a\\server ntp.ntsc.ac.cn iburst' /etc/chrony.conf\nsed -i '/#pool/a\\server ntp1.aliyun.com iburst' /etc/chrony.conf\ngrep -A 3 '#pool' /etc/chrony.conf\n\n# \u91cd\u542f\nsystemctl restart chronyd.service\n\nchronyc sources\n# \u8f93\u51fa\u5982\u4e0b\u5185\u5bb9\n210 Number of sources = 4\nMS Name/IP address         Stratum Poll Reach LastRx Last sample               \n===============================================================================\n^- 0.cl.ntp.edgeuno.com          3   6     7     1  -3631us[+4657us] +/-  286ms\n^? ntp8.flashdance.cx            2   6     5     1  -6585us[+1703us] +/-  172ms\n^* time.neu.edu.cn               1   6     7     1   -104us[+8184us] +/-   29ms\n^+ ntp6.flashdance.cx            2   6     7     0    -16ms[  -16ms] +/-  188ms\n(base) [root@automlgpu3 ~]# date\nWed Jun 30 13:53:22 CST 2021\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#12","title":"12.\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6","text":"Bash<pre><code>yum install -y vim  lrzsz wget curl man tree rsync gcc gcc-c++ cmake telnet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step2docker","title":"STEP2:\u5b89\u88c5\u4f9d\u8d56\u2014\u2014Docker","text":"<p>\u8be6\u60c5\u67e5\u9605\uff1a\u3010docker-\u5b89\u88c5-\u5378\u8f7d\u6307\u5357\u3011</p> <ul> <li>Note:</li> <li>\u7531\u4e8e\u9ed8\u8ba4\u60c5\u51b5\u4e0b kubelet \u4f7f\u7528\u7684 cgroupdriver \u662f systemd\uff0c\u6240\u4ee5\u9700\u8981\u4fdd\u6301 docker \u548ckubelet \u7684 cgroupdriver \u4e00\u81f4\uff0c\u6211\u4eec\u8fd9\u91cc\u4fee\u6539 docker \u7684 cgroupdriver=systemd\u3002\u5982\u679c\u4e0d\u4fee\u6539 docker \u5219\u9700\u8981\u4fee\u6539 kubelet \u7684\u542f\u52a8\u914d\u7f6e\uff0c\u9700\u8981\u4fdd\u8bc1\u4e24\u8005\u4e00\u81f4\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step3kubeadmkubeletkubectl","title":"STEP3:\u5b89\u88c5kubeadm/kubelet/kubectl","text":"<p>Note:  - \u6267\u884c\u6b64\u6b65\u9aa4\u524d\u786e\u4fddSTEP1\u548cSTEP2\u90fd\u6210\u529f\u6267\u884c - \u4e0b\u5217\u8fc7\u7a0b\u4f7f\u7528\u6267\u884cyum\u6e90\u7684\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5 - \u6b64\u6b65\u9aa4\u6240\u6709\u7684\u7ed3\u70b9\u90fd\u9700\u8981\u6267\u884c</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1yum","title":"1.\u8bbe\u7f6eyum\u6e90","text":"<ul> <li> <p>\u80fd\u4f7f\u7528\u79d1\u5b66\u4e0a\u7f51\u8bbe\u7f6e\u6e90\u7684\u65b9\u5f0f Bash<pre><code>cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg\n        https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg\nEOF\n</code></pre></p> </li> <li> <p>\u4e0d\u80fd\u79d1\u5b66\u4e0a\u7f51\u8bbe\u7f6e\u6e90\u7684\u65b9\u5f0f Bash<pre><code>cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\n        http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2yum","title":"2.\u91cd\u65b0\u6784\u5efayum\u7f13\u5b58","text":"Bash<pre><code>yum -y install epel-release\nyum clean all\nyum makecache\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3kubeadmkubeletkubectl","title":"3.\u5b89\u88c5kubeadm/kubelet/kubectl","text":"Bash<pre><code>yum -y install kubelet-1.19.4 kubeadm-1.19.4 kubectl-1.19.4\n\n# \u67e5\u770b k8s \u7684\u7248\u672c\nkubelet --version\n\n# \u67e5\u770b kubeadm \u7684\u7248\u672c\nkubeadm version\n\n# \u67e5\u770b kubectl \u7248\u672c\nkubectl version --client\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#4kubelet","title":"4.\u8bbe\u7f6ekubelet\u670d\u52a1\u5f00\u673a\u542f\u52a8","text":"Bash<pre><code>systemctl enable kubelet &amp;&amp; systemctl start kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step4","title":"STEP4: \u521d\u59cb\u5316\u96c6\u7fa4","text":"<p>Note: master\u7ed3\u70b9\u914d\u7f6ekubeadm \u521d\u59cb\u5316\u6587\u4ef6 - \u6267\u884c\u7684\u521d\u59cb\u5316\u7684\u65b9\u5f0f\u6709\u591a\u79cd    - \u914d\u7f6eyaml\u7684\u65b9\u5f0f    - \u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u914d\u7f6e\u53c2\u6570\u65b9\u5f0f</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#yaml","title":"\u65b9\u5f0f\u4e00\uff1a\u914d\u7f6eyaml\u7684\u65b9\u5f0f","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1_1","title":"1.\u5bfc\u51fa\u9ed8\u8ba4\u7684\u521d\u59cb\u5316\u914d\u7f6e\uff1a","text":"Bash<pre><code>$ kubeadm config print init-defaults &gt; kubeadm.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2","title":"2.\u6839\u636e\u9700\u6c42\u4fee\u6539\u914d\u7f6e","text":"<ul> <li>kube-proxy \u7684\u6a21\u5f0f\u4e3a ipvs</li> <li>\u5b89\u88c5 flannel \u7f51\u7edc\u63d2\u4ef6,\u9700\u8981\u5c06 networking.podSubnet \u8bbe\u7f6e\u4e3a<code>10.244.0.0/16</code>\uff1a</li> </ul> YAML<pre><code>apiVersion: kubeadm.k8s.io/v1beta2\nbootstrapTokens:\n- groups:\n  - system:bootstrappers:kubeadm:default-node-token\n  token: abcdef.0123456789abcdef\n  ttl: 24h0m0s\n  usages:\n  - signing\n  - authentication\nkind: InitConfiguration\nlocalAPIEndpoint:\n  advertiseAddress: 192.168.33.131  # apiserver \u8282\u70b9\u5185\u7f51IP\n  bindPort: 6443\nnodeRegistration:\n  criSocket: /var/run/dockershim.sock\n  name: ydzs-master  # \u9ed8\u8ba4\u8bfb\u53d6\u5f53\u524dmaster\u8282\u70b9\u7684hostname\n  taints:\n  - effect: NoSchedule\n    key: node-role.kubernetes.io/master\n---\napiServer:\n  timeoutForControlPlane: 4m0s\napiVersion: kubeadm.k8s.io/v1beta2\ncertificatesDir: /etc/kubernetes/pki\nclusterName: kubernetes\ncontrollerManager: {}\ndns:\n  type: CoreDNS\netcd:\n  local:\n    dataDir: /var/lib/etcd\nimageRepository: registry.aliyuncs.com/google_containers  # \u4fee\u6539\u6210\u963f\u91cc\u4e91\u955c\u50cf\u6e90\nkind: ClusterConfiguration\nkubernetesVersion: v1.16.2\nnetworking:\n  dnsDomain: cluster.local\n  podSubnet: 10.244.0.0/16  # Pod \u7f51\u6bb5\uff0cflannel\u63d2\u4ef6\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u7f51\u6bb5\n  serviceSubnet: 10.96.0.0/12\nscheduler: {}\n---\napiVersion: kubeproxy.config.k8s.io/v1alpha1\nkind: KubeProxyConfiguration\nmode: ipvs  # kube-proxy \u6a21\u5f0f\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3","title":"3.\u6267\u884c\u521d\u59cb\u5316","text":"Bash<pre><code>kubeadm init --config kubeadm.yaml\n\n# \u6267\u884c\u6210\u529f\u4f1a\u663e\u793a\u5982\u4e0b\u5185\u5bb9\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.33.131:6443 --token j7t5rh.7ao1kxy4ngj3ua2u \\\n    --discovery-token-ca-cert-hash sha256:22a3006ef3935419f13f3da59592f2450da4fd33035f81bd0d8048efd0cb38aa \n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_1","title":"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u914d\u7f6e\u53c2\u6570\u65b9\u5f0f","text":"Bash<pre><code>kubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.18.2 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16 \n</code></pre> <ul> <li>\u53c2\u6570\u8bf4\u660e\uff1a Bash<pre><code>--apiserver-advertise-address\uff1a\u672c\u673aIP\uff08\u4e5f\u662f Master\u7684IP\uff09\uff0c\u4f7f\u7528\u5185\u7f51IP\n--image-repository registry.aliyuncs.com/google_containers \uff1a\u62c9\u53d6\u955c\u50cf\u7684\u5730\u5740\uff0c\u8fd9\u91cc\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u955c\u50cf\u4ed3\u5e93\n--kubernetes-version\uff1a k8s \u7248\u672c\u53f7\n--service-cidr\uff1a\u66b4\u9732\u670d\u52a1\u7684IP\u7f51\u6bb5\uff0cIP\u4e0d\u4e0e\u73b0\u6709\u7684\u51b2\u7a81\u5c31\u53ef\u4ee5\n--pod-network-cidr\uff1a Pod\u7684IP\u7f51\u6bb5\uff0cIP\u4e0d\u4e0e\u73b0\u6709\u7684\u51b2\u7a81\u5c31\u53ef\u4ee5\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#kubeconfig","title":"\u62f7\u8d1d kubeconfig \u6587\u4ef6","text":"Bash<pre><code>$ mkdir -p $HOME/.kube\n$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n$ sudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_2","title":"\u67e5\u770b\u8282\u70b9\u4fe1\u606f","text":"<ul> <li>\u72b6\u6001\u4e3aNoteReady\u7684\u539f\u56e0\u662f\u6ca1\u6709\u5b89\u88c5\u7f51\u5361 Bash<pre><code>kubectl get nodes\n\n# \u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   NotReady   master   4h55m   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step5","title":"STEP5:\u6dfb\u52a0\u8282\u70b9","text":"<p>Note:  - \u5b89\u88c5kubeadm \u3001 kubelet \u3001kubectl  - \u5982\u679c\u5fd8\u4e86token\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u5217\u547d\u4ee4\u91cd\u65b0\u751f\u6210    - kubeadm token create --print-join-command</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1kubeadm-kubelet-kubectl","title":"1.\u5b89\u88c5kubeadm \u3001 kubelet \u3001kubectl","text":"<ul> <li>\u53ef\u4ee5\u53c2\u8003\u4e0a\u9762master\u8282\u70b9\u7684\u5b89\u88c5\u65b9\u5f0f</li> <li>\u6ce8\u610f:node\u8282\u70b9\u4e0d\u9700\u8981\u6267\u884cinit\u7684\u64cd\u4f5c</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2join","title":"2.\u6267\u884cjoin\u64cd\u4f5c","text":"Bash<pre><code>kubeadm join 192.168.33.131:6443 --token j7t5rh.7ao1kxy4ngj3ua2u \\\n    --discovery-token-ca-cert-hash sha256:22a3006ef3935419f13f3da59592f2450da4fd33035f81bd0d8048efd0cb38aa \n\n# \u6267\u884c\u6210\u529f\u540e\u4f1a\u663e\u793a\u5982\u4e0b\u5185\u5bb9\uff1a\n[root@centos803 ~]# kubeadm join 192.168.33.131:6443 --token whrgqy.u4qqzag60frlk4vw     --discovery-token-ca-cert-hash sha256:5846f57ce7e8843f5adc272a3261a8b5b158867328134ee745622eef2185e532\nW0304 14:10:56.883083   26739 join.go:346] [preflight] WARNING: JoinControlPane.controlPlane settings will be ignored when control-plane flag is not set.\n[preflight] Running pre-flight checks\n        [WARNING Hostname]: hostname \"centos803\" could not be reached\n        [WARNING Hostname]: hostname \"centos803\": lookup centos803 on 8.8.8.8:53: no such host\n[preflight] Reading configuration from the cluster...\n[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -oyaml'\n[kubelet-start] Downloading configuration for the kubelet from the \"kubelet-config-1.18\" ConfigMap in the kube-system namespace\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Starting the kubelet\n[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...\n\nThis node has joined the cluster:\n* Certificate signing request was sent to apiserver and a response was received.\n* The Kubelet was informed of the new secure connection details.\n\nRun 'kubectl get nodes' on the control-plane to see this node join the cluster.\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3master","title":"3.\u5728master\u67e5\u770b\u8282\u70b9\u4fe1\u606f","text":"<ul> <li>\u72b6\u6001\u4e3aNoteReady\u7684\u539f\u56e0\u662f\u6ca1\u6709\u5b89\u88c5\u7f51\u5361 Bash<pre><code>kubectl get nodes\n\n# \u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   NotReady   master   4h55m   v1.19.4\ncentos802   NotReady   &lt;none&gt;   4h16m   v1.19.4\ncentos803   NotReady   &lt;none&gt;   3h46m   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step6","title":"STEP6: \u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6","text":"<p>Note: \u5728master\u8282\u70b9\u5b89\u88c5\u5c31\u597d</p> <p>\u5e38\u7528\u7684kubernetes\u7f51\u7edc\u63d2\u4ef6\u6709\uff1a - flannel\uff08\u6b64\u5904\u9009\u62e9\u5b89\u88c5\uff09 - calico</p> <p>k8s\u5b98\u65b9\u6587\u6863\u4e2d\u7f51\u7edc\u63d2\u4ef6\u8bf4\u660e</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1flannel","title":"1.\u5b89\u88c5flannel","text":"<p>\u5f53\u6211\u4eec\u90e8\u7f72\u5b8c\u7f51\u7edc\u63d2\u4ef6\u540e\u6267\u884c ifconfig \u547d\u4ee4\uff0c\u6b63\u5e38\u4f1a\u770b\u5230\u65b0\u589e\u7684<code>cni0</code>\u4e0e<code>flannel1</code>\u8fd9\u4e24\u4e2a\u865a\u62df\u8bbe\u5907\uff0c\u4f46\u662f\u5982\u679c\u6ca1\u6709\u770b\u5230<code>cni0</code>\u8fd9\u4e2a\u8bbe\u5907\u4e5f\u4e0d\u7528\u592a\u62c5\u5fc3\uff0c\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf<code>/var/lib/cni</code>\u76ee\u5f55\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5e76\u4e0d\u662f\u8bf4\u90e8\u7f72\u6709\u95ee\u9898\uff0c\u800c\u662f\u8be5\u8282\u70b9\u4e0a\u6682\u65f6\u8fd8\u6ca1\u6709\u5e94\u7528\u8fd0\u884c\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u8be5\u8282\u70b9\u4e0a\u8fd0\u884c\u4e00\u4e2a Pod \u5c31\u53ef\u4ee5\u770b\u5230\u8be5\u76ee\u5f55\u4f1a\u88ab\u521b\u5efa\uff0c\u5e76\u4e14<code>cni0</code>\u8bbe\u5907\u4e5f\u4f1a\u88ab\u521b\u5efa\u51fa\u6765\u3002</p> Bash<pre><code>$ wget https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml\n# \u56e0\u4e3a\u6709\u8282\u70b9\u662f\u591a\u7f51\u5361\uff0c\u6240\u4ee5\u9700\u8981\u5728\u8d44\u6e90\u6e05\u5355\u6587\u4ef6\u4e2d\u6307\u5b9a\u5185\u7f51\u7f51\u5361\n# \u641c\u7d22\u5230\u540d\u4e3a kube-flannel-ds-amd64 \u7684 DaemonSet\uff0c\u5728kube-flannel\u5bb9\u5668\u4e0b\u9762\n$ vi kube-flannel.yml\n......\ncontainers:\n- name: kube-flannel\n  image: quay.io/coreos/flannel:v0.11.0-amd64\n  command:\n  - /opt/bin/flanneld\n  args:\n  - --ip-masq\n  - --kube-subnet-mgr\n  - --iface=eth0  # \u5982\u679c\u662f\u591a\u7f51\u5361\u7684\u8bdd\uff0c\u6307\u5b9a\u5185\u7f51\u7f51\u5361\u7684\u540d\u79f0\n......\n$ kubectl apply -f kube-flannel.yml  # \u5b89\u88c5 flannel \u7f51\u7edc\u63d2\u4ef6\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2master","title":"2.\u518d\u6b21\u5728master\u67e5\u770b\u8282\u70b9\u4fe1\u606f","text":"<ul> <li>\u72b6\u6001\u4e3aNoteReady\u7684\u539f\u56e0\u662f\u6ca1\u6709\u5b89\u88c5\u7f51\u5361 Bash<pre><code>kubectl get nodes\n\n# \u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   Ready      master   4h55m   v1.19.4\ncentos802   Ready      &lt;none&gt;   4h16m   v1.19.4\ncentos803   Ready      &lt;none&gt;   3h46m   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_3","title":"\u5907\u6ce8\u5185\u5bb9\uff1a","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_4","title":"\u91cd\u7f6e\u7684\u65b9\u6cd5\uff1a","text":"<p>\u5982\u679c\u4f60\u7684\u96c6\u7fa4\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u9047\u5230\u4e86\u5176\u4ed6\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u8fdb\u884c\u91cd\u7f6e\uff1a Bash<pre><code>$ kubeadm reset\n$ ifconfig cni0 down &amp;&amp; ip link delete cni0\n$ ifconfig flannel.1 down &amp;&amp; ip link delete flannel.1\n$ rm -rf /var/lib/cni/\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_5","title":"\u5f7b\u5e95\u5378\u8f7d\u7684\u65b9\u6cd5","text":"Bash<pre><code>#!/bin/bash\nkubeadm reset -f\nmodprobe -r ipip\nlsmod\nrm -rf ~/.kube/\nrm -rf /etc/kubernetes/\nrm -rf /etc/systemd/system/kubelet.service.d\nrm -rf /etc/systemd/system/kubelet.service\nrm -rf /usr/bin/kube*\nrm -rf /etc/cni\nrm -rf /opt/cni\nrm -rf /var/lib/etcd\nrm -rf /var/etcd\nyum -y remove kubeadm kubectl kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_6","title":"\u5e38\u7528\u63d2\u4ef6\u5b89\u88c5","text":"<p>\u6240\u6709\u7684\u63d2\u4ef6\u90fd\u5728master\u4e3b\u673a\u4e0a\u5b89\u88c5\uff0c\u5b83\u4f1a\u81ea\u52a8\u63a8\u9001\u5230node\u8282\u70b9\u4e0a\u5b89\u88c5\uff0c\u5982\u9700\u8981\u4f1a\u8fde\u63a5\u4e0amaster</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1kubernetes-dashboard","title":"1.\u5b89\u88c5kubernetes-dashboard","text":"<ul> <li> <p>\u4e0b\u8f7d\u5b89\u88c5 Text Only<pre><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.3/aio/deploy/recommended.yaml\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u662f\u5426\u5b89\u88c5\u6210\u529f Bash<pre><code>kubectl get po --all-namespaces|grep dashboard\n</code></pre></p> </li> <li> <p>\u4fee\u6539node\u4e3aNodePort\u6a21\u5f0f Bash<pre><code>kubectl patch svc -n kubernetes-dashboard kubernetes-dashboard -p '{\"spec\":{\"type\":\"NodePort\"}}'\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u670d\u52a1 svc\u662fservice\u662f\u7f29\u5199 Bash<pre><code>kubectl get svc -n kubernetes-dashboard\n</code></pre></p> </li> <li> <p>\u8bbf\u95ee\u6d4f\u89c8\u5668,\u4f7f\u7528https\u7684\u65b9\u5f0f\u8bbf\u95ee Text Only<pre><code>https://192.168.33.130:32005/\n</code></pre></p> </li> <li> <p>\u8f93\u5165\u521a\u521a\u521d\u59cb\u5316\u751f\u6210\u7684token: tsmqw9.wbp9qzvd2owjgj6s Text Only<pre><code>kubeadm join 192.168.33.132:6443 --token  \\\n    --discovery-token-ca-cert-hash sha256:5ca47847041f5f152d818e38355a8972174413cdb9f0f515393ffce773a5a2db\n</code></pre></p> </li> <li> <p>\u521b\u5efadashboard\u7ba1\u7406\u7528\u6237\u53catoken Text Only<pre><code># \u521b\u5efadashboard\u7ba1\u7406\u7528\u6237\nkubectl create serviceaccount dashboard-admin -n kubernetes-dashboard\n\n# \u7ed1\u5b9a\u7528\u6237\u4e3a\u96c6\u7fa4\u7ba1\u7406\u7528\u6237\nkubectl create clusterrolebinding dashboard-cluster-admin --clusterrole=cluster-admin \\\n--serviceaccount=kubernetes-dashboard:dashboard-admin\n\n# \u67e5\u770b\u7ba1\u7406\u7528\u6237\u7684token, \u5e76\u590d\u5236\u5230\u6d4f\u89c8\u5668\u4e2d\u767b\u5f55\nkubectl describe secret -n kubernetes-dashboard dashboard-admin-token\n</code></pre></p> </li> <li> <p>\u4e0b\u5217\u4e3a\u5b89\u88c5dashboard\u65f6\u6267\u884c\u6b65\u9aa4\u7684log\uff0c\u4f9b\u53c2\u8003 Text Only<pre><code>[root@centos801 ~]# kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.3/aio/deploy/recommended.yaml\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nnamespace/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nserviceaccount/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nservice/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nsecret/kubernetes-dashboard-certs configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nsecret/kubernetes-dashboard-csrf configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nsecret/kubernetes-dashboard-key-holder configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nconfigmap/kubernetes-dashboard-settings configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nrole.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nclusterrole.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nclusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\ndeployment.apps/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nservice/dashboard-metrics-scraper configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\ndeployment.apps/dashboard-metrics-scraper configured\n[root@centos801 ~]# kubectl get po --all-namespaces|grep dashboard\nkubernetes-dashboard   dashboard-metrics-scraper-6b4884c9d5-kmr82   1/1     Running            0          132m\nkubernetes-dashboard   dashboard-metrics-scraper-6b4884c9d5-nq7ns   1/1     Terminating        0          5h8m\nkubernetes-dashboard   kubernetes-dashboard-7bfbb48676-phc8t        1/1     Terminating        0          5h8m\nkubernetes-dashboard   kubernetes-dashboard-7bfbb48676-pjfgb        1/1     Running            0          132m\nkubernetes-dashboard   kubernetes-dashboard-7f99b75bf4-765h8        0/1     Pending            0          16s\n[root@centos801 ~]# kubectl patch svc -n kubernetes-dashboard kubernetes-dashboard -p '{\"spec\":{\"type\":\"NodePort\"}}'\n\nservice/kubernetes-dashboard patched\n[root@centos801 ~]# service/kubernetes-dashboard patched\n-bash: service/kubernetes-dashboard: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\n[root@centos801 ~]# kubectl patch svc -n kubernetes-dashboard kubernetes-dashboard -p '{\"spec\":{\"type\":\"NodePort\"}}'\nservice/kubernetes-dashboard patched (no change)\n[root@centos801 ~]# kubectl get svc -n kubernetes-dashboard\nNAME                        TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)         AGE\ndashboard-metrics-scraper   ClusterIP   10.106.23.98    &lt;none&gt;        8000/TCP        5h10m\nkubernetes-dashboard        NodePort    10.108.155.79   &lt;none&gt;        443:32005/TCP   5h10m\n[root@centos801 ~]# kubectl create serviceaccount dashboard-admin -n kubernetes-dashboard\nserviceaccount/dashboard-admin created\n[root@centos801 ~]# kubectl create clusterrolebinding dashboard-cluster-admin --clusterrole=cluster-admin \\\n&gt; --serviceaccount=kubernetes-dashboard:dashboard-admin\nclusterrolebinding.rbac.authorization.k8s.io/dashboard-cluster-admin created\n[root@centos801 ~]# kubectl describe secret -n kubernetes-dashboard dashboard-admin-token\nName:         dashboard-admin-token-qflhd\nNamespace:    kubernetes-dashboard\nLabels:       &lt;none&gt;\nAnnotations:  kubernetes.io/service-account.name: dashboard-admin\n              kubernetes.io/service-account.uid: 8a81530d-8abf-4af1-aa66-f026bbee16f7\n\nType:  kubernetes.io/service-account-token\n\nData\n====\ntoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6IldWZTB2aWVxWE0tVUhad3pQdnRhM1Z2a01PSi1rMS1EemdvQk44bVNMVkUifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tdG9rZW4tcWZsaGQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGFzaGJvYXJkLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiOGE4MTUzMGQtOGFiZi00YWYxLWFhNjYtZjAyNmJiZWUxNmY3Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.GdJoeFOZB_p0qvc1RmU0o2MfyCZl_ElWQzrieILwKCkPZpJlfDCPdXGBPkrtGlCIBfBvufaLwyFBeer9USb-3AcfwYBfACI5ZUUE6Wu6svTJwsMFdIIgCtWBDldcqKU1TRcGPaOaEIPkne_OZX4sn2hSny04wc4ewfv99iUakTBi8etBx4cBBs5V55lZ47aTb0DCsit8cKRsj-7nEqWX3yzlREe_UBvAa7nRXQaM4dcgGXolWphYYxQQAdLi3Iq2qzqxu3jdodWKgOa2pvMM0Opd_zbtVKsABZA0TihxtWs6w5clHpScsRt-urBNTJVz7tuYHkkV6AyO6CZ-8ZOCYg\nca.crt:     1025 bytes\nnamespace:  20 bytes\n\n[root@centos801 ~]# kubectl get nodes\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   Ready      master   6h47m   v1.18.2\ncentos802   NotReady   &lt;none&gt;   6h8m    v1.18.2\ncentos803   Ready      &lt;none&gt;   5h38m   v1.18.2\n</code></pre></p> </li> <li> <p>\u96c6\u7fa4\u6210\u529f\u90e8\u7f72</p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_7","title":"\u6269\u5c55","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1ca","title":"1.\u83b7\u53d6ca\u8bc1\u4e66\u7684\u65b9\u6cd5","text":"<p>discovery-token-ca-cert-hash \u7684\u503c\u662f\u4e0d\u4f1a\u53d8\u7684\uff0c\u60f3\u8981\u67e5\u770b\u5219\u6267\u884c\uff1a</p> Text Only<pre><code>openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed 's/^.* //'\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2_1","title":"2.\u914d\u7f6e\u81ea\u52a8\u8865\u5168\u7684\u547d\u4ee4","text":"Text Only<pre><code># \u5b89\u88c5bash\u81ea\u52a8\u8865\u5168\u63d2\u4ef6\nyum install bash-completion -y\n\n# \u8bbe\u7f6ekubectl\u4e0ekubeadm\u547d\u4ee4\u8865\u5168\uff0c\u4e0b\u6b21login\u751f\u6548\nkubectl completion bash &gt;/etc/bash_completion.d/kubectl\nkubeadm completion bash &gt; /etc/bash_completion.d/kubeadm\n\n------------------------------------\u6216\u8005\u4e0b\u9762\u7684\u65b9\u5f0f----------------------------------------------------------------\ndnf install bash-completion -y\nsource /usr/share/bash-completion/bash_completion\nsource &lt;(kubectl completion bash)\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/","title":"kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.27.9)","text":"<p>\u518d\u51fa\u53d1\uff0c\u5e94\u4e1a\u52a1\u9700\u8981\uff0c\u9700\u8981\u518d\u6b21\u7740\u624b\u90e8\u7f72 kubernetes \u96c6\u7fa4\uff0c\u4e4b\u524d\u5206\u522b\u9646\u7eed\u7528\u4e0d\u540c\u5de5\u5177\u90e8\u7f72\u8fc7\u4e0d\u540c\u7684\u7248\u672c\uff0c\u5728\u6b64\u518d\u505a\u4e00\u6b21\u5168\u65b0\u7684\u90e8\u7f72\uff0c\u5e76\u91cd\u65b0\u6574\u7406\u548c\u5f52\u6863\u4ee5\u524d\u90e8\u7f72\u7684\u6d41\u7a0b\u6b65\u9aa4\u548c\u9047\u5230\u7684\u95ee\u9898\u53ca\u89e3\u51b3\u529e\u6cd5\u3002\u2014\u20142024\u5e7408\u670816\u65e523:50:14\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#kubeadm-v1279","title":"kubeadm \u90e8\u7f72 v1.27.9 \u7248\u672c","text":"<p>\u672c\u6b21\u76ee\u6807\u662f\u642d\u5efa\u4e00\u4e2a\u4e00\u4e3b\u4e24\u4ece\u7684 k8s \u96c6\u7fa4\u3002\u786c\u4ef6\u8981\u6c42\u5efa\u8bae\u4e0d\u8981\u4f4e\u4e8e2 \u6838 CPU\u30012G \u5185\u5b58\u300120G \u786c\u76d8\uff0c\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u662f Linux\u3002 \u4e09\u53f0\u673a\u5668\u4e4b\u95f4\u9700\u8981\u914d\u7f6e SSH \u514d\u5bc6\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#_1","title":"\u524d\u7f6e\u51c6\u5907\u8bf4\u660e","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u9700\u8981\u5206\u522b\u5728\u6240\u6709\u673a\u5668\u4e0a\u6267\u884c\uff01\uff01\uff01</p> <ul> <li>\u786c\u4ef6\u8981\u6c42</li> </ul> \u673a\u5668\u914d\u7f6e \u7528\u9014 \u670d\u52a1\u5668\u4e3b\u673a\u540d \u5185\u7f51IP\u5730\u5740 2\u68384G\u5185\u5b58\uff0c50G\u786c\u76d8\uff0cCentOS 7.9\u64cd\u4f5c\u7cfb\u7edf \u7ba1\u7406\u8282\u70b9 node77 172.16.3.77 2\u68382G\u5185\u5b58\uff0c50G\u786c\u76d8\uff0cCentOS 7.9\u64cd\u4f5c\u7cfb\u7edf \u5de5\u4f5c\u8282\u70b9 node78 172.16.3.78 2\u68382G\u5185\u5b58\uff0c50G\u786c\u76d8\uff0cCentOS 7.9\u64cd\u4f5c\u7cfb\u7edf \u5de5\u4f5c\u8282\u70b9 node79 172.16.3.79 <ol> <li> <p>\u5173\u95ed\u9632\u706b\u5899\u53ca\u76f8\u5173\u914d\u7f6e Bash<pre><code># \u5173\u95ed\u548c\u7981\u7528\u9632\u706b\u5899\nsystemctl stop firewalld\nsystemctl disable firewalld\n\n# \u5173\u95edselinux\uff0cselinux \u662f Linux \u7cfb\u7edf\u4e0b\u7684\u4e00\u4e2a\u5b89\u5168\u670d\u52a1\uff0c\u9700\u8981\u5173\u95ed\nsetenforce 0  # \u4e34\u65f6\nsed -i 's/enforcing/disabled/' /etc/selinux/config  # \u6c38\u4e45\n\n# \u5173\u95ed Linux \u7684 swap \u5206\u533a\uff0c\u63d0\u5347 Kubernetes \u7684\u6027\u80fd\nswapoff -a  # \u4e34\u65f6\nsed -ri 's/.*swap.*/#&amp;/' /etc/fstab    # \u6c38\u4e45\n</code></pre></p> </li> <li> <p>\u6309\u7167\u89c4\u5212\u4fee\u6539\u4e3b\u673a\u540d</p> <p>K8s \u4f7f\u7528\u4e3b\u673a\u540d\u8fdb\u884c\u8282\u70b9\u7684\u901a\u4fe1\uff0c\u6240\u4ee5\u9700\u8981\u6309\u7167\u8868\u683c\u4e2d\u7684\u4e3b\u673a\u540d\u4fee\u6539 3 \u53f0\u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u3002\u6ce8\u610f\uff1aK8s \u8981\u6c42\u4e3b\u673a\u540d\u4f7f\u7528 \u201c-\u201d \u6216\u8005 \u201c.\u201d \u8fde\u63a5\uff0c\u4e0d\u80fd\u4f7f\u7528\u4e0b\u5212\u7ebf \u201c_\u201d\u3002</p> </li> </ol> Bash<pre><code># \u5728192.168.1.11 \u8fd9\u4e2a\u673a\u5668\u4e0a\u6267\u884c\u4fee\u6539\u4e3b\u673a\u540d\u547d\u4ee4\nhostnamectl set-hostname k8s-master\n\n# \u5728192.168.1.12 \u8fd9\u4e2a\u673a\u5668\u4e0a\u6267\u884c\u4fee\u6539\u4e3b\u673a\u540d\u547d\u4ee4\nhostnamectl set-hostname k8s-worker1\n\n# \u5728192.168.1.13 \u8fd9\u4e2a\u673a\u5668\u4e0a\u6267\u884c\u4fee\u6539\u4e3b\u673a\u540d\u547d\u4ee4\nhostnamectl set-hostname k8s-worker2\n</code></pre> <ol> <li> <p>\u4e3b\u673a\u540d\u89e3\u6790 Bash<pre><code># \u6dfb\u52a0\u5404\u4e2a\u8282\u70b9\u7684\u89e3\u6790\uff0cIP \u5730\u5740\u9700\u8981\u66ff\u6362\u4e3a\u4f60\u81ea\u5df1\u670d\u52a1\u5668\u7684\u5185\u7f51 IP \u5730\u5740\u3002\ncat &gt;&gt; /etc/hosts &lt;&lt; EOF\n192.168.1.11 k8s-master\n192.168.1.12 k8s-worker1\n192.168.1.13 k8s-worker2\nEOF\n</code></pre></p> </li> <li> <p>\u65f6\u95f4\u540c\u6b65</p> <p>K8s \u8981\u6c42\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u65f6\u95f4\u4e00\u81f4\uff0c\u4f7f\u7528 ntpdate\uff08Network Time Protocol\uff09\u4ece\u7f51\u7edc\u540c\u6b65\u65f6\u95f4\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 ntpdate\uff0c\u4e4b\u540e\u518d\u6267\u884c\u540c\u6b65\u547d\u4ee4\u3002</p> </li> </ol> Bash<pre><code># \u5b89\u88c5ntp\u670d\u52a1\nyum install ntpdate -y\n\n# \u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u65f6\u95f4\u670d\u52a1\u540c\u6b65\u65f6\u95f4 \nntpdate ntp1.aliyun.com\n\n\n###############PS#######################\n# \u5982\u679c\u63d0\u793a\u6ca1\u6709\u5339\u914d\u5230 ntpdate\uff08Unable to find a match: ntpdate\uff09\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 wlnmp \u7684\u8f6f\u4ef6\u6e90\u5b89\u88c5 wntp\uff0c\n# \u7136\u540e\u518d\u6267\u884c\u65f6\u95f4\u540c\u6b65\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n\nrpm -ivh http://mirrors.wlnmp.com/centos/wlnmp-release-centos.noarch.rpm\nyum install wntp -y\n\n# \u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u65f6\u95f4\u670d\u52a1\u540c\u6b65\u65f6\u95f4 \nntpdate ntp1.aliyun.com\n###############PS#######################\n</code></pre> <ol> <li>\u914d\u7f6e\u7f51\u8def <p>\u4e3a\u4e86\u8ba9 K8s \u80fd\u591f\u8f6c\u53d1\u7f51\u7edc\u6d41\u91cf\uff0c\u9700\u8981\u4fee\u6539 iptables \u7684\u914d\u7f6e\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5feb\u901f\u7f16\u8f91 \u201cetc/sysctl.d/k8s.conf\u201d \u914d\u7f6e\u6587\u4ef6\uff0c\u589e\u52a0 iptables \u7684\u914d\u7f6e\u3002</p> </li> </ol> Bash<pre><code># \u4fee\u6539 Linux \u5185\u6838\u53c2\u6570\uff0c\u6dfb\u52a0\u7f51\u6865\u8fc7\u6ee4\u548c\u5730\u5740\u8f6c\u53d1\u529f\u80fd\ncat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF\n\n# \u4f7f\u914d\u7f6e\u751f\u6548\nsudo sysctl --system\n</code></pre> <ol> <li>\u91cd\u542f\u670d\u52a1\u5668 Bash<pre><code># \u8fd0\u884c \u201creboot\u201d \u547d\u4ee4\uff0c\u91cd\u542f\u670d\u52a1\u5668\uff0c\u8ba9\u4ee5\u4e0a\u914d\u7f6e\u751f\u6548\nreboot\n</code></pre></li> </ol>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#_2","title":"\u5b89\u88c5\u76f8\u5173\u8f6f\u4ef6","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u9700\u8981\u5206\u522b\u5728\u6240\u6709\u673a\u5668\u4e0a\u6267\u884c\uff01\uff01\uff01</p> <ol> <li>\u5b89\u88c5 Docker <p>\u53ef\u4ee5\u4f7f\u7528 Docker \u6216 Podman \u4f5c\u4e3a\u8fd0\u884c\u5bb9\u5668\u7684\u8fd0\u884c\u65f6\u7ec4\u4ef6\uff0c\u518d\u6b21\u4f7f\u7528 Docker</p> </li> </ol> Bash<pre><code># \u901a\u8fc7 wget \u547d\u4ee4\u83b7\u53d6 docker \u8f6f\u4ef6\u4ed3\u5e93\u4fe1\u606f\nwget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo\n\n# \u5b89\u88c5 docker-ce\nyum -y install docker-ce\n\n# \u5f00\u542f docker \u670d\u52a1\nsystemctl enable docker &amp;&amp; systemctl start docker\n</code></pre> <p>Docker \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u914d\u7f6e\u963f\u91cc\u4e91\u63d0\u4f9b\u7684\u955c\u50cf\u5e93\u6765\u52a0\u901f\u955c\u50cf\u4e0b\u8f7d\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5feb\u901f\u7f16\u8f91 \u201c/etc/docker/daemon.json\u201d \u6587\u4ef6\uff0c\u589e\u52a0\u955c\u50cf\u5e93\u914d\u7f6e\uff0c\u6700\u540e\u518d\u91cd\u542f Docker \u670d\u52a1\u3002</p> Bash<pre><code># \u914d\u7f6e\u955c\u50cf\u4e0b\u8f7d\u52a0\u901f\u5668\uff0c\u56fd\u5185\u4f7f\u7528\u963f\u91cc\u4e91\u955c\u50cf\u5e93\u4f1a\u66f4\u5feb\ncat &gt; /etc/docker/daemon.json &lt;&lt; EOF\n{\n  \"registry-mirrors\": [\"https://b9pmyelo.mirror.aliyuncs.com\"],\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\nEOF\n\n# \u91cd\u542f docker \u670d\u52a1\nsystemctl restart docker\n</code></pre> <ol> <li>\u5b89\u88c5 cri-dockered <p>cri-dockerd \u7528\u4e8e\u4e3a Docker \u63d0\u4f9b\u4e00\u4e2a\u80fd\u591f\u652f\u6301 K8s \u5bb9\u5668\u8fd0\u884c\u65f6\u6807\u51c6\u7684\u5de5\u5177\uff0c\u4ece\u800c\u80fd\u591f\u8ba9 Docker \u4f5c\u4e3a K8s \u5bb9\u5668\u5f15\u64ce\u3002\u901a\u8fc7 wget \u4e0b\u8f7d cri-dockerd \u5b89\u88c5\u5305\uff0c\u7136\u540e\u901a\u8fc7 rpm \u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\u3002\u5982\u679c\u5b98\u65b9\u5730\u5740\u4e0b\u8f7d\u592a\u6162\uff0c\u53ef\u4ee5\u4f7f\u7528\u79bb\u7ebf\u5b89\u88c5\u5305\u8fdb\u884c\u5b89\u88c5</p> </li> </ol> Bash<pre><code># \u901a\u8fc7 wget \u547d\u4ee4\u83b7\u53d6 cri-dockerd\u8f6f\u4ef6\nwget https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.12/cri-dockerd-0.3.12-3.el7.x86_64.rpm\n# \u901a\u8fc7 rpm \u547d\u4ee4\u6267\u884c\u5b89\u88c5\u5305\nrpm -ivh cri-dockerd-0.3.12-3.el7.x86_64.rpm\n</code></pre> <p>\u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528 vi \u7f16\u8f91\u5668\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff08/usr/lib/systemd/system/cri-docker.service\uff09\uff0c\u5728 \u201cExecStart=/usr/bin/cri-dockerd --container-runtime-endpoint fd://\u201d \u8fd9\u4e00\u884c\u589e\u52a0 \u201c\u2013pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9\u201d\u3002</p> Bash<pre><code># \u6253\u5f00 cri-docker.service \u914d\u7f6e\u6587\u4ef6\nvi /usr/lib/systemd/system/cri-docker.service\n\n# \u4fee\u6539\u5bf9\u5e94\u7684\u914d\u7f6e\u9879\nExecStart=/usr/bin/cri-dockerd --container-runtime-endpoint fd:// --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u91cd\u65b0\u52a0\u8f7d\u5e76\u5f00\u542f cri-dockered \u670d\u52a1</p> Bash<pre><code># \u52a0\u8f7d\u914d\u7f6e\u5e76\u5f00\u542f\u670d\u52a1\nsystemctl daemon-reload\nsystemctl enable cri-docker &amp;&amp; systemctl start cri-docker\n</code></pre> <ol> <li>\u6dfb\u52a0\u963f\u91cc\u4e91 YUM \u8f6f\u4ef6\u6e90 <p>\u56fd\u5185\u662f\u65e0\u6cd5\u8bbf\u95ee K8s \u5b98\u65b9\u7684\u955c\u50cf\u5e93\uff0c\u5982\u679c\u4e0d\u589e\u52a0\u8fd9\u4e2a\u914d\u7f6e\uff0c\u540e\u7eed\u5c31\u65e0\u6cd5\u5b89\u88c5\u76f8\u5173\u5de5\u5177\u3002</p> </li> </ol> Bash<pre><code># \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5feb\u901f\u7f16\u8f91 \u201c/etc/yum.repos.d/kubernetes.repo\u201d \u914d\u7f6e\u6587\u4ef6\uff0c\u6dfb\u52a0\u963f\u91cc\u4e91\u7684\u955c\u50cf\u5e93\u3002\ncat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; EOF\n[kubernetes]\nname=Kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#kubeadmkubeletkubectl","title":"\u5b89\u88c5 kubeadm\u3001kubelet\u3001kubectl","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u9700\u8981\u5206\u522b\u5728\u6240\u6709\u673a\u5668\u4e0a\u6267\u884c\uff01\uff01\uff01</p> <p>kubeadm \u7528\u6765\u521d\u59cb\u5316 K8s \u96c6\u7fa4\uff1bkubelet \u662f\u6bcf\u4e2a\u8282\u70b9\u7684 K8s \u7ba1\u7406\u5458\uff1bkubectl \u662f K8s \u7684\u547d\u4ee4\u884c\u4ea4\u4e92\u5de5\u5177</p> Bash<pre><code># \u6307\u5b9a\u4e86\u5b89\u88c5\u7684\u7248\u672c\u662f 1.28.0\nyum install -y kubelet-1.28.0 kubeadm-1.28.0 kubectl-1.28.0\n\n# \u5b89\u88c5\u6210\u529f\u540e\uff0c\u914d\u7f6e\u5f00\u673a\u542f\u52a8\u670d\u52a1\nsystemctl enable kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#master-k8s","title":"Master \u8282\u70b9\u521d\u59cb\u5316 k8s","text":"<p>\u53ea\u9700\u8981\u5728 Master \u8282\u70b9\u4e0a\u6267\u884c\u4ee5\u4e0b\u521d\u59cb\u5316\u547d\u4ee4\uff01\uff01\uff01 Bash<pre><code># \u201capiserver-advertise-address\u201d \u53c2\u6570\u9700\u8981\u66ff\u6362\u6210\u81ea\u5df1\u7684 Master \u8282\u70b9\u670d\u52a1\u5668\u7684\u5185\u7f51 IP\u3002\n\nkubeadm init \\\n  --apiserver-advertise-address=192.168.1.11 \\\n  --image-repository registry.aliyuncs.com/google_containers \\\n  --kubernetes-version v1.28.0 \\\n  --service-cidr=10.96.0.0/12 \\\n  --pod-network-cidr=10.244.0.0/16 \\\n  --cri-socket=unix:///var/run/cri-dockerd.sock \\\n  --ignore-preflight-errors=all\n\n\n###############\u53c2\u6570\u8bf4\u660e#######################\n# apiserver-advertise-address\uff1a\u96c6\u7fa4\u5e7f\u64ad\u5730\u5740\uff0c\u7528 master \u8282\u70b9\u7684\u5185\u7f51 IP\u3002\n# image-repository\uff1a\u7531\u4e8e\u9ed8\u8ba4\u62c9\u53d6\u955c\u50cf\u5730\u5740 k8s.gcr.io \u56fd\u5185\u65e0\u6cd5\u8bbf\u95ee\uff0c\u8fd9\u91cc\u6307\u5b9a\u963f\u91cc\u4e91\u955c\u50cf\u4ed3\u5e93\u5730\u5740\u3002\n# kubernetes-version\uff1a K8s \u7248\u672c\uff0c\u4e0e\u4e0a\u9762\u5b89\u88c5\u7684\u8f6f\u4ef6\u7248\u672c\u4e00\u81f4\u3002\n# service-cidr\uff1a\u96c6\u7fa4 Service \u7f51\u6bb5\u3002pod-network-cidr\uff1a\u96c6\u7fa4 Pod \u7f51\u6bb5\u3002\n# cri-socket\uff1a\u6307\u5b9a cri-socket \u63a5\u53e3\uff0c\u6211\u4eec\u8fd9\u91cc\u4f7f\u7528 unix:///var/run/cri-dockerd.sock\u3002\n###############\u53c2\u6570\u8bf4\u660e#######################\n</code></pre></p> <p>\u6267\u884c\u6210\u529f\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u5185\u5bb9</p> <p>Bash<pre><code>[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.1.11:6443 --token xxxxxx \\\n        --discovery-token-ca-cert-hash sha256:xxxxxx\n</code></pre> \u5728\u4ee5\u4e0a\u8fd4\u56de\u7ed3\u679c\u4e2d\u6709 3 \u6761\u547d\u4ee4\u9700\u8981\u7acb\u5373\u6267\u884c\uff0c\u8fd9\u662f\u7528\u6765\u8bbe\u7f6e kubectl \u5de5\u5177\u7684\u7ba1\u7406\u5458\u6743\u9650\uff0c\u6267\u884c\u4e4b\u540e\u5c31\u53ef\u4ee5\u5728 Master \u8282\u70b9\u4e0a\u901a\u8fc7\u7ec8\u7aef\u7a97\u53e3\u4f7f\u7528 kubectl \u547d\u4ee4\u4e86\u3002 Bash<pre><code># \u5728 Master \u8282\u70b9\u4e0a\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre> \u5728\u8fd4\u56de\u7ed3\u679c\u7684\u6700\u540e\uff0c\u8fd8\u6709 1 \u6761 \u201ckubeadm join\u201d \u547d\u4ee4\uff0c\u8fd9\u4e2a\u662f\u7528\u6765\u52a0\u5165\u5de5\u4f5c\u8282\u70b9\u7684\uff0c\u9700\u8981\u5728\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#work-k8s","title":"work \u8282\u70b9\u52a0\u5165 k8s \u96c6\u7fa4","text":"<p>K8s \u521d\u59cb\u5316\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u5176\u4ed6 2 \u4e2a\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c \u201ckubeadm join\u201d \u547d\u4ee4\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u4e86 cri-dockerd \uff0c\u9700\u8981\u5728\u547d\u4ee4\u52a0\u4e0a \u201c\u2013cri-socket=unix:///var/run/cri-dockerd.sock\u201d \u53c2\u6570\uff08\u6ce8\uff1a\u5982\u679c\u4f7f\u7528\u516c\u6709\u4e91\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5148\u6253\u5f00 Master \u8282\u70b9\u6240\u5728\u670d\u52a1\u5668\u7684 6443 \u7aef\u53e3\uff0c\u8fd9\u4e2a\u662f K8s \u7684 API server \u7aef\u53e3\u3002\uff09 Bash<pre><code># \u5728\u4e24\u4e2a\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c\nkubeadm join 192.168.1.11:6443 --token xxxxxx \\\n        --discovery-token-ca-cert-hash sha256:xxxxxx \\\n        --cri-socket=unix:///var/run/cri-dockerd.sock\n\n\n###############PS#######################\n# \u547d\u4ee4\u4e2d token \u6709\u6548\u671f\u4e3a 24 \u5c0f\u65f6\uff0c\u5f53 token \u8fc7\u671f\u4e4b\u540e\uff0c\u6267\u884c \u201ckubeadm join\u201d \u547d\u4ee4\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u65f6\u53ef\u4ee5\u76f4\u63a5\u5728 Master \u8282\u70b9\u4e0a\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210\u65b0\u7684 token\uff0c\u7136\u540e\u518d\u4f7f\u7528 \u201ckubeadm join\u201d \u547d\u4ee4\u52a0\u5165\u8282\u70b9\u3002\nkubeadm token create --print-join-command\n###############PS#######################\n</code></pre> \u6b64\u65f6\uff0c\u6211\u4eec\u7684\u96c6\u7fa4\u5c31\u90e8\u7f72\u6210\u529f\u4e86\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 \u201ckubectl get node\u201d \u547d\u4ee4\u6765\u67e5\u770b\u96c6\u7fa4\u8282\u70b9\u72b6\u6001\u3002</p> <p>\u4f60\u4f1a\u6ce8\u610f\u5230\u6240\u6709\u8282\u70b9\u7684\u72b6\u6001\u90fd\u662f \u201cNotReady\u201d\uff0c\u8fd9\u662f\u7531\u4e8e\u96c6\u7fa4\u8fd8\u7f3a\u5c11\u7f51\u7edc\u63d2\u4ef6\uff0c\u96c6\u7fa4\u7684\u5185\u90e8\u7f51\u7edc\u8fd8\u6ca1\u6709\u6b63\u5e38\u8fd0\u4f5c\u3002</p> <p>Bash<pre><code>[root@k8s-master ~]# kubectl get node\nNAME           STATUS     ROLES           AGE   VERSION\nk8s-master     NotReady   control-plane   84m   v1.28.0\nk8s-worker1    NotReady   &lt;none&gt;          82m   v1.28.0\nk8s-worker2    NotReady   &lt;none&gt;          47s   v1.28.0\n</code></pre> \u5b89\u88c5 k8s \u7f51\u7edc\u63d2\u4ef6 K8s \u7f51\u7edc\u63d2\u4ef6\uff0c\u4e5f\u79f0\u4e3a\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3\uff08CNI\uff09\u63d2\u4ef6\uff0c\u662f\u5b9e\u73b0 K8s \u96c6\u7fa4\u4e2d\u5bb9\u5668\u95f4\u901a\u4fe1\u548c\u7f51\u7edc\u8fde\u63a5\u7684\u5173\u952e\u7ec4\u4ef6\u3002\u5728\u8fd9\u91cc\u6211\u4f7f\u7528 Calico \u4f5c\u4e3a\u96c6\u7fa4\u7684\u7f51\u7edc\u63d2\u4ef6\u3002Calico \u662f\u901a\u8fc7\u6267\u884c\u4e00\u4e2a YAML \u6587\u4ef6\u90e8\u7f72\u5230 K8s \u96c6\u7fa4\u91cc\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9996\u5148\u9700\u8981\u901a\u8fc7 \u201cwget\u201d \u547d\u4ee4\u4e0b\u8f7d\u8fd9\u4e2a YAML \u6587\u4ef6\u3002 Bash<pre><code># \u4e0b\u8f7d Calico \u63d2\u4ef6\u90e8\u7f72\u6587\u4ef6\nwget https://docs.projectcalico.org/manifests/calico.yaml\n</code></pre> \u5176\u6b21\uff0c\u901a\u8fc7 vi \u7f16\u8f91\u5668\u4fee\u6539 \u201ccalico.yaml\u201d \u6587\u4ef6\u4e2d\u7684 \u201cCALICO_IPV4POOL_CIDR\u201d \u53c2\u6570\uff0c\u9700\u8981\u4e0e\u524d\u9762 \u201ckubeadm init\u201d \u547d\u4ee4\u4e2d\u7684 \u201c\u2013pod-network-cidr\u201d \u53c2\u6570\u4e00\u6837\uff0810.244.0.0/16\uff09,\u4fee\u6539\u4f4d\u7f6e\u5982\u4e0b\u6240\u793a Bash<pre><code># \u4fee\u6539\u6587\u4ef6\u65f6\u6ce8\u610f\u683c\u5f0f\u5bf9\u9f50\n4598 # The default IPv4 pool to create on startup if none exists. Pod IPs will be\n4599 # chosen from this range. Changing this value after installation will have\n4600 # no effect. This should fall within `--cluster-cidr`.\n4601 - name: CALICO_IPV4POOL_CIDR\n4602   value: \"10.244.0.0/16\"\n4603 # Disable file logging so `kubectl logs` works.\n4604 - name: CALICO_DISABLE_FILE_LOGGING\n4605   value: \"true\"\n</code></pre> \u6700\u540e\uff0c\u4f7f\u7528 \u201ckubectl apply\u201d \u547d\u4ee4\u5c06 Calico \u63d2\u4ef6\u90e8\u7f72\u5230\u96c6\u7fa4\u91cc\uff0c\u90e8\u7f72 YAML \u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a Bash<pre><code>kubectl apply -f calico.yaml\n</code></pre> Calico \u90e8\u7f72\u4f1a\u6bd4\u8f83\u6162\uff0c\u5927\u6982\u7b49\u4e2a\u51e0\u5206\u949f\uff0c\u7b49\u5f85 Calico \u90e8\u7f72\u5b8c\u6210\u540e\uff0c\u518d\u6b21\u901a\u8fc7\u547d\u4ee4 \u201ckubectl get node\u201d \u67e5\u770b\u8282\u70b9\u72b6\u6001\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u6240\u6709\u8282\u70b9\u5df2\u7ecf\u51c6\u5907\u5c31\u7eea\uff0c\u606d\u559c\u4f60\uff01\u6b64\u65f6\u96c6\u7fa4\u6b63\u5f0f\u642d\u5efa\u6210\u529f\u3002 Bash<pre><code>[root@k8s-master ~]# kubectl get node\nNAME           STATUS   ROLES           AGE   VERSION\nk8s-master     Ready    control-plane   12h   v1.28.0\nk8s-worker1    Ready    &lt;none&gt;          12h   v1.28.0\nk8s-worker2    Ready    &lt;none&gt;          10h   v1.28.0\n</code></pre> PS: \u79bb\u7ebf\u5b89\u88c5\u65b9\u5f0f\uff08\u5728\u7ebf\u5b89\u88c5\u5931\u8d25\u65f6\u4f7f\u7528\u6b64\u65b9\u6cd5\uff09 Bash<pre><code># \u5047\u5b9a\u4e0b\u8f7d\u7684\u6587\u4ef6\u540d\u4e3a\uff1a\u201ccalico-image-3.25.1.zip\u201d\uff0c \u89e3\u538b\u540e\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u6267\u884c\u5bfc\u5165\u547d\u4ee4\u3002\nls *.tar |xargs -i docker load -i {}\n\n# \u201ccalico-yaml.zip\u201d \u4e2d\u662f\u90e8\u7f72\u6587\u4ef6\uff0c\u5728 Master \u8282\u70b9\u4e0a\u4f9d\u6b21\u90e8\u7f72\u4e24\u4e2a YAML \u6587\u4ef6\u3002\n# \u5148\u5220\u9664\u4e4b\u524d\u90e8\u7f72\u4e0d\u6210\u529f\u7684 Calico\nkubectl delete -f calico.yaml\n\n# \u4f9d\u6b21\u90e8\u7f72\u4e24\u4e2a yaml \u6587\u4ef6\nkubectl apply -f tigera-operator.yaml --server-sidekubectl apply -f custom-resources.yaml\n\n# \u7136\u540e\u7b49\u5f85\u90e8\u7f72\u5b8c\u6210\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u6240\u6709\u8282\u70b9\u51c6\u5907\u5c31\u7eea\u3002\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/","title":"k8s\u4e2dyaml\u6587\u4ef6\u7684\u7f16\u5199\u548c\u4f7f\u7528","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#yaml","title":"YAML\u57fa\u672c\u8bed\u6cd5","text":"<ul> <li>\u5927\u5c0f\u5199\u654f\u611f</li> <li>\u4f7f\u7528\u7f29\u8fdb\u8868\u793a\u5c42\u7ea7\u5173\u7cfb</li> <li>\u7f29\u8fdb\u65f6\u4e0d\u5141\u8bb8\u4f7f\u7528Tab\u952e\uff0c\u53ea\u5141\u8bb8\u4f7f\u7528\u7a7a\u683c\u3002</li> <li>\u7f29\u8fdb\u7684\u7a7a\u683c\u6570\u76ee\u4e0d\u91cd\u8981\uff0c\u53ea\u8981\u76f8\u540c\u5c42\u7ea7\u7684\u5143\u7d20\u5de6\u4fa7\u5bf9\u9f50\u5373\u53ef</li> <li><code>#</code> \u8868\u793a\u6ce8\u91ca\uff0c\u4ece\u8fd9\u4e2a\u5b57\u7b26\u4e00\u76f4\u5230\u884c\u5c3e\uff0c\u90fd\u4f1a\u88ab\u89e3\u6790\u5668\u5ffd\u7565\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#maps","title":"Maps","text":"<ul> <li>Map \u662f\u5b57\u5178\uff0c\u5c31\u662f\u4e00\u4e2a<code>key:value</code>\u7684\u952e\u503c\u5bf9\uff0c\u4f8b\u5982\uff1a</li> </ul> <p>YAML<pre><code>---\napiVersion: v1\nkind: Pod\n\n#######PS##########\n# \u7b2c\u4e00\u884c\u7684`---`\u662f\u5206\u9694\u7b26\uff0c\u662f\u53ef\u9009\u7684\uff0c\u5728\u5355\u4e00\u6587\u4ef6\u4e2d\uff0c\u53ef\u7528\u8fde\u7eed\u4e09\u4e2a\u8fde\u5b57\u53f7`---`\u533a\u5206\u591a\u4e2a\u6587\u4ef6\n# \u8f6c\u4e3aJSON\u5219\u4e3a\uff1a\n{\n    \"apiVersion\": \"v1\",\n    \"kind\": \"pod\"\n}\n#######PS##########\n</code></pre> \u6211\u4eec\u5728\u521b\u5efa\u4e00\u4e2a\u76f8\u5bf9\u590d\u6742\u4e00\u70b9\u7684 YAML \u6587\u4ef6\uff0c\u521b\u5efa\u4e00\u4e2a KEY \u5bf9\u5e94\u7684\u503c\u4e0d\u662f\u5b57\u7b26\u4e32\u800c\u662f\u4e00\u4e2a Maps\uff1a Text Only<pre><code>---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: kube100-site\n  labels:\n    app: web\n</code></pre> - \u7528\u4e86\u4e24\u4e2a\u7a7a\u683c\u4f5c\u4e3a\u7f29\u8fdb\uff0c\u7a7a\u683c\u7684\u6570\u91cf\u5e76\u4e0d\u91cd\u8981\uff0c\u4f46\u662f\u5f97\u4fdd\u6301\u4e00\u81f4\uff0c\u5e76\u4e14\u81f3\u5c11\u8981\u6c42\u4e00\u4e2a\u7a7a\u683c**\uff08\u4ec0\u4e48\u610f\u601d\uff1f\u5c31\u662f\u4f60\u522b\u4e00\u4f1a\u7f29\u8fdb\u4e24\u4e2a\u7a7a\u683c\uff0c\u4e00\u4f1a\u7f29\u8fdb4\u4e2a\u7a7a\u683c\uff09\u3002 - \u5728 YAML \u6587\u4ef6\u4e2d\u7edd\u5bf9\u4e0d\u8981\u4f7f\u7528 tab \u952e\u3002</p> <p>\u540c\u6837\u7684\u5c06\u4e0a\u9762\u7684 YAML \u6587\u4ef6\u8f6c\u6362\u6210 JSON \u6587\u4ef6\uff1a JSON<pre><code>{\n  \"apiVersion\": \"v1\",\n  \"kind\": \"Pod\",\n  \"metadata\": {\n    \"name\": \"kube100-site\",\n    \"labels\": {\n      \"app\": \"web\"\n    }\n  }\n}\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#lists","title":"Lists","text":"<p>Lists \u5c31\u662f\u5217\u8868\uff0c\u8bf4\u767d\u4e86\u5c31\u662f\u6570\u7ec4\uff0c\u5728 YAML \u6587\u4ef6\u4e2d\u53ef\u4ee5\u8fd9\u6837\u5b9a\u4e49\uff1a YAML<pre><code>args\n  - Cat\n  - Dog\n  - Fish\n</code></pre> - \u53ef\u4ee5\u6709\u4efb\u4f55\u6570\u91cf\u7684\u9879\u5728\u5217\u8868\u4e2d\uff0c\u6bcf\u4e2a\u9879\u7684\u5b9a\u4e49\u4ee5\u7834\u6298\u53f7\uff08-\uff09\u5f00\u5934\u7684\uff0c\u4e0e\u7236\u5143\u7d20\u76f4\u63a5\u53ef\u4ee5\u7f29\u8fdb\u4e00\u4e2a\u7a7a\u683c\u3002\u5bf9\u5e94\u7684 JSON \u683c\u5f0f\u5982\u4e0b\uff1a</p> JSON<pre><code>{\n    \"args\": [\"Cat\", \"Dog\", \"Fish\"]\n}\n</code></pre> <p>list \u7684\u5b50\u9879\u4e5f\u53ef\u4ee5\u662f Maps\uff0cMaps \u7684\u5b50\u9879\u4e5f\u53ef\u4ee5\u662flist\u5982\u4e0b\u6240\u793a\uff1a</p> <p>YAML<pre><code>---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: kube100-site\n  labels:\n    app: web\nspec:\n  containers:\n    - name: front-end\n      image: nginx\n      ports:\n        - containerPort: 80\n    - name: flaskapp-demo\n      image: jcdemo/flaskapp\n      ports:\n        - containerPort: 5000\n</code></pre> \u6211\u4eec\u53ef\u4ee5\u8f6c\u6210\u5982\u4e0b JSON \u683c\u5f0f\u6587\u4ef6\uff1a JSON<pre><code>{\n    \"apiVersion\": \"v1\",\n    \"kind\": \"Pod\",\n    \"metadata\": {\n        \"name\": \"kube100-site\",\n        \"labels\": {\n            \"app\": \"web\"\n        }\n    },\n    \"spec\": {\n        \"containers\": [{\n            \"name\": \"front-end\",\n            \"image\": \"nginx\",\n            \"ports\": [{\n                \"containerPort\": 80\n            }]\n        }, {\n            \"name\": \"flaskapp-demo\",\n            \"image\": \"jcdemo/flaskapp\",\n            \"ports\": [{\n                \"containerPort\": 5000\n            }]\n        }]\n    }\n}\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_1","title":"\u5b57\u9762\u91cf\u4e0e\u6298\u53e0\u6837\u5f0f","text":"<p>\u5bf9\u4e8e\u8f83\u957f\u7684\u5b57\u7b26\u4e32\u6216\u8005\u5217\u8868\uff0cYAML\u63d0\u4f9b\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u8868\u793a\u65b9\u5f0f\uff1a\u5b57\u9762\u91cf\u6837\u5f0f(literal style)\u548c\u6298\u53e0\u6837\u5f0f(folded style)\u3002</p> <ul> <li>\u5b57\u9762\u91cf\u6837\u5f0f (\u4f7f\u7528 <code>|</code> \u7b26\u53f7):</li> </ul> YAML<pre><code>description: |\n  This is a long description that spans multiple lines.\n  It can include indents and newlines which will be preserved.\n</code></pre> <ul> <li>\u6298\u53e0\u6837\u5f0f (\u4f7f\u7528 <code>&gt;</code> \u7b26\u53f7):</li> </ul> YAML<pre><code>description: &gt;\n  This is a long description that spans multiple lines.\n  It can include indents and newlines which will be folded into a single line.\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_2","title":"\u951a\u70b9\u4e0e\u522b\u540d","text":"<p>\u951a\u70b9(anchor)\u548c\u522b\u540d(alias)\u53ef\u4ee5\u5e2e\u52a9\u907f\u514d\u91cd\u590d\u7684\u6570\u636e\u3002</p> <ul> <li>\u951a\u70b9 (\u4f7f\u7528 <code>&amp;name</code> \u5b9a\u4e49):</li> </ul> YAML<pre><code>&amp;baseImage\nimage: nginx\ntag: 1.19.2\n</code></pre> <ul> <li>\u522b\u540d (\u4f7f\u7528 <code>*name</code> \u5f15\u7528):</li> </ul> YAML<pre><code>containers:\n  - name: nginx-container\n    &lt;&lt;: *baseImage\n  - name: another-container\n    &lt;&lt;: *baseImage\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_3","title":"\u73af\u5883\u53d8\u91cf","text":"<p>\u5728YAML\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u6765\u52a8\u6001\u586b\u5145\u67d0\u4e9b\u5b57\u6bb5\u3002\u8fd9\u5bf9\u4e8e\u9700\u8981\u5728\u90e8\u7f72\u65f6\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u53d8\u5316\u7684\u503c\u975e\u5e38\u6709\u7528\u3002</p> YAML<pre><code>image: ${MY_REGISTRY}/nginx:${NGINX_VERSION}\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_4","title":"\u6761\u4ef6\u8868\u8fbe\u5f0f","text":"<p>\u867d\u7136YAML\u672c\u8eab\u4e0d\u652f\u6301\u6761\u4ef6\u903b\u8f91\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u6a21\u677f\u5f15\u64ce\uff08\u5982Jinja2\uff09\u7ed3\u5408YAML\u6765\u5b9e\u73b0\u590d\u6742\u7684\u6761\u4ef6\u903b\u8f91\u3002</p>","tags":["K8S"]},{"location":"notehub/solution/","title":"SolutionHub","text":"<p>Tip</p> <p>\u8fd9\u91cc\u662fSolutionHub\uff0c\u7528\u4e8e\u8bb0\u5f55\u548c\u603b\u7ed3\u6211\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\u9047\u5230\u7684\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"notehub/solution/#bug","title":"Bug\u603b\u7ed3","text":"<ul> <li> Jupyter matplotlib\u753b\u56fe\u4e2d\u6587\u5b57\u4f53\u7f3a\u5931\uff082022-09-26\uff09</li> <li> Jupyter\u8fd0\u884casyncio run\u62a5\u9519\uff082022-08-30\uff09</li> <li> \u591a\u8bed\u8a00\u4e4b\u95f4\u7684RSA\u52a0\u89e3\u5bc6\u95ee\u9898\uff082022-07-28\uff09</li> <li> Conda\u4fee\u6539\u865a\u62df\u73af\u5883\u540d\u5bfc\u81f4\u5f02\u5e38\uff082022-07-08\uff09</li> <li> window\u73af\u5883\u4e2dpip\u5b89\u88c5\u62a5\u9519\uff082022-01-05\uff09</li> <li> Jupyterhub\u79bb\u7ebf\u90e8\u7f72\u8e29\u5751\u603b\u7ed3\uff082022-01-02)</li> </ul>"},{"location":"notehub/solution/#_1","title":"\u8fd0\u7ef4\u624b\u8bb0","text":"<ul> <li> Mac\u4f7f\u7528brew services\u62a5\u9519\uff082023-05-06\uff09</li> <li> win10\u7684cmd\u4e2d\u64cd\u4f5cgit\u4e2d\u6587\u4e71\u7801\u89e3\u51b3\u65b9\u6cd5\uff082023-04-06\uff09</li> <li> Centos\u7684yum\u6e90\u8bef\u5220\u89e3\u51b3\u65b9\u6cd5\uff082022-07-06\uff09</li> <li> \u670d\u52a1\u5668\u78c1\u76d8\u7a7a\u95f4\u6ee1\u7684\u89e3\u51b3\u529e\u6cd5\uff082022-02-06\uff09</li> </ul>"},{"location":"notehub/solution/bughub/conda_rename_env_bug/","title":"Conda\u4fee\u6539\u865a\u62df\u73af\u5883\u540d\u5bfc\u81f4\u5f02\u5e38","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/conda_rename_env_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<p>\u7531\u4e8e\u4e0d\u540c\u7684\u5f00\u53d1\u4eba\u5458\u5bf9conda\u73af\u5883\u540d\u7684\u7684\u547d\u540d\u98ce\u683c\u4e0d\u7edf\u4e00\uff0c\u5728\u4ea4\u4ed8\u90e8\u7f72\u65f6\uff0c\u4e3a\u4e86\u98ce\u683c\u7edf\u4e00\uff0c\u4fbf\u4e8e\u7ba1\u7406\uff0c\u4e8e\u662f\u5c31\u5bf9\u5176\u4ed6\u670d\u52a1\u7684\u73af\u5883\u540d\u8fdb\u884c\u7684mv\u64cd\u4f5c\uff0c\u5bfc\u81f4\u73af\u5883\u5305\u627e\u4e0d\u5230</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/conda_rename_env_bug/#bug","title":"Bug\u73b0\u573a","text":"Bash<pre><code>(project-service-py38env) [root@2-120 project-service]# bash run_server.sh\nrun_server.sh: /data/bluewhale/software/anaconda3/envs/project-service-py38env/bin/gunicorn: /data/bluewhale/software/anaconda3/envs/pms_py38env/bin/python: \u574f\u7684\u89e3\u91ca\u5668: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\n</code></pre> Bash<pre><code>#!/bin/bash\ngunicorn main:app -b 0.0.0.0:30010 -w 4 -k uvicorn.workers.UvicornH11Worker --daemon\n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/conda_rename_env_bug/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"<p>\u6839\u56e0\u5206\u6790\uff1a</p> <ol> <li>\u6267\u884cgunicorn\u547d\u4ee4\u65f6\uff0c\u4e3a\u4ec0\u4e48\u8fd8\u4f1a\u4f7f\u7528\u539f\u6765\u73af\u5883\u540d\u7684python\u89e3\u91ca\u5668\uff1f</li> <li>\u4e8e\u662f\u627e\u5230gunicorn\u7684\u53ef\u6267\u884c\u6587\u4ef6\u8def\u5f84\uff0c\u6253\u5f00\u770b\u4e00\u4e0b\u662f\u4e0d\u662f\u54ea\u91cc\u5bf9python\u89e3\u91ca\u5668\u7684\u8def\u5f84\u8fdb\u884c\u7684\u786c\u7f16\u7801\uff0c\u4e8e\u662f\u6253\u5f00gunicorn\u6587\u4ef6,\u67e5\u770b</li> </ol> Python<pre><code>#!/data/bluewhale/software/anaconda3/envs/pms_py38env/bin/python\n# -*- coding: utf-8 -*-\nimport re\nimport sys\nfrom gunicorn.app.wsgiapp import run\nif __name__ == '__main__':\n    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])\n    sys.exit(run())\n~\n</code></pre> <ol> <li>\u679c\u7136\u7b2c\u4e00\u884c\u8fdb\u884c\u7684python\u89e3\u91ca\u5668\u8def\u5f84\u7684\u914d\u7f6e</li> <li>\u7ecf\u8fc7\u67e5\u9605\uff0c\u53d1\u73b0conda\u6ca1\u6709\u63d0\u4f9b\u8fd9\u79cd\u4fee\u6539\u6587\u4ef6\u540d\u5bf9\u73af\u5883\u540d\u8fdb\u884c\u4fee\u6539\u7684\u64cd\u4f5c\uff0c\u56e0\u4e3a\u73af\u5883\u91cc\u6709\u5f88\u591a\u7684\u811a\u672c\u6587\u4ef6\u90fd\u914d\u7f6e\u4e86\u518d\u6700\u521d\u521b\u5efa\u73af\u5883\u540d\u65f6\u8bbe\u7f6e\u7684python\u89e3\u91ca\u5668\u8def\u5f84\uff0c\u4e8e\u662f\u4e4e\u60f3\u5230\u4e86\u4e86\u4e00\u4e2a\u547d\u4ee4\uff0c--clone</li> <li>\u5f00\u59cb\u5c1d\u8bd5,\u628a\u4e4b\u524d\u901a\u8fc7mv\u547d\u4ee4\u91cd\u547d\u540d\u7684\u6587\u4ef6\u540d\u4fee\u6539\u4e3a\u539f\u6765\u7684\u540d\u5b57\uff0c\u7136\u540e\u5728\u4f7f\u7528clone\u547d\u4ee4</li> </ol> Bash<pre><code>(pms_py38env) [root@2-120 project-service]# conda create -n project-service-py38env --clone pms_py38env\nSource:      /data/bluewhale/software/anaconda3/envs/pms_py38env\nDestination: /data/bluewhale/software/anaconda3/envs/project-service-py38env\nPackages: 20\nFiles: 3367\nPreparing transaction: done\nVerifying transaction: done\nExecuting transaction: done\n#\n# To activate this environment, use\n#\n#     $ conda activate project-service-py38env\n#\n# To deactivate an active environment, use\n#\n#     $ conda deactivate\n</code></pre> <ol> <li>\u6fc0\u6d3b\u73af\u5883\uff0c\u91cd\u65b0\u8fd0\u884c\uff0c\u53d1\u73b0\u95ee\u9898\u89e3\u51b3\uff0c\u518d\u6b21\u6253\u5f00gunicorn\u811a\u672c\u6587\u4ef6\u67e5\u770b\uff0c\u7ed3\u679c\u9a8c\u8bc1\u4e86\u7b2c\u4e8c\u6b65\u7684\u731c\u60f3\u3002</li> </ol> <p>\u603b\u7ed3\uff1a</p> <ol> <li>conda\u73af\u5883\u7684\u91cd\u547d\u540d\u64cd\u4f5c\uff0c\u9700\u8981\u4f7f\u7528conda create -n  --clone  <li>\u975e\u5fc5\u8981\u60c5\u51b5\u4e0b\uff0c\u4e0d\u8981\u8f7b\u6613\u4fee\u6539\u73af\u5883\u540d\uff0c\u4e14\u4e0d\u8981\u60f3\u5f53\u7136\u7684\u8ba4\u4e3a\u4fee\u6539\u73af\u5883\u540d\u5c31\u662f\u91cd\u547d\u540d\u64cd\u4f5c\u3002</li> <p>2022\u5e7407\u670808\u65e513:04:56</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/","title":"Jupyter\u8fd0\u884casyncio run\u62a5\u9519","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<ul> <li>\u5728jupyter\u4e2d\u8fd0\u884c\u4e0b\u4e86\u4ee3\u7801 Python<pre><code>import asyncio\n\nasync def fake_page(url):\n    print(f\"faking:{url}\")\n    sleep_time = int(url.split('_')[-1])\n    await asyncio.sleep(sleep_time)\n    print(f\"OK\uff1a{url}\")\n\nasync def main(urls):\n    for url in urls:\n        await fake_page(url)\n\n\n%time asyncio.run(main(['url1', 'url2', 'url3', 'url4']))  # %time\u662fjupyter\u7684\u8bed\u6cd5\n</code></pre></li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#bug","title":"Bug\u73b0\u573a","text":"Python<pre><code>RuntimeError: asyncio.run() cannot be called from a running event loop\n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_3","title":"\u6839\u56e0\u5206\u6790\uff1a","text":"<p>\u53c2\u8003\u4e86\u4e0b\u5217\u94fe\u63a5\u7684\u5185\u5bb9\uff1a - https://stackoverflow.com/questions/55409641/asyncio-run-cannot-be-called-from-a-running-event-loop - https://github.com/jupyter/notebook/issues/3397</p> <ul> <li>\u521d\u6b65\u7ed3\u8bba\u662fjupyter\u4f9d\u8d56tornado\uff0c\u9ed8\u8ba4\u542f\u52a8\u4e86event loop</li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_4","title":"\u5b9e\u8df5\u6c42\u8bc1\uff1a","text":"<ul> <li> <p>\u5728jupyter\u4e2d\u8f93\u5165 Python<pre><code>import asyncio\n\nasyncio.get_event_loop()\n\n# &gt;&gt;&gt;\n&lt;_UnixSelectorEventLoop running=True closed=False debug=False&gt;\n</code></pre></p> </li> <li> <p>\u5728terminal\u4e2d\u8f93\u5165ipython\uff0c\u7136\u540e\u5728\u8f93\u5165\u4e0b\u5217\u5185\u5bb9 Python<pre><code>In [1]: import asyncio\n\nIn [2]: asyncio.get_event_loop()\nOut[2]: &lt;_UnixSelectorEventLoop running=False closed=False debug=False&gt;\n</code></pre></p> </li> </ul> <p>\u7ed3\u8bba\uff1a\u786e\u5b9ejupyter\u9ed8\u8ba4\u542f\u52a8\u4e86event loop</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_5","title":"\u89e3\u51b3\u65b9\u5f0f","text":"<ul> <li> <p>\u5728jupyter\u4e2d\u5728\u8f93\u5165\u5e76\u8fd0\u884c\u4e0b\u5217\u5185\u5bb9 Python<pre><code>!pip install nest_asyncio  # \u5b89\u88c5\n\nimport nest_asyncio  \nnest_asyncio.apply()\n</code></pre></p> </li> <li> <p>\u518d\u8fd0\u884c\u5f00\u5934\u90a3\u6bb5\u7a0b\u5e8f\uff0c\u62a5\u9519\u89e3\u51b3</p> </li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/","title":"Jupyter matplotlib\u753b\u56fe\u4e2d\u6587\u5b57\u4f53\u7f3a\u5931","text":"<p>\u7cfb\u7edf\uff1aMacOS 2022\u5e7409\u670826\u65e522:48:08</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<ul> <li>\u5728jupyterlab\u4e2d\u4f7f\u7528matplotlib\u753b\u56fe\uff0c\u56fe\u7684\u5750\u6807\u8f74\u4e2d\u6587\u5b57\u4f53\u4e0d\u663e\u793a\uff0c\u4e14jupyter cell \u629b\u51fa \u7f3a\u5931\u5f53\u524d\u5b57\u4f53</li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#bug","title":"Bug\u73b0\u573a","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_3","title":"\u6839\u56e0\u5206\u6790","text":"<ul> <li>\u6839\u636e\u9519\u8bef\u5806\u6808\u4fe1\u606f\u53ef\u770b\u51fa\uff0cmatplotlib\u9ed8\u8ba4\u4e0d\u81ea\u5e26\u4e2d\u6587\u5b57\u4f53\uff0c</li> <li>\u9700\u8981\u5148\u4e0b\u8f7d\u4e2d\u6587\u5b57\u4f53\uff0c\u653e\u5230\u5bf9\u5e94\u73af\u5883\u5305\u7684\u8def\u5f84\u4e0b</li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_4","title":"\u5b9e\u8df5\u6c42\u8bc1","text":"<ul> <li> <p>\u5728\u865a\u62df\u73af\u5883\u4e2d\u8fdb\u5165matplotlib\u5305\u4e0b\u67e5\u770b Bash<pre><code>(jupyter_py38env) \u279c  fonts cd ttf\n(jupyter_py38env) \u279c  ttf pwd\n/usr/local/Caskroom/miniforge/base/envs/jupyter_py38env/lib/python3.8/site-packages/matplotlib/mpl-data/fonts/ttf\n(jupyter_py38env) \u279c  ttf ls\nDejaVuSans-Bold.ttf            LICENSE_DEJAVU                 STIXSizOneSymReg.ttf\nDejaVuSans-BoldOblique.ttf     LICENSE_STIX                   STIXSizThreeSymBol.ttf\nDejaVuSans-Oblique.ttf         STIXGeneral.ttf                STIXSizThreeSymReg.ttf\nDejaVuSans.ttf                 STIXGeneralBol.ttf             STIXSizTwoSymBol.ttf\nDejaVuSansDisplay.ttf          STIXGeneralBolIta.ttf          STIXSizTwoSymReg.ttf\nDejaVuSansMono-Bold.ttf        STIXGeneralItalic.ttf          cmb10.ttf\nDejaVuSansMono-BoldOblique.ttf STIXNonUni.ttf                 cmex10.ttf\nDejaVuSansMono-Oblique.ttf     STIXNonUniBol.ttf              cmmi10.ttf\nDejaVuSansMono.ttf             STIXNonUniBolIta.ttf           cmr10.ttf\nDejaVuSerif-Bold.ttf           STIXNonUniIta.ttf              cmss10.ttf\nDejaVuSerif-BoldItalic.ttf     STIXSizFiveSymReg.ttf          cmsy10.ttf\nDejaVuSerif-Italic.ttf         STIXSizFourSymBol.ttf          cmtt10.ttf\nDejaVuSerif.ttf                STIXSizFourSymReg.ttf\nDejaVuSerifDisplay.ttf         STIXSizOneSymBol.ttf\n(jupyter_py38env) \u279c  ttf\n</code></pre></p> </li> <li> <p>\u786e\u5b9e\u6ca1\u6709\u627e\u5230\u4e2d\u6587\u5b57\u4f53</p> </li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_5","title":"\u89e3\u51b3\u65b9\u5f0f","text":"<ol> <li> <p>\u627e\u5230Mac\u4e2dPython\u4f7f\u7528\u7684\u5b57\u4f53\u5e93\u7684\u4f4d\u7f6e Python<pre><code>In [1]: import matplotlib\n\n# \u67e5\u627e\u5b57\u4f53\u8def\u5f84\nIn [2]: print(matplotlib.matplotlib_fname())\n/usr/local/Caskroom/miniforge/base/envs/jupyter_py38env/lib/python3.8/site-packages/matplotlib/mpl-data/matplotlibrc\n\n# \u67e5\u770b\u5b57\u4f53\u7f13\u5b58\u8def\u5f84\nIn [3]: print(matplotlib.get_cachedir())\n/Users/roninsswang/.matplotlib\n</code></pre></p> </li> <li> <p>\u4e0b\u8f7d\u5b57\u4f53</p> </li> <li>\u5e38\u89c1\u4e2d\u82f1\u6587\u5b57\u4f53\u5bf9\u7167\u540d\u79f0</li> </ol> <p></p> <ul> <li>\u4e0b\u8f7d\u9700\u8981\u7684\u5b57\u4f53\uff0c\u6b64\u5904\u4e0b\u8f7dSimHei</li> <li>\u4e0b\u8f7d\u94fe\u63a5\uff1ahttp://d.xiazaiziti.com/en_fonts/fonts/s/SimHei.ttf</li> <li> <p>\u5c06\u4e0b\u8f7d\u7684\u5b57\u4f53\u79fb\u52a8\u5230matplotlib\u7684\u5b57\u4f53\u5e93\u7684\u4f4d\u7f6e Bash<pre><code>(jupyter_py38env) \u279c  ttf pwd\n/usr/local/Caskroom/miniforge/base/envs/jupyter_py38env/lib/python3.8/site-packages/matplotlib/mpl-data/fonts/ttf\n(jupyter_py38env) \u279c  ttf ls\nDejaVuSans-Bold.ttf            LICENSE_DEJAVU                 STIXSizOneSymReg.ttf\nDejaVuSans-BoldOblique.ttf     LICENSE_STIX                   STIXSizThreeSymBol.ttf\nDejaVuSans-Oblique.ttf         STIXGeneral.ttf                STIXSizThreeSymReg.ttf\nDejaVuSans.ttf                 STIXGeneralBol.ttf             STIXSizTwoSymBol.ttf\nDejaVuSansDisplay.ttf          STIXGeneralBolIta.ttf          STIXSizTwoSymReg.ttf\nDejaVuSansMono-Bold.ttf        STIXGeneralItalic.ttf          SimHei.ttf\nDejaVuSansMono-BoldOblique.ttf STIXNonUni.ttf                 cmb10.ttf\nDejaVuSansMono-Oblique.ttf     STIXNonUniBol.ttf              cmex10.ttf\nDejaVuSansMono.ttf             STIXNonUniBolIta.ttf           cmmi10.ttf\nDejaVuSerif-Bold.ttf           STIXNonUniIta.ttf              cmr10.ttf\nDejaVuSerif-BoldItalic.ttf     STIXSizFiveSymReg.ttf          cmss10.ttf\nDejaVuSerif-Italic.ttf         STIXSizFourSymBol.ttf          cmsy10.ttf\nDejaVuSerif.ttf                STIXSizFourSymReg.ttf          cmtt10.ttf\nDejaVuSerifDisplay.ttf         STIXSizOneSymBol.ttf\n(jupyter_py38env) \u279c  ttf\n</code></pre></p> </li> <li> <p>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6matplotlibrc</p> </li> <li> <p>\u8fdb\u5165\u4e0b\u5217\u8def\u5f84\u4e0b\uff1a Bash<pre><code>(jupyter_py38env) \u279c  mpl-data pwd\n/usr/local/Caskroom/miniforge/base/envs/jupyter_py38env/lib/python3.8/site-packages/matplotlib/mpl-data\n</code></pre></p> </li> <li> <p>\u7f16\u8f91\u3001\u4fdd\u5b58\u9000\u51fa</p> </li> </ul> <p></p> <ol> <li> <p>\u6e05\u9664\u7f13\u5b58 Bash<pre><code>rm -rf /Users/roninsswang/.matplotlib\n</code></pre></p> </li> <li> <p>\u91cd\u542fjupyterlab \uff0c\u518d\u6b64\u8fd0\u884c\uff0cBug\u89e3\u9664\u3002</p> </li> </ol>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyterhub_deploy_bug/","title":"Jupyterhub\u79bb\u7ebf\u90e8\u7f72\u8e29\u5751\u603b\u7ed3","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyterhub_deploy_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<p>\u5ba2\u6237\u5185\u7f51\u670d\u52a1\u5668\u90e8\u7f72\uff0c\u53ea\u6709\u7279\u5b9a\u7aef\u53e38888\uff0c\u53ea\u6709\u7279\u5b9apip\u5b89\u88c5\u6e90</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyterhub_deploy_bug/#_2","title":"\u8fce\u5203\u800c\u89e3\uff1a","text":"<ol> <li>\u5b89\u88c5python</li> <li>\u521b\u5efa\u865a\u62df\u73af\u5883virtualenv,\u6700\u597d\u5c06\u5b89\u88c5virtualenv\u7684\u6587\u4ef6\u5939\u7684\u6743\u9650\u8c03\u6574711\u4ee5\u4e0a\uff0c\u5426\u5219\u591a\u7528\u6237\u4f1a\u7528\u6743\u9650\u95ee\u9898\uff08\u6b64\u5904\u8e29\u5751\u8f83\u957f\uff0c\u9664\u4e86\u91cd\u65b0\u90e8\u7f72\u4ee5\u5916\uff0c\u4fee\u6539\u6587\u4ef6\u5939\u7684\u5bf9\u5e94\u53ef\u6267\u884c\u6743\u9650\u5e94\u8be5\u662f\u5de5\u4f5c\u91cf\u6700\u5c0f\u7684\u505a\u6cd5\u3002\uff09</li> <li>\u6fc0\u6d3b\u865a\u62df\u73af\u5883\uff0csource /\u6216\u4f7f\u7528workon</li> <li>\u5b89\u88c5pip\u4f9d\u8d56\u5305</li> <li>\u4e0b\u8f7dnode\u6e90\u7801\uff0c\u8fdb\u884c\u79bb\u7ebf\u5b89\u88c5</li> <li>\u4e0b\u8f7dconfigurable-http-proxy\uff0c\u6700\u4f73\u5b9e\u8df5\u662f\uff1a\u5728\u6709\u7f51\u7684\u73af\u5883\u4e2d\uff0c\u65b0\u5efa\u4e00\u4e2a\u7a7a\u76ee\u5f55\uff0c\u5728\u6b64\u76ee\u5f55\u4e0b\u6267\u884c\uff1anpm install configurable-http-proxy ,\u5b89\u88c5\u5b8c\u6210\u4ee5\u540e\uff0c\u5c06\u8be5\u6587\u4ef6\u5939\u7684node_modules\u7684\u5185\u5bb9\u5168\u90e8\u79fb\u52a8\u670d\u52a1\u4e2d\u7684node/lib/node_module\u4e0b\uff0c\u5373\u53ef\uff0c\u6b64\u5904\u8e29\u5751\u5b9e\u8df5\u8f83\u957f</li> <li>\u751f\u6210\u914d\u7f6e\u5e76\u4fee\u6539\u914d\u7f6e</li> </ol> Python<pre><code>c.JupyterHub.base_url = '/jupyterhub'\nc.JupyterHub.ip = \"10.19.10.2\"\nc.Spawner.default_url = '/lab'\nc.PAMAuthenticator.open_sessions = False\nc.LocalAuthenticator.create_system_users = True\nc.Authenticator.admin_users = {'zhongtai'}  # #\u7ba1\u7406\u5458\u7528\u6237\nc.JupyterHub.admin_access = True\nc.JupyterHub.port = 8888\nc.Spawner.cmd = ['jupyterhub-singleuser']\n\nc.PAMAuthenticator.encoding = 'utf8'\nc.Authenticator.whitelist = {'hcjupyter','zhongtai'}  # \u767d\u540d\u5355\nc.JupyterHub.statsd_prefix = 'jupyterhub'\n#c.LocalProcessSpawner.shell_cmd = [\"bash\", \"-l\", \"-c\"]\nc.JupyterHub.proxy_cmd = ['/usr/local/node/bin/configurable-http-proxy',]\nc.Authenticator.delete_invalid_users = True\n\n\n/opt/nodejs/bin/configurable-http-proxy\n</code></pre> <ol> <li>\u542f\u52a8\u547d\u4ee4</li> </ol> Bash<pre><code># \u5728\u865a\u62df\u73af\u5883\u4e2d\u6267\u884c\n# \u524d\u53f0\u542f\u52a8\njupyterhub -f /etc/jupyterhub/config.py\n\n# \u540e\u53f0\u542f\u52a8\nnohup jupyterhub -f /etc/jupyterhub/config.py --no-ssl &amp; \n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/","title":"\u591a\u8bed\u8a00\u4e4b\u95f4\u7684RSA\u52a0\u89e3\u5bc6\u95ee\u9898","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<p>\u5728\u5b8c\u6210\u521b\u5efa\u6570\u636e\u6e90\u7684\u9700\u6c42\u65f6\uff0c\u9700\u8981\u5bf9\u6570\u636e\u6e90\u7684\u7528\u6237\u5bc6\u7801\u7b49\u76f8\u5173\u654f\u611f\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u4f20\u9012\uff0cVue\u524d\u7aef\u52a0\u5bc6\uff0cJava\u540e\u7aef\u548cPython\u540e\u7aef\u89e3\u5bc6\u3002\u7ecf\u8fc7\u65b9\u6848\u8c03\u7814\u540e\uff0c\u6700\u7ec8\u786e\u5b9a\u91c7\u7528RSA\u52a0\u89e3\u5bc6\u7684\u65b9\u6848\u3002  </p>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#bug","title":"Bug\u73b0\u573a","text":"<p>\u7531Java\u540e\u7aef\u901a\u8fc7\u5de5\u5177\u751f\u6210\u516c\u79c1\u94a5\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u516c\u94a5\u7ed9\u5230\u524d\u7aef\uff0c\u524d\u7aef\u5728\u521b\u5efa\u6570\u636e\u6e90\u5229\u7528\u516c\u94a5\u5bf9\u7528\u6237\u8f93\u5165\u7684\u654f\u611f\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\uff0cJava\u670d\u52a1\u63a5\u6536\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u5e76\u4fdd\u5b58\u3002Python\u670d\u52a1\u9700\u8981\u5728\u4f7f\u7528\u6570\u636e\u6e90\u65f6\u8fdb\u884c\u654f\u611f\u4fe1\u606f\u89e3\u5bc6\uff0c\u6b64\u65f6\u9047\u5230\u7684\u95ee\u9898\u662f\uff0c\u7ecfjava\u670d\u52a1\u89e3\u5bc6\u6821\u9a8c\u901a\u8fc7\uff0c\u800cPython\u5219\u65e0\u6cd5\u8fdb\u884c\u89e3\u5bc6\u3002</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"<p>\u6839\u56e0\u5206\u6790\uff1a</p> <p>\u7ecf\u8fc7\u5bf9Java\u670d\u52a1\u548cPython\u670d\u52a1\u7684\u52a0j\u89e3\u5bc6\u5b9e\u73b0\u8fdb\u884c\u6df1\u5165\u7814\u7a76\uff0c\u53d1\u73b0Java\u4e2d\u4f7f\u7528\u7684PKCS8,\u800cPython\u4e2d\u53ea\u6709PKCS1\uff0c\u56e0\u4e3a\u6b64\u534f\u8bae\u4e0d\u5339\u914d\uff0c\u5bfc\u81f4\u65e0\u6cd5\u89e3\u5bc6\u3002</p> <p>PKCS #1\u4e3aOpenSSH\u9ed8\u8ba4\u4f7f\u7528\u7684\u52a0\u5bc6\u6807\u51c6 [^2]:PKCS #8\u4e3aJava\u9ed8\u8ba4\u4f7f\u7528\u7684\u52a0\u5bc6\u6807\u51c6</p> <p>\u65b9\u68481\u5c1d\u8bd5\uff1a\u8bd5\u56fe\u5728python\u7684\u5de5\u5177\u5305\u4e2d\u627e\u5230\u5173\u4e8ePKCS8\u7684\u5b9e\u73b0\uff0c\u672a\u679c\u3002</p> <p>\u65b9\u68482\u5c1d\u8bd5\uff1a\u8bd5\u56fe\u5728Java\u7684\u5de5\u5177\u5305\u4e2d\u627e\u5230\u5173\u4e8ePKCS1\u7684\u5b9e\u73b0\uff0c\u672a\u679c\u3002</p> <p>\u65b9\u68483\u5c1d\u8bd5\uff1a\u7ecf\u8fc7\u4e00\u756a\u641c\u7d22\uff0c\u627e\u5230\u4e00\u79cd\u601d\u8def\uff0c\u5c06PKCS8\u751f\u6210\u7684\u79c1\u94a5\u8f6c\u6362\u6210PKCS1\u7684\u79c1\u94a5\uff0c\u518d\u8fdb\u884c\u5c1d\u8bd5\uff0c\u6210\u529f\u3002</p> <p>\u5b8c\u6210\u6d41\u7a0b\u603b\u7ed3\uff1a</p> <ul> <li>\u4f7f\u7528openssl\u751f\u6210\u79d8\u94a5</li> </ul> Bash<pre><code>openssl genrsa -out private.pem 1024\n</code></pre> <ul> <li>\u67e5\u770b\u79c1\u94a5</li> </ul> Bash<pre><code>-----BEGIN RSA PRIVATE KEY-----\nMIICWwIBAAKBgQDAQWZDPB5q3B0hKNO8Schw4ihwrJAITWHMMImjSKcRUSbAaKsM\n3kLhI8Sx7mPHVW21W6X4MOWyPLAlAOfX3DWNSHBThsJKOEeIlNmZ68MjCE6hWx+W\nfpUtPWmj8CBNUuZrHmAip4/2TTMHEfJPPzRA5FBmzjH7cn/5w+QlZjeINwIDAQAB\nAoGAR4ILv0ZFKgnk68h7uLTY0OPNltsYV34wufnzt7/2JALDHx3PQWIKDiN3rZa1\nlha4T5RfDwlg5gKcoabMlQVbBSPtvr2Rw0v9z8Ib7fsPqDJWUAkFL24DijpVEHiV\n*******************\nw7ZTo+aFijPS3ngRL6ksmIM+gbMwFQBBgnlKgmSrsA7wjpql9A+LLLyLoxAg+hFf\n5HgxInkJAkEAyP4R3tT2i6s/ZT01RPhNYJaHlaRsHAluPlyRDKCf/TLnDTHfB141\nkflUi/kcOMrSnwBYCDn9zh0qpf4O26iHPwJAHrOxcvbILmIhPHQucxQ0vf+S+dhs\n43K/WlkQ85BdgCTR8GTEgmQQ7TnY1a57k10jacbFKRjb19aiwQwrSbXRyQJAIVro\npE47TBpzPt3VhUifrrPMdG0A8/YssXSzLaFKa76S0YHBPXvI8Byshz4kDNi7818f\nPN5C3H3CoiFzXciuCQJAbLm5SfxCony3z5jkkQRM8Agl7sPCEt095zVJX+ln7apv\nt9Ci4v8kwGLz8un7PmLOvmMh7GzSh6qx7PinpI1WRw==\n-----END RSA PRIVATE KEY-----\n</code></pre> <ul> <li>\u751f\u6210\u67e5\u770b\u516c\u94a5</li> </ul> Bash<pre><code>openssl rsa -in private.pem -out public.pem -pubout\n\n-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDAQWZDPB5q3B0hKNO8Schw4ihw\nrJAITWHMMImjSKcRUSbAaKsM3kLhI8Sx7mPHVW21W6X4MOWyPLAlAOfX3DWNSHBT\n*******************\nzjH7cn/5w+QlZjeINwIDAQAB\n-----END PUBLIC KEY-----\n</code></pre> <ul> <li>\u5c06PKCS1\u7684\u79c1\u94a5\u8f6c\u6362\u4e3aPKCS8</li> </ul> Bash<pre><code>openssl pkcs8 -topk8 -inform PEM -in private.pem -outform pem -nocrypt -out pkcs8.pem\n</code></pre> <ul> <li>\u914d\u7f6e\u5230\u4ee3\u7801\u4e2d\uff0c\u5373\u53ef</li> </ul> Text Only<pre><code>-----BEGIN PRIVATE KEY-----\nMIICdQIBADANBgkqhkiG9w0BAQEFAASCAl8wggJbAgEAAoGBAMBBZkM8HmrcHSEo\n07xJyHDiKHCskAhNYcwwiaNIpxFRJsBoqwzeQuEjxLHuY8dVbbVbpfgw5bI8sCUA\n59fcNY1IcFOGwko4R4iU2ZnrwyMITqFbH5Z+lS09aaPwIE1S5mseYCKnj/ZNMwcR\n8k8/NEDkUGbOMftyf/nD5CVmN4g3AgMBAAECgYBHggu/RkUqCeTryHu4tNjQ482W\n2xhXfjC5+fO3v/YkAsMfHc9BYgoOI3etlrWWFrhPlF8PCWDmApyhpsyVBVsFI+2+\nvZHDS/3Pwhvt+w+oMlZQCQUvbgOKOlUQeJXezM9Ax6VmBKjM3RqctZ6IPphpO2KX\n2wprrUzwBhQkCa7MgQJBAPTfMtWLBI3DvAnDtlOj5oWKM9LeeBEvqSyYgz6BszAV\nAEGCeUqCZKuwDvCOmqX0D4ssvIujECD6EV/keDEieQkCQQDI/hHe1PaLqz9lPTVE\n+E1gloeVpGwcCW4+XJEMoJ/9MucNMd8HXjWR+VSL+Rw4ytKfAFgIOf3OHSql/g7b\n\n*************\n\nrnuTXSNpxsUpGNvX1qLBDCtJtdHJAkAhWuikTjtMGnM+3dWFSJ+us8x0bQDz9iyx\ndLMtoUprvpLRgcE9e8jwHKyHPiQM2LvzXx883kLcfcKiIXNdyK4JAkBsublJ/EKi\nfLfPmOSRBEzwCCXuw8IS3T3nNUlf6Wftqm+30KLi/yTAYvPy6fs+Ys6+YyHsbNKH\nqrHs+KekjVZH\n-----END PRIVATE KEY-----\n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#_3","title":"\u6269\u5c55","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#python","title":"Python\u4ee3\u7801\u7247\u6bb5","text":"Python<pre><code>import base64\n# pip install pycryptodome\nfrom Crypto.Cipher import PKCS1_v1_5\nfrom Crypto.PublicKey import RSA\n\nPUBLIC_KEY = \"MRFM4nWu25GsG+gLwkqClZk1DUva\\nKfkKK73ZQ8mcLI3Pbx8zaX+1P38S7KUIOK8QI9gzsIZ0RMamOmrwl4ECAwEAAQ==\"\nPRIVATE_KEY = \"MIIBOQIBAA8mcLI3Pbx8z\\naX+1P38S7KUIOK8QI9gzsIZ0RMamOmrwl4ECAwEAAQJAdZzQARRCEZ1P9GkIVbVa\\naYWcXSe53Paet+YeteIN3xJELq4qYYuYAGlF2HmP9wpKZHXHdmlGEs8fi+pUMEGP\\n8QIhAOYVlA5Jihog5jSEb5S2Id7Z7LjrusLs67MtjjQzj3ddAiEAm1QpjN/QzB4l\\nRxIHG2BlzwmU/vSJYGH8ePkRMuC8knUCIHF+43HIxN7uq5/sVD4/OaX8SdFONupA\\nhGP2bNdDN9nhAiATKYXauD3VAJ8Orn2r9e95ZDA6Z8aO2mfAMNHbWfhJhQIgCtFH\\nzTtqqn/mgfftb/9g3vYyBRAz90vlKAaHgd9/U/k=\"\n\n\ndef decrypt(data: str, private_key: str) -&gt; str:\n    convert_data = base64.b64decode(bytes(data, encoding=\"utf8\"))\n    rsa_key = RSA.importKey(base64.b64decode(private_key))\n    cipher = PKCS1_v1_5.new(rsa_key)\n    return str(cipher.decrypt(convert_data, \"DecryptError\"), encoding='utf-8')\n\n\ndef encrypt(data: str, public_key: str) -&gt; str:\n    rsa_key = RSA.importKey(base64.b64decode(public_key))\n    cipher = PKCS1_v1_5.new(rsa_key)\n    result_data = cipher.encrypt(bytes(data, encoding=\"utf8\"))\n    return str(base64.b64encode(result_data), encoding='utf-8')\n\n\nif __name__ == '__main__':\n    encrypt_result = encrypt('123456', PUBLIC_KEY)\n    print(encrypt_result)\n    # encrypt_result = 'RZRbgTEEN9hXVdRab3wbCycIwWqBcGjRk9V2V0nDhKZwjgQ4pWHOu6A=='\n    decrypt_data = decrypt(encrypt_result, PRIVATE_KEY)\n    print(decrypt_data)\n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#java","title":"Java\u4ee3\u7801\u7247\u6bb5","text":"Java","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#rsa_1","title":"RSA\u7684\u79d8\u94a5\u7c7b\u578b\u6c47\u603b","text":"PKCS \u7248\u672c \u540d\u79f0 \u7b80\u4ecb PKCS #1 [^1] 2.1 RSA\u5bc6\u7801\u7f16\u8bd1\u6807\u51c6\uff08RSA Cryptography Standard\uff09 \u5b9a\u4e49\u4e86RSA\u7684\u6570\u7406\u57fa\u7840\u3001\u516c/\u79c1\u94a5\u683c\u5f0f\uff0c\u4ee5\u53ca\u52a0/\u89e3\u5bc6\u3001\u7b7e/\u9a8c\u7ae0\u7684\u6d41\u7a0b\u30021.5\u7248\u672c\u66fe\u7ecf\u906d\u5230\u653b\u51fb\u3002 PKCS #2 - \u64a4\u9500 \u539f\u672c\u662f\u7528\u4ee5\u89c4\u8303RSA\u52a0\u5bc6\u6458\u8981\u7684\u8f6c\u6362\u65b9\u5f0f\uff0c\u73b0\u5df2\u88ab\u7eb3\u5165PKCS#1\u4e4b\u4e2d\u3002 PKCS #3 1.4 DH\u5bc6\u94a5\u534f\u8bae\u6807\u51c6\uff08Diffie-Hellman key agreement Standard\uff09 \u89c4\u8303\u4ee5DH\u5bc6\u94a5\u534f\u8bae\u4e3a\u57fa\u7840\u7684\u5bc6\u94a5\u534f\u8bae\u6807\u51c6\u3002\u5176\u529f\u80fd\uff0c\u53ef\u4ee5\u8ba9\u4e24\u65b9\u901a\u8fc7\u91d1\u8bae\u534f\u8bae\uff0c\u62df\u5b9a\u4e00\u628a\u4f1a\u8bae\u5bc6\u94a5(Session key)\u3002 PKCS #4 - \u64a4\u9500 \u539f\u672c\u7528\u4ee5\u89c4\u8303\u8f6c\u6362RSA\u5bc6\u94a5\u7684\u6d41\u7a0b\u3002\u5df2\u88ab\u7eb3\u5165PKCS#1\u4e4b\u4e2d\u3002 PKCS #5 2.0 \u5bc6\u7801\u57fa\u690d\u52a0\u5bc6\u6807\u51c6\uff08Password-based Encryption Standard\uff09 \u53c2\u89c1RFC 2898\u4e0ePBKDF2\u3002 PKCS #6 1.5 \u8bc1\u4e66\u6269\u5c55\u8bed\u6cd5\u6807\u51c6\uff08Extended-Certificate Syntax Standard\uff09 \u5c06\u539f\u672cX.509\u7684\u8bc1\u4e66\u683c\u5f0f\u6807\u51c6\u52a0\u4ee5\u6269\u5145\u3002 PKCS #7 1.5 \u5bc6\u7801\u6d88\u606f\u8bed\u6cd5\u6807\u51c6\uff08Cryptographic Message Syntax Standard\uff09 \u53c2\u89c1RFC 2315\u3002\u89c4\u8303\u4e86\u4ee5\u516c\u5f00\u5bc6\u94a5\u57fa\u7840\u8bbe\u65bd\uff08PKI\uff09\u6240\u4ea7\u751f\u4e4b\u7b7e\u540d/\u5bc6\u6587\u4e4b\u683c\u5f0f\u3002\u5176\u76ee\u7684\u4e00\u6837\u662f\u4e3a\u4e86\u62d3\u5c55\u6570\u5b57\u8bc1\u4e66\u7684\u5e94\u7528\u3002\u5176\u4e2d\uff0c\u5305\u542b\u4e86S/MIME\u4e0eCMS\u3002 PKCS #8 [^2] 1.2 \u79c1\u94a5\u6d88\u606f\u8868\u793a\u6807\u51c6\uff08Private-Key Information Syntax Standard\uff09. Apache\u8bfb\u53d6\u8bc1\u4e66\u79c1\u94a5\u7684\u6807\u51c6\u3002 PKCS #9 2.0 \u9009\u62e9\u5c5e\u6027\u683c\u5f0f\uff08Selected Attribute Types\uff09 \u5b9a\u4e49PKCS#6\u30017\u30018\u300110\u7684\u9009\u62e9\u5c5e\u6027\u683c\u5f0f\u3002 PKCS #10 1.7 \u8bc1\u4e66\u7533\u8bf7\u6807\u51c6\uff08Certification Request Standard\uff09 \u53c2\u89c1RFC 2986\u3002 \u89c4\u8303\u4e86\u5411\u8bc1\u4e66\u4e2d\u5fc3\u7533\u8bf7\u8bc1\u4e66\u4e4bCSR\uff08certificate signing request\uff09\u7684\u683c\u5f0f\u3002 PKCS #11 2.20 \u5bc6\u7801\u8bbe\u5907\u6807\u51c6\u63a5\u53e3\uff08Cryptographic Token Interface (Cryptoki)\uff09 \u5b9a\u4e49\u4e86\u5bc6\u7801\u8bbe\u5907\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff08API\uff09\u4e4b\u89c4\u683c\u3002 PKCS #12 1.0 \u4e2a\u4eba\u6d88\u606f\u4ea4\u6362\u6807\u51c6\uff08Personal Information Exchange Syntax Standard\uff09 \u5b9a\u4e49\u4e86\u5305\u542b\u79c1\u94a5\u4e0e\u516c\u94a5\u8bc1\u4e66\uff08public key certificate\uff09\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u79c1\u94a5\u91c7\u5bc6\u7801(password)\u4fdd\u62a4\u3002\u5e38\u89c1\u7684PFX\u5c31\u5c65\u884c\u4e86PKCS#12\u3002 PKCS #13 \u2013 \u692d\u5706\u66f2\u7ebf\u5bc6\u7801\u5b66\u6807\u51c6\uff08Elliptic curve cryptography Standard\uff09 \u5236\u5b9a\u4e2d\u3002\u89c4\u8303\u4ee5\u692d\u5706\u66f2\u7ebf\u5bc6\u7801\u5b66\u4e3a\u57fa\u7840\u6240\u53d1\u5c55\u4e4b\u5bc6\u7801\u6280\u672f\u5e94\u7528\u3002\u692d\u5706\u66f2\u7ebf\u5bc6\u7801\u5b66\u662f\u65b0\u7684\u5bc6\u7801\u5b66\u6280\u672f\uff0c\u5176\u5f3a\u5ea6\u4e0e\u6548\u7387\u7686\u6bd4\u73b0\u884c\u4ee5\u6307\u6570\u8fd0\u7b97\u4e3a\u57fa\u7840\u4e4b\u5bc6\u7801\u5b66\u7b97\u6cd5\u6765\u7684\u4f18\u79c0\u3002\u7136\u800c\uff0c\u8be5\u7b97\u6cd5\u7684\u5e94\u7528\u5c1a\u4e0d\u666e\u53ca\u3002 PKCS #14 \u2013 \u62df\u968f\u673a\u6570\u4ea7\u751f\u5668\u6807\u51c6\uff08Pseudo-random Number Generation\uff09 \u5236\u5b9a\u4e2d\u3002\u89c4\u8303\u62df\u968f\u673a\u6570\u4ea7\u751f\u5668\u7684\u4f7f\u7528\u4e0e\u8bbe\u8ba1\u3002 PKCS #15 1.1 \u5bc6\u7801\u8bbe\u5907\u6d88\u606f\u683c\u5f0f\u6807\u51c6\uff08Cryptographic Token Information Format Standard\uff09 \u5b9a\u4e49\u4e86\u5bc6\u7801","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#rsa_2","title":"RSA\u7684\u683c\u5f0f\u8f6c\u6362","text":"Bash<pre><code># \u751f\u6210PKCS1\u79c1\u94a5\nopenssl genrsa -out private.pem 1024\n\n# PKCS1\u79c1\u94a5\u8f6c\u6362\u4e3aPKCS8\nopenssl pkcs8 -topk8 -inform PEM -in private.pem -outform pem -nocrypt -out pkcs8.pem\n\n# PKCS8\u79c1\u94a5\u8f6c\u6362\u4e3aPKCS1\nopenssl rsa -in pkcs8.pem -out pkcs1.pem\n\n# \u4ecePKCS1\u79c1\u94a5\u4e2d\u751f\u6210PKCS8\u516c\u94a5\nopenssl rsa -in private.pem -pubout -out public.pem\n\n# \u4ecePKCS8\u79c1\u94a5\u4e2d\u751f\u6210PKCS8\u516c\u94a5\nopenssl rsa -in pkcs8.pem -pubout -out public_pkcs8.pem\n\n# \u4ecePKCS8\u516c\u94a5\u8f6c\u6362PKCS1\u516c\u94a5\nopenssl rsa -pubin -in public_pkcs8.pem -RSAPublicKey_out\n\n# \u4ecePKCS1\u516c\u94a5\u8f6c\u6362PKCS8\u516c\u94a5\nopenssl rsa -RSAPublicKey_in -in pub_pkcs1.pem -pubout\n</code></pre> <ul> <li>\u53c2\u8003\u94fe\u63a5\uff1ahttps://daniao.ws/rsa-java-to-python.html</li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/window_install_pip_bug/","title":"window\u73af\u5883\u4e2dpip\u5b89\u88c5\u62a5\u9519","text":"<ul> <li> <p>\u9519\u8bef\u65e5\u5fd7 Bash<pre><code>(blogenv) \u03bb pip install mkdocs -i https://pypi.mirrors.ustc.edu.cn/simple/ --trusted-host pypi.douban.com       \nLooking in indexes: https://pypi.mirrors.ustc.edu.cn/simple/                                                    \nWARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nWARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nWARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nWARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nWARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nCould not fetch URL https://pypi.mirrors.ustc.edu.cn/simple/mkdocs/: There was a problem confirming the ssl cert\nificate: HTTPSConnectionPool(host='pypi.mirrors.ustc.edu.cn', port=443): Max retries exceeded with url: /simple/\nmkdocs/ (Caused by SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))) - skipping  \nERROR: Could not find a version that satisfies the requirement mkdocs                                           \nERROR: No matching distribution found for mkdocs                                                                \nCould not fetch URL https://pypi.mirrors.ustc.edu.cn/simple/pip/: There was a problem confirming the ssl certifi\ncate: HTTPSConnectionPool(host='pypi.mirrors.ustc.edu.cn', port=443): Max retries exceeded with url: /simple/pip\n/ (Caused by SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))) - skipping        \n</code></pre></p> </li> <li> <p>\u89e3\u51b3\u65b9\u5f0f Bash<pre><code>pip install mkdocs -i http://pypi.douban.com/simple --trusted-host pypi.douban.com\n</code></pre></p> </li> </ul>","tags":["Bug"]},{"location":"notehub/solution/opshub/centos_yum_source_delete_solution/","title":"Centos\u7684yum\u6e90\u8bef\u5220\u89e3\u51b3\u65b9\u6cd5","text":"","tags":["Ops"]},{"location":"notehub/solution/opshub/centos_yum_source_delete_solution/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<ul> <li>\u66f4\u6362yum\u6e90\uff0c\u624b\u8befyum\u6e90\u8bef\u5220</li> </ul>","tags":["Ops"]},{"location":"notehub/solution/opshub/centos_yum_source_delete_solution/#bug","title":"Bug\u73b0\u573a","text":"Bash<pre><code>(base) [root@automlgpu4 bin]# yum \n-bash: /usr/bin/yum: No such file or directory\n</code></pre>","tags":["Ops"]},{"location":"notehub/solution/opshub/centos_yum_source_delete_solution/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"Bash<pre><code># step1: \u67e5\u770bcentos\u7248\u672c\u4fe1\u606f\n$ rpm -q centos-release\n[output]: centos-release-7-9.2009.1.el7.centos.x86_64\n\n# step2 \u627e\u5230\u5bf9\u5e94\u7684\u6e90\u4fe1\u606f\uff0c\u94fe\u63a5\u5982\u4e0b\uff1a\nhttp://mirrors.163.com/\n\n# step3:\u6267\u884c\u4e0b\u9762\u547d\u4ee4\nrpm -ivh --nodeps http://mirrors.163.com/centos/7.9.2009/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm\nrpm -ivh --nodeps http://mirrors.163.com/centos/7.9.2009/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-54.el7_8.noarch.rpm\nrpm -ivh --nodeps http://mirrors.163.com/centos/7.9.2009/os/x86_64/Packages/yum-3.4.3-168.el7.centos.noarch.rpm\n\n# step4\ncd /etc/yum.repo.d/\nwget http://mirrors.163.com/.help/CentOS7-Base-163.repo\nyum repolist\nyum clean all\nyum makecache\n</code></pre>","tags":["Ops"]},{"location":"notehub/solution/opshub/mac_brew_service_error_solution/","title":"Mac\u4f7f\u7528brew services\u62a5\u9519","text":"<ul> <li>\u89e3\u51b3\u65b9\u6848</li> </ul> Bash<pre><code>brew tap homebrew/services\n</code></pre> <p>Mac \u4f7f\u7528 brew services list \u62a5\u9519</p> <ul> <li>\u62a5\u9519\u539f\u56e0</li> </ul> Bash<pre><code>(base) \u279c  ~ brew services start tomcat@8\nError: uninitialized constant Homebrew::Service::System\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-services/cmd/services.rb:61:in `services'\n/usr/local/Homebrew/Library/Homebrew/brew.rb:94:in `&lt;main&gt;'\n</code></pre> <ul> <li>\u95ee\u9898\u5206\u6790</li> <li>\u7531\u4e8e\u5347\u7ea7\u4e86mac \u7cfb\u7edf\uff0c\u5bfc\u81f4mac \u7684brew \u90e8\u5206\u529f\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528</li> <li>\u89e3\u51b3\u65b9\u6cd5</li> </ul> Text Only<pre><code>cd /usr/local/Homebrew/Library/Taps/homebrew/\nrm -rf homebrew-services\nbrew tap homebrew/services\n</code></pre> <ul> <li>\u6267\u884c\u65e5\u5fd7</li> </ul> Bash<pre><code>(base) \u279c  ~ brew services list\nError: uninitialized constant Homebrew::Service::System\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-services/cmd/services.rb:61:in `services'\n/usr/local/Homebrew/Library/Homebrew/brew.rb:94:in `&lt;main&gt;'\n(base) \u279c  ~ cd /usr/local/Homebrew/Library/Taps\n(base) \u279c  Taps git:(master) ls\nbigwig-club buo         homebrew\n(base) \u279c  Taps git:(master) cd homebrew/\n(base) \u279c  homebrew git:(master) ls\nhomebrew-cask     homebrew-core     homebrew-services\n(base) \u279c  homebrew git:(master) rm -rf homebrew-services\n(base) \u279c  homebrew git:(master) brew tap homebrew/services\n==&gt; Tapping homebrew/services\nCloning into '/usr/local/Homebrew/Library/Taps/homebrew/homebrew-services'...\nremote: Enumerating objects: 2430, done.\nremote: Counting objects: 100% (2430/2430), done.\nremote: Compressing objects: 100% (1151/1151), done.\nremote: Total 2430 (delta 1127), reused 2339 (delta 1091), pack-reused 0\nReceiving objects: 100% (2430/2430), 665.90 KiB | 716.00 KiB/s, done.\nResolving deltas: 100% (1127/1127), done.\nTapped 1 command (45 files, 834KB).\n(base) \u279c  homebrew git:(master) brew services list\nName       Status User File\nkafka      none\nredis      none\nsupervisor none\ntomcat@8   none\nzookeeper  none\n(base) \u279c  homebrew git:(master) brew services start tomcat@8\n==&gt; Successfully started `tomcat@8` (label: homebrew.mxcl.tomcat@8)\n(base) \u279c  homebrew git:(master) brew services list\nName       Status  User        File\nkafka      none\nredis      none\nsupervisor none\ntomcat@8   started roninsswang ~/Library/LaunchAgents/homebrew.mxcl.tomcat@8.plist\nzookeeper  none\n</code></pre>","tags":["Ops"]},{"location":"notehub/solution/opshub/server_disk_full_solution/","title":"\u670d\u52a1\u5668\u78c1\u76d8\u7a7a\u95f4\u6ee1\u7684\u89e3\u51b3\u529e\u6cd5","text":"<ul> <li>1.\u8f93\u5165\u547d\u4ee4\u67e5\u770b\u78c1\u76d8\u4fe1\u606f</li> </ul> Bash<pre><code>df \u2013h \n</code></pre> <ul> <li>2.\u8fdb\u5165\u5927\u5bb9\u91cf\u6587\u4ef6\u5939\u4e0b\uff0c\u4f7f\u7528\u547d\u4ee4\u67e5\u770b\u5177\u4f53\u6587\u4ef6\u5927\u5c0f</li> </ul> Bash<pre><code>sudo du -sh * \n</code></pre> <ul> <li>3.\u5220\u9664\u5927\u6587\u4ef6</li> </ul> Bash<pre><code>sudo rm -f \u6587\u4ef6\u540d   # \u4e00\u822c\u662f\u65e5\u5fd7\u6587\u4ef6\n</code></pre> <ul> <li>4.\u5220\u9664\u6587\u4ef6\u4ee5\u540e\uff0c\u5e76\u672a\u53d1\u73b0\u78c1\u76d8\u7684\u7a7a\u4f59\u7a7a\u95f4\u589e\u5927\uff0c\u8fd8\u9700\u8981\u6740\u6389\u6539\u5220\u9664\u547d\u4ee4\u7684\u8fdb\u7a0b</li> </ul> Bash<pre><code>sudo lsof / | grep deleted\n\nkill -9 \u8fdb\u7a0b\u53f7\n</code></pre> <ul> <li>5.\u91cd\u542f\u5bf9\u5e94\u9879\u76ee\u670d\u52a1</li> </ul>","tags":["Ops"]},{"location":"notehub/solution/opshub/win10_git_chinese_solution/","title":"win10\u7684cmd\u4e2d\u64cd\u4f5cgit\u4e2d\u6587\u4e71\u7801\u89e3\u51b3\u65b9\u6cd5","text":"<p>\u5728win10\u7684cmd\u7ec8\u7aef\u4e2d\u4f7f\u7528git\u65f6\uff0c\u51fa\u73b0\u4e2d\u6587\u4e71\u7801\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6cd5</p> <ul> <li>\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165\u4e0b\u5217\u6307\u4ee4</li> </ul> Bash<pre><code>git config --global core.quotepath false \ngit config --global gui.encoding utf-8\ngit config --global i18n.commit.encoding utf-8 \ngit config --global i18n.logoutputencoding utf-8 \n</code></pre> <ul> <li>\u5728\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u4e2d\u65b0\u589e\u73af\u5883\u53d8\u91cf</li> </ul> Bash<pre><code># LESSCHARSET=utf-8\n\u53d8\u91cf\u540d\uff1aLESSCHARSET\n\u503c\uff1autf-8\n</code></pre> <ul> <li>\u91cd\u542fcmd\uff0c\u6216\u8005\u5173\u95ed\u65b0\u5f00\u4e00\u4e2acmd\u7ec8\u7aef</li> </ul>","tags":["Ops"]},{"location":"thinking/","title":"Thinking","text":"<p>Info</p> <p>\u8fd9\u91cc\u662f\u4e2a\u4eba\u7684\u968f\u601d\u3001\u968f\u60f3\u3001\u53ca\u611f\u609f\uff0c\u5199\u70b9\u6280\u672f\u4e4b\u5916\u7684\u4e1c\u897f...</p>"},{"location":"thinking/posts/01_smart_to_do_things/","title":"\u5982\u4f55\u660e\u660e\u767d\u767d\u7684\u505a\u4e8b","text":"","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_2","title":"\u505a\u4e8b\u7684\u6838\u5fc3\u4e09\u8981\u7d20","text":"<ol> <li>\u7406\u6e05\u695a</li> <li>\u8bb2\u660e\u767d</li> <li>\u505a\u5230\u4f4d</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_3","title":"\u5982\u4f55\u7406\u6e05\u695a\u95ee\u9898","text":"<ol> <li>\u6700\u539f\u59cb\u7684\u9700\u6c42/\u95ee\u9898\u662f\u4ec0\u4e48\uff1f</li> <li>\u4e3a\u4ec0\u4e48\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f\u4e0d\u89e3\u51b3\u4f1a\u6709\u4ec0\u4e48\u5f71\u54cd\uff0c\u4e0d\u505a\u6548\u7387\u6700\u9ad8</li> <li>\u95ee\u9898\u53d1\u751f\u7684\u6839\u672c\u539f\u56e0\u662f\u4ec0\u4e48\uff1f</li> <li>\u8fd9\u4e2a\u5b9a\u4e49\u5bf9\u4e8e\u5176\u4ed6\u4eba\u80fd\u5426\u542c\u7684\u61c2\uff1f</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_4","title":"\u5e38\u7528\u62c6\u89e3\u95ee\u9898\u7684\u601d\u7ef4\u6a21\u578b","text":"<ul> <li>MECE\u5206\u89e3\u6cd5\uff1a</li> <li>\u76f8\u5bf9\u72ec\u7acb\uff0c\u5b8c\u5168\u7a77\u5c3d\u7684\u5206\u89e3\u51fa\u6700\u5c0f\u7684\u95ee\u9898 \u2014&gt; \u5206\u7c7b</li> <li>\u5f52\u56e0\u56de\u6eaf\u6cd5\uff1a</li> <li>\u901a\u8fc7\u4e0d\u540c\u5730\u53cd\u63a8\u8ffd\u95ee\uff0c\u4ece\u800c\u627e\u5230\u6df1\u5c42\u7684\u539f\u56e0 \u2014&gt; \u5047\u8bbe</li> <li>5W2H\uff1a</li> <li>What\u3001Who\u3001Where\u3001When\u3001Why\u3001How\u3001How Much \u2014&gt; \u89d2\u5ea6</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#mece","title":"MECE\u5206\u89e3\u6cd5","text":"<p>Mutually Exclusive\u5404\u90e8\u5206\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0cCollectively Exhaustive\u6240\u6709\u90e8\u5206\u5b8c\u5168\u7a77\u5c3d\u3002\u7528\u4e8e\u5c06\u4e00\u4e2a\u5927\u95ee\u9898\u62c6\u5206\u6210\u82e5\u5e72\u4e2a\u4e92\u76f8\u6392\u65a5\u4e14\u96c6\u5408\u5b8c\u5907\u7684\u5c0f\u95ee\u9898\uff0c\u8ba9\u4f60\u5f88\u6e05\u6670\u7b80\u5355\u7684\u89e3\u51b3\u3002</p> <ul> <li>\u4e8c\u5206\u6cd5\uff1a\u627e\u4e00\u4e2a\u7ef4\u5ea6\uff0c\u5206\u62102\u4e2a\u90e8\u5206\uff0c\u5982\u4e2d\u56fd/\u5916\u56fd</li> <li>\u8fc7\u7a0b\u6cd5\uff1a\u4e8b\u60c5\u53d1\u5c55\u7684\u65f6\u95f4\u987a\u5e8f\uff0c\u6d41\u7a0b\uff0c\u7a0b\u5e8f\uff0c\u5982SOP</li> <li>\u8981\u7d20\u6cd5\uff1a\u6839\u636e\u4e8b\u7269\u91cd\u8981\u7684\u51e0\u4e2a\u8981\u7d20\u8fdb\u884c\u5212\u5206\uff0c\u5982\u5938\u4eba</li> <li>\u516c\u5f0f\u6cd5\uff1a\u7b80\u5355\u6570\u5b66\u516c\u5f0f\uff0c\u5982 \u8017\u65f6=\u524d\u7aef+\u4f20\u8f93+\u63a5\u53e3</li> <li>\u77e9\u9635\u6cd5\uff1a\u5c06\u4e00\u4e2a\u4e8b\u7269\u62c6\u5206\u6210\u4e24\u7ef4\u5ea6\u53d8\u62104\u4e2a\u8c61\u9650\uff0c\u5982\u91cd\u8981\u7d27\u6025</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_5","title":"\u5f52\u56e0\u56de\u6eaf\u6cd5","text":"<p>\u4e00\u79cd\u901a\u8fc7 \u9010\u6b65\u6392\u67e5\u548c\u5206\u6790\u591a\u4e2a\u53ef\u80fd \u7684\u539f\u56e0\uff0c\u6765\u5bfb\u627e\u4e8b\u4ef6\u771f\u6b63\u7684\u539f\u56e0\u7684\u65b9\u6cd5\uff0c\u4ece\u4e8b\u4ef6\u53d1\u751f\u540e\u7684\u7ed3\u679c\u5165\u624b\uff0c\u9006\u5e8f\u63a8\u65ad\uff0c\u6700\u7ec8\u627e\u5230\u771f\u6b63\u7684\u539f\u56e0\u3002 eg: \u4e00\u4e2a\u89c6\u9891\u5ba2\u6237\u7aef\uff0c\u64ad\u653e\u7a33\u5b9a\u6027\u6570\u636e\u7a81\u7136\u53d1\u751f\u4e8630%\u7684\u4e0b\u964d\uff0c\u5982\u4f55\u7528\u627e\u5230\u95ee\u9898</p> <ul> <li>\u662f\u4e0d\u662f\u7cfb\u7edf\u7684\u539f\u56e0-&gt;\u662f\u4e0d\u662f\u7f51\u7edc\u7684\u95ee\u9898-&gt;\u662f\u4e0d\u662f\u624b\u673a\u54c1\u724c\u7684\u539f\u56e0-&gt;\u662f\u4e0d\u662fApp\u7248\u672c\u95ee\u9898</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#5w2h","title":"5W2H\u6cd5","text":"<ul> <li>What\u3001Who\u3001Where\u3001When\u3001Why\u3001How\u3001How Much</li> <li>\u5728 \u8ba1\u5212\u505a\u4e00\u6b3e\u4ea7\u54c1 \u7684\u65f6\u5019\uff0c\u7528\u8fd9\u4e2a\u65b9\u6cd5\u6765\u660e\u786e\u9700\u6c42\u75db\u70b9</li> <li>\u7528\u4e8e\u81ea\u95ee\u81ea\u7b54\u7684\u65b9\u5f0f\u6765 \u53d1\u89c9\u95ee\u9898\u6df1\u5c42\u6b21\u7684\u539f\u56e0</li> </ul> <p>*eg: *\u8fd9\u662f\u4ec0\u4e48\u4ea7\u54c1-&gt;\u4ec0\u4e48\u65f6\u5019\u4e0a\u7ebf-&gt;\u5728\u4ec0\u4e48\u5730\u65b9\u4f7f\u7528-&gt;\u4e3a\u4ec0\u4e48\u9700\u8981\u505a\u5b83-&gt;\u4e3b\u8981\u7528\u6237\u662f\u8c01-&gt;\u600e\u4e48\u6765\u5b9e\u73b0-&gt;\u9700\u8981\u82b1\u8d39\u5565</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_6","title":"\u5982\u4f55\u5224\u65ad\u95ee\u9898\u7406\u6e05\u695a\u4e86","text":"<ul> <li>\u8fd8\u6709\u6ca1\u6709\u61f5\u903c\u7684\u5730\u65b9\u5417\uff1f</li> <li>\u8fd8\u6709\u6ca1\u6709\u6ca1\u6709\u8003\u8651\u5230\u5230\u7684\u70b9\uff1f</li> <li>\u4f60\u5df2\u7ecf\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\u56f0\u607c\u4e86</li> <li>\u65e0\u8bba\u522b\u4e2a\u600e\u4e48argue\uff0c\u6211\u57fa\u672c\u4e0a\u53ef\u4ee5\u7b54\u5f97\u4e0a\u6765</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_7","title":"\u5982\u4f55\u8bb2\u660e\u767d\u95ee\u9898","text":"<p>\u5982\u4f55\u8ba9\u5176\u4ed6\u4eba\u4e5f\u5f88\u6e05\u695a\u8fd9\u4e2a\u4e8b\u60c5</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_8","title":"\u5982\u4f55\u5199\u4e00\u4e2a\u5f88\u660e\u767d\u7684\u6587\u6863","text":"<p>\u5224\u65ad\u5982\u4f55\u5199\u660e\u767d\u4e86\uff1a\u522b\u4eba\u770b\u7740\u4f60\u7684\u6587\u6863\uff0c\u4e5f\u5c31\u53ef\u4ee5\u5f00\u59cb\u5199\u4ee3\u7801\u4e86</p> <ol> <li>\u7ec4\u7ec7\u7ed3\u6784\u6709\u903b\u8f91\u611f\uff0c\u6807\u9898\u548c\u526f\u6807\u9898\u3001\u6bb5\u843d\u5206\u7ec4\uff0c\u8111\u56fe\u5148\u884c</li> <li>\u7b80\u5355\u63a5\u5730\u6c14\u7684\u8868\u8fbe\uff0c\u6e05\u6670\u6613\u7406\u89e3\u7684\u63cf\u8ff0\uff0c\u770b\u5f97\u61c2\uff0c\u8bb2\u903b\u8f91</li> <li>\u5f88\u6070\u5f53\u7684\u4f8b\u5b50\uff0c\u5b9e\u9645\u6216\u8005\u6a21\u62df\u7684\u6848\u4f8b\u3001Demo\u7684\u6848\u4f8b\u3001\u6d41\u7a0b\u56fe</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#rfc","title":"\u53ef\u4ee5\u53bb\u67e5\u4e00\u4e0bRFC","text":"<p>Request for Comments\uff0c\u4e00\u79cd\u6307\u5bfc\u5236\u5b9a\u4e92\u8054\u7f51\u6807\u51c6\u7684\u6587\u6863\u683c\u5f0f </p> <ol> <li>\u660e\u786e\u662f\u8c01\u6765\u8bfb\uff0c\u6587\u7ae0\u76ee\u7684\uff0c\u5e76\u786e\u5b9a\u5176\u9002\u7528\u7684\u8303\u56f4</li> <li>\u63cf\u8ff0\u95ee\u9898\u7684\u80cc\u666f\u548c\u76f8\u5173\u7684\u5df2\u6709\u89e3\u51b3\u65b9\u6848</li> <li>\u5bf9\u89e3\u51b3\u65b9\u6848\u8be6\u7ec6\u9610\u8ff0\uff0c\u6709\u6e05\u6670\u7684\u903b\u8f91\u63a8\u7406\u548c\u53ef\u5b9e\u73b0\u7684\u7ec6\u8282</li> <li>\u672a\u89e3\u51b3\u7684\u95ee\u9898\u4ee5\u53ca\u672a\u6765\u53ef\u80fd\u6027\u7684\u8bf4\u660e</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_9","title":"\u5199\u6587\u6863\u7684\u53cd\u4f8b\u601d\u8003","text":"<ul> <li>\u4e3a\u4e86\u4e07\u65e0\u4e00\u5931\uff0c\u662f\u5426\u9700\u8981\u5bf9\u4e0d\u540c\u7684\u4eba\u5199\u4e0d\u540c\u7684\u6587\u6863\uff1f</li> <li>\u662f\u5426\u4e3a\u4e86\u663e\u793a\u6211\u7684\u725b\u903c\uff0c\u5c06\u7b80\u5355\u903b\u8f91\u5199\u5f97\u5f88\u590d\u6742\uff1f</li> <li>\u4e3a\u4e86\u663e\u793a\u6211\u5f88\u6709\u201c\u5473\u9053\u201d\uff0c\u51fa\u73b0\u5927\u91cf\u8d4b\u80fd\u3001\u6293\u624b\u3001\u9ebb\u5c06\u5927\u56fe</li> <li>\u7531\u4e8eTL\u50ac\u6211\u4ea4\u4f5c\u4e1a\uff0c\u60f3\u4e0d\u51fa\u6765\u53ea\u80fd\u7f16\uff0c\u5176\u5b9e\u6211\u81ea\u5df1\u90fd\u89c9\u5f97\u4e0d\u9760\u8c31</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#-star","title":"\u8bb2\u660e\u767d\u4e8b\u60c5\u5e38\u7528\u6a21\u578b- STAR","text":"<ul> <li>Situation\uff1a\u9047\u5230\u7684\u5177\u4f53\u60c5\u666f</li> <li>Task\uff1a\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\u6216\u4efb\u52a1</li> <li>Action\uff1a\u91c7\u53d6\u7684\u884c\u52a8\u548c\u5b9e\u65bd\u7684\u8fc7\u7a0b</li> <li>Result\uff1a\u91c7\u53d6\u884c\u52a8\u7684\u7ed3\u679c</li> </ul> <p>*eg: *\u6211\u4eec\u6253\u7b97\u5982\u4f55\u89e3\u51b3XXX\u7684\u6027\u80fd\u4f53\u9a8c\u95ee\u9898\uff1f</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_10","title":"\u6211\u8bb2\u4e8b\u60c5\u7684\u65f6\u5019\u5f88\u5bb9\u6613\u7d27\u5f20\uff1f","text":"<ol> <li>\u9996\u5148\u660e\u786e\u4efb\u4f55\u4eba\u8bb2\u4e1c\u897f\u90fd\u4f1a\u7d27\u5f20\uff0c\u53ea\u4e0d\u8fc7\u4ed6\u719f\u7ec3\u4e86\u800c\u5df2</li> <li>\u4f60\u611f\u89c9\u5230\u7684\u666e\u901a\u7d27\u5f20\uff0c\u5176\u5b9e\u522b\u4eba\u770b\u4e0d\u51fa\u6765</li> <li>\u5047\u5982\u4f60\u51c6\u5907\u597d\u4e86\uff0c\u4f60\u4f1a\u5f88\u81ea\u4fe1\uff0c\u8ba9\u4f60\u6ca1\u6709\u90a3\u4e48\u7d27\u5f20 <p>eg: \u5982\u4f55\u8ba9\u5408\u4f5c\u65b9\u4e70\u8d26- SCQA - Situation\uff1a\u7531\u5927\u5bb6\u90fd\u719f\u6089\u7684\u60c5\u666f\u4e8b\u5b9e\u5f15\u5165 - Complication\uff1a\u5b9e\u9645\u60c5\u51b5\u5f80\u5f80\u548c\u6211\u4eec\u7684\u8981\u6c42\u6709\u51b2\u7a81 - Question\uff1a\u51fa\u73b0\u95ee\u9898\u600e\u4e48\u529e - Answer\uff1a\u56de\u7b54\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u662f\u4ec0\u4e48</p> <p>\u4e00\u53e5\u4f60\u53ef\u80fd\u8bb0\u5f97\u4f4f\u4e00\u8f88\u5b50\u7684\u5e7f\u544a\u8bed\uff0c\u201c\u5f97\u4e86\u7070\u6307\u7532\uff0c\u4e00\u4e2a\u4f20\u67d3\u4fe9\uff0c\u95ee\u6211\u600e\u4e48\u529e\uff0c\u9a6c\u4e0a\u7528\u4eae\u7532\u201d</p> </li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_11","title":"\u6ca1\u6709\u8bb2\u660e\u767d\u7684\u60c5\u51b5","text":"<ul> <li>\u542c\u7684\u4eba\u81ea\u5df1\u5728\u505a\u81ea\u5df1\u7684\u4e8b\u60c5\uff0c\u751a\u81f3\u6709\u4e00\u70b9\u60f3\u7761\u89c9</li> <li>\u542c\u7684\u4eba\u6ca1\u6709\u4efb\u4f55\u548c\u4f60\u8ba8\u8bba\u7684\u70b9\uff0c\u4e00\u95ee\u5c31\u662f\u597d\u597d\u597d</li> <li>\u542c\u7684\u4eba\u4e00\u8111\u888b\u7684\u95ee\u53f7\uff1f\uff1f\u4e0d\u65adargue</li> <li>\"\u6211\"\u9ad8\u5ea6\u592a\u9ad8\u4e86\uff0c\u4f60\u4eec\u542c\u4e0d\u61c2\u662f\u4f60\u4eec\u80fd\u529b\u4e0d\u591f</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_12","title":"\u5982\u4f55\u53bb\u660e\u767d\u7684\u505a","text":"<p>Last but not least</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_13","title":"\u5982\u4f55\u8bc1\u660e\u81ea\u5df1\u505a\u597d\u4e86\u5462\uff1f","text":"<ul> <li>\u5236\u5b9a\u9a8c\u6536\u6807\u51c6\uff0c\u5b8c\u6210\u540e\u8fdb\u884c\u9a8c\u8bc1</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/02_tech_yiyan/","title":"\u6280\u672f\u4e00\u8a00","text":"<ul> <li> <p>\u9700\u6c42\uff0c\u4f1a\u6539\u53d8\u4eba\u770b\u5f85\u4e16\u754c\u7684\u65b9\u5f0f\u3002</p> </li> <li> <p>\u6280\u672f\u662f\u5de5\u7a0b\uff0c\u800c\u5de5\u7a0b\u662f\u65f6\u95f4\u3001\u8d44\u6e90\u3001\u4eba\u529b\u7b49\u7eb7\u7e41\u590d\u6742\u4e8b\u60c5\u7684\u6298\u8877\u3002</p> </li> <li> <p>\u4e00\u95e8\u5de5\u7a0b\u6700\u9700\u8981\u7684\u662fhands on dirty work(\u52a8\u624b\u505a\u810f\u6d3b)\uff0c\u624d\u80fd\u8ba9\u81ea\u5df1\u7684\u80fd\u529b\u5f97\u5230\u672c\u8d28\u7684\u63d0\u5347\u3002</p> </li> <li> <p>\u8fdb\u9636\u7684\u4ee3\u7801\u8bbe\u8ba1\u662f\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u8ba9\u4ee3\u7801\u66f4\u80fd\u6709\u6548\u7684\u5b9e\u73b0\u3002\u7ec8\u6781\u7684\u4ee3\u7801\u8bbe\u8ba1\u662f\u54f2\u5b66\uff0c\u662f\u4ee3\u7801\u4e2d\u8868\u8fbe\u51fa\u6765\u7684\u4ef7\u503c\u89c2\u3002</p> </li> <li> <p>\u8981\u5b66\u4e60\u4e00\u95e8\u8bed\u8a00\uff0c\u6700\u7ec8\u76ee\u7684\u5c31\u662f\u5b66\u4f1a\u7528\u8fd9\u95e8\u7f16\u7a0b\u8bed\u8a00\u7684\u601d\u7ef4\u53bb\u5199\u8fd9\u95e8\u8bed\u8a00\u7684\u4ee3\u7801\uff0cgo coding in go way, \u800c\u4e0d\u662f\uff0cgo coding in c way, or java way.</p> </li> <li> <p>\u5b66\u4e60\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u5176\u5b9e\u5c31\u662f\u8981\u5b66\u4e60\u8bed\u8a00\u63d0\u4f9b\u7684\u7f16\u7a0b\u6a21\u578b\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u7f16\u7a0b\u6a21\u578b\u4f1a\u5e26\u7ed9\u4f60\u4e0d\u540c\u7684\u601d\u7ef4\u65b9\u5f0f\u3002</p> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/","title":"\u5982\u4f55\u9ad8\u6548\u5b66\u4e60\u5f00\u6e90\u9879\u76ee","text":"","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_1","title":"\u5b66\u4e60\u539f\u5219\uff1a","text":"<ul> <li>\u9605\u8bfb\u5b98\u65b9\u539f\u7248\u6587\u6863\uff0c\u800c\u4e0d\u662f\u9605\u8bfb\u7ecf\u8fc7\u7ffb\u8bd1\u6216\u8005\u8fc7\u6ee4\u7684\u6587\u6863</li> <li>\u5982\u679c\u53d7\u9650\u4e8e\u82f1\u8bed\u9605\u8bfb\u80fd\u529b\uff0c\u9000\u800c\u6c42\u5176\u6b21\u7684\u65b9\u6cd5\u662f\uff0c\u5148\u9605\u8bfb\u7ffb\u8bd1\u540e\u7684\u6587\u6863\uff0c\u518d\u9605\u8bfb\u539f\u7248\u6587\u6863\uff0c\u53ef\u4ee5\u7ea0\u6b63\u6216\u907f\u514d\u7ffb\u8bd1\u6587\u6863\u4e2d\u51fa\u73b0\u7684\u9519\u6f0f\u70b9\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_2","title":"\u5b66\u4e60\u5f00\u6e90\u9879\u76ee\u7684\u9ad8\u6548\u6d41\u7a0b\uff1a","text":"","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#1","title":"1\u3001\u901a\u8bfb\u5b98\u65b9\u6587\u6863\uff08\u539f\u7248\uff09\u4e86\u89e3\u5f00\u6e90\u9879\u76ee","text":"<ul> <li>\u76ee\u7684\uff1a\u4e86\u89e3\u8be5\u9879\u76ee\u7684\u6574\u4f53\u7ed3\u6784\uff0c\u529f\u80fd\u7279\u6027\u3001\u5173\u952e\u6280\u672f\u3001\u5b9e\u73b0\u539f\u7406\u548c\u76f8\u5173\u751f\u6001</li> <li>\u7ec6\u5206\u6d41\u7a0b\uff1a<ol> <li>\u9605\u8bfbQuick Start\u5185\u5bb9\uff0c\u642d\u5efa\u73af\u5883\uff0c\u5b9e\u64cd\u5185\u5bb9\u6848\u4f8b<ul> <li>\u521d\u6b65\u5bf9\u8be5\u9879\u76ee\u6709\u4e00\u4e2a\u611f\u6027\u8ba4\u8bc6\uff0c\u4fbf\u4e8e\u5728\u540e\u7eed\u6df1\u5165\u5b66\u4e60\u7684\u65f6\u5019\u8fd0\u884c\u4e00\u4e9b\u4f8b\u5b50</li> </ul> </li> <li>\u8be6\u7ec6\u7ea6\u5b9aIntroduction\uff08\u4e00\u822c\u662f\u9879\u76ee\u7684\u57fa\u672c\u4ecb\u7ecd\uff09<ul> <li>\u627e\u5230\u8be5\u9879\u76ee\u7528\u5230\u7684\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5\u548c\u540d\u8bcd\u7684\u4ecb\u7ecd\uff0c\u8fdb\u884c\u7406\u89e3\u548c\u52a0\u6df1\u5370\u8c61</li> </ul> </li> <li>\u9605\u8bfb\u5173\u4e8e\u8be5\u9879\u76ee\u4f7f\u7528\u573a\u666f\u548c\u529f\u80fd\u7279\u6027\u53ca\u76f8\u5173\u751f\u6001\u7cfb\u7edf\u4ecb\u7ecd\u7684\u76f8\u5173\u5185\u5bb9<ul> <li>\u6bd4\u5982kafka\u6587\u6863\u4e2d\u7684Use cases \u548c Ecosystem</li> </ul> </li> </ol> </li> <li>\u8bfb\u5b8c\u4ee5\u540e\u9700\u8981\u8fbe\u5230\u7684\u6548\u679c\uff1a<ol> <li>\u8fd9\u4e2a\u9879\u76ee\u662f\u5e72\u4ec0\u4e48\u7684\uff0c\u80fd\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\uff1f</li> <li>\u9002\u5408\u5728\u54ea\u4e9b\u573a\u666f\u4f7f\u7528</li> <li>\u6709\u54ea\u4e9b\u529f\u80fd\uff1f\u5982\u4f55\u4f7f\u7528\uff1f</li> </ol> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#2","title":"2\u3001\u8bfb\u80cc\u540e\u7684\u8bba\u6587\uff0c\u4e86\u89e3\u5176\u5b9e\u73b0\u539f\u7406","text":"<ul> <li>\u4e00\u822c\u4e00\u4e2a\u4f18\u79c0\u7684\u5f00\u6e90\u9879\u76ee\uff0c\u4e00\u822c\u90fd\u6765\u6e90\u4e8e\u67d0\u4e2a\u77e5\u540d\u8bba\u6587\uff0c\u7136\u540e\u88ab\u5927\u725b\u5b9e\u73b0\u51fa\u6765\u3002</li> <li>\u5982\u679c\u5b9e\u5728\u4e0d\u77e5\u9053\u8fd9\u4e2a\u9879\u76ee\u80cc\u540e\u7684\u8bba\u6587\u662f\u5565\uff0c\u6280\u672f\u8df3\u8fc7</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#3","title":"3\u3001\u5e26\u7740\u95ee\u9898\u9605\u8bfb\u6e90\u7801","text":"<ul> <li>\u4e00\u822c\u6587\u6863\u662f\u6811\u72b6\u7ed3\u6784\uff0c\u800c\u9879\u76ee\u6e90\u7801\u662f\u7f51\u72b6\u7ed3\u6784\uff0c</li> <li>\u6700\u4f73\u5b9e\u8df5\u662f\u5e26\u7740\u95ee\u9898\u548c\u7b54\u6848\u53bb\u8bfb\u6e90\u7801\uff0c\u800c\u4e0d\u662f\u4ecemain\u65b9\u6cd5\u8fd8\u662f\u6cdb\u6cdb\u7684\u53bb\u770b\uff0c<ul> <li>\u6bd4\u5982\uff1aEtcd\u662f\u5982\u4f55\u5b9e\u73b0\u670d\u52a1\u6ce8\u518c\u7684\uff1f</li> </ul> </li> <li>\u80fd\u591f\u8fbe\u6210\u7684\u6548\u679c\uff1a<ul> <li>\u4ee5\u95ee\u9898\u7684\u548c\u7b54\u6848\u7684\u65b9\u5f0f\u9605\u8bfb\u6e90\u7801\uff0c\u6bcf\u6b21\u901a\u5e38\u53ea\u4f1a\u82b1\u5f88\u77ed\u7684\u65f6\u95f4\uff0c\u9605\u8bfb\u5f88\u5c11\u90e8\u5206\u7684\u6e90\u7801\uff0c\u5c31\u80fd\u89e3\u51b3\u4e00\u4e2a\u95ee\u9898\uff0c\u5f97\u5230\u4e00\u4e9b\u6536\u83b7\u3002\u968f\u7740\u95ee\u9898\u89e3\u51b3\u6570\u91cf\u589e\u52a0\uff0c\u5c31\u4f1a\u6e10\u6e10\u5730\u5bf9\u9879\u76ee\u6e90\u7801\u8d8a\u6765\u8d8a\u4e86\u89e3\u3002</li> </ul> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_3","title":"\u5b9e\u8df5\u5e94\u7528","text":"","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_4","title":"\u5982\u4f55\u5728\u81ea\u5df1\u56e2\u961f\u7684\u9879\u76ee\u4e2d\u907f\u514d\u76f2\u76ee\u7684\u5f15\u5165\u5f00\u6e90\u9879\u76ee\uff1f","text":"<ol> <li>\u4e0d\u80fd\u4ec5\u4ec5\u77e5\u9053\u5982\u4f55\u4f7f\u7528\u8fd9\u4e2a\u5f00\u6e90\u9879\u76ee</li> <li>\u56e2\u961f\u4e2d\u5fc5\u987b\u81f3\u5c11\u4e00\u4e2a\u4eba\u719f\u6089\u8be5\u5f00\u6e90\u9879\u76ee\u7684\u5b98\u65b9\u6587\u6863\uff0c\u638c\u63e1\u5176\u5b9e\u73b0\u539f\u7406\u548c\u5f88\u591a\u7684\u7ec6\u8282</li> <li>\u5f00\u53d1\u8005\u53ea\u6709\u638c\u63e1\u4e86\u539f\u7406\uff0c\u5728\u7cfb\u7edf\u51fa\u95ee\u9898\u65f6\uff0c\u624d\u6709\u53ef\u80fd\u57fa\u4e8e\u5b83\u7684\u5b9e\u73b0\u539f\u7406\uff0c\u518d\u6839\u636e\u4e00\u4e9b\u73b0\u8c61\u6765\u6392\u67e5\u95ee\u9898\u7684\u539f\u56e0</li> <li>\u5728\u4ee5\u4e0a\u4e09\u70b9\u6709\u4e00\u4e2a\u4e0d\u6ee1\u8db3\uff0c\u90fd\u4e0d\u8981\u8f7b\u6613\u5728\u81ea\u5df1\u7684\u7cfb\u7edf\u4e2d\u5f15\u5165\u76f8\u5173\u5f00\u6e90\u9879\u76ee</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/","title":"\u63d0\u95ee\u7684\u667a\u6167","text":"","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_1","title":"\u6587\u7ae0\u94fe\u63a5","text":"<ul> <li>How To Ask Questions The Smart Way</li> <li>\u4f60\u4f1a\u95ee\u95ee\u95ee\u9898\u5417\uff1f</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_2","title":"\u6838\u5fc3\u89c2\u70b9","text":"","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_3","title":"\u63d0\u95ee\u524d","text":"<ul> <li>\u5728\u63d0\u51fa\u81ea\u5df1\u7684\u95ee\u9898\u4e4b\u524d\uff0c\u9996\u5148\u9700\u8981\u81ea\u5df1\u5148\u5c1d\u8bd5\u5bfb\u627e\u95ee\u9898\u7684\u7b54\u6848\uff0c\u6bd4\u5982\u901a\u8fc7\u641c\u7d22\u5f15\u64ce\u67e5\u770b\u662f\u5426\u6709\u5176\u4ed6\u4eba\u5df2\u7ecf\u9047\u5230\u8fc7\u4e86\u6216\u5df2\u89e3\u51b3\u8fc7\uff0c\u6bd4\u5982\u901a\u8fc7\u7ffb\u9605\u76f8\u5173\u4e66\u7c4d\u6765\u5b66\u4e60\u548c\u7406\u89e3\u5e76\u6392\u9664\u5bf9\u5e94\u95ee\u9898\u7b49\u3002</li> <li>\u5982\u679c\u6211\u4eec\u901a\u8fc7\u4e0a\u8ff0\u7684\u65b9\u5f0f\u5c06\u95ee\u9898\u89e3\u51b3\u6389\u7684\u8bdd\uff0c\u4e00\u65b9\u9762\u953b\u70bc\u7684\u81ea\u5df1\u5904\u7406\u95ee\u9898\u7684\u80fd\u529b\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\uff0c\u6bd5\u7adf\u63d0\u51fa\u95ee\u9898\u4e5f\u662f\u4e00\u4ef6\u975e\u5e38\u9ebb\u70e6\u7684\u4e8b\u60c5\u3002\u4e0d\u7136\u7684\u8bdd\uff0c\u6211\u4eec\u5373\u6d6a\u8d39\u4e86\u81ea\u5df1\u7684\u65f6\u95f4\uff0c\u4e5f\u6d6a\u8d39\u4e86\u4ed6\u4eba\u7684\u65f6\u95f4\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_4","title":"\u63d0\u95ee\u65f6","text":"<ul> <li>\u5728\u8bba\u575b\u3001\u7fa4\u7ec4\u548c\u9891\u9053\u91cc\u9762\u63d0\u95ee\u9898\u65f6\uff0c\u4e00\u5b9a\u4e0d\u8981\u4e00\u4e0a\u6765\u5c31\u95ee\u5728\u5417\uff1f\u6216\u8005\u6709\u6ca1\u6709\u54ea\u4f4d\u5927\u4f6c\u80fd\u5e2e\u5e2e\u6211\uff01\u4e4b\u7c7b\u7684\u8a00\u8bed\u3002\u6709\u4ec0\u4e48\u95ee\u9898\uff0c\u6211\u4eec\u76f4\u63a5\u8dd1\u51fa\u6765\u5373\u53ef\uff0c\u770b\u5230\u7684\u4eba\u6216\u8005\u61c2\u7684\u4eba\u81ea\u7136\u4f1a\u56de\u7b54\u6211\u4eec\u7684\u95ee\u9898\uff0c\u524d\u63d0\u662f\u5bf9\u6211\u4eec\u7684\u95ee\u9898\u611f\u5174\u8da3\u3002</li> <li>\u540c\u65f6\uff0c\u5728\u6211\u4eec\u63d0\u51fa\u95ee\u9898\u7684\u65f6\u5019\uff0c\u5199\u4e00\u4e0b\u81ea\u5df1\u662f\u5982\u4f55\u5bfb\u627e\u7b54\u6848\u7684(\u6311\u6709\u4ef7\u503c\u6216\u91cd\u70b9\u7684\u5730\u65b9\u8fdb\u884c\u9648\u8ff0)\uff0c\u8fd9\u6837\u4f1a\u8ba9\u4ed6\u4eba\u77e5\u9053\u6211\u4eec\u5e76\u4e0d\u662f\u4f38\u624b\u515a\uff0c\u5373\u4f7f\u5bf9\u65b9\u4e0d\u77e5\u9053\u7b54\u6848\u4e5f\u4f1a\u544a\u8bc9\u4f60\u4e0d\u77e5\u9053\uff0c\u800c\u975e\u4e00\u7b11\u800c\u8fc7\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_5","title":"\u63d0\u95ee\u4e2d","text":"<ul> <li>\u8981\u5b66\u4f1a\u5305\u88c5\u95ee\u9898\uff0c\u5c3d\u91cf\u4f7f\u7528\u8f83\u5c11\u7684\u8bed\u8a00\u6765\u5b8c\u6574\u63cf\u8ff0\u51fa\u81ea\u5df1\u7684\u95ee\u9898\uff0c\u5c3d\u91cf\u505a\u5230\u8a00\u7b80\u610f\u8d45\uff0c\u70b9\u660e\u4e3b\u65e8\u3002\u6bd4\u5982\uff0c\u8c01\u505a\u4ec0\u4e48\uff0c\u7ed3\u679c\u600e\u4e48\u6837\u3002</li> <li>\u5982\u679c\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u80fd\u591f\u590d\u73b0\u6211\u4eec\u95ee\u9898\u7684\u6700\u5c0f\u793a\u4f8b\u7684\u8bdd\uff0c\u5c31\u5e94\u8be5\u4f18\u5148\u63d0\u4f9b\u51fa\u6765\uff0c\u65b9\u4fbf\u5bf9\u65b9\u8c03\u8bd5\u6216\u8005\u6392\u9664\u95ee\u9898\uff0c\u8fd9\u6837\u53ef\u4ee5\u8282\u7ea6\u53cc\u65b9\u7684\u65f6\u95f4\u3002</li> <li>\u5982\u679c\u4e0d\u53ef\u4ee5\u590d\u73b0\u6216\u8005\u662f\u4e2a\u6781\u5c0f\u6982\u7387\u7684\u95ee\u9898\uff0c\u6211\u4eec\u770b\u662f\u5426\u53ef\u4ee5\u63d0\u4f9b\u5bf9\u5e94\u73af\u5883\u51fa\u53bb\uff0c\u8ba9\u5bf9\u65b9\u6392\u9664\u548c\u9a8c\u8bc1(\u524d\u63d0\u662f\u4e0d\u6d89\u53ca\u516c\u53f8\u548c\u4e2a\u4eba\u9690\u79c1\u7684\u60c5\u51b5\u4e0b)\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_6","title":"\u63d0\u95ee\u540e","text":"<ul> <li>\u5176\u5b9e\u5f88\u591a\u4eba\u90fd\u6ca1\u6709\u602a\u7656\uff0c\u4ec0\u4e48\u793c\u8c8c\u4ed6\u4eec\u4e00\u70b9\u90fd\u4e0d\u5728\u4e4e\uff0c\u6240\u4ee5\u4e0d\u7528\u975e\u5f97\u7528\u656c\u8bcd\uff0c\u4f1a\u8ba9\u4eba\u6d51\u8eab\u4e0d\u8212\u670d\u7684\u3002</li> <li>\u63d0\u51fa\u95ee\u9898\u4e4b\u540e\uff0c\u6211\u4eec\u5e94\u8be5\u53ca\u65f6\u56de\u7b54\u5bf9\u65b9\u63d0\u51fa\u7684\u95ee\u9898\u548c\u51fa\u95ee\u9898\u7684\u7ec6\u8282\uff0c\u4fdd\u6301\u6d3b\u8dc3\u5ea6\uff0c\u8fd9\u6837\u95ee\u9898\u624d\u80fd\u591f\u66f4\u5feb\u7684\u89e3\u51b3\u6389\u3002</li> <li>\u5982\u679c\u95ee\u9898\u7ecf\u8fc7\u6c9f\u901a\u6216\u8005\u8ba8\u8bba\u89e3\u51b3\u6389\u7684\u8bdd\uff0c\u6211\u4eec\u4e8b\u540e\u9700\u8981\u8fdb\u884c\u590d\u76d8\uff0c\u770b\u770b\u662f\u5426\u65e5\u540e\u53ef\u4ee5\u81ea\u884c\u89e3\u51b3\uff0c\u4ee5\u53ca\u5bf9\u5e94\u95ee\u9898\u7684\u6392\u67e5\u601d\u8def\u548c\u65b9\u6cd5\uff0c\u6bd5\u7adf\u6388\u4eba\u9c7c\u9c7c\u4e0d\u5982\u6388\u4eba\u4ee5\u6e14\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/05_personal_focus_and_abandon/","title":"\u4e2a\u4eba\u6218\u7565\u4e0a\u7684\u805a\u7126\u548c\u653e\u5f03","text":"<p>Info</p> <p>\u4fd7\u8bdd\u8bf4\uff1a\u6709\u820d\u624d\u6709\u5f97\uff01\uff01\uff01</p> <p>\u4f55\u4e3a\u6218\u7565\uff1f\u6218\u7565\u5176\u5b9e\u5c31\u662f\u51b3\u5b9a\u8be5\u505a\u4ec0\u4e48\uff0c\u4e0d\u8be5\u505a\u4ec0\u4e48\uff01\uff01\uff01</p> <p>\u6700\u8fd1\u4e00\u6bb5\u65f6\u95f4\u4ee5\u6765\uff0c\u8d8a\u53d1\u611f\u89c9\u81ea\u5df1\u5728\u5de5\u4f5c\u4e0a\u8d8a\u6765\u8d8a\u7d2f\uff0c\u4e0d\u7ecf\u610f\u95f4\uff0c\u60f3\u8d77\u6765\u4e86\u66fe\u7ecf\u8bfb\u8fc7\u7684\u4e00\u672c\u4e66\uff0c\u89c9\u5f97\u633a\u7b26\u5408\u5f53\u4e0b\u81ea\u5df1\u7684\u73b0\u72b6\u7684\uff0c\u4e66\u4e2d\u7684\u5185\u5bb9\u5927\u6982\u662f\u8fd9\u6837\u7684\uff1a</p> <ul> <li>\u5728\u5de5\u4f5c\u4e2d\uff0c\u5fc5\u987b\u8981\u610f\u8bc6\u5230\uff0c\u4e00\u4e2a\u4eba\u5f88\u96be\u5728\u591a\u4e2a\u6709\u6311\u6218\u7684\u4efb\u52a1\u4e0a\uff0c\u5168\u90e8\u5b9e\u73b0\u7a81\u7834\uff0c\u5982\u679c\u4e0d\u53bb\u533a\u5206\u5de5\u4f5c\u7684\u91cd\u70b9\uff0c\u5c31\u5f88\u6709\u53ef\u80fd\u5f15\u53d1\u79cd\u79cd\u8fde\u9501\u95ee\u9898\uff0c\u597d\u4e00\u70b9\u7684\u60c5\u51b5\u662f\uff0c\u628a\u4efb\u52a1\u90fd\u5b8c\u6210\u4e86\uff0c\u7d2f\u7684\u591f\u545b\uff0c\u4f46\u5168\u90e8\u90fd\u6ca1\u6709\u4eae\u70b9\u548c\u7a81\u7834\uff0c\u6d41\u4e8e\u5e73\u5eb8\uff1b\u574f\u4e00\u70b9\u7684\u60c5\u51b5\u662f\uff0c\u9ad8\u4f30\u4e86\u81ea\u5df1\u7684\u6267\u884c\u80fd\u529b\uff0c\u591a\u4e2a\u4efb\u52a1\u4e25\u91cdDelay\uff0c\u4ea7\u751f\u534f\u4f5c\u95ee\u9898\uff0c\u4e5f\u975e\u5e38\u5f71\u54cd\u81ea\u8eab\u7684\u5fc3\u6001\u3002</li> </ul> <p>\u611f\u89e6\u771f\u7684\u975e\u5e38\u6df1\uff0c\u7684\u786e\u662f\u5982\u6b64\u3002</p> <p>\u4e3a\u4e86\u5feb\u901f\u8c03\u6574\u597d\u81ea\u5df1\u7684\u5fc3\u6001\u548c\u72b6\u6001\uff0c\u5728\u6df1\u5ea6\u601d\u8003\u540e\uff0c\u5b66\u4f1a\u805a\u7126\uff0c\u505a\u597d\u805a\u7126\u7684\u60f3\u6cd5\u5c31\u4ea7\u751f\u4e86\uff0c\u56e0\u4e3a\u53ea\u6709\u5c06\u66f4\u591a\u7cbe\u529b\u805a\u7126\u5230\u66f4\u5c11\u66f4\u6709\u610f\u4e49\u7684\u4e8b\u4e0a\uff0c\u901a\u5e38\u8fd9\u6837\u505a\u4e8b\u7684\u6548\u679c\u4e00\u822c\u90fd\u4e0d\u4f1a\u5dee\u3002</p> <p>\u90a3\u4e48\u5982\u4f55\u53bb\u505a\u597d\u805a\u7126\u5462\uff0c\u53ef\u80fd\u5927\u5bb6\u90fd\u660e\u767d\u805a\u7126\u5176\u5b9e\u662f\u4e0d\u96be\u7684\uff0c\u96be\u7684\u820d\u5f03\uff0c\u6709\u820d\u624d\u6709\u5f97\u561b\uff0c\u53ea\u6709\u820d\u5f03\u638990%\u7684\u5e72\u6270\u4e8b\u9879\u7684\u4eba\uff0c\u624d\u53ef\u80fd\u771f\u6b63\u7684\u805a\u7126\u5230\u90a310%\u7684\u6838\u5fc3\u4efb\u52a1\u4e0a\uff0c\u6211\u8bb0\u5f97\u66fe\u6709\u4eba\u7ed9\u4ed6\u63d0\u70bc\u4e3a\uff1a\u820d\u4e5d\u53d6\u4e00\u3002</p> <p>\u7ed3\u5408\u81ea\u5df1\u5f53\u524d\u5de5\u4f5c\u7684\u5185\u5bb9\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u65b9\u5411\u5f00\u59cb\u53bb\u5b9e\u65bd\u805a\u7126\u3002</p> <p>\u4e2a\u4eba\u6210\u957f\u7684\u805a\u7126\uff0c\u505a\u66f4\u4f18\u79c0\u7684\u81ea\u5df1\u3002</p> <p>\u4f18\u79c0\u7684\u5b9a\u4e49\uff1a\u505a\u540c\u6837\u7684\u4e8b\u60c5\uff0c\u8868\u73b0\u7684\u5c31\u662f\u6bd4\u522b\u4eba\u597d\uff01</p> <ul> <li>\u89d2\u8272\uff1a\u3010Do\u3011  <ul> <li>\u6709\u76ee\u6807\u7684\u6267\u884c\uff0c\u7528\u76ee\u6807\u6307\u5f15\u81ea\u5df1\u7684\u5b66\u4e60\uff08\u8d39\u66fc\u5b66\u4e60\u6cd5\uff09\uff0c\u627e\u5230\u5de5\u4f5c\u7684\u91cd\u70b9\uff0c\u627e\u91cd\u70b9\u5176\u5b9e\u5c31\u662f\u5728\u805a\u7126\uff1b</li> <li>\u627e\u5230\u76ee\u6807\u540e\uff0c\u8981\u575a\u6301\uff0c\u76ee\u6807\u53ef\u4ee5\u5f88\u5c0f\uff0c\u4f46\u957f\u5e74\u575a\u6301\u4e0b\u6765\uff0c\u4f18\u79c0\u5c31\u4f1a\u53d8\u6210\u4e00\u79cd\u4e60\u60ef\uff0c\u79ef\u7d2f\u7684\u591a\u4e86\uff0c\u66f4\u5927\u7684\u76ee\u6807\u4e5f\u5c31\u5b9e\u73b0\u4e86\u3002</li> </ul> </li> <li>\u76ee\u6807\uff1aT\u578b\u53d1\u5c55<ul> <li>\u805a\u7126\u65b9\u5411\uff1a\u9996\u5148\u8981\u5728\u67d0\u4e2a\u7ef4\u5ea6\u4e0a\u505a\u5230\u5c3d\u53ef\u80fd\u7684\u597d\uff0c\u5fc5\u987b\u610f\u8bc6\u5230\uff0c\u60f3\u8981\u505a\u597d\u5e7f\u5ea6\uff0c\u5fc5\u987b\u5148\u505a\u597d\u6df1\u5ea6\uff0c\u56e0\u4e3a\u5e7f\u5ea6\u6c38\u8fdc\u90fd\u662f\u6df1\u5ea6\u7684\u9644\u5c5e\u54c1\uff0c\u6ca1\u6709\u6df1\u5ea6\u7684\u5e7f\u5ea6\uff0c\u4e00\u5207\u90fd\u53ea\u4f1a\u6d6e\u4e8e\u8868\u9762\uff0c\u65f6\u95f4\u4e00\u4e45\uff0c\u53ea\u4f1a\u9ebb\u75f9\u81ea\u5df1\u3002</li> </ul> </li> <li>\u5b9e\u8df5\uff1a<ul> <li>\u5b9a\u671f\u6574\u7406\u66f4\u65b0\u81ea\u5df1\u7684\u4e8b\u9879\u6e05\u5355\uff0c\u6309\u4f18\u5148\u7ea7\u6392\u5e8f\uff0c\u4f7f\u7528\u5355\u70b9\u7a81\u7834\u7684\u601d\u60f3\uff0c \u5148\u53bb\u505a\u6700\u4e0a\u9762\u7684\u4e8b\u9879\uff08\u76ee\u6807\u8981\u5177\u4f53\uff09\uff0c\u786e\u7acb\u76ee\u6807\uff0c\u8bbe\u5b9aDeadLine\uff08\u8981\u6709\u5177\u4f53\u65f6\u95f4\u8282\u70b9\uff09\uff0c \u7136\u540e\u805a\u7126\u7684\u53bb\u505a\u53bb\u5b66\uff0c\u6ca1\u6709\u76ee\u6807\u7684\u5b66\u4e60\uff0c\u5c31\u4e0d\u53ef\u80fd\u5728\u77ed\u65f6\u95f4\u5185\u5b9e\u73b0\u7a81\u7834\uff0c\u6bd5\u7adf\u4eba\u7684\u7cbe\u529b\u90fd\u662f\u6709\u9650\u7684\u3002</li> <li>\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\uff0c\u53ea\u5c06\u6ce8\u610f\u529b\u805a\u7126\u5230\u4e00\u4e2a\uff08\u6700\u591a\u4e24\u4e2a\uff09\u4e8b\u60c5\u4e0a\u3002\u8fd9\u79cd\u7b56\u7565\u5f88\u91cd\u8981\u3002</li> </ul> </li> <li>\u5927\u9053\u81f3\u7b80\uff1a<ul> <li>\u805a\u7126\u4e0d\u4f46\u4f1a\u5f71\u54cd\u6210\u957f\u7684\u901f\u5ea6\uff0c\u8fd8\u4f1a\u5f71\u54cd\u6210\u957f\u7684\u8d28\u91cf\uff1b</li> <li>\u8fd9\u4e2a\u793e\u4f1a\u4e0d\u4f1a\u5956\u52b1\u9762\u9762\u4ff1\u5230\uff0c\u4f46\u6bcf\u9879\u90fd\u5f88\u5e73\u5eb8\u7684\u4eba\uff0c\u5149\u73af\u6c38\u8fdc\u90fd\u5c5e\u4e8e\u90a3\u4e9b\u6709\u660e\u663e\u4f18\u52bf\uff0c\u6709\u660e\u663e\u957f\u5904\u7684\u4eba\u3002</li> </ul> </li> </ul> <p>\u6280\u672f\u7ba1\u7406\u7684\u805a\u7126\uff0c\u8ba9\u56e2\u961f\u66f4\u597d\u7684\u8fd0\u8f6c\u8d77\u6765\u3002</p> <p>\u7ba1\u7406\u7684\u672c\u8d28\uff1a\u6700\u5927\u9650\u5ea6\u7684\u6fc0\u53d1\u56e2\u961f\u7684\u534f\u540c\uff0c\u4f7f\u4e4b\u4ef7\u503c\u6700\u5927\u5316\u3002</p> <ul> <li>\u89d2\u8272\uff1a\u3010Manage\u3011<ul> <li>\u534f\u8c03\u56e2\u961f\u5b8c\u6210\u4efb\u52a1\u3002</li> </ul> </li> <li>\u76ee\u6807\uff1a<ul> <li>\u8ba9\u56e2\u961f\u5728\u7ec4\u7ec7\u4e2d\u53d1\u6325\u66f4\u5927\u7684\u4ef7\u503c</li> </ul> </li> <li>\u5b9e\u8df5\uff1a<ul> <li>\u6280\u672f\u7ba1\u7406\uff0c\u53ea\u6709\u6253\u597d\u4e86\u6280\u672f\u57fa\u7840\u540e\uff08\u5982\u4f55\u5b9a\u4e49\u6280\u672f\u57fa\u7840OK: \u5f53\u6280\u672f\u6df1\u5ea6\uff0c\u8db3\u4ee5\u8f85\u52a9\u56e2\u961f\u505a\u6280\u672f\u9009\u578b\u548c\u51b3\u7b56\u662f\uff0c\u5c31\u53ef\u4ee5\u805a\u7126\u6280\u672f\u7ba1\u7406\u5de5\u4f5c\u4e86\uff09\uff0c\u6280\u672f\u7ba1\u7406\u7684\u5de5\u4f5c\u624d\u80fd\u66f4\u597d\u7684\u805a\u7126\u3002</li> <li>\u7ba1\u7406\u5de5\u4f5c\u7684\u805a\u7126\uff0c\u5176\u5b9e\u5c31\u662f\u627e\u5230\u6700\u91cd\u8981\u7684\u90a3\u4e2a\u4efb\u52a1\uff0c\u53bb\u66f4\u5feb\u66f4\u597d\u7684\u7a81\u7834\u5b83\uff0c\u7136\u540e\u4e0b\u4e00\u4e2a\uff0c\u518d\u4e0b\u4e00\u4e2a\u3002</li> <li>\u57f9\u517b\u81ea\u5df1\u548c\u56e2\u961f\u7684\u5168\u5c40\u601d\u7ef4\uff0c\u53ea\u6709\u770b\u5230\u5168\u5c40\uff0c\u624d\u80fd\u505a\u597d\u805a\u7126\uff0c\u770b\u6e05\u95ee\u9898\u7684\u5168\u8c8c\uff0c\u662f\u505a\u597d\u805a\u7126\u7684\u5927\u524d\u63d0\u3002</li> <li>\u65e5\u5e38\u7a81\u7834\u4e2d\uff0c\u5b66\u4ee5\u81f4\u7528\u975e\u5e38\u91cd\u8981\uff0c\u5b66\u4e86\u5c31\u8981\u9a6c\u4e0a\u7528\uff0c\u5b66\u4e86\u4e0d\u7528\u7b49\u4e8e\u767d\u5b66\u3002</li> </ul> </li> <li>\u5927\u9053\u81f3\u7b80\uff1a<ul> <li>\u8d8a\u6765\u8d8a\u8ba4\u77e5\u5230\uff1a\u5f88\u591a\u5de5\u4f5c\u7684\u4ef7\u503c\uff0c\u662f\u9700\u8981\u9760\u56e2\u961f\u7684\u529b\u91cf\u6765\u5b9e\u73b0\uff0c\u4e2a\u4eba\u7684\u80fd\u529b\u518d\u5f3a\u6709\u65f6\u5019\u4e5f\u662f\u4e8e\u4e8b\u65e0\u6d4e\uff0c\u56e0\u4e3a\u518d\u4f18\u79c0\u7684\u5956\u52b1\uff0c\u4e5f\u5f97\u9700\u8981\u6709\u5f97\u529b\u7684\u5e72\u5c06\u6765\u8f85\u52a9\u3002</li> </ul> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/06_learn_top2down_or_bottom2up/","title":"\u5b66\u4e60\u5e94\u8be5\u81ea\u5e95\u5411\u4e0a\uff0c\u8fd8\u662f\u81ea\u9876\u5411\u4e0b?","text":"<p>\u6d3b\u5230\u8001\uff0c\u5b66\u5230\u8001\uff0c\u662f\u81ea\u7136\u754c\u7684\u751f\u5b58\u6cd5\u5219\uff0c\u5bf9\u4e8e\u8f6f\u4ef6\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u8fd9\u4e2a\u6cd5\u5219\u66f4\u4e3a\u9002\u7528\uff0c\u4e5f\u66f4\u5e94\u8be5\u9075\u5b88\u548c\u6267\u884c\uff0c\u90a3\u4e48\u5982\u4f55\u5b66\u4e60\uff1f\u5982\u4f55\u9ad8\u6548\u7684\u5b66\u4e60\uff1f\u5c31\u662f\u503c\u5f97\u601d\u8003\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u601d\u8003\u4e86\u5f88\u4e45\uff0c\u63a5\u4e0b\u6765\u6211\u5c31\u8c08\u8c08\u4e2a\u4eba\u5728\u5b66\u4e60\u5b9e\u8df5\u4e2d\u7684\u4e00\u4e9b\u601d\u8003\u548c\u60f3\u6cd5\u3002</p> <p>\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u901a\u5e38\u6709\u4e24\u79cd\u7b56\u7565\uff1a\u4e00\u79cd\u662f\u81ea\u5e95\u5411\u4e0a\uff0c\u53e6\u4e00\u79cd\u662f\u81ea\u9876\u5411\u4e0b\uff1b\u5177\u4f53\u70b9\u8bf4\u5c31\u662f\uff0c\u7cfb\u7edf\u6027\u7684\u4ece\u57fa\u7840\u70b9\u5f00\u59cb\u5b66\uff0c\u7136\u540e\u518d\u5b66\u4e60\u66f4\u9ad8\u9636\u7684\u77e5\u8bc6\u7684\u65b9\u6cd5\u5c31\u662f\u81ea\u5e95\u5411\u4e0a\u7684\u3002\u5e26\u7740\u95ee\u9898\u548c\u76ee\u6807\u7684\u53bb\u5b66\u4e60\uff0c\u4f18\u5148\u5b66\u4e60\u80fd\u89e3\u51b3\u95ee\u9898\u6216\u8fbe\u5230\u76ee\u6807\u7684\u77e5\u8bc6\uff0c\u5728\u6b64\u8fc7\u7a0b\u4e2d\u5982\u679c\u9047\u5230\u6df1\u5c42\u6b21\u4e0d\u592a\u7406\u89e3\u7684\u77e5\u8bc6\uff0c\u518d\u6839\u636e\u76f8\u5173\u77e5\u8bc6\u70b9\u518d\u6df1\u5165\u5b66\u4e60\u8be5\u77e5\u8bc6\u70b9\uff0c\u5982\u679c\u5728\u6b64\u8fc7\u7a0b\u4e2d\u518d\u6b64\u9047\u5230\u6df1\u5c42\u6b21\u4e0d\u7406\u89e3\u7684\u70b9\uff0c\u518d\u6b64\u8fed\u4ee3\u5faa\u73af\u7684\u4f7f\u7528\u524d\u9762\u7684\u65b9\u5f0f\u53bb\u5b66\u4e60\uff0c\u8fd9\u79cd\u5b66\u4e60\u65b9\u5f0f\u5c31\u662f\u81ea\u9876\u5411\u4e0b\u7684\u3002</p> <p>\u5728\u8fc7\u5f80\u7684\u6210\u957f\u7ecf\u5386\u4e2d\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u6bcf\u4e2a\u4eba\u5728\u53d7\u6559\u80b2\u7ecf\u5386\u9636\u6bb5\uff0c\u5c31\u662f\u4e00\u4e2a\u4ece\u81ea\u5e95\u5411\u4e0a\u5230\u81ea\u9876\u5411\u4e0b\u7684\u7b56\u7565\u4f18\u5316\u7684\u8fc7\u7a0b\uff0c\u5728\u4e5d\u5e74\u4e49\u52a1\u6559\u80b2\u9636\u6bb5\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u81ea\u5e95\u5411\u4e0a\u7684\u65b9\u5f0f\uff0c\u5728\u9ad8\u4e2d\u9636\u6bb5\u5c31\u662f\u4e00\u4e2a\u9010\u6e10\u5f00\u59cb\u8fdb\u5165\u534a\u81ea\u5e95\u5411\u4e0a\u7684\u5b66\u4e60\u65b9\u5f0f\uff0c\u56e0\u4e3a\u4e3a\u4e86\u5907\u6218\u9ad8\u8003\uff0c\u9010\u6e10\u4e0d\u518d\u5b66\u4e60\u90a3\u4e9b\u4e0d\u5728\u8003\u8bd5\u8303\u56f4\u7684\u77e5\u8bc6\u5b66\u79d1\uff0c\u5230\u4e86\u5927\u5b66\u9636\u6bb5\uff0c\u62c9\u957f\u65f6\u95f4\u7684\u957f\u6cb3\uff0c\u4ece\u5b8f\u89c2\u89c6\u89d2\u4e0b\u770b\uff0c\u5c31\u662f\u4e00\u4e2a\u81ea\u9876\u5411\u4e0b\u7684\u65b9\u5f0f\uff0c\u56e0\u4e3a\u6240\u9009\u4e13\u4e1a\u5c31\u5df2\u7ecf\u51b3\u5b9a\u4e86\u9700\u8981\u5b66\u4e60\u7684\u77e5\u8bc6\u3002\u4ece\u5fae\u89c2\u89c6\u89d2\u4e0b\uff0c\u4e13\u4e1a\u5b66\u4e60\u5176\u5b9e\u4e5f\u662f\u81ea\u5e95\u5411\u4e0a\u7684\u65b9\u5f0f\uff0c\u5de5\u4f5c\u4e2d\u540c\u6837\u4e5f\u662f\u5982\u6b64\u3002</p> <p>\u5728\u8fc7\u5f80\u7684\u5b66\u4e60\u4e2d\uff0c\u6211\u8ffd\u6c42\u7684\u662f\u81ea\u5e95\u5411\u4e0a\u7684\u5b66\u4e60\u7b56\u7565\uff0c\u56e0\u4e3a\u8fd9\u6837\u80fd\u5c06\u77e5\u8bc6\u5b66\u4e60\u7684\u66f4\u624e\u5b9e\uff0c\u5b66\u4e60\u6216\u5de5\u4f5c\u4e2d\uff0c\u90fd\u5e0c\u671b\u5c06\u77e5\u8bc6\u70b9\u5b66\u624e\u5b9e\uff0c\u57fa\u7840\u6253\u7262\u56fa\uff0c\u4f46\u8fd9\u79cd\u5b66\u4e60\u7b56\u7565\uff0c\u4ece\u77ed\u671f\u770b\uff0c\u6536\u76ca\u662f\u7f13\u6162\u7684\uff0c\u5bf9\u7cbe\u529b\u6d88\u8017\u4e5f\u662f\u5de8\u5927\u7684\uff0c\u968f\u7740\u751f\u6d3b\u548c\u5de5\u4f5c\u538b\u529b\u7684\u589e\u5927\uff0c\u8fd9\u79cd\u5b66\u4e60\u65b9\u5f0f\uff0c\u8ba9\u81ea\u5df1\u53d8\u7684\u75b2\u4e4f\u4e14\u96be\u4ee5\u575a\u6301\u3002</p> <p>\u5bf9\u4e8e\u8f6f\u4ef6\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u654f\u6377\u3001\u5feb\u901f\u53d1\u5e03\u3001\u5feb\u901f\u8fed\u4ee3\uff1b\u8fd9\u4e9b\u8bcd\u4e00\u5b9a\u4e0d\u964c\u751f\uff0c\u8fd9\u4e9b\u8bcd\u7684\u5728\u9610\u91ca\u4e00\u4e2a\u9053\u7406\uff1a\u5feb\u901f\u5f00\u59cb\uff0c\u5feb\u901f\u53cd\u9988\uff0c\u5feb\u901f\u5b8c\u5584\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u518d\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u4e0d\u7ba1\u8fd9\u4e2a\u4e1c\u897f\u505a\u7684\u600e\u4e48\u6837\uff0c\u53ea\u8981\u5b83\u80fd\u89e3\u51b3\u5b9e\u9645\u95ee\u9898\u5c31\u884c\u4e86\uff0c\u540e\u7eed\u518d\u9010\u6e10\u53bb\u5b8c\u5584\u3002</p> <p>\u6240\u4ee5\uff0c\u5728\u5b66\u4e60\u4e2d\uff0c\u6211\u8c03\u6574\u4e86\u81ea\u5df1\u7684\u5b66\u4e60\u7b56\u7565\uff0c\u4e5f\u5b9e\u8df5\u4e86\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\uff0c\u53d1\u73b0\u8fd9\u79cd\u6548\u679c\u633a\u4e0d\u9519\uff0c\u660e\u663e\u611f\u89c9\u81ea\u5df1\u4e5f\u6ca1\u6709\u4ee5\u524d\u90a3\u4e48\u75b2\u4e4f\u4e86\u3002\u5728\u5982\u4eca\u8fd9\u4e2a\u6280\u672f\u9ad8\u901f\u53d1\u5c55\u548c\u53d8\u5316\u7684\u65f6\u4ee3\uff0c\u7504\u522b\u53d8\u5316\u4e2d\u7684\u4e0d\u53d8\u662f\u4e00\u9879\u91cd\u8981\u7684\u6280\u80fd\uff1a</p> <p>\u76ee\u6807\u9a71\u52a8</p> <p>\u6613\u53d8\u7684\uff1a\u5bf9\u4e8e\u5de5\u4f5c\u4e2d\u9700\u8981\u9a6c\u4e0a\u7528\u5230\u7684\u6280\u672f\u6216\u77e5\u8bc6\uff0c\u91c7\u7528\u81ea\u9876\u5411\u4e0b\u7684\u7b56\u7565\u53bb\u5b66\u4e60\uff0c\u4ee5\u8fbe\u5230\u89e3\u51b3\u5b9e\u9645\u95ee\u9898\u4e3a\u76ee\u6807\u5373\u53ef\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u9ad8\u5f3a\u5ea6\u5de5\u4f5c\u6d88\u8017\u6389\u7684\u7cbe\u529b\uff1b</p> <p>\u80fd\u529b\u9a71\u52a8</p> <p>\u4e0d\u53d8\u7684\uff1a\u5bf9\u4e8e\u8fd9\u4e9b\u4e0d\u53d8\u7684\u4e1c\u897f\uff0c\u9700\u8981\u5408\u7406\u7684\u5b89\u6392\u65f6\u95f4\uff0c\u505a\u6301\u4e45\u5b66\u4e60\u7684\u51c6\u5907\uff0c\u4f7f\u7528\u81ea\u5e95\u5411\u4e0a\u7684\u7b56\u7565\u53bb\u5b66\u4e60\uff1b\u6bd5\u7adf\uff0c\u57fa\u7840\u7684\u4e1c\u897f\u90fd\u662f\u7ecf\u8fc7\u7684\u65f6\u95f4\u7684\u8003\u9a8c\u548c\u6c89\u6dc0\uff0c\u638c\u63e1\u4e86\u5c31\u4f1a\u7ec8\u751f\u53d7\u76ca\uff0c\u4e07\u53d8\u4e0d\u79bb\u5176\u5b97\u8bf4\u7684\u5c31\u662f\u8fd9\u4e2a\u9053\u7406\u3002</p>","tags":["Thinking"]},{"location":"toolbox/macos_quickly_key/","title":"1. macOS \u5feb\u6377\u952e\u7b80\u4ecb","text":"<ul> <li> <p>macOS \u4e0a\u6709\u51e0\u4e2a\u5e38\u7528\u7684\u4fee\u9970\u952e\uff1a Command\uff08\u6216 Cmd\uff09\u2318\u3001Option\uff08\u6216 Alt\uff09\u2325\u3001Caps Lock \u21ea\u3001Shift \u21e7\u3001Control\uff08\u6216 Ctrl\uff09\u2303\u3001Fn\u3002</p> </li> <li> <p>\u8981\u4f7f\u7528\u952e\u76d8\u5feb\u6377\u952e\uff0c\u9700\u8981\u5148\u6309\u4f4f\u4e00\u4e2a\u6216\u591a\u4e2a\u4fee\u9970\u952e\uff0c\u7136\u540e\u6309\u5feb\u6377\u952e\u7684\u6700\u540e\u4e00\u4e2a\u952e\u3002\u4f8b\u5982\u590d\u5236\u7684\u64cd\u4f5c\u662f \u300c\u2318\u300d+\u300cC\u300d\uff0c\u5219\u9700\u8981\u5148\u6309\u4f4f \u300c\u2318\u300d \u952e\uff0c\u7136\u540e\u518d\u53bb\u6309 \u300cC\u300d \u952e\uff0c\u6700\u540e\u540c\u65f6\u677e\u5f00\u8fd9\u4e24\u4e2a\u952e\u3002</p> </li> </ul>","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#2-macos","title":"2. macOS \u5e38\u7528\u5feb\u6377\u952e","text":"","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#21","title":"2.1 \u5168\u5c40\u7c7b\u5feb\u6377\u952e","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + Tab \u5728\u5df2\u7ecf\u6253\u5f00\u7684 App \u4e4b\u95f4\u8fdb\u884c\u5207\u6362\u3002 Command \u2318 + Shift \u21e7 + Tab \u53cd\u5411\u5728\u5df2\u7ecf\u6253\u5f00\u7684 App \u4e4b\u95f4\u8fdb\u884c\u5207\u6362\u3002 Control \u2303 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u5de6\u53f3\u5207\u6362\u300c\u7a7a\u95f4\u300d\u3002 Control \u2303 + Up \u2b06\ufe0e \u663e\u793a\u300c\u8c03\u5ea6\u4e2d\u5fc3\u300d\u3002 Control \u2303 + Down \u2b07\ufe0e \u663e\u793a\u5f53\u524d\u5e94\u7528\u7a0b\u5e8f\u7a97\u53e3\u3002 Command \u2318 + Option \u2325 + D \u663e\u793a / \u9690\u85cf\u300c\u7a0b\u5e8f\u575e\u300d\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#22","title":"2.2 \u526a\u5207\u3001\u62f7\u8d1d\u3001\u7c98\u8d34","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + X \u526a\u5207\u6240\u9009\u9879\u5e76\u62f7\u8d1d\u5230\u526a\u8d34\u677f\u3002\u4e0d\u9002\u5e94\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u7684\u6587\u4ef6\u3002 Command \u2318 + C \u5c06\u6240\u9009\u9879\u62f7\u8d1d\u5230\u526a\u8d34\u677f\u3002\u9002\u7528\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u7684\u6587\u4ef6\u62f7\u8d1d\u3002 Command \u2318 + V \u5c06\u526a\u8d34\u677f\u7684\u5185\u5bb9\u7c98\u8d34\u5230\u5f53\u524d\u6587\u7a3f\u6216 App \u4e2d\u3002\u9002\u7528\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u6587\u4ef6\u7c98\u8d34\u3002 Command \u2318 + Option \u2325 + C \u62f7\u8d1d\u6837\u5f0f\uff1a\u5c06\u6240\u9009\u9879\u7684\u683c\u5f0f\u8bbe\u7f6e\u62f7\u8d1d\u5230\u526a\u8d34\u677f\u3002 Command \u2318 + Option \u2325 + V \u7c98\u8d34\u6837\u5f0f\uff1a\u5c06\u62f7\u8d1d\u7684\u6837\u5f0f\u5e94\u7528\u5230\u6240\u9009\u9879\u3002\u9002\u7528\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u6587\u4ef6\u79fb\u52a8\u3002 Command \u2318 + Z \u64a4\u9500\u4e0a\u4e00\u4e2a\u547d\u4ee4\u3002 Command \u2318 + Shift \u21e7 + Z \u91cd\u505a\uff0c\u53cd\u5411\u6267\u884c\u64a4\u9500\u547d\u4ee4\u3002\u5728\u67d0\u4e9b App \u4e2d\uff0c\u53ef\u4ee5\u64a4\u9500\u548c\u91cd\u505a\u591a\u4e2a\u547d\u4ee4\u3002 Command \u2318 + A \u5168\u9009\u5404\u9879\u3002\u540c\u6837\u9002\u5e94\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u7684\u6587\u4ef6\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#23","title":"2.3 \u5173\u95ed\u3001\u9000\u51fa\u7a0b\u5e8f","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + W \u5173\u95ed\u5f53\u524d\u5e94\u7528\u6700\u524d\u9762\u7684\u7a97\u53e3\uff0c\u8f6f\u4ef6\u5e76\u672a\u9000\u51fa\u8fdb\u7a0b\u3002 Command \u2318 + Option \u2325 + W \u5173\u95ed\u5f53\u524d\u5e94\u7528\u7684\u6240\u6709\u7a97\u53e3\uff0c\u8f6f\u4ef6\u5e76\u672a\u9000\u51fa\u8fdb\u7a0b\u3002 Command \u2318 + Q \u771f\u6b63\u9000\u51fa\u7a0b\u5e8f\uff0c\u8f6f\u4ef6\u9000\u51fa\u8fdb\u7a0b\u3002 Command \u2318 + Option \u2325 + Esc \u6253\u5f00\u5f3a\u5236\u9000\u51fa\u8f6f\u4ef6\u7684\u7a97\u53e3\uff0c\u901a\u5e38\u5728\u8f6f\u4ef6\u65e0\u54cd\u5e94\u7684\u65f6\u5019\u4f7f\u7528\u3002 Command \u2318 + Option \u2325 + Shift \u21e7 + Esc \u76f4\u63a5\u5f3a\u5236\u9000\u51fa\u5f53\u524d\u8f6f\u4ef6\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#24","title":"2.4 \u7a97\u53e3\u7c7b","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + ` \u5728\u5f53\u524d\u8f6f\u4ef6\u7684\u591a\u4e2a\u7a97\u53e3\u76f4\u63a5\u5207\u6362\uff08\u53ea\u9002\u7528\u4e8e\u82f9\u679c\u7cfb\u7edf\u8f6f\u4ef6\uff09\u3002 Command \u2318 + M \u6700\u5c0f\u5316\u5f53\u524d\u7a97\u53e3\u3002 Command \u2318 + H \u9690\u85cf\u5f53\u524d\u8f6f\u4ef6\u3002 Command \u2318 + Option \u2325 + H \u9690\u85cf\u9664\u4e86\u5f53\u524d\u8f6f\u4ef6\u4ee5\u5916\u7684\u6240\u6709\u8f6f\u4ef6\u3002 Command \u2318 + Ctrl \u2303 + F \u8fdb\u5165 / \u9000\u51fa\u7a97\u53e3\u6700\u5927\u5316\u3002 Command \u2318 + W \u5173\u95ed\u5f53\u524d\u5e94\u7528\u6700\u524d\u9762\u7684\u7a97\u53e3\uff0c\u8f6f\u4ef6\u5e76\u672a\u9000\u51fa\u8fdb\u7a0b\u3002 Command \u2318 + Option \u2325 + W \u5173\u95ed\u5f53\u524d\u5e94\u7528\u7684\u6240\u6709\u7a97\u53e3\uff0c\u8f6f\u4ef6\u5e76\u672a\u9000\u51fa\u8fdb\u7a0b\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#25","title":"2.5 \u8bbf\u8fbe","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + Shift \u21e7 + G \u6253\u5f00\u300c\u524d\u5f80\u6587\u4ef6\u5939\u300d\u7a97\u53e3\u3002 Command \u2318 + Shift \u21e7 + . \u663e\u793a / \u9690\u85cf\u300c\u6587\u4ef6\u300d\u3001\u300c\u6587\u4ef6\u5939\u300d\u3002 Command \u2318 + Up \u2b06\ufe0e \u6253\u5f00\u5305\u542b\u5f53\u524d\u6587\u4ef6\u5939\u7684\u6587\u4ef6\u5939\uff0c\u5373\u8fd4\u56de\u4e0a\u4e00\u5c42\u3002 Command \u2318 + Down \u2b07\ufe0e \u6253\u5f00\u5f53\u524d\u6240\u9009\u300c\u6587\u4ef6\u5939\u300d\u6216\u300c\u6587\u4ef6\u300d\u3002 Command \u2318 + N \u6253\u5f00\u65b0\u7684\u300c\u8bbf\u8fbe\u300d\u7a97\u53e3\u3002 Command \u2318 + T \u6253\u5f00\u65b0\u7684\u300c\u8bbf\u8fbe\u300d\u6807\u7b7e\u9875\uff08\u5728\u5f53\u524d\u7a97\u53e3\uff09\u3002 Command \u2318 + Shift \u21e7 + N \u65b0\u5efa\u300c\u6587\u4ef6\u5939\u300d\u3002 Command \u2318 + Delete \u5c06\u6240\u9009\u9879\u79fb\u52a8\u5e9f\u7eb8\u7bd3\u3002 Command \u2318 + Shift \u21e7 + Delete \u6e05\u5012\u5e9f\u7eb8\u7bd3\u3002 Command \u2318 + C \u62f7\u8d1d\u6240\u9009\u6587\u4ef6\u5230\u526a\u5207\u677f\u3002 Command \u2318 + V \u5c06\u526a\u5207\u677f\u4e2d\u7684\u6587\u4ef6\u7c98\u8d34\u5230\u5f53\u524d\u4f4d\u7f6e\u3002 Command \u2318 + Option \u2325 + V \u79fb\u52a8\u6587\u4ef6\uff1a\u5c06\u526a\u8d34\u677f\u4e2d\u7684\u6587\u4ef6\u4ece\u539f\u59cb\u4f4d\u7f6e\u79fb\u52a8\u5230\u5f53\u524d\u4f4d\u7f6e\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#26","title":"2.6 \u622a\u56fe","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + Shift \u21e7 + 3 \u622a\u53d6\u5f53\u524d\u5168\u5c4f\uff0c\u5e76\u4fdd\u5b58\u5168\u5c4f\u6587\u4ef6\u5230\u684c\u9762\u3002 Command \u2318 + Ctrl \u2303 + Shift \u21e7 + 3 \u622a\u53d6\u5f53\u524d\u5168\u5c4f\uff0c\u5e76\u4fdd\u5b58\u5168\u5c4f\u622a\u56fe\u5230\u526a\u5207\u677f\u3002 Command \u2318 + Shift \u21e7 + 4 \u6309\u4e0b\u540e\u62d6\u62fd\u9f20\u6807\u9009\u62e9\u622a\u56fe\u533a\u57df\uff0c\u5e76\u4fdd\u5b58\u90e8\u5206\u5c4f\u5e55\u622a\u56fe\u6587\u4ef6\u5230\u684c\u9762\u3002 Command \u2318 + Ctrl \u2303 + Shift \u21e7 + 4 \u6309\u4e0b\u540e\u62d6\u62fd\u9f20\u6807\u9009\u62e9\u622a\u56fe\u533a\u57df\uff0c\u5e76\u4fdd\u5b58\u90e8\u5206\u5c4f\u5e55\u622a\u56fe\u5230\u526a\u5207\u677f\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#27","title":"2.7 \u6d4f\u89c8\u5668","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + T \u5728\u5f53\u524d\u7a97\u53e3\uff0c\u6253\u5f00\u65b0\u7684\u300c\u6807\u7b7e\u9875\u300d\u3002 Command \u2318 + N \u6253\u5f00\u65b0\u7684\u300c\u6d4f\u89c8\u5668\u7a97\u53e3\u300d\u3002 Command \u2318 + \u9f20\u6807\u70b9\u6309\u94fe\u63a5 \u5728\u65b0\u7684\u300c\u6807\u7b7e\u9875\u300d\u6253\u5f00\u94fe\u63a5\u3002 Command \u2318 + \u9f20\u6807\u70b9\u6309\u4e66\u7b7e \u5728\u65b0\u7684\u300c\u6807\u7b7e\u9875\u300d\u6253\u5f00\u4e66\u7b7e\u3002 Command \u2318 + W \u5173\u95ed\u5f53\u524d\u300c\u6807\u7b7e\u9875\u300d\u3002 Command \u2318 + L \u5b9a\u4f4d\u5230\u300c\u5730\u5740\u680f\u300d\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#28","title":"2.8 \u6587\u672c\u7f16\u8f91\u64cd\u4f5c","text":"","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#281","title":"2.8.1 \u5149\u6807\u79fb\u52a8","text":"\u5feb\u6377\u952e \u529f \u80fd Ctrl \u2303 + F \u5149\u6807\u524d\u8fdb\u4e00\u4e2a\u5b57\u7b26\uff08F = Forward\uff09\u3002 Ctrl \u2303 + B \u5149\u6807\u540e\u9000\u4e00\u4e2a\u5b57\u7b26\uff08B = Backward\uff09\u3002 Ctrl \u2303 + P \u5149\u6807\u4e0a\u79fb\u4e00\u884c\uff08P = Previous\uff09\u3002 Ctrl \u2303 + N \u5149\u6807\u4e0b\u79fb\u4e00\u884c\uff08N = Next\uff09\u3002 Ctrl \u2303 + A \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u6216\u6bb5\u843d\u5f00\u5934\uff08A = Ahead\uff09\u3002 Ctrl \u2303 + E \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u6216\u6bb5\u843d\u7ed3\u5c3e\uff08E = End\uff09\u3002 Command \u2318 + Up \u2b06\ufe0e / Down \u2b07\ufe0e \u5149\u6807\u79fb\u52a8\u5230\u5168\u90e8\u6587\u672c\u5f00\u5934 / \u7ed3\u5c3e\u3002 Command \u2318 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u7684\u884c\u9996 / \u884c\u5c3e\u3002 Option \u2325 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u5355\u8bcd\u7684\u5f00\u5934 / \u7ed3\u5c3e","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#282","title":"2.8.2 \u6587\u672c\u9009\u4e2d","text":"<p>\u5728\u300c\u5149\u6807\u79fb\u52a8\u300d\u4e2d\u5e26\u6709\u65b9\u5411\u952e Up \u2b06\ufe0e / Down \u2b07\ufe0e / Left \u2b05\ufe0e / Right \u27a1\ufe0e \u76f8\u5173\u5feb\u6377\u952e\u7684\u57fa\u7840\u4e0a\uff0c\u52a0\u5165 Shift \u21e7\uff0c\u5219\u53ef\u4ee5\u6269\u5c55\u4e3a\u9009\u4e2d\u6587\u672c\u6548\u679c\u7684\u5feb\u6377\u952e\u3002</p> \u5feb\u6377\u952e \u529f\u80fd Command \u2318 + Shift \u21e7 + Up \u2b06\ufe0e / Down \u2b07\ufe0e \u9009\u4e2d\u5149\u6807\u5230\u5168\u90e8\u6587\u672c\u5f00\u5934 / \u7ed3\u5c3e\u7684\u6587\u672c\u3002 Command \u2318 + Shift \u21e7 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u9009\u4e2d\u5149\u6807\u5230\u5f53\u524d\u884c\u7684\u884c\u9996 / \u884c\u5c3e\u7684\u6587\u672c\u3002 Option \u2325 + Shift \u21e7 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u9009\u4e2d\u5149\u6807\u5230\u5f53\u524d\u5355\u8bcd\u7684\u5f00\u5934 / \u7ed3\u5c3e\u7684\u6587\u672c\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#283","title":"2.8.3 \u6587\u672c\u5220\u9664","text":"\u5feb\u6377\u952e \u529f \u80fd Ctrl \u2303 + H \u6216 Delete \u5220\u9664\u5149\u6807\u524d\u9762\u7684\u4e00\u4e2a\u5b57\u7b26\u3002 Ctrl \u2303 + D \u6216 Fn + Delete \u5220\u9664\u5149\u6807\u540e\u9762\u7684\u4e00\u4e2a\u5b57\u7b26\u3002 Option \u2325 + Delete \u5220\u9664\u5149\u6807\u524d\u9762\u7684\u4e00\u4e2a\u5355\u8bcd\u3002 Command \u2318 + Delete \u5220\u9664\u5149\u6807\u4e4b\u524d\u7684\u6574\u884c\u5185\u5bb9\u3002 Ctrl \u2303 + K \u5220\u9664\u5149\u6807\u4e4b\u540e\u7684\u6574\u884c\u5185\u5bb9\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#_1","title":"\u53c2\u8003\u8d44\u6599","text":"<ul> <li>[1] Mac \u952e\u76d8\u5feb\u6377\u952e</li> <li>[2] Safari \u6d4f\u89c8\u5668\u4f7f\u7528\u624b\u518c</li> </ul>","tags":["MacOS"]},{"location":"toolbox/tools_ai/","title":"\u7504\u9009GPT-AI\u5de5\u5177","text":"","tags":["Tools"]},{"location":"toolbox/tools_ai/#_1","title":"\u804a\u5929/\u5185\u5bb9\u751f\u6210","text":"<ul> <li>\u6587\u5fc3\u4e00\u8a00\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u56fe\u50cf\u5206\u6790\u3001\u56fe\u8868\u5236\u4f5c\u3001\u8111\u56fe\u7b49</li> <li>\u901a\u4e49\u5343\u95ee\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u56fe\u50cf\u5206\u6790\u7b49</li> <li>Kimi(\u6708\u4e4b\u6697\u9762)\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u4e92\u8054\u7f51\u641c\u7d22\u7b49</li> <li>\u817e\u8baf\u6df7\u5143\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u7075\u611f\u63a8\u8350\u7b49</li> <li>\u8baf\u98de\u661f\u706b\uff1a\u5185\u5bb9\u751f\u6210</li> <li>\u6296\u97f3\u8c46\u5305\uff1a\u5185\u5bb9\u751f\u6210\uff0c\u504f\u4e92\u8054\u7f51\u8fd0\u8425\u65b9\u5411</li> <li>\u667a\u8c31 AI\uff1a\u5185\u5bb9\u751f\u6210\u3001\u77e5\u8bc6\u95ee\u7b54\u7b49</li> <li>\u767e\u5ddd\u667a\u80fd\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u4e92\u8054\u7f51\u641c\u7d22\u7b49</li> <li>360 \u667a\u8111\uff1a360 \u667a\u8111\u5168\u5bb6\u6876</li> <li>\u5b57\u8282\u5c0f\u609f\u7a7a\uff1a\u5b57\u8282\u8df3\u52a8\u5185\u5bb9\u751f\u6210\u5de5\u5177\u96c6</li> <li>\u8fbe\u89c2\u6570\u636e\u66f9\u690d\uff1a\u884c\u4e1a\u5782\u57df\u5927\u6a21\u578b</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-","title":"AI \u529e\u516c-\u7efc\u5408","text":"<ul> <li>360 \u6570\u5b57\u5458\u5de5\uff1a\u56e2\u961f\u534f\u4f5c\u5171\u4eab\u3001\u4f01\u4e1a\u77e5\u8bc6\u5e93\u3001AI \u6587\u6863\u5206\u6790\u3001AI \u8425\u9500\u6587\u6848\u3001AI \u6587\u4e66\u5199\u4f5c\u7b49\u667a\u80fd\u5de5\u5177</li> <li>\u6709\u9053 AI\uff1a\u6587\u6863\u3001\u7ffb\u8bd1\u3001\u89c6\u89c9\u3001\u8bed\u97f3\u3001\u6559\u80b2\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-office","title":"AI \u529e\u516c-Office","text":"<ul> <li>AiPPT\uff1a\u81ea\u52a8\u751f\u6210 PPT \u5927\u7eb2\u3001\u6a21\u677f\u3001Word-PPT \u7b49</li> <li>iSlide\uff1aAI \u4e00\u952e\u8bbe\u8ba1 PPT</li> <li>WPS AI\uff1aWPS \u7684 AI \u63d2\u4ef6\uff0c\u667a\u80fd PPT\u3001\u8868\u683c\u3001\u6587\u6863\u6574\u7406\u7b49</li> <li>ChatPPT\uff1a\u652f\u6301 Office\u3001WPS\uff0c\u81ea\u52a8\u6587\u6863\u751f\u6210</li> <li>360 \u82cf\u6253\u529e\u516c\uff1a\u6587\u6863\u3001\u89c6\u9891\u3001\u8bbe\u8ba1\u3001\u5f00\u53d1\u7b49</li> <li>\u9177\u8868 ChatExcel\uff1a\u667a\u80fd Excel \u516c\u5f0f</li> <li>\u5546\u6c64\u529e\u516c\u5c0f\u6d63\u718a\uff1a\u667a\u80fd\u56fe\u8868</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-_1","title":"AI \u529e\u516c-\u4f1a\u8bae\u7eaa\u8981","text":"<ul> <li>\u8baf\u98de\u542c\u89c1\uff1a\u97f3\u89c6\u9891\u8f6c\u6587\u5b57\u3001\u5b9e\u65f6\u5f55\u97f3\u8f6c\u6587\u5b57\u3001\u540c\u4f20\u3001\u7ffb\u8bd1\u7b49</li> <li>\u963f\u91cc\u901a\u4e49\u542c\u609f\uff1a\u5b9e\u65f6\u8f6c\u5f55\u3001\u97f3\u89c6\u9891\u8f6c\u6587\u5b57\u3001\u4e92\u8054\u7f51\u5185\u5bb9\u63d0\u70bc\u7b49</li> <li>\u98de\u4e66\u5999\u8bb0\uff1a\u5b9e\u65f6\u8f6c\u5f55\u3001\u97f3\u89c6\u9891\u8f6c\u6587\u5b57</li> <li>\u817e\u8baf\u4f1a\u8bae AI\uff1a\u817e\u8baf\u4f1a\u8bae\u5f55\u5236\u540e\u4f1a\u8bae\u7eaa\u8981\u6574\u7406</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-_2","title":"AI \u529e\u516c-\u8111\u56fe","text":"<ul> <li>ProcessOn\uff1aAI \u601d\u7ef4\u5bfc\u56fe</li> <li>\u4ebf\u56fe\u8111\u56fe\uff1aAI \u601d\u7ef4\u5bfc\u56fe</li> <li>GitMind \u601d\u4e4e\uff1aAI \u601d\u7ef4\u5bfc\u56fe</li> <li>boardmix \u535a\u601d\u767d\u677f\uff1a\u5b9e\u65f6\u534f\u4f5c\u7684\u667a\u6167\u767d\u677f\u4e0a\u3001\u4e00\u952e\u751f\u6210 PPT\u3001\u7528 AI \u534f\u52a9\u521b\u4f5c\u601d\u7ef4\u5bfc\u56fe\u7b49</li> <li>\u5999\u529e\u753b\u677f\uff1a\u751f\u6210\u6d41\u7a0b\u56fe\u3001\u601d\u7ef4\u5bfc\u56fe\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-_3","title":"AI \u529e\u516c-\u6587\u6863","text":"<ul> <li>\u53f8\u9a6c\u9605 AI \u6587\u6863\uff1aAI \u6587\u6863\u9605\u8bfb\u5206\u6790\u5de5\u5177\u3001\u901a\u8fc7\u804a\u5929\u4e92\u52a8\u5f62\u5f0f\u3001\u63d0\u53d6\u5e76\u5206\u6790\u4fe1\u606f\u7b49</li> <li>360AI \u6d4f\u89c8\u5668\uff1a\u667a\u80fd\u6458\u8981\u3001\u6587\u7ae0\u8109\u7edc\u3001\u601d\u7ef4\u5bfc\u56fe\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai","title":"AI \u5199\u4f5c","text":"<ul> <li>\u6709\u9053\u4e91\u7b14\u8bb0 AI\uff1a\u6709\u9053\u4e91\u7b14\u8bb0\u5199\u4f5c\u63d2\u4ef6\u3001\u6539\u5199\u6269\u5199\u6da6\u8272\u7b49</li> <li>\u817e\u8baf Effidit\uff1a\u667a\u80fd\u7ea0\u9519\u3001\u6587\u672c\u8865\u5168\u3001\u6587\u672c\u6539\u5199\u3001\u6587\u672c\u6269\u5199\u3001\u8bcd\u8bed\u63a8\u8350\u3001\u53e5\u5b50\u63a8\u8350\u4e0e\u751f\u6210\u7b49\u529f\u80fd</li> <li>\u8baf\u98de\u5199\u4f5c\uff1aAI \u5bf9\u8bdd\u5199\u4f5c\u3001\u6a21\u677f\u5199\u4f5c\u3001\u7d20\u6750\u3001\u6da6\u8272\u7b49</li> <li>\u6df1\u8a00\u8fbe\u610f\uff1a\u6839\u636e\u6a21\u7cca\u63cf\u8ff0\uff0c\u627e\u8bcd\u627e\u53e5\u7684\u667a\u80fd\u5199\u4f5c\u5de5\u5177</li> <li>\u963f\u91cc\u6089\u8bed\uff1a\u6dd8\u5b9d\u4e13\u7528\u7684\u5546\u54c1\u6587\u6848\u751f\u6210\uff0c\u8f93\u5165\u5546\u54c1\u7684\u6dd8\u5b9d\u94fe\u63a5\u5373\u53ef\u83b7\u5f97\u6587\u6848</li> <li>\u5b57\u8282\u706b\u5c71\u5199\u4f5c\uff1a\u5168\u6587\u6da6\u8272\u7684 AI \u667a\u80fd\u5199\u4f5c</li> <li>\u79d8\u5854\u5199\u4f5c\u732b\uff1aAI \u5199\u4f5c\u6a21\u677f\u3001AI \u5199\u4f5c\u5de5\u5177\u3001\u6307\u4ee4\u6269\u5199\u6da6\u8272\u7b49</li> <li>\u5149\u901f\u5199\u4f5c\uff1a\u4f5c\u4e1a\u5e2e\u65d7\u4e0b\uff1a\u5168\u6587\u751f\u6210\u3001PPT \u751f\u6210\u3001\u95ee\u7b54\u52a9\u624b\u3001\u5199\u4f5c\u52a9\u624b</li> <li>WriteWise\uff1a\u559c\u9a6c\u62c9\u96c5\u5c0f\u8bf4\u521b\u4f5c\u5de5\u5177</li> <li>\u7b14\u7075 AI\uff1a\u4e00\u952e\u751f\u6210\u5de5\u4f5c\u8ba1\u5212\u3001\u6587\u6848\u65b9\u6848\u7b49</li> <li>\u6613\u64b0\uff1a\u81ea\u5a92\u4f53\u5185\u5bb9</li> <li>Giiso \u5199\u4f5c\u673a\u5668\u4eba\uff1a\u5199\u4f5c\u3001\u6587\u914d\u56fe\u3001\u98ce\u683c\u8f6c\u6362\u3001\u6587\u751f\u56fe\u7b49</li> <li>5118 SEO \u4f18\u5316\u7cbe\u7075\uff1a\u5feb\u901f\u751f\u6210\u9ad8\u8d28\u91cf SEO \u6807\u9898\u3001Meta \u63cf\u8ff0\u548c\u5173\u952e\u5b57\uff0c\u63d0\u5347\u7f51\u7ad9\u641c\u7d22\u5f15\u64ce\u6392\u540d</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_1","title":"AI \u7ffb\u8bd1","text":"<ul> <li>\u6c89\u6d78\u5f0f\u7ffb\u8bd1\uff1a\u7ffb\u8bd1\u5916\u8bed\u7f51\u9875\u3001PDF\u3001EPUB \u7535\u5b50\u4e66\u3001\u89c6\u9891\u53cc\u8bed\u5b57\u5e55\u7b49</li> <li>\u5f69\u4e91\u5c0f\u8bd1\uff1a\u591a\u79cd\u683c\u5f0f\u6587\u6863\u7684\u7ffb\u8bd1\u3001\u540c\u58f0\u4f20\u8bd1\u3001\u6587\u6863\u7ffb\u8bd1\u548c\u7f51\u9875\u7ffb\u8bd1</li> <li>\u7f51\u6613\u89c1\u5916\uff1a\u5b57\u5e55\u3001\u97f3\u9891\u8f6c\u5199\u3001\u540c\u4f20\u3001\u6587\u6863\u7ffb\u8bd1\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_2","title":"AI \u641c\u7d22\u5f15\u64ce","text":"<ul> <li>\u5929\u5de5 AI \u641c\u7d22(\u6606\u4ed1\u4e07\u7ef4)\uff1a\u627e\u8d44\u6599\u3001\u67e5\u4fe1\u606f\u3001\u641c\u7b54\u6848\u3001\u641c\u6587\u4ef6\u7b49\uff0c\u5bf9\u6d77\u91cf\u641c\u7d22\u7ed3\u679c\u8fdb\u884c AI \u667a\u80fd\u805a\u5408</li> <li>360AI \u641c\u7d22\uff1a\u4ece\u6d77\u91cf\u7684\u7f51\u7ad9\u4e2d\u4e3b\u52a8\u5bfb\u627e\u3001\u63d0\u70bc\u7cbe\u51c6\u7b54\u6848\u7684 AI \u641c\u7d22\u5f15\u64ce</li> <li>\u79d8\u5854 AI \u641c\u7d22\uff1a\u65e0\u5e7f\u544a\uff0c\u76f4\u8fbe\u7ed3\u679c\u7684 AI \u641c\u7d22\u5f15\u64ce</li> <li>perplexity.ai\uff1a\u9ec4\u4ec1\u52cb\u5e26\u8d27\u7684 AI \u641c\u7d22\u5f15\u64ce</li> <li>sciphi.ai\uff1aAI \u641c\u7d22\u5f15\u64ce</li> <li>devv.ai\uff1a\u4e3a\u5f00\u53d1\u4eba\u5458\u6253\u9020\u7684\u4eba\u5de5\u667a\u80fd\u9a71\u52a8\u7684\u641c\u7d22\u5f15\u64ce</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#_2","title":"\u56fe\u50cf\u751f\u6210/\u7f16\u8f91","text":"<ul> <li>\u901a\u4e49\u4e07\u76f8\uff1aAI \u751f\u6210\u56fe\u7247\uff0c\u4eba\u5de5\u667a\u80fd\u827a\u672f\u521b\u4f5c\u5927\u6a21\u578b</li> <li>\u6587\u5fc3\u4e00\u683c\uff1a\u6587\u751f\u56fe\u50cf</li> <li>\u526a\u6620 AI\uff1a\u526a\u6620\u4e00\u952e\u751f\u6210 AI \u7ed8\u753b</li> <li>\u817e\u8baf ARC\uff1a\u4eba\u50cf\u4fee\u590d\u3001\u4eba\u50cf\u62a0\u56fe\u3001\u52a8\u6f2b\u589e\u5f3a\u7b49</li> <li>360 \u667a\u7ed8\uff1a\u98ce\u683c\u5316 AI \u7ed8\u753b\u3001Lora \u8bad\u7ec3\u7b49</li> <li>\u65e0\u9650\u753b\uff1a\u667a\u80fd\u56fe\u50cf\u8bbe\u8ba1\uff0c\u6574\u5408\u5343\u5e93\u7f51\u7684\u8bbe\u8ba1\u884c\u4e1a\u77e5\u8bc6\u7ecf\u9a8c\u3001\u8d44\u6e90\u6570\u636e</li> <li>\u7f8e\u56fe\u8bbe\u8ba1\u5ba4\uff1a\u56fe\u50cf\u667a\u80fd\u5904\u7406\u3001\u6d77\u62a5\u8bbe\u8ba1\u7b49</li> <li>liblib.ai\uff1aAI \u6a21\u578b\u5206\u4eab\u5e73\u53f0\uff0c\u5404\u79cd\u98ce\u683c\u7684\u56fe\u50cf\u5fae\u8c03\u6a21\u578b</li> <li>Tusi.Art\uff1aAI \u6a21\u578b\u5206\u4eab\u5e73\u53f0</li> <li>\u6807\u5c0f\u667a Logo \u751f\u6210\uff1a\u5728\u7ebf LOGO \u8bbe\u8ba1\uff0c\u751f\u6210\u4f01\u4e1a VI</li> <li>\u4f50\u7cd6\uff1a\u4e30\u5bcc\u7684\u56fe\u50cf\u5904\u7406\u5de5\u5177</li> <li>Vega AI\uff1a\u6587\u751f\u56fe\u3001\u56fe\u751f\u56fe\u3001\u59ff\u6001\u751f\u56fe\u3001\u6587\u751f\u89c6\u9891\u3001\u56fe\u751f\u89c6\u9891\u7b49</li> <li>\u7f8e\u56fe WHEE\uff1a\u6587\u751f\u56fe\u3001\u56fe\u751f\u56fe\u3001\u6587\u751f\u89c6\u9891\u3001\u6269\u56fe\u6539\u56fe\u8d85\u6e05\u7b49</li> <li>\u65e0\u754c AI\uff1a\u6587\u751f\u56fe</li> <li>BgSub\uff1a\u62a0\u56fe</li> <li>\u963f\u91cc PicCopilot\uff1a\u963f\u91cc\u5df4\u5df4\u56fd\u9645\uff0cAI \u9a71\u52a8\u56fe\u7247\u4f18\u5316\u5de5\u5177\uff0c\u7535\u5546\u9886\u57df\u4e13\u5c5e\u670d\u52a1</li> <li>\u641c\u72d0\u7b80\u5355 AI\uff1a\u667a\u80fd\u56fe\u7247\u751f\u6210\u5e73\u53f0\u548c\u793e\u533a</li> <li>6pen\uff1a\u6587\u672c\u63cf\u8ff0\u751f\u6210\u7ed8\u753b\u827a\u672f\u4f5c\u54c1</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_3","title":"AI \u8bbe\u8ba1","text":"<ul> <li>\u963f\u91cc\u5806\u53cb\uff1a\u9762\u5411\u8bbe\u8ba1\u5e08\u7fa4\u4f53\u7684 AI \u8bbe\u8ba1\u793e\u533a</li> <li>\u7a3f\u5b9a AI\uff1a\u56fe\u50cf\u8bbe\u8ba1</li> <li>\u58a8\u5200 AI\uff1a\u4ea7\u54c1\u8bbe\u8ba1\u534f\u4f5c\u5e73\u53f0</li> <li>\u83ab\u9ad8\u8bbe\u8ba1 MasterGo AI\uff1a\u4f01\u4e1a\u7ea7\u4ea7\u54c1\u8bbe\u8ba1\u5e73\u53f0\uff0c\u754c\u9762\u8bbe\u8ba1\u3001\u4ea4\u4e92\u8bbe\u8ba1\u7b49</li> <li>\u521b\u5ba2\u8d34 AI\uff1a\u56fe\u5f62\u56fe\u50cf\u8bbe\u8ba1</li> <li>\u5373\u65f6 AI\uff1a\u6587\u751f UI\u3001\u6587\u751f\u56fe\u3001\u56fe\u751f UI \u7b49</li> <li>PixsO AI\uff1a\u65b0\u751f\u4ee3 UI \u8bbe\u8ba1\u5de5\u5177</li> <li>\u6296\u97f3\u5373\u521b\uff1a\u6296\u97f3\u7535\u5546\u667a\u80fd\u521b\u4f5c\u5e73\u53f0\uff0c\u63d0\u4f9b AI \u89c6\u9891\u521b\u4f5c\u3001\u56fe\u6587\u521b\u4f5c\u548c\u76f4\u64ad\u521b\u4f5c</li> <li>\u817e\u8baf AIDesign\uff1a\u817e\u8baf\u7684 logo \u8bbe\u8ba1</li> <li>\u7f8e\u95f4\uff1aAI \u8f6f\u88c5\u8bbe\u8ba1\u3001\u6d77\u62a5\u548c\u63d0\u6848\u751f\u6210\u5de5\u5177</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_4","title":"AI \u97f3\u9891","text":"<ul> <li>\u5ea6\u52a0\u521b\u4f5c\u5de5\u5177\uff1a\u70ed\u641c\u4e00\u952e\u6210\u7a3f\u3001\u6587\u7a3f\u4e00\u952e\u6210\u7247</li> <li>\u9b54\u97f3\u5de5\u574a\uff1aAI \u914d\u97f3\u5de5\u5177</li> <li>\u7f51\u6613\u5929\u97f3\uff1a\u667a\u80fd\u7f16\u66f2\uff0c\u6d77\u91cf\u98ce\u683c</li> <li>TME Studio\uff1a\u817e\u8baf\u97f3\u4e50\u667a\u80fd\u97f3\u4e50\u751f\u6210\u5de5\u5177</li> <li>\u8baf\u98de\u667a\u4f5c\uff1a\u914d\u97f3\u3001\u58f0\u97f3\u5b9a\u5236\u3001\u865a\u62df\u4e3b\u64ad\u3001\u97f3\u89c6\u9891\u5904\u7406\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_5","title":"AI \u89c6\u9891","text":"<ul> <li>PixVerse\uff1a\u6587\u751f\u89c6\u9891</li> <li>\u7ed8\u5f71\u5b57\u5e55\uff1aAI \u5b57\u5e55\u3001\u7ffb\u8bd1\u3001\u914d\u97f3\u7b49</li> <li>\u4e07\u5f69\u5fae\u5f71\uff1a\u771f\u4eba\u624b\u7ed8\u89c6\u9891\u3001\u7ffb\u8f6c\u6587\u5b57\u89c6\u9891\u3001\u6587\u7ae0\u8f6c\u89c6\u9891\u7b49</li> <li>\u82a6\u7b0b AI \u63d0\u8bcd\u5668\uff1aAI \u5199\u7a3f\u3001\u9690\u5f62\u63d0\u8bcd\u6548\u679c\u3001\u667a\u80fd\u8ddf\u8bfb\u7b49</li> <li>360 \u5feb\u526a\u8f91\uff1a\u4e13\u4e1a\u89c6\u9891\u526a\u8f91</li> <li>\u4e07\u5f69 AI\uff1a\u9ad8\u6548\u3001\u597d\u7528\u7684 AI \u5199\u4f5c\u548c\u77ed\u89c6\u9891\u521b\u4f5c\u5e73\u53f0</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#_3","title":"\u6570\u5b57\u4eba","text":"<ul> <li>\u817e\u8baf\u667a\u5f71\uff1a\u6570\u5b57\u4eba\u3001\u6587\u672c\u914d\u97f3\u3001\u6587\u7ae0\u8f6c\u89c6\u9891\u7b49</li> <li>\u6765\u753b\uff1a\u52a8\u753b\u3001\u6570\u5b57\u4eba\u667a\u80fd\u5236\u4f5c</li> <li>\u4e00\u5e27\u79d2\u521b\uff1aAI \u89c6\u9891\u3001\u6570\u5b57\u4eba\u3001AI \u4f5c\u753b\u7b49</li> <li>\u4e07\u5174\u64ad\u7206\uff1a\u6570\u5b57\u4eba\u3001\u771f\u4eba\u8425\u9500\u89c6\u9891</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_6","title":"AI \u5199\u4ee3\u7801","text":"<ul> <li>\u6607\u601d MindSpore\uff1a\u4e00\u7ad9\u5f0f AI \u5f00\u53d1\u5e73\u53f0\uff0c\u6a21\u578b\u8bad\u7ec3\u3001\u63a8\u7406\u3001\u8bc4\u6d4b\u3001\u7cbe\u8c03\u7b49</li> <li>\u767e\u5ea6\u98de\u6868 PaddlePaddle AI Code assistant\uff1a\u5728\u7ebf\u7f16\u7a0b\u3001\u6d77\u91cf\u6570\u636e\u96c6\u7b49</li> <li>ZelinAI\uff1a\u96f6\u4ee3\u7801\u6784\u5efa AI \u5e94\u7528</li> <li>aiXcoder\uff1a\u667a\u80fd\u7f16\u7a0b\u673a\u5668\u4eba\uff0c\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u4ee3\u7801\u751f\u6210\u6280\u672f</li> <li>\u5546\u6c64\u4ee3\u7801\u5c0f\u6d63\u718a\uff1a\u4ee3\u7801\u751f\u6210\u8865\u5168\u7ffb\u8bd1\u91cd\u6784\u2026\u2026</li> <li>CodeArts Snap\uff1a\u8986\u76d6\u4ee3\u7801\u751f\u6210\u3001\u7814\u53d1\u77e5\u8bc6\u95ee\u7b54\u3001\u5355\u5143\u6d4b\u8bd5\u7528\u4f8b\u751f\u6210\u3001\u4ee3\u7801\u89e3\u91ca\u3001\u4ee3\u7801\u6ce8\u91ca\u3001\u4ee3\u7801\u7ffb\u8bd1\u3001\u4ee3\u7801\u8c03\u8bd5\u3001\u4ee3\u7801\u68c0\u67e5\u7b49\u516b\u5927\u7814\u53d1\u573a\u666f</li> <li>\u5929\u5de5\u667a\u7801\uff1a\u57fa\u4e8e\u6606\u4ed1\u5929\u5de5\u6a21\u578b\u7684 AI \u4ee3\u7801\u5de5\u5177</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#_4","title":"\u6a21\u578b\u8bad\u7ec3/\u90e8\u7f72","text":"<ul> <li>\u706b\u5c71\u65b9\u821f\uff1a\u6a21\u578b\u8bad\u7ec3\u3001\u63a8\u7406\u3001\u8bc4\u6d4b\u3001\u7cbe\u8c03\u7b49\u5168\u65b9\u4f4d\u529f\u80fd\u4e0e\u670d\u52a1</li> <li>\u9b54\u642d\u793e\u533a\uff1a\u63d0\u4f9b\u6a21\u578b\u63a2\u7d22\u4f53\u9a8c\u3001\u63a8\u7406\u3001\u8bad\u7ec3\u3001\u90e8\u7f72\u548c\u5e94\u7528\u7684\u4e00\u7ad9\u5f0f\u670d\u52a1</li> <li>\u6587\u5fc3\u5927\u6a21\u578b\uff1a\u4ea7\u4e1a\u7ea7\u77e5\u8bc6\u589e\u5f3a\u5927\u6a21\u578b</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_7","title":"AI \u63d0\u793a\u8bcd","text":"<ul> <li>\u63d0\u793a\u5de5\u7a0b\u6307\u5357\uff1a\u5982\u4f55\u4f7f\u7528\u63d0\u793a\u8bcd\u6765\u5b8c\u6210\u4e0d\u540c\u7684\u4efb\u52a1</li> <li>\u8bcd\u9b42\uff1aAIGC \u7cbe\u54c1\u63d0\u793a\u8bcd\u5e93</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/","title":"\u5e38\u7528\u8f6f\u4ef6\u547d\u4ee4\u901f\u67e5","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#linux","title":"Linux\u76f8\u5173","text":"<ul> <li>LinuxCool: Linux\u547d\u4ee4\u5927\u5168</li> <li>LinuxCommand: Linux\u547d\u4ee4\u5927\u5168\u641c\u7d22\u5de5\u5177\uff0c\u5185\u5bb9\u5305\u542bLinux\u547d\u4ee4\u624b\u518c\u3001\u8be6\u89e3\u3001\u5b66\u4e60\u3001\u641c\u96c6\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#vim","title":"vim\u76f8\u5173","text":"<ul> <li>vim\u5907\u5fd8\u5f55\uff1a\u9002\u5408\u79fb\u52a8\u8bbe\u5907\u7684vim\u5907\u5fd8\u5f55</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_1","title":"\u7f16\u8f91(\u63d2\u5165)\u6a21\u5f0f","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_2","title":"\u63d2\u5165","text":"<ul> <li>i: insert  ;                           I: insert before line </li> <li>a: append                         A: append after line</li> <li>o: open a line below       O: append a line above</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_3","title":"\u5220\u9664","text":"Bash<pre><code>ctrl + h   # \u5220\u9664\u4e0a\u4e00\u4e2a\u5b57\u7b26\nctrl + w   # \u5220\u9664\u4e0a\u4e2a\u5355\u8bcd\nctrl + u   # \u5220\u9664\u5f53\u524d\u884c\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#esc","title":"Esc\u952e\u7684\u66ff\u4ee3\u952e","text":"Bash<pre><code>ctrl + c \nctrl + [\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_4","title":"\u8df3\u8f6c","text":"Bash<pre><code>gi    # \u5feb\u901f\u8df3\u8f6c\u5230\u6700\u540e\u4e00\u6b21\u7f16\u8f91\u7684\u5730\u65b9\u5e76\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_5","title":"\u79fb\u52a8","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_6","title":"\u5355\u8bcd\u95f4\u79fb\u52a8","text":"Bash<pre><code>hjkl   # \u7b49\u4ef7\u4e8e\u65b9\u5411\u952e\n\nw/W   # \u79fb\u52a8\u5230\u4e0b\u4e00\u4e2aword/WORD\u5f00\u5934\n\ne/E   # \u79fb\u52a8\u5230\u4e0b\u4e00\u4e2aword/WORD\u5c3e\u90e8\n\nb/B   # \u56de\u5230\u4e0a\u4e00\u4e2aword/WORD\u5f00\u5934\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3abackword\n\n# word\u6307\u7684\u662f\u4ee5\u975e\u7a7a\u767d\u7b26\u5206\u5272\u7684\u5355\u8bcd\uff0c\n# WORD\u6307\u7684\u662f\u4ee5\u7a7a\u767d\u5206\u5272\u7684\u5355\u8bcd\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_7","title":"\u884c\u95f4\u641c\u7d22\u79fb\u52a8","text":"Bash<pre><code>f{char}   # \u79fb\u52a8\u5230char\u5b57\u7b26\u4e0a\uff0c\nt{char}   # t\u79fb\u52a8\u5230char\u7684\u524d\u4e00\u4e2a\u5b57\u7b26\n\n# \u5982\u679c\u7b2c\u4e00\u6b21\u6ca1\u641c\u5230\uff0c\u4f7f\u7528\u5206\u53f7(;)/\u9017\u53f7(,),  \u7ee7\u641c\u8be5\u884c\u4e0b\u4e00\u4e2a/\u4e0a\u4e00\u4e2a\n# \u5927\u5199\u7684F\u8868\u793a\u53d1\u8fc7\u6765\u641c\u524d\u9762\u7684\u5b57\u7b26\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_8","title":"\u6c34\u5e73\u79fb\u52a8","text":"Bash<pre><code>0   # \u79fb\u52a8\u884c\u9996\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\n^   # \u79fb\u52a8\u5230\u7b2c\u4e00\u4e2a\u975e\u7a7a\u767d\u5b57\u7b26\n$   # \u79fb\u52a8\u5230\u884c\u5c3e\ng_  # \u79fb\u52a8\u5230\u884c\u5c3e\u975e\u7a7a\u767d\u5b57\u7b26\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_9","title":"\u5782\u76f4\u79fb\u52a8","text":"Bash<pre><code>()  # \u4f7f\u7528\u62ec\u53f7\u5728\u53e5\u5b50\u95f4\u79fb\u52a8\uff0c\u53ef\u4ee5\u7528\uff1ahelp\u6765\u67e5\u770b\u5e2e\u52a9\n{}  # \u4f7f\u7528{}\u5728\u6bb5\u843d\u95f4\u79fb\u52a8\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_10","title":"\u9875\u9762\u79fb\u52a8","text":"Bash<pre><code>gg/G       # \u79fb\u52a8\u5230\u6587\u4ef6\u5f00\u5934\u6216\u7ed3\u5c3e\uff0c \u4f7f\u7528ctrl + o \u5feb\u901f\u8fd4\u56de\nH/M/L      # \u8df3\u8f6c\u5230\u5c4f\u5e55\u7684\u5f00\u5934\uff08Head\uff09, \u4e2d\u95f4\uff08Middle\uff09\u7ed3\u5c3e\uff08Lower\uff09\nctrl + u   # \u4e0a\u7ffb\u9875\uff08upword\uff09\nctrl + f   # \u4e0b\u7ffb\u9875(forward)\nzz         # \u628a\u5c4f\u5e55\u7f6e\u4e3a\u4e2d\u95f4\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_11","title":"\u547d\u4ee4\u6a21\u5f0f","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_12","title":"\u4fdd\u5b58","text":"Bash<pre><code>:wq\n:x\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_13","title":"\u5206\u5c4f","text":"Bash<pre><code>:vs (vertical split)\n:sp  (split)\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_14","title":"\u5168\u5c40\u66ff\u6362","text":"Bash<pre><code>:% s/foo/bar/g    # foo -&gt;bar\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#visual","title":"Visual(\u53ef\u89c6\u5316\uff09\u6a21\u5f0f","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_15","title":"\u9009\u62e9\u884c:","text":"<ul> <li>V</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_16","title":"\u65b9\u5757\u9009\u62e9\uff1a","text":"<ul> <li>ctrl + v</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/","title":"\u7504\u9009\u5b9e\u7528\u8f6f\u4ef6","text":"<p>Tip</p> <p>\u4ee5\u4e0b\u662f\u65e5\u5e38\u6536\u96c6\u5230\u7684\u5f00\u6e90\u4f18\u79c0\u5de5\u5177\uff0c\u6301\u7eed\u66f4\u65b0\u4e2d...</p>","tags":["Tools"]},{"location":"toolbox/tools_common/#ssh","title":"SSH\u5de5\u5177","text":"<ul> <li>Xterminal\uff08\u63a8\u8350\uff09</li> <li>\u4e0d\u4ec5\u662f\u5f3a\u5927\u7684SSH\u5de5\u5177\uff0c\u66f4\u63d0\u4f9b\u672c\u5730\u63a7\u5236\u53f0\uff0c\u4ee5\u53ca\u66f4\u591a\u5373\u5c06\u63a8\u51fa\u7684\u5f00\u53d1\u76f8\u5173\u529f\u80fd\uff0c\u8ba9\u60a8\u4e13\u6ce8\u4e8e\u521b\u9020\u5353\u8d8a\u7684\u4ee3\u7801</li> <li> <p>\u652f\u6301MacOS\u3001Linux\u3001Win</p> </li> <li> <p>WinTerm </p> </li> <li>\u4e13\u4e1a\u7684\u8de8\u5e73\u53f0SSH/Sftp/Shell/Telnet/\u4e32\u53e3\u7ec8\u7aef\uff08\u9879\u76ee\u8c8c\u4f3c\u505c\u6b62\u7ef4\u62a4\u4e86\uff0c\u4f46\u5df2\u6709\u529f\u80fd\u4e5f\u57fa\u672c\u6ee1\u8db3\u9700\u6c42\uff09</li> <li>\u652f\u6301MacOS\u3001Linux\u3001Win</li> <li>iTem2 </li> <li>\u652f\u6301 MacOS</li> <li>Alacritty</li> <li>\u652f\u6301MacOS\u3001Linux\u3001Win</li> <li>\u4e3b\u9898\u5730\u5740\uff1aalacritty-theme</li> <li>MobaXterm </li> <li>\u652f\u6301Win</li> <li>NxShell</li> <li>ContainerSSH\uff1a\u4e00\u4e2aSSH\u670d\u52a1\u5668\uff0c\u7528\u6237\u4f7f\u7528ssh\u767b\u5f55\u662f\uff0c\u5b83\u4f1a\u81ea\u52a8\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff0c\u8ba9\u7528\u6237\u767b\u5f55\u5230\u8fd9\u4e2a\u5bb9\u5668\u91cc\u9762\uff0c\u800c\u4e0d\u662f\u767b\u5f55\u5230\u5e95\u5c42\u673a\u5668\uff0c\u7528\u6237\u4e0d\u4f1a\u5bdf\u89c9\u3002</li> </ul> <p>\u5176\u4ed6\u53ef\u53c2\u8003\uff1ahttps://hyperzsb.io/posts/your-own-terminal/</p>","tags":["Tools"]},{"location":"toolbox/tools_common/#_1","title":"\u753b\u56fe\u5de5\u5177","text":"<p>\u63a8\u8350</p> <ul> <li>diagrams.net\uff1a\u4e00\u4e2a\u5728\u7ebf\u753b\u6d41\u7a0b\u56fe\u7684\u7f51\u7ad9\u3002</li> <li>https://excalidraw.com/\uff1a \u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u6613\u7528\u7684\u767d\u677f\u7ed8\u56fe\u5f00\u6e90\u5de5\u5177(\u624b\u7ed8\u98ce\u683c\u7684\u767d\u677f Web \u5e94\u7528\u3002\u8fd9\u662f\u4e00\u6b3e\u5b8c\u5168\u514d\u8d39\u3001\u5f00\u6e90\u7684\u57fa\u4e8e\u65e0\u9650\u753b\u5e03\u7684\u767d\u677f Web \u5e94\u7528\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u4e0a\u9762\u521b\u5efa\u624b\u7ed8\u98ce\u683c\u7684\u4f5c\u54c1\u3002\u652f\u6301\u5305\u62ec\u4e2d\u6587\u5728\u5185\u7684\u591a\u79cd\u8bed\u8a00\uff0c\u63d0\u4f9b\u4e86\u81ea\u7531\u7ed8\u5236\u3001\u591a\u79cd\u5de5\u5177\u3001\u5bfc\u51fa PNG\u3001\u5b9e\u65f6\u534f\u4f5c\u3001\u5171\u4eab\u94fe\u63a5\u3001\u81ea\u52a8\u4fdd\u5b58\u7b49\u529f\u80fd)\u3002</li> </ul> <p>\u5176\u4ed6</p> <ul> <li>Pointless\uff1a\u4e00\u4e2a\u5f00\u6e90\u7684\u7f51\u9875\u753b\u677f\uff0c\u53ef\u4ee5\u5f53\u4f5c\u767d\u677f\u4f7f\u7528\uff0c\u6548\u679c\u4e0d\u9519\u3002</li> <li>mermaid-live-editor: markdown \u753b\u56fe mermaid-live-editor</li> <li>pddon: \u4e00\u6b3e\u5f00\u6e90\u7684\u5728\u7ebf\u753b\u56fe\u5de5\u5177\uff0c\u63d0\u4f9b\u4f4e\u4ee3\u7801\u548c AI \u667a\u80fd\u8f85\u52a9\u5de5\u5177</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_2","title":"\u601d\u7ef4\u5bfc\u56fe\u5de5\u5177","text":"<ul> <li>mind map: \u4e00\u4e2a\u8fd8\u7b97\u5f3a\u5927\u7684Web\u601d\u7ef4\u5bfc\u56fe</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_3","title":"\u5728\u7ebf\u4ee3\u7801\u7f16\u8f91\u5668","text":"<ul> <li>code-server\uff1a\u8fd0\u884c\u5728\u670d\u52a1\u5668\u4e0a\u7684 VS Code\uff0c\u652f\u6301\u5927\u90e8\u5206\u63d2\u4ef6\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u9762\u4f7f\u7528\u3002</li> <li>monaco-editor\uff1a \u514d\u8d39\u7684\u5728\u7ebf\u4ee3\u7801\u7f16\u8f91\u5668</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_4","title":"\u641c\u7d22\u5f15\u64ce","text":"<ul> <li>https://beta.sayhello.so/ \uff1a\u4e00\u4e2a\u4e13\u95e8\u4e3a\u7a0b\u5e8f\u5458\u5f00\u53d1\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u53ef\u4ee5\u7528\u81ea\u7136\u8bed\u8a00\u8f93\u5165\u4f60\u7684\u95ee\u9898\uff0c\u6bd4\u5982\"PHP \u7684 hello world \u793a\u4f8b\"\uff0c\u5b83\u4f1a\u76f4\u63a5\u7ed9\u51fa\u7b54\u6848\u3002</li> <li>https://www.perplexity.ai/\uff1a\u4eba\u5de5\u667a\u80fd\u5f15\u64ce\uff0c\u4f60\u5411\u5b83\u63d0\u95ee\uff0c\u5b83\u544a\u8bc9\u4f60\u7b54\u6848\uff0c\u652f\u6301\u4e2d\u6587</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_5","title":"\u7ffb\u8bd1\u5de5\u5177","text":"<ul> <li>\u6c89\u6d78\u5f0f\u7ffb\u8bd1:\u5b83\u662f\u4e00\u4e2a\u6d4f\u89c8\u5668\u63d2\u4ef6\uff0c\u4e3b\u8981\u529f\u80fd\u662f\u7f51\u9875\u7ffb\u8bd1\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u7ffb\u8bd1\u5f15\u64ce</li> <li>https://wantwords.net\uff1a \u53cd\u5411\u8bcd\u5178</li> <li>Bob: \u4e00\u6b3emac\u7aef\u7ffb\u8bd1\u8f6f\u4ef6</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_6","title":"\u7b80\u5386\u6a21\u677f","text":"<ul> <li>LapisCV: \u4e00\u6b3e\u5f00\u7bb1\u5373\u7528\u7684\u7b80\u5386\u6a21\u677f\uff08\u63d0\u4f9b Obsidian \u548c Typora \u7684\u7b80\u5386\u6a21\u677f\uff09\uff0c\u5b83\u57fa\u4e8e Markdown \u683c\u5f0f\u3001\u7f16\u8f91\u65b9\u4fbf\u3001\u6240\u89c1\u5373\u6240\u5f97\uff0c\u8bbe\u8ba1\u7b80\u6d01\u4e14\u6b63\u5f0f\uff0c\u501f\u52a9\u7f16\u8f91\u5668\u53ef\u76f4\u63a5\u5bfc\u51fa PDF \u683c\u5f0f\u7684\u7b80\u5386\u3002</li> <li>\u70ed\u901f\u7f8e\u65af\uff1a\u4e00\u4e2a\u514d\u8d39\u7684\u7b80\u5386\u5236\u4f5c\u7f51\u7ad9\uff0c\u53ef\u4ee5\u81ea\u7531\u62d6\u62fd\uff0c\u5e2e\u52a9\u4f60\u5236\u4f5c\u4e00\u4efd\u7cbe\u7f8e\u7b80\u5386\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_7","title":"\u8d44\u6e90\u5904\u7406","text":"<ul> <li>\u6587\u5b57\u5904\u7406</li> <li>calligrapher.ai\uff1a \u4e00\u4e2a\u5728\u7ebf\u5de5\u5177\uff0c\u53ef\u4ee5\u5c06\u82f1\u6587\u8f93\u5165\u53d8\u4e3a\u624b\u5199\u4f53\uff0c\u5e76\u5177\u6709\u52a8\u753b\u6548\u679c\uff0c\u63d0\u4f9bSVG\u683c\u5f0f\u4e0b\u8f7d\u3002</li> <li>\u56fe\u7247\u5904\u7406</li> <li>upscayl\uff1a AI \u63d0\u5347\u56fe\u7247\u6e05\u6670\u5ea6\u7684\u8f6f\u4ef6\uff0c\u652f\u6301 Linux\uff0cMac\uff0cWindows \u591a\u5e73\u53f0</li> <li>carbon\uff1a \u514d\u8d39\u4ee3\u7801\u8d34\u56fe\u5de5\u5177</li> <li>UI\u76f8\u5173</li> <li>UISET\uff1a\u6536\u96c6\u514d\u8d39 UI \u8d44\u6e90\uff08\u63d2\u56fe\u3001\u56fe\u6807\u3001\u989c\u8272\u7b49\uff09\u7684\u7f51\u7ad9</li> <li>favicon.io\uff1a\u7f51\u7ad9\u56fe\u6807 Favicon \u7684\u5728\u7ebf\u751f\u6210\u5de5\u5177</li> <li>Axure\u5730\u56fe\u5143\u4ef6\u5e93\uff1a\u53ef\u4e00\u952e\u8f7b\u677e\u590d\u5236\u7701/\u5e02/\u533aSVG\u5730\u56fe\u5143\u4ef6</li> <li>Vue Color Avatar\uff1a \u4e00\u4e2a\u7eaf\u524d\u7aef\u7684\u77e2\u91cf\u98ce\u683c\u5934\u50cf\u751f\u6210\u7f51\u7ad9\uff0c\u53ef\u4ee5\u642d\u914d\u4e0d\u540c\u7684\u7d20\u6750\u7ec4\u4ef6\uff0c\u751f\u6210\u81ea\u5df1\u7684\u4e2a\u6027\u5316\u5934\u50cf</li> <li>\u683c\u5f0f\u8f6c\u6362</li> <li>tableconvert\uff1a \u89c4\u8303\u683c\u5f0f\u8f6c\u6362 </li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_8","title":"\u9605\u8bfb\u5de5\u5177","text":"<ul> <li> <p>flow  \uff1a \u5f00\u6e90\u7684\u57fa\u4e8e\u6d4f\u89c8\u5668\u7aef\u7684 ePub \u9605\u8bfb\u5668\uff0c\u5728\u7ebf\u8bbf\u95ee\u5730\u5740\u89c1 flowoss.com</p> </li> <li> <p>ebook-reader\uff1a \u4e00\u4e2a\u5f00\u6e90\u7684\u7f51\u9875\u9605\u8bfb\u5668\uff0c\u7528\u6765\u9605\u8bfbEPUB\u7535\u5b50\u4e66</p> </li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_9","title":"\u4efb\u52a1\u7ba1\u7406","text":"<ul> <li>Super Productivity\uff1a Super Productivity \u662f\u4e00\u6b3e\u5148\u8fdb\u7684\u8de8\u5e73\u53f0\u7684\u5f85\u529e\u4e8b\u9879\u5217\u8868\u5e94\u7528\u7a0b\u5e8f\uff0c\u5177\u6709\u96c6\u6210\u7684 Timeboxing \u548c\u65f6\u95f4\u8ddf\u8e2a\u529f\u80fd(\u4e00\u6b3e\u5148\u8fdb\u7684\u5f85\u529e\u4e8b\u9879\u5217\u8868\u5e94\u7528\u3002\u8d85\u7ea7\u751f\u4ea7\u529b\u662f\u4e00\u6b3e\u7528 TypeScript \u5f00\u53d1\u7684\u9ad8\u7ea7 TODO \u5e94\u7528\uff0c\u65e8\u5728\u5e2e\u52a9\u7528\u6237\u89c4\u5212\u4efb\u52a1\u548c\u7ba1\u7406\u5f85\u529e\u4e8b\u9879\uff0c\u57f9\u517b\u5065\u5eb7\u9ad8\u6548\u7684\u4e60\u60ef\u3002\u5b83\u5f00\u6e90\u3001\u514d\u8d39\u3001\u65e0\u9700\u6ce8\u518c\uff0c\u652f\u6301\u4e0e Jira\u3001GitHub\u3001GitLab \u7b49\u7b2c\u4e09\u65b9\u5e73\u53f0\u96c6\u6210\uff0c\u53ef\u5373\u65f6\u6536\u5230\u4efb\u52a1\u53d8\u52a8\u7684\u901a\u77e5\u3002\u9664\u4e86\u53ef\u5728\u7ebf\u4f7f\u7528\u7684 Web \u7f51\u9875\u7248\uff0c\u8fd8\u63d0\u4f9b\u4e86 Windows\u3001Linux\u3001macOS\u3001iOS \u548c Android \u5ba2\u6237\u7aef\u3002)\u3002</li> <li>DooTask:\u4e00\u6b3e\u8f7b\u91cf\u7ea7\u7684\u5f00\u6e90\u5728\u7ebf\u9879\u76ee\u4efb\u52a1\u7ba1\u7406\u5de5\u5177\uff0c\u63d0\u4f9b\u5404\u7c7b\u6587\u6863\u534f\u4f5c\u5de5\u5177\uff0c\u5728\u7ebf\u601d\u7ef4\u5bfc\u56fe\u3001\u5728\u7ebf\u6d41\u7a0b\u56fe\u3001\u9879\u76ee\u7ba1\u7406\u3001\u4efb\u52a1\u5206\u53d1\u3001\u5373\u65f6IM\uff0c\u6587\u4ef6\u7ba1\u7406\u7b49\u5de5\u5177\u3002\u3010\u5f53\u524dStar\u6570\u636e\uff1a2.3k\u3011</li> <li>focalboard: \u4e00\u6b3e\u5f00\u6e90\u3001\u591a\u8bed\u8a00\u3001\u81ea\u6258\u7ba1\u7684\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u517c\u5bb9\u4e86 Trello \u548c Notion \u7684\u7279\u70b9\u3002\u5b83\u652f\u6301\u770b\u677f\u3001\u8868\u683c\u548c\u65e5\u5386\u7b49\u89c6\u56fe\u7ba1\u7406\u4efb\u52a1\uff0c\u5e76\u63d0\u4f9b\u8bc4\u8bba\u540c\u6b65\u3001\u6587\u4ef6\u5171\u4eab\u3001\u7528\u6237\u6743\u9650\u7b49\u529f\u80fd\u3002\u8be5\u5de5\u5177\u8fd8\u63d0\u4f9b\u4e86\u9002\u7528\u4e8e Windows\u3001macOS\u3001Linux \u7cfb\u7edf\u7684\u5ba2\u6237\u7aef\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_10","title":"\u5f00\u53d1\u5de5\u5177","text":"","tags":["Tools"]},{"location":"toolbox/tools_common/#python","title":"Python\u76f8\u5173","text":"<ul> <li>vulture:  \u4e00\u6b3ePython \u7684\u9759\u6001\u4ee3\u7801\u5206\u6790\u5de5\u5177\uff0c\u53c8\u79f0Python \u7684\u201c\u6b7b\u201d\u4ee3\u7801\u4fa6\u63a2\uff0c\u5b83\u53ef\u4ee5\u627e\u51fa Python \u9879\u76ee\u4e2d\u672a\u4f7f\u7528\u7684\u4ee3\u7801\uff0c\u4ec5\u9700\u4e00\u6761\u547d\u4ee4\uff0c\u5c31\u80fd\u6e05\u7406\u6ca1\u7528\u548c\u65e0\u6548\u7684 Python \u51fd\u6570\u3001\u53d8\u91cf\u548c\u4ee3\u7801\u7247\u6bb5\u3002</li> <li>radon: \u4e00\u6b3e\u5f3a\u5927\u7684 Python \u4ee3\u7801\u8d28\u91cf\u5206\u6790\u5de5\u5177\uff0c\u5b83\u80fd\u591f\u8ba1\u7b97\u591a\u79cd\u4ee3\u7801\u6307\u6807\uff0c\u5305\u62ec McCabe \u590d\u6742\u5ea6\u3001Halstead \u6307\u6807\u548c\u53ef\u7ef4\u62a4\u6027\u6307\u6570\uff0c\u9002\u7528\u4e8e Python \u4ee3\u7801\u8d28\u91cf\u8bc4\u4f30\u548c\u6301\u7eed\u96c6\u6210\u7b49\u573a\u666f\u3002</li> <li>pyupgrade: \u4e00\u952e\u5347\u7ea7 Python \u4ee3\u7801\u7684\u5de5\u5177\u3002\u8fd9\u662f\u4e00\u4e2a\u7528\u4e8e\u81ea\u52a8\u5347\u7ea7 Python \u4ee3\u7801\uff0c\u4ee5\u9002\u5e94\u65b0\u7248\u672c\u8bed\u6cd5\u7684\u5de5\u5177\u3002\u652f\u6301\u5347\u7ea7\u5230\u4e0d\u540c\u7684 Python \u7248\u672c\u3001\u63d0\u4f9b\u9884\u89c8\u6a21\u5f0f\u5373\u67e5\u770b\u6539\u52a8\u53d8\u5316\u7b49\u529f\u80fd\u3002</li> <li>jurigged: \u4e00\u6b3e\u4e13\u4e3a Python \u63d0\u4f9b\u70ed\u91cd\u8f7d\u529f\u80fd\u7684\u5e93\uff0c\u5b83\u652f\u6301\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u4fee\u6539\u548c\u66f4\u65b0 Python \u4ee3\u7801\uff0c\u65e0\u9700\u91cd\u542f\u7a0b\u5e8f\u3002</li> <li>ciphey: \u81ea\u52a8\u89e3\u5bc6/\u89e3\u7801\u5404\u79cd\u52a0\u5bc6\u7b97\u6cd5\u7684\u5de5\u5177\u3002\u4f7f\u7528\u8be5\u9879\u76ee\u65f6\uff0c\u4f60\u53ea\u9700\u8f93\u5165\u52a0\u5bc6\u7684\u6587\u672c\uff0c\u65e0\u9700\u63d0\u4f9b\u5177\u4f53\u7684\u52a0\u5bc6\u7c7b\u578b\uff0c\u5b83\u5c31\u53ef\u4ee5\u5728 3 \u79d2\u6216\u66f4\u77ed\u7684\u65f6\u95f4\u5185\u81ea\u52a8\u89e3\u5bc6\u5927\u591a\u6570\u7684\u52a0\u5bc6\u6587\u672c\u3002\u8fd9\u4e2a\u9879\u76ee\u652f\u6301 50 \u591a\u79cd\u5e38\u89c1\u7684\u52a0\u5bc6/\u7f16\u7801\u65b9\u5f0f\uff0c\u5305\u62ec\u4e8c\u8fdb\u5236\u3001base64\u3001\u54c8\u5e0c\u548c\u51ef\u6492\u5bc6\u7801\u7b49\u3002</li> <li>sqlglot: \u4e00\u4e2a\u975e\u5e38\u5168\u9762\u7684 SQL \u89e3\u6790\u5668\u3002\u8be5\u9879\u76ee\u662f\u7528 Python \u5199\u7684 SQL \u89e3\u6790\u5668\u3001\u8f6c\u8bd1\u5668\u548c\u4f18\u5316\u5668\uff0c\u5b83\u53ef\u4ee5\u683c\u5f0f\u5316 SQL \u4ee5\u53ca\u652f\u6301\u5728 20 \u79cd\u4e0d\u540c\u65b9\u8a00\u548c SQL \u4e4b\u95f4\u8fdb\u884c\u8f6c\u5316\uff0c\u53ef\u7528\u6765\u81ea\u5b9a\u4e49\u89e3\u6790\u5668\u3001\u5206\u6790\u67e5\u8be2\uff0c\u7528\u7f16\u7a0b\u65b9\u5f0f\u6784\u5efa SQL\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#redis","title":"Redis\u76f8\u5173","text":"<ul> <li>Tiny RDM\uff1a\u4e00\u6b3e\u4f18\u79c0\u7684 Redis \u53ef\u89c6\u5316\u7ba1\u7406\u5de5\u5177\uff08\u2b50\ufe0f\uff09,\u5b83\u63d0\u4f9b\u4e86\u591a\u79cd\u8fde\u63a5\u65b9\u5f0f\u3001\u5206\u6bb5\u52a0\u8f7d\u3001\u6162\u65e5\u5fd7\u3001\u8f6c\u7801\u663e\u793a\u7b49\u529f\u80fd\uff0c\u53ef\u4ee5\u5728 Windows\u3001Linux \u548c macOS \u7cfb\u7edf\u4e0a\u4f7f\u7528\u3002</li> <li>RedisShake:  \u662f\u4e00\u4e2a Redis \u6570\u636e\u5904\u7406\u548c\u8fc1\u79fb\u5de5\u5177\u3002</li> <li>redis-manager: Redis \u4e00\u7ad9\u5f0f\u7ba1\u7406\u5e73\u53f0\uff0c\u652f\u6301\u96c6\u7fa4\u7684\u76d1\u63a7\u3001\u5b89\u88c5\u3001\u7ba1\u7406\u3001\u544a\u8b66\u4ee5\u53ca\u57fa\u672c\u7684\u6570\u636e\u64cd\u4f5c</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#docker","title":"Docker\u76f8\u5173","text":"<ul> <li>buildg: \u4ea4\u4e92\u5f0f\u7684 Dockerfile \u8c03\u8bd5\u5de5\u5177,\u652f\u6301\u8bbe\u7f6e\u65ad\u70b9\u3001\u5355\u6b65\u6267\u884c\u548c\u975e root \u6a21\u5f0f\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728 VSCode \u7b49\u7f16\u8f91\u5668\u4e2d\u4f7f\u7528\u3002</li> <li>xpipe: \u4e00\u952e\u8fdc\u7a0b\u767b\u5f55 Docker \u5b9e\u4f8b\u7684\u5de5\u5177\u3002\u8be5\u9879\u76ee\u662f\u7528\u4e8e\u7ba1\u7406\u8fdc\u7a0b\u670d\u52a1\u5668\u7684\u684c\u9762\u5de5\u5177\uff0c\u5b83\u4f1a\u5728 SSH \u8fde\u63a5\u5230\u670d\u52a1\u5668\u540e\uff0c\u81ea\u52a8\u68c0\u6d4b\u670d\u52a1\u5668\u73af\u5883\u548c shell \u7c7b\u578b\uff0c\u5b9e\u73b0\u4e00\u952e\u767b\u5f55\u5404\u79cd\u5bb9\u5668\u5b9e\u4f8b\uff08Docker\u3001LXC\u3001WSL\uff09\uff0c\u5e76\u652f\u6301\u8fdc\u7a0b\u6587\u4ef6\u7ba1\u7406\u548c\u5de5\u5177\u96c6\u6210\u7b49\u529f\u80fd\u3002</li> <li>dockge: \u4e00\u4e2a\u7f8e\u89c2\u3001\u6613\u7528\u7684 Docker Compose \u7ba1\u7406\u5e73\u53f0\u3002\u8be5\u9879\u76ee\u63d0\u4f9b\u4e86\u4e00\u4e2a Web \u754c\u9762\uff0c\u7528\u4e8e\u7ba1\u7406 docker-compose.yaml \u6587\u4ef6\u3002\u5b83\u5f00\u7bb1\u5373\u7528\u3001\u754c\u9762\u8bbe\u8ba1\u7cbe\u7f8e\uff0c\u652f\u6301\u4ea4\u4e92\u5f0f\u7f16\u8f91 compose.yaml \u6587\u4ef6\u3001\u66f4\u65b0 docker \u955c\u50cf\uff0c\u4ee5\u53ca\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u5220\u9664 docker \u7b49\u64cd\u4f5c\u3002</li> <li>veinmind-tools\uff1a\u8fd9\u4e2a\u5de5\u5177\u53ef\u4ee5\u68c0\u67e5 Docker \u955c\u50cf\u6587\u4ef6\u662f\u5426\u5b58\u5728\u5b89\u5168\u95ee\u9898</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_11","title":"\u722c\u866b\u76f8\u5173","text":"<ul> <li>useragent\uff1a \u6b64\u7f51\u7ad9\u63d0\u4f9b\u5404\u79cd\u6700\u65b0\u7248\u6d4f\u89c8\u5668\u7684useragent\u7684\u5b57\u7b26\u4e32</li> <li>spider-admin-pro\uff1a\u722c\u866b\u5de5\u5177 Scrapy \u7684\u4e00\u4e2a\u7ba1\u7406\u9762\u677f\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_12","title":"\u6b63\u5219\u6d4b\u8bd5\u5de5\u5177","text":"<ul> <li>https://regex101.com/</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#api","title":"API\u7ba1\u7406\u5de5\u5177","text":"<ul> <li>postman</li> <li>apifox</li> <li>https://restfox.dev/\uff1a\u5728\u7ebf\u7684api\u6d4b\u8bd5\u5de5\u5177 \uff0cpostman\u66ff\u4ee3\u54c1</li> <li>Posting: \u7ec8\u7aef\u4e2d\u7684API\u6d4b\u8bd5\u5de5\u5177</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#transform","title":"Transform\u8f6c\u6362\u5de5\u5177","text":"<ul> <li>jsoneditor: \u5728\u7ebf\u7684 JSON \u7f16\u8f91\u5668\u3002\u8be5\u9879\u76ee\u662f\u4e00\u4e2a\u57fa\u4e8e Web \u7684 JSON \u7f16\u8f91\u5668\uff0c\u53ef\u7528\u4e8e\u67e5\u770b\u3001\u7f16\u8f91\u3001\u683c\u5f0f\u5316\u548c\u9a8c\u8bc1 JSON\u3002\u5b83\u652f\u6301\u6811\u5f62\u7f16\u8f91\u5668\u3001\u4ee3\u7801\u7f16\u8f91\u5668\u548c\u7eaf\u6587\u672c\u7b49\u6a21\u5f0f\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u76f4\u63a5\u5728\u7ebf\u4f7f\u7528\uff0c\u8fd8\u53ef\u4f5c\u4e3a\u7ec4\u4ef6\u96c6\u6210\u5230\u9879\u76ee\u4e2d\u3002</li> <li>json-server: \u4ec5\u9700 30 \u79d2\u3001\u4e0d\u7528\u5199\u4ee3\u7801\u5c31\u80fd\u6a21\u62df\u63a5\u53e3\u6570\u636e\u3002\u8fd9\u662f\u4e00\u6b3e\u5c0f\u5de7\u7684\u63a5\u53e3\u6a21\u62df\u5de5\u5177\uff0c\u5b83\u4f7f\u7528\u8d77\u6765\u5341\u5206\u7b80\u5355\uff0c\u53ea\u9700\u521b\u5efa JSON \u6587\u4ef6\uff0c\u7136\u540e\u4e00\u6761\u547d\u4ee4\u5c31\u80fd\u5feb\u901f\u542f\u52a8\u63a5\u53e3\u670d\u52a1\u3002</li> </ul> <ul> <li>github\u5730\u5740\uff1a https://github.com/ritz078/transform</li> </ul> <p>yaml\u76f8\u5173</p> <ul> <li> <p>toml to yaml: https://www.convertsimple.com/convert-toml-to-yaml/</p> </li> <li> <p>yaml to toml: https://www.convertsimple.com/convert-yaml-to-toml/</p> </li> <li> <p>json to toml: https://www.convertsimple.com/convert-json-to-toml/</p> </li> <li> <p>json to yaml: https://transform.tools/json-to-yaml</p> </li> </ul> <p>Json\u76f8\u5173</p> <ul> <li> <p>json https://jsoneditoronline.org/</p> </li> <li> <p>json \u683c\u5f0f\u5316\u795e\u5668 https://jsonformatter.org/</p> </li> <li> <p>json to protobuf\uff1a https://transform.tools/json-schema-to-protobuf</p> </li> <li>js to json: https://transform.tools/js-object-to-json</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_plugin/","title":"\u5e38\u7528\u63d2\u4ef6\u96c6","text":"<p>Tip</p> <p>\u4ee5\u4e0b\u662fChrome\u3001 Vscode\u3001 IDEA\u7b49\u5e38\u7528\u63d2\u4ef6\u6536\u96c6\u6c47\u603b\uff0c\u6301\u7eed\u66f4\u65b0\u4e2d...</p>","tags":["Tools"]},{"location":"toolbox/tools_plugin/#chrome","title":"Chrome\u63d2\u4ef6","text":"<ul> <li>\u6536\u85cf\u732b\u63d2\u4ef6\uff1ahttps://chrome.pictureknow.com/</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_plugin/#pycharm","title":"Pycharm\u63d2\u4ef6","text":"<ul> <li>Save Actions  \uff1a \u6309\u4e0b Ctrl + S \u5373\u53ef\u81ea\u52a8\u683c\u5f0f\u5316\u4ee3\u7801</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_plugin/#vscode","title":"Vscode\u63d2\u4ef6","text":"<ul> <li>\u6570\u636e\u5e93\u76f8\u5173</li> <li>PPZ.vscode\uff1a\u4e00\u4e2a VSCode \u63d2\u4ef6\uff0c\u63d0\u4f9b\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u56fe\u5f62\u754c\u9762\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u5e93</li> <li>code-server\uff1a\u4e00\u4e2a VS Code \u8fdc\u7a0b\u670d\u52a1\u7684\u5c01\u88c5\uff0c\u53ef\u4ee5\u5b89\u88c5\u5728\u4efb\u610f\u673a\u5668\u4e0a\u9762\uff0c\u7136\u540e\u5c31\u80fd\u5728\u6d4f\u89c8\u5668\u4f7f\u7528 VS Code</li> <li>codegeex: \u4e00\u4e2a\u56fd\u4ea7\u7684\u4ee3\u7801\u751f\u6210\u7684\u4eba\u5de5\u667a\u80fd\u5de5\u5177\uff0c\u8ddf GitHub Copilot \u7c7b\u4f3c\uff0c\u53ef\u4ee5\u5c06\u4e00\u79cd\u8bed\u8a00\u7684\u4ee3\u7801\u7ffb\u8bd1\u6210\u53e6\u4e00\u79cd</li> <li>vscode-markdown-github\uff1aVSCode \u7684 Markdown \u6e32\u67d3\u63d2\u4ef6\uff0c\u7279\u70b9\u662f\u5b8c\u5168\u6309\u7167 GitHub \u7684 Markdown \u6548\u679c\u8fdb\u884c\u6e32\u67d3</li> <li>\u4e3b\u9898\u914d\u8272\u76f8\u5173\uff1a</li> <li>catppuccin: \u8d85\u770b\u597d\u7684\u4e3b\u9898\u914d\u8272\u65b9\u6848\u3002\u8be5\u9879\u76ee\u662f\u7531\u793e\u533a\u9a71\u52a8\u7684\u914d\u8272\u65b9\u6848\uff0c\u5185\u542b\u4ee5\u6696\u8272\u8c03\u4e3a\u4e3b\u3001\u8272\u5f69\u4e30\u5bcc\u7684\u4e3b\u9898\uff0c\u53ef\u7528\u4e8e VSCode\u3001JetBrains\u3001Vim \u7b49\u7f16\u8f91\u5668\u548c IDE\uff0c\u540c\u6837\u9002\u7528\u4e8e\u5404\u79cd\u7f16\u7a0b\u8bed\u8a00\u7684\u5f00\u53d1\u5e93\u3001\u7ec8\u7aef\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u6d4f\u89c8\u5668\u7b49\u5e94\u7528\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_plugin/#_1","title":"\u6cb9\u7334\u63d2\u4ef6","text":"<ul> <li>greasyfork\u5546\u5e97</li> </ul>","tags":["Tools"]},{"location":"toolbox/dev_software/YARN/","title":"YARN\u96c6\u7fa4\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#yarn","title":"YARN\u96c6\u7fa4\u5b89\u88c5","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#step1-mapred-sitexml","title":"step1: \u4fee\u6539mapred-site.xml\u6587\u4ef6","text":"<p>\u5728 ${HADOOP_HOME}/etc/hadoop \u8def\u5f84\u4e0b\u914d\u7f6e mapred-site.xml \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>&lt;configuration&gt;\n  &lt;!-- mr\u7a0b\u5e8f\u9ed8\u8ba4\u8fd0\u884c\u65b9\u5f0f:yarn-\u96c6\u7fa4\u6a21\u5f0f,local-\u672c\u5730\u6a21\u5f0f  --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.framework.name&lt;/name&gt;\n    &lt;value&gt;yarn&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- jobhistory \u670d\u52a1\u914d\u7f6e --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;\n    &lt;value&gt;node75:10020&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- jobhistory web ui \u8bbf\u95ee\u7aef\u53e3 --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;\n    &lt;value&gt;node75:19888&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.application.classpath&lt;/name&gt;\n    &lt;value&gt;$HADOOP_HOME/share/hadoop/mapreduce/*,$HADOOP_HOME/share/hadoop/mapreduce/lib/*&lt;/value&gt;\n  &lt;/property&gt; \n\n  &lt;!--MR App Master\u73af\u5883\u53d8\u91cf --&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.app.mapreduce.am.env&lt;/name&gt;\n    &lt;value&gt;HADOOP_MAPRED_HOME=${HADOOP_HOME}&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--MR MapTask\u73af\u5883\u53d8\u91cf --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.map.env&lt;/name&gt;\n    &lt;value&gt;HADOOP_MAPRED_HOME=${HADOOP_HOME}&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--MR ReduceTask\u73af\u5883\u53d8\u91cf --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.reduce.env&lt;/name&gt;\n    &lt;value&gt;HADOOP_MAPRED_HOME=${HADOOP_HOME}&lt;/value&gt;\n  &lt;/property&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#step2-yarn-sitexml","title":"step2: \u4fee\u6539yarn-site.xml\u6587\u4ef6","text":"<p>\u5728 ${HADOOP_HOME}/etc/hadoop \u8def\u5f84\u4e0b\u914d\u7f6e yarn-site.xml \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>&lt;configuration&gt;\n\n&lt;!-- Site specific YARN configuration properties --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;\n     &lt;value&gt;mapreduce_shuffle&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;!-- \u5f00\u542fRM\u9ad8\u53ef\u7528 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;!-- \u6307\u5b9aRM\u7684cluster id --&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt;\n    &lt;value&gt;cluster&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;!-- \u6307\u5b9aRM\u7684\u540d\u5b57 --&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt;\n        &lt;value&gt;rm1,rm2&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;!-- \u5206\u522b\u6307\u5b9aRM\u7684\u5730\u5740 --&gt;\n  &lt;property&gt;\n        &lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt;\n        &lt;value&gt;node73&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;property&gt;\n        &lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt;\n        &lt;value&gt;node74&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- rm1 WebUI\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.webapp.address.rm1&lt;/name&gt;\n     &lt;value&gt;node73:8088&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- rm2 WebUI\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.webapp.address.rm2&lt;/name&gt;\n     &lt;value&gt;node74:8088&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u5f00\u542f\u81ea\u52a8\u6545\u969c\u8f6c\u79fb --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.ha.automatic-failover.enabled&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- zk\u96c6\u7fa4\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;hadoop.zk.address&lt;/name&gt;\n     &lt;value&gt;node73:2181,node74:2181,node75:2181&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u5f00\u542fRM\u91cd\u542f\u72b6\u6001\u6062\u590d\u673a\u5236 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u72b6\u6001\u5b58\u50a8\u91c7\u7528ZK --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt;\n     &lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--ZK\u4fdd\u5b58\u7684\u5df2\u5b8c\u6210\u4efb\u52a1\u7684\u6700\u5927\u6570\u91cf--&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.state-store.max-completed-applications&lt;/name&gt;\n    &lt;value&gt;100&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--RM\u5185\u5b58\u4e2d\u4fdd\u5b58\u7684\u5df2\u5b8c\u6210\u4efb\u52a1\u7684\u6700\u5927\u6570\u91cf\uff0c\u8c03\u6574\u8be5\u53c2\u6570\u4e3b\u8981\u662f\u4e3a\u4e86RM\u5185\u5b58\u4e0eZK\u4e2d\u4fdd\u5b58\u7684\u4efb\u52a1\u4fe1\u606f\u548c\u6570\u91cf\u4e00\u81f4--&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.max-completed-applications&lt;/name&gt;\n    &lt;value&gt;100&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u5b9a\u4e49\u4e86ZK\u7684ZNode\u8282\u70b9\u6240\u80fd\u5b58\u50a8\u7684\u6700\u5927\u6570\u636e\u91cf\uff0c\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff0c\u9ed8\u8ba4\u662f1048576\u5b57\u8282\uff0c\u4e5f\u5c31\u662f1MB\uff0c\u8fd9\u91cc\u6539\u62104MB --&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.zk-max-znode-size.bytes&lt;/name&gt;\n    &lt;value&gt;4194304&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u5bb9\u5668\u865a\u62df\u5185\u5b58\u4e0e\u7269\u7406\u5185\u5b58\u4e4b\u95f4\u7684\u6bd4\u7387\uff0c\u9ed8\u8ba4\uff1a2.1 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.nodemanager.vmem-pmem-ratio&lt;/name&gt;\n     &lt;value&gt;2.1&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u5f00\u542fyarn\u65e5\u5fd7\u805a\u96c6\u529f\u80fd\uff0c\u6536\u96c6\u6bcf\u4e2a\u5bb9\u5668\u7684\u65e5\u5fd7\u96c6\u4e2d\u5b58\u50a8\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u9ed8\u8ba4\uff1afalse --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u65e5\u5fd7\u4fdd\u7559\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u6708 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;\n     &lt;value&gt;2592000&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.log.server.url&lt;/name&gt;\n     &lt;value&gt;http://node75:19888/jobhistory/logs&lt;/value&gt;\n  &lt;/property&gt;\n &lt;!--\u662f\u5426\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\u68c0\u67e5\u6bcf\u4e2a\u4efb\u52a1\u6b63\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\u91cf\uff0c\u5982\u679c\u4efb\u52a1\u8d85\u51fa\u5206\u914d\u503c\uff0c\u5219\u76f4\u63a5\u5c06\u5176\u6740\u6389\uff0c\u9ed8\u8ba4\u662ftrue --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.nodemanager.pmem-check-enabled&lt;/name&gt;\n     &lt;value&gt;false&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--\u662f\u5426\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\u68c0\u67e5\u6bcf\u4e2a\u4efb\u52a1\u6b63\u4f7f\u7528\u7684\u865a\u62df\u5185\u5b58\u91cf\uff0c\u5982\u679c\u4efb\u52a1\u8d85\u51fa\u5206\u914d\u503c\uff0c\u5219\u76f4\u63a5\u5c06\u5176\u6740\u6389\uff0c\u9ed8\u8ba4\u662ftrue --&gt;\n  &lt;property&gt;\n      &lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;\n      &lt;value&gt;false&lt;/value&gt;\n  &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#step3-capacity-schedulerxml","title":"step3: \u4fee\u6539capacity-scheduler.xml\u6587\u4ef6","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6e capacity-scheduler.xml \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>  &lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.resource-calculator&lt;/name&gt;\n    &lt;!-- &lt;value&gt;org.apache.hadoop.yarn.util.resource.DefaultResourceCalculator&lt;/value&gt; --&gt;\n    &lt;value&gt;org.apache.hadoop.yarn.util.resource.DominantResourceCalculator&lt;/value&gt;\n    &lt;description&gt;\n      The ResourceCalculator implementation to be used to compare\n      Resources in the scheduler.\n      The default i.e. DefaultResourceCalculator only uses Memory while\n      DominantResourceCalculator uses dominant-resource to compare\n      multi-dimensional resources such as Memory, CPU etc.\n    &lt;/description&gt;\n  &lt;/property&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#yarn_1","title":"YARN\u8fd0\u7ef4\u547d\u4ee4","text":"<p>\uff081\uff09\u542f\u52a8Yarn\u96c6\u7fa4\uff0c\u68c0\u67e5RM\u548cNM\u662f\u5426\u542f\u52a8\u6210\u529f\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/start-yarn.sh\n\n${HADOOP_HOME}/sbin/stop-yarn.sh\n</code></pre> <p>\uff082\uff09\u542f\u52a8JobHistoryServer\u5386\u53f2\u670d\u52a1\u5668\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/mr-jobhistory-daemon.sh start historyserver\n\n${HADOOP_HOME}/sbin/mr-jobhistory-daemon.sh stop historyserver\n</code></pre> <p>\u200b        \u542f\u52a8\u4e4b\u540e\u68c0\u67e5\u4e24\u53f0\u673a\u5668\u4e0a\u662f\u5426\u90fd\u542f\u52a8RM\uff0c\u540c\u65f6\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u8fd9\u4e24\u673a\u5668\u7684active\u548cstandby\u5206\u522b\u662f\u54ea\u4e2a\u8282\u70b9\u3002</p> Bash<pre><code>yarn rmadmin -getAllServiceState\n</code></pre> <p>\u200b        \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a</p> Bash<pre><code>node73:8033                                        standby   \nnode74:8033                                        active   \n</code></pre> <p>\u200b       \u8fd9\u91cc\u6ce8\u610f\u7684\u662f\uff0cactive\u548cstandby\u4e24\u4e2a\u8282\u70b9\u5747\u53ef\u4ee5\u901a\u8fc7\u9ed8\u8ba4\u76848088\u7aef\u53e3\u53bb\u8bbf\u95eeYarn WebUI\u63a7\u5236\u53f0\uff0c\u53ea\u4e0d\u8fc7\u5f53\u8bbf\u95eestandby\u8282\u70b9\u7684WebUI\u65f6\u4f1a\u81ea\u52a8\u8df3\u8f6cactive\u8282\u70b9\u7684WebUI\u3002</p> <p>\uff083\uff09\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u3002</p> <p>\u5411Yarn\u96c6\u7fa4\u63d0\u4ea4\u4e00\u4e2a\u8499\u7279\u5361\u7565\u8ba1\u7b97\u5706\u5468\u7387\u7684MapReducer\u7a0b\u5e8f\u3002</p> Bash<pre><code>yarn jar ${HADOOP_HOME}/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.4.jar pi 2 2 \n</code></pre> <p>\u65e5\u5fd7\u5982\u4e0b\uff1a</p> Bash<pre><code>Number of Maps  = 2\nSamples per Map = 2\nWrote input for Map #0\nWrote input for Map #1\nStarting Job\n22/02/22 16:11:14 INFO client.RMProxy: Connecting to ResourceManager at bigdata03/172.16.10.205:8032\n22/02/22 16:11:14 INFO input.FileInputFormat: Total input files to process : 2\n22/02/22 16:11:15 INFO mapreduce.JobSubmitter: number of splits:2\n22/02/22 16:11:15 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1645515567477_0001\n22/02/22 16:11:15 INFO conf.Configuration: resource-types.xml not found\n22/02/22 16:11:15 INFO resource.ResourceUtils: Unable to find 'resource-types.xml'.\n22/02/22 16:11:15 INFO resource.ResourceUtils: Adding resource type - name = memory-mb, units = Mi, type = COUNTABLE\n22/02/22 16:11:15 INFO resource.ResourceUtils: Adding resource type - name = vcores, units = , type = COUNTABLE\n22/02/22 16:11:15 INFO impl.YarnClientImpl: Submitted application application_1645515567477_0001\n22/02/22 16:11:15 INFO mapreduce.Job: The url to track the job: http://bigdata03:8088/proxy/application_1645515567477_0001/\n22/02/22 16:11:15 INFO mapreduce.Job: Running job: job_1645515567477_0001\n22/02/22 16:11:20 INFO mapreduce.Job: Job job_1645515567477_0001 running in uber mode : false\n22/02/22 16:11:20 INFO mapreduce.Job:  map 0% reduce 0%\n22/02/22 16:11:23 INFO mapreduce.Job:  map 100% reduce 0%\n22/02/22 16:11:28 INFO mapreduce.Job:  map 100% reduce 100%\n22/02/22 16:11:29 INFO mapreduce.Job: Job job_1645515567477_0001 completed successfully\n22/02/22 16:11:29 INFO mapreduce.Job: Counters: 49\n        File System Counters\n                FILE: Number of bytes read=50\n                FILE: Number of bytes written=635598\n                FILE: Number of read operations=0\n                FILE: Number of large read operations=0\n                FILE: Number of write operations=0\n                HDFS: Number of bytes read=512\n                HDFS: Number of bytes written=215\n                HDFS: Number of read operations=11\n                HDFS: Number of large read operations=0\n                HDFS: Number of write operations=3\n        Job Counters\n                Launched map tasks=2\n                Launched reduce tasks=1\n                Data-local map tasks=2\n                Total time spent by all maps in occupied slots (ms)=2482\n                Total time spent by all reduces in occupied slots (ms)=1971\n                Total time spent by all map tasks (ms)=2482\n                Total time spent by all reduce tasks (ms)=1971\n                Total vcore-milliseconds taken by all map tasks=2482\n                Total vcore-milliseconds taken by all reduce tasks=1971\n                Total megabyte-milliseconds taken by all map tasks=2541568\n                Total megabyte-milliseconds taken by all reduce tasks=2018304\n        Map-Reduce Framework\n                Map input records=2\n                Map output records=4\n                Map output bytes=36\n                Map output materialized bytes=56\n                Input split bytes=276\n                Combine input records=0\n                Combine output records=0\n                Reduce input groups=2\n                Reduce shuffle bytes=56\n                Reduce input records=4\n                Reduce output records=0\n                Spilled Records=8\n                Shuffled Maps =2\n                Failed Shuffles=0\n                Merged Map outputs=2\n                GC time elapsed (ms)=99\n                CPU time spent (ms)=1280\n                Physical memory (bytes) snapshot=814084096\n                Virtual memory (bytes) snapshot=7487442944\n                Total committed heap usage (bytes)=548405248\n        Shuffle Errors\n                BAD_ID=0\n                CONNECTION=0\n                IO_ERROR=0\n                WRONG_LENGTH=0\n                WRONG_MAP=0\n                WRONG_REDUCE=0\n        File Input Format Counters\n                Bytes Read=236\n        File Output Format Counters\n                Bytes Written=97\nJob Finished in 15.741 seconds\nEstimated value of Pi is 4.00000000000000000000\n</code></pre> <p>\u200b       \u8fd0\u884c\u6210\u529f\uff01</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/","title":"Etcd\u96c6\u7fa4\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.71\uff08Master\uff09\u3001192.168.21.77\uff08salve\uff09\u3001192.168.21.78\uff08salve\uff09 \u90e8\u7f72\u7b56\u7565 Centos7.9 \u7cfb\u7edf  \u96c6\u7fa4\u90e8\u7f72 \u670d\u52a1\u7aef\u53e3\u53f7 2379 \u5b89\u88c5\u90e8\u7f72\u76ee\u5f55 usr/local/bin/etcd  /usr/local/bin/etcdctl","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#_2","title":"\u90e8\u7f72\u6307\u5357","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#http","title":"\u90e8\u7f72\uff08HTTP\uff09\u65b9\u5f0f\uff1a","text":"<ul> <li> <p>\u4e0b\u8f7d\u3001\u5b89\u88c5 Bash<pre><code>wget https://github.com/etcd-io/etcd/releases/download/v3.5.7/etcd-v3.5.7-linux-amd64.tar.gz\n\ntar zxf etcd-v3.5.7-linux-amd64.tar.gz --strip-components=1 -C /usr/local/bin etcd-v3.5.7-linux-amd64/etcd{,ctl}\n\netcdctl version\n\nscp /usr/local/bin/etcd* node77:/usr/local/bin/\nscp /usr/local/bin/etcd* node78:/usr/local/bin/\n</code></pre></p> </li> <li> <p>\u7f16\u5199\u914d\u7f6e\u6587\u4ef6(\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981) Bash<pre><code>vim /etc/etcd/etcd.conf\n\n# node71\u8282\u70b9\uff1a \n#[Member]\nETCD_NAME=\"node71\"\nETCD_DATA_DIR=\"/data/workspace/etcd/data.etcd\"\nETCD_LISTEN_PEER_URLS=\"http://192.168.21.71:2380\"\nETCD_LISTEN_CLIENT_URLS=\"http://192.168.21.71:2379\"\n\n#[Clustering]\nETCD_INITIAL_ADVERTISE_PEER_URLS=\"http://192.168.21.71:2380\"\nETCD_ADVERTISE_CLIENT_URLS=\"http://192.168.21.71:2379\"\nETCD_INITIAL_CLUSTER=\"node71=http://192.168.21.71:2380,node77=http://192.168.21.77:2380,node78=http://192.168.21.78:2380\"\nETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"\nETCD_INITIAL_CLUSTER_STATE=\"new\"\n\n\n# node77\u8282\u70b9\uff1a\n#[Member]\nETCD_NAME=\"node77\"\nETCD_DATA_DIR=\"/data/workspace/etcd/data.etcd\"\nETCD_LISTEN_PEER_URLS=\"http://192.168.21.77:2380\"\nETCD_LISTEN_CLIENT_URLS=\"http://192.168.21.77:2379\"\n\n#[Clustering]\nETCD_INITIAL_ADVERTISE_PEER_URLS=\"http://192.168.21.77:2380\"\nETCD_ADVERTISE_CLIENT_URLS=\"http://192.168.21.77:2379\"\nETCD_INITIAL_CLUSTER=\"node71=http://192.168.21.71:2380,node77=http://192.168.21.77:2380,node78=http://192.168.21.78:2380\"\nETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"\nETCD_INITIAL_CLUSTER_STATE=\"new\"\n\n\n# node78\u8282\u70b9\uff1a\n#[Member]\nETCD_NAME=\"node78\"\nETCD_DATA_DIR=\"/data/workspace/etcd/data.etcd\"\nETCD_LISTEN_PEER_URLS=\"http://192.168.21.78:2380\"\nETCD_LISTEN_CLIENT_URLS=\"http://192.168.21.78:2379\"\n\n#[Clustering]\nETCD_INITIAL_ADVERTISE_PEER_URLS=\"http://192.168.21.78:2380\"\nETCD_ADVERTISE_CLIENT_URLS=\"http://192.168.21.78:2379\"\nETCD_INITIAL_CLUSTER=\"node71=http://192.168.21.71:2380,node77=http://192.168.21.77:2380,node78=http://192.168.21.78:2380\"\nETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"\nETCD_INITIAL_CLUSTER_STATE=\"new\"\n</code></pre></p> </li> <li> <p>\u7f16\u5199\u542f\u52a8\u811a\u672c Bash<pre><code># vim /data/workspace/etcd_node71.sh\n\n# For each machine\nTOKEN=qazwx123\nCLUSTER_STATE=new\nNAME_1=node71\nNAME_2=node77\nNAME_3=node78\nHOST_1=192.168.21.71\nHOST_2=192.168.21.77\nHOST_3=192.168.21.78\nCLUSTER=${NAME_1}=http://${HOST_1}:2380,${NAME_2}=http://${HOST_2}:2380,${NAME_3}=http://${HOST_3}:2380\n\n# For node71\nTHIS_NAME=${NAME_1}\nTHIS_IP=${HOST_1}\netcd --data-dir=/data/workspace/etcd/data.etcd --name ${THIS_NAME} \\\n    --initial-advertise-peer-urls http://${THIS_IP}:2380 \\\n    --listen-peer-urls http://${THIS_IP}:2380 \\\n    --advertise-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --listen-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --initial-cluster ${CLUSTER} \\\n    --initial-cluster-state ${CLUSTER_STATE} \\\n    --initial-cluster-token ${TOKEN}  &gt; /data/workspace/etcd/etcd.out 2&gt;&amp;1 &amp;\n\n\n# vim /data/workspace/etcd_node77.sh\n# For each machine\nTOKEN=qazwx123\nCLUSTER_STATE=new\nNAME_1=node71\nNAME_2=node77\nNAME_3=node78\nHOST_1=192.168.21.71\nHOST_2=192.168.21.77\nHOST_3=192.168.21.78\nCLUSTER=${NAME_1}=http://${HOST_1}:2380,${NAME_2}=http://${HOST_2}:2380,${NAME_3}=http://${HOST_3}:2380\n\n# For node77\nTHIS_NAME=${NAME_2}\nTHIS_IP=${HOST_2}\netcd --data-dir=/data/workspace/etcd/data.etcd --name ${THIS_NAME} \\\n    --initial-advertise-peer-urls http://${THIS_IP}:2380 \\\n    --listen-peer-urls http://${THIS_IP}:2380 \\\n    --advertise-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --listen-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --initial-cluster ${CLUSTER} \\\n    --initial-cluster-state ${CLUSTER_STATE} \\\n    --initial-cluster-token ${TOKEN}  &gt; /data/workspace/etcd/etcd.out 2&gt;&amp;1 &amp;\n\n\n# vim /data/workspace/etcd_node78.sh\n# For each machine\nTOKEN=qazwx123\nCLUSTER_STATE=new\nNAME_1=node71\nNAME_2=node77\nNAME_3=node78\nHOST_1=192.168.21.71\nHOST_2=192.168.21.77\nHOST_3=192.168.21.78\nCLUSTER=${NAME_1}=http://${HOST_1}:2380,${NAME_2}=http://${HOST_2}:2380,${NAME_3}=http://${HOST_3}:2380\n\n# For node78\nTHIS_NAME=${NAME_3}\nTHIS_IP=${HOST_3}\netcd --data-dir=/data/workspace/etcd/data.etcd --name ${THIS_NAME} \\\n    --initial-advertise-peer-urls http://${THIS_IP}:2380 \\\n    --listen-peer-urls http://${THIS_IP}:2380 \\\n    --advertise-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --listen-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --initial-cluster ${CLUSTER} \\\n    --initial-cluster-state ${CLUSTER_STATE} \\\n    --initial-cluster-token ${TOKEN}  &gt; /data/workspace/etcd/etcd.out 2&gt;&amp;1 &amp;\n</code></pre></p> </li> <li> <p>\u6267\u884c\u542f\u52a8\u547d\u4ee4 Bash<pre><code>chmode +x etcd_node71.sh etcd_node77.sh etcd_node78.sh\n\nscp /data/workspace/etcd/etcd_node77.sh node77:/data/workspace/etcd\nscp /data/workspace/etcd/etcd_node78.sh node78:/data/workspace/etcd\n\n# \u4e09\u4e2a\u8282\u70b9\u540c\u65f6\u6267\u884c\n# node71\n./etcd_node71.sh\n\n# node77\n./etcd_node77.sh\n\n# node78\n./etcd_node78.sh\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u5f00\u673a\u542f\u52a8\uff08\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981\uff09 Bash<pre><code>vim /usr/lib/systemd/system/etcd.service\n\n[Unit]\nDescription=Etcd Server\nAfter=network.target\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nType=notify\nEnvironmentFile=/etc/etcd/etcd.conf\nExecStart=etcd \\\n--name=${ETCD_NAME} \\\n--data-dir=${ETCD_DATA_DIR} \\\n--listen-peer-urls=${ETCD_LISTEN_PEER_URLS} \\\n--listen-client-urls=${ETCD_LISTEN_CLIENT_URLS},http://127.0.0.1:2379 \\\n--advertise-client-urls=${ETCD_ADVERTISE_CLIENT_URLS},http://127.0.0.1:2379 \\\n--initial-advertise-peer-urls=${ETCD_INITIAL_ADVERTISE_PEER_URLS} \\\n--initial-cluster=${ETCD_INITIAL_CLUSTER} \\\n--initial-cluster-token=${ETCD_INITIAL_CLUSTER} \\\n--initial-cluster-state=${ETCD_INITIAL_CLUSTER_STATE}\n\nRestart=on-failure\nRestartSec=5\nLimitNOFILE=65536\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> </li> <li> <p>\u542f\u52a8 Bash<pre><code>systemctl daemon-reload\n\nsystemctl start etcd\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u96c6\u7fa4\u542f\u52a8\u72b6\u6001 Bash<pre><code>etcdctl --write-out=table member list\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n|        ID        | STATUS  |  NAME  |        PEER ADDRS         |                  CLIENT ADDRS                   | IS LEARNER |\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n| 6dcf7486a69f8697 | started | node71 | http://192.168.21.71:2380 | http://127.0.0.1:2379,http://192.168.21.71:2379 |      false |\n| a813d75d75a2bb6a | started | node77 | http://192.168.21.77:2380 | http://127.0.0.1:2379,http://192.168.21.77:2379 |      false |\n| c9fca2d62adf253a | started | node78 | http://192.168.21.78:2380 | http://127.0.0.1:2379,http://192.168.21.78:2379 |      false |\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n</code></pre></p> </li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#https","title":"\u90e8\u7f72\uff08HTTPS\uff09\u65b9\u5f0f","text":"<ul> <li> <p>\u4e0b\u8f7d\u3001\u5b89\u88c5 Bash<pre><code># node71\u8282\u70b9\u6267\u884c\nwget https://github.com/etcd-io/etcd/releases/download/v3.5.7/etcd-v3.5.7-linux-amd64.tar.gz\n\ntar zxf etcd-v3.5.7-linux-amd64.tar.gz --strip-components=1 -C /usr/local/bin etcd-v3.5.7-linux-amd64/etcd{,ctl}\n\netcdctl version\n\nscp /usr/local/bin/etcd* node77:/usr/local/bin/\nscp /usr/local/bin/etcd* node78:/usr/local/bin/\n</code></pre></p> </li> <li> <p>\u4f7f\u7528cfssl\u5de5\u5177\u751f\u6210\u8bc1\u4e66 Bash<pre><code>wget \"https://github.com/cloudflare/cfssl/releases/download/v1.6.2/cfssl_1.6.2_linux_amd64\" -O /usr/local/bin/cfssl\n\nwget \"https://github.com/cloudflare/cfssl/releases/download/v1.6.2/cfssljson_1.6.2_linux_amd64\" -O /usr/local/bin/cfssljson\n\nchmod +x /usr/local/bin/cfssl /usr/local/bin/cfssljson \n\ncfssl version\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u8bc1\u4e66\u5b58\u653e\u76ee\u5f55(\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981) Bash<pre><code>mkdir -p /etc/etcd/ssl\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u7528\u4e8e\u8bc1\u4e66\u7684json\u6587\u4ef6 JSON<pre><code>vim ca-config.json\n\n{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"876000h\"\n    },\n    \"profiles\": {\n      \"etcd\": {\n        \"usages\": [\n          \"signing\",\n          \"key encipherment\",\n          \"server auth\",\n          \"client auth\"\n        ],\n        \"expiry\": \"876000h\"\n      }\n    }\n  }\n}\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u7528\u4e8e\u751f\u6210CA\u8bc1\u4e66\u548ckey\u7684json\u6587\u4ef6 JSON<pre><code>vim etcd-ca-csr.json \n{\n  \"CN\": \"etcd\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"CN\",\n      \"ST\": \"Beijing\",\n      \"L\": \"Beijing\",\n      \"O\": \"etcd\",\n      \"OU\": \"Etcd Security\"\n    }\n  ],\n  \"ca\": {\n    \"expiry\": \"876000h\"\n  }\n}\n</code></pre></p> </li> <li> <p>\u751f\u6210CA\u8bc1\u4e66\u548c\u8bc1\u4e66\u7684key Bash<pre><code>cfssl gencert -initca etcd-ca-csr.json | cfssljson -bare /etc/etcd/ssl/etcd-ca\nls /etc/etcd/ssl/\netcd-ca.csr  etcd-ca-key.pem  etcd-ca.pem\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u7528\u4e8eetcd\u670d\u52a1\u8bc1\u4e66\u7684json JSON<pre><code>vim etcd-csr.json\n\n{\n  \"CN\": \"etcd\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"CN\",\n      \"ST\": \"Beijing\",\n      \"L\": \"Beijing\",\n      \"O\": \"etcd\",\n      \"OU\": \"Etcd Security\"\n    }\n  ]\n}\n</code></pre></p> </li> <li> <p>\u751f\u6210ETCD\u670d\u52a1\u8bc1\u4e66 Bash<pre><code>cfssl gencert -ca=/etc/etcd/ssl/etcd-ca.pem -ca-key=/etc/etcd/ssl/etcd-ca-key.pem -config=ca-config.json -hostname=127.0.0.1,node71,node77,node78,192.168.21.71,192.168.21.77,192.168.21.78 -profile=etcd etcd-csr.json | cfssljson -bare /etc/etcd/ssl/etcd\n\nls /etc/etcd/ssl/\netcd-ca.csr  etcd-ca-key.pem  etcd-ca.pem  etcd.csr  etcd-key.pem  etcd.pem\n</code></pre></p> </li> <li> <p>\u5c06\u8bc1\u4e66\u590d\u5236\u5230\u5176\u4ed6\u8282\u70b9 Bash<pre><code>for FILE in etcd-ca-key.pem  etcd-ca.pem  etcd-key.pem  etcd.pem; do        scp /etc/etcd/ssl/${FILE} node77:/etc/etcd/ssl/${FILE};      done\n\nfor FILE in etcd-ca-key.pem  etcd-ca.pem  etcd-key.pem  etcd.pem; do        scp /etc/etcd/ssl/${FILE} node78:/etc/etcd/ssl/${FILE};      done\n</code></pre></p> </li> <li> <p>ETCD\u914d\u7f6e</p> </li> <li> <p>\u521b\u5efaetcd\u914d\u7f6e\u6587\u4ef6\uff08\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981\uff09 Bash<pre><code>vim /etc/etcd/etcd.config.yml \n\n# node71\u8282\u70b9\nname: 'node71'\ndata-dir: /data/workspace/etcd/data\nwal-dir: /data/workspace/etcd/wal\nsnapshot-count: 5000\nheartbeat-interval: 100\nelection-timeout: 1000\nquota-backend-bytes: 0\nlisten-peer-urls: 'https://192.168.21.71:2380'\nlisten-client-urls: 'https://192.168.21.71:2379,http://127.0.0.1:2379'\nmax-snapshots: 3\nmax-wals: 5\ncors:\ninitial-advertise-peer-urls: 'https://192.168.21.71:2380'\nadvertise-client-urls: 'https://192.168.21.71:2379'\ndiscovery:\ndiscovery-fallback: 'proxy'\ndiscovery-proxy:\ndiscovery-srv:\ninitial-cluster: 'node71=https://192.168.21.71:2380,node77=https://192.168.21.77:2380,node78=https://192.168.21.78:2380'\ninitial-cluster-token: 'etcd-cluster'\ninitial-cluster-state: 'new'\nstrict-reconfig-check: false\nenable-v2: true\nenable-pprof: true\nproxy: 'off'\nproxy-failure-wait: 5000\nproxy-refresh-interval: 30000\nproxy-dial-timeout: 1000\nproxy-write-timeout: 5000\nproxy-read-timeout: 0\nclient-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\npeer-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  peer-client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\ndebug: false\nlog-package-levels:\nlog-outputs: [default]\nforce-new-cluster: false\n\n# node77\u8282\u70b9\nname: 'node77'\ndata-dir: /data/workspace/etcd/data\nwal-dir: /data/workspace/etcd/wal\nsnapshot-count: 5000\nheartbeat-interval: 100\nelection-timeout: 1000\nquota-backend-bytes: 0\nlisten-peer-urls: 'https://192.168.21.77:2380'\nlisten-client-urls: 'https://192.168.21.77:2379,http://127.0.0.1:2379'\nmax-snapshots: 3\nmax-wals: 5\ncors:\ninitial-advertise-peer-urls: 'https://192.168.21.77:2380'\nadvertise-client-urls: 'https://192.168.21.77:2379'\ndiscovery:\ndiscovery-fallback: 'proxy'\ndiscovery-proxy:\ndiscovery-srv:\ninitial-cluster: 'node71=https://192.168.21.71:2380,node77=https://192.168.21.77:2380,node78=https://192.168.21.78:2380'\ninitial-cluster-token: 'etcd-cluster'\ninitial-cluster-state: 'new'\nstrict-reconfig-check: false\nenable-v2: true\nenable-pprof: true\nproxy: 'off'\nproxy-failure-wait: 5000\nproxy-refresh-interval: 30000\nproxy-dial-timeout: 1000\nproxy-write-timeout: 5000\nproxy-read-timeout: 0\nclient-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\npeer-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  peer-client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\ndebug: false\nlog-package-levels:\nlog-outputs: [default]\nforce-new-cluster: false\n\n# node78\u8282\u70b9\nname: 'node78'\ndata-dir: /data/workspace/etcd/data\nwal-dir: /data/workspace/etcd/wal\nsnapshot-count: 5000\nheartbeat-interval: 100\nelection-timeout: 1000\nquota-backend-bytes: 0\nlisten-peer-urls: 'https://192.168.21.78:2380'\nlisten-client-urls: 'https://192.168.21.78:2379,http://127.0.0.1:2379'\nmax-snapshots: 3\nmax-wals: 5\ncors:\ninitial-advertise-peer-urls: 'https://192.168.21.78:2380'\nadvertise-client-urls: 'https://192.168.21.78:2379'\ndiscovery:\ndiscovery-fallback: 'proxy'\ndiscovery-proxy:\ndiscovery-srv:\ninitial-cluster: 'node71=https://192.168.21.71:2380,node77=https://192.168.21.77:2380,node78=https://192.168.21.78:2380'\ninitial-cluster-token: 'etcd-cluster'\ninitial-cluster-state: 'new'\nstrict-reconfig-check: false\nenable-v2: true\nenable-pprof: true\nproxy: 'off'\nproxy-failure-wait: 5000\nproxy-refresh-interval: 30000\nproxy-dial-timeout: 1000\nproxy-write-timeout: 5000\nproxy-read-timeout: 0\nclient-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\npeer-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  peer-client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\ndebug: false\nlog-package-levels:\nlog-outputs: [default]\nforce-new-cluster: false\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u5f00\u673a\u542f\u52a8(\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981) Bash<pre><code>vim /usr/lib/systemd/system/etcd.service\n\n[Unit]\nDescription=Etcd Service\nDocumentation=https://coreos.com/etcd/docs/latest/\nAfter=network.target\n\n[Service]\nType=notify\nExecStart=/usr/local/bin/etcd --config-file=/etc/etcd/etcd.config.yml\nRestart=on-failure\nRestartSec=10\nLimitNOFILE=65536\n\n[Install]\nWantedBy=multi-user.target\nAlias=etcd3.service\n</code></pre></p> </li> <li> <p>\u542f\u52a8etcd\u670d\u52a1(\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981) Bash<pre><code>systemctl daemon-reload\nsystemctl enable --now etcd\n</code></pre></p> </li> <li> <p>\u67e5\u770betcd\u7684\u72b6\u6001 Bash<pre><code>etcdctl --endpoints=\"192.168.21.71:2379,192.168.21.77:2379,192.168.21.78:2379\" --cacert=/etc/etcd/ssl/etcd-ca.pem --cert=/etc/etcd/ssl/etcd.pem --key=/etc/etcd/ssl/etcd-key.pem  endpoint status --write-out=table\n\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n|        ID        | STATUS  |  NAME  |        PEER ADDRS         |                  CLIENT ADDRS                   | IS LEARNER |\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n| 6dcf7486a69f8697 | started | node71 | http://192.168.21.71:2380 | http://127.0.0.1:2379,http://192.168.21.71:2379 |      false |\n| a813d75d75a2bb6a | started | node77 | http://192.168.21.77:2380 | http://127.0.0.1:2379,http://192.168.21.77:2379 |      false |\n| c9fca2d62adf253a | started | node78 | http://192.168.21.78:2380 | http://127.0.0.1:2379,http://192.168.21.78:2379 |      false |\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n</code></pre></p> </li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#_3","title":"\u5b89\u88c5\u5ba2\u6237\u7aef\u5de5\u5177","text":"<ul> <li>etcd-manager <p>https://github.com/gohutool/boot4go-etcdv3-browser https://hub.docker.com/r/joinsunsoft/etcdv3-browser</p> </li> </ul> Bash<pre><code>docker container run --rm -p 9980:80 --name etcdv3-browser  joinsunsoft/etcdv3-browser:0.9.0\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/","title":"Flink(On YARN)\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#flink-on-yarn","title":"Flink On YARN","text":"<p>Flink\u662f\u4e00\u4e2a\u6279\u5904\u7406\u548c\u6d41\u5904\u7406\u7ed3\u5408\u7684\u5206\u5e03\u5f0f\u8ba1\u7b97\u6846\u67b6\uff0c\u5176\u6838\u5fc3\u662f\u63d0\u4f9b\u4e86\u6570\u636e\u5206\u53d1\u4ee5\u53ca\u5e76\u884c\u5316\u8ba1\u7b97\u7684\u6d41\u5904\u7406\u5f15\u64ce\uff0c\u4f5c\u4e3a\u5206\u5e03\u5f0f\u6d41\u5f0f\u8ba1\u7b97\u5f15\u64ce\u4e3b\u8981\u4e3a\u4e0a\u5c42\u670d\u52a1\u63d0\u4f9b\u66f4\u52a0\u5b9e\u65f6\u6027\u6570\u636e\u64cd\u4f5c\uff0c\u8be5\u7ec4\u4ef6\u4e3b\u8981\u9002\u7528\u4e8e\u6570\u636e\u4f4e\u5ef6\u65f6\u5904\u7406\u3002\u5728\u672c\u7cfb\u7edf\u4e2d\u4e3b\u8981\u7528\u4e8e\u652f\u6491Flink\u6a21\u578b\u7684\u8fd0\u884c\u548c\u8ba1\u7b97\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.73-192.168.21.75 \u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/flink-1.15.3-bin-scala_2.12.tgz \u8fd0\u884c\u76ee\u5f55 /data/workspace/flink-1.15.3","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#flink","title":"Flink\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step1","title":"step1: \u89e3\u538b\u5b89\u88c5\u5305","text":"Bash<pre><code>sudo tar -zxvf /data/software/flink-1.15.3-bin-scala_2.12.tgz -C /data/workspace\nsudo chown -R zhongche:zhongche /data/workspace/flink-1.15.3/\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step2-flink","title":"step2: \u914d\u7f6e Flink \u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u200b     \u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># FLINK\nexport FLINK_HOME=/data/workspace/flink-1.15.3\nexport PATH=$PATH:$FLINK_HOME/bin\n</code></pre> <p>\u200b     \u751f\u6548\u914d\u7f6e\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step3-flink-confyaml","title":"step3: \u914d\u7f6eflink-conf.yaml\u6587\u4ef6","text":"<p>\u5728${FLINK_HOME}/conf \u8def\u5f84\u4e0b\u914d\u7f6eflink-conf.yaml\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Bash<pre><code>jobmanager.rpc.address: node73\n\njobmanager.rpc.port: 6123\n\njobmanager.bind-host: 0.0.0.0\n\njobmanager.memory.process.size: 2g\n\ntaskmanager.bind-host: 0.0.0.0\n\ntaskmanager.host: node73\n\ntaskmanager.memory.process.size: 4g\n\ntaskmanager.numberOfTaskSlots: 4\n\nparallelism.default: 4\n\n# JVM Metaspace Memory --- Task Manager JVM\u7684\u5143\u7a7a\u95f4\u5185\u5b58\u5927\u5c0f\uff0c\u9ed8\u8ba4 256m\ntaskmanager.memory.jvm-metaspace.size: 512m\n\ntaskmanager.memory.jvm-overhead.fraction: 0.2\ntask.cancellation.timeout: 0\n\nexecution.target: yarn-per-job\n\nhigh-availability: zookeeper\n\nhigh-availability.storageDir: hdfs://ns/flink_1.15/yarn/ha\n\nhigh-availability.zookeeper.quorum: node73:2181,node74:2181,node75:2181\n\nhigh-availability.zookeeper.path.root: /flink_1.15_yarn\n\nhigh-availability.cluster-id: /flink_1.15\n\nstate.backend: rocksdb\n\nstate.checkpoints.dir: hdfs://ns/flink_1.15/checkpoints\n\nstate.savepoints.dir: hdfs://ns/flink_1.15/savepoints\n\n# \u6700\u591a\u4fdd\u7559\u5df2\u5b8c\u6210\u7684\u68c0\u67e5\u70b9\u5b9e\u4f8b\u7684\u6570\u91cf\nstate.checkpoints.num-retained: 100\nstate.backend.incremental: true\n\nakka.ask.timeout: 100s\nweb.timeout: 300000\n\ntaskmanager.debug.memory.log: true\ntaskmanager.debug.memory.log-interval: 10000\ntaskmanager.network.netty.transport: \"epoll\"\n\njobmanager.execution.failover-strategy: region\n\nrest.address: localhost\n\nrest.bind-port: 50100-50200\n\nrest.bind-address: 0.0.0.0\n\nhistoryserver.web.address: node73\nhistoryserver.archive.clean-expired-jobs: true\n\n# JobManager\u5f52\u6863\u7684\u4f5c\u4e1a\u4fe1\u606f\u6240\u5b58\u653e\u7684\u76ee\u5f55\njobmanager.archive.fs.dir: hdfs://ns/flink_1.15/completed-jobs/\n\n# \u6307\u5b9aHistory Server\u626b\u63cf\u54ea\u4e9b\u5f52\u6863\u76ee\u5f55\nhistoryserver.archive.fs.dir: hdfs://ns/flink_1.15/completed-jobs/\n\n# \u6307\u5b9aHistory Server\u95f4\u9694\u591a\u5c11\u6beb\u79d2\u626b\u63cf\u4e00\u6b21\u5f52\u6863\u76ee\u5f55\nhistoryserver.archive.fs.refresh-interval: 60000\n\nclassloader.check-leaked-classloader: false\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step4-flink_homebinflink","title":"step4: \u5728$FLINK_HOME/bin/flink\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e","text":"Bash<pre><code>export HADOOP_CLASSPATH=`hadoop classpath`\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step5-flink","title":"step5: \u5c06Flink \u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5404\u670d\u52a1\u5668\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/flink-1.15.3/ root@node74:/data/workspace\nsudo scp -r /data/workspace/flink-1.15.3/ root@node75:/data/workspace\nsudo scp -r /data/workspace/flink-1.15.3/ root@node76:/data/workspace\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u4fee\u6539hadoop-3.2.4\u6240\u5c5e\u7528\u6237\u7ec4\u548c\u6240\u5c5e\u7528\u6237\nsudo chown -R zhongche:zhongche /data/workspace/flink-1.15.3\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim ~/.bashrc\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport FLINK_HOME=/data/workspace/flink-1.15.3\nexport PATH=$PATH:$FLINK_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step6","title":"step6: \u521b\u5efa\u76f8\u5173\u76ee\u5f55","text":"Bash<pre><code>[zhongche@node73 flink-1.15.3]$ hdfs dfs -mkdir -p /flink_1.15/checkpoints\n[zhongche@node73 flink-1.15.3]$ hdfs dfs -mkdir -p /flink_1.15/savepoints\n[zhongche@node73 flink-1.15.3]$ hdfs dfs -mkdir -p /flink_1.15/completed-jobs\n[zhongche@node73 flink-1.15.3]$ hdfs dfs -mkdir -p /flink_1.15/yarn/ha\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801\uff1a</p> Bash<pre><code>$FLINK_HOME/bin/flink run -m yarn-cluster -yjm 1024 -ytm 1024 $FLINK_HOME/examples/batch/WordCount.jar\n</code></pre> Bash<pre><code>[zhongche@node73 flink-1.15.3]$ $FLINK_HOME/bin/flink run -m yarn-cluster -yjm 1024 -ytm 1024 /data/workspace/flink-1.15.3/examples/batch/WordCount.jar \nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/data/workspace/flink-1.15.3/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/data/workspace/hadoop-3.2.4/share/hadoop/common/lib/slf4j-reload4j-1.7.35.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\nExecuting WordCount example with default input data set.\nUse --input to specify file input.\nPrinting result to stdout. Use --output to specify output path.\n2023-07-17 10:46:25,896 WARN  org.apache.flink.yarn.configuration.YarnLogConfigUtil        [] - The configuration directory ('/data/workspace/flink-1.15.3/conf') already contains a LOG4J config file.If you want to use logback, then please delete or rename the log configuration file.\n2023-07-17 10:46:26,153 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - No path for the flink jar passed. Using the location of class org.apache.flink.yarn.YarnClusterDescriptor to locate the jar\n2023-07-17 10:46:26,166 WARN  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Job Clusters are deprecated since Flink 1.15. Please use an Application Cluster/Application Mode instead.\n2023-07-17 10:46:26,298 INFO  org.apache.hadoop.conf.Configuration                         [] - resource-types.xml not found\n2023-07-17 10:46:26,299 INFO  org.apache.hadoop.yarn.util.resource.ResourceUtils           [] - Unable to find 'resource-types.xml'.\n2023-07-17 10:46:26,346 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Cluster specification: ClusterSpecification{masterMemoryMB=2048, taskManagerMemoryMB=4096, slotsPerTaskManager=4}\n2023-07-17 10:46:31,295 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Submitting application master application_1689415931790_0004\n2023-07-17 10:46:31,537 INFO  org.apache.hadoop.yarn.client.api.impl.YarnClientImpl        [] - Submitted application application_1689415931790_0004\n2023-07-17 10:46:31,537 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Waiting for the cluster to be allocated\n2023-07-17 10:46:31,539 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Deploying cluster, current state ACCEPTED\n2023-07-17 10:46:38,338 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - YARN application has been deployed successfully.\n2023-07-17 10:46:38,339 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Found Web Interface node74:50100 of application 'application_1689415931790_0004'.\nJob has been submitted with JobID c0245edf54e4eb4a320535316cb1e030\nProgram execution finished\nJob with JobID c0245edf54e4eb4a320535316cb1e030 has finished.\nJob Runtime: 10739 ms\nAccumulator Results: \n- 62999036f072a117ac8c6cf197e3bc4e (java.util.ArrayList) [170 elements]\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/","title":"Hadoop\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#hadoop","title":"Hadoop\u96c6\u7fa4\u5b89\u88c5","text":"<p>HDFS\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff0c\u7528\u4e8e\u5b58\u50a8\u548c\u7ba1\u7406\u6587\u4ef6\uff0c\u53e6\u5916\uff0cHDFS\u4e5f\u662fHadoop\u751f\u6001\u7cfb\u7edf\u4e00\u4e2a\u91cd\u8981\u7684\u7ec4\u6210\u90e8\u5206\uff0c\u662fHadoop\u7684\u5b58\u50a8\u7ec4\u4ef6\uff0c\u80fd\u591f\u63d0\u4f9b\u9ad8\u541e\u5410\u91cf\u7684\u6570\u636e\u8bbf\u95ee\uff0c\u975e\u5e38\u9002\u5408\u5927\u89c4\u6a21\u6570\u636e\u96c6\u4e0a\u7684\u5e94\u7528\u3002\u5728\u672c\u7cfb\u7edf\u4e2d\u4f5c\u4e3a\u5206\u5e03\u5f0f\u5b58\u50a8\u7ec4\u4ef6\uff0c\u4e3b\u8981\u627f\u8f7d\u5e73\u53f0\u6240\u6709\u6587\u4ef6\u7c7b\u578b\u6570\u636e\u7684\u5b58\u50a8\u3002</p> <p>\u90e8\u7f72\u8bf4\u660e</p> <ul> <li>192.168.21.73 -&gt; node73</li> <li>192.168.21.74 -&gt; node74</li> <li>192.168.21.75 -&gt; node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 HDFS\u96c6\u7fa4\u90e8\u7f72\u8282\u70b9 192.168.21.73\uff08NameNode/DataNode\uff09192.168.21.74\uff08NameNode/DataNode\uff09192.168.21.75\uff08DataNode/SecondaryNameNode\uff09 YARN\u96c6\u7fa4\u90e8\u7f72\u8282\u70b9 192.168.21.73\uff08ResourceManager/NodeManager\uff09192.168.21.74\uff08ResourceManager/NodeManager\uff09192.168.21.75\uff08NodeManager\uff09 Hadoop\u5b89\u88c5\u5305\u76ee\u5f55 /data/software/hadoop-3.2.4.tar.gz Hadoop\u8fd0\u884c\u76ee\u5f55 /data/workspace/hadoop-3.2.4 HDFS NameNode\u6570\u636e\u8def\u5f84 /data/workspace/hadoop-3.2.4/data/hdfs/name HDFS DataNode\u6570\u636e\u8def\u5f84 /data/workspace/hadoop-3.2.4/data/hdfs/data HADOOP\u4e34\u65f6\u6570\u636e\u8def\u5f84 /data/workspace/hadoop-3.2.4/data/tmp Hadoop\u65e5\u5fd7\u8def\u5f84 /data/workspace/hadoop-3.2.4/logs HDFS\u8fdb\u7a0b\u8def\u5f84 /data/workspace/hadoop-3.2.4/pid YARN\u8fdb\u7a0b\u8def\u5f84 /data/workspace/hadoop-3.2.4/pid MAPRED\u8fdb\u7a0b\u8def\u5f84 /data/workspace/hadoop-3.2.4/pid HDFS WebUI http://192.168.21.73:50070/http://192.168.21.74:50070 YARN WebUI http://192.168.21.73:8088/http://192.168.21.74:8088 \u5386\u53f2\u670d\u52a1\u5668WebUI http://192.168.21.75:19888","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#hadoop_1","title":"Hadoop\u90e8\u7f72\u6587\u6863","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step1","title":"step1: \u89e3\u538b\u5b89\u88c5\u5305","text":"Bash<pre><code>sudo tar -zxvf /data/software/hadoop-3.2.4.tar.gz -C /data/workspace/hadoop-3.2.4\nsudo chown -R demouser:demouser /data/workspace\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step2-hadoop","title":"step2: \u914d\u7f6eHadoop\u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u200b     \u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># Hadoop\nexport HADOOP_HOME=/data/workspace/hadoop-3.2.4\nexport HADOOP_CLASSPATH=$($HADOOP_HOME/bin/hadoop classpath)\nexport HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop\nexport PATH=$PATH:$HADOOP_HOME/bin\n</code></pre> <p>\u200b     \u751f\u6548\u914d\u7f6e\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step3-core-sitexml","title":"step3: \u914d\u7f6ecore-site.xml\u6587\u4ef6","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6ecore-site.xml\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n  &lt;!-- \u5982\u679c\u662fHA\u6a21\u5f0f\u5219\u6307\u5b9ahdfs\u7684nameservice\u4e3ans \u5982\u679c\u662f\u975eHA\u6a21\u5f0f\uff0c\u5219\u4e3ahdfs://&lt;host&gt;:&lt;ip&gt;--&gt;\n  &lt;property&gt;\n    &lt;name&gt;fs.defaultFS&lt;/name&gt;\n    &lt;value&gt;hdfs://ns&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--\u6307\u5b9ahadoop\u6570\u636e\u5b58\u653e\u76ee\u5f55--&gt;\n  &lt;property&gt;\n     &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;\n     &lt;value&gt;/data/workspace/hadoop-3.2.4/data/tmp&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- Hadoop\u7684\u7f13\u51b2\u533a\u5927\u5c0f\u3002\u9ed8\u8ba4\u4e3a4KB\uff0c\u589e\u52a0\u4e3a128KB\u3002 --&gt;\n  &lt;property&gt;\n    &lt;name&gt;io.file.buffer.size&lt;/name&gt;\n    &lt;value&gt;131072&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u548c\u7cfb\u7edf\u5185\u6838\u4e2d\u7684backlog\u76f8\u5173\u53c2\u6570\u8054\u52a8\uff0c\u4f46\u8981\u5c0f\u4e8enet.core.somaxconn --&gt;\n  &lt;property&gt;\n    &lt;name&gt;ipc.server.listen.queue.size&lt;/name&gt;\n    &lt;value&gt;20480&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;hadoop.proxyuser.zhongtai.hosts&lt;/name&gt;\n    &lt;value&gt;*&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;hadoop.proxyuser.zhongtai.groups&lt;/name&gt;\n    &lt;value&gt;*&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!--\u6307\u5b9azookeeper\u5730\u5740--&gt;\n  &lt;property&gt;\n        &lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;\n        &lt;value&gt;node73:2181,node74:2181,node75:2181&lt;/value&gt;\n  &lt;/property&gt;\n\n      &lt;!-- \n        \u68c0\u67e5\u70b9\u88ab\u5220\u9664\u540e\u7684\u5206\u949f\u6570\u3002\u5982\u679c\u4e3a\u96f6\uff0c\u5783\u573e\u6876\u529f\u80fd\u5c06\u88ab\u7981\u7528\u3002\u8be5\u9009\u9879\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e\u3002[\u5355\u4f4d(minute)]\n        \u5982\u679c\u5783\u573e\u7bb1\u88ab\u7981\u7528\u670d\u52a1\u5668\u7aef\uff0c\u5219\u68c0\u67e5\u5ba2\u6237\u7aef\u914d\u7f6e\u3002\n        \u5982\u679c\u5728\u670d\u52a1\u5668\u7aef\u542f\u7528\u5783\u573e\u7bb1\uff0c\u5219\u4f1a\u4f7f\u7528\u670d\u52a1\u5668\u4e0a\u914d\u7f6e\u7684\u503c\uff0c\u5e76\u5ffd\u7565\u5ba2\u6237\u7aef\u914d\u7f6e\u503c\u3002 \n        https://www.jianshu.com/p/1827431d4eb5\n      --&gt;\n    &lt;property&gt;\n      &lt;name&gt;fs.trash.interval&lt;/name&gt;\n      &lt;value&gt;4320&lt;/value&gt;\n    &lt;/property&gt;\n\n&lt;!-- \n    \u5783\u573e\u68c0\u67e5\u70b9\u4e4b\u95f4\u7684\u5206\u949f\u6570\u3002\u5e94\u8be5\u5c0f\u4e8e\u6216\u7b49\u4e8efs.trash.interval\u3002[\u5355\u4f4d(minute)]\n    \u5982\u679c\u4e3a\u96f6\uff0c\u5219\u5c06\u8be5\u503c\u8bbe\u7f6e\u4e3afs.trash.interval\u7684\u503c\u3002\u6bcf\u6b21\u68c0\u67e5\u6307\u9488\u8fd0\u884c\u65f6\uff0c\u5b83\u90fd\u4f1a\u4ece\u5f53\u524d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u68c0\u67e5\u70b9\uff0c\u5e76\u5220\u9664\u6bd4fs.trash.interval\u66f4\u65e9\u521b\u5efa\u7684\u68c0\u67e5\u70b9\u3002\n    \u6ce8\u610f\uff1a\u901a\u8fc7\u56de\u6536\u7ad9\u6062\u590d\u8bef\u5220\u7684\u6570\u636e\uff0c\u8981\u6c42\u65f6\u95f4\u4e0d\u80fd\u8d85\u8fc7fs.trash.interval\u914d\u7f6e\u7684\u65f6\u95f4\u3002\u751f\u4ea7\u4e2d\u4e3a\u4e86\u9632\u6b62\u8bef\u5220\u6570\u636e\uff0c\u5efa\u8bae\u5f00\u542fHDFS\u7684\u56de\u6536\u7ad9\u673a\u5236\u3002\n  --&gt;\n    &lt;property&gt;\n      &lt;name&gt;fs.trash.checkpoint.interval&lt;/name&gt;\n      &lt;value&gt;60&lt;/value&gt;\n    &lt;/property&gt;\n\n&lt;/configuration&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step4-hdfs-sitexml","title":"step4: \u914d\u7f6ehdfs-site.xml\u6587\u4ef6","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6ehdfs-site.xml\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!--\u6307\u5b9ahdfs\u7684nameservice\u4e3ans\uff0c\u9700\u8981\u548ccore-site.xml\u4e2d\u7684\u4fdd\u6301\u4e00\u81f4 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.nameservices&lt;/name&gt;\n     &lt;value&gt;ns&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- NameNode \u540c\u65f6\u548c DataNode \u901a\u4fe1\u7684\u7ebf\u7a0b\u6570\uff0c\u9ed8\u8ba4\u4e3a10\uff0c\u5c06\u5176\u589e\u5927\u4e3a40\u3002--&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.namenode.handler.count&lt;/name&gt;\n    &lt;value&gt;40&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u5f53 DataNode\u4e0a\u9762\u7684\u8fde\u63a5\u6570\u8d85\u8fc7\u914d\u7f6e\u4e2d\u7684\u8bbe\u7f6e\u65f6\uff0c DataNode\u5c31\u4f1a\u62d2\u7edd\u8fde\u63a5\u3002--&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.datanode.max.xcievers&lt;/name&gt;\n    &lt;value&gt;65536&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u6267\u884c start-balancer.sh \u7684\u5e26\u5bbd\uff0c\u9ed8\u8ba4\u4e3a1048576(1MB/s)\uff0c\u5c06\u5176\u5897\u5927\u523020MB/s --&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.datanode.balance.bandwidthPerSe&lt;/name&gt;\n    &lt;value&gt;20485760&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \n     DataNode \u5728\u8fdb\u884c\u6587\u4ef6\u4f20\u8f93\u65f6\u6700\u5927\u7ebf\u7a0b\u6570\uff0c\u6700\u9ad8\u8bbe\u7f6e\u4e3a8192\uff0c\u5982\u679c\u96c6\u7fa4\u4e2d\u6709\u67d0\u53f0 DataNode \u4e3b\u673a\u7684\u8fd9\u4e2a\u503c\u6bd4\u5176\u4ed6\u4e3b\u673a\u7684\u5927\uff0c\n     \u90a3\u4e48\u51fa\u73b0\u7684\u95ee\u9898\u662f\uff0c\u8fd9\u53f0\u4e3b\u673a\u4e0a\u5b58\u50a8\u7684\u6570\u636e\u76f8\u5bf9\u522b\u7684\u4e3b\u673a\u6bd4\u8f83\u591a\uff0c\u5bfc\u81f4\u6570\u636e\u5206\u5e03\u4e0d\u5747\u5300\u7684\u95ee\u9898\uff0c\u5373\u4f7f balance \u4ecd\u7136\u4f1a\u4e0d\u5747\u5300\u3002 \n   --&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.datanode.max.transfer.threads&lt;/name&gt;\n    &lt;value&gt;8192&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;    \n  &lt;!-- ns\u4e0b\u9762\u6709\u4e24\u4e2aNameNode\uff0c\u5206\u522b\u662fnn1\uff0cnn2 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.ha.namenodes.ns&lt;/name&gt;\n     &lt;value&gt;nn1,nn2&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- nn1\u7684RPC\u901a\u4fe1\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.rpc-address.ns.nn1&lt;/name&gt;\n     &lt;value&gt;node73:9000&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;    \n  &lt;!-- nn1\u7684http\u901a\u4fe1\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.http-address.ns.nn1&lt;/name&gt;\n     &lt;value&gt;node73:50070&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- nn2\u7684RPC\u901a\u4fe1\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.rpc-address.ns.nn2&lt;/name&gt;\n     &lt;value&gt;node74:9000&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- nn2\u7684http\u901a\u4fe1\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.http-address.ns.nn2&lt;/name&gt;\n     &lt;value&gt;node74:50070&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- \u6307\u5b9aNameNode\u7684\u5143\u6570\u636e\u5728JournalNode\u4e0a\u7684\u5b58\u653e\u4f4d\u7f6e --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;\n     &lt;value&gt;qjournal://node73:8485;node74:8485;node75:8485;node76:8485/ns&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- \u6307\u5b9aJournalNode\u5728\u672c\u5730\u78c1\u76d8\u5b58\u653e\u6570\u636e\u7684\u4f4d\u7f6e --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;\n     &lt;value&gt;/data/workspace/hadoop-3.2.4/data/journal&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u6307\u5b9aNameNode\u5728\u672c\u5730\u78c1\u76d8\u5b58\u653e\u6570\u636e\u7684\u4f4d\u7f6e --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;\n     &lt;value&gt;file:///data/workspace/hadoop-3.2.4/data/hdfs/name&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u6307\u5b9aDataNode\u5728\u672c\u5730\u78c1\u76d8\u5b58\u653e\u6570\u636e\u7684\u4f4d\u7f6e --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;\n     &lt;value&gt;file:///data/workspace/hadoop-3.2.4/data/hdfs/data&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;dfs.datanode.fsdataset.volume.choosing.policy&lt;/name&gt;\n    &lt;value&gt;org.apache.hadoop.hdfs.server.datanode.fsdataset.AvailableSpaceVolumeChoosingPolicy&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- \u5f00\u542fNameNode\u6545\u969c\u65f6\u81ea\u52a8\u5207\u6362 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- \u914d\u7f6e\u5931\u8d25\u81ea\u52a8\u5207\u6362\u5b9e\u73b0\u65b9\u5f0f --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.client.failover.proxy.provider.ns&lt;/name&gt;\n     &lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n     &lt;name&gt;dfs.permissions.enabled&lt;/name&gt;\n     &lt;value&gt;false&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u6ce8\u610f\uff1a\u5982\u679c\u662f\u4f2a\u5206\u5e03\u5f0f\u53ea\u80fd\u914d\u7f6e\u4e3a1 --&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.replication&lt;/name&gt;\n    &lt;value&gt;3&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;\n    &lt;value&gt;\n      sshfence\n      shell(/bin/true)\n    &lt;/value&gt;\n  &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step5-hadoop-envsh","title":"step5: \u914d\u7f6ehadoop-env.sh\u6587\u4ef6","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6ehadoop-env.sh\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Bash<pre><code>export JAVA_HOME=/data/workspace/jdk1.8.0_201\n\n# \u4fee\u6539hadooplog\u3001pid\u3001jvm\u7684\u914d\u7f6e\nexport HADOOP_PID_DIR=/data/workspace/hadoop-3.2.4/pid\nexport HADOOP_MAPRED_PID_DIR=/data/workspace/hadoop-3.2.4/pid\nexport HADOOP_LOG_DIR=/data/workspace/hadoop-3.2.4/log\n\n# JVM\nexport HDFS_NAMENODE_OPTS=\"-Dhadoop.security.logger=INFO,RFAS -Xmx4096m\"\nexport HDFS_DATANODE_OPTS=\"-Dhadoop.security.logger=ERROR,RFAS -Xmx4096m\"\nexport HDFS_JOURNALNODE_OPTS=\"-Xmx4096m\"\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step6-hadoop-pidjvm","title":"step6: \u4fee\u6539hadoop pid\u3001jvm\u7684\u914d\u7f6e","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6e yarn-env.sh \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Bash<pre><code>export YARN_PID_DIR=/data/workspace/hadoop-3.2.4/pid\n\n# JVM\nexport YARN_RESOURCEMANAGER_OPTS=\"-Drm.audit.logger=INFO,RMAUDIT -Xmx4096m\"\nexport YARN_NODEMANAGER_OPTS=\"-Dnm.audit.logger=INFO,NMAUDIT -Xmx4096m\"\n</code></pre> <p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6e mapred-env.sh \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Bash<pre><code>export HADOOP_MAPRED_PID_DIR=/data/workspace/hadoop-3.2.4/pid\n# JVM\nexport MAPRED_HISTORYSERVER_OPTS=\"-Xmx4096m\"\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step7-datanode","title":"step7: \u914d\u7f6eDataNode\u8282\u70b9\u5217\u8868","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop/workers \u6587\u4ef6\u4e2d\u914d\u7f6eDataNode\u8282\u70b9\u5217\u8868\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code>node73\nnode74\nnode75\nnode76\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step8","title":"step8: \u521b\u5efa\u76ee\u5f55","text":"Text Only<pre><code>mkdir /data/workspace/hadoop-3.2.4/pid\nmkdir /data/workspace/hadoop-3.2.4/log\nmkdir -p /data/workspace/hadoop-3.2.4/data/journal\nmkdir -p /data/workspace/hadoop-3.2.4/data/tmp\nmkdir -p /data/workspace/hadoop-3.2.4/data/hdfs/data\nmkdir -p /data/workspace/hadoop-3.2.4/data/hdfs/name\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step9-hadoop","title":"step9: \u5c06Hadoop\u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5404\u670d\u52a1\u5668\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/hadoop-3.2.4/ root@node74:/data/workspace/\nsudo scp -r /data/workspace/hadoop-3.2.4/ root@node75:/data/workspace/\nsudo scp -r /data/workspace/hadoop-3.2.4/ root@node76:/data/workspace/\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u4fee\u6539hadoop-3.2.4\u6240\u5c5e\u7528\u6237\u7ec4\u548c\u6240\u5c5e\u7528\u6237\nsudo chown -R demouser:demouser /data/workspace/hadoop-3.2.4\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim ~/.bashrc\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport HADOOP_HOME=/data/workspace/hadoop-3.2.4\nexport HADOOP_CLASSPATH=$($HADOOP_HOME/bin/hadoop classpath)\nexport HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop\nexport PATH=$PATH:$HADOOP_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step10","title":"step10: \u542f\u52a8\u670d\u52a1","text":"<p>Hadoop HA\u6a21\u5f0f\u5728\u9996\u6b21\u542f\u52a8\u65f6\u8981\u4fdd\u8bc1zk\u662f\u542f\u52a8\u72b6\u6001\uff0c\u7136\u540e\u4e00\u5b9a\u9700\u8981\u6ce8\u610f\u987a\u5e8f\uff0c\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>\u2460\u5728\u67d0\u4e00\u4e2anamenode\u8282\u70b9\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff0c\u6bd4\u5982\u8fd9\u91cc\u6211\u4eec\u5bf9 node73 \u8282\u70b9\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002</p> Bash<pre><code>hdfs zkfc -formatZK\n</code></pre> <p>\u2461\u5728\u6bcf\u4e2ajournalnode\u8282\u70b9\u7528\u5982\u4e0b\u547d\u4ee4\u542f\u52a8journalnode\uff08\u8fdb\u7a0b\u540d\u4e3aJournalNode\uff09\uff0c\u6211\u4eec\u5728node73,node74,node75\u8fd9\u4e09\u4e2a\u8282\u70b9\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh start journalnode\n</code></pre> <p>\u2462\u5728\u4e3bnamenode\u8282\u70b9\u683c\u5f0f\u5316namenode\u548cjournalnode\u76ee\u5f55\uff0c\u8fd9\u91cc\u6211\u4eec\u5bf9node73\u505a\u64cd\u4f5c\u3002</p> Bash<pre><code>hdfs namenode -format ns\n</code></pre> <p>\u2463\u5728\u4e3bnamenode\u8282\u70b9\u542f\u52a8namenode\u8fdb\u7a0b\uff0c\u8fd9\u91cc\u5bf9node73\u505a\u64cd\u4f5c\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh start namenode\n</code></pre> <p>\u2464\u5728\u5907namenode\u8282\u70b9\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u5728node74\u505a\u64cd\u4f5c\u3002</p> Bash<pre><code># \u628a\u5907namenode\u8282\u70b9\u7684\u76ee\u5f55\u683c\u5f0f\u5316\u5e76\u628a\u5143\u6570\u636e\u4ece\u4e3bnamenode\u8282\u70b9copy\u8fc7\u6765\uff0c\u5e76\u4e14\u8fd9\u4e2a\u547d\u4ee4\u4e0d\u4f1a\u628ajournalnode\u76ee\u5f55\u518d\u683c\u5f0f\u5316\u4e86\uff01\nhdfs namenode -bootstrapStandby\n# \u542f\u52a8\u5907namenode\u8fdb\u7a0b\n${HADOOP_HOME}/sbin/hadoop-daemon.sh start namenode\n</code></pre> <p>\u2465\u5728\u4e24\u4e2anamenode\u8282\u70b9\u90fd\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u542f\u52a8zkfc\uff08\u8fdb\u7a0b\u540d\u4e3aDFSZKFailoverController\uff09\uff0c\u5728node73,node74\u4e24\u4e2a\u8282\u70b9\u505a\u64cd\u4f5c\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh start zkfc\n</code></pre> <p>\u2466\u5728\u6240\u6709datanode\u8282\u70b9\u90fd\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8datanode\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh start datanode\n</code></pre> <p>\u2467\u914d\u7f6e\u5b8cHA\u4e4b\u540e\u53ef\u4ee5\u4e0b\u67e5\u770b\u4e0b\u4e24\u53f0NameNode\u7684\u72b6\u6001\u662f\u5426\u6b63\u5e38\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> Bash<pre><code>[demouser@node73 flink-1.15.3]$ hdfs haadmin -getServiceState nn1\nstandby\n[demouser@node73 flink-1.15.3]$ hdfs haadmin -getServiceState nn2\nactive\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#hdfs","title":"HDFS\u8fd0\u7ef4\u547d\u4ee4","text":"<p>\uff081\uff09\u542f\u505c\u5b58\u50a8\u7ba1\u7406\u8fdb\u7a0b\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh stop datanode\n${HADOOP_HOME}/sbin/hadoop-daemon.sh start datanode\n</code></pre> <p>\uff082\uff09\u542f\u505c\u5143\u6570\u636e\u7ba1\u7406\u8fdb\u7a0b\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh stop namenode\n${HADOOP_HOME}/sbin/hadoop-daemon.sh start namenode\n</code></pre> <p>\uff083\uff09\u542f\u505cHDFS\u96c6\u7fa4\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/stop-dfs.sh\n${HADOOP_HOME}/sbin/start-dfs.sh\n</code></pre> <p>\uff084\uff09\u67e5\u770bHDFS HA NameNode\u72b6\u6001\u3002</p> Bash<pre><code>hdfs haadmin -getServiceState nn1\nhdfs haadmin -getServiceState nn2\n</code></pre> <p>\uff085\uff09\u67e5\u770bNameNode\u65e5\u5fd7\u3002</p> Bash<pre><code>tail -1000f ${HADOOP_HOME}/logs/hadoop-xxx-namenode-xxx.log\n</code></pre> <p>\uff086\uff09\u67e5\u770bDataNode\u65e5\u5fd7\u3002</p> Bash<pre><code>tail -1000f ${HADOOP_HOME}/logs/hadoop-xxx-datanode-xxx.log\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/","title":"Java\u73af\u5883\u5b89\u88c5","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#java","title":"Java\u73af\u5883\u90e8\u7f72","text":"<p>\u4f7f\u7528JDK\u4e3a\u5e73\u53f0\u7684\u8fd0\u884c\u63d0\u4f9bJava\u670d\u52a1\u8fd0\u884c\u73af\u5883\uff0cJDK\u5168\u79f0Java SE Development kit(JDK)\uff0c\u5373Java\u6807\u51c6\u7248\u5f00\u53d1\u5305\uff0c\u662fOracle\u63d0\u4f9b\u7684\u4e00\u5957\u7528\u4e8e\u5f00\u53d1Java\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u5305\uff0c\u5b83\u63d0\u4f9b\u7f16\u8bd1\uff0c\u8fd0\u884cJava\u7a0b\u5e8f\u6240\u9700\u8981\u7684\u5404\u79cd\u5de5\u5177\u548c\u8d44\u6e90\uff0c\u5305\u62ecjava\u7f16\u8bd1\u5668\uff0cJava\u8fd0\u884c\u65f6\u73af\u5883\uff0c\u4ee5\u53ca\u5e38\u7528\u7684Java\u7c7b\u5e93\u7b49\u3002\u5728\u672c\u5e73\u53f0\u4e2d\u7f51\u5173\u670d\u52a1\u3001\u7528\u6237\u7ba1\u7406\u670d\u52a1\u3001\u6743\u9650\u8ba4\u8bc1\u670d\u52a1\u4ee5\u53ca\u6570\u636e\u7ba1\u7406\u670d\u52a1\u662f\u57fa\u4e8eJava\u8bed\u8a00\u5f00\u53d1\u7684\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"<ul> <li>192.168.21.71-&gt;node71</li> <li>192.168.21.72-&gt;node72</li> <li>192.168.21.73-&gt;node73</li> <li>192.168.21.74-&gt;node74</li> <li>192.168.21.75-&gt;node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.71~192.168.21.75 JDK\u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/jdk1.8.0_201.tar.gz JDK\u5b89\u88c5\u76ee\u5f55 /data/workspace/jdk1.8.0_201","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#_2","title":"\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step1","title":"step1: \u89e3\u538b\u6587\u4ef6\u5230\u6307\u5b9a\u76ee\u5f55","text":"Bash<pre><code>sudo tar -zxvf /data/software/jdk1.8.0_201.tar.gz -C /data/workspace\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step2","title":"step2: \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":"<p>\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u4e8e/etc/profile</p> Bash<pre><code>vim /etc/profile\n</code></pre> <p>\u914d\u7f6e\u5982\u4e0b\u5185\u5bb9:</p> Bash<pre><code># JDK1.8\nexport JAVA_HOME=/data/workspace/jdk1.8.0_201\nexport PATH=$PATH:$JAVA_HOME/bin\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step3","title":"step3: \u914d\u7f6e\u751f\u6548","text":"Bash<pre><code>source /etc/profile\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step4","title":"step4: \u9a8c\u8bc1","text":"Bash<pre><code>java -version\n\njava version \"1.8.0_201\"\nJava(TM) SE Runtime Environment (build 1.8.0_201-b09)\nJava HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode)\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step5-jdk","title":"step5: \u5c06JDK\u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5404\u670d\u52a1\u5668\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/jdk1.8.0_201 root@node71:/data/workspace/\nsudo scp -r /data/workspace/jdk1.8.0_201 root@node72:/data/workspace/\nsudo scp -r /data/workspace/jdk1.8.0_201 root@node73:/data/workspace/\nsudo scp -r /data/workspace/jdk1.8.0_201 root@node74:/data/workspace/\nsudo scp -r /data/workspace/jdk1.8.0_201 root@node75:/data/workspace/\n\n# \u5206\u522b\u8fdb\u5165\u5404\u670d\u52a1\u5668\u8282\u70b9\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim /etc/profile\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport JAVA_HOME=/data/workspace/jdk1.8.0_201\nexport PATH=$PATH:$JAVA_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource /etc/profile\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/","title":"kafka\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#kafka","title":"Kafka","text":"<p>Kafka\u4f5c\u4e3a\u5206\u5e03\u5f0f\u6d88\u606f\u961f\u5217\u4e3b\u8981\u670d\u52a1\u4e8e\u5b9e\u65f6\u6d41\u8ba1\u7b97\u573a\u666f\uff0c\u5728\u672c\u7cfb\u7edf\u4e2d\u4e3b\u8981\u7528\u4e8e\u6d4b\u8bd5\u6a21\u62df\u751f\u4ea7\u73af\u5883\u8fd0\u884c\u6a21\u578b\uff0c\u540e\u7eed\u987b\u5bf9\u63a5\u751f\u4ea7\u73af\u5883\u7684Kakfa\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"<ul> <li>192.168.21.73 -&gt; node73</li> <li>192.168.21.74 -&gt; node74</li> <li>192.168.21.75 -&gt; node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 kafka\u4ee3\u7406\u8282\u70b9 192.168.21.73 zookeeper\u8282\u70b9 192.168.21.73-192.168.21.75 kafka\u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/kafka_2.12-2.1.1.tgz kafka\u8fd0\u884c\u76ee\u5f55 /data/workspace/kafka_2.12-2.1.1 kafka\u6570\u636e\u76ee\u5f55 /data/workspace/kafka_2.12-2.1.1/kafka-logs \u542f\u505c\u72b6\u6001\u7ef4\u62a4\u811a\u672c $KAFKA_HOME/bin/kafka-server.sh","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#kafka_1","title":"Kafka\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#step1","title":"step1: \u89e3\u538b\u5b89\u88c5\u5305","text":"Bash<pre><code>sudo tar -zxvf /data/software/kafka_2.12-2.1.1.tgz -C /data/workspace\nsudo chown -R demouser:demouser /data/workspace/kafka_2.12-2.1.1/\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#step2-flink","title":"step2: \u914d\u7f6e Flink \u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u200b     \u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># FLINK\nexport KAFKA_HOME=/data/workspace/kafka_2.12-2.1.1\nexport PATH=$PATH:$KAFKA_HOME/bin\n</code></pre> <p>\u200b     \u751f\u6548\u914d\u7f6e\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#step3-serverproperties","title":"step3: \u914d\u7f6eserver.properties\u6587\u4ef6","text":"<p>\u5728${KAFKA_HOME}/config\u8def\u5f84\u4e0b\u914d\u7f6eserver.properties\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Properties<pre><code># The id of the broker. This must be set to a unique integer for each broker.\nbroker.id=0\n\n############################# Socket Server Settings #############################\n\n# The address the socket server listens on. It will get the value returned from \n# java.net.InetAddress.getCanonicalHostName() if not configured.\n#   FORMAT:\n#     listeners = listener_name://host_name:port\n#   EXAMPLE:\n#     listeners = PLAINTEXT://your.host.name:9092\nlisteners=PLAINTEXT://node73:9092\n\n# Hostname and port the broker will advertise to producers and consumers. If not set, \n# it uses the value for \"listeners\" if configured.  Otherwise, it will use the value\n# returned from java.net.InetAddress.getCanonicalHostName().\n#advertised.listeners=PLAINTEXT://your.host.name:9092\n\n# Maps listener names to security protocols, the default is for them to be the same. See the config documentation for more details\n#listener.security.protocol.map=PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL\n\n# The number of threads that the server uses for receiving requests from the network and sending responses to the network\nnum.network.threads=3\n\n# The number of threads that the server uses for processing requests, which may include disk I/O\nnum.io.threads=8\n\n# The send buffer (SO_SNDBUF) used by the socket server\nsocket.send.buffer.bytes=102400\n\n# The receive buffer (SO_RCVBUF) used by the socket server\nsocket.receive.buffer.bytes=102400\n\n# The maximum size of a request that the socket server will accept (protection against OOM)\nsocket.request.max.bytes=104857600\n\n\n############################# Log Basics #############################\n\n# A comma separated list of directories under which to store log files\nlog.dirs=/data/workspace/kafka_2.12-2.1.1/kafka-logs\n\n# The default number of log partitions per topic. More partitions allow greater\n# parallelism for consumption, but this will also result in more files across\n# the brokers.\nnum.partitions=1\n\n# The number of threads per data directory to be used for log recovery at startup and flushing at shutdown.\n# This value is recommended to be increased for installations with data dirs located in RAID array.\nnum.recovery.threads.per.data.dir=1\n\n############################# Internal Topic Settings  #############################\n# The replication factor for the group metadata internal topics \"__consumer_offsets\" and \"__transaction_state\"\n# For anything other than development testing, a value greater than 1 is recommended for to ensure availability such as 3.\noffsets.topic.replication.factor=1\ntransaction.state.log.replication.factor=1\ntransaction.state.log.min.isr=1\n\n############################# Log Flush Policy #############################\n\n# Messages are immediately written to the filesystem but by default we only fsync() to sync\n# the OS cache lazily. The following configurations control the flush of data to disk.\n# There are a few important trade-offs here:\n#    1. Durability: Unflushed data may be lost if you are not using replication.\n#    2. Latency: Very large flush intervals may lead to latency spikes when the flush does occur as there will be a lot of data to flush.\n#    3. Throughput: The flush is generally the most expensive operation, and a small flush interval may lead to excessive seeks.\n# The settings below allow one to configure the flush policy to flush data after a period of time or\n# every N messages (or both). This can be done globally and overridden on a per-topic basis.\n\n# The number of messages to accept before forcing a flush of data to disk\n#log.flush.interval.messages=10000\n\n# The maximum amount of time a message can sit in a log before we force a flush\n#log.flush.interval.ms=1000\n\n############################# Log Retention Policy #############################\n\n# The following configurations control the disposal of log segments. The policy can\n# be set to delete segments after a period of time, or after a given size has accumulated.\n# A segment will be deleted whenever *either* of these criteria are met. Deletion always happens\n# from the end of the log.\n\n# The minimum age of a log file to be eligible for deletion due to age\nlog.retention.hours=168\n\n# A size-based retention policy for logs. Segments are pruned from the log unless the remaining\n# segments drop below log.retention.bytes. Functions independently of log.retention.hours.\n#log.retention.bytes=1073741824\n\n# The maximum size of a log segment file. When this size is reached a new log segment will be created.\nlog.segment.bytes=1073741824\n\n# The interval at which log segments are checked to see if they can be deleted according\n# to the retention policies\nlog.retention.check.interval.ms=300000\n\n############################# Zookeeper #############################\n\n# Zookeeper connection string (see zookeeper docs for details).\n# This is a comma separated host:port pairs, each corresponding to a zk\n# server. e.g. \"127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002\".\n# You can also append an optional chroot string to the urls to specify the\n# root directory for all kafka znodes.\nzookeeper.connect=node73:2181,node74:2181,node75:2181/kafka-2.1.1\n\n# Timeout in ms for connecting to zookeeper\nzookeeper.connection.timeout.ms=6000\n\n\n############################# Group Coordinator Settings #############################\n\n# The following configuration specifies the time, in milliseconds, that the GroupCoordinator will delay the initial consumer rebalance.\n# The rebalance will be further delayed by the value of group.initial.rebalance.delay.ms as new members join the group, up to a maximum of max.poll.interval.ms.\n# The default value for this is 3 seconds.\n# We override this to 0 here as it makes for a better out-of-the-box experience for development and testing.\n# However, in production environments the default value of 3 seconds is more suitable as this will help to avoid unnecessary, and potentially expensive, rebalances during application startup.\ngroup.initial.rebalance.delay.ms=0\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#step4","title":"step4\uff1a\u8fd0\u7ef4\u7ba1\u7406","text":"<p>\u4f8b\u5982\u521b\u5efa\u4e00\u4e2a\u540d\u79f0\u4e3at1\u7684\u4e3b\u9898\uff0c\u540c\u65f6\u6307\u5b9a1\u4e2a\u5206\u533a\u548c1\u4e2a\u526f\u672c\u3002</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-topics.sh --create \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1 \\\n--replication-factor 1 \\\n--partitions 1 \\\n--topic t1\n</code></pre> <p>\u200b       \u3010\u6ce8\u610f\u3011\u8fd9\u91cc\u7684--zookeeper\u5fc5\u987b\u5bf9\u5e94$KAFKA_HOME/config/server.properties\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684zookeeper.connect\u53c2\u6570\u6240\u5bf9\u5e94\u7684\u503c\uff0c\u5bb9\u6613\u51fa\u9519\u7684\u5730\u65b9\u5728\u4e8e\u5982\u679c\u914d\u7f6e\u4e86kafka\u6ce8\u518c\u5230\u8282\u70b9znode\uff0c\u90a3\u4e48\u5728\u901a\u8fc7kafka-topics.sh\u64cd\u4f5c\u4e3b\u9898\u65f6--zookeeper\u53c2\u6570\u4e5f\u5fc5\u987b\u9644\u5e26\u4e0a\u8fd9\u4e2aznode\uff0c\u5426\u5219\u4f1a\u6709\u5982\u4e0b\u5f02\u5e38\uff1a</p> Bash<pre><code>ERROR org.apache.kafka.common.errors.InvalidReplicationFactorException: Replication factor: 1 larger than available brokers: 0.\n (kafka.admin.TopicCommand$)\n</code></pre> <p>\u67e5\u770b\u4e3b\u9898</p> <p>\u3010\u67e5\u770b\u5355\u4e2a\u4e3b\u9898\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-topics.sh --describe \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1 \\\n--topic t1\nTopic:t1        PartitionCount:1        ReplicationFactor:1     Configs:\n        Topic: t1       Partition: 0    Leader: 2       Replicas: 2     Isr: 2\n</code></pre> <p>\u3010\u5217\u51fa\u6240\u6709\u4e3b\u9898\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-topics.sh --list \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1\nt1\n</code></pre> <p>\u5220\u9664\u4e3b\u9898</p> <p>\u3010\u65b9\u5f0f\u4e00\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-run-class.sh kafka.admin.TopicCommand --delete \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1 \\\n--topic t1\nTopic t1 is marked for deletion.\nNote: This will have no impact if delete.topic.enable is not set to true.\n</code></pre> <p>\u3010\u65b9\u5f0f\u4e8c\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-topics.sh --delete \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1 \\\n--topic t1\n</code></pre> <p>\u751f\u4ea7\u6d88\u606f</p> <p>\u3010\u4f7f\u7528\u5185\u90e8\u7f51\u5361\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-console-producer.sh \\\n--broker-list node73:9092 \\\n--topic t1\n</code></pre> <p>\u3010\u4f7f\u7528\u5916\u90e8\u7f51\u5361\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-console-producer.sh \\\n--broker-list node73:9092 \\\n--topic t1\n</code></pre> <p>\u6d88\u8d39\u6d88\u606f</p> <p>\u3010\u4f7f\u7528\u5185\u90e8\u7f51\u5361\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-console-consumer.sh \\\n--bootstrap-server node73:9092 \\\n--topic t1 \\\n--from-beginning\n</code></pre> <p>\u3010\u4f7f\u7528\u5916\u90e8\u7f51\u5361\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-console-consumer.sh \\\n--bootstrap-server node73:9092 \\\n--topic t1 \\\n--from-beginning\n</code></pre> <p>\u67e5\u770b\u6d88\u8d39\u8005\u7ec4</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-consumer-groups.sh \\\n--bootstrap-server node73:9092 \\\n--list\n</code></pre> <p>\u67e5\u770b\u6d88\u8d39\u8005\u7ec4\u8be6\u7ec6\u6d88\u8d39\u60c5\u51b5</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-consumer-groups.sh \\\n--bootstrap-server node73:9092 \\\n--group console-consumer-51788 \\\n--describe\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/","title":"Mongodb\u7684\u5b89\u88c5\u6307\u5357","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_1","title":"\u5b89\u88c5\u8bf4\u660e","text":"<ul> <li>\u57fa\u4e8eLinux7.8\u5b89\u88c5</li> <li>\u7248\u672c\uff1a\u793e\u533a\u7248\uff1amongodb-linux-x86_64-rhel70-5.0.9</li> <li>\u6570\u636e\u76ee\u5f55\uff1a/usr/local/mongodb/data/</li> <li>\u914d\u7f6e\u6587\u4ef6\uff1a/usr/local/mongodb/conf/mongodb.conf</li> <li>\u65e5\u5fd7\u6587\u4ef6:  /usr/local/mongodb/logs/mongodb.log</li> </ul> <p>\u5b98\u7f51\u5b89\u88c5\u94fe\u63a5\uff1ahttps://www.mongodb.com/docs/manual/administration/install-on-linux/</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_2","title":"\u5b89\u88c5\u6307\u5357","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_3","title":"\u5355\u673a\u90e8\u7f72","text":"<ol> <li>\u4e0b\u8f7d\u5b89\u88c5mongodb <p>\u767e\u5ea6\u7f51\u76d8\u4e0b\u8f7d\u5730\u5740\uff1a\u94fe\u63a5\uff1ahttps://pan.baidu.com/s/1QTrVmX8xSNHMaxyXwMiGZQ?pwd=fb9g  \u63d0\u53d6\u7801\uff1afb9g  --\u6765\u81ea\u767e\u5ea6\u7f51\u76d8\u8d85\u7ea7\u4f1a\u5458V7\u7684\u5206\u4eab</p> </li> </ol> Bash<pre><code>cd /data/software\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-5.0.9.tgz\n\nmkdir -p /usr/local/mongodb\ntar -zxvf mongodb-linux-x86_64-rhel70-5.0.9.tgz -C /usr/local/mongodb\n</code></pre> <ol> <li>\u6dfb\u52a0\u73af\u5883\u53d8\u91cf Bash<pre><code>vim /etc/profile\n\nexport PATH=/usr/local/mongodb/bin:$PATH\n\nsource /etc/profile\n</code></pre></li> </ol> <p>3.\u521b\u5efa\u6570\u636e\u3001\u65e5\u5fd7\u3001\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 Bash<pre><code>mkdir -p /usr/local/mongodb/data\nmkdir -p /usr/local/mongodb/logs\nmkdir -p /usr/local/mongodb/conf\n</code></pre></p> <p>4.\u7f16\u5199\u914d\u7f6e\u6587\u4ef6 Bash<pre><code>cd /usr/local/mongodb/conf\nvim mongodb.conf\n\nbind_ip = 192.168.146.38\nport = 27017\n#\u540e\u53f0\u8fd0\u884c\nfork = true\n## \u6570\u636e\u76ee\u5f55\ndbpath=/usr/local/mongodb/data/mongodb\n## \u65e5\u5fd7\u8def\u5f84\nlogpath=/usr/local/mongodb/data/logs/mongod.log\n## is log Rotate mongoDB 3.0\nlogappend = true\n#logRotate = true\n## \u5f00\u542f\u65e5\u5fd7\njournal = true\n## \u4f7f\u7528\u5c0f\u6587\u4ef6\u8fdb\u884c\u5f00\u53d1\nsmallfiles = true\n5. \u542f\u52a8\u6d4b\u8bd5\nmongod --config /usr/local/mongodb/conf/mongodb.conf\n# &gt;&gt;&gt;logs\nabout to fork child process, waiting until server is ready for connections.\nforked process: 17802\nchild process started successfully, parent exiting\n6.\u67e5\u770b\u8fdb\u7a0b\nnetstat -unltp | grep mongo\n# \u6216\nnetstat -lanp | grep \"27017\"\n</code></pre></p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_4","title":"\u6269\u5c55","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_5","title":"\u521b\u5efa\u7ba1\u7406\u5458","text":"<p>\u25cf mongo Bash<pre><code>-- \u8fdb\u5165\u7ba1\u7406\u6570\u636e\u5e93\nuse admin;\n-- \u521b\u5efa\u7ba1\u7406\u5458, \u8bbe\u7f6e\u9a8c\u8bc1\ndb.createUser({user:'admin',pwd:'123456', roles:[{role:'dbAdminAnyDatabase',db:'admin'},{role:'root',db:'admin'}]})\n</code></pre></p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_6","title":"\u521b\u5efa\u975e\u7ba1\u7406\u5458","text":"<p>\u25cf mongo Bash<pre><code>-- \u8fdb\u5165\u7528\u6237\u6570\u636e\u5e93\nuser test;\n-- \u521b\u5efa\u7528\u6237\ndb.createUser(\n    {\n        user: \"test\",\n        pwd: \"123456\",\n\n        roles: [{ \"role\": \"readWrite\", \"db\": \"test\" }, { \"role\": \"dbAdmin\", \"db\": \"test\" }],\n        \"mechanisms\": [\n            \"SCRAM-SHA-1\",\n            \"SCRAM-SHA-256\"\n        ]\n    }\n)\n</code></pre></p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/","title":"Nginx\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/#_1","title":"\u90e8\u7f72\u8bf4\u660e\uff1a","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.71 \u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/nginx-1.22.1.tar.gz \u5b89\u88c5\u76ee\u5f55 /data/workspace/nginx \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 /data/workspace/nginx/conf/nginx.conf\uff1b /data/workspace/nginx/conf/subconf/frontend-wl.conf","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/#_2","title":"\u90e8\u7f72\u6307\u5357","text":"<ul> <li> <p>\u4f9d\u8d56\u5e93\u5b89\u88c5\uff08\u5b89\u88c5\u524d\u68c0\u67e5\u5f53\u524d\u670d\u52a1\u5668\u662f\u5426\u6709\u4e0b\u5217\u5e93\uff0c\u82e5\u6709\u8df3\u8fc7\u6b64\u6b65\u9aa4\uff09 Bash<pre><code>sudo yum -y install gcc gcc-c++   # \u5b89\u88c5 gcc\u73af\u5883,nginx \u7f16\u8bd1\u65f6\u4f9d\u8d56 gcc \u73af\u5883 \nsudo yum -y install pcre pcre-devel  # \u5b89\u88c5 pcre,\u8ba9nginx\u652f\u6301\u91cd\u5199\u529f\u80fd\nsudo yum -y install zlib zlib-devel # \u5b89\u88c5 zlib,zlib \u5e93\u63d0\u4f9b\u4e86\u5f88\u591a\u538b\u7f29\u548c\u89e3\u538b\u7f29\u7684\u65b9\u5f0f\uff0cnginx \u4f7f\u7528 zlib \u5bf9 http \u5305\u5185\u5bb9\u8fdb\u884c gzip \u538b\u7f29 \nsudo yum -y install openssl openssl-devel # \u5b89\u88c5 openssl,\u5b89\u5168\u5957\u63a5\u5b57\u5c42\u5bc6\u7801\u5e93\uff0c\u7528\u4e8e\u901a\u4fe1\u52a0\u5bc6\n\n# \u4e0a\u8ff0\u56db\u6761\u547d\u4ee4\u53ef\u5408\u5e76\u6267\u884c\nsudo yum -y install gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel\n</code></pre></p> </li> <li> <p>Nginx\u5b89\u88c5</p> <ul> <li>\u6682\u65f6\u672a\u914d\u7f6e\u5f00\u673a\u542f\u52a8\uff0c\u82e5\u670d\u52a1\u5668\u91cd\u542f\u540e\u9700\u8981\u624b\u52a8\u542f\u52a8nginx Bash<pre><code># \u4e0b\u8f7d\u5b89\u88c5\u5305\nwget http://nginx.org/download/nginx-1.22.1.tar.gz\n\n# step1:\u8fdb\u5165Nginx\u5b89\u88c5\u5305\u8def\u5f84\uff0c\u6267\u884c\u4e0b\u8ff0\u547d\u4ee4\u8fdb\u884c\u89e3\u538b\ntar -xzvf nginx-1.22.1.tar.gz -C /data/workspace\n\nmv nginx-1.21.6 nginx \n\n# step2:\u6267\u884c\u7f16\u8bd1\n./configure --prefix=/data/workspace/nginx\nmake &amp;&amp; make install\n\n# step4:\u6253\u5f00\u73af\u5883\u53d8\u91cf\u6587\u4ef6\nvim /etc/profile\n\n# step5: \u6dfb\u52a0nginx\u73af\u5883\u53d8\u91cf\uff0c\u5e76\u4fdd\u5b58\u9000\u51fa\nexport NGINX_HOME= /data/workspace/nginx  ###\u4e3anginx\u5b89\u88c5\u76ee\u5f55\nexport PATH=$PATH:$NGINX_HOME/sbin\n\n# step6:\u91cd\u8f7d\u73af\u5883\u53d8\u91cf\u6587\u4ef6\nsource /etc/profile\n\n#step7\uff1a\u542f\u52a8nginx\nnginx\n\n#step8\uff1a \u67e5\u770b\u662f\u5426\u6b63\u5e38\u542f\u52a8\uff08\u6b64\u5904\u4f7f\u7528\u67e5\u770bnginx\u8fdb\u7a0b\u53f7\u7684\u65b9\u5f0f\uff09\nps axu | grep nginx\n</code></pre></li> </ul> </li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/#_3","title":"\u914d\u7f6e\u5f00\u673a\u542f\u52a8","text":"Bash<pre><code>vim /usr/lib/systemd/system/nginx.service\n\n[Unit]\nDescription=nginx\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/data/workspace/nginx/sbin/nginx\nExecReload=/data/workspace/nginx/sbin/nginx -s reload\nExecStop=/data/workspace/nginx/sbin/nginx -s quit\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/#_4","title":"\u5e38\u7528\u547d\u4ee4","text":"Bash<pre><code># \u8bbe\u7f6e\u5f00\u673a\u542f\u52a8\nsystemctl enable nginx\n# \u67e5\u770b\u72b6\u6001\nsystemctl status nginx\n# \u542f\u52a8\u670d\u52a1\nsystemctl start nginx\n# \u505c\u6b62\nsystemctl stop nginx\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/postgresql/","title":"PostgreSQL\u4e3b\u4ece\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/postgresql/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.77\uff08\u4e3b\uff09, 192.168.21.78\uff08\u4ece\uff09 \u670d\u52a1\u7aef\u53e3\u53f7 5432 \u8fd0\u884c\u76ee\u5f55 /data/workspace/postgres \u6570\u636e\u6587\u4ef6\u4f4d\u7f6e /data/workspace/postgres/data","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/postgresql/#_2","title":"\u90e8\u7f72\u6307\u5357","text":"Bash<pre><code># step1.\u5b89\u88c5\u4f9d\u8d56\u5305\n#\u5b89\u88c5\u524d\u5fc5\u987b\u8981\u4fdd\u8bc1gcc\u7f16\u8bd1\u5668\u5df2\u7ecf\u5b89\u88c5\u597d\u3002\u53ef\u4ee5\u4f7f\u7528rpm -qa gcc\u68c0\u67e5\u3002\nyum install gcc make openssl zlib-devel -y\n\n# step2.\u89e3\u538b\u5b89\u88c5\u5305\n#\u89e3\u538b\u5230/data/software/postgres\ntar -xzvf postgresql-12.2.tar.gz -C /data/software\n\n# step3.\u7f16\u8bd1\u5e76\u5b89\u88c5\ncd /data/software/postgresql-12.2\n./configure --prefix=/data/workspace/postgres/data --without-readline\n\n# step4.\u5b89\u88c5\nmake &amp;&amp; make install\n\n# step5.\u521b\u5efapostgres\u7528\u6237\nuseradd postgres\npasswd postgres\n\n# step6.\u521b\u5efa\u76ee\u5f55\u548clog\nmkdir -p /data/workspace/postgres/data\nmkdir -p /data/workspace/postgres/log\nchown -R postgres:postgres /data/workspace/postgres/\n\n#\u767b\u9646\u4e00\u4e0b\uff0c\u8ba9\u7cfb\u7edf\u521b\u5efa\u5bb6\u76ee\u5f55\nsu - postgres\n\n# \u914d\u7f6e\u73af\u5883\u53d8\u91cf\nvim .bash_profile\nexport PGHOME=/data/workspace/postgres\nexport PATH=$PATH:$PGHOME/bin\n\nsource .bash_profile\n\n# step7.\u521d\u59cb\u5316\u6570\u636e\u5e93\npostgres\u521d\u59cb\u5316\u7f16\u7801\u6307\u5b9a\u4e2d\u6587\n\u5728postgres\u7528\u6237\u4e0b\u4f7f\u7528\ninitdb -D /data/workspace/postgres -E UTF8 --locale=zh_CN.UTF-8 -U postgres -W\n\nData page checksums are disabled.\n\nEnter new superuser password: postgres\nEnter it again: postgres\n\n# setp8.\u542f\u52a8\npg_ctl -D /data/workspace/postgres/data -l logfile start\n\n\n# set9.\u4e3b\u4ece\u8bbe\u7f6e\n\n################################# \u4e3b\u5e93\u914d\u7f6e ######################################\n# \u8fdb\u5165psql\npsql -U postgres postgres\n# \u521b\u5efa\u7528\u6237\nceate user replica with replication login password 'replication'; \nalter user replica with password 'replication';\n# \u4fee\u6539pg_hba.conf\nvim /data/workspace/postgres/data/pg_hba.conf\n# ------------------------- pg_hba.conf\u4fee\u6539\u5185\u5bb9 -------------------------\nhost  all          all      0.0.0.0/0    trust\nhost  replication  replica 0.0.0.0/0  md5 \nhost    replication     replica         0.0.0.0/0            trust \n# ------------------------- \u7ed3\u675f -------------------------\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\nvim /data/workspace/postgres/data/postgresql.conf\n#-------------------------- \u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u5185\u5bb9 --------------------------\nlisten_addresses = '*'\n# \u8bbe\u7f6e\u4e3bpgsql\u4e3a\u751f\u6210wal\u7684\u4e3b\u673a\uff0c9.6\u5f00\u59cb\u6ca1\u6709hot_standby\uff08\u70ed\u5907\u6a21\u5f0f\uff09 \nwal_level = replica \n\n# \u5f00\u542f\u8fde\u7eed\u5f52\u6863 \narchive_mode = on \n#\u5f52\u6863\u547d\u4ee4\u3002-o \"StrictHostKeyChecking no\" \u4f5c\u7528\u662f\u53d6\u6d88\u7b2c\u4e00\u6b21\u8fde\u63a5\u8f93\u5165yes\u6216\u8005no \narchive_command = 'scp -o \"StrictHostKeyChecking no\" %p postgres@192.168.21.78:/data/workspace/postgres/data/archive/%f' \n# archive_command = 'test ! -f /data/postgresql-12/archive/%f &amp;&amp; scp %p pgslave.ayunw.cn:/data/postgresql-12/archive/%f' \narchive_cleanup_command = '/opt/postgresql-12.12/bin/pg_archivecleanup -d /data/postgresql-12.12/data/pg_wal %r &gt;&gt; /data/postgresql-12.12/data/pg_log/archive_cleanup.log 2&gt;&amp;1' \n# \u6700\u591a\u670916\u4e2a\u6d41\u590d\u5236\u8fde\u63a5\u3002 \nmax_wal_senders = 20 \n# \u8bbe\u7f6e\u6d41\u670d\u52a1\u4fdd\u7559\u7684\u6700\u591awal(\u8001\u7248\u672c\u53ebxlog)\u6587\u4ef6\u4e2a\u6570 \nwal_keep_segments = 256 \n# \u6570\u636e\u5806\u6e05\u7406\u7684\u6700\u5927\u8fdb\u7a0b \nautovacuum_max_workers = 2 \nmax_worker_processes = 20 \nmax_logical_replication_workers = 10 \n# \u65e5\u5fd7\u8bbe\u7f6e \nlog_destination = 'stderr' \nlogging_collector = on \nlog_directory = 'pg_log' \nlog_filename = 'postgresql-%w.log' \nlog_file_mode = 0600 \nlog_truncate_on_rotation = on \nlog_rotation_age = 1d \nlog_rotation_size = 1GB \n\nlog_min_messages = error \n# \u6267\u884c\u8d85\u8fc7300ms\u7684sql\u8bed\u53e5\u4f1a\u8bb0\u5f55\u5230pgsql\u7684\u65e5\u5fd7\u6587\u4ef6,\u7c7b\u4f3c\u4e8e\u6162\u65e5\u5fd7 \n# \u4e00\u822c\u8bbe\u7f6e300ms\u5c31\u597d\uff0c\u6162\u65e5\u5fd7\u4f1a\u6253\u5230pgsql\u65e5\u5fd7\u6587\u4ef6\uff0c\u65b9\u4fbf\u67e5\u95ee\u9898 \nlog_min_duration_statement = 300 \nlog_checkpoints = on \nlog_connections = on \nlog_disconnections = on \nlog_error_verbosity = verbose \nlog_hostname = on \nlog_line_prefix = '%m [%p] ' \nlog_lock_waits = on  \nlog_statement = 'ddl' \n#-------------------------- \u7ed3\u675f --------------------------\n# \u521b\u5efaarchive\u76ee\u5f55\uff0c\u91cd\u542f\ncd /data/workspace/postgres/data\nmkdir acrchive\npg_ctl -D /data/workspace/postgres/data start\n\n################################# \u4ece\u5e93\u914d\u7f6e ######################################\n# \u5907\u4efd\u6570\u636e\u76ee\u5f55\nmkdir -p /data/workspace/pgsqldata_backup \nmv /data/workspace/postgres/data/* /data/workspace/pgsqldata_backup\n\n# \u4ece\u5e93\u505a\u57fa\u7840\u5907\u4efd\npg_basebackup -h 192.168.21.71 -p 5432 -U replica -W -R -Fp -Xs -Pv -D /data/workspace/postgres/data/\n# \u914d\u7f6e\u4ece\u5e93\u7684\u914d\u7f6e\u6587\u4ef6\ncd /data/workspace/postgres/data\nmv postgresql.conf postgresql.conf_master.bak\ncp /data/workspace/pgsqldata_backup/postgresql.conf /data/workspace/postgres/data\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\nvim /data/workspace/postgres/data/postgresql.conf \n#-------------------------- \u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u5185\u5bb9 --------------------------\nrestore_command = 'cp /data/workspace/postgres/data/archive/%f %p' \narchive_cleanup_command = '/data/workspace/postgres/bin/pg_archivecleanup -d /data/workspace/postgres/data/pg_wal %r &amp;&amp; /data/workspace/postgres/bin/pg_archivecleanup -d /data/workspace/postgres/data/archive %r &gt;&gt; /data/workspace/postgres/data/pg_log/archive_cleanup.log 2&gt;&amp;1' \n\n# 9.6\u5f00\u59cb\u6ca1\u6709hot_standby\uff08\u70ed\u5907\u6a21\u5f0f\uff09 \nwal_level = replica \n# \u6700\u591a\u670916\u4e2a\u6d41\u590d\u5236\u8fde\u63a5\u3002 \nmax_wal_senders = 20 \n\n# \u8bbe\u7f6e\u6bd4\u4e3b\u5e93\u5927\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a2\u500d\u7684\u6570\u503c \nwal_keep_segments = 512 \nmax_logical_replication_workers = 10 \n\nautovacuum_max_workers = 2 \n# \u548c\u4e3b\u7684\u503c\u4fdd\u6301\u4e00\u81f4\u5373\u53ef \nmax_worker_processes = 20 \n\n# \u8bf4\u660e\u8fd9\u53f0\u673a\u5668\u4e0d\u4ec5\u7528\u4e8e\u6570\u636e\u5f52\u6863\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u6570\u636e\u67e5\u8be2 \nhot_standby = on \n#\u6d41\u5907\u4efd\u7684\u6700\u5927\u5ef6\u8fdf\u65f6\u95f4 \nmax_standby_streaming_delay = 30s  \n# \u5411\u4e3b\u673a\u6c47\u62a5\u672c\u673a\u72b6\u6001\u7684\u95f4\u9694\u65f6\u95f4 \nwal_receiver_status_interval = 10s  \n# \u51fa\u73b0\u9519\u8bef\u590d\u5236\uff0c\u5411\u4e3b\u673a\u53cd\u9988 \nhot_standby_feedback = on \n\n\n# \u65e5\u5fd7\u8bbe\u7f6e \nlog_destination = 'stderr' \nlogging_collector = on \nlog_directory = 'pg_log' \nlog_filename = 'postgresql-%w.log' \nlog_file_mode = 0600 \nlog_truncate_on_rotation = on \nlog_rotation_age = 1d \nlog_rotation_size = 1GB \n\nlog_min_messages = error \n# \u6267\u884c\u8d85\u8fc7300ms\u7684sql\u8bed\u53e5\u4f1a\u88ab\u8bb0\u5f55\u5230pgsql\u7684\u65e5\u5fd7\u6587\u4ef6\u4e2d \nlog_min_duration_statement = 300 \nlog_checkpoints = on \nlog_connections = on \nlog_disconnections = on \nlog_error_verbosity = verbose \nlog_hostname = on \nlog_line_prefix = '%m [%p] ' \nlog_lock_waits = on  \nlog_statement = 'ddl' \n#-------------------------- \u7ed3\u675f --------------------------\n# \u521b\u5efaarchive\u76ee\u5f55\nmkdir archive\n# \u91cd\u542f\u670d\u52a1\npg_ctl -D /data/workspace/postgres/data restart\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/postgresql/#_3","title":"\u5e38\u7528\u547d\u4ee4","text":"Bash<pre><code># \u542f\u52a8\u6570\u636e\u5e93\u670d\u52a1\npg_ctl start\n# \u505c\u6b62\u6570\u636e\u5e93\u670d\u52a1\npg_ctl stop\n# \u91cd\u542f\u6570\u636e\u5e93\u670d\u52a1\npg_ctl restart\n# \u8fdb\u5165postgres\npsql -U postgres\n# \u9000\u51fa\n\\q\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/","title":"RabbitMQ\u4ecb\u7ecd\u548c\u4f7f\u7528","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/#1-rabbitmq","title":"1. RabbitMQ\u4ecb\u7ecd","text":"<ul> <li> <p>\u6d88\u606f\u961f\u5217\u662f\u6d88\u606f\u5728\u4f20\u8f93\u7684\u8fc7\u7a0b\u4e2d\u4fdd\u5b58\u6d88\u606f\u7684\u5bb9\u5668\u3002</p> </li> <li> <p>\u73b0\u5728\u4e3b\u6d41\u6d88\u606f\u961f\u5217\u6709\uff1aRabbitMQ\u3001ActiveMQ\u3001Kafka\u7b49\u7b49\u3002</p> <ul> <li>RabbitMQ\u548cActiveMQ\u6bd4\u8f83<ul> <li>\u7cfb\u7edf\u541e\u5410\u91cf\uff1aRabbitMQ\u597d\u4e8eActiveMQ</li> <li>\u6301\u4e45\u5316\u6d88\u606f\uff1aRabbitMQ\u548cActiveMQ\u90fd\u652f\u6301</li> <li>\u9ad8\u5e76\u53d1\u548c\u53ef\u9760\u6027\uff1aRabbitMQ\u597d\u4e8eActiveMQ</li> </ul> </li> <li>RabbitMQ\u548cKafka\uff1a<ul> <li>\u7cfb\u7edf\u541e\u5410\u91cf\uff1aRabbitMQ\u5f31\u4e8eKafka</li> <li>\u53ef\u9760\u6027\u548c\u7a33\u5b9a\u6027\uff1aRabbitMQ\u597d\u4e8eKafka\u6bd4\u8f83</li> <li>\u8bbe\u8ba1\u521d\u8877\uff1aKafka\u662f\u5904\u7406\u65e5\u5fd7\u7684\uff0c\u662f\u65e5\u5fd7\u7cfb\u7edf\uff0c\u6240\u4ee5\u5e76\u6ca1\u6709\u5177\u5907\u4e00\u4e2a\u6210\u719fMQ\u5e94\u8be5\u5177\u5907\u7684\u7279\u6027\u3002</li> </ul> </li> </ul> </li> <li>\u7efc\u5408\u8003\u8651\uff0c\u672c\u9879\u76ee\u9009\u62e9RabbitMQ\u4f5c\u4e3a\u6d88\u606f\u961f\u5217\u3002</li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/#2-rabbitmqubuntu-1604","title":"2. \u5b89\u88c5RabbitMQ\uff08ubuntu 16.04\uff09","text":"<p>1.\u5b89\u88c5Erlang     &gt;- \u7531\u4e8e RabbitMQ \u662f\u91c7\u7528 Erlang \u7f16\u5199\u7684\uff0c\u6240\u4ee5\u9700\u8981\u5b89\u88c5 Erlang \u8bed\u8a00\u5e93\u3002</p> Python<pre><code># 1. \u5728\u7cfb\u7edf\u4e2d\u52a0\u5165 erlang apt \u4ed3\u5e93\n$ wget https://packages.erlang-solutions.com/erlang-solutions_1.0_all.deb\n$ sudo dpkg -i erlang-solutions_1.0_all.deb\n\n# 2. \u4fee\u6539 Erlang \u955c\u50cf\u5730\u5740\uff0c\u9ed8\u8ba4\u7684\u4e0b\u8f7d\u901f\u5ea6\u7279\u522b\u6162\n$ vim /etc/apt/sources.list.d/erlang-solutions.list\n# \u66ff\u6362\u9ed8\u8ba4\u503c\n$ deb https://mirrors.liuboping.com/erlang/ubuntu/ xenial contrib\n\n# 3. \u66f4\u65b0 apt \u4ed3\u5e93\u548c\u5b89\u88c5 Erlang\n$ sudo apt-get update\n$ sudo apt-get install erlang erlang-nox\n</code></pre> <p>2.\u5b89\u88c5RabbitMQ     &gt;- \u5b89\u88c5\u6210\u529f\u540e\uff0c\u9ed8\u8ba4\u5c31\u662f\u542f\u52a8\u72b6\u6001\u3002 Python<pre><code># 1. \u5148\u5728\u7cfb\u7edf\u4e2d\u52a0\u5165 rabbitmq apt \u4ed3\u5e93\uff0c\u518d\u52a0\u5165 rabbitmq signing key\n$ echo 'deb http://www.rabbitmq.com/debian/ testing main' | sudo tee /etc/apt/sources.list.d/rabbitmq.list\n$ wget -O- https://www.rabbitmq.com/rabbitmq-release-signing-key.asc | sudo apt-key add -\n\n# 2. \u66f4\u65b0 apt \u4ed3\u5e93\u548c\u5b89\u88c5 RabbitMQ\n$ sudo apt-get update\n$ sudo apt-get install rabbitmq-server\n</code></pre> Python<pre><code># \u91cd\u542f\n$ sudo systemctl restart rabbitmq-server\n# \u542f\u52a8\n$ sudo systemctl start rabbitmq-server\n# \u5173\u95ed\n$ sudo systemctl stop rabbitmq-server\n</code></pre></p> <p>3.Python\u8bbf\u95eeRabbitMQ</p> <ul> <li>RabbitMQ\u63d0\u4f9b\u9ed8\u8ba4\u7684administrator\u8d26\u6237\u3002</li> <li>\u7528\u6237\u540d\u548c\u5bc6\u7801\uff1aguest\u3001guest</li> <li>\u534f\u8bae\uff1aamqp</li> <li>\u5730\u5740\uff1alocalhost</li> <li>\u7aef\u53e3\uff1a5672</li> <li>\u67e5\u770b\u961f\u5217\u4e2d\u7684\u6d88\u606f\uff1asudo rabbitctl list_queues Python<pre><code># Python3\u865a\u62df\u73af\u5883\u4e0b\uff0c\u5b89\u88c5pika\n$ pip install pika\n</code></pre></li> </ul> Python<pre><code># \u751f\u4ea7\u8005\u4ee3\u7801\uff1arabbitmq_producer.py\nimport pika\n\n\n# \u94fe\u63a5\u5230RabbitMQ\u670d\u52a1\u5668\ncredentials = pika.PlainCredentials('guest', 'guest')\nconnection = pika.BlockingConnection(pika.ConnectionParameters('localhost',5672,'/',credentials))\n#\u521b\u5efa\u9891\u9053\nchannel = connection.channel()\n# \u58f0\u660e\u6d88\u606f\u961f\u5217\nchannel.queue_declare(queue='zxc')\n# routing_key\u662f\u961f\u5217\u540d body\u662f\u8981\u63d2\u5165\u7684\u5185\u5bb9\nchannel.basic_publish(exchange='', routing_key='zxc', body='Hello RabbitMQ!')\nprint(\"\u5f00\u59cb\u5411 'zxc' \u961f\u5217\u4e2d\u53d1\u5e03\u6d88\u606f 'Hello RabbitMQ!'\")\n# \u5173\u95ed\u94fe\u63a5\nconnection.close()\n</code></pre> Python<pre><code># \u6d88\u8d39\u8005\u4ee3\u7801\uff1arabbitmq_customer.py \nimport pika\n\n\n# \u94fe\u63a5\u5230rabbitmq\u670d\u52a1\u5668\ncredentials = pika.PlainCredentials('guest', 'guest')\nconnection = pika.BlockingConnection(pika.ConnectionParameters('localhost',5672,'/',credentials))\n# \u521b\u5efa\u9891\u9053\uff0c\u58f0\u660e\u6d88\u606f\u961f\u5217\nchannel = connection.channel()\nchannel.queue_declare(queue='zxc')\n# \u5b9a\u4e49\u63a5\u53d7\u6d88\u606f\u7684\u56de\u8c03\u51fd\u6570\ndef callback(ch, method, properties, body):\n    print(body)\n# \u544a\u8bc9RabbitMQ\u4f7f\u7528callback\u6765\u63a5\u6536\u4fe1\u606f\nchannel.basic_consume(callback, queue='zxc', no_ack=True)\n# \u5f00\u59cb\u63a5\u6536\u4fe1\u606f\nchannel.start_consuming()\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/#3-administrator","title":"3. \u65b0\u5efaadministrator\u7528\u6237","text":"Python<pre><code># \u65b0\u5efa\u7528\u6237\uff0c\u5e76\u8bbe\u7f6e\u5bc6\u7801\n$ sudo rabbitmqctl add_user admin your_password \n# \u8bbe\u7f6e\u6807\u7b7e\u4e3aadministrator\n$ sudo rabbitmqctl set_user_tags admin administrator\n# \u8bbe\u7f6e\u6240\u6709\u6743\u9650\n$ sudo rabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n# \u67e5\u770b\u7528\u6237\u5217\u8868\nsudo rabbitmqctl list_users\n# \u5220\u9664\u7528\u6237\n$ sudo rabbitmqctl delete_user admin\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/#4-rabbitmq","title":"4. RabbitMQ\u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee","text":"<p>1.\u51c6\u5907\u914d\u7f6e\u6587\u4ef6 - \u5b89\u88c5\u597d RabbitMQ \u4e4b\u540e\uff0c\u5728 /etc/rabbitmq \u76ee\u5f55\u4e0b\u9762\u9ed8\u8ba4\u6ca1\u6709\u914d\u7f6e\u6587\u4ef6\uff0c\u9700\u8981\u5355\u72ec\u4e0b\u8f7d\u3002 $ cd /etc/rabbitmq/</p> Python<pre><code>$ cd /etc/rabbitmq/\n$ wget https://raw.githubusercontent.com/rabbitmq/rabbitmq-server/master/docs/rabbitmq.config.example\n$ sudo cp rabbitmq.config.example rabbitmq.config\n</code></pre> <p>2.\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6 Python<pre><code>$ sudo vim rabbitmq.config\n\n# \u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u7ed3\u675f\u540e\uff0c\u91cd\u542fRabbitMQ\u670d\u52a1\u7aef\n$ sudo systemctl restart rabbitmq-server\n</code></pre></p> <p>\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u4f7f\u7528rabbitmq_producer.py\u3001rabbitmq_customer.py\u6d4b\u8bd5\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/","title":"Redis\u4e3b\u4ece-\u54e8\u5175\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_1","title":"\u90e8\u7f72\u8bf4\u660e\uff1a","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.71\uff08Master\uff09\u3001192.168.21.77\uff08salve\uff09\u3001192.168.21.78\uff08salve\uff09 \u90e8\u7f72\u7b56\u7565 \u4e00\u4e3b\u4e24\u4ece\uff0c\u4e3b\u4ece\u590d\u5236\u3001\u54e8\u5175\u673a\u5236\u3001\u65e0\u5bc6\u7801\u8bbf\u95ee\u7b56\u7565 \u670d\u52a1\u7aef\u53e3\u53f7 6379 \u5b89\u88c5\u5305\u76ee\u5f55 /data/software/redis-6.2.12.tar.gz \u5b89\u88c5\u90e8\u7f72\u76ee\u5f55 /data/workspace/redis-6.2.12 \u542f\u505c\u811a\u672c\u76ee\u5f55 /data/workspace/redis-6.2.12/bin/ \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 /data/workspace/redis-6.2.12/etc/redis.conf\uff1b sentinel.conf \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 /data/workspace/redis-6.2.12/bin/redis.log \uff1bsentinel.log","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_2","title":"\u90e8\u7f72\u8be6\u60c5\uff1a","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_3","title":"\u901a\u7528\u6b65\u9aa4","text":"Bash<pre><code># step1 \u4e0b\u8f7d\u5b89\u88c5\u5305\nwget https://download.redis.io/releases/redis-6.2.12.tar.gz\n\n#step2\uff1a \u6240\u6709\u8282\u70b9\u6267\u884c\ntar xvf redis-6.2.12.tar.gz\ncd redis-6.2.12 \n\n# step3: \u7f16\u8bd1\nmake\n\n# step4: \u5b89\u88c5\ncd src/\nmake install \n\n# step5: \u65b0\u5efa\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u548c\u6267\u884c\u6587\u4ef6\u76ee\u5f55\ncd /data/workspace/redis-6.2.12/\nmkdir etc \nmkdir bin \n\n# step6: \u8c03\u6574\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff0c\u4fbf\u4e8e\u7edf\u4e00\u7ba1\u7406\ncp redis.conf etc/\ncd src/\ncp mkreleasehdr.sh redis-benchmark redis-check-aof redis-cli redis-server redis-sentinel ../bin/\n\n# step6: \u542f\u52a8\u670d\u52a1\uff0c\u6d4b\u8bd5\u662f\u5426\u5b89\u88c5\u6210\u529f\ncd /data/workspace/redis-6.2.12/bin\n./redis-server /workspace/redis/redis-6.2.12/etc/redis.conf\n\n# step7: \u67e5\u770b\u662f\u5426\u542f\u52a8\uff0c\u8f93\u51faredis\u76f8\u5173\u8fdb\u7a0b\u5219\u8868\u793a\u5b89\u88c5\u6210\u529f\nps aux | grep redis\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_4","title":"\u4e3b\u4ece\u914d\u7f6e","text":"<ul> <li> <p>\u6ce8\u610freplicaof\u53c2\u6570\uff1a\u53ea\u6709\u5728\u5f53\u524d\u8282\u70b9\u4e3asalve\u8282\u70b9\u65f6\uff0c\u8bbe\u7f6e\u4e3b\u8282\u70b9\u7684IP\u548cPORT, \u82e5\u5f53\u524d\u8282\u70b9\u4e3aMaster\u8282\u70b9\u65f6\u5219\u65e0\u9700\u8bbe\u7f6e\u3002 Bash<pre><code>#step1: \u4fee\u6539redis.conf,\u4ee5\u4e0b\u4ec5\u5c55\u793a\u4fee\u6539\u540e\u7684\u5185\u5bb9\n\nbind\uff1a0.0.0.0 \nport\uff1a6379 \nprotected-mode\uff1ano \ndaemonize\uff1ayes \nlogfile\uff1a./redis.log \nreplicaof 172.16.10.71 6379\nreplica-read-only no\n\n# \u67e5\u770b\u4fee\u6539\u540e\u7684\u914d\u7f6e\n(base) [root@node71 etc]#  egrep -v \"#|^$\" redis.conf \nbind 0.0.0.0\nprotected-mode no\nport 6379\ntcp-backlog 511\ntimeout 0\ntcp-keepalive 300\ndaemonize yes\npidfile /var/run/redis_6379.pid\nloglevel notice\nlogfile ./redis.log\ndatabases 16\nalways-show-logo no\nset-proc-title yes\nproc-title-template \"{title} {listen-addr} {server-mode}\"\nstop-writes-on-bgsave-error yes\nrdbcompression yes\nrdbchecksum yes\ndbfilename dump.rdb\nrdb-del-sync-files no\ndir ./\nreplica-serve-stale-data yes\nreplica-read-only no\nrepl-diskless-sync no\nrepl-diskless-sync-delay 5\nrepl-diskless-load disabled\nrepl-disable-tcp-nodelay no\nreplica-priority 100\nacllog-max-len 128\nlazyfree-lazy-eviction no\nlazyfree-lazy-expire no\nlazyfree-lazy-server-del no\nreplica-lazy-flush no\nlazyfree-lazy-user-del no\nlazyfree-lazy-user-flush no\noom-score-adj no\noom-score-adj-values 0 200 800\ndisable-thp yes\nappendonly no\nappendfilename \"appendonly.aof\"\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\naof-load-truncated yes\naof-use-rdb-preamble yes\nlua-time-limit 5000\nslowlog-log-slower-than 10000\nslowlog-max-len 128\nlatency-monitor-threshold 0\nnotify-keyspace-events \"\"\nhash-max-ziplist-entries 512\nhash-max-ziplist-value 64\nlist-max-ziplist-size -2\nlist-compress-depth 0\nset-max-intset-entries 512\nzset-max-ziplist-entries 128\nzset-max-ziplist-value 64\nhll-sparse-max-bytes 3000\nstream-node-max-bytes 4096\nstream-node-max-entries 100\nactiverehashing yes\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\nhz 10\ndynamic-hz yes\naof-rewrite-incremental-fsync yes\nrdb-save-incremental-fsync yes\njemalloc-bg-thread yes\n</code></pre></p> </li> <li> <p>\u9a8c\u8bc1\u4e3b\u4ece Bash<pre><code># node71\u8282\u70b9\n(base) [root@node71 bin]# redis-cli\n127.0.0.1:6379&gt; select 6\nOK\n127.0.0.1:6379[6]&gt; set zhongche wulian\nOK\n127.0.0.1:6379[6]&gt; get zhongche\n\"wulian\"\n127.0.0.1:6379[6]&gt; \n\n# node77\u8282\u70b9\n(base) [root@node77 bin]# redis-cli\n127.0.0.1:6379&gt; select 6\nOK\n127.0.0.1:6379[6]&gt; get zhongche\n\"wulian\"\n\n(base) [root@node78 bin]# redis-cli\n127.0.0.1:6379&gt; select 6\nOK\n127.0.0.1:6379[6]&gt; get zhongche\n\"wulian\"\n127.0.0.1:6379[6]&gt; \n</code></pre></p> </li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_5","title":"\u54e8\u5175\u914d\u7f6e","text":"Bash<pre><code>#step1: \u4fee\u6539sentinel.conf,\u4ee5\u4e0b\u4ec5\u5c55\u793a\u4fee\u6539\u540e\u7684\u5185\u5bb9\n//\u7aef\u53e3\u9ed8\u8ba4\u4e3a26379\u3002 \nport:26379 \n//\u5173\u95ed\u4fdd\u62a4\u6a21\u5f0f\uff0c\u53ef\u4ee5\u5916\u90e8\u8bbf\u95ee\u3002 \nprotected-mode:no \n//\u8bbe\u7f6e\u4e3a\u540e\u53f0\u542f\u52a8\u3002 \ndaemonize:yes \n//\u65e5\u5fd7\u6587\u4ef6\u3002 \nlogfile:./sentinel.log \n//\u6307\u5b9a\u4e3b\u673aIP\u5730\u5740\u548c\u7aef\u53e3\uff0c\u5e76\u4e14\u6307\u5b9a\u5f53\u67092\u53f0\u54e8\u5175\u8ba4\u4e3a\u4e3b\u673a\u6302\u4e86\uff0c\u5219\u5bf9\u4e3b\u673a\u8fdb\u884c\u5bb9\u707e\u5207\u6362\u3002 \nsentinel monitor mymaster 192.168.231.130 6379 2 \n//\u5f53\u5728Redis\u5b9e\u4f8b\u4e2d\u5f00\u542f\u4e86requirepass\uff0c\u8fd9\u91cc\u5c31\u9700\u8981\u63d0\u4f9b\u5bc6\u7801\u3002 \nsentinel auth-pass mymaster pwdtest@2019 \n//\u8fd9\u91cc\u8bbe\u7f6e\u4e86\u4e3b\u673a\u591a\u5c11\u79d2\u65e0\u54cd\u5e94\uff0c\u5219\u8ba4\u4e3a\u6302\u4e86\u3002 \nsentinel down-after-milliseconds mymaster 3000 \n//\u4e3b\u5907\u5207\u6362\u65f6\uff0c\u6700\u591a\u6709\u591a\u5c11\u4e2aslave\u540c\u65f6\u5bf9\u65b0\u7684master\u8fdb\u884c\u540c\u6b65\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u76841\u3002 \nsnetinel parallel-syncs mymaster 1 \n//\u6545\u969c\u8f6c\u79fb\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u4e09\u5206\u949f\u3002 \nsentinel failover-timeout mymaster 180000 \n\n# step2:\u542f\u52a8\u4e09\u4e2a\u54e8\u5175\ncd /data/workspace/redis-6.2.12/bin\nredis-sentinel /data/workspace/redis-6.2.12/sentinel.conf\n\n# step3: \u67e5\u770b\u54e8\u5175\u4fe1\u606f\nredis-cli -p 26379 \ninfo sentinel \n#&gt;&gt;&gt;log\n(base) [root@node71 bin]# redis-cli -p 26379\n127.0.0.1:26379&gt; info sentinel\n# Sentinel\nsentinel_masters:1\nsentinel_tilt:0\nsentinel_running_scripts:0\nsentinel_scripts_queue_length:0\nsentinel_simulate_failure_flags:0\nmaster0:name=mymaster,status=ok,address=192.168.21.71:6379,slaves=2,sentinels=3\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_6","title":"\u5e38\u7528\u547d\u4ee4","text":"Bash<pre><code># \u8fdb\u5165\u5de5\u4f5c\u76ee\u5f55\ncd /data/workspace/redis-6.2.12/bin\n\n# \u542f\u52a8redis\u670d\u52a1\nredis-server /data/workspace/redis-6.2.12/etc/redis.conf\n\n# \u542f\u52a8\u54e8\u5175\u670d\u52a1\nredis-sentinel /data/workspace/redis-6.2.12/sentinel.conf\n\n# \u5173\u95ed\u670d\u52a1\u7aef\n./redis-cli shutdown\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/","title":"Spark(ON YARN\uff09\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#spark-on-yarn","title":"Spark On YARN","text":"<p>Spark\u662f\u4e00\u79cd\u901a\u7528\u7684\u5206\u5e03\u5f0f\u5927\u6570\u636e\u8ba1\u7b97\u5f15\u64ce\uff0c\u5176\u5177\u6709\u9ad8\u53ef\u9760\u6027\u3001\u9ad8\u6269\u5c55\u6027\u3001\u9ad8\u6548\u6027\u4ee5\u53ca\u9ad8\u5bb9\u9519\u6027\u7b49\u7279\u70b9\u3002Spark\u4f5c\u4e3a\u5206\u5e03\u5f0f\u8ba1\u7b97\u5f15\u64ce\u4e3b\u8981\u4e3a\u4e0a\u5c42\u670d\u52a1\u63d0\u4f9b\u66f4\u52a0\u4fbf\u5229\u6570\u636e\u64cd\u4f5c\uff0c\u8be5\u7ec4\u4ef6\u4e3b\u8981\u9002\u7528\u4e8e\u5927\u591a\u6570\u6279\u5904\u7406\u4efb\u52a1\u7684\u573a\u666f\u3002\u5728\u672c\u7cfb\u7edf\u4e2d\u4e3b\u8981\u7528\u4e8e\u652f\u6491Spark\u6a21\u578b\u7684\u8fd0\u884c\u548c\u8ba1\u7b97\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"<ul> <li>192.168.21.73 -&gt; node73</li> <li>192.168.21.74 -&gt; node74</li> <li>192.168.21.75 -&gt; node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.73-192.168.21.75 \u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/spark-3.2.3-bin-hadoop3.2.tgz \u8fd0\u884c\u76ee\u5f55 /data/workspace/spark-3.2.3-bin-hadoop3.2","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#spark","title":"Spark\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step1","title":"step1: \u89e3\u538b\u5b89\u88c5\u5305","text":"Bash<pre><code>sudo tar -zxvf /data/software/spark-3.2.3-bin-hadoop3.2.tgz -C /data/workspace\nsudo chown -R demouser:demouser /data/workspace/spark-3.2.3-bin-hadoop3.2\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step2","title":"step2: \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># Spark\nexport SPARK_HOME=/data/workspace/spark-3.2.3-bin-hadoop3.2\nexport PATH=$PATH:$SPARK_HOME/bin\n</code></pre> <p>\u200b       \u6267\u884c\u5982\u4e0b\u547d\u4ee4,\u4f7f\u914d\u7f6e\u751f\u6548\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step3","title":"step3: \u914d\u7f6e\u76f8\u5173\u6587\u4ef6","text":"<p>\u200b       \u3010spark-defaults.conf\u3011</p> Text Only<pre><code>cp $SPARK_HOME/conf/spark-defaults.conf.template $SPARK_HOME/conf/spark-defaults.conf\nvim $SPARK_HOME/conf/spark-defaults.conf\n</code></pre> Bash<pre><code>spark.master.rest.enabled        true\nspark.master.rest.port           16066\nspark.eventLog.enabled           true\nspark.eventLog.dir               hdfs://ns/spark_3.2.3/history\nspark.history.fs.logDirectory    hdfs://ns/spark_3.2.3/history\nspark.eventLog.compress         true\nspark.history.ui.port           18888\nspark.shuffle.service.enabled   true\nspark.shuffle.service.port      7337\n\n# \u4f7f\u7528yarn\u7684\u65b9\u5f0f\u63d0\u4ea4spark\u5e94\u7528\u65f6,\u914d\u7f6espark.yarn.jars\u5e76\u4e14\u4e0a\u4f20\u4e86\u7a0b\u5e8f\u6240\u6709\u7684\u4f9d\u8d56jar\u5230HDFS /spark-3.2.3_jars/ \u4e0b\u7684\u65b9\u5f0f\u66f4\u80fd\u51cf\u5c11\u8d44\u6e90\u7684\u4e0a\u4f20\nspark.yarn.jars        hdfs://ns/spark-3.2.3_jars/*\n</code></pre> <p>\u200b       </p> <p>\u200b       \u3010spark-env.sh\u3011</p> Bash<pre><code>cp $SPARK_HOME/conf/spark-env.sh.template $SPARK_HOME/conf/spark-env.sh\nvim $SPARK_HOME/conf/spark-env.sh\n</code></pre> Bash<pre><code>export JAVA_HOME=/data/workspace/jdk1.8.0_201\nexport HADOOP_HOME=/data/workspace/hadoop-3.2.4\nexport HADOOP_CONF_DIR=/data/workspace/hadoop-3.2.4/etc/hadoop\n\n# HA\u6a21\u5f0f\u4e0b\u914d\u7f6e\nexport SPARK_DAEMON_JAVA_OPTS=\"-Dspark.deploy.recoveryMode=ZOOKEEPER -Dspark.deploy.zookeeper.url=node73:2181,node74:2181,node75:2181 -Dspark.deploy.zookeeper.dir=/spark-3.2.3\"\n\n# worker\u8fdb\u7a0b\u5de5\u4f5c\u76ee\u5f55\nexport SPARK_WORKER_DIR=/data/workspace/spark-3.2.3-bin-hadoop3.2/work\n# \u914d\u7f6e\u81ea\u52a8\u81ea\u52a8\u6e05\u7406\uff0c\u6e05\u7406\u5468\u671f\u4ee5\u53ca\u4fdd\u7559\u6700\u8fd1\u591a\u957f\u65f6\u95f4\u7684\u6570\u636e\nexport SPARK_WORKER_OPTS=\"-Dspark.worker.cleanup.enabled=true -Dspark.worker.cleanup.interval=86400 -Dspark.worker.cleanup.appDataTtl=2592000\"\n\nexport SPARK_MASTER_WEBUI_PORT=18080\nexport SPARK_HISTORY_OPTS=\"-Dspark.history.ui.port=18888 -Dspark.history.retainedApplications=30 -Dspark.history.fs.logDirectory=hdfs://ns/spark_3.2.3/history\"\n\n# job\u4efb\u52a1\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u5927\u91cf\u7684\u4e34\u65f6\u76ee\u5f55\u4f4d\u7f6e\nexport SPARK_LOCAL_DIRS=/data/workspace/spark-3.2.3-bin-hadoop3.2/tmp\n\nexport YARN_CONF_DIR=/data/workspace/hadoop-3.2.4/etc/hadoop\n\n# \u5206\u914d\u7ed9spark master/worker\u5b88\u62a4\u8fdb\u7a0b\u7684\u5185\u5b58\nexport SPARK_DAEMON_MEMORY=2g\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step4-logpid","title":"step4: \u4fee\u6539log\u76ee\u5f55\u3001pid\u76ee\u5f55","text":"<p>\u200b       \u3010spark-daemon.sh\u3011</p> Bash<pre><code>vim $SPARK_HOME/sbin/spark-daemon.sh\n</code></pre> Bash<pre><code># get log directory\nif [ \"$SPARK_LOG_DIR\" = \"\" ]; then\n  export SPARK_LOG_DIR=\"/data/workspace/spark-3.2.3-bin-hadoop3.2/log\"      # log\u76ee\u5f55\nfi\nmkdir -p \"$SPARK_LOG_DIR\"\ntouch \"$SPARK_LOG_DIR\"/.spark_test &gt; /dev/null 2&gt;&amp;1\nTEST_LOG_DIR=$?\nif [ \"${TEST_LOG_DIR}\" = \"0\" ]; then\n  rm -f \"$SPARK_LOG_DIR\"/.spark_test\nelse\n  chown \"$SPARK_IDENT_STRING\" \"$SPARK_LOG_DIR\"\nfi\n\nif [ \"$SPARK_PID_DIR\" = \"\" ]; then\n  SPARK_PID_DIR=/data/workspace/spark-3.2.3-bin-hadoop3.2/pid               # pid\u76ee\u5f55\nfi\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step5","title":"step5: \u521b\u5efa\u76f8\u5173\u76ee\u5f55","text":"Text Only<pre><code>mkdir /data/workspace/spark-3.2.3-bin-hadoop3.2/tmp\nmkdir /data/workspace/spark-3.2.3-bin-hadoop3.2/log\nmkdir /data/workspace/spark-3.2.3-bin-hadoop3.2/pid\nmkdir /data/workspace/spark-3.2.3-bin-hadoop3.2/work\nhdfs dfs -mkdir -p /spark_3.2.3/history\nhdfs dfs -mkdir /spark-3.2.3_jars\nhdfs dfs -put /data/workspace/spark-3.2.3-bin-hadoop3.2/jars/* /spark-3.2.3_jars\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step6-spark","title":"step6: \u5c06Spark\u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5bf9\u5e94\u7684\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/spark-3.2.3-bin-hadoop3.2/ root@node74:/data/workspace/\nsudo scp -r /data/workspace/spark-3.2.3-bin-hadoop3.2/ root@node75:/data/workspace/\nsudo scp -r /data/workspace/spark-3.2.3-bin-hadoop3.2/ root@node76:/data/workspace/\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u4fee\u6539hadoop-3.2.4\u6240\u5c5e\u7528\u6237\u7ec4\u548c\u6240\u5c5e\u7528\u6237\nsudo chown -R zhongche:zhongche /data/workspace/spark-3.2.3-bin-hadoop3.2\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim ~/.bashrc\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport SPARK_HOME=/data/workspace/spark-3.2.3-bin-hadoop3.2\nexport PATH=$PATH:$SPARK_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#spark-on-yarn_1","title":"SPARK ON YARN\u73af\u5883\u914d\u7f6e","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step1-yarn-sitexml","title":"step1: \u5728yarn-site.xml\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e","text":"Bash<pre><code>vim $HADOOP_HOME/etc/hadoop/yarn-site.xml\n</code></pre> XML<pre><code># \u4fee\u6539\n&lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;\n    &lt;value&gt;spark_shuffle,mapreduce_shuffle&lt;/value&gt;\n&lt;/property&gt;\n# \u6dfb\u52a0\n&lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.aux-services.spark_shuffle.class&lt;/name&gt;\n    &lt;value&gt;org.apache.spark.network.yarn.YarnShuffleService&lt;/value&gt;\n&lt;/property&gt;\n</code></pre> <p>\u68c0\u67e5\u4e00\u4e0b${HADOOP_HOME}/share/hadoop/yarn/lib\u76ee\u5f55\u4e0b\u662f\u5426\u6709spark-*-yarn-shuffle.jar\uff0c\u5176\u4e2d*\u4ee3\u8868spark\u7248\u672c\u53f7\uff0c\u5982\u679c\u6ca1\u6709\u9700\u8981\u4ecespark\u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\u62f7\u8d1d\u8fc7\u6765\u3002</p> <p>spark-*-yarn-shuffle.jar\u5728$SPARK_HOME\u7684yarn\u76ee\u5f55\u4e0b</p> Bash<pre><code>cp $SPARK_HOME/yarn/spark-3.2.3-yarn-shuffle.jar ${HADOOP_HOME}/share/hadoop/yarn/lib\n</code></pre> <p>\u5c06\u4fee\u6539\u7684\u6587\u4ef6\u5206\u53d1\u81f3node74,node75</p> Bash<pre><code>scp $HADOOP_HOME/etc/hadoop/yarn-site.xml zhongche@node74:$HADOOP_HOME/etc/hadoop/\nscp $HADOOP_HOME/etc/hadoop/yarn-site.xml zhongche@node75:$HADOOP_HOME/etc/hadoop/\nscp ${HADOOP_HOME}/share/hadoop/yarn/lib/spark-3.2.3-yarn-shuffle.jar zhongche@node74:${HADOOP_HOME}/share/hadoop/yarn/lib/\nscp ${HADOOP_HOME}/share/hadoop/yarn/lib/spark-3.2.3-yarn-shuffle.jar zhongche@node75:${HADOOP_HOME}/share/hadoop/yarn/lib/\n</code></pre> <p>\u91cd\u542fYARN\u670d\u52a1</p> Text Only<pre><code>${HADOOP_HOME}/sbin/stop-yarn.sh\n${HADOOP_HOME}/sbin/start-yarn.sh\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801\uff1a</p> Bash<pre><code>$SPARK_HOME/bin/spark-submit \\\n--class org.apache.spark.examples.SparkPi \\\n--master yarn \\\n--deploy-mode client \\\n$SPARK_HOME/examples/jars/spark-examples_2.12-3.2.3.jar \\\n100\n</code></pre> Bash<pre><code>2023-07-17 14:10:38,643 INFO cluster.YarnScheduler: Removed TaskSet 0.0, whose tasks have all completed, from pool \n2023-07-17 14:10:38,644 INFO scheduler.DAGScheduler: ResultStage 0 (reduce at SparkPi.scala:38) finished in 1.605 s\n2023-07-17 14:10:38,649 INFO scheduler.DAGScheduler: Job 0 is finished. Cancelling potential speculative or zombie tasks for this job\n2023-07-17 14:10:38,650 INFO cluster.YarnScheduler: Killing all running tasks in stage 0: Stage finished\n2023-07-17 14:10:38,652 INFO scheduler.DAGScheduler: Job 0 finished: reduce at SparkPi.scala:38, took 1.665838 s\nPi is roughly 3.1417683141768316\n2023-07-17 14:10:38,671 INFO server.AbstractConnector: Stopped Spark@54d80039{HTTP/1.1, (http/1.1)}{0.0.0.0:4040}\n2023-07-17 14:10:38,674 INFO ui.SparkUI: Stopped Spark web UI at http://node73:4040\n2023-07-17 14:10:38,678 INFO cluster.YarnClientSchedulerBackend: Interrupting monitor thread\n2023-07-17 14:10:38,696 INFO cluster.YarnClientSchedulerBackend: Shutting down all executors\n2023-07-17 14:10:38,697 INFO cluster.YarnSchedulerBackend$YarnDriverEndpoint: Asking each executor to shut down\n2023-07-17 14:10:38,703 INFO cluster.YarnClientSchedulerBackend: YARN client scheduler backend Stopped\n2023-07-17 14:10:38,777 INFO spark.MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\n2023-07-17 14:10:38,789 INFO memory.MemoryStore: MemoryStore cleared\n2023-07-17 14:10:38,789 INFO storage.BlockManager: BlockManager stopped\n2023-07-17 14:10:38,810 INFO storage.BlockManagerMaster: BlockManagerMaster stopped\n2023-07-17 14:10:38,812 INFO scheduler.OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\n2023-07-17 14:10:38,818 INFO spark.SparkContext: Successfully stopped SparkContext\n2023-07-17 14:10:38,820 INFO util.ShutdownHookManager: Shutdown hook called\n2023-07-17 14:10:38,821 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-b2b4040b-04ce-403c-8a10-d1dffce37fa4\n2023-07-17 14:10:38,824 INFO util.ShutdownHookManager: Deleting directory /data/workspace/spark-3.2.3-bin-hadoop3.2/tmp/spark-0f7c40fc-1111-4eed-8e2a-77b0d7598e7c\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zabbix/","title":"Zabbix\u5e38\u7528\u914d\u7f6e","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zabbix/#zabbix-agent2","title":"\u9a8c\u8bc1zabbix-agent2\u7684\u8054\u901a\u6027","text":"Bash<pre><code>1.\u5728\u670d\u52a1\u7aef\u4e0a\u901a\u8fc7\u547d\u4ee4\uff0c\u4e3b\u52a8\u83b7\u53d6\u6570\u636e\n yum install zabbix-get -y  #yum\u5b89\u88c5zabbix\u91c7\u96c6\u670d\u52a1\n\n2.\u7528\u547d\u4ee4\u76d1\u6d4b\u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\n#\u83b7\u53d6ping\nzabbix_get -s '17.16.1.190' -p 10050 -k 'agent.ping'\n#\u83b7\u53d6\u4e3b\u673a\u540d\nzabbix_get -s '17.16.1.190' -p 10050 -k 'system.hostname'\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zabbix/#_1","title":"\u89e3\u51b3\u56fe\u5f62\u5b57\u4f53\u4e71\u7801\u95ee\u9898","text":"<p>Bash<pre><code>1.\u5b89\u88c5\u5b57\u4f53\n    yum -y install wqy-microhei-fonts\n\n2.\u590d\u5236\u5b57\u4f53\n\\cp /usr/share/fonts/wqymicrohei/wqy-microhei.ttc /usr/share/fonts/dejavu/DejaVuSans.ttf\n\n#\u5931\u8d25\u4e86\uff0c\u4f7f\u7528\u4e0b\u9762\u535a\u5ba2\u7684\u65b9\u6cd5\n https://blog.csdn.net/sehn_/article/details/107455885\n</code></pre> Bash<pre><code># \u786e\u8ba4zabbix-agent2\u670d\u52a1\u6b63\u786e\u8fd0\u884c\nsystemctl is-active zabbix-agent2.service\n\nsystemctl restart zabbix-agent2\n\ngrep -Ev '^#|^$' /etc/zabbix/zabbix_agent2.conf   #\u8fc7\u6ee4\uff0c\u53bb\u6389#\u548c\u7a7a\u683c\u7684\u884c\n\n\n1.\u670d\u52a1\u7aef\ntail -f /var/log/zabbix/zabbix_server.log\n\n2.\u5ba2\u6237\u7aef\ntail -f /var/log/zabbix/zabbix_agent2.log\n\n\nzcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix\n\n# \u67e5\u770b\u76d1\u63a7\u7aef\u53e3\nnetstat -lntup\n</code></pre></p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/","title":"Zookeeper\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#zookeeper","title":"Zookeeper\u73af\u5883\u90e8\u7f72","text":"<p>Zookeeper\u4f5c\u4e3a\u5206\u5e03\u5f0f\u534f\u8c03\u7ec4\u4ef6\u4e3b\u8981\u627f\u8f7d\u76f8\u5173\u5927\u6570\u636e\u7ec4\u4ef6\u7684\u9ad8\u53ef\u7528\u4fdd\u969c\uff0c\u5f53\u524d\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u67d0\u8282\u70b9\u670d\u52a1\u56e0\u6545\u969c\u9000\u51fa\u65f6\u80fd\u591f\u5b9e\u73b0\u5feb\u901f\u5207\u6362\u3002\u672c\u7cfb\u7edf\u4e3b\u8981\u7528\u4e8e\u652f\u6491Yarn\u3001Kakfa\u3001Spark\u4ee5\u53caFlink\u670d\u52a1\u7684\u8fd0\u884c\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"<ul> <li>192.168.21.73 -&gt; node73</li> <li>192.168.21.74 -&gt; node74</li> <li>192.168.21.75 -&gt; node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.73-192.168.21.75 \u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/apache-zookeeper-3.6.3-bin.tar.gz \u8fd0\u884c\u76ee\u5f55 /data/workspace/apache-zookeeper-3.6.3-bin \u6570\u636e\u5b58\u50a8\u76ee\u5f55 /data/workspace/apache-zookeeper-3.6.3-bin/snapshot \u542f\u505c\u72b6\u6001\u7ef4\u62a4\u811a\u672c /data/workspace/apache-zookeeper-3.6.3-bin/bin/zkServerX.sh","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#zookeeper_1","title":"Zookeeper\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step1","title":"step1: \u89e3\u538b\u6587\u4ef6\u5230\u6307\u5b9a\u76ee\u5f55","text":"Bash<pre><code>sudo tar -zxvf /data/software/apache-zookeeper-3.6.3-bin.tar.gz -C /data/workspace\n</code></pre> Text Only<pre><code>sudo chown -R demouser:demouser /data/workspace/apache-zookeeper-3.6.3-bin\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step2","title":"step2: \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># Zookeeper\nexport ZK_HOME=/data/workspace/apache-zookeeper-3.6.3-bin\nexport PATH=$PATH:$ZK_HOME/bin\n</code></pre> <p>\u751f\u6548\u914d\u7f6e\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step3-zoocfg","title":"step3: \u914d\u7f6e zoo.cfg\u6587\u4ef6","text":"Bash<pre><code>cp $ZK_HOME/conf/zoo_sample.cfg $ZK_HOME/conf/zoo.cfg\nvim $ZK_HOME/conf/zoo.cfg\n</code></pre> Bash<pre><code># The number of milliseconds of each tick\ntickTime=2000\n# The number of ticks that the initial \n# synchronization phase can take\ninitLimit=60\n# The number of ticks that can pass between \n# sending a request and getting an acknowledgement\nsyncLimit=10\n# the directory where the snapshot is stored.\n# do not use /tmp for storage, /tmp here is just \n# example sakes.\ndataDir=/data/workspace/apache-zookeeper-3.6.3-bin/snapshot\ndataLogDir=/data/workspace/apache-zookeeper-3.6.3-bin/transaction\n# the port at which the clients will connect\nclientPort=2181\n# the maximum number of client connections.\n# increase this if you need to handle more clients\nmaxClientCnxns=120\nmaxSessionTimeout=120000\nminSessionTimeout=4000\ncnxTimeout=30000\n#\n# Be sure to read the maintenance section of the \n# administrator guide before turning on autopurge.\n#\n# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance\n#\n# The number of snapshots to retain in dataDir\nautopurge.snapRetainCount=16\n# Purge task interval in hours\n# Set to \"0\" to disable auto purge feature\nautopurge.purgeInterval=24\nsnapCount=409600\npreAllocSize=65536\n\n## Metrics Providers\n#\n# https://prometheus.io Metrics Exporter\n#metricsProvider.className=org.apache.zookeeper.metrics.prometheus.PrometheusMetricsProvider\n#metricsProvider.httpPort=7000\n#metricsProvider.exportJvmInfo=true\n\nserver.1=node73:2888:3888\nserver.2=node74:2888:3888\nserver.3=node75:2888:3888\n\n4lw.commands.whitelist=*\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step4-jvm","title":"step4: \u4f18\u5316JVM\u53c2\u6570","text":"Bash<pre><code>&gt; vim $ZK_HOME/conf/java.env\n\nexport JAVA_HOME=/data/workspace/jdk1.8.0_201\nexport JVMFLAGS=\"-Xms2048m -Xmx2048m $JVMFLAGS\"\n</code></pre> <p>\u4fee\u6539\u5b8c\u6210\u4f7f\u7528jmap -heap $pid\u6765\u9a8c\u8bc1\u5185\u5b58\u4fee\u6539\u60c5\u51b5\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step5","title":"step5: \u4fee\u6539\u65e5\u5fd7\u5b58\u50a8","text":"Bash<pre><code>&gt; vim $ZK_HOME/bin/zkEnv.sh\n\nif [ \"x${ZOO_LOG_DIR}\" = \"x\" ]\nthen\n    # ZOO_LOG_DIR=\"$ZOOKEEPER_PREFIX/logs\"\n    ZOO_LOG_DIR=\"/data/workspace/apache-zookeeper-3.6.3-bin/log\"\nfi\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step6-pid","title":"step6: \u9501\u5b9apid\u6587\u4ef6","text":"Bash<pre><code>&gt; vim $ZK_HOME/bin/zkServer.sh\n\nif [ -z \"$ZOOPIDFILE\" ]; then\n    if [ ! -d \"$ZOO_DATADIR\" ]; then\n        mkdir -p \"$ZOO_DATADIR\"\n    fi\n    # ZOOPIDFILE=\"$ZOO_DATADIR/zookeeper_server.pid\"\n    ZOOPIDFILE=\"/data/workspace/apache-zookeeper-3.6.3-bin/pid/zookeeper_server.pid\"\nelse\n    # ensure it exists, otw stop will fail\n    mkdir -p \"$(dirname \"$ZOOPIDFILE\")\"\nfi\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step7","title":"step7: \u591a\u4e2a\u8282\u70b9\u5206\u522b\u521b\u5efa\u6570\u636e\u5b58\u50a8\u8def\u5f84","text":"Bash<pre><code>sudo mkdir -p /data/workspace/apache-zookeeper-3.6.3-bin/snapshot\nsudo mkdir -p /data/workspace/apache-zookeeper-3.6.3-bin/transaction\nsudo mkdir -p /data/workspace/apache-zookeeper-3.6.3-bin/log\nsudo mkdir -p /data/workspace/apache-zookeeper-3.6.3-bin/pid\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step8-zookeeper","title":"step8: \u5c06zookeeper\u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5404\u670d\u52a1\u5668\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/apache-zookeeper-3.6.3-bin root@node74:/data/workspace/\nsudo scp -r /data/workspace/apache-zookeeper-3.6.3-bin root@node75:/data/workspace/\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u4fee\u6539apache-zookeeper-3.6.3-bin\u6240\u5c5e\u7528\u6237\u7ec4\u548c\u6240\u5c5e\u7528\u6237\nsudo chown -R zhongche:zhongche /data/workspace/apache-zookeeper-3.6.3-bin\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim ~/.bashrc\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport ZK_HOME=/data/workspace/apache-zookeeper-3.6.3-bin\nexport PATH=$PATH:$ZK_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step9-myidid","title":"step9: \u5728\u6570\u636e\u5b58\u50a8\u76ee\u5f55\u4e0b\u914d\u7f6emyid\u6587\u4ef6\u5e76\u8bbe\u7f6eid\uff0c\u521b\u5efa\u6570\u636e\u5b58\u50a8\u76ee\u5f55\uff1a","text":"Bash<pre><code># \u5728node73\u4e0b\u6267\u884c\necho 1 &gt; /data/workspace/apache-zookeeper-3.6.3-bin/snapshot/myid\n# \u5728node74\u4e0b\u6267\u884c\necho 2 &gt; /data/workspace/apache-zookeeper-3.6.3-bin/snapshot/myid\n# \u5728node75\u4e0b\u6267\u884c\necho 3 &gt; /data/workspace/apache-zookeeper-3.6.3-bin/snapshot/myid\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step10","title":"step10: \u901a\u8fc7\u5982\u4e0b\u6307\u4ee4\u542f\u52a8\u670d\u52a1","text":"Bash<pre><code>$ZK_HOME/bin/zkServer.sh start\n</code></pre> <p>\u5b8c\u6bd5\u4e4b\u540e\u901a\u8fc7jps\u67e5\u770b\u5230zk\u8fdb\u7a0b\u4e3aQuorumPeerMain\u3002</p> <p>\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u9a8c\u8bc1zk\u7aef\u53e3\u662f\u5426\u5b58\u5728\uff1a</p> Bash<pre><code>netstat -ntlp | grep 2181\n</code></pre> <p>\u67e5\u770bzk\u8282\u70b9\u72b6\u6001\u4e3aleader\u6216\u8005follower\u4ee3\u8868\u6210\u529f\u3002</p> Bash<pre><code>$ZK_HOME/bin/zkServer.sh status\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step11-zk","title":"step11: \u4e3a\u4e86\u65b9\u4fbf\u5728\u4e00\u53f0\u8282\u70b9\u4e0a\u540c\u65f6\u542f\u505c\u7ba1\u7406zk\u8282\u70b9\uff0c\u53ef\u4ee5\u6269\u5c55\u5982\u4e0b\u811a\u672c\uff1a","text":"<p>\u7f16\u5199\u8282\u70b9\u5217\u8868\u914d\u7f6e\u6587\u4ef6\uff1a</p> Bash<pre><code>&gt; vim $ZK_HOME/conf/nodes\n\nnode73\nnode74\nnode75\n</code></pre> <p>\u7f16\u5199\u6269\u5c55\u811a\u672c\uff1a</p> Bash<pre><code>&gt; vim $ZK_HOME/bin/zkServerX.sh\n\n#!/bin/bash\n\nfor node in `cat $ZK_HOME/conf/nodes`\ndo\n  echo \"********************************\" [ $node ] \"************************************\"\n  ssh $node $ZK_HOME/bin/zkServer.sh $1\n  echo \"*******************************************************************************\"\ndone\n</code></pre> Bash<pre><code>chmod u+x $ZK_HOME/bin/zkServerX.sh\n</code></pre> <p>11.\u8fd0\u7ef4\u547d\u4ee4</p> <p>\uff081\uff09\u542f\u52a8zookeeper\u670d\u52a1\u3002</p> Bash<pre><code>${ZK_HOME}/bin/zkServerX.sh start\n</code></pre> <p>\uff082\uff09\u67e5\u770bzookeeper\u670d\u52a1\u72b6\u6001\u3002</p> Bash<pre><code>${ZK_HOME}/bin/zkServerX.sh status\n</code></pre> <p>\uff083\uff09\u505c\u6b62zookeeper\u670d\u52a1\u3002</p> Bash<pre><code>${ZK_HOME}/bin/zkServerX.sh stop\n</code></pre> <p>\uff084\uff09\u91cd\u542fzookeeper\u670d\u52a1\u3002</p> Bash<pre><code>${ZK_HOME}/bin/zkServerX.sh restart\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/git/git_common_install/","title":"git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#lfs","title":"lfs\u5b89\u88c5\uff1a","text":"<p>\u652f\u6301\u5927\u6587\u4ef6\u63d0\u4ea4</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#1","title":"1\u3001\u5b89\u88c5","text":"Text Only<pre><code>yum install git-lfs\napt install git-lfs\ngit lfs install\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#2","title":"2\u3001\u6807\u8bb0\u5927\u6587\u4ef6","text":"Text Only<pre><code>git lfs track kernel_resource/4.19.37-rt19.arm64.gz\ngit lfs track *.gz\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#3","title":"3\u3001\u63a8\u9001","text":"Text Only<pre><code>git add my.gz\n git commit -m \"add gz file\"\n git push origin master\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#4","title":"4\u3001\u67e5\u770b","text":"Text Only<pre><code>git lfs track\ngit lfs ls-files\nvim .gitattributes\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#gitlab","title":"gitlab\u5b89\u88c5\u4e0e\u914d\u7f6e","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#1gitlab","title":"1\u3001\u62c9\u53d6gitlab\u5bb9\u5668\u955c\u50cf","text":"Text Only<pre><code>docker pull gitlab/gitlab-runner:latest\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#2gitlab","title":"2\u3001\u8fd0\u884cgitlab","text":"Text Only<pre><code>docker run -d --name gitlab-runner --restart always \\\n  -v /srv/gitlab-runner/config:/etc/gitlab-runner \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  gitlab/gitlab-runner:latest\nmkdir -p /home/hl/gitlabrunner/DeltaOS/opt /home/hl/gitlabrunner/DeltaOS/builds\ndocker run -d --name deltaos-gitlab-runner --restart always \\\n  --privileged=true \\\n  -v /home/hl/gitlabrunner/DeltaOS/opt:/opt \\\n  -v /home/hl/gitlabrunner/DeltaOS/builds:/home/gitlab-runner/builds \\\n  gitlab/gitlab-runner:latest\ndocker exec deltaos-gitlab-runner gitlab-runner register \\\n --non-interactive \\\n --name my-runner \\\n --url http://192.168.1.1:8000/ \\\n --registration-token sDrr7KDi6UXyzwuzPqx- \\\n --executor shell \\\n --tag-list \\\n common-runner\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#3_1","title":"3\u3001\u5bb9\u5668\u5185","text":"Text Only<pre><code>mknod -m 0660 /dev/loop1 b 7 1\necho \"192.168.21.8 gitlab.tmp.com\" |tee &gt;&gt; /etc/hosts\n#\u6dfb\u52a0root\u6743\u9650\nsed -i 's/gitlab-runner:x:999:999/gitlab-runner:x:0:0/g' /etc/passwd\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#4gitlab-ci","title":"4\u3001\u7f16\u8f91gitlab-ci","text":"Text Only<pre><code>vim .gitlab-ci.yml\nstages:\n  - deploy\ndeploy:\n    stage: deploy\n    script:\n      - bash /opt/deploy.sh\n    only:\n      - master\n    tags:\n      - common-runner\nwhen \u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4ee5\u4e0b\u503c\u4e4b\u4e00\uff1a\non_success - \u53ea\u6709\u5f53\u524d\u4e00\u4e2a\u9636\u6bb5\u7684\u6240\u6709\u5de5\u4f5c\u6210\u529f\u65f6\u624d\u6267\u884c\u5de5\u4f5c\u3002\u8fd9\u662f\u9ed8\u8ba4\u503c\u3002\non_failure - \u4ec5\u5f53\u524d\u4e00\u4e2a\u9636\u6bb5\u7684\u81f3\u5c11\u4e00\u4e2a\u4f5c\u4e1a\u53d1\u751f\u6545\u969c\u65f6\u624d\u6267\u884c\u4f5c\u4e1a\u3002\nalways - \u65e0\u8bba\u524d\u4e00\u9636\u6bb5\u7684\u5de5\u4f5c\u72b6\u51b5\u5982\u4f55\uff0c\u6267\u884c\u5de5\u4f5c\u3002\nmanual - \u624b\u52a8\u6267\u884c\u4f5c\u4e1a\nstages:\n - build\n - test\n - deploy\n\u9996\u5148\uff0c\u6240\u6709build\u7684jobs\u90fd\u662f\u5e76\u884c\u6267\u884c\u7684\u3002\n\u6240\u6709build\u7684jobs\u6267\u884c\u6210\u529f\u540e\uff0ctest\u7684jobs\u624d\u4f1a\u5f00\u59cb\u5e76\u884c\u6267\u884c\u3002\n\u6240\u6709test\u7684jobs\u6267\u884c\u6210\u529f\uff0cdeploy\u7684jobs\u624d\u4f1a\u5f00\u59cb\u5e76\u884c\u6267\u884c\u3002\n\u6240\u6709\u7684deploy\u7684jobs\u6267\u884c\u6210\u529f\uff0ccommit\u624d\u4f1a\u6807\u8bb0\u4e3asuccess\n\u4efb\u4f55\u4e00\u4e2a\u524d\u7f6e\u7684jobs\u5931\u8d25\u4e86\uff0ccommit\u4f1a\u6807\u8bb0\u4e3afailed\u5e76\u4e14\u4e0b\u4e00\u4e2astages\u7684jobs\u90fd\u4e0d\u4f1a\u6267\u884c\u3002\n\u6709\u65f6\uff0cscript\u547d\u4ee4\u9700\u8981\u7528\u5355\u5f15\u53f7\u6216\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\u3002\u4f8b\u5982\uff0c\u5305\u542b\u5192\u53f7\uff08:\uff09\u7684\u547d\u4ee4\u9700\u8981\u7528\u5f15\u53f7\u62ec\u8d77\u6765\uff0c\u4ee5\u4fbfYAML\u89e3\u6790\u5668\u77e5\u9053\u5c06\u6574\u4e2a\u4e8b\u7269\u89e3\u91ca\u4e3a\u5b57\u7b26\u4e32\u800c\u4e0d\u662f\u201ckey\uff1avalue\u201d\u5bf9\u3002\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u65f6\u8981\u5c0f\u5fc3\uff1a:\uff0c{\uff0c}\uff0c[\uff0c]\uff0c,\uff0c&amp;\uff0c*\uff0c#\uff0c?\uff0c|\uff0c-\uff0c&lt;\uff0c&gt;\uff0c=\uff0c!\uff0c%\uff0c@\uff0c`\u3002\n\u4f8b\u5982\uff1a\nstages:\n- build\n- cleanup_build\n- test\n- deploy\n- cleanup\nbuild_job:\n  stage: build\n  script:\n  - make build\ncleanup_build_job:\n  stage: cleanup_build\n  script:\n  - cleanup build when failed\n  when: on_failure\ntest_job:\n  stage: test\n  script:\n  - make test\ndeploy_job:\n  stage: deploy\n  script:\n  - make deploy\n  when: manual\ncleanup_job:\n  stage: cleanup\n  script:\n  - cleanup after jobs\n  when: always\n\u4ee5\u4e0a\u811a\u672c\u5c06\uff1a\ncleanup_build_job\u4ec5\u5728build_job\u5931\u8d25\u65f6\u6267\u884c\u3002\n\u59cb\u7ec8\u6267\u884ccleanup_job\u4f5c\u4e3a\u6d41\u6c34\u7ebf\u7684\u6700\u540e\u4e00\u6b65\uff0c\u65e0\u8bba\u6210\u529f\u6216\u5931\u8d25\u3002\n\u5141\u8bb8\u60a8deploy_job\u4eceGitLab\u7684UI \u624b\u52a8\u6267\u884c\u3002\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#5urltoken","title":"5\u3001\u754c\u9762\u67e5\u627eurl\u548ctoken","text":"Text Only<pre><code>Settings \u2014&gt; Pipelines \u2014&gt; Specific Runners\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#6","title":"6\u3001\u6ce8\u518c","text":"Text Only<pre><code>gitlab-runner register --non-interactive --name my-runner --url http://192.168.21.8:8000/ --registration-token Kgu3z28pqfZEZsBmquUh --executor shell --tag-list common-runner\nvim /etc/passwd\ngitlab-runner:x:0:0:GitLab Runner:/home/gitlab-runner:/bin/bash\n#\u624b\u52a8\u6ce8\u518c\ndocker exec -it gitlab-runner gitlab-ci-multi-runner register\n#\u5f15\u5bfc\u4f1a\u8ba9\u4f60\u8f93\u5165gitlab\u7684url\uff0c\u8f93\u5165\u81ea\u5df1\u7684url\uff0c\u4f8b\u5982http://gitlab.example.com/\n#\u5f15\u5bfc\u4f1a\u8ba9\u4f60\u8f93\u5165token\uff0c\u53bb\u76f8\u5e94\u7684\u9879\u76ee\u4e0b\u627e\u5230token\uff0c\u4f8b\u5982ase12c235qazd32\n#\u5f15\u5bfc\u4f1a\u8ba9\u4f60\u8f93\u5165tag\uff0c\u4e00\u4e2a\u9879\u76ee\u53ef\u80fd\u6709\u591a\u4e2arunner\uff0c\u662f\u6839\u636etag\u6765\u533a\u522brunner\u7684\uff0c\u8f93\u5165\u82e5\u5e72\u4e2a\u5c31\u597d\u4e86\uff0c\u6bd4\u5982web,hook,deploy\n#\u5f15\u5bfc\u4f1a\u8ba9\u4f60\u8f93\u5165executor\uff0c\u8fd9\u4e2a\u662f\u8981\u7528\u4ec0\u4e48\u65b9\u5f0f\u6765\u6267\u884c\u811a\u672c\uff0c\u56fe\u65b9\u4fbf\u8f93\u5165shell\u5c31\u597d\u4e86\u3002\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#7gitlab-runner","title":"7\u3001\u67e5\u770bgitlab-runner","text":"Text Only<pre><code>gitlab-runner list\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#8","title":"8\u3001\u5bbf\u4e3b\u673a\u5b89\u88c5","text":"Text Only<pre><code>yum \u5b89\u88c5\ncurl -L https://packages.gitlab.com/install/repositories/runner/gitlab-ci-multi-runner/script.rpm.sh | bash\nyum install -y gitlab-ci-multi-runner\necho '[gitlab-ci-multi-runner]\nname=gitlab-ci-multi-runner\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/gitlab-ci-multi-runner/yum/el7\nrepo_gpgcheck=0\ngpgcheck=0\nenabled=1\ngpgkey=https://packages.gitlab.com/gpg.key' |tee &gt;&gt; /etc/yum.repos.d/gitlab-ci-multi-runner.repo\nyum makecache\nyum install -y gitlab-ci-multi-runner\n#\u8bbe\u7f6egitlab-runner root\u6743\u9650\ngitlab-runner:x:0:0:GitLab Runner:/home/gitlab-runner:/bin/bash\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#9","title":"9\u3001\u5176\u4ed6","text":"Text Only<pre><code>jenkins\nhttp://blog.csdn.net/abcdocker/article/details/53840629\nhttps://docs.gitlab.com/ee/ci/yaml/README.html\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#_1","title":"git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/","title":"git\u5b9e\u7528\u914d\u7f6e","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_1","title":"\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\uff1a","text":"<ul> <li>/etc/gitconfig \u6587\u4ef6\uff1a </li> <li>\u7cfb\u7edf\u4e2d\u5bf9\u6240\u6709\u7528\u6237\u90fd\u666e\u904d\u9002\u7528\u7684\u914d\u7f6e\u3002</li> <li>\u82e5\u4f7f\u7528 git config \u65f6\u7528 --system \u9009\u9879\uff0c\u8bfb\u5199\u7684\u5c31\u662f\u8fd9\u4e2a\u6587\u4ef6\u3002</li> <li>~/.gitconfig \u6587\u4ef6\uff1a</li> <li>\u7528\u6237\u76ee\u5f55\u4e0b\u7684\u914d\u7f6e\u6587\u4ef6\u53ea\u9002\u7528\u4e8e\u8be5\u7528\u6237\u3002</li> <li>\u82e5\u4f7f\u7528 git config \u65f6\u7528 --global \u9009\u9879\uff0c\u8bfb\u5199\u7684\u5c31\u662f\u8fd9\u4e2a\u6587\u4ef6\u3002</li> <li>.git/config</li> <li>\u5f53\u524d\u9879\u76ee\u7684 Git \u76ee\u5f55\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\uff08\u4e5f\u5c31\u662f\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684 .git/config \u6587\u4ef6\uff09\uff1a\u8fd9\u91cc\u7684\u914d\u7f6e\u4ec5\u4ec5\u9488\u5bf9\u5f53\u524d\u9879\u76ee\u6709\u6548\u3002</li> <li>\u6bcf\u4e00\u4e2a\u7ea7\u522b\u7684\u914d\u7f6e\u90fd\u4f1a\u8986\u76d6\u4e0a\u5c42\u7684\u76f8\u540c\u914d\u7f6e\uff0c\u6240\u4ee5 .git/config \u91cc\u7684\u914d\u7f6e\u4f1a\u8986\u76d6 /etc/gitconfig \u4e2d\u7684\u540c\u540d\u53d8\u91cf\u3002</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_2","title":"\u914d\u7f6e\u793a\u4f8b","text":"Bash<pre><code>git config --local http.postBuffer 524288000\ngit config --global http.lowSpeedLimit 0\ngit config --global http.lowSpeedTime 999999\ngit config --global user.name \"hl\"\ngit config --global core.editor vim\ngit config --global merge.tool vimdiff\ngit config --list\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_3","title":"\u914d\u7f6e\u5bc6\u7801\uff1a","text":"Bash<pre><code>#\u8bbe\u7f6e\u8bb0\u4f4f\u5bc6\u7801\uff08\u9ed8\u8ba415\u5206\u949f\uff09\uff1a\ngit config --global credential.helper cache\n\n#\u6c38\u4e45\ngit config --global credential.helper store\n\n#\u5982\u679c\u60f3\u81ea\u5df1\u8bbe\u7f6e\u65f6\u95f4\uff0c\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a\ngit config credential.helper 'cache --timeout=3600'\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#git","title":"git\u8bbe\u7f6e\u4ee3\u7406","text":"<ul> <li>\u8bbe\u7f6e</li> </ul> Bash<pre><code>git config --global http.proxy http://127.0.0.1:4780\ngit config --global https.proxy https://127.0.0.1:4780\n</code></pre> <ul> <li>\u53d6\u6d88\u8bbe\u7f6e</li> </ul> Bash<pre><code>git config --global --unset http.proxy\ngit config --global --unset https.proxy\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#git-ssh","title":"git \u914d\u7f6essh","text":"<p>centos\u7cfb\u7edf</p> <ol> <li>\u914d\u7f6e\u5e10\u6237\u548c\u5bc6\u7801</li> </ol> Bash<pre><code>git config --global user.name \"Your Name\"\ngit config --global user.email \"email@example.com\"\n</code></pre> <ol> <li>\u67e5\u770b\u914d\u7f6e\u662f\u5426\u751f\u6548</li> </ol> Bash<pre><code>git config --list\n</code></pre> <ol> <li>\u5728\u672c\u5730\u751f\u6210ssh key\uff0c\u751f\u6210\u516c\u94a5\u548c\u79c1\u94a5</li> </ol> Bash<pre><code>ssh-keygen -t rsa -C \"your_email@youremail.com\"\n</code></pre> <ol> <li>\u786e\u8ba4\u8def\u5f84\u63091\u6b21\u56de\u8f66\uff0c\u63d0\u793a\uff1aEnter passphrase\uff08\u8f93\u5165\u5bc6\u7801\uff09\uff0c\u4e0d\u7528\u8f93\u5bc6\u7801\u518d\u63092\u6b21\u56de\u8f66\u5373\u53ef\u3002\u751f\u6210\u7684\u5bc6\u94a5\u5b58\u653e\u8def\u5f84 /root/.ssh/id_rsa, id_rsa\uff1a\u79c1\u94a5 \uff0cid_rsa.pub\uff1a\u516c\u94a5</li> </ol> Bash<pre><code>cat /root/.ssh/id_rsa.pub\n</code></pre> <ol> <li>gitlab\u4e0asetting\u4e2d\u7684 New SSH Key\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684ssh key(\u590d\u5236\u521a\u624d\u751f\u6210\u7684id_rsa.pub\u516c\u94a5)</li> </ol>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#git_1","title":"git\u8bbf\u95ee\u52a0\u901f\u914d\u7f6e","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#github-mirror","title":"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528github Mirror \u4e0b\u8f7d","text":"<p>\u76f4\u63a5\u5728 GitHub \u4ed3\u5e93\u524d\u9762\u62fc\u63a5 Proxy \u5730\u5740\uff0c\u4e0d\u540c\u7684 Mirror \u62fc\u63a5\u65b9\u5f0f\u53ef\u80fd\u6709\u6240\u4e0d\u540c</p> <ul> <li>https://mirror.ghproxy.com</li> </ul> Bash<pre><code>$ git clone https://mirror.ghproxy.com/https://github.com/shaowenchen/scripts\n</code></pre> <ul> <li>https://github.com.cnpmjs.org</li> </ul> Bash<pre><code>git clone https://github.com.cnpmjs.org/shaowenchen/scripts \n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#gitee-github","title":"\u65b9\u5f0f\u4e8c\uff1a\u901a\u8fc7gitee \u5bfc\u5165github\u9879\u76ee","text":"<p>\u53ef\u4ee5\u53c2\u8003\u6587\u6863: GitHub\u4ed3\u5e93\u5feb\u901f\u5bfc\u5165Gitee\u53ca\u540c\u6b65\u66f4\u65b0, \u5c06 GitHub \u4ed3\u5e93\u5bfc\u5165 Gitee\u3002\u7136\u540e\u4f7f\u7528 Gitee \u7684\u5730\u5740\u62c9\u53d6\u4ee3\u7801\u3002</p> <p>\u6587\u6863\u94fe\u63a5\uff1ahttps://gitee.com/help/articles/4284</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#github-host","title":"\u65b9\u5f0f\u4e09\uff1a\u914d\u7f6egithub host\u5730\u5740","text":"<p>\u6253\u5f00 https://www.ipaddress.com/ \u67e5\u8be2 github.com \u7684 IP \u5730\u5740 \u7f16\u8f91\u672c\u5730 /etc/hosts \u6587\u4ef6\uff0c\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9:</p> Bash<pre><code>140.82.112.4 github.com\n</code></pre> <p>\u6216\u8005\u76f4\u63a5\u4f7f\u7528\u5f00\u6e90\u9879\u76ee GitHub520 \u83b7\u53d6\u6700\u65b0\u7684 IP \u5730\u5740\u3002</p> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/521xueweihan/GitHub520</p> <p>\u63a5\u7740\u5c31\u53ef\u4ee5\u62c9\u53d6\u4ee3\u7801\u4e86\uff0c\u4f46\u662f\u901f\u5ea6\u5e76\u4e0d\u4f1a\u5f88\u5feb\uff0c\u56e0\u4e3a Github \u7528\u7684\u662f\u7f8e\u56fd IP\u3002</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_4","title":"\u65b9\u5f0f\u56db\uff1a\u914d\u7f6e\u547d\u4ee4\u884c\u4ee3\u7406","text":"<p>\u5982\u679c\u6709\u53ef\u7528\u7684\u4ee3\u7406\u670d\u52a1\uff0c\u90a3\u4e48\u5728\u672c\u5730 Terminal \u4e2d\u914d\u7f6e\u4ee3\u7406\u5373\u53ef\u3002</p> Bash<pre><code># Proxy\nfunction proxy_off(){\n    unset http_proxy\n    unset HTTP_PROXY\n    unset https_proxy\n    unset HTTPS_PROXY\n    echo -e \"\u5df2\u5173\u95ed\u4ee3\u7406\"\n}\nfunction proxy_on(){\n    export http_proxy=\"http://127.0.0.1:1087\";\n    export HTTP_PROXY=\"http://127.0.0.1:1087\";\n    export https_proxy=\"http://127.0.0.1:1087\";\n    export HTTPS_PROXY=\"http://127.0.0.1:1087\";\n    echo -e \"\u5df2\u5f00\u542f\u4ee3\u7406\"\n}\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#gitssh","title":"git\u540c\u65f6\u914d\u7f6e\u591a\u4e2a\u5e73\u53f0\u7684SSH","text":"<p>reference: https://github.com/mr-dragon/day-day-up/blob/master/z-archive/document/configure-gitlab-github-gitee-development-environment.md</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_5","title":"\u524d\u7f6e\u51c6\u5907\uff1a","text":"<ul> <li>\u786e\u4fdd git \u5df2\u7ecf\u5b89\u88c5</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#1-git","title":"1\u3001\u6e05\u9664 git \u7684\u5168\u5c40\u8bbe\u7f6e","text":"<ul> <li>\u786e\u8ba4\u5f53\u524d\u73af\u5883\u662f\u5426\u5df2\u7ecf\u914d\u7f6e\u4e86 git \u8d26\u53f7\u4fe1\u606f\uff0c\u82e5\u6709\u5219\u5148\u6e05\u9664</li> </ul> Bash<pre><code>git config --global --list\n\ngit config --global --unset user.name \"\u4f60\u7684\u540d\u5b57\"\ngit config --global --unset user.email \"\u4f60\u7684\u90ae\u7bb1\"\n\ngit config --global --unset user.name \"sswang\"\ngit config --global --unset user.email \"sswang@jshcbd.cn\"\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#2-ssh-key","title":"2\u3001\u751f\u6210\u65b0\u7684 SSH KEY","text":"<ul> <li>Linux &amp; MacOS  \u73af\u5883</li> </ul> Bash<pre><code># github ssh keys\n# linux or mac\nssh-keygen -t rsa -f ~/.ssh/id_rsa.github -C \"sswss@aliyun.com\"\n\n# gitee\n# linux or mac\nssh-keygen -t rsa -f ~/.ssh/id_rsa.gitee -C \"sswss@aliyun.com\"\n\n# gitlab \n# linux or mac\nssh-keygen -t rsa -f ~/.ssh/id_rsa.gitlab -C \"sswang@jshcbd.cn\"\n</code></pre> <ul> <li>\u5b8c\u6210\u540e\u4f1a\u5728~/.ssh / \u76ee\u5f55\u4e0b\u751f\u6210\u4ee5\u4e0b\u6587\u4ef6</li> </ul> Bash<pre><code>id_rsa.github\nid_rsa.github.pub\nid_rsa.gitlab\nid_rsa.gitlab.pub\nid_rsa.gitee\nid_rsa.gitee.pub\n</code></pre> <ul> <li>win</li> </ul> Bash<pre><code># github ssh keys\nssh-keygen -t rsa -f C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github -C \"sswss@aliyun.com\"\n\n# gitee\nssh-keygen -t rsa -f C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitee -C \"sswss@aliyun.com\"\n\n# gitlab \nssh-keygen -t rsa -f C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab -C \"sswang@jshcbd.cn\"\n</code></pre> <ul> <li>\u5b8c\u6210\u540e\u4f1a\u5728C:\\Users\\jhc142.JSHCBD.ssh\u76ee\u5f55\u4e0b\u751f\u6210\u4ee5\u4e0b\u6587\u4ef6</li> </ul> Bash<pre><code>id_rsa.github\nid_rsa.github.pub\nid_rsa.gitlab\nid_rsa.gitlab.pub\nid_rsa.gitee\nid_rsa.gitee.pub\n</code></pre> Bash<pre><code>ssh-agent bash\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitee\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#3-ssh-keys","title":"3\u3001\u6dfb\u52a0\u8bc6\u522b SSH keys \u65b0\u7684\u79c1\u94a5","text":"<ul> <li>Linux &amp; MacOS</li> </ul> Bash<pre><code>ssh-agent bash\nssh-add ~/.ssh/id_rsa.github\nssh-add ~/.ssh/id_rsa.gitlab\nssh-add ~/.ssh/id_rsa.gitee\n</code></pre> <ul> <li>win</li> <li>\u9700\u8981\u786e\u8ba4\u5f00\u542f ssh-agent</li> </ul> <p>\u5f00\u542f\u65b9\u6cd5\uff1a Fix Error unable to start ssh-agent service, error: 1058(xxxx)</p> <ol> <li>win + R, Go To services.msc</li> <li>Find And Check Is OpenSSH Authentication Agent Service Running</li> </ol> Bash<pre><code> ssh-agent bash\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitee\n</code></pre> <p>\u5728.ssh \u76ee\u5f55\u4e0b\u521b\u5efa config \u6587\u4ef6</p> <ul> <li>Linux &amp; MacOS</li> </ul> Bash<pre><code>#Default gitHub user Self\nHost github.com\n    HostName github.com\n    User git #\u9ed8\u8ba4\u5c31\u662fgit\uff0c\u53ef\u4ee5\u4e0d\u5199\n    IdentityFile ~/.ssh/id_rsa.github\n\n#Add gitLab user \n    Host git@gitlab.com\n    HostName gitlab.com\n    User git\n    IdentityFile ~/.ssh/id_rsa.gitlab\n\n# gitee\nHost gitee.com\n    Port 22\n    HostName gitee.com\n    User git\n    IdentityFile ~/.ssh/id_rsa.gitee\n</code></pre> <ul> <li>win</li> </ul> Bash<pre><code>#Default gitHub user Self\nHost github.com\n    HostName github.com\n    User git #\u9ed8\u8ba4\u5c31\u662fgit\uff0c\u53ef\u4ee5\u4e0d\u5199\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github\n\n#Add gitLab user \n    Host git@gitlab.com\n    HostName gitlab.com\n    User git\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\n\n# gitee\nHost gitee.com\n    Port 22\n    HostName gitee.com\n    User git\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\n</code></pre> Bash<pre><code>#Default gitHub user Self\nHost github.com\n    HostName github.com\n    User git #\u9ed8\u8ba4\u5c31\u662fgit\uff0c\u53ef\u4ee5\u4e0d\u5199\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github\n\n#Add gitLab user \n    Host jshcbd\n    HostName git.jshcbd.com.cn\n    User git\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\n\n# gitee\nHost gitee.com\n    Port 22\n    HostName gitee.com\n    User git\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\n</code></pre> <p>\u4e0b\u9762\u5bf9\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u5230\u7684\u914d\u7f6e\u5b57\u6bb5\u4fe1\u606f\u8fdb\u884c\u7b80\u5355\u89e3\u91ca\uff1a</p> <ul> <li>Host \u5b83\u6db5\u76d6\u4e86\u4e0b\u9762\u4e00\u4e2a\u6bb5\u7684\u914d\u7f6e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ed6\u6765\u66ff\u4ee3\u5c06\u8981\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740\u3002 \u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5b57\u6bb5\u6216\u901a\u914d\u7b26\u3002 \u5f53ssh\u7684\u65f6\u5019\u5982\u679c\u670d\u52a1\u5668\u5730\u5740\u80fd\u5339\u914d\u4e0a\u8fd9\u91ccHost\u6307\u5b9a\u7684\u503c\uff0c\u5219Host\u4e0b\u9762\u6307\u5b9a\u7684HostName\u5c06\u88ab\u4f5c\u4e3a\u6700\u7ec8\u7684\u670d\u52a1\u5668\u5730\u5740\u4f7f\u7528\uff0c\u5e76\u4e14\u5c06\u4f7f\u7528\u8be5Host\u5b57\u6bb5\u4e0b\u9762\u914d\u7f6e\u7684\u6240\u6709\u81ea\u5b9a\u4e49\u914d\u7f6e\u6765\u8986\u76d6\u9ed8\u8ba4\u7684/etc/ssh/ssh_config\u914d\u7f6e\u4fe1\u606f\u3002</li> <li>Port \u81ea\u5b9a\u4e49\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u4e3a22\uff0c\u53ef\u4e0d\u914d\u7f6e</li> <li>User \u81ea\u5b9a\u4e49\u7684\u7528\u6237\u540d\uff0c\u9ed8\u8ba4\u4e3agit\uff0c\u53ef\u4e0d\u914d\u7f6e</li> <li>HostName \u771f\u6b63\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740</li> <li>PreferredAuthentications \u6307\u5b9a\u4f18\u5148\u4f7f\u7528\u54ea\u79cd\u65b9\u5f0f\u9a8c\u8bc1\uff0c\u652f\u6301\u5bc6\u7801\u548c\u79d8\u94a5\u9a8c\u8bc1\u65b9\u5f0f</li> <li>IdentityFile \u6307\u5b9a\u672c\u6b21\u8fde\u63a5\u4f7f\u7528\u7684\u5bc6\u94a5\u6587\u4ef6</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#4-github-gitlabgitee-ssh","title":"4\u3001\u5728 github \u3001gitlab\u3001gitee \u7f51\u7ad9\u6dfb\u52a0 ssh","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#github","title":"Github","text":"<ul> <li>\u53ef\u4ee5\u7528cat\u547d\u4ee4\u628a \u516c\u94a5 \u7684\u5185\u5bb9\u6253\u51fa\u6765\u590d\u5236</li> </ul> Bash<pre><code># \u8fdb\u5165.ssh \u76ee\u5f55\u4e0b\ncat id_rsa.github\n</code></pre> <ul> <li>\u76f4\u8fbe\u5730\u5740\uff1ahttps://github.com/settings/keys</li> <li>\u8fc7\u7a0b\u5982\u4e0b\uff1a</li> <li>\u767b\u5f55 Github</li> <li>\u70b9\u51fb\u53f3\u4e0a\u65b9\u7684\u5934\u50cf\uff0c\u70b9\u51fb settings</li> <li>\u9009\u62e9 SSH key</li> <li>\u70b9\u51fb Add SSH key</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#gitlab","title":"Gitlab","text":"<ul> <li>\u6ce8\uff1a\u6b64\u5904\u7684 gitlab \u662f\u516c\u53f8\u7684\u79c1\u6709\u5e93</li> </ul> <p>\u76f4\u8fbe\u5730\u5740\uff1ahttps://gitlab.com/profile/keys</p> <ol> <li>\u767b\u5f55 Gitlab</li> <li>\u70b9\u51fb\u53f3\u4e0a\u65b9\u7684\u5934\u50cf\uff0c\u70b9\u51fb settings</li> <li>\u540e\u7eed\u6b65\u9aa4\u5982 Github</li> </ol>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#gitee","title":"Gitee / \u7801\u4e91","text":"<p>\u76f4\u8fbe\u5730\u5740\uff1ahttps://gitee.com/profile/sshkeys</p> <ol> <li>\u767b\u5f55 Gitee</li> <li>\u70b9\u51fb\u53f3\u4e0a\u65b9\u7684\u5934\u50cf\uff0c\u70b9\u51fb \u8bbe\u7f6e</li> <li>\u540e\u7eed\u6b65\u9aa4\u5982 Github</li> </ol> <p>\u6dfb\u52a0\u8fc7\u7a0b \u7801\u4e91 \u4f1a\u63d0\u793a\u4f60\u8f93\u5165\u4e00\u6b21\u4f60\u7684 Gitee \u5bc6\u7801 \uff0c\u786e\u8ba4\u540e\u5373\u6dfb\u52a0\u5b8c\u6bd5\u3002</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#5","title":"5\u3001 \u6d4b\u8bd5\u662f\u5426\u8fde\u63a5\u6210\u529f","text":"<p>\u7531\u4e8e\u6bcf\u4e2a\u6258\u7ba1\u5546\u7684\u4ed3\u5e93\u90fd\u6709\u552f\u4e00\u7684\u540e\u7f00\uff0c\u6bd4\u5982 Github \u7684\u662f git@github.com:*\u3002 \u6240\u4ee5\u53ef\u4ee5\u8fd9\u6837\u6d4b\u8bd5\uff1a ssh -T git@github.com \u800c gitlab \u7684\u53ef\u4ee5\u8fd9\u6837\u6d4b\u8bd5\uff1a ssh -T git@gitlab.corp.xyz.com \u5982\u679c\u80fd\u770b\u5230\u4e00\u4e9b Welcome \u4fe1\u606f\uff0c\u8bf4\u660e\u5c31\u662f OK \u7684\u4e86</p> <ul> <li>ssh -T git@github.com</li> <li>ssh -T git@gitlab.com</li> <li>ssh -T git@gitee.com</li> </ul> Bash<pre><code>(base) PS C:\\Users\\jhc142.JSHCBD\\.ssh&gt; ssh -T git@git.jshcbd.com.cn\nWelcome to GitLab, @sswang!\n(base) PS C:\\Users\\jhc142.JSHCBD\\.ssh&gt; ssh -T git@gitee.com\nHi sswfive(@sswfive)! You've successfully authenticated, but GITEE.COM does not provide shell access.\n(base) PS C:\\Users\\jhc142.JSHCBD\\.ssh&gt; ssh -T git@github.com\nHi sswfive! You've successfully authenticated, but GitHub does not provide shell access.\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/","title":"git\u4f7f\u7528\u603b\u7ed3","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#git","title":"Git\u5b66\u4e60\u8d44\u6599","text":"<ul> <li>\u5728\u7ebf\u5b66\u4e60\u7f51\u7ad9</li> <li>https://git-scm.com/book/en/v2</li> <li>https://github.com/bingohuang/progit2-gitbook</li> <li>git - \u7b80\u660e\u6307\u5357</li> <li>\u56fe\u89e3Git</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#status","title":"status: \u67e5\u770b\u72b6\u6001","text":"Bash<pre><code>git status \ngit status -s\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#add","title":"add: \u6dfb\u52a0\u6587\u4ef6\u81f3\u7f13\u5b58\u533a","text":"Bash<pre><code>git add -i   # \u4ea4\u4e92\u5f0f\u63d0\u4ea4\ngit add .    # \u6dfb\u52a0\u6240\u6709\u53d8\u66f4\u7684\u6587\u4ef6\ngit add xxx  # \u6dfb\u52a0\u6307\u5b9a\u7684\u6587\u4ef6\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#branch","title":"branch: \u5206\u652f\u7ba1\u7406","text":"Bash<pre><code>git branch            # \u67e5\u770b\u672c\u5730\u6240\u6709\u5206\u652f\ngit branch -r         # \u67e5\u770b\u8fdc\u7a0b\u6240\u6709\u5206\u652f\ngit branch -a         # \u67e5\u770b\u672c\u5730\u53ca\u8fdc\u7a0b\u7684\u6240\u6709\u5206\u652f\ngit branch --all      # \u540c\u4e0a\ngit branch -d \u5206\u652f\u540d   # \u5220\u9664\u672c\u5730\u5206\u652f\n\ngit checkout \u5206\u652f         # \u5207\u6362\u5206\u652f\uff1a\n\ngit push origin -d \u5206\u652f\u540d  # \u5220\u9664\u8fdc\u7a0b\u5206\u652f\n\ngit remote show origin    # \u67e5\u770b\u8fdc\u7a0b\u5206\u652f\u548c\u672c\u5730\u5206\u652f\u7684\u5bf9\u5e94\u5173\u7cfb\n\ngit remote prune origin   # \u5220\u9664\u8fdc\u7a0b\u5df2\u7ecf\u5220\u9664\u8fc7\u7684\u5206\u652f\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#fetch","title":"fetch: \u66f4\u65b0","text":"Bash<pre><code>git fetch   # \u5c06\u67d0\u4e2a\u8fdc\u7a0b\u4e3b\u673a\u7684\u66f4\u65b0\uff0c\u5168\u90e8\u53d6\u56de\u672c\u5730\uff1a\n\ngit fetch origin master   # \u4ece\u8fdc\u7a0b\u7684origin\u4ed3\u5e93\u7684master\u5206\u652f\u4e0b\u8f7d\u4ee3\u7801\u5230\u672c\u5730\u7684origin master\n\ngit fetch origin master:temp   # \u4ece\u8fdc\u7a0b\u7684origin\u4ed3\u5e93\u7684master\u5206\u652f\u4e0b\u8f7d\u5230\u672c\u5730\u5e76\u65b0\u5efa\u4e00\u4e2a\u5206\u652ftemp\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#diff","title":"diff: \u5bf9\u6bd4","text":"Bash<pre><code>\u6bd4\u8f83master\u5206\u652f\u548ctemp\u5206\u652f\u7684\u4e0d\u540c\ngit diff temp\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#log","title":"log: \u65e5\u5fd7","text":"Bash<pre><code>git log -p master..origin/master   # \u6bd4\u8f83\u672c\u5730\u7684\u4ed3\u5e93\u548c\u8fdc\u7a0b\u4ed3\u5e93\u7684\u533a\u522b\ngit log -p\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#archive","title":"archive: \u6253\u5305","text":"Bash<pre><code># --format \u8868\u793a\u6253\u5305\u7684\u683c\u5f0f\uff0c\u5982 zip\uff0c-v \u8868\u793a\u5bf9\u5e94\u7684 tag \u540d\uff0c\u540e\u9762\u8ddf\u7684\u662f tag \u540d\uff0c\u5982 v0.1\ngit archive -v -format=zip v0.1&gt;v0.1.zip\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#stash","title":"stash:","text":"<ul> <li>\u4fee\u6539\u7684\u6587\u4ef6\u5728\u672c\u5730\uff0c\u8fd8\u6ca1\u6709add \u548ccommit,</li> <li>\u6b64\u65f6\u60f3\u5207\u6362\u5206\u652f\uff0c\u4e0d\u60f3\u63d0\u4ea4\uff0c\u53ef\u4ee5\u5148\u7528stash\u7f13\u5b58\u8d77\u6765\uff0c\u5207\u56de\u6765\u540e\uff0c\u518d\u8fd8\u539f\u3002</li> </ul> Bash<pre><code>git stash\ngit stash save \"test-cmd-stash\"  # \u6267\u884c\u5b58\u50a8\u65f6\uff0c\u6dfb\u52a0\u5907\u6ce8\ngit stash list                   # \u67e5\u770bstash\u4e86\u54ea\u4e9b\u5b58\u50a8\ngit stash drop                   # \u5220\u9664stash\u6682\u5b58\u533a\ngit stash pop                    # \u4e0d\u5220\u9664stash\u6682\u5b58\u533a\uff0c\u53ef\u591a\u6b21\u5e94\u7528\ngit stash apply                  # \u5e94\u7528\u67d0\u4e2a\u5b58\u50a8,\u4f46\u4e0d\u4f1a\u628a\u5b58\u50a8\u4ece\u5b58\u50a8\u5217\u8868\u4e2d\u5220\u9664\ngit stash clear                  # \u6e05\u7a7a\u6808\u4e2d\u6240\u6709\u8bb0\u5f55(\u5220\u9664\u6240\u6709\u7f13\u5b58\u7684stash)\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#submodule","title":"submodule\uff1a","text":"<ul> <li> <p>\u53c2\u80031\uff1asubmodule</p> </li> <li> <p>\u53c2\u80032\uff1asubmodule</p> </li> </ul> Bash<pre><code>git submodule add git@github.com:jjz/pod-library.git pod-library\ngit add .gitmodules pod-ibrary\ngit commit -m \"pod-library submodule\"\ngit submodule init\ngit push\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#subtree","title":"subtree\uff1a","text":"Bash<pre><code>git subtree pull --prefix=&lt;\u5b50\u76ee\u5f55\u540d&gt; &lt;\u8fdc\u7a0b\u5206\u652f&gt; &lt;\u5206\u652f&gt; \n\n#\u5c06 B \u4ed3\u5e93\u6dfb\u52a0\u4e3a A \u4ed3\u5e93\u7684\u4e00\u4e2a\u5b50\u76ee\u5f55\ngit subtree add --prefix=SubFolder/B https://github.com/walterlv/walterlv.git master\n\n#\u5c06 A \u4ed3\u5e93\u4e2d\u7684 B \u5b50\u76ee\u5f55\u63a8\u9001\u56de B \u4ed3\u5e93\ngit subtree push --prefix=SubFolder/B https://github.com/walterlv/walterlv.git master\n\n#\u5c06 B \u4ed3\u5e93\u4e2d\u7684\u65b0\u5185\u5bb9\u62c9\u56de A \u4ed3\u5e93\u7684\u5b50\u76ee\u5f55\ngit subtree pull --prefix=SubFolder/B walterlv master\n\n# \u5c06\u9700\u8981\u5206\u79bb\u7684\u76ee\u5f55\u7684\u63d0\u4ea4\u65e5\u5fd7\u5206\u79bb\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u4e34\u65f6\u7248\u672c\ngit subtree split -P &lt;name-of-folder&gt; -b &lt;name-of-new-branch&gt;\n\n# example\n- name: Publish\nuses: hlyani/gitbook-deploy-action@master\nenv:\n    ACCESS_TOKEN: ${{ secrets.testaction }}\n    BASE_BRANCH: source\n    BRANCH: master\n    FOLDER: docs\ngit add -f $FOLDER\ngit commit -m \"Deploying to ${BRANCH} from ${BASE_BRANCH:-master} ${GITHUB_SHA}\" --quiet\ngit push $REPOSITORY_PATH `git subtree split --prefix $FOLDER ${BASE_BRANCH:-master}`:$BRANCH --force\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_1","title":"\u5e38\u7528\u547d\u4ee4\u5b9e\u8df5","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#git_1","title":"\u914d\u7f6egit\u8d26\u53f7","text":"<ul> <li>\u770b\u770b\u5f53\u524d\u7684\u914d\u7f6e</li> </ul> Bash<pre><code>$ git config --list\n</code></pre> <ul> <li>\u914d\u7f6e\u7528\u6237\u540d</li> <li>\u6700\u597d\u548c\u4ed3\u5e93\u8d26\u53f7\u4e00\u81f4</li> </ul> Bash<pre><code>$ git config --global user.name \"&lt;name&gt;\"\n#  --global\u4e3a\u53ef\u9009\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u8868\u793a\u914d\u7f6e\u5168\u5c40\u4fe1\u606f\n</code></pre> <ul> <li>\u914d\u7f6e\u90ae\u7bb1</li> <li>\u6700\u597d\u548c\u4ed3\u5e93\u90ae\u7bb1\u4e00\u81f4</li> </ul> Bash<pre><code>$ git config --global user.email \"&lt;email address&gt;\"\n</code></pre> <ul> <li>\u957f\u547d\u4ee4\u7b80\u5316</li> </ul> Bash<pre><code>$ git config --global alias.logg \"log --graph --decorate --abbrev-commit --all\"\n# \u4e4b\u540e\u5c31\u53ef\u4ee5\u5f00\u5fc3\u5730\u4f7f\u7528 git log\u4e86\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_2","title":"\u5728\u67d0\u4e00\u4e2a\u5206\u652f\u4e0b\u7684\u5e38\u7528\u64cd\u4f5c","text":"Bash<pre><code>git status\ngit add -a\ngit status\ngit commit -m 'xxx'\ngit pull --rebase\ngit push origin xxbran\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_3","title":"\u4ee3\u7801\u63d0\u4ea4\u64cd\u4f5c","text":"<ol> <li>\u6587\u4ef6\u589e\u5220\u6539\uff0c\u53d8\u4e3a\u5df2\u4fee\u6539\u72b6\u6001</li> <li>git add ,\u53d8\u4e3a\u5df2\u6682\u5b58\u72b6\u6001</li> </ol> Bash<pre><code>git status\ngit add --all # \u5f53\u524d\u9879\u76ee\u4e0b\u7684\u6240\u6709\u66f4\u6539\ngit add .  # \u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u66f4\u6539\ngit add xx/xx.py xx/xx2.py  # \u6dfb\u52a0\u67d0\u51e0\u4e2a\u6587\u4ef6\n</code></pre> <ol> <li>git commit, \u53d8\u4e3a\u5df2\u63d0\u4ea4\u72b6\u6001</li> </ol> Bash<pre><code>git commit -m \"&lt;\u8fd9\u91cc\u5199commit\u7684\u63cf\u8ff0&gt;\"\n</code></pre> <ol> <li>git push \uff0c\u53d8\u4e3a\u5df2\u63a8\u9001\u72b6\u6001</li> </ol> Bash<pre><code>git push -u origin master # \u7b2c\u4e00\u6b21\u9700\u8981\u5173\u8054\u4e0a\ngit push # \u4e4b\u540e\u518d\u63a8\u9001\u5c31\u4e0d\u7528\u6307\u660e\u5e94\u8be5\u63a8\u9001\u7684\u8fdc\u7a0b\u5206\u652f\u4e86\ngit branch # \u53ef\u4ee5\u67e5\u770b\u672c\u5730\u4ed3\u5e93\u7684\u5206\u652f\ngit branch -a # \u53ef\u4ee5\u67e5\u770b\u672c\u5730\u4ed3\u5e93\u548c\u672c\u5730\u8fdc\u7a0b\u4ed3\u5e93(\u8fdc\u7a0b\u4ed3\u5e93\u7684\u672c\u5730\u955c\u50cf)\u7684\u6240\u6709\u5206\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_4","title":"\u4ee3\u7801\u64a4\u9500\u63d0\u4ea4\u64cd\u4f5c","text":"<ul> <li>\u5df2\u4fee\u6539\u3001\u4f46\u672a\u6682\u5b58</li> <li>diff\u3001checkout \u3001clean</li> </ul> Bash<pre><code>git diff # \u5217\u51fa\u6240\u6709\u7684\u4fee\u6539\ngit diff xx/xx.py xx/xx2.py # \u5217\u51fa\u67d0(\u51e0)\u4e2a\u6587\u4ef6\u7684\u4fee\u6539\n\ngit checkout # \u64a4\u9500\u9879\u76ee\u4e0b\u6240\u6709\u7684\u4fee\u6539\ngit checkout . # \u64a4\u9500\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u6240\u6709\u7684\u4fee\u6539\ngit checkout xx/xx.py xx/xx2.py # \u64a4\u9500\u67d0\u51e0\u4e2a\u6587\u4ef6\u7684\u4fee\u6539\ngit clean -f # untracked\u72b6\u6001\uff0c\u64a4\u9500\u65b0\u589e\u7684\u6587\u4ef6\ngit clean -df # untracked\u72b6\u6001\uff0c\u64a4\u9500\u65b0\u589e\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\n\n# Untracked files:\n#  (use \"git add &lt;file&gt;...\" to include in what will be committed)\n#\n#   xxx.py\n</code></pre> <ul> <li>\u5df2\u6682\u5b58\u3001\u672a\u63d0\u4ea4</li> <li>\u6b64\u65f6\uff0c\u5df2\u7ecf\u6267\u884c\u8fc7git add, \u4f46\u672a\u6267\u884cgit commit \uff0c\u7528\u4e8egit diff\u5df2\u7ecf\u770b\u4e0d\u5230\u4efb\u4f55\u4fee\u6539\uff08git diff \u68c0\u67e5\u7684\u662f\u5de5\u4f5c\u533a\u4e0e\u6682\u5b58\u533a\u4e4b\u95f4\u7684\u5dee\u5f02\uff09</li> </ul> Bash<pre><code>git diff --cached # \u8fd9\u4e2a\u547d\u4ee4\u663e\u793a\u6682\u5b58\u533a\u548c\u672c\u5730\u4ed3\u5e93\u7684\u5dee\u5f02\n\ngit reset # \u6682\u5b58\u533a\u7684\u4fee\u6539\u6062\u590d\u5230\u5de5\u4f5c\u533a\ngit reset --soft # \u4e0egit reset\u7b49\u4ef7\uff0c\u56de\u5230\u5df2\u4fee\u6539\u72b6\u6001\uff0c\u4fee\u6539\u7684\u5185\u5bb9\u4ecd\u7136\u5728\u5de5\u4f5c\u533a\u4e2d\ngit reset --hard # \u56de\u5230\u672a\u4fee\u6539\u72b6\u6001\uff0c\u6e05\u7a7a\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\n\n# git reset --hard \u64cd\u4f5c\u7b49\u4ef7\u4e8e git reset \u548c git checkout 2\u6b65\u64cd\u4f5c\n</code></pre> <ul> <li>\u5df2\u63d0\u4ea4\u3001\u672a\u63a8\u9001</li> <li>\u6267\u884c\u5b8ccommit\u4e4b\u540e\uff0c\u4f1a\u5728\u4ed3\u5e93\u4e2d\u751f\u6210\u4e00\u4e2a\u7248\u672c\u53f7(hash\u503c)\uff0c\u6807\u5fd7\u8fd9\u6b21\u63d0\u4ea4\u3002\u4e4b\u540e\u4efb\u4f55\u65f6\u5019\uff0c\u90fd\u53ef\u4ee5\u501f\u52a9\u8fd9\u4e2ahash\u503c\u56de\u9000\u5230\u8fd9\u6b21\u63d0\u4ea4\u3002</li> </ul> Bash<pre><code>git diff &lt;branch-name1&gt; &lt;branch-name2&gt; # \u6bd4\u8f832\u4e2a\u5206\u652f\u4e4b\u95f4\u7684\u5dee\u5f02\ngit diff master origin/master # \u67e5\u770b\u672c\u5730\u4ed3\u5e93\u4e0e\u672c\u5730\u8fdc\u7a0b\u4ed3\u5e93\u7684\u5dee\u5f02\n\ngit reset --hard origin/master # \u56de\u9000\u4e0e\u672c\u5730\u8fdc\u7a0b\u4ed3\u5e93\u4e00\u81f4\ngit reset --hard HEAD^ # \u56de\u9000\u5230\u672c\u5730\u4ed3\u5e93\u4e0a\u4e00\u4e2a\u7248\u672c\ngit reset --hard &lt;hash code&gt; # \u56de\u9000\u5230\u4efb\u610f\u7248\u672c\ngit reset --soft/git reset # \u56de\u9000\u4e14\u56de\u5230\u5df2\u4fee\u6539\u72b6\u6001\uff0c\u4fee\u6539\u4ecd\u4fdd\u7559\u5728\u5de5\u4f5c\u533a\u4e2d\u3002\n</code></pre> <ul> <li>\u5df2\u63a8\u9001\u5230\u8fdc\u7a0b</li> </ul> Bash<pre><code>$ git push -f orgin master # \u5f3a\u5236\u8986\u76d6\u8fdc\u7a0b\u5206\u652f\n\n$ git push -f # \u5982\u679c\u4e4b\u524d\u5df2\u7ecf\u7528 -u \u5173\u8054\u8fc7\uff0c\u5219\u53ef\u7701\u7565\u5206\u652f\u540d\n\n# \u614e\u7528\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u672c\u5730\u5206\u652f\u6bd4\u8fdc\u7a0b\u8981\u65b0\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u63a8\u9001\u5230\u8fdc\u7a0b\uff0c\u4f46\u6709\u65f6\u63a8\u9001\u5230\u8fdc\u7a0b\u540e\u53d1\u73b0\u6709\u95ee\u9898\uff0c\u8fdb\u884c\u4e86\u7248\u672c\u56de\u9000\uff0c\u65e7\u7248\u672c\u6216\u8005\u5206\u53c9\u7248\u672c\u63a8\u9001\u5230\u8fdc\u7a0b\uff0c\u9700\u8981\u6dfb\u52a0 -f\u53c2\u6570\uff0c\u8868\u793a\u5f3a\u5236\u8986\u76d6\u3002\n</code></pre> <ul> <li>\u53bb\u6389\u67d0\u4e2acommit</li> </ul> Bash<pre><code>$ git revert &lt;commit-hash&gt;\n# \u5b9e\u8d28\u662f\u65b0\u5efa\u4e86\u4e00\u4e2a\u4e0e\u539f\u6765\u5b8c\u5168\u76f8\u53cd\u7684commit\uff0c\u62b5\u6d88\u4e86\u539f\u6765commit\u7684\u6548\u679c\n</code></pre> <ul> <li>reset\u56de\u9000\u9519\u8bef\u6062\u590d</li> </ul> Bash<pre><code>$ git reflog #\u67e5\u770b\u6700\u8fd1\u64cd\u4f5c\u8bb0\u5f55\n$ git reset --hard HEAD{5} #\u6062\u590d\u5230\u524d\u4e94\u7b14\u64cd\u4f5c\n$ git pull origin backend-log #\u518d\u6b21\u62c9\u53d6\u4ee3\u7801\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_5","title":"\u5173\u8054\u8fdc\u7a0b\u4ed3\u5e93","text":"<ul> <li>\u5982\u679c\u8fd8\u6ca1\u6709Git\u4ed3\u5e93\uff0c\u5219\u9700\u8981\u521d\u59cb\u5316git</li> </ul> Bash<pre><code>$ git init\n</code></pre> <ul> <li>\u5982\u679c\u60f3\u5173\u8054\u8fdc\u7a0b\u4ed3\u5e93</li> </ul> Bash<pre><code>$ git remote add &lt;name&gt; &lt;git-repo-url&gt;\n# \u4f8b\u5982 git remote add origin https://github.com/xxxxxx # \u662f\u8fdc\u7a0b\u4ed3\u5e93\u7684\u540d\u79f0\uff0c\u901a\u5e38\u4e3a origin\n</code></pre> <ul> <li>\u5982\u679c\u60f3\u5173\u8054\u591a\u4e2a\u8fdc\u7a0b\u4ed3\u5e93</li> </ul> Bash<pre><code>$ git remote add &lt;name&gt; &lt;another-git-repo-url&gt;\n# \u4f8b\u5982 git remote add coding https://coding.net/xxxxxx\n</code></pre> <ul> <li>\u5982\u679c\u60f3\u67e5\u770b\u5df2\u5173\u8054\u7684\u4ed3\u5e93\uff08\u5fd8\u4e86\u5173\u8054\u4e86\u54ea\u4e9b\u4ed3\u5e93\u6216\u5730\u5740\uff09</li> </ul> Bash<pre><code>$ git remote -v\n# origin https://github.com/gzdaijie/koa-react-server-render-blog.git (fetch)\n# origin https://github.com/gzdaijie/koa-react-server-render-blog.git (push)\n</code></pre> <ul> <li>\u5982\u679c\u6709\u8fdc\u7a0b\u4ed3\u5e93\uff0c\u60f3\u9700\u8981clone\u5230\u672c\u5730</li> </ul> Bash<pre><code>$ git clone &lt;git-repo-url&gt;\n# \u5173\u8054\u7684\u8fdc\u7a0b\u4ed3\u5e93\u5c06\u88ab\u547d\u540d\u4e3aorigin\uff0c\u8fd9\u662f\u9ed8\u8ba4\u7684\u3002\n</code></pre> <ul> <li>\u5982\u679c\u60f3\u628a\u522b\u4eba\u7684\u4ed3\u5e93\u5730\u5740\u6539\u4e3a\u81ea\u5df1\u7684</li> </ul> Bash<pre><code>$ git remote set-url origin &lt;your-git-url&gt;\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_6","title":"\u5e38\u7528\u5206\u652f\u64cd\u4f5c","text":"<ul> <li>\u5982\u679c\u60f3\u65b0\u5efa\u5206\u652f\u5e76\u5207\u6362</li> </ul> Bash<pre><code>$ git checkout -b &lt;new-branch-name&gt;\n# \u4f8b\u5982 git checkout -b dev\n# \u5982\u679c\u4ec5\u65b0\u5efa\uff0c\u4e0d\u5207\u6362\uff0c\u5219\u53bb\u6389\u53c2\u6570 -b\n</code></pre> <ul> <li>\u770b\u770b\u5f53\u524d\u6709\u54ea\u4e9b\u5206\u652f</li> </ul> Bash<pre><code>$ git branch\n# * dev\n#   master # \u6807*\u53f7\u7684\u4ee3\u8868\u5f53\u524d\u6240\u5728\u7684\u5206\u652f\n</code></pre> <ul> <li>\u770b\u770b\u5f53\u524d\u672c\u5730&amp;\u8fdc\u7a0b\u6709\u54ea\u4e9b\u5206\u652f</li> </ul> Bash<pre><code>$ git branch -a\n# * dev\n#   master\n#   remotes/origin/master\n</code></pre> <ul> <li>\u5207\u6362\u5230\u73b0\u6709\u7684\u5206\u652f</li> </ul> Bash<pre><code>$ git checkout master\n</code></pre> <ul> <li>\u628adev\u5206\u652f\u5408\u5e76\u5230master\u5206\u652f</li> </ul> Bash<pre><code>$ git merge &lt;branch-name&gt;\n# \u4f8b\u5982 git merge dev\n</code></pre> <ul> <li>\u628a\u672c\u5730master\u5206\u652f\u63a8\u9001\u5230\u8fdc\u7a0b\u53bb</li> </ul> Bash<pre><code>$ git push origin master\n# \u4f60\u53ef\u4ee5\u4f7f\u7528git push -u origin master\u5c06\u672c\u5730\u5206\u652f\u4e0e\u8fdc\u7a0b\u5206\u652f\u5173\u8054\uff0c\u4e4b\u540e\u4ec5\u9700\u8981\u4f7f\u7528git push\u5373\u53ef\u3002\n</code></pre> <ul> <li>\u8fdc\u7a0b\u5206\u652f\u88ab\u522b\u4eba\u66f4\u65b0\u4e86\uff0c\u4f60\u60f3\u8981\u66f4\u65b0\u4ee3\u7801</li> </ul> Bash<pre><code>$ git pull origin &lt;branch-name&gt;\n# \u4e4b\u524d\u5982\u679cpush\u65f6\u4f7f\u7528\u8fc7-u\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7701\u7565\u4e3agit pull\n</code></pre> <ul> <li>\u672c\u5730\u6709\u4fee\u6539\uff0c\u80fd\u4e0d\u80fd\u5148git pull</li> </ul> Bash<pre><code>$ git stash # \u5de5\u4f5c\u533a\u4fee\u6539\u6682\u5b58\n$ git pull  # \u66f4\u65b0\u5206\u652f\n$ git stash pop # \u6682\u5b58\u4fee\u6539\u6062\u590d\u5230\u5de5\u4f5c\u533a\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#commit","title":"\u5e38\u7528commit\u64cd\u4f5c","text":"<ul> <li>\u4fee\u6539\u4e4b\u524d\u7684commit</li> <li>\u5c06HEAD\u79fb\u52a8\u5230\u9700\u8981\u4fee\u6539\u7684commit\u4e0a</li> </ul> Text Only<pre><code>git rebase eb69dddd^ --interactive\n</code></pre> <ul> <li>\u8ffd\u52a0\u6539\u52a8\u5230\u63d0\u4ea4</li> </ul> Text Only<pre><code>git commit --amend\n</code></pre> <ul> <li>\u79fb\u52a8HEAD\u56de\u5230\u6700\u65b0\u7684commit</li> </ul> Text Only<pre><code>git rebase --continue\n</code></pre> <ul> <li>\u5f3a\u5236\u63d0\u4ea4</li> </ul> Text Only<pre><code>git push origin master -f\n</code></pre> <ul> <li>\u627e\u5230\u8981\u5408\u5e76 commit \u7684\u524d\u4e00\u4e2acommit</li> </ul> Text Only<pre><code>git rebase -i sdfs1easdasd\n# git rebase -i HEAD~3\n</code></pre> <ul> <li>\u5c06\u8981\u5408\u5e76\u7684 commit \u524d\u6539\u4e3a squash</li> </ul> Text Only<pre><code>pick asdasd Add second commit\nsquash asdasd Add third commit\n:wq\n</code></pre> <ul> <li>\u64cd\u4f5c\u5931\u8bef --abort \u64a4\u9500</li> </ul> Text Only<pre><code>git rebase --abort\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_7","title":"\u7248\u672c\u56de\u9000\u4e0e\u524d\u8fdb\u64cd\u4f5c","text":"<ul> <li>\u67e5\u770b\u5386\u53f2\u7248\u672c</li> </ul> Bash<pre><code>$ git log\n</code></pre> <ul> <li>\u4f60\u53ef\u80fd\u89c9\u5f97\u8fd9\u6837\u7684log\u4e0d\u597d\u770b\uff0c\u8bd5\u8bd5\u8fd9\u4e2a</li> </ul> Bash<pre><code>$ git log --graph --decorate --abbrev-commit --all\n</code></pre> <ul> <li>\u5207\u6362\u5230\u4efb\u610f\u7248\u672c</li> </ul> Bash<pre><code>$ git checkout a5d88ea\n# hash\u7801\u5f88\u957f\uff0c\u901a\u5e386-7\u4f4d\u5c31\u591f\u4e86\n</code></pre> <ul> <li>\u8fdc\u7a0b\u4ed3\u5e93\u7684\u7248\u672c\u5f88\u65b0\uff0c\u4f46\u4f60\u8fd8\u662f\u60f3\u7528\u8001\u7248\u672c\u8986\u76d6</li> </ul> Bash<pre><code>$ git push origin master --force\n# \u6216\u8005 git push -f origin master\n</code></pre> <ul> <li>\u89c9\u5f97commit\u592a\u591a\u4e86\uff0c\u591a\u4e2acommit\u5408\u5e76\u4e3a1\u4e2a</li> </ul> Bash<pre><code>$ git rebase -i HEAD~4\n# \u8fd9\u4e2a\u547d\u4ee4\uff0c\u5c06\u6700\u8fd14\u4e2acommit\u5408\u5e76\u4e3a1\u4e2a\uff0cHEAD\u4ee3\u8868\u5f53\u524d\u7248\u672c\u3002\u5c06\u8fdb\u5165VIM\u754c\u9762\uff0c\u4f60\u53ef\u4ee5\u4fee\u6539\u63d0\u4ea4\u4fe1\u606f\u3002\u63a8\u9001\u5230\u8fdc\u7a0b\u5206\u652f\u7684commit\uff0c\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u591a\u4eba\u5408\u4f5c\u65f6\uff0c\u901a\u5e38\u4e0d\u5efa\u8bae\u4fee\u6539\u5386\u53f2\u3002\n</code></pre> <ul> <li>\u60f3\u56de\u9000\u5230\u67d0\u4e00\u4e2a\u7248\u672c</li> </ul> Bash<pre><code>$ git reset --hard &lt;hash&gt;\n# \u4f8b\u5982 git reset --hard a3hd73r\n# --hard\u4ee3\u8868\u4e22\u5f03\u5de5\u4f5c\u533a\u7684\u4fee\u6539\uff0c\u8ba9\u5de5\u4f5c\u533a\u4e0e\u7248\u672c\u4ee3\u7801\u4e00\u6a21\u4e00\u6837\uff0c\u4e0e\u4e4b\u5bf9\u5e94\uff0c--soft\u53c2\u6570\u4ee3\u8868\u4fdd\u7559\u5de5\u4f5c\u533a\u7684\u4fee\u6539\u3002\n</code></pre> <ul> <li>\u60f3\u56de\u9000\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\uff0c\u6709\u6ca1\u6709\u7b80\u4fbf\u65b9\u6cd5\uff1f</li> </ul> Bash<pre><code>$ git reset --hard HEAD^\n</code></pre> <ul> <li>\u56de\u9000\u5230\u4e0a\u4e0a\u4e2a\u7248\u672c\u5462\uff1f</li> </ul> Bash<pre><code>$ git reset --hard HEAD^^\n# HEAD^^\u53ef\u4ee5\u6362\u4f5c\u5177\u4f53\u7248\u672chash\u503c\u3002\n</code></pre> <ul> <li>\u56de\u9000\u9519\u4e86\uff0c\u80fd\u4e0d\u80fd\u524d\u8fdb\u5440\uff1f</li> </ul> Bash<pre><code>$ git reflog\n# \u8fd9\u4e2a\u547d\u4ee4\u4fdd\u7559\u4e86\u6700\u8fd1\u6267\u884c\u7684\u64cd\u4f5c\u53ca\u6240\u5904\u7684\u7248\u672c\uff0c\u6bcf\u6761\u547d\u4ee4\u524d\u7684hash\u503c\uff0c\u5219\u662f\u5bf9\u5e94\u7248\u672c\u7684hash\u503c\u3002\u4f7f\u7528\u4e0a\u8ff0\u7684git checkout \u6216\u8005 git reset\u547d\u4ee4 \u5219\u53ef\u4ee5\u68c0\u51fa\u6216\u56de\u9000\u5230\u5bf9\u5e94\u7248\u672c\u3002\n</code></pre> <ul> <li>\u521a\u521acommit\u4fe1\u606f\u5199\u9519\u4e86\uff0c\u53ef\u4ee5\u4fee\u6539\u5417\uff1f</li> </ul> Bash<pre><code>$ git commit --amend\n</code></pre> <ul> <li>\u770b\u770b\u5f53\u524d\u72b6\u6001\u5427</li> </ul> Bash<pre><code>$ git status\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#gitignore","title":"gitignore\u6587\u4ef6","text":"<ul> <li>\u4e0d\u540c\u8bed\u8a00gitignore\u914d\u7f6e</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/gitflow_usage/","title":"gitflow\u7684\u4f7f\u7528","text":"<p>\u53c2\u8003\u94fe\u63a5\uff1agit-flow \u5907\u5fd8\u5f55</p>","tags":["Git","Tools"]},{"location":"toolbox/git/gitflow_usage/#_1","title":"\u5b89\u88c5","text":"Bash<pre><code># Mac install\nbrew install git-flow-avh\n\n# Linux  install\napt-get install git-flow  # ubuntu\nyum install git-flow      # Centos\n\n# window install\nwget -q -O - --no-check-certificate https://raw.github.com/petervanderdoes/gitflow-avh/develop/contrib/gitflow-installer.sh install stable | bash\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/gitflow_usage/#_2","title":"\u5e38\u7528\u547d\u4ee4","text":"Bash<pre><code># \u521d\u59cb\u5316(\u524d\u63d0\uff1a \u5728\u4e00\u4e2a\u73b0\u6709\u7684git\u5e93\u5185)\ngit flow init \n\n# \u65b0\u589e\u4e00\u4e2a\u5206\u652f(\u57fa\u4e8edevelop\u5206\u652f\u521b\u5efa)\ngit flow feature start myfeature\n\n# \u5b8c\u6210\u4e00\u4e2a\u5206\u652f\u7279\u6027\uff08\u5408\u5e76\u5230devlop\u5206\u652f\u4e0a,\u5e76\u5220\u9664\u5206\u652fmyfeature\uff09\ngit flow feature finish myfeature \n\n# \u53d1\u5e03\u4e00\u4e2a\u65b0\u5206\u652f\u5230\u670d\u52a1\u5668\u4e0a(\u5728\u6b64\u529f\u80fd\u7279\u6027\u6ca1\u5b8c\u6210\u65f6\uff0c\u5c06\u672c\u5730\u5206\u652f\u63a8\u9001\u5230\u8fdc\u7aef\u4ed3\u5e93)\ngit push --set-upstream orgin myfeature\ngit add . &amp;&amp; git commit -m \"feat: xxxxx\"\ngit flow feature publish myfeature\n\n# \u62c9\u53d6\u4e00\u4e2a\u53d1\u5e03\u7684\u65b0\u5206\u652f\u7279\u6027\uff08\u5728\u534f\u540c\u65f6\uff0c\u4e00\u822c\u7528\u5230\uff09\ngit flow feature pull origin myfeature\n\u6216\ngit flow feature track myfeature  # \u6839\u636e\u5728origin\u4e0a\u7684\u65b0\u7279\u6027\u5206\u652f\n</code></pre>","tags":["Git","Tools"]},{"location":"tags/","title":"Tags","text":"<p>Tip</p> <p>\u4ee5\u4e0b\u662f\u76f8\u5173\u6807\u7b7e\u7684\u5217\u8868</p>"},{"location":"tags/#bug","title":"Bug","text":"<ul> <li>Conda\u4fee\u6539\u865a\u62df\u73af\u5883\u540d\u5bfc\u81f4\u5f02\u5e38</li> <li>Jupyter\u8fd0\u884casyncio run\u62a5\u9519</li> <li>Jupyter matplotlib\u753b\u56fe\u4e2d\u6587\u5b57\u4f53\u7f3a\u5931</li> <li>Jupyterhub\u79bb\u7ebf\u90e8\u7f72\u8e29\u5751\u603b\u7ed3</li> <li>\u591a\u8bed\u8a00\u4e4b\u95f4\u7684RSA\u52a0\u89e3\u5bc6\u95ee\u9898</li> <li>window\u73af\u5883\u4e2dpip\u5b89\u88c5\u62a5\u9519</li> </ul>"},{"location":"tags/#docker","title":"Docker","text":"<ul> <li>Docker\u67b6\u6784\u548c\u539f\u7406\u5b66\u4e60</li> <li>Docker\u5e38\u7528\u547d\u4ee4\u901f\u67e5</li> <li>Docker\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u6c47\u603b</li> <li>\u67e5\u770bDocker\u5bb9\u5668\u542f\u52a8\u7684\u8be6\u7ec6\u547d\u4ee4\u53ca\u53c2\u6570</li> <li>Docker\u955c\u50cf\u65e0\u6cd5\u62c9\u53d6\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848</li> <li>Docker\u5b89\u88c5\u5378\u8f7d\u6307\u5357</li> <li>Docker\u5b9e\u7528\u6280\u5de7</li> <li>docker-registry\u642d\u5efa\u4e0e\u4f7f\u7528</li> <li>Dockerfile\u5e38\u7528\u547d\u4ee4\u4e0e\u7f16\u5199\u6307\u5357</li> <li>dockerignore\u6587\u4ef6</li> <li>docker-compose\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5\u6c47\u603b</li> <li>docker-compose\u4f7f\u7528\u603b\u7ed3</li> </ul>"},{"location":"tags/#dockercompose","title":"DockerCompose","text":"<ul> <li>docker-compose\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5\u6c47\u603b</li> <li>docker-compose\u4f7f\u7528\u603b\u7ed3</li> </ul>"},{"location":"tags/#git","title":"Git","text":"<ul> <li>git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5</li> <li>git\u5b9e\u7528\u914d\u7f6e</li> <li>git\u4f7f\u7528\u603b\u7ed3</li> <li>gitflow\u7684\u4f7f\u7528</li> </ul>"},{"location":"tags/#k8s","title":"K8S","text":"<ul> <li>k8s\u5305\u7ba1\u7406\u5de5\u5177Helm\u7684\u4f7f\u7528</li> <li>k8s\u5e38\u7528\u547d\u4ee4\u603b\u7ed3</li> <li>k8s\u90e8\u7f72\u5e38\u89c1\u95ee\u9898\u6c47\u603b</li> <li>k8s\u6838\u5fc3\u6982\u5ff5</li> <li>k8s\u7684Dashboard\u5b89\u88c5</li> <li>k8s\u4e2detcd\u6302\u8f7d\u5185\u5b58\u5377\u6b65\u9aa4</li> <li>k8s\u7684storageclass-nfs\u5b89\u88c5\u548c\u4f7f\u7528</li> <li>k8s\u5b9e\u7528\u5c0f\u6280\u5de7</li> <li>k8s\u5b9e\u7528\u5de5\u5177\u4e4bKtConnect</li> <li>kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.19.4)</li> <li>kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.27.9)</li> <li>k8s\u4e2dyaml\u6587\u4ef6\u7684\u7f16\u5199\u548c\u4f7f\u7528</li> </ul>"},{"location":"tags/#macos","title":"MacOS","text":"<ul> <li>Mac\u5e38\u7528\u5feb\u6377\u952e</li> </ul>"},{"location":"tags/#ops","title":"Ops","text":"<ul> <li>Centos\u7684yum\u6e90\u8bef\u5220\u89e3\u51b3\u65b9\u6cd5</li> <li>Mac\u4f7f\u7528brew services\u62a5\u9519</li> <li>\u670d\u52a1\u5668\u78c1\u76d8\u7a7a\u95f4\u6ee1\u7684\u89e3\u51b3\u529e\u6cd5</li> <li>win10\u7684cmd\u4e2d\u64cd\u4f5cgit\u4e2d\u6587\u4e71\u7801\u89e3\u51b3\u65b9\u6cd5</li> </ul>"},{"location":"tags/#softwareinstall","title":"SoftwareInstall","text":"<ul> <li>YARN\u96c6\u7fa4\u5b89\u88c5\u90e8\u7f72</li> <li>Etcd\u96c6\u7fa4\u90e8\u7f72</li> <li>Flink(On YARN)\u5b89\u88c5\u90e8\u7f72</li> <li>Hadoop\u5b89\u88c5\u90e8\u7f72</li> <li>Java\u73af\u5883\u5b89\u88c5</li> <li>kafka\u5b89\u88c5\u90e8\u7f72</li> <li>Mongodb\u7684\u5b89\u88c5\u6307\u5357</li> <li>Nginx\u90e8\u7f72</li> <li>PostgreSQL\u4e3b\u4ece\u90e8\u7f72</li> <li>RabbitMQ\u4ecb\u7ecd\u548c\u4f7f\u7528</li> <li>Redis\u4e3b\u4ece-\u54e8\u5175\u90e8\u7f72</li> <li>Spark(ON YARN\uff09\u5b89\u88c5\u90e8\u7f72</li> <li>Zabbix\u5e38\u7528\u914d\u7f6e</li> <li>Zookeeper\u5b89\u88c5\u90e8\u7f72</li> </ul>"},{"location":"tags/#thinking","title":"Thinking","text":"<ul> <li>\u5982\u4f55\u66f4\u806a\u660e\u7684\u505a\u4e8b\u60c5</li> <li>\u6280\u672f\u4e00\u8a00</li> <li>\u5982\u4f55\u9ad8\u6548\u5b66\u4e60\u5f00\u6e90\u9879\u76ee</li> <li>\u63d0\u95ee\u7684\u667a\u6167</li> <li>\u4e2a\u4eba\u6218\u7565\u4e0a\u7684\u805a\u7126\u548c\u653e\u5f03</li> <li>\u5b66\u4e60\u5e94\u8be5\u81ea\u5e95\u5411\u4e0a,\u8fd8\u662f\u81ea\u9876\u5411\u4e0b</li> </ul>"},{"location":"tags/#tools","title":"Tools","text":"<ul> <li>\u7504\u9009GPT-AI\u5de5\u5177</li> <li>\u5e38\u7528\u8f6f\u4ef6\u547d\u4ee4\u901f\u67e5</li> <li>\u7504\u9009\u5b9e\u7528\u8f6f\u4ef6</li> <li>\u5e38\u7528\u63d2\u4ef6\u96c6</li> <li>git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5</li> <li>git\u5b9e\u7528\u914d\u7f6e</li> <li>git\u4f7f\u7528\u603b\u7ed3</li> <li>gitflow\u7684\u4f7f\u7528</li> </ul>"}]}