
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="sswfive">
      
      
        <link rel="canonical" href="https://sswfive.github.io/bloghub/cloud/kubernetes/10.k8s%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/">
      
      
      
      
      <link rel="icon" href="https://s2.loli.net/2024/04/26/PmRdM9iGnvOJHgu.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>k8s常见问题汇总 - 空谷幽兰</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.76a95c52.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../customize/stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../customize/stylesheets/link.css">
    
      <link rel="stylesheet" href="../../../customize/stylesheets/customize.css">
    
      <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config",""),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
    <link rel="stylesheet" href="../../../assets/stylesheets/custom.00c04c01.min.css">
  
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#16643-was-refused" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="不再显示此消息">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
              </button>
            
            
     Follow <strong>@Wcowin</strong> on
    <a rel="me" href="https://space.bilibili.com/1407028951?spm_id_from=333.1007.0.0">
      <span class="twemoji bilibili">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0s16.1 2.868 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0c8.8 0 16.1 2.868 21.9 8.603 5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1zm-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8 6.3-6.5 9.7-14.3 10.1-23.5V173.8zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5-9.6 0-17.5-3.2-23.6-9.5-6.1-6.3-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2 6.3-6.3 13.2-9.6 23.3-10 9.2.4 17 3.7 23.3 10zm191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.1 6.3-14 9.5-23.6 9.5-9.6 0-17.4-3.2-23.6-9.5-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2 6.3-6.3 14.1-9.6 23.3-10 9.2.4 17 3.7 23.3 10z"/></svg>
      </span>
      <strong>Bilibili</strong>
    </a>
    and
    <a href="https://twitter.com/Wcowin_">
      <span class="twemoji twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </span>
      <strong>Twitter</strong>
    </a>
  
          </div>
          
            <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="空谷幽兰" class="md-header__button md-logo" aria-label="空谷幽兰" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            空谷幽兰
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              k8s常见问题汇总
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="关闭自动模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="关闭自动模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="切换至夜间模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="切换至日间模式"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sswfive" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sswfive
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
    
  
  主页

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../python/python_core/python_dev_summary/Docker构建Python镜像实践指南.md" class="md-tabs__link">
          
  
    
  
  Python编程

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../codecore/design_patterns/object_oriented_principles/" class="md-tabs__link">
          
  
    
  
  编程内功

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blogs/solutionhub/opshub/server_disk_full_solution/" class="md-tabs__link">
          
  
    
  
  迎刃而解

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blogs/techout/how_to_ask_questions_the_smart_way/" class="md-tabs__link">
          
  
    
  
  技术之外

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../toolbox/git/git_multi_ssh/" class="md-tabs__link">
          
  
    
  
  工具箱

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../tag/" class="md-tabs__link">
        
  
    
  
  标签

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="空谷幽兰" class="md-nav__button md-logo" aria-label="空谷幽兰" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    空谷幽兰
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sswfive" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sswfive
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    主页
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            主页
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/personal_profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python编程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Python编程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python编程实践
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Python编程实践
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_core/python_dev_summary/Docker构建Python镜像实践指南.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker构建Python镜像实践指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_core/python_dev_summary/Python中的数据类型用法剖析总结.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python中的数据结构用法剖析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_core/devtools/dev_tool_selection.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python开发工具汇总
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_core/devtools/env_package_selection.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python版本及包管理工具选型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_core/devtools/pypi_source_usage.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常用Pypi源汇总及使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_core/coding_standard.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python编码规范
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Web 框架
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Web 框架
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Django
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            Django
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/pyweb/django/orm_fields_summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    django中ORM字段总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/pyweb/django/orm_query_summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    django中ORM查询方法总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/pyweb/django/django_lazyobject_analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    django源码学习之LazyObject
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python常用库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Python常用库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/lib_common_summary.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    热门库汇总
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    常用库笔记
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            常用库笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/daily_lib_summary.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    笔记清单
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/libs/numpy.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据分析之Numpy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/libs/pandas.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据分析之Pandas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/libs/pyflink.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分布式流计算之PyFlink
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/libs/mlflow.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    模型管理工具之MLFlow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/libs/supervisor.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    进程管理之Supervisor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/libs/subprocess.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    子进程管理之subprocess
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/libs/apscheduler.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    定时任务工具之APScheduler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../python/python_lib/libs/pathlib.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    路径操作之pathlib
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    编程内功
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            编程内功
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    设计模式
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            设计模式
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../codecore/design_patterns/object_oriented_principles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    面向对象设计原则
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../codecore/design_patterns/design_patterns_categories/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设计模式分类总览
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    迎刃而解
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            迎刃而解
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    运维手记
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            运维手记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/opshub/server_disk_full_solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    服务器磁盘空间满的解决办法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/opshub/centos_yum_source_delete_solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Centos的yum源误删解决方法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/opshub/win10_git_chinese_solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    win10的cmd中操作git中文乱码解决方法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/opshub/mac_brew_service_error_solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mac使用brew services报错
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Bugs复盘
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Bugs复盘
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/bughub/jupyterhub_deploy_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jupyterhub离线部署踩坑总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/bughub/jupyter_matplotlib_font_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jupyter matplotlib画图中文字体缺失
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/bughub/jupyter_asyncio_run_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jupyter运行asyncio run报错
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/bughub/window_install_pip_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    window环境中pip安装报错
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/bughub/conda_rename_env_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conda修改虚拟环境名导致异常
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/solutionhub/bughub/rsa_encryption_bug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多语言之间的RSA加解密问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    技术之外
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            技术之外
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/techout/how_to_ask_questions_the_smart_way/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何高效提问
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/techout/personal_strategy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    个人战略上的聚焦和放弃
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/techout/learn_top_down_or_bottom_up/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    学习应该自底向上，还是自顶向下
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/techout/how_to_learn_open_source_project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何高效学习开源项目
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/techout/understand_do_things/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    明白且高效做事三要素
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/techout/yiyan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    技术一言
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/techout/rego/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HelloWorld
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    工具箱
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            工具箱
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    开发工具
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            开发工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1_1" id="__nav_6_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Git
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1">
            <span class="md-nav__icon md-icon"></span>
            Git
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../toolbox/git/git_multi_ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git同时配置多个平台的SSH
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    标签
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#16643-was-refused" class="md-nav__link">
    <span class="md-ellipsis">
      1.系统重启以后6643 was refused
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2nodejoin" class="md-nav__link">
    <span class="md-ellipsis">
      2.node节点重新join时，需要执行下列命令
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3kube-flannel" class="md-nav__link">
    <span class="md-ellipsis">
      3.kube-flannel的状态异常
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4initjoin" class="md-nav__link">
    <span class="md-ellipsis">
      4.重新进行集群init和join操作的正确流程
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubeadm-k8s1194" class="md-nav__link">
    <span class="md-ellipsis">
      kubeadm 安装k8s1.19.4需要的镜像说明：
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kubeadm 安装k8s1.19.4需要的镜像说明：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step1kubeadm" class="md-nav__link">
    <span class="md-ellipsis">
      step1:查看当前版本的kubeadm 需要的镜像包和版本
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step2" class="md-nav__link">
    <span class="md-ellipsis">
      step2:将默认的配置文件导出并编辑
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step3image" class="md-nav__link">
    <span class="md-ellipsis">
      step3:拉取image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step4" class="md-nav__link">
    <span class="md-ellipsis">
      step4: 修改镜像标签
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step5kubeadm-init" class="md-nav__link">
    <span class="md-ellipsis">
      step5:执行kubeadm init 操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  
<nav class="md-tags" >
  
    
    
    
      <a href="../../../tag/#k8s" class="md-tag">k8s</a>
    
  
</nav>


  
    <a href="https://github.com/sswfive/edit/master/docs/cloud/kubernetes/10.k8s常见问题汇总.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/sswfive/raw/master/docs/cloud/kubernetes/10.k8s常见问题汇总.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


  <h1>k8s常见问题汇总</h1>

<h2 id="16643-was-refused">1.系统重启以后6643 was refused<a class="headerlink" href="#16643-was-refused" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span>
<span class="normal"><a href="#__codelineno-0-6">6</a></span>
<span class="normal"><a href="#__codelineno-0-7">7</a></span>
<span class="normal"><a href="#__codelineno-0-8">8</a></span>
<span class="normal"><a href="#__codelineno-0-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># 报错内容：</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="o">[</span>root@centos801<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get nodes</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>The<span class="w"> </span>connection<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>server<span class="w"> </span><span class="m">192</span>.168.33.130:6443<span class="w"> </span>was<span class="w"> </span>refused<span class="w"> </span>-<span class="w"> </span>did<span class="w"> </span>you<span class="w"> </span>specify<span class="w"> </span>the<span class="w"> </span>right<span class="w"> </span>host<span class="w"> </span>or<span class="w"> </span>port?
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="c1"># 解决方案</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>sudo<span class="w"> </span>-i<span class="w">  </span><span class="c1"># 为了频繁的执行某些只有超级用户才能执行的权限，而不用每次输入密码</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>swapoff<span class="w"> </span>-a<span class="w">  </span><span class="c1"># 关闭系统的交换区。</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="nb">exit</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>strace<span class="w"> </span>-eopenat<span class="w"> </span>kubectl<span class="w"> </span>version
</code></pre></div></td></tr></table></div>
<h2 id="2nodejoin">2.node节点重新join时，需要执行下列命令<a class="headerlink" href="#2nodejoin" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>kubeadm<span class="w"> </span>reset
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="c1"># 如果有报错信息如下：</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>The<span class="w"> </span>reset<span class="w"> </span>process<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>clean<span class="w"> </span>CNI<span class="w"> </span>configuration.<span class="w"> </span>To<span class="w"> </span><span class="k">do</span><span class="w"> </span>so,<span class="w"> </span>you<span class="w"> </span>must<span class="w"> </span>remove<span class="w"> </span>/etc/cni/net.d
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>The<span class="w"> </span>reset<span class="w"> </span>process<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>reset<span class="w"> </span>or<span class="w"> </span>clean<span class="w"> </span>up<span class="w"> </span>iptables<span class="w"> </span>rules<span class="w"> </span>or<span class="w"> </span>IPVS<span class="w"> </span>tables.
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>If<span class="w"> </span>you<span class="w"> </span>wish<span class="w"> </span>to<span class="w"> </span>reset<span class="w"> </span>iptables,<span class="w"> </span>you<span class="w"> </span>must<span class="w"> </span><span class="k">do</span><span class="w"> </span>so<span class="w"> </span>manually<span class="w"> </span>by<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;iptables&quot;</span><span class="w"> </span>command.
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>If<span class="w"> </span>your<span class="w"> </span>cluster<span class="w"> </span>was<span class="w"> </span>setup<span class="w"> </span>to<span class="w"> </span>utilize<span class="w"> </span>IPVS,<span class="w"> </span>run<span class="w"> </span>ipvsadm<span class="w"> </span>--clear<span class="w"> </span><span class="o">(</span>or<span class="w"> </span>similar<span class="o">)</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>to<span class="w"> </span>reset<span class="w"> </span>your<span class="w"> </span>system<span class="err">&#39;</span>s<span class="w"> </span>IPVS<span class="w"> </span>tables.
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>The<span class="w"> </span>reset<span class="w"> </span>process<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>clean<span class="w"> </span>your<span class="w"> </span>kubeconfig<span class="w"> </span>files<span class="w"> </span>and<span class="w"> </span>you<span class="w"> </span>must<span class="w"> </span>remove<span class="w"> </span>them<span class="w"> </span>manually.
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>Please,<span class="w"> </span>check<span class="w"> </span>the<span class="w"> </span>contents<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span><span class="nv">$HOME</span>/.kube/config<span class="w"> </span>file.
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="o">[</span>root@centos803<span class="w"> </span>~<span class="o">]</span><span class="c1"># iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="c1"># 则执行命令，然后再执行join操作</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a>iptables<span class="w"> </span>-F<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-F<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>iptables<span class="w"> </span>-t<span class="w"> </span>mangle<span class="w"> </span>-F<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>iptables<span class="w"> </span>-X
</code></pre></div></td></tr></table></div>
<h2 id="3kube-flannel">3.kube-flannel的状态异常<a class="headerlink" href="#3kube-flannel" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>具体异常信息
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="o">[</span>root@centos801<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get pods -n kube-system</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>NAME<span class="w">                                </span>READY<span class="w">   </span>STATUS<span class="w">              </span>RESTARTS<span class="w">   </span>AGE
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>coredns-6d56c8448f-hnjbz<span class="w">            </span><span class="m">0</span>/1<span class="w">     </span>ContainerCreating<span class="w">   </span><span class="m">0</span><span class="w">          </span>14m
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>coredns-6d56c8448f-tc4j2<span class="w">            </span><span class="m">0</span>/1<span class="w">     </span>ContainerCreating<span class="w">   </span><span class="m">0</span><span class="w">          </span>14m
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>etcd-centos801<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>14m
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>kube-apiserver-centos801<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>14m
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>kube-controller-manager-centos801<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>14m
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>kube-flannel-ds-8bvql<span class="w">               </span><span class="m">0</span>/1<span class="w">     </span>CrashLoopBackOff<span class="w">    </span><span class="m">6</span><span class="w">          </span>9m41s
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>kube-flannel-ds-lj5vp<span class="w">               </span><span class="m">0</span>/1<span class="w">     </span>CrashLoopBackOff<span class="w">    </span><span class="m">6</span><span class="w">          </span>8m52s
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>kube-flannel-ds-qxgq9<span class="w">               </span><span class="m">0</span>/1<span class="w">     </span>CrashLoopBackOff<span class="w">    </span><span class="m">7</span><span class="w">          </span>11m
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>kube-proxy-jsssg<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>14m
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>kube-proxy-pq9rf<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>8m52s
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>kube-proxy-z77tv<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>9m41s
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>kube-scheduler-centos801<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>14m
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>错误原因是在进行kubeadm init时没有添加如下参数
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>--pod-network-cidr<span class="o">=</span><span class="m">10</span>.244.0.0/16
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>但是检查初始化命令有进行设置此参数
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>kubeadm<span class="w"> </span>init<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>--apiserver-advertise-address<span class="o">=</span><span class="m">192</span>.168.33.131<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>--image-repository<span class="w"> </span>registry.aliyuncs.com/google_containers<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>--kubernetes-version<span class="w"> </span>v1.19.4<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>--service-cidr<span class="o">=</span><span class="m">10</span>.96.0.0/12<span class="w"> </span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>--pod-network-cidr<span class="o">=</span><span class="m">10</span>.244.0.0/16
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>寻思千遍，花了近三个小时在chrome、kubeadm init、kube join 之间辗转反侧
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="o">[</span>root@centos801<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubeadm init \</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>&gt;<span class="w"> </span>--apiserver-advertise-address<span class="o">=</span><span class="m">192</span>.168.33.131<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>&gt;<span class="w"> </span>--image-repository<span class="w"> </span>registry.aliyuncs.com/google_containers<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>&gt;<span class="w"> </span>--kubernetes-version<span class="w"> </span>v1.19.4<span class="w"> </span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>W0312<span class="w"> </span><span class="m">14</span>:43:44.370062<span class="w">  </span><span class="m">280711</span><span class="w"> </span>configset.go:348<span class="o">]</span><span class="w"> </span>WARNING:<span class="w"> </span>kubeadm<span class="w"> </span>cannot<span class="w"> </span>validate<span class="w"> </span>component<span class="w"> </span>configs<span class="w"> </span><span class="k">for</span><span class="w"> </span>API<span class="w"> </span>groups<span class="w"> </span><span class="o">[</span>kubelet.config.k8s.io<span class="w"> </span>kubeproxy.config.k8s.io<span class="o">]</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="o">[</span>init<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>Kubernetes<span class="w"> </span>version:<span class="w"> </span>v1.19.4
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="o">[</span>preflight<span class="o">]</span><span class="w"> </span>Running<span class="w"> </span>pre-flight<span class="w"> </span>checks
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">        </span><span class="o">[</span>WARNING<span class="w"> </span>FileExisting-tc<span class="o">]</span>:<span class="w"> </span>tc<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span>system<span class="w"> </span>path
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">        </span><span class="o">[</span>WARNING<span class="w"> </span>Hostname<span class="o">]</span>:<span class="w"> </span>hostname<span class="w"> </span><span class="s2">&quot;centos801&quot;</span><span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>reached
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">        </span><span class="o">[</span>WARNING<span class="w"> </span>Hostname<span class="o">]</span>:<span class="w"> </span>hostname<span class="w"> </span><span class="s2">&quot;centos801&quot;</span>:<span class="w"> </span>lookup<span class="w"> </span>centos801<span class="w"> </span>on<span class="w"> </span><span class="m">114</span>.114.114.114:53:<span class="w"> </span>no<span class="w"> </span>such<span class="w"> </span>host
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>发现最后一个参数丢失，最终人傻掉了，--pod-network-cidr 前面添加一个 "\",再重新执行init命令，即可解决问题
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>kubeadm<span class="w"> </span>init<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>--apiserver-advertise-address<span class="o">=</span><span class="m">192</span>.168.33.131<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>--image-repository<span class="w"> </span>registry.aliyuncs.com/google_containers<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>--kubernetes-version<span class="w"> </span>v1.19.4<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>--service-cidr<span class="o">=</span><span class="m">10</span>.96.0.0/12<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a>--pod-network-cidr<span class="o">=</span><span class="m">10</span>.244.0.0/16
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="o">[</span>root@centos801<span class="w"> </span>~<span class="o">]</span><span class="c1"># kubectl get pods -n kube-system</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>NAME<span class="w">                                </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">   </span>AGE
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>coredns-6d56c8448f-qhftp<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m42s
<a id="__codelineno-6-11" name="__codelineno-6-11"></a>coredns-6d56c8448f-w8h9n<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m42s
<a id="__codelineno-6-12" name="__codelineno-6-12"></a>etcd-centos801<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m58s
<a id="__codelineno-6-13" name="__codelineno-6-13"></a>kube-apiserver-centos801<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m59s
<a id="__codelineno-6-14" name="__codelineno-6-14"></a>kube-controller-manager-centos801<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m58s
<a id="__codelineno-6-15" name="__codelineno-6-15"></a>kube-flannel-ds-5fljb<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>52s
<a id="__codelineno-6-16" name="__codelineno-6-16"></a>kube-flannel-ds-cxk58<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>22s
<a id="__codelineno-6-17" name="__codelineno-6-17"></a>kube-flannel-ds-z9zpr<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>2m2s
<a id="__codelineno-6-18" name="__codelineno-6-18"></a>kube-proxy-ftvsz<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m42s
<a id="__codelineno-6-19" name="__codelineno-6-19"></a>kube-proxy-j6x7f<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>22s
<a id="__codelineno-6-20" name="__codelineno-6-20"></a>kube-proxy-l6pxl<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>52s
<a id="__codelineno-6-21" name="__codelineno-6-21"></a>kube-scheduler-centos801<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m58s
</code></pre></div></td></tr></table></div></p>
</li>
</ul>
<h2 id="4initjoin">4.重新进行集群init和join操作的正确流程<a class="headerlink" href="#4initjoin" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="c1"># master和node节点都需要执行</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>kubeadm<span class="w"> </span>reset<span class="w"> </span>--force
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>iptables<span class="w"> </span>-F<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-F<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>iptables<span class="w"> </span>-t<span class="w"> </span>mangle<span class="w"> </span>-F<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>iptables<span class="w"> </span>-X
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="c1"># 只在master节点执行</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>kubeadm<span class="w"> </span>init<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>--apiserver-advertise-address<span class="o">=</span><span class="m">192</span>.168.33.131<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a>--image-repository<span class="w"> </span>registry.aliyuncs.com/google_containers<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a>--kubernetes-version<span class="w"> </span>v1.19.4<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>--service-cidr<span class="o">=</span><span class="m">10</span>.96.0.0/12<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a>--pod-network-cidr<span class="o">=</span><span class="m">10</span>.244.0.0/16<span class="w"> </span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="c1"># 只在node节点执行</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a>kubeadm<span class="w"> </span>join<span class="w"> </span><span class="m">192</span>.168.33.131:6443<span class="w"> </span>--token<span class="w"> </span>hxxxre.qbaa224113efwjs1<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="w">  </span>--discovery-token-ca-cert-hash<span class="w"> </span>sha256:208d7b79e19f460c5311eeeddfc9102316932d877f717b8bb1bc86dbb85133a7
</code></pre></div></td></tr></table></div>
<p><strong>1/ 各组件启动失败时，如何方便的查看错误？</strong>
可使用命令 <code>systemctl status &lt;组件名&gt;</code> 或 <code>journalctl -xefu &lt;组件名&gt;</code>查看日志。
<strong>2/ 注意cgroup启动问题</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>failed to create kubelet: misconfiguration: kubelet cgroup driver: &quot;cgroupfs&quot; is different from docker cgroup driver: &quot;systemd&quot;
</code></pre></div></td></tr></table></div>
kubelet 默认使用 <code>cgroupfs</code> 启动，可修改为docker 的<code>systemd</code>， 或修改docker 启动为 <code>cgroupfs</code>。
docker 修改的地方为 /etc/docker/daemon.json
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>{
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;]
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>}
</code></pre></div></td></tr></table></div>
kuberlet 可修改systemd 的service中启动命令增加<code>--cgroup-driver</code>参数：
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a># 可指定启动参数 
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>DOCKER_CGROUPS=$(docker info | grep &#39;Cgroup&#39; | cut -d&#39; &#39; -f3)
<a id="__codelineno-10-3" name="__codelineno-10-3"></a>--cgroup-driver=$DOCKER_CGROUPS
</code></pre></div></td></tr></table></div>
<strong>3/ 节点删除后如何重新授权？</strong>
节点删除后，重启 kubelet。在Master 端是看不到申请信息的，需要将上次申请的证书删除，再重启。
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a># master
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>kubectl delete node node01
<a id="__codelineno-11-3" name="__codelineno-11-3"></a># node01 
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>rm -f /opt/kubernetes/ssl/kubelet*
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>systemctl restart kubelet
</code></pre></div></td></tr></table></div>
<strong>4/ 排查pod无法启动的思路</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a># 1. 先查看pod的最近的操作
<a id="__codelineno-12-2" name="__codelineno-12-2"></a>kubectl describe pod &lt;pod-name&gt; -n kube-system 
<a id="__codelineno-12-3" name="__codelineno-12-3"></a># 2. 查看pod 的日志
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>kubectl logs pod &lt;pod-name&gt;
</code></pre></div></td></tr></table></div>
<strong>5/ 解决Dashboard 2.0 chrome浏览器不能访问的问题</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a>mkdir key &amp;&amp; cd key
<a id="__codelineno-13-2" name="__codelineno-13-2"></a># 1 生成证书
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>openssl genrsa -out dashboard.key 2048
<a id="__codelineno-13-4" name="__codelineno-13-4"></a>openssl req -new -out dashboard.csr -key dashboard.key -subj &#39;/CN=kubernetes-dashboard-certs&#39;
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>openssl x509 -req -in dashboard.csr -signkey dashboard.key -out dashboard.crt
<a id="__codelineno-13-6" name="__codelineno-13-6"></a># 2 删除原有的证书secret
<a id="__codelineno-13-7" name="__codelineno-13-7"></a>kubectl delete secret kubernetes-dashboard-certs -n kube-system
<a id="__codelineno-13-8" name="__codelineno-13-8"></a># 3 创建新的证书secret
<a id="__codelineno-13-9" name="__codelineno-13-9"></a>kubectl create secret generic kubernetes-dashboard-certs --from-file=dashboard.key --from-file=dashboard.crt -n kube-system
<a id="__codelineno-13-10" name="__codelineno-13-10"></a># 4 查看dashboard pod，v2.0是 -n kubernetes-dashboard
<a id="__codelineno-13-11" name="__codelineno-13-11"></a>kubectl get pod -n kube-system
<a id="__codelineno-13-12" name="__codelineno-13-12"></a># 5 重启dashboard pod，v2.0是 -n kubernetes-dashboard
<a id="__codelineno-13-13" name="__codelineno-13-13"></a>kubectl delete pod &lt;pod name&gt; -n kube-system
</code></pre></div></td></tr></table></div>
<strong>6/ 如何彻底的删除一个pod?</strong>
K8S中pod 是有<code>deployments</code>来发布的，所以直接删除pod后，k8s无法识别是人为还是故障，它会根据<code>deployments</code> 描述的信息，重新启动一个pod。所以要删除pod 时，直接删除对应的 <code>deployments</code>，pod会自动删除。
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a>kubectl delete deployment &lt;deployment_name&gt; -n &lt;namespace&gt;
</code></pre></div></td></tr></table></div>
<strong>7/ 节点维护时，如何手动驱赶pod?</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span>
<span class="normal"><a href="#__codelineno-15-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a># 1、标记节点不可调度
<a id="__codelineno-15-2" name="__codelineno-15-2"></a>kubectl cordon &lt;node name&gt;
<a id="__codelineno-15-3" name="__codelineno-15-3"></a># 2、手动迁移pod 
<a id="__codelineno-15-4" name="__codelineno-15-4"></a>kubectl drain &lt;node name&gt; --delete-local-data --ignore-daemonsets --force
<a id="__codelineno-15-5" name="__codelineno-15-5"></a># 3、带节点维护完成之后，恢复可调度
<a id="__codelineno-15-6" name="__codelineno-15-6"></a>kubectl uncordon &lt;node name&gt;
</code></pre></div></td></tr></table></div></p>
<h2 id="kubeadm-k8s1194">kubeadm 安装k8s1.19.4需要的镜像说明：<a class="headerlink" href="#kubeadm-k8s1194" title="Permanent link">&para;</a></h2>
<blockquote>
<p>执行kubeadm init 卡在pull image ，由于默认源是谷歌，镜像通常拉取不下来，所以需要使用国内源进行必要镜像的拉取</p>
</blockquote>
<h3 id="step1kubeadm">step1:查看当前版本的kubeadm 需要的镜像包和版本<a class="headerlink" href="#step1kubeadm" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a>kubeadm<span class="w">  </span>config<span class="w"> </span>images<span class="w"> </span>list<span class="w">  </span>
</code></pre></div></td></tr></table></div>
<ul>
<li>日志
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>root@automlgpu4<span class="w"> </span>k8s<span class="o">]</span><span class="c1"># kubeadm config images list</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>W0608<span class="w"> </span><span class="m">17</span>:33:50.021855<span class="w">   </span><span class="m">83264</span><span class="w"> </span>version.go:102<span class="o">]</span><span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>fetch<span class="w"> </span>a<span class="w"> </span>Kubernetes<span class="w"> </span>version<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>internet:<span class="w"> </span>unable<span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span>URL<span class="w"> </span><span class="s2">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>:<span class="w"> </span>Get<span class="w"> </span><span class="s2">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>:<span class="w"> </span>context<span class="w"> </span>deadline<span class="w"> </span>exceeded<span class="w"> </span><span class="o">(</span>Client.Timeout<span class="w"> </span>exceeded<span class="w"> </span><span class="k">while</span><span class="w"> </span>awaiting<span class="w"> </span>headers<span class="o">)</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a>W0608<span class="w"> </span><span class="m">17</span>:33:50.022758<span class="w">   </span><span class="m">83264</span><span class="w"> </span>version.go:103<span class="o">]</span><span class="w"> </span>falling<span class="w"> </span>back<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span><span class="nb">local</span><span class="w"> </span>client<span class="w"> </span>version:<span class="w"> </span>v1.19.4
<a id="__codelineno-17-4" name="__codelineno-17-4"></a>W0608<span class="w"> </span><span class="m">17</span>:33:50.023105<span class="w">   </span><span class="m">83264</span><span class="w"> </span>configset.go:348<span class="o">]</span><span class="w"> </span>WARNING:<span class="w"> </span>kubeadm<span class="w"> </span>cannot<span class="w"> </span>validate<span class="w"> </span>component<span class="w"> </span>configs<span class="w"> </span><span class="k">for</span><span class="w"> </span>API<span class="w"> </span>groups<span class="w"> </span><span class="o">[</span>kubelet.config.k8s.io<span class="w"> </span>kubeproxy.config.k8s.io<span class="o">]</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>k8s.gcr.io/kube-apiserver:v1.19.4
<a id="__codelineno-17-6" name="__codelineno-17-6"></a>k8s.gcr.io/kube-controller-manager:v1.19.4
<a id="__codelineno-17-7" name="__codelineno-17-7"></a>k8s.gcr.io/kube-scheduler:v1.19.4
<a id="__codelineno-17-8" name="__codelineno-17-8"></a>k8s.gcr.io/kube-proxy:v1.19.4
<a id="__codelineno-17-9" name="__codelineno-17-9"></a>k8s.gcr.io/pause:3.2
<a id="__codelineno-17-10" name="__codelineno-17-10"></a>k8s.gcr.io/etcd:3.4.13-0
<a id="__codelineno-17-11" name="__codelineno-17-11"></a>k8s.gcr.io/coredns:1.7.0
</code></pre></div></td></tr></table></div></li>
</ul>
<h3 id="step2">step2:将默认的配置文件导出并编辑<a class="headerlink" href="#step2" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a>kubeadm<span class="w"> </span>config<span class="w"> </span>print<span class="w"> </span>init-defaults<span class="w"> </span>&gt;<span class="w"> </span>kubeadm.conf<span class="w"> </span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>vim<span class="w"> </span>kubeadm.conf<span class="w">  </span><span class="c1"># 打开文件并修改</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span>
<span class="normal"><a href="#__codelineno-19-22">22</a></span>
<span class="normal"><a href="#__codelineno-19-23">23</a></span>
<span class="normal"><a href="#__codelineno-19-24">24</a></span>
<span class="normal"><a href="#__codelineno-19-25">25</a></span>
<span class="normal"><a href="#__codelineno-19-26">26</a></span>
<span class="normal"><a href="#__codelineno-19-27">27</a></span>
<span class="normal"><a href="#__codelineno-19-28">28</a></span>
<span class="normal"><a href="#__codelineno-19-29">29</a></span>
<span class="normal"><a href="#__codelineno-19-30">30</a></span>
<span class="normal"><a href="#__codelineno-19-31">31</a></span>
<span class="normal"><a href="#__codelineno-19-32">32</a></span>
<span class="normal"><a href="#__codelineno-19-33">33</a></span>
<span class="normal"><a href="#__codelineno-19-34">34</a></span>
<span class="normal"><a href="#__codelineno-19-35">35</a></span>
<span class="normal"><a href="#__codelineno-19-36">36</a></span>
<span class="normal"><a href="#__codelineno-19-37">37</a></span>
<span class="normal"><a href="#__codelineno-19-38">38</a></span>
<span class="normal"><a href="#__codelineno-19-39">39</a></span>
<span class="normal"><a href="#__codelineno-19-40">40</a></span>
<span class="normal"><a href="#__codelineno-19-41">41</a></span>
<span class="normal"><a href="#__codelineno-19-42">42</a></span>
<span class="normal"><a href="#__codelineno-19-43">43</a></span>
<span class="normal"><a href="#__codelineno-19-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>root@automlgpu4<span class="w"> </span>k8s<span class="o">]</span><span class="c1"># vim kubeadm.conf </span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w"> </span><span class="m">1</span><span class="w"> </span>kubeadm.conf<span class="w">                                                                                                                                                                            </span>X<span class="w"> </span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w"> </span>apiVersion:<span class="w"> </span>kubeadm.k8s.io/v1beta2
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w"> </span>bootstrapTokens:
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w"> </span>-<span class="w"> </span>groups:
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">   </span>-<span class="w"> </span>system:bootstrappers:kubeadm:default-node-token
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">   </span>token:<span class="w"> </span>abcdef.0123456789abcdef
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">   </span>ttl:<span class="w"> </span>24h0m0s
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">   </span>usages:
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">   </span>-<span class="w"> </span>signing
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">   </span>-<span class="w"> </span>authentication
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w"> </span>kind:<span class="w"> </span>InitConfiguration
<a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w"> </span>localAPIEndpoint:
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w">   </span>advertiseAddress:<span class="w"> </span><span class="m">172</span>.16.2.117<span class="w">  </span><span class="c1"># 本机的ip</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">   </span>bindPort:<span class="w"> </span><span class="m">6443</span>
<a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w"> </span>nodeRegistration:
<a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="w">   </span>criSocket:<span class="w"> </span>/var/run/dockershim.sock
<a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="w">   </span>name:<span class="w"> </span>automlgpu4
<a id="__codelineno-19-20" name="__codelineno-19-20"></a><span class="w">   </span>taints:
<a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="w">   </span>-<span class="w"> </span>effect:<span class="w"> </span>NoSchedule
<a id="__codelineno-19-22" name="__codelineno-19-22"></a><span class="w">     </span>key:<span class="w"> </span>node-role.kubernetes.io/master
<a id="__codelineno-19-23" name="__codelineno-19-23"></a><span class="w"> </span>---
<a id="__codelineno-19-24" name="__codelineno-19-24"></a><span class="w"> </span>apiServer:
<a id="__codelineno-19-25" name="__codelineno-19-25"></a><span class="w">   </span>timeoutForControlPlane:<span class="w"> </span>4m0s
<a id="__codelineno-19-26" name="__codelineno-19-26"></a><span class="w"> </span>apiVersion:<span class="w"> </span>kubeadm.k8s.io/v1beta2
<a id="__codelineno-19-27" name="__codelineno-19-27"></a><span class="w"> </span>certificatesDir:<span class="w"> </span>/etc/kubernetes/pki
<a id="__codelineno-19-28" name="__codelineno-19-28"></a><span class="w"> </span>clusterName:<span class="w"> </span>kubernetes
<a id="__codelineno-19-29" name="__codelineno-19-29"></a><span class="w"> </span>controllerManager:<span class="w"> </span><span class="o">{}</span>
<a id="__codelineno-19-30" name="__codelineno-19-30"></a><span class="w"> </span>dns:
<a id="__codelineno-19-31" name="__codelineno-19-31"></a><span class="w">   </span>type:<span class="w"> </span>CoreDNS
<a id="__codelineno-19-32" name="__codelineno-19-32"></a><span class="w"> </span>etcd:
<a id="__codelineno-19-33" name="__codelineno-19-33"></a><span class="w">   </span>local:
<a id="__codelineno-19-34" name="__codelineno-19-34"></a><span class="w">     </span>dataDir:<span class="w"> </span>/var/lib/etcd
<a id="__codelineno-19-35" name="__codelineno-19-35"></a><span class="w"> </span>imageRepository:<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers<span class="w">  </span><span class="c1"># 更更换为阿里镜像源</span>
<a id="__codelineno-19-36" name="__codelineno-19-36"></a><span class="w"> </span>kind:<span class="w"> </span>ClusterConfiguration
<a id="__codelineno-19-37" name="__codelineno-19-37"></a><span class="w"> </span>kubernetesVersion:<span class="w"> </span>v1.19.4
<a id="__codelineno-19-38" name="__codelineno-19-38"></a><span class="w"> </span>networking:
<a id="__codelineno-19-39" name="__codelineno-19-39"></a><span class="w">   </span>dnsDomain:<span class="w"> </span>cluster.local
<a id="__codelineno-19-40" name="__codelineno-19-40"></a><span class="w">   </span>serviceSubnet:<span class="w"> </span><span class="m">10</span>.96.0.0/12
<a id="__codelineno-19-41" name="__codelineno-19-41"></a><span class="w"> </span>scheduler:<span class="w"> </span><span class="o">{}</span>
<a id="__codelineno-19-42" name="__codelineno-19-42"></a><span class="w"> </span>~<span class="w">                                                                                                                                                                                           </span>
<a id="__codelineno-19-43" name="__codelineno-19-43"></a><span class="w"> </span>~<span class="w">                                                                                                                                                                                           </span>
<a id="__codelineno-19-44" name="__codelineno-19-44"></a><span class="w"> </span>~<span class="w">             </span>
</code></pre></div></td></tr></table></div></p>
<h3 id="step3image">step3:拉取image<a class="headerlink" href="#step3image" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a>kubeadm<span class="w"> </span>config<span class="w"> </span>images<span class="w"> </span>pull<span class="w"> </span>--config<span class="w"> </span>kubeadm.conf<span class="w"> </span>
</code></pre></div></td></tr></table></div>
<ul>
<li>日志
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span>
<span class="normal"><a href="#__codelineno-21-5">5</a></span>
<span class="normal"><a href="#__codelineno-21-6">6</a></span>
<span class="normal"><a href="#__codelineno-21-7">7</a></span>
<span class="normal"><a href="#__codelineno-21-8">8</a></span>
<span class="normal"><a href="#__codelineno-21-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>root@automlgpu4<span class="w"> </span>k8s<span class="o">]</span><span class="c1"># kubeadm config images pull --config kubeadm.conf</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a>W0608<span class="w"> </span><span class="m">17</span>:09:52.812134<span class="w">   </span><span class="m">60183</span><span class="w"> </span>configset.go:348<span class="o">]</span><span class="w"> </span>WARNING:<span class="w"> </span>kubeadm<span class="w"> </span>cannot<span class="w"> </span>validate<span class="w"> </span>component<span class="w"> </span>configs<span class="w"> </span><span class="k">for</span><span class="w"> </span>API<span class="w"> </span>groups<span class="w"> </span><span class="o">[</span>kubelet.config.k8s.io<span class="w"> </span>kubeproxy.config.k8s.io<span class="o">]</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.4
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.4
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.4
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.4
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.13-0
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0
</code></pre></div></td></tr></table></div></li>
</ul>
<h3 id="step4">step4: 修改镜像标签<a class="headerlink" href="#step4" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span>
<span class="normal"><a href="#__codelineno-22-4">4</a></span>
<span class="normal"><a href="#__codelineno-22-5">5</a></span>
<span class="normal"><a href="#__codelineno-22-6">6</a></span>
<span class="normal"><a href="#__codelineno-22-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a>docker<span class="w"> </span>tag<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.4<span class="w"> </span>k8s.gcr.io/kube-apiserver:v1.19.4
<a id="__codelineno-22-2" name="__codelineno-22-2"></a>docker<span class="w"> </span>tag<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.4<span class="w"> </span>k8s.gcr.io/kube-controller-manager:v1.19.4
<a id="__codelineno-22-3" name="__codelineno-22-3"></a>docker<span class="w"> </span>tag<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.4<span class="w"> </span>k8s.gcr.io/kube-scheduler:v1.19.4
<a id="__codelineno-22-4" name="__codelineno-22-4"></a>docker<span class="w"> </span>tag<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.4<span class="w"> </span>k8s.gcr.io/kube-proxy:v1.19.4
<a id="__codelineno-22-5" name="__codelineno-22-5"></a>docker<span class="w"> </span>tag<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2<span class="w"> </span>k8s.gcr.io/pause:3.2
<a id="__codelineno-22-6" name="__codelineno-22-6"></a>docker<span class="w"> </span>tag<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.13-0<span class="w"> </span>k8s.gcr.io/etcd:3.4.13-0
<a id="__codelineno-22-7" name="__codelineno-22-7"></a>docker<span class="w"> </span>tag<span class="w"> </span>registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0<span class="w"> </span>k8s.gcr.io/coredns:1.7.0
</code></pre></div></td></tr></table></div>
<h3 id="step5kubeadm-init">step5:执行kubeadm init 操作<a class="headerlink" href="#step5kubeadm-init" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a>kubeadm<span class="w"> </span>init<span class="w"> </span>--config<span class="w"> </span>kubeadm.conf
</code></pre></div></td></tr></table></div>
<ul>
<li>日志：
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span>
<span class="normal"><a href="#__codelineno-24-15">15</a></span>
<span class="normal"><a href="#__codelineno-24-16">16</a></span>
<span class="normal"><a href="#__codelineno-24-17">17</a></span>
<span class="normal"><a href="#__codelineno-24-18">18</a></span>
<span class="normal"><a href="#__codelineno-24-19">19</a></span>
<span class="normal"><a href="#__codelineno-24-20">20</a></span>
<span class="normal"><a href="#__codelineno-24-21">21</a></span>
<span class="normal"><a href="#__codelineno-24-22">22</a></span>
<span class="normal"><a href="#__codelineno-24-23">23</a></span>
<span class="normal"><a href="#__codelineno-24-24">24</a></span>
<span class="normal"><a href="#__codelineno-24-25">25</a></span>
<span class="normal"><a href="#__codelineno-24-26">26</a></span>
<span class="normal"><a href="#__codelineno-24-27">27</a></span>
<span class="normal"><a href="#__codelineno-24-28">28</a></span>
<span class="normal"><a href="#__codelineno-24-29">29</a></span>
<span class="normal"><a href="#__codelineno-24-30">30</a></span>
<span class="normal"><a href="#__codelineno-24-31">31</a></span>
<span class="normal"><a href="#__codelineno-24-32">32</a></span>
<span class="normal"><a href="#__codelineno-24-33">33</a></span>
<span class="normal"><a href="#__codelineno-24-34">34</a></span>
<span class="normal"><a href="#__codelineno-24-35">35</a></span>
<span class="normal"><a href="#__codelineno-24-36">36</a></span>
<span class="normal"><a href="#__codelineno-24-37">37</a></span>
<span class="normal"><a href="#__codelineno-24-38">38</a></span>
<span class="normal"><a href="#__codelineno-24-39">39</a></span>
<span class="normal"><a href="#__codelineno-24-40">40</a></span>
<span class="normal"><a href="#__codelineno-24-41">41</a></span>
<span class="normal"><a href="#__codelineno-24-42">42</a></span>
<span class="normal"><a href="#__codelineno-24-43">43</a></span>
<span class="normal"><a href="#__codelineno-24-44">44</a></span>
<span class="normal"><a href="#__codelineno-24-45">45</a></span>
<span class="normal"><a href="#__codelineno-24-46">46</a></span>
<span class="normal"><a href="#__codelineno-24-47">47</a></span>
<span class="normal"><a href="#__codelineno-24-48">48</a></span>
<span class="normal"><a href="#__codelineno-24-49">49</a></span>
<span class="normal"><a href="#__codelineno-24-50">50</a></span>
<span class="normal"><a href="#__codelineno-24-51">51</a></span>
<span class="normal"><a href="#__codelineno-24-52">52</a></span>
<span class="normal"><a href="#__codelineno-24-53">53</a></span>
<span class="normal"><a href="#__codelineno-24-54">54</a></span>
<span class="normal"><a href="#__codelineno-24-55">55</a></span>
<span class="normal"><a href="#__codelineno-24-56">56</a></span>
<span class="normal"><a href="#__codelineno-24-57">57</a></span>
<span class="normal"><a href="#__codelineno-24-58">58</a></span>
<span class="normal"><a href="#__codelineno-24-59">59</a></span>
<span class="normal"><a href="#__codelineno-24-60">60</a></span>
<span class="normal"><a href="#__codelineno-24-61">61</a></span>
<span class="normal"><a href="#__codelineno-24-62">62</a></span>
<span class="normal"><a href="#__codelineno-24-63">63</a></span>
<span class="normal"><a href="#__codelineno-24-64">64</a></span>
<span class="normal"><a href="#__codelineno-24-65">65</a></span>
<span class="normal"><a href="#__codelineno-24-66">66</a></span>
<span class="normal"><a href="#__codelineno-24-67">67</a></span>
<span class="normal"><a href="#__codelineno-24-68">68</a></span>
<span class="normal"><a href="#__codelineno-24-69">69</a></span>
<span class="normal"><a href="#__codelineno-24-70">70</a></span>
<span class="normal"><a href="#__codelineno-24-71">71</a></span>
<span class="normal"><a href="#__codelineno-24-72">72</a></span>
<span class="normal"><a href="#__codelineno-24-73">73</a></span>
<span class="normal"><a href="#__codelineno-24-74">74</a></span>
<span class="normal"><a href="#__codelineno-24-75">75</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>root@automlgpu4<span class="w"> </span>k8s<span class="o">]</span><span class="c1"># kubeadm init --config kubeadm.conf </span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a>W0608<span class="w"> </span><span class="m">17</span>:24:49.913798<span class="w">   </span><span class="m">72683</span><span class="w"> </span>configset.go:348<span class="o">]</span><span class="w"> </span>WARNING:<span class="w"> </span>kubeadm<span class="w"> </span>cannot<span class="w"> </span>validate<span class="w"> </span>component<span class="w"> </span>configs<span class="w"> </span><span class="k">for</span><span class="w"> </span>API<span class="w"> </span>groups<span class="w"> </span><span class="o">[</span>kubelet.config.k8s.io<span class="w"> </span>kubeproxy.config.k8s.io<span class="o">]</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="o">[</span>init<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>Kubernetes<span class="w"> </span>version:<span class="w"> </span>v1.19.4
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="o">[</span>preflight<span class="o">]</span><span class="w"> </span>Running<span class="w"> </span>pre-flight<span class="w"> </span>checks
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="o">[</span>preflight<span class="o">]</span><span class="w"> </span>Pulling<span class="w"> </span>images<span class="w"> </span>required<span class="w"> </span><span class="k">for</span><span class="w"> </span>setting<span class="w"> </span>up<span class="w"> </span>a<span class="w"> </span>Kubernetes<span class="w"> </span>cluster
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="o">[</span>preflight<span class="o">]</span><span class="w"> </span>This<span class="w"> </span>might<span class="w"> </span>take<span class="w"> </span>a<span class="w"> </span>minute<span class="w"> </span>or<span class="w"> </span>two,<span class="w"> </span>depending<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>speed<span class="w"> </span>of<span class="w"> </span>your<span class="w"> </span>internet<span class="w"> </span>connection
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="o">[</span>preflight<span class="o">]</span><span class="w"> </span>You<span class="w"> </span>can<span class="w"> </span>also<span class="w"> </span>perform<span class="w"> </span>this<span class="w"> </span>action<span class="w"> </span><span class="k">in</span><span class="w"> </span>beforehand<span class="w"> </span>using<span class="w"> </span><span class="s1">&#39;kubeadm config images pull&#39;</span>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>certificateDir<span class="w"> </span>folder<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/pki&quot;</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;ca&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;apiserver&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>apiserver<span class="w"> </span>serving<span class="w"> </span>cert<span class="w"> </span>is<span class="w"> </span>signed<span class="w"> </span><span class="k">for</span><span class="w"> </span>DNS<span class="w"> </span>names<span class="w"> </span><span class="o">[</span>automlgpu4<span class="w"> </span>kubernetes<span class="w"> </span>kubernetes.default<span class="w"> </span>kubernetes.default.svc<span class="w"> </span>kubernetes.default.svc.cluster.local<span class="o">]</span><span class="w"> </span>and<span class="w"> </span>IPs<span class="w"> </span><span class="o">[</span><span class="m">10</span>.96.0.1<span class="w"> </span><span class="m">172</span>.16.2.117<span class="o">]</span>
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;apiserver-kubelet-client&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;front-proxy-ca&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;front-proxy-client&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;etcd/ca&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;etcd/server&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>etcd/server<span class="w"> </span>serving<span class="w"> </span>cert<span class="w"> </span>is<span class="w"> </span>signed<span class="w"> </span><span class="k">for</span><span class="w"> </span>DNS<span class="w"> </span>names<span class="w"> </span><span class="o">[</span>automlgpu4<span class="w"> </span>localhost<span class="o">]</span><span class="w"> </span>and<span class="w"> </span>IPs<span class="w"> </span><span class="o">[</span><span class="m">172</span>.16.2.117<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span>::1<span class="o">]</span>
<a id="__codelineno-24-18" name="__codelineno-24-18"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;etcd/peer&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>etcd/peer<span class="w"> </span>serving<span class="w"> </span>cert<span class="w"> </span>is<span class="w"> </span>signed<span class="w"> </span><span class="k">for</span><span class="w"> </span>DNS<span class="w"> </span>names<span class="w"> </span><span class="o">[</span>automlgpu4<span class="w"> </span>localhost<span class="o">]</span><span class="w"> </span>and<span class="w"> </span>IPs<span class="w"> </span><span class="o">[</span><span class="m">172</span>.16.2.117<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span>::1<span class="o">]</span>
<a id="__codelineno-24-20" name="__codelineno-24-20"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;etcd/healthcheck-client&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-21" name="__codelineno-24-21"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;apiserver-etcd-client&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-22" name="__codelineno-24-22"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;sa&quot;</span><span class="w"> </span>key<span class="w"> </span>and<span class="w"> </span>public<span class="w"> </span>key
<a id="__codelineno-24-23" name="__codelineno-24-23"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>kubeconfig<span class="w"> </span>folder<span class="w"> </span><span class="s2">&quot;/etc/kubernetes&quot;</span>
<a id="__codelineno-24-24" name="__codelineno-24-24"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span><span class="s2">&quot;admin.conf&quot;</span><span class="w"> </span>kubeconfig<span class="w"> </span>file
<a id="__codelineno-24-25" name="__codelineno-24-25"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span><span class="s2">&quot;kubelet.conf&quot;</span><span class="w"> </span>kubeconfig<span class="w"> </span>file
<a id="__codelineno-24-26" name="__codelineno-24-26"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span><span class="s2">&quot;controller-manager.conf&quot;</span><span class="w"> </span>kubeconfig<span class="w"> </span>file
<a id="__codelineno-24-27" name="__codelineno-24-27"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span><span class="s2">&quot;scheduler.conf&quot;</span><span class="w"> </span>kubeconfig<span class="w"> </span>file
<a id="__codelineno-24-28" name="__codelineno-24-28"></a><span class="o">[</span>kubelet-start<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span>kubelet<span class="w"> </span>environment<span class="w"> </span>file<span class="w"> </span>with<span class="w"> </span>flags<span class="w"> </span>to<span class="w"> </span>file<span class="w"> </span><span class="s2">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
<a id="__codelineno-24-29" name="__codelineno-24-29"></a><span class="o">[</span>kubelet-start<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span>kubelet<span class="w"> </span>configuration<span class="w"> </span>to<span class="w"> </span>file<span class="w"> </span><span class="s2">&quot;/var/lib/kubelet/config.yaml&quot;</span>
<a id="__codelineno-24-30" name="__codelineno-24-30"></a><span class="o">[</span>kubelet-start<span class="o">]</span><span class="w"> </span>Starting<span class="w"> </span>the<span class="w"> </span>kubelet
<a id="__codelineno-24-31" name="__codelineno-24-31"></a><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>manifest<span class="w"> </span>folder<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>
<a id="__codelineno-24-32" name="__codelineno-24-32"></a><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">&quot;kube-apiserver&quot;</span>
<a id="__codelineno-24-33" name="__codelineno-24-33"></a><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span>
<a id="__codelineno-24-34" name="__codelineno-24-34"></a><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">&quot;kube-scheduler&quot;</span>
<a id="__codelineno-24-35" name="__codelineno-24-35"></a><span class="o">[</span>etcd<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>etcd<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>
<a id="__codelineno-24-36" name="__codelineno-24-36"></a><span class="o">[</span>wait-control-plane<span class="o">]</span><span class="w"> </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>kubelet<span class="w"> </span>to<span class="w"> </span>boot<span class="w"> </span>up<span class="w"> </span>the<span class="w"> </span>control<span class="w"> </span>plane<span class="w"> </span>as<span class="w"> </span>static<span class="w"> </span>Pods<span class="w"> </span>from<span class="w"> </span>directory<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>.<span class="w"> </span>This<span class="w"> </span>can<span class="w"> </span>take<span class="w"> </span>up<span class="w"> </span>to<span class="w"> </span>4m0s
<a id="__codelineno-24-37" name="__codelineno-24-37"></a><span class="o">[</span>apiclient<span class="o">]</span><span class="w"> </span>All<span class="w"> </span>control<span class="w"> </span>plane<span class="w"> </span>components<span class="w"> </span>are<span class="w"> </span>healthy<span class="w"> </span>after<span class="w"> </span><span class="m">17</span>.004681<span class="w"> </span>seconds
<a id="__codelineno-24-38" name="__codelineno-24-38"></a><span class="o">[</span>upload-config<span class="o">]</span><span class="w"> </span>Storing<span class="w"> </span>the<span class="w"> </span>configuration<span class="w"> </span>used<span class="w"> </span><span class="k">in</span><span class="w"> </span>ConfigMap<span class="w"> </span><span class="s2">&quot;kubeadm-config&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;kube-system&quot;</span><span class="w"> </span>Namespace
<a id="__codelineno-24-39" name="__codelineno-24-39"></a><span class="o">[</span>kubelet<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>a<span class="w"> </span>ConfigMap<span class="w"> </span><span class="s2">&quot;kubelet-config-1.19&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>namespace<span class="w"> </span>kube-system<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>configuration<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>kubelets<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>cluster
<a id="__codelineno-24-40" name="__codelineno-24-40"></a><span class="o">[</span>upload-certs<span class="o">]</span><span class="w"> </span>Skipping<span class="w"> </span>phase.<span class="w"> </span>Please<span class="w"> </span>see<span class="w"> </span>--upload-certs
<a id="__codelineno-24-41" name="__codelineno-24-41"></a><span class="o">[</span>mark-control-plane<span class="o">]</span><span class="w"> </span>Marking<span class="w"> </span>the<span class="w"> </span>node<span class="w"> </span>automlgpu4<span class="w"> </span>as<span class="w"> </span>control-plane<span class="w"> </span>by<span class="w"> </span>adding<span class="w"> </span>the<span class="w"> </span>label<span class="w"> </span><span class="s2">&quot;node-role.kubernetes.io/master=&#39;&#39;&quot;</span>
<a id="__codelineno-24-42" name="__codelineno-24-42"></a><span class="o">[</span>mark-control-plane<span class="o">]</span><span class="w"> </span>Marking<span class="w"> </span>the<span class="w"> </span>node<span class="w"> </span>automlgpu4<span class="w"> </span>as<span class="w"> </span>control-plane<span class="w"> </span>by<span class="w"> </span>adding<span class="w"> </span>the<span class="w"> </span>taints<span class="w"> </span><span class="o">[</span>node-role.kubernetes.io/master:NoSchedule<span class="o">]</span>
<a id="__codelineno-24-43" name="__codelineno-24-43"></a><span class="o">[</span>bootstrap-token<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>token:<span class="w"> </span>abcdef.0123456789abcdef
<a id="__codelineno-24-44" name="__codelineno-24-44"></a><span class="o">[</span>bootstrap-token<span class="o">]</span><span class="w"> </span>Configuring<span class="w"> </span>bootstrap<span class="w"> </span>tokens,<span class="w"> </span>cluster-info<span class="w"> </span>ConfigMap,<span class="w"> </span>RBAC<span class="w"> </span>Roles
<a id="__codelineno-24-45" name="__codelineno-24-45"></a><span class="o">[</span>bootstrap-token<span class="o">]</span><span class="w"> </span>configured<span class="w"> </span>RBAC<span class="w"> </span>rules<span class="w"> </span>to<span class="w"> </span>allow<span class="w"> </span>Node<span class="w"> </span>Bootstrap<span class="w"> </span>tokens<span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span>nodes
<a id="__codelineno-24-46" name="__codelineno-24-46"></a><span class="o">[</span>bootstrap-token<span class="o">]</span><span class="w"> </span>configured<span class="w"> </span>RBAC<span class="w"> </span>rules<span class="w"> </span>to<span class="w"> </span>allow<span class="w"> </span>Node<span class="w"> </span>Bootstrap<span class="w"> </span>tokens<span class="w"> </span>to<span class="w"> </span>post<span class="w"> </span>CSRs<span class="w"> </span><span class="k">in</span><span class="w"> </span>order<span class="w"> </span><span class="k">for</span><span class="w"> </span>nodes<span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span>long<span class="w"> </span>term<span class="w"> </span>certificate<span class="w"> </span>credentials
<a id="__codelineno-24-47" name="__codelineno-24-47"></a><span class="o">[</span>bootstrap-token<span class="o">]</span><span class="w"> </span>configured<span class="w"> </span>RBAC<span class="w"> </span>rules<span class="w"> </span>to<span class="w"> </span>allow<span class="w"> </span>the<span class="w"> </span>csrapprover<span class="w"> </span>controller<span class="w"> </span>automatically<span class="w"> </span>approve<span class="w"> </span>CSRs<span class="w"> </span>from<span class="w"> </span>a<span class="w"> </span>Node<span class="w"> </span>Bootstrap<span class="w"> </span>Token
<a id="__codelineno-24-48" name="__codelineno-24-48"></a><span class="o">[</span>bootstrap-token<span class="o">]</span><span class="w"> </span>configured<span class="w"> </span>RBAC<span class="w"> </span>rules<span class="w"> </span>to<span class="w"> </span>allow<span class="w"> </span>certificate<span class="w"> </span>rotation<span class="w"> </span><span class="k">for</span><span class="w"> </span>all<span class="w"> </span>node<span class="w"> </span>client<span class="w"> </span>certificates<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>cluster
<a id="__codelineno-24-49" name="__codelineno-24-49"></a><span class="o">[</span>bootstrap-token<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;cluster-info&quot;</span><span class="w"> </span>ConfigMap<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;kube-public&quot;</span><span class="w"> </span>namespace
<a id="__codelineno-24-50" name="__codelineno-24-50"></a><span class="o">[</span>kubelet-finalize<span class="o">]</span><span class="w"> </span>Updating<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/kubelet.conf&quot;</span><span class="w"> </span>to<span class="w"> </span>point<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>rotatable<span class="w"> </span>kubelet<span class="w"> </span>client<span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
<a id="__codelineno-24-51" name="__codelineno-24-51"></a><span class="o">[</span>addons<span class="o">]</span><span class="w"> </span>Applied<span class="w"> </span>essential<span class="w"> </span>addon:<span class="w"> </span>CoreDNS
<a id="__codelineno-24-52" name="__codelineno-24-52"></a><span class="o">[</span>addons<span class="o">]</span><span class="w"> </span>Applied<span class="w"> </span>essential<span class="w"> </span>addon:<span class="w"> </span>kube-proxy
<a id="__codelineno-24-53" name="__codelineno-24-53"></a>
<a id="__codelineno-24-54" name="__codelineno-24-54"></a>Your<span class="w"> </span>Kubernetes<span class="w"> </span>control-plane<span class="w"> </span>has<span class="w"> </span>initialized<span class="w"> </span>successfully!
<a id="__codelineno-24-55" name="__codelineno-24-55"></a>
<a id="__codelineno-24-56" name="__codelineno-24-56"></a>To<span class="w"> </span>start<span class="w"> </span>using<span class="w"> </span>your<span class="w"> </span>cluster,<span class="w"> </span>you<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>as<span class="w"> </span>a<span class="w"> </span>regular<span class="w"> </span>user:
<a id="__codelineno-24-57" name="__codelineno-24-57"></a>
<a id="__codelineno-24-58" name="__codelineno-24-58"></a><span class="w">  </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$HOME</span>/.kube
<a id="__codelineno-24-59" name="__codelineno-24-59"></a><span class="w">  </span>sudo<span class="w"> </span>cp<span class="w"> </span>-i<span class="w"> </span>/etc/kubernetes/admin.conf<span class="w"> </span><span class="nv">$HOME</span>/.kube/config
<a id="__codelineno-24-60" name="__codelineno-24-60"></a><span class="w">  </span>sudo<span class="w"> </span>chown<span class="w"> </span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span>:<span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="w"> </span><span class="nv">$HOME</span>/.kube/config
<a id="__codelineno-24-61" name="__codelineno-24-61"></a>
<a id="__codelineno-24-62" name="__codelineno-24-62"></a>You<span class="w"> </span>should<span class="w"> </span>now<span class="w"> </span>deploy<span class="w"> </span>a<span class="w"> </span>pod<span class="w"> </span>network<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>cluster.
<a id="__codelineno-24-63" name="__codelineno-24-63"></a>Run<span class="w"> </span><span class="s2">&quot;kubectl apply -f [podnetwork].yaml&quot;</span><span class="w"> </span>with<span class="w"> </span>one<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>options<span class="w"> </span>listed<span class="w"> </span>at:
<a id="__codelineno-24-64" name="__codelineno-24-64"></a><span class="w">  </span>https://kubernetes.io/docs/concepts/cluster-administration/addons/
<a id="__codelineno-24-65" name="__codelineno-24-65"></a>
<a id="__codelineno-24-66" name="__codelineno-24-66"></a>Then<span class="w"> </span>you<span class="w"> </span>can<span class="w"> </span>join<span class="w"> </span>any<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>worker<span class="w"> </span>nodes<span class="w"> </span>by<span class="w"> </span>running<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>on<span class="w"> </span>each<span class="w"> </span>as<span class="w"> </span>root:
<a id="__codelineno-24-67" name="__codelineno-24-67"></a>
<a id="__codelineno-24-68" name="__codelineno-24-68"></a>kubeadm<span class="w"> </span>join<span class="w"> </span><span class="m">172</span>.16.2.117:6443<span class="w"> </span>--token<span class="w"> </span>abcdef.0123456789abcdef<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-24-69" name="__codelineno-24-69"></a><span class="w">    </span>--discovery-token-ca-cert-hash<span class="w"> </span>sha256:ede5cb0692ec5bf94eb0b2305ac3bea32e25bc10e87dce5a9c9be25bbcedc9cc<span class="w"> </span>
<a id="__codelineno-24-70" name="__codelineno-24-70"></a><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>root@automlgpu4<span class="w"> </span>k8s<span class="o">]</span><span class="c1"># mkdir -p $HOME/.kube</span>
<a id="__codelineno-24-71" name="__codelineno-24-71"></a><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>root@automlgpu4<span class="w"> </span>k8s<span class="o">]</span><span class="c1"># sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span>
<a id="__codelineno-24-72" name="__codelineno-24-72"></a><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>root@automlgpu4<span class="w"> </span>k8s<span class="o">]</span><span class="c1"># sudo chown $(id -u):$(id -g) $HOME/.kube/config</span>
<a id="__codelineno-24-73" name="__codelineno-24-73"></a><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>root@automlgpu4<span class="w"> </span>k8s<span class="o">]</span><span class="c1"># kubectl get node </span>
<a id="__codelineno-24-74" name="__codelineno-24-74"></a>NAME<span class="w">         </span>STATUS<span class="w">     </span>ROLES<span class="w">    </span>AGE<span class="w">   </span>VERSION
<a id="__codelineno-24-75" name="__codelineno-24-75"></a>automlgpu4<span class="w">   </span>NotReady<span class="w">   </span>master<span class="w">   </span>41s<span class="w">   </span>v1.19.4
</code></pre></div></td></tr></table></div></li>
</ul>
<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Render date of last update -->


<!-- Render date of creation -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render authors -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render committers from GitHub -->


<!-- Render committers from GitLab -->


<!-- Render committers -->


<!-- ---------------------------------------------------------------------- -->

<!-- Determine date of last update -->

  
    
  

  <!-- Determine date of creation -->
  


<!-- Source file information -->

  <aside class="md-source-file">

    <!-- Date of last update -->
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-07-14</span>
  </span>

    

    <!-- Date of creation -->
    

    <!-- Authors (git-authors plugin) -->
    

    <!-- Authors (git-committers plugin) -->
    
  </aside>

<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine feedback configuration -->

  


<!-- Determine whether to show feedback -->


<!-- Was this page helpful? -->

<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Comment system -->





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid" style="display: flex; justify-content: center; ">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2017~2024 AstonWang/All Rights Reserved.
    </div>
  
  
</div>

      <font color="#B9B9B9">
      <div class="md-footer-meta__inner md-grid" style="display: flex; justify-content: center; "></div>
        <div id='box11' style="font-size: 14px;"> &nbsp;| &nbsp; 本站已经运行: <span id="timer"></span></div>
      </font>

    <!-- 本站访问量：<script async src="//finicounter.eu.org/finicounter.js"></script> -->
    <!-- <span id="finicount_views"></span>    &nbsp;|&nbsp; -->
    <!-- <footer> -->
      <!-- <a href="https://icp.gov.moe/?keyword=20230640" target="_blank">萌ICP备20230640号</a> -->
    <!-- </footer> -->
  </div>
      </font>
   
    <!-- <font color="#B9B9B9">
      <div class="footer-visit-count" style="display: flex; justify-content: center; align-items: center;">
    本站访问量：<script async src="//finicounter.eu.org/finicounter.js"></script>
    <span id="finicount_views"></span>    &nbsp;|&nbsp;
    <footer>
      <a href="https://icp.gov.moe/?keyword=20230640" target="_blank">萌ICP备20230640号</a>
    </footer>
  </div>
      </font> -->

      <style>
        .footer-visit-count {
            height: fit-content;
            min-height: 55px; /* 根据实际情况调整此高度 */
        }
        </style>
      
    </div>
  </div>
</footer>


<script>
  document.addEventListener('DOMContentLoaded', (event) => {
  function timingTime(){
    let start = '2024-06-28 00:00:00'
    let startTime = new Date(start).getTime()
    let currentTime = new Date().getTime()
    let difference = currentTime - startTime
    let m =  Math.floor(difference / (1000))
    let mm = m % 60  // 秒
    let f = Math.floor(m / 60)
    let ff = f % 60 // 分钟
    let s = Math.floor(f/ 60) // 小时
    let ss = s % 24
    let day = Math.floor(s  / 24 ) // 天数
    return day + "天" + ss + "时" + ff + "分" + mm +'秒'
  }
  setInterval(()=>{
    document.getElementById('timer').innerHTML = timingTime()
  },1000)
  });
</script>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "navigation.indexes", "content.tabs.link", "content.tooltips", "content.code.copy", "content.action.edit", "content.action.view", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
    
      <script src="../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../../customize/javascripts/extra.js"></script>
      
        <script src="../../../customize/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.0.2/dist/add-html-label-6e56ed67.min.js"></script>
      
    
    <script src="../../../assets/javascripts/custom.9458f965.min.js"></script>
  
  </body>
</html>