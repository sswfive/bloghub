{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Home","text":"<p>AstonWang\u2018s Blog</p> <p> <p> </p> <p> </p>        \u7f16\u7a0b\u662f\u4e00\u79cd\u6280\u827a\uff0c\u4e00\u79cd\u9700\u8981\u7528\u5fc3\u5b66\u4e60\u7684\u6280\u827a         <p></p> <ul> <li>\u4e00\u5207\u770b\u4f3c\u901d\u53bb\u7684\uff0c\u90fd\u4e0d\u66fe\u79bb\u5f00\uff0c\u4f60\u6240\u7ed9\u4e88\u7684\u7231\u4e0e\u6e29\u6696\uff0c\u8ba9\u6211\u6267\u7740\u5730\u5b88\u62a4\u7740\u8fd9\u91cc \uff01    </li> <li>All problems in computer science can be solved by another level of indirection !</li> </ul>"},{"location":"postlist/","title":"\u6587\u7ae0\u5f52\u6863","text":"<p>Info</p> <p>\u6709\u4eba\u8bf4\uff1a\u79cd\u4e00\u9897\u6811\uff0c\u6700\u597d\u7684\u65f6\u95f4\u662f\u5341\u5e74\u524d\uff0c\u5176\u6b21\u662f\u73b0\u5728...</p> 202420232022202120202019 <ul> <li>2024-09-03  Kserve\u5b89\u88c5\u90e8\u7f72</li> <li>2024-08-21 Docker\u955c\u50cf\u65e0\u6cd5\u62c9\u53d6\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848</li> <li>2024-08-18 k8s\u5305\u7ba1\u7406\u5de5\u5177Helm\u7684\u4f7f\u7528</li> <li>2024-08-16 K8S\u96c6\u7fa4\u90e8\u7f72\u6307\u5357(v1.27.9)</li> <li>2024-07-31 Python\u4e2d\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u65e5\u5fd7\u7684\u65b9\u5f0f</li> <li>2024-07-30 \u7504\u9009GPT-AI\u5de5\u5177</li> <li>2024-07-17 k8s\u5b9e\u7528\u5de5\u5177\u4e4bKtConnect </li> <li>2024-06-18 \u5e38\u7528\u63d2\u4ef6\u96c6</li> <li>2024-06-15 \u5e38\u7528\u8f6f\u4ef6\u547d\u4ee4\u901f\u67e5</li> </ul> <ul> <li>2023-11-01 MLflow\u4e4b\u6a21\u578b\u751f\u547d\u5468\u671f\u7ba1\u7406</li> <li>2023-08-19 \u5b66\u4e60\u5e94\u8be5\u81ea\u5e95\u5411\u4e0a\uff0c\u8fd8\u662f\u81ea\u9876\u5411\u4e0b </li> <li>2023-08-15 Flink(On YARN)\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-15 Spark(ON YARN\uff09\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-15 YARN\u96c6\u7fa4\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-15 Hadoop\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-14 kafka\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-14 Zookeeper\u5b89\u88c5\u90e8\u7f72</li> <li>2023-08-13 Java\u73af\u5883\u5b89\u88c5</li> <li>2023-08-09 PyFlink\u4e4b\u5206\u5e03\u5f0f\u8ba1\u7b97</li> <li>2023-08-02 dockerignore\u6587\u4ef6</li> <li>2023-08-01 Go\u5b89\u5168\u6307\u5357(\u6458\u5f55)</li> <li>2022-07-28 Mongodb\u7684\u5b89\u88c5\u6307\u5357</li> <li>2023-07-20 PostgreSQL\u4e3b\u4ece\u90e8\u7f72</li> <li>2023-07-20 Etcd\u96c6\u7fa4\u90e8\u7f72</li> <li>2023-07-20 Redis\u4e3b\u4ece-\u54e8\u5175\u90e8\u7f72</li> <li>2023-07-20 Nginx\u90e8\u7f72</li> <li>2023-07-19 \u67e5\u770bDocker\u5bb9\u5668\u542f\u52a8\u7684\u8be6\u7ec6\u547d\u4ee4\u53ca\u53c2\u6570</li> <li>2023-06-18 Docker\u6784\u5efaPython\u955c\u50cf\u5b9e\u8df5\u6307\u5357</li> <li>2023-06-15 \u4e2a\u4eba\u6218\u7565\u4e0a\u7684\u805a\u7126\u548c\u653e\u5f03 </li> <li>2023-05-06 Mac\u4f7f\u7528brew services\u62a5\u9519</li> <li>2023-05-01 Python\u7248\u672c\u53ca\u5305\u7ba1\u7406\u5de5\u5177\u9009\u578b</li> <li>2023-04-15 gitflow\u7684\u4f7f\u7528</li> <li>2023-04-06  win10\u7684cmd\u4e2d\u64cd\u4f5cgit\u4e2d\u6587\u4e71\u7801\u89e3\u51b3\u65b9\u6cd5</li> <li>2023-04-02 git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5</li> <li>2023-03-31 Go\u5b66\u4e60\u8d44\u6599\u5e93</li> <li>2023-03-28 \u4f7f\u7528pypi\u8fdb\u884cPython\u5305\u7684\u53d1\u5e03</li> <li>2023-03-22 pathlib\u4e4b\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u5f0f\u64cd\u4f5c\u8def\u5f84</li> <li>2023-03-08 git\u5b9e\u7528\u914d\u7f6e</li> <li>2023-03-05 git\u4f7f\u7528\u603b\u7ed3</li> <li>2023-02-11 Mac\u5e38\u7528\u5feb\u6377\u952e</li> <li>2023-02-08  Go\u5728\u4e0d\u540c\u5e73\u53f0\u7684\u5b89\u88c5\u53ca\u914d\u7f6e\u6307\u5357</li> </ul> <ul> <li>2022-12-12 Python\u4e2d\u7684\u6570\u636e\u7c7b\u578b\u7528\u6cd5\u5256\u6790</li> <li>2022-11-10 \u63d0\u95ee\u7684\u667a\u6167</li> <li>2022-10-18 \u5982\u4f55\u9ad8\u6548\u5b66\u4e60\u5f00\u6e90\u9879\u76ee </li> <li>2022-10-05 Pandas\u4e4b\u6570\u636e\u5206\u6790\u5de5\u5177</li> <li>2022-10-02 Numpy\u4e4b\u6570\u636e\u8ba1\u7b97\u5de5\u5177</li> <li>2022-09-26 Jupyter matplotlib\u753b\u56fe\u4e2d\u6587\u5b57\u4f53\u7f3a\u5931</li> <li>2022-08-30 Jupyter\u8fd0\u884casyncio run\u62a5\u9519</li> <li>2022-07-31 \u7504\u9009\u5b9e\u7528\u8f6f\u4ef6</li> <li>2022-07-28 \u591a\u8bed\u8a00\u4e4b\u95f4\u7684RSA\u52a0\u89e3\u5bc6\u95ee\u9898</li> <li>2022-07-18 APScheduler\u4e4b\u5b9a\u65f6\u4efb\u52a1\u5de5\u5177</li> <li>2022-07-08 Conda\u4fee\u6539\u865a\u62df\u73af\u5883\u540d\u5bfc\u81f4\u5f02\u5e38</li> <li>2022-07-06 Centos\u7684yum\u6e90\u8bef\u5220\u89e3\u51b3\u65b9\u6cd5</li> <li>2022-06-19 Jupyter\u7cfb\u5217\u5de5\u5177\u7684\u4f7f\u7528\u603b\u7ed3</li> <li>2022-05-29 Supervisor\u4e4b\u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177</li> <li>2022-05-01 \u6280\u672f\u4e00\u8a00</li> <li>2022-04-25 docker-compose\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5\u6c47\u603b</li> <li>2022-04-21 docker-compose\u4f7f\u7528\u603b\u7ed3</li> <li>2022-04-15 Dockerfile\u5e38\u7528\u547d\u4ee4\u4e0e\u7f16\u5199\u6307\u5357</li> <li>2022-04-12 subprocess\u4e4b\u5b50\u8fdb\u7a0b\u7ba1\u7406</li> <li>2022-04-10 docker-registry\u642d\u5efa\u4e0e\u4f7f\u7528</li> <li>2022-04-04 Docker\u5e38\u7528\u547d\u4ee4\u901f\u67e5</li> <li>2022-04-02 Docker\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u6c47\u603b</li> <li>2022-04-01 Docker\u5b9e\u7528\u6280\u5de7</li> <li>2022-04-01 Docker\u5b89\u88c5\u5378\u8f7d\u6307\u5357</li> <li>2022-03-27 Docker\u67b6\u6784\u548c\u539f\u7406\u5b66\u4e60</li> <li>2022-03-22 Conda\u7684\u5b9e\u8df5\u5e94\u7528</li> <li>2022-02-06 \u670d\u52a1\u5668\u78c1\u76d8\u7a7a\u95f4\u6ee1\u7684\u89e3\u51b3\u529e\u6cd5</li> <li>2022-02-04 Go\u7684\u6307\u9488\u548c\u7ed3\u6784\u4f53</li> <li>2022-02-03 \u5982\u4f55\u66f4\u806a\u660e\u7684\u505a\u4e8b\u60c5 </li> <li>2022-02-03 Go\u7684\u5bb9\u5668\u6570\u636e\u7c7b\u578b</li> <li>2022-02-02 Go\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b</li> <li>2022-02-01 Go\u7684\u57fa\u672c\u77e5\u8bc6\u70b9</li> <li>2022-01-27 Go\u73af\u5883\u5b89\u88c5\u548c\u914d\u7f6e</li> <li>2022-01-26 Go\u7f16\u7801\u89c4\u8303</li> <li>2022-01-13 \u5e38\u7528pypi\u6e90\u6c47\u603b\u53ca\u4f7f\u7528</li> <li>2022-01-05  window\u73af\u5883\u4e2dpip\u5b89\u88c5\u62a5\u9519</li> <li>2022-01-02 Jupyterhub\u79bb\u7ebf\u90e8\u7f72\u8e29\u5751\u603b\u7ed3</li> </ul> <ul> <li>2021-12-21 Python\u5b89\u5168\u6307\u5357(\u6458\u5f55)</li> <li>2021-11-06 Pickle\u4e4b\u6570\u636e\u5e8f\u5217\u5316\u5de5\u5177\u7684\u4f7f\u7528</li> <li>2021-10-06 RabbitMQ\u4ecb\u7ecd\u548c\u4f7f\u7528</li> <li>2021-08-09 Zabbix\u5e38\u7528\u914d\u7f6e</li> <li>2021-07-17 Python\u5e38\u7528\u5f00\u53d1\u5de5\u5177</li> <li>2021-07-12 k8s\u4e2detcd\u6302\u8f7d\u5185\u5b58\u5377\u6b65\u9aa4</li> <li>2021-07-10 k8s\u7684storageclass-nfs\u5b89\u88c5\u548c\u4f7f\u7528</li> <li>2021-07-08 k8s\u7684Dashboard\u5b89\u88c5</li> <li>2021-03-22 k8s\u90e8\u7f72\u5e38\u89c1\u95ee\u9898\u6c47\u603b</li> <li>2021-03-21 k8s\u4e2dyaml\u6587\u4ef6\u7684\u7f16\u5199\u548c\u4f7f\u7528</li> <li>2021-03-18 k8s\u5b9e\u7528\u5c0f\u6280\u5de7</li> <li>2021-03-18 k8s\u6838\u5fc3\u6982\u5ff5</li> <li>2021-03-09 k8s\u5e38\u7528\u547d\u4ee4\u603b\u7ed3</li> <li>2021-03-06 django\u6e90\u7801\u5b66\u4e60\u4e4bLazyObject</li> <li>2021-03-02 k8s\u96c6\u7fa4\u90e8\u7f72\u6307\u5357(v1.19.4) </li> </ul> <ul> <li>2020-12-22 Python2\u5230Python3\u7684\u53d8\u5316</li> <li>2020-11-23 Python\u7f16\u7801\u89c4\u8303</li> <li>2020-10-13 django\u4e2d\u4f7f\u7528websocket</li> <li>2020-10-05 django\u4e2dORM\u67e5\u8be2\u65b9\u6cd5\u603b\u7ed3</li> <li>2020-10-04 django\u4e2dORM\u5b57\u6bb5\u603b\u7ed3</li> <li>2020-09-02 django\u4e2d\u7c7b\u89c6\u56fe\u7684\u4f7f\u7528</li> <li>2020-09-01 django\u4e2d\u95f4\u4ef6\u7684\u4f7f\u7528</li> <li>2020-08-23 django\u6279\u91cf\u5bfc\u5165\u6570\u636e</li> <li>2020-08-21 django1.7\u4ee5\u524d\u7684\u7248\u672c\u6267\u884c\u6570\u636e\u5e93\u8fc1\u79fb</li> <li>2020-04-05 Python\u4e4bcollections\u7684\u7528\u6cd5</li> </ul> <ul> <li>2019-06-09 python\u4e2d\u7684GC</li> <li>2019-06-07 python\u4e2d\u7684\u5185\u5b58\u7ba1\u7406</li> <li>2019-06-06 python\u4e2d\u7684GIL</li> <li>2019-05-26 python\u4e2d\u7684Futures</li> <li>2019-05-20 Python\u4e2d\u7684Asyncio</li> <li>2019-05-18 python\u4e2dis\u548cequals\u7684\u533a\u522b</li> <li>2019-05-15 python\u4e2d\u7684\u9762\u5411\u5bf9\u8c61\u7f16\u7a0bOOP</li> <li>2019-05-10 def\u51fd\u6570\u4e0elambda\u51fd\u6570</li> <li>2019-05-10 python\u4e2d\u7684property</li> <li>2019-05-09 \u8fed\u4ee3\u5668iterator\u7528\u6cd5</li> <li>2019-05-09 \u751f\u6210\u5668generator\u7528\u6cd5</li> <li>2019-05-07 \u88c5\u9970\u5668(decorator)\u7528\u6cd5</li> <li>2019-05-06 \u95ed\u5305(closure)\u7528\u6cd5</li> <li>2019-05-03 \u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d</li> <li>2019-05-03 python\u5f02\u5e38\u5904\u7406</li> <li>2019-05-02 python\u4e4b\u5bb9\u5668\u7c7b\u578b</li> <li>2019-05-01 python\u53d8\u91cf\u4e0e\u6ce8\u91ca</li> <li>2019-05-01 Python\u57fa\u7840\u77e5\u8bc6\u68b3\u7406</li> </ul>"},{"location":"about/profile/","title":"\u4e2a\u4eba\u4e3b\u9875","text":"<p>AstonWang\u2018s Blog</p> <p>\u4e00\u5207\u770b\u4f3c\u901d\u53bb\u7684\uff0c\u90fd\u4e0d\u66fe\u79bb\u5f00\uff0c\u4f60\u6240\u7ed9\u4e88\u7684\u7231\u4e0e\u6e29\u6696\uff0c\u8ba9\u6211\u6267\u7740\u5730\u5b88\u62a4\u5728\u8fd9\u91cc</p> <p>About Site</p> <p>\u56e0\u4e2a\u4eba\u5e73\u65f6\u559c\u6b22\u559d\u5496\u5561\u548c\u542c\u97f3\u4e50\uff0c\u6240\u4ee5\u5c06\u672c\u7ad9\u53d6\u540d\u4e3aIceCoffee[\u7a7a\u8c37\u5e7d\u5170]\uff0cIceCoffee\u7684\u610f\u4e3a\u51b0\u5496\u5561\uff0c\u300a\u7a7a\u8c37\u5e7d\u5170\u300b\u5219\u662f\u53d6\u81ea\u97f3\u4e50\u8bd7\u4eba\u8bb8\u5dcd\u7684\u6b4c\u66f2\uff1b</p> <p>\u56de\u671b\u8d70\u8fc7\u7684\u8fd9\u4e9b\u5e74\uff0c\u65e0\u8bba\u662f\u8d70\u8fc7\u7684\u8def\u8fd8\u662f\u505a\u8fc7\u7684\u4e8b\uff0c\u603b\u4f1a\u5728\u65e0\u58f0\u7684\u65f6\u95f4\u91cc\u88ab\u6162\u6162\u6c89\u6dc0\uff0c\u4e8e\u6b64\u540c\u65f6\uff0c\u8bb0\u5fc6\u4e5f\u5728\u6162\u6162\u7684\u88ab\u65f6\u95f4\u7a00\u91ca\uff0c\u7a81\u7136\u7684\u67d0\u4e2a\u77ac\u95f4\uff0c\u53d1\u73b0\u4ec5\u9760\u8bb0\u5fc6\u53bb\u8bb0\u5f55\u7684\u751f\u6d3b\uff0c\u8fc7\u53bb\u7684\u5f88\u591a\u5149\u5f71\u90fd\u5df2\u6401\u6d45\u5728\u8bb0\u5f55\u91cc\uff0c\u4efb\u51ed\u81ea\u5df1\u600e\u4e48\u52aa\u529b\u56de\u60f3\uff0c\u80fd\u627e\u56de\u7684\u4e5f\u53ea\u6709\u96f6\u661f\u70b9\u70b9...</p> <p>\u4e8e\u662f\u4e4e\uff0c\u51b3\u5b9a\u4e3a\u672a\u6765\u7684\u81ea\u5df1\u505a\u4e00\u70b9\u6709\u8ff9\u53ef\u5faa\u7684\u4e8b\uff0c\u56e0\u6b64\u4fbf\u6709\u4e86\u8fd9\u4e2a\u7ad9\u70b9IceCoffee[\u7a7a\u8c37\u5e7d\u5170]\uff0c\u5f80\u540e\u7684\u65e5\u5b50\u5e0c\u671b\u81ea\u5df1\u80fd\u505a\u4e00\u4e2a\u957f\u671f\u4e3b\u4e49\u8005\uff0c\u575a\u6301\u4e0b\u53bb\uff0c\u7528\u5fc3\u6292\u5199...</p> <p>PS: \u8fd9\u4e00\u6b21\uff0c\u91cd\u65b0\u51fa\u53d1\uff0c\u628a\u4ee5\u524d\u96f6\u788e\u5206\u522b\u5206\u6563\u5728\u6709\u9053\u4e91\u7b14\u8bb0\u3001Notion\u3001\u8bed\u96c0\u4e2d\u5173\u4e8e\u5b66\u4e60\u3001\u5173\u4e8e\u6280\u672f\u3001\u5173\u4e8e\u60f3\u6cd5\u7684\u788e\u7247\u5316\u7684\u5185\u5bb9\uff0c\u91cd\u65b0\u601d\u8003\u603b\u7ed3\u8f93\u51fa\u5230\u6b64\u7ad9\u70b9\uff0c\u5e0c\u671b\u80fd\u5e2e\u52a9\u5230\u5927\u5bb6\uff0c\u4e5f\u5e0c\u671b\u5927\u5bb6\u80fd\u591f\u591a\u591a\u652f\u6301\uff01\uff08\u5982\u679c\u9519\u8bef\uff0c\u6b22\u8fce\u6307\u6b63\uff01\uff09</p> <p></p> <p>About Me</p> <ul> <li> Hey, I'm AstonWang! \u4e00\u4e2a\u5496\u5561\u91cd\u5ea6\u7231\u597d\u8005...</li> <li> \u76ee\u524d\u4e3b\u8981\u4ece\u4e8b\u540e\u7aef+ModelOps\u65b9\u5411\u7684\u5de5\u4f5c...</li> <li> \u559c\u6b22\u7814\u7a76\u65b0\u6280\u672f\uff0c\u70ed\u8877\u5728Github\u95f2\u901b,\u529b\u4e89\u505a\u4e00\u4e2a\u5168\u6cbe\u624b\u827a\u4eba...</li> </ul> <p>About \u4e00\u8a00</p> <ul> <li> \u6211\u8ba4\u6e05\u65f6\u95f4\u7684\u65f6\u5019\uff0c\u53ea\u5269\u4e0b\u4e00\u5bf8\u5149\u9634\uff0c\u8fd9\u662f\u6211\u7684\u4e2a\u4eba\u4e3b\u9875\uff0c\u5230\u5904\u662f\u5c81\u6708\u75d5\u8ff9...</li> <li> \u65e5\u51fa\u672a\u5fc5\u610f\u5473\u7740\u5149\u660e\uff0c\u592a\u9633\u4e5f\u65e0\u975e\u662f\u4e00\u9897\u6668\u661f\uff0c\u53ea\u6709\u5728\u6211\u4eec\u9192\u7740\u65f6\uff0c\u624d\u662f\u771f\u6b63\u7684\u7834\u6653...</li> </ul> Python Go \u6570\u636e\u5206\u6790 \u673a\u5668\u5b66\u4e60 Shell <p> <p> </p> <p> </p> <p>Send Email </p>"},{"location":"golang/go_learn_docs/","title":"Go\u5b66\u4e60\u8d44\u6599\u5e93","text":"","tags":["Go"]},{"location":"golang/go_learn_docs/#_1","title":"\u5165\u95e8\u6559\u7a0b\uff1a","text":"<ul> <li>Go by Example </li> <li>Go 101\uff1a\u5728\u7ebf\u7535\u5b50\u4e66</li> <li>Effective Go\uff1a Go\u5b98\u65b9\u51fa\u54c1\u7684\u5fc5\u8bfb\u8d44\u6599\uff0c\u8fd9\u7bc7\u6587\u7ae0\u544a\u8bc9\u4f60\u5982\u4f55\u66f4\u597d\u5730\u4f7f\u7528Go\u8bed\u8a00\uff0c\u4ee5\u53caGo\u8bed\u97f3\u4e2d\u7684\u4e00\u4e9b\u9053\u7406</li> </ul>","tags":["Go"]},{"location":"golang/go_learn_docs/#_2","title":"\u5e76\u53d1\u7f16\u7a0b","text":"<ul> <li>Go Concurrency Patterns\uff08 \u5e7b\u706f\u7247\u548c\u6f14\u8bb2\u89c6\u9891\uff09\u3002</li> <li>Advanced Go Concurrency Patterns\uff08\u5e7b\u706f\u7247\u3001\u6f14\u8bb2\u89c6\u9891\uff09\u3002</li> </ul>","tags":["Go"]},{"location":"golang/go_learn_docs/#github","title":"GitHub\u8d44\u6e90","text":"<ul> <li>Go \u7cbe\u534e\u6587\u7ae0\u5217\u8868</li> <li>Go \u76f8\u5173\u535a\u5ba2\u5217\u8868</li> <li>Go Talks</li> <li>Awesome Go\uff1a Go\u8d44\u6e90\u5217\u8868</li> </ul>","tags":["Go"]},{"location":"golang/go_learn_docs/#_3","title":"\u535a\u5ba2\u6559\u7a0b\uff1a","text":"<ul> <li>\u9648\u7693</li> <li>GO \u8bed\u8a00\u7b80\u4ecb\uff08\u4e0a\uff09- \u8bed\u6cd5</li> <li>GO \u8bed\u8a00\u7b80\u4ecb\uff08\u4e0b\uff09- \u7279\u6027</li> <li>Go\u8bed\u97f3\u7f16\u7a0b\u6a21\u5f0f\u5b9e\u6218</li> <li>Tony\u00b7Bai</li> <li>\u9e1f\u7a9d</li> <li>\u98de\u96ea\u65e0\u60c5</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/","title":"Go\u7f16\u7801\u89c4\u8303","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_1","title":"\u6211\u4eec\u4e3a\u4ec0\u4e48\u9700\u8981\u7f16\u7a0b\u89c4\u8303\uff1f","text":"<p>\u7f16\u7a0b\u89c4\u8303\u53c8\u53eb\u4ee3\u7801\u89c4\u8303\uff0c\u662f\u56e2\u961f\u4e4b\u95f4\u5728\u7a0b\u5e8f\u5f00\u53d1\u65f6\u9700\u8981\u9075\u5b88\u7684\u7ea6\u5b9a\u3002\u4fd7\u8bdd\u8bf4\uff0c\u65e0\u89c4\u77e9\u4e0d\u6210\u65b9\u5706\uff0c\u4e00\u4e2a\u5f00\u53d1\u56e2\u961f\u5e94\u8be5\u5c31\u4e00\u79cd\u7f16\u7a0b\u89c4\u8303\u8fbe\u6210\u4e00\u81f4\u3002\u7f16\u7a0b\u89c4\u8303\u6709\u5f88\u591a\u597d\u5904\uff0c\u6211\u4eec\u7b80\u5355\u8bf4\u51e0\u4e2a\u6700\u4e3b\u8981\u7684\u3002</p> <ul> <li>\u4fc3\u8fdb\u56e2\u961f\u5408\u4f5c</li> </ul> <p>\u73b0\u4ee3\u9879\u76ee\u5927\u591a\u662f\u7531\u56e2\u961f\u5b8c\u6210\u7684\uff0c\u4f46\u662f\u5982\u679c\u6bcf\u4e2a\u4eba\u4e66\u5199\u51fa\u7684\u4ee3\u7801\u98ce\u683c\u8fe5\u5f02\uff0c\u6700\u540e\u96c6\u6210\u4ee3\u7801\u65f6\u5f88\u5bb9\u6613\u6742\u4e71\u65e0\u7ae0\u3001\u53ef\u8bfb\u6027\u6781\u5dee\u3002\u76f8\u53cd\uff0c\u98ce\u683c\u7edf\u4e00\u7684\u4ee3\u7801\u5c06\u5927\u5927\u63d0\u9ad8\u53ef\u8bfb\u6027\uff0c\u6613\u4e8e\u7406\u89e3\uff0c\u4fc3\u8fdb\u56e2\u961f\u534f\u4f5c\u3002</p> <ul> <li>\u89c4\u907f\u9519\u8bef</li> </ul> <p>\u6bcf\u4e00\u79cd\u8bed\u8a00\u90fd\u6709\u5bb9\u6613\u72af\u7684\u9519\u8bef\uff0cGo\u8bed\u8a00\u4e5f\u4e0d\u4f8b\u5916\u3002\u4f46\u662f\u7f16\u7801\u89c4\u8303\u53ef\u4ee5\u89c4\u907f\u6389\u50cfMap\u5e76\u53d1\u8bfb\u5199\u7b49\u95ee\u9898\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u89c4\u8303\u7684\u65e5\u5fd7\u5904\u7406\u3001\u9519\u8bef\u5904\u7406\u8fd8\u80fd\u591f\u52a0\u5feb\u6211\u4eec\u67e5\u627e\u95ee\u9898\u7684\u901f\u5ea6\u3002</p> <ul> <li>\u63d0\u5347\u6027\u80fd</li> </ul> <p>\u4f18\u79c0\u7684\u5f00\u53d1\u8005\uff0c\u80fd\u591f\u5728\u5934\u8111\u4e2d\u60f3\u8c61\u51fa\u4e0d\u540c\u7a0b\u5e8f\u8fd0\u884c\u7684\u8fc7\u7a0b\u548c\u7ed3\u679c\uff0c\u5199\u51fa\u9ad8\u6027\u80fd\u7684\u7a0b\u5e8f\u975e\u5e38\u8003\u9a8c\u5f00\u53d1\u8005\u7684\u5185\u529f\u3002\u4f46\u6bcf\u4e2a\u4eba\u7684\u6c34\u5e73\u90fd\u6709\u5dee\u5f02\uff0c\u8fd9\u4e00\u70b9\u5e76\u4e0d\u53ef\u63a7\u3002\u4f46\u662f\u5982\u679c\u6211\u4eec\u5c06\u9ad8\u6027\u80fd\u7f16\u7a0b\u7684\u5e38\u89c1\u624b\u6bb5\u5f52\u7eb3\u6574\u7406\u51fa\u6765\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u9075\u5b88\u8fd9\u4e9b\u7b80\u5355\u7684\u89c4\u5219\uff0c\u5c31\u80fd\u591f\u89c4\u907f\u6027\u80fd\u9677\u9631\u3001\u6781\u5927\u63d0\u5347\u7a0b\u5e8f\u6027\u80fd\u3002</p> <ul> <li>\u4fbf\u4e8e\u7ef4\u62a4</li> </ul> <p>\u6211\u4eec\u4e60\u60ef\u4e8e\u5173\u6ce8\u7f16\u5199\u4ee3\u7801\u7684\u6210\u672c\uff0c\u4f46\u5b9e\u9645\u4e0a\u7ef4\u62a4\u4ee3\u7801\u7684\u6210\u672c\u8981\u9ad8\u5f97\u591a\u3002\u5927\u90e8\u5206\u7684\u9879\u76ee\u662f\u5728\u524d\u4eba\u7684\u57fa\u7840\u4e0a\u5b8c\u6210\u5f00\u53d1\u7684\u3002\u6211\u4eec\u5728\u5f00\u53d1\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u4e5f\u4f1a\u82b1\u5927\u91cf\u65f6\u95f4\u9605\u8bfb\u4e4b\u524d\u7684\u4ee3\u7801\u3002\u7b26\u5408\u89c4\u8303\u7684\u4ee3\u7801\u66f4\u5bb9\u6613\u4e0a\u624b\u7ef4\u62a4\u3001\u66f4\u5c11\u51fa\u73b0\u7275\u4e00\u53d1\u52a8\u5168\u8eab\u7684\u8026\u5408\u73b0\u8c61\u3001\u4e5f\u66f4\u5bb9\u6613\u770b\u51fa\u4e1a\u52a1\u5904\u7406\u903b\u8f91\u3002</p> <p>\u77e5\u9053\u4e86\u7f16\u7a0b\u89c4\u8303\u7684\u597d\u5904\uff0c\u90a3\u6211\u4eec\u5e94\u8be5\u89c4\u8303\u4ec0\u4e48\u5185\u5bb9\u5462\uff1f\u8fd9\u5176\u5b9e\u6d89\u53ca\u5230\u6211\u4eec\u5bf9\u597d\u4ee3\u7801\u7684\u5b9a\u4e49\u3002\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u60f3\u6bcf\u4e2a\u4eba\u90fd\u80fd\u591f\u8bf4\u4e2a\u51e0\u53e5\u3002\u6211\u8ba4\u4e3a\uff0c\u597d\u7684\u4ee3\u7801\u9996\u5148\u662f\u6574\u6d01\u3001\u4e00\u81f4\u7684\uff0c\u540c\u65f6\u5b83\u8fd8\u662f\u9ad8\u6548\u3001\u5065\u58ee\u548c\u53ef\u6269\u5c55\u7684\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u4ece\u8fd9\u51e0\u4e2a\u7ef4\u5ea6\u804a\u804a\u5236\u5b9aGo\u7f16\u7801\u89c4\u8303\u7684\u539f\u5219\u548c\u6700\u4f73\u5b9e\u8df5\u3002</p> <p>\u518d\u591a\u8bf4\u4e00\u53e5\uff0c\u6709\u4e00\u4e9b\u89c4\u8303\u53ef\u4ee5\u662f\u5f3a\u5236\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5de5\u5177\u548c\u4ee3\u7801review\u5f3a\u5236\u8981\u6c42\u7528\u6237\u9075\u5b88\uff0c\u8fd8\u6709\u4e00\u4e9b\u89c4\u8303\u662f\u5efa\u8bae\u7684\uff0c\u56e0\u4e3a\u5b83\u66f4\u5177\u6709\u7075\u6d3b\u6027\uff0c\u5f88\u96be\u88ab\u7ea6\u675f\u3002\u5728\u540e\u9762\u7684\u89c4\u8303\u4e2d\uff0c[\u5f3a\u5236 xxx]\u4e2d\u7684\u201cxxx\u201d\u4ee3\u8868\u7684\u5c31\u662f\u53ef\u5f3a\u5236\u68c0\u67e5\u7684\u5de5\u5177\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_2","title":"\u6574\u6d01\u3001\u4e00\u81f4","text":"<p>\u597d\u4ee3\u7801\u7684\u7b2c\u4e00\u4e2a\u8981\u6c42\uff0c\u662f\u6574\u6d01\u548c\u4e00\u81f4\u3002\u6709\u4e00\u53e5\u8bdd\u662f\u8fd9\u6837\u8bf4\u7684\uff1a</p> <p>Any fool can write code that a computer can understand. Good programmers write code that humans can understand. </p> <p>\u5b83\u7684\u610f\u601d\u662f\uff0c\u4efb\u4f55\u50bb\u74dc\u90fd\u53ef\u4ee5\u7f16\u5199\u8ba1\u7b97\u673a\u53ef\u4ee5\u7406\u89e3\u7684\u4ee3\u7801\uff0c\u800c\u4f18\u79c0\u7684\u7a0b\u5e8f\u5458\u7f16\u5199\u7684\u662f\u4eba\u7c7b\u53ef\u4ee5\u7406\u89e3\u7684\u4ee3\u7801\u3002</p> <p>\u5982\u679c\u6211\u4eec\u7684\u4ee3\u7801\u770b\u8d77\u6765\u4e71\u4e03\u516b\u7cdf\uff0c\u5c31\u50cf\u559d\u9189\u7684\u4eba\u5199\u7684\u90a3\u6837\uff0c\u8fd9\u6837\u4e0d\u4e25\u8c28\u7684\u4ee3\u7801\u8ba9\u6211\u4eec\u6709\u7406\u7531\u76f8\u4fe1\uff0c\u9879\u76ee\u7684\u5176\u4ed6\u5404\u4e2a\u65b9\u9762\u4e5f\u9690\u85cf\u7740\u5bf9\u7ec6\u8282\u7684\u758f\u5ffd\uff0c\u5e76\u57cb\u4e0b\u4e86\u91cd\u5927\u7684\u9690\u60a3\u3002</p> <p>\u9605\u8bfb\u6574\u6d01\u7684\u4ee3\u7801\u5c31\u50cf\u770b\u5230\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u624b\u8868\u6216\u6c7d\u8f66\u4e00\u6837\u8d4f\u5fc3\u60a6\u76ee\uff0c\u56e0\u4e3a\u5b83\u51dd\u805a\u4e86\u56e2\u961f\u7684\u667a\u6167\u3002</p> <p>\u9605\u8bfb\u6574\u6d01\u7684\u4ee3\u7801\u4e5f\u50cf\u8bfb\u5230\u7684\u6b66\u4fa0\u5c0f\u8bf4\uff0c\u4e66\u4e2d\u7684\u6587\u5b57\u88ab\u8111\u4e2d\u7684\u56fe\u50cf\u53d6\u4ee3\uff0c\u4f60\u770b\u5230\u4e86\u89d2\u8272\uff0c\u542c\u5230\u4e86\u58f0\u97f3\uff0c\u4f53\u9a8c\u5230\u4e86\u60b2\u6006\u548c\u5e7d\u9ed8\u3002</p> <p>\u4f46\u662f\uff0c\u660e\u767d\u4ec0\u4e48\u662f\u6574\u6d01\u7684\u4ee3\u7801\u5e76\u4e0d\u610f\u5473\u7740\u4f60\u80fd\u5199\u51fa\u6574\u6d01\u7684\u4ee3\u7801\u3002\u5c31\u597d\u50cf\u6211\u4eec\u77e5\u9053\u5982\u4f55\u6b23\u8d4f\u4e00\u5e45\u753b\u4e0d\u610f\u5473\u7740\u6211\u4eec\u80fd\u6210\u4e3a\u753b\u5bb6\u3002</p> <p>\u6574\u6d01\u7684\u4ee3\u7801\u5305\u62ec\u5bf9\u683c\u5f0f\u5316\u3001\u547d\u540d\u3001\u51fd\u6570\u7b49\u7ec6\u8282\u7684\u5bc6\u5207\u5173\u6ce8\uff0c\u66f4\u9700\u8981\u5728\u9879\u76ee\u4e2d\u5177\u4f53\u5b9e\u8df5\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u6765\u770b\u770b\u6574\u6d01\u4ee3\u7801\u5173\u6ce8\u7684\u8fd9\u4e9b\u7ec6\u8282\u548c\u6700\u4f73\u7684\u5b9e\u8df5\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_3","title":"\u683c\u5f0f\u5316","text":"<p>\u4ee3\u7801\u957f\u5ea6</p> <p>\u4ee3\u7801\u5e94\u8be5\u6709\u8db3\u591f\u7684\u5782\u76f4\u5bc6\u5ea6\uff0c\u80fd\u591f\u8089\u773c\u4e00\u6b21\u83b7\u5f97\u5230\u66f4\u591a\u7684\u4fe1\u606f\u3002\u540c\u65f6\uff0c\u5355\u4e2a\u51fd\u6570\u3001\u5355\u884c\u3001\u5355\u6587\u4ef6\u4e5f\u9700\u8981\u9650\u5236\u957f\u5ea6\uff0c\u4fdd\u8bc1\u53ef\u9605\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p> <p>[\u5f3a\u5236 lll] \u4e00\u884c\u5185\u4e0d\u8d85\u8fc7 120 \u4e2a\u5b57\u7b26\uff0c\u540c\u65f6\u5e94\u5f53\u907f\u514d\u523b\u610f\u65ad\u884c\u3002\u5982\u679c\u4f60\u53d1\u73b0\u67d0\u4e00\u884c\u592a\u957f\u4e86\uff0c\u8981\u4e48\u6539\u540d\uff0c\u8981\u4e48\u8c03\u6574\u8bed\u4e49\uff0c\u5f80\u5f80\u5c31\u53ef\u4ee5\u89e3\u51b3\u95ee\u9898\u4e86\u3002</p> <p>[\u5f3a\u5236 funlen] \u5355\u4e2a\u51fd\u6570\u7684\u884c\u6570\u4e0d\u8d85\u8fc7 40 \u884c\uff0c\u8fc7\u957f\u5219\u8868\u793a\u51fd\u6570\u529f\u80fd\u4e0d\u4e13\u4e00\u3001\u5b9a\u4e49\u4e0d\u660e\u786e\u3001\u7a0b\u5e8f\u7ed3\u6784\u4e0d\u5408\u7406\uff0c\u4e0d\u6613\u4e8e\u7406\u89e3\u3002\u5f53\u51fd\u6570\u8fc7\u957f\u65f6\uff0c\u53ef\u4ee5\u63d0\u53d6\u51fd\u6570\u4ee5\u4fdd\u6301\u6b63\u6587\u5c0f\u4e14\u6613\u8bfb\u3002</p> <p>[\u5f3a\u5236] \u5355\u4e2a\u6587\u4ef6\u4e0d\u8d85\u8fc7 2000 \u884c\uff0c\u8fc7\u957f\u8bf4\u660e\u5b9a\u4e49\u4e0d\u660e\u786e\uff0c\u7a0b\u5e8f\u7ed3\u6784\u5212\u5206\u4e0d\u5408\u7406\uff0c\u4e0d\u5229\u4e8e\u7ef4\u62a4\u3002</p> <p>\u4ee3\u7801\u5e03\u5c40</p> <p>\u6211\u4eec\u5148\u8bd5\u60f3\u4e00\u7bc7\u5199\u5f97\u5f88\u597d\u7684\u62a5\u7eb8\u6587\u7ae0\u3002\u5728\u9876\u90e8\uff0c\u4f60\u5e0c\u671b\u6709\u4e00\u4e2a\u6807\u9898\uff0c\u5b83\u4f1a\u544a\u8bc9\u4f60\u6545\u4e8b\u7684\u5927\u81f4\u5185\u5bb9\uff0c\u5e76\u5f71\u54cd\u4f60\u662f\u5426\u8981\u9605\u8bfb\u5b83\u3002\u6587\u7ae0\u7684\u7b2c\u4e00\u6bb5\u4f1a\u4e3a\u4f60\u63d0\u4f9b\u6574\u4e2a\u6545\u4e8b\u7684\u6982\u8981\u3001\u7c97\u7565\u7684\u6982\u5ff5\uff0c\u4f46\u662f\u9690\u85cf\u4e86\u6240\u6709\u7ec6\u8282\u3002\u7ee7\u7eed\u5411\u4e0b\u9605\u8bfb\uff0c\u8be6\u7ec6\u4fe1\u606f\u4f1a\u9010\u6b65\u589e\u52a0\u3002</p> <p>[\u5efa\u8bae]  Go \u6587\u4ef6\u63a8\u8350\u6309\u4ee5\u4e0b\u987a\u5e8f\u8fdb\u884c\u5e03\u5c40\u3002</p> <p>1.\u5305\u6ce8\u91ca\uff1a\u5bf9\u6574\u4e2a\u6a21\u5757\u548c\u529f\u80fd\u7684\u5b8c\u6574\u63cf\u8ff0\uff0c\u5199\u5728\u6587\u4ef6\u5934\u90e8</p> <p>2.Package\uff1a\u5305\u540d\u79f0</p> <p>3.Imports\uff1a\u5f15\u5165\u7684\u5305</p> <p>4.Constants\uff1a\u5e38\u91cf\u5b9a\u4e49</p> <p>5.Typedefs\uff1a\u7c7b\u578b\u5b9a\u4e49</p> <p>6.Globals\uff1a\u5168\u5c40\u53d8\u91cf\u5b9a\u4e49</p> <p>7.Functions\uff1a\u51fd\u6570\u5b9e\u73b0</p> <p>\u6bcf\u4e2a\u90e8\u5206\u4e4b\u95f4\u7528\u4e00\u4e2a\u7a7a\u884c\u5206\u5272\u3002\u6bcf\u4e2a\u90e8\u5206\u6709\u591a\u4e2a\u7c7b\u578b\u5b9a\u4e49\u6216\u8005\u6709\u591a\u4e2a\u51fd\u6570\u65f6\uff0c\u4e5f\u7528\u4e00\u4e2a\u7a7a\u884c\u5206\u5272\u3002\u793a\u4f8b\u5982\u4e0b\uff1a</p> Text Only<pre><code>/*\n\u6ce8\u91ca\n*/\npackage http\n\nimport (\n \"fmt\"\n \"time\"\n)\n\nconst (\n VERSION = \"1.0.0\"\n)\ntype Request struct{\n}\n\nvar msg = \"HTTP success\"\n\nfunc foo() {\n //...\n}\n</code></pre> <p>[\u5f3a\u5236 goimports] \u5f53 import \u591a\u4e2a\u5305\u65f6\uff0c\u5e94\u8be5\u5bf9\u5305\u8fdb\u884c\u5206\u7ec4\u3002\u540c\u4e00\u7ec4\u7684\u5305\u4e4b\u95f4\u4e0d\u9700\u8981\u6709\u7a7a\u884c\uff0c\u4e0d\u540c\u7ec4\u4e4b\u95f4\u7684\u5305\u9700\u8981\u4e00\u4e2a\u7a7a\u884c\u3002\u6807\u51c6\u5e93\u7684\u5305\u5e94\u8be5\u653e\u5728\u7b2c\u4e00\u7ec4\u3002</p> <p>\u7a7a\u683c\u4e0e\u7f29\u8fdb</p> <p>\u4e3a\u4e86\u8ba9\u9605\u8bfb\u4ee3\u7801\u65f6\u89c6\u7ebf\u7545\u901a\uff0c\u81ea\u4e0a\u800c\u4e0b\u601d\u8def\u4e0d\u88ab\u6253\u65ad\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u4e00\u4e9b\u7a7a\u683c\u548c\u7f29\u8fdb\u3002</p> <p>\u7a7a\u683c\u662f\u4e3a\u4e86\u5206\u79bb\u5173\u6ce8\u70b9\uff0c\u5c06\u4e0d\u540c\u7684\u7ec4\u4ef6\u5206\u5f00\u3002\u7f29\u8fdb\u662f\u4e3a\u4e86\u5904\u7406\u9519\u8bef\u548c\u8fb9\u7f18\u60c5\u51b5\uff0c\u4e0e\u6b63\u5e38\u7684\u4ee3\u7801\u5206\u9694\u5f00\u3002</p> <p>\u8f83\u5e38\u7528\u7684\u6709\u4e0b\u9762\u8fd9\u4e9b\u89c4\u8303\uff1a</p> <p>[\u5f3a\u5236 gofmt] \u6ce8\u91ca\u548c\u58f0\u660e\u5e94\u8be5\u5bf9\u9f50\u3002\u793a\u4f8b\u5982\u4e0b\uff1a</p> Text Only<pre><code>type T struct {\n    name    string // name of the object\n    value   int    // its value\n}\n</code></pre> <p>[\u5f3a\u5236 gofmt] \u5c0f\u62ec\u53f7()\u3001\u4e2d\u62ec\u53f7[]\u3001\u5927\u62ec\u53f7{} \u5185\u4fa7\u90fd\u4e0d\u52a0\u7a7a\u683c\u3002</p> <p>[\u5f3a\u5236 gofmt] \u9017\u53f7\u3001\u5192\u53f7\uff08slice\u4e2d\u5192\u53f7\u9664\u5916\uff09\u524d\u90fd\u4e0d\u52a0\u7a7a\u683c\uff0c\u540e\u9762\u52a0 1 \u4e2a\u7a7a\u683c\u3002</p> <p>[\u5f3a\u5236 gofmt] \u6240\u6709\u4e8c\u5143\u8fd0\u7b97\u7b26\u524d\u540e\u5404\u52a0\u4e00\u4e2a\u7a7a\u683c\uff0c\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u65f6\u9664\u5916\u3002\u4f8b\u5982<code>b := 1 + 2</code>\u3002[\u5f3a\u5236 gofmt] \u4f7f\u7528 Tab \u800c\u4e0d\u662f\u7a7a\u683c\u8fdb\u884c\u7f29\u8fdb\u3002</p> <p>[\u5f3a\u5236 nlreturn] return\u524d\u65b9\u9700\u8981\u52a0\u4e00\u4e2a\u7a7a\u884c\uff0c\u8ba9\u4ee3\u7801\u903b\u8f91\u66f4\u6e05\u6670\u3002</p> <p>[\u5f3a\u5236 gofmt] \u5224\u65ad\u8bed\u53e5\u3001for\u8bed\u53e5\u9700\u8981\u7f29\u8fdb1\u4e2a Tab\uff0c\u5e76\u4e14\u53f3\u5927\u62ec\u53f7<code>}</code>\u4e0e\u5bf9\u5e94\u7684 if \u5173\u952e\u5b57\u5782\u76f4\u5bf9\u9f50\u3002\u4f8b\u5982\uff1a</p> Text Only<pre><code>if xxx {\n\n} else {\n\n}\n</code></pre> <p>[\u5f3a\u5236 goimports] \u5f53 import \u591a\u4e2a\u5305\u65f6\uff0c\u5e94\u8be5\u5bf9\u5305\u8fdb\u884c\u5206\u7ec4\u3002\u540c\u4e00\u7ec4\u7684\u5305\u4e4b\u95f4\u4e0d\u9700\u8981\u6709\u7a7a\u884c\uff0c\u4e0d\u540c\u7ec4\u4e4b\u95f4\u7684\u5305\u9700\u8981\u4e00\u4e2a\u7a7a\u884c\u3002\u6807\u51c6\u5e93\u7684\u5305\u5e94\u8be5\u653e\u5728\u7b2c\u4e00\u7ec4\u3002\u8fd9\u540c\u6837\u9002\u7528\u4e8e\u5e38\u91cf\u3001\u53d8\u91cf\u548c\u7c7b\u578b\u58f0\u660e\uff1a</p> Text Only<pre><code>import (\n    \"fmt\"\n    \"hash/adler32\"\n    \"os\"\n\n    \"appengine/foo\"\n    \"appengine/user\"\n    \"github.com/foo/bar\"\n    \"rsc.io/goversion/version\"\n)\n</code></pre> <p>[\u63a8\u8350] \u907f\u514d else \u8bed\u53e5\u4e2d\u5904\u7406\u9519\u8bef\u8fd4\u56de\uff0c\u907f\u514d\u6b63\u5e38\u7684\u903b\u8f91\u4f4d\u4e8e\u7f29\u8fdb\u4e2d\u3002\u5982\u4e0b\u4ee3\u7801\u5b9e\u4f8b\uff0celse\u4e2d\u8fdb\u884c\u9519\u8bef\u5904\u7406\uff0c\u4ee3\u7801\u903b\u8f91\u9605\u8bfb\u8d77\u6765\u6bd4\u8f83\u8d39\u52b2\u3002</p> Text Only<pre><code>if something.OK() {\n        something.Lock()\n        defer something.Unlock()\n        err := something.Do()\n        if err == nil {\n                stop := StartTimer()\n                defer stop()\n                log.Println(\"working...\")\n                doWork(something)\n                &lt;-something.Done() // wait for it\n                log.Println(\"finished\")\n                return nil\n        } else {\n                return err\n        }\n} else {\n        return errors.New(\"something not ok\")\n}\n</code></pre> <p>\u5982\u679c\u628a\u4e0a\u9762\u7684\u4ee3\u7801\u4fee\u6539\u6210\u4e0b\u9762\u8fd9\u6837\u4f1a\u66f4\u52a0\u6e05\u6670\uff1a</p> Text Only<pre><code>if !something.OK() {\n    return errors.New(\"something not ok\")\n}\nsomething.Lock()\ndefer something.Unlock()\nerr := something.Do()\nif err != nil {\n    return err\n}\nstop := StartTimer()\ndefer stop()\nlog.Println(\"working...\")\ndoWork(something)\n&lt;-something.Done() // wait for it\nlog.Println(\"finished\")\nreturn nil\n</code></pre> <p>[\u63a8\u8350] \u51fd\u6570\u5185\u4e0d\u540c\u7684\u4e1a\u52a1\u903b\u8f91\u5904\u7406\u5efa\u8bae\u7528\u5355\u4e2a\u7a7a\u884c\u52a0\u4ee5\u5206\u5272\u3002</p> <p>[\u63a8\u8350] \u6ce8\u91ca\u4e4b\u524d\u7684\u7a7a\u884c\u901a\u5e38\u6709\u52a9\u4e8e\u63d0\u9ad8\u53ef\u8bfb\u6027\u2014\u2014\u65b0\u6ce8\u91ca\u7684\u5f15\u5165\u8868\u660e\u65b0\u601d\u60f3\u7684\u5f00\u59cb\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_4","title":"\u547d\u540d","text":"<p>Good naming is like a good joke. If you have to explain it, it\u2019s not funny.                                                                               \u2014\u2014\u2014Dave Cheney </p> <p>\u4e00\u4e2a\u597d\u7684\u540d\u5b57\u5e94\u8be5\u6ee1\u8db3\u51e0\u4e2a\u8981\u7d20\uff1a</p> <ul> <li>\u77ed\uff0c\u5bb9\u6613\u62fc\u5199\uff1b</li> <li>\u4fdd\u6301\u4e00\u81f4\u6027\uff1b</li> <li>\u610f\u601d\u51c6\u786e\uff0c\u5bb9\u6613\u7406\u89e3\uff0c\u6ca1\u6709\u865a\u5047\u548c\u65e0\u610f\u4e49\u7684\u4fe1\u606f\u3002</li> </ul> <p>\u4f8b\u5982\uff0c\u50cf\u4e0b\u9762\u8fd9\u6837\u7684\u547d\u540d\u5c31\u662f\u8ba9\u4eba\u8ff7\u60d1\u7684\uff1a</p> Text Only<pre><code>int d; // elapsed time in days\n</code></pre> <p>[\u5f3a\u5236 revive] Go\u4e2d\u7684\u547d\u540d\u7edf\u4e00\u4f7f\u7528\u9a7c\u5cf0\u5f0f\u3001\u4e0d\u8981\u52a0\u4e0b\u5212\u7ebf\u3002</p> <p>[\u5f3a\u5236 revive] \u7f29\u5199\u7684\u4e13\u6709\u540d\u8bcd\u5e94\u8be5\u5927\u5199\uff0c\u4f8b\u5982\uff1a ServeHTTP\u3001IDProcessor\u3002</p> <p>[\u5f3a\u5236] \u533a\u5206\u53d8\u91cf\u540d\u5e94\u8be5\u7528\u6709\u610f\u4e49\u7684\u540d\u5b57\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u963f\u62c9\u4f2f\u6570\u5b57\uff1aa1, a2, .. aN\u3002</p> <p>[\u5f3a\u5236] \u4e0d\u8981\u5728\u53d8\u91cf\u540d\u79f0\u4e2d\u5305\u542b\u4f60\u7684\u7c7b\u578b\u540d\u79f0\u3002</p> <p>[\u5efa\u8bae]\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u8d8a\u5927\uff0c\u540d\u5b57\u5e94\u8be5\u8d8a\u957f\u3002</p> <p>\u73b0\u4ee3 IDE \u5df2\u7ecf\u8ba9\u66f4\u6539\u540d\u79f0\u53d8\u5f97\u66f4\u5bb9\u6613\u4e86\uff0c\u5de7\u5999\u5730\u4f7f\u7528IDE\u7684\u529f\u80fd\uff0c\u80fd\u591f\u7ea7\u8054\u5730\u540c\u65f6\u4fee\u6539\u591a\u5904\u547d\u540d\u3002</p> <p>\u5305\u540d</p> <p>\u5305\u540d\u5e94\u8be5\u7b80\u77ed\u800c\u6e05\u6670\u3002</p> <p>[\u5f3a\u5236] \u4f7f\u7528\u7b80\u77ed\u7684\u5c0f\u5199\u5b57\u6bcd\uff0c\u4e0d\u9700\u8981\u4e0b\u5212\u7ebf\u6216\u6df7\u5408\u5927\u5199\u5b57\u6bcd\u3002</p> <p>[\u5efa\u8bae]  \u5408\u7406\u4f7f\u7528\u7f29\u5199\uff0c\u4f8b\u5982\uff1a</p> Text Only<pre><code>strconv\uff08\u5b57\u7b26\u4e32\u8f6c\u6362\uff09\nsyscall\uff08\u7cfb\u7edf\u8c03\u7528\uff09\nfmt\uff08\u683c\u5f0f\u5316\u7684 I/O\uff09\n</code></pre> <p>[\u5f3a\u5236] \u907f\u514d\u65e0\u610f\u4e49\u7684\u5305\u540d\uff0c\u4f8b\u5982<code>util</code>,<code>common,base</code>\u7b49\u3002</p> <p>\u63a5\u53e3\u547d\u540d</p> <p>[\u5efa\u8bae]\u5355\u65b9\u6cd5\u63a5\u53e3\u7531\u65b9\u6cd5\u540d\u79f0\u52a0\u4e0a -er \u540e\u7f00\u6216\u7c7b\u4f3c\u4fee\u9970\u6765\u547d\u540d\u3002\u4f8b\u5982\uff1a<code>Reader</code>, <code>Writer</code>, <code>Formatter</code>, <code>CloseNotifier</code> \uff0c\u5f53\u4e00\u4e2a\u63a5\u53e3\u5305\u542b\u591a\u4e2a\u65b9\u6cd5\u65f6\uff0c\u8bf7\u9009\u62e9\u4e00\u4e2a\u80fd\u591f\u51c6\u786e\u63cf\u8ff0\u5176\u7528\u9014\u7684\u540d\u79f0\uff08\u4f8b\u5982\uff1anet.Conn\u3001http.ResponseWriter\u3001io.ReadWriter\uff09\u3002</p> <p>\u672c\u5730\u53d8\u91cf\u547d\u540d</p> <p>[\u5efa\u8bae]\u5c3d\u53ef\u80fd\u5730\u77ed\u3002\u5728\u8fd9\u91cc\uff0ci \u6307\u4ee3 index\uff0cr \u6307\u4ee3 reader\uff0cb \u6307\u4ee3 buffer\u3002</p> <p>\u4f8b\u5982\uff0c\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u5c31\u53ef\u4ee5\u505a\u4e00\u4e2a\u7b80\u5316\uff1a</p> Text Only<pre><code>for index := 0; index &lt; len(s); index++ {\n    //\n}\n</code></pre> <p>\u53ef\u4ee5\u66ff\u6362\u4e3a\uff1a</p> Text Only<pre><code>for i := 0; i &lt; len(s); i++ {\n    //\n}\n</code></pre> <p>\u51fd\u6570\u53c2\u6570\u547d\u540d</p> <p>[\u5efa\u8bae]\u5982\u679c\u51fd\u6570\u53c2\u6570\u7684\u7c7b\u578b\u5df2\u7ecf\u80fd\u591f\u770b\u51fa\u53c2\u6570\u7684\u542b\u4e49\uff0c\u90a3\u4e48\u51fd\u6570\u53c2\u6570\u7684\u547d\u540d\u5e94\u8be5\u5c3d\u91cf\u7b80\u77ed\uff1a</p> Text Only<pre><code>func AfterFunc(d Duration, f func()) *Timer\nfunc Escape(w io.Writer, s []byte)\n</code></pre> <p>[\u5efa\u8bae]\u5982\u679c\u51fd\u6570\u53c2\u6570\u7684\u7c7b\u578b\u4e0d\u80fd\u8868\u8fbe\u53c2\u6570\u7684\u542b\u4e49\uff0c\u90a3\u4e48\u51fd\u6570\u53c2\u6570\u7684\u547d\u540d\u5e94\u8be5\u5c3d\u91cf\u51c6\u786e\uff1a</p> Text Only<pre><code>func Unix(sec, nsec int64) Time\nfunc HasPrefix(s, prefix []byte) bool\n</code></pre> <p>\u51fd\u6570\u8fd4\u56de\u503c\u547d\u540d</p> <p>[\u5efa\u8bae] \u5bf9\u4e8e\u516c\u5f00\u7684\u51fd\u6570\uff0c\u8fd4\u56de\u503c\u5177\u6709\u6587\u6863\u610f\u4e49\uff0c\u5e94\u8be5\u51c6\u786e\u8868\u8fbe\u542b\u4e49\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> Text Only<pre><code>func Copy(dst Writer, src Reader) (written int64, err error)\n\nfunc ScanBytes(data []byte, atEOF bool) (advance int, token []byte, err error)\n</code></pre> <p>\u53ef\u5bfc\u51fa\u7684\u53d8\u91cf\u540d</p> <p>[\u5efa\u8bae] \u7531\u4e8e\u4f7f\u7528\u53ef\u5bfc\u51fa\u7684\u53d8\u91cf\u65f6\u4f1a\u5e26\u4e0a\u5b83\u6240\u5728\u7684\u5305\u540d\uff0c\u56e0\u6b64\uff0c\u4e0d\u9700\u8981\u5bf9\u53d8\u91cf\u91cd\u590d\u547d\u540d\u3002\u4f8b\u5982bytes\u5305\u4e2d\u7684ByteBuffer\u66ff\u6362\u4e3aBuffer\uff0c\u8fd9\u6837\u5728\u4f7f\u7528\u65f6\u5c31\u662fbytes.Buffer\uff0c\u663e\u5f97\u66f4\u7b80\u6d01\u3002\u7c7b\u4f3c\u7684\u8fd8\u6709\u628astrings.StringReader\u4fee\u6539\u4e3astrings.Reader\uff0c\u628aerrors.NewError \u4fee\u6539\u4e3aerrors.New\u3002</p> <p>Error\u503c\u547d\u540d</p> <p>[\u5efa\u8bae] \u9519\u8bef\u7c7b\u578b\u5e94\u8be5\u4ee5Error\u7ed3\u5c3e\u3002</p> <p>[\u5efa\u8bae] Error\u53d8\u91cf\u540d\u5e94\u8be5\u4ee5Err\u5f00\u5934\u3002</p> Text Only<pre><code>type ExitError struct {\n    ...\n}\nvar ErrFormat = errors.New(\"image: unknown format\")\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_5","title":"\u51fd\u6570","text":"<p>[\u5f3a\u5236 cyclop] \u5708\u590d\u6742\u5ea6\uff08Cyclomatic complexity\uff09&lt;10\u3002</p> <p>[\u5f3a\u5236 gochecknoinits] \u907f\u514d\u4f7f\u7528init\u51fd\u6570\u3002</p> <p>[\u5f3a\u5236 revive] Context \u5e94\u8be5\u4f5c\u4e3a\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u3002</p> <p>[\u5f3a\u5236] \u6b63\u5e38\u60c5\u51b5\u4e0b\u7981\u7528unsafe\u3002</p> <p>[\u5f3a\u5236] \u7981\u6b62return\u88f8\u8fd4\u56de\uff0c\u5982\u4e0b\u4f8b\u4e2d\u7b2c\u4e00\u4e2areturn\uff1a</p> Text Only<pre><code>func (f *Filter) Open(name string) (file File, err error) {\n    for _, c := range f.chain {\n        file, err = c.Open(name)\n        if err != nil {\n            return\n        }\n    }\n    return f.source.Open(name)\n}\n</code></pre> <p>[\u5f3a\u5236] \u4e0d\u8981\u5728\u5faa\u73af\u91cc\u9762\u4f7f\u7528defer\uff0c\u9664\u975e\u4f60\u771f\u7684\u786e\u5b9adefer\u7684\u6267\u884c\u6d41\u7a0b\u3002</p> <p>[\u5f3a\u5236] \u5bf9\u4e8e\u901a\u8fc7:=\u8fdb\u884c\u53d8\u91cf\u8d4b\u503c\u7684\u573a\u666f\uff0c\u7981\u6b62\u51fa\u73b0\u4ec5\u90e8\u5206\u53d8\u91cf\u521d\u59cb\u5316\u7684\u60c5\u51b5\u3002\u4f8b\u5982\u5728\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0cf\u51fd\u6570\u8fd4\u56de\u7684res\u662f\u521d\u59cb\u5316\u7684\u53d8\u91cf\uff0c\u4f46\u662f\u51fd\u6570\u8fd4\u56de\u7684err\u5176\u5b9e\u590d\u7528\u4e86\u4e4b\u524d\u7684err\uff1a</p> Text Only<pre><code>var err error\nres,err := f()\n</code></pre> <p>[\u5efa\u8bae] \u51fd\u6570\u8fd4\u56de\u503c\u5927\u4e8e 3 \u4e2a\u65f6\uff0c\u5efa\u8bae\u901a\u8fc7 struct \u8fdb\u884c\u5305\u88c5\u3002</p> <p>[\u5efa\u8bae] \u51fd\u6570\u53c2\u6570\u4e0d\u5efa\u8bae\u8d85\u8fc7 3 \u4e2a\uff0c\u5927\u4e8e 3 \u4e2a\u65f6\u5efa\u8bae\u901a\u8fc7 struct \u8fdb\u884c\u5305\u88c5\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_6","title":"\u63a7\u5236\u7ed3\u6784","text":"<p>[\u5f3a\u5236] \u7981\u6b62\u4f7f\u7528goto\u3002</p> <p>[\u5f3a\u5236 gosimple] \u5f53\u4e00\u4e2a\u8868\u8fbe\u5f0f\u4e3a bool \u7c7b\u578b\u65f6\uff0c\u5e94\u8be5\u4f7f\u7528 expr \u6216 !expr \u5224\u65ad\uff0c\u7981\u6b62\u4f7f\u7528 == \u6216 != \u4e0e true / false \u6bd4\u8f83\u3002</p> <p>[\u5f3a\u5236 nestif] if \u5d4c\u5957\u6df1\u5ea6\u4e0d\u5927\u4e8e5\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_7","title":"\u65b9\u6cd5","text":"<p>[\u5f3a\u5236 revive] receiver \u7684\u547d\u540d\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u5982\u679c\u4f60\u5728\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u5c06\u63a5\u6536\u5668\u547d\u540d\u4e3a \"c\"\uff0c\u90a3\u4e48\u5728\u5176\u4ed6\u65b9\u6cd5\u4e2d\u4e0d\u8981\u628a\u5b83\u547d\u540d\u4e3a \"cl\"\u3002</p> <p>[\u5f3a\u5236] receiver \u7684\u540d\u5b57\u8981\u5c3d\u91cf\u7b80\u77ed\u5e76\u6709\u610f\u4e49\uff0c\u7981\u6b62\u4f7f\u7528 this\u3001self \u7b49\u3002</p> Text Only<pre><code>func (c Client) done() error {\n // ...\n}\nfunc (cl Client) call() error {\n // ...\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_8","title":"\u6ce8\u91ca","text":"<p>Go\u63d0\u4f9bC\u98ce\u683c\u7684\u6ce8\u91ca\u3002\u6709/**/ \u7684\u5757\u6ce8\u91ca\u548c // \u7684\u5355\u884c\u6ce8\u91ca\u4e24\u79cd\u6ce8\u91ca\u98ce\u683c\u3002\u6ce8\u91ca\u4e3b\u8981\u6709\u4e0b\u9762\u51e0\u4e2a\u7528\u5904\u3002</p> <ol> <li>\u6ce8\u91ca\u4e0d\u4ec5\u4ec5\u53ef\u4ee5\u63d0\u4f9b\u5177\u4f53\u7684\u903b\u8f91\u7ec6\u8282\uff0c\u8fd8\u53ef\u4ee5\u63d0\u4f9b\u4ee3\u7801\u80cc\u540e\u7684\u610f\u56fe\u548c\u51b3\u7b56\u3002</li> <li>\u5e2e\u52a9\u6f84\u6e05\u4e00\u4e9b\u6666\u6da9\u7684\u53c2\u6570\u6216\u8fd4\u56de\u503c\u7684\u542b\u4e49\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u4f1a\u5c3d\u91cf\u627e\u5230\u4e00\u79cd\u65b9\u6cd5\u8ba9\u53c2\u6570\u6216\u8fd4\u56de\u503c\u7684\u540d\u5b57\u672c\u8eab\u5c31\u662f\u6e05\u6670\u7684\u3002\u4f46\u662f\u5f53\u5b83\u662f\u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\u65f6\uff0c\u6216\u8005\u5728\u4f60\u65e0\u6cd5\u66f4\u6539\u7684\u7b2c\u4e09\u65b9\u5e93\u4e2d\uff0c\u4e00\u4e2a\u6e05\u6670\u7684\u6ce8\u91ca\u4f1a\u975e\u5e38\u6709\u7528\u3002</li> <li>\u5f3a\u8c03\u67d0\u4e00\u4e2a\u91cd\u8981\u7684\u529f\u80fd\u3002\u4f8b\u5982\uff0c\u63d0\u9192\u5f00\u53d1\u8005\u4fee\u6539\u4e86\u8fd9\u4e00\u5904\u4ee3\u7801\u5fc5\u987b\u8fde\u5e26\u4fee\u6539\u53e6\u4e00\u5904\u4ee3\u7801\u3002</li> </ol> <p>\u603b\u4e4b\uff0c\u597d\u7684\u6ce8\u91ca\u7ed9\u6211\u4eec\u8bb2\u89e3\u4e86what\u3001how\u3001why\uff0c\u65b9\u4fbf\u540e\u7eed\u7684\u4ee3\u7801\u7ef4\u62a4\u3002</p> <p>[\u5f3a\u5236] \u65e0\u7528\u6ce8\u91ca\u76f4\u63a5\u5220\u9664\uff0c\u65e0\u7528\u7684\u4ee3\u7801\u4e0d\u5e94\u8be5\u6ce8\u91ca\u800c\u5e94\u8be5\u76f4\u63a5\u5220\u9664\u3002\u5373\u4f7f\u65e5\u540e\u9700\u8981\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7Git\u5feb\u901f\u627e\u5230\u3002</p> <p>[\u5f3a\u5236] \u7d27\u8ddf\u5728\u4ee3\u7801\u4e4b\u540e\u7684\u6ce8\u91ca\uff0c\u4f7f\u7528 //\u3002</p> <p>[\u5f3a\u5236] \u7edf\u4e00\u4f7f\u7528\u4e2d\u6587\u6ce8\u91ca\uff0c\u4e2d\u82f1\u6587\u5b57\u7b26\u4e4b\u95f4\u4e25\u683c\u4f7f\u7528\u7a7a\u683c\u5206\u9694\u3002</p> Text Only<pre><code>// \u4ece Redis \u4e2d\u6279\u91cf\u8bfb\u53d6\u5c5e\u6027\uff0c\u5bf9\u4e8e\u6ca1\u6709\u8bfb\u53d6\u5230\u7684 id \uff0c \u8bb0\u5f55\u5230\u4e00\u4e2a\u6570\u7ec4\u91cc\u9762\uff0c\u51c6\u5907\u4ece DB \u4e2d\u8bfb\u53d6\n</code></pre> <p>[\u5f3a\u5236] \u6ce8\u91ca\u4e0d\u9700\u8981\u989d\u5916\u7684\u683c\u5f0f\uff0c\u4f8b\u5982\u661f\u53f7\u6a2a\u5e45\u3002</p> <p>[\u5f3a\u5236] \u5305\u3001\u51fd\u6570\u3001\u65b9\u6cd5\u548c\u7c7b\u578b\u7684\u6ce8\u91ca\u8bf4\u660e\u90fd\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u53e5\u5b50\uff0c\u4ee5\u88ab\u63cf\u8ff0\u7684\u5bf9\u8c61\u4e3a\u4e3b\u8bed\u5f00\u5934\u3002Go\u6e90\u7801\u4e2d\u90fd\u662f\u8fd9\u6837\u7684\u3002</p> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> Text Only<pre><code>// queueForIdleConn queues w to receive the next idle connection for w.cm.\n// As an optimization hint to the caller, queueForIdleConn reports whether\n// it successfully delivered an already-idle connection.\nfunc (t *Transport) queueForIdleConn(w *wantConn) (delivered bool)\n</code></pre> <p>[\u5f3a\u5236] Go\u8bed\u8a00\u63d0\u4f9b\u4e86\u6587\u6863\u6ce8\u91ca\u5de5\u5177go doc\uff0c\u53ef\u4ee5\u751f\u6210\u6ce8\u91ca\u548c\u5bfc\u51fa\u51fd\u6570\u7684\u6587\u6863\u3002\u6587\u6863\u6ce8\u91ca\u7684\u5199\u6cd5\u53ef\u4ee5\u53c2\u8003\u6587\u7a3f\u4e2d\u7684\u94fe\u63a5\u3002</p> <p>[\u5f3a\u5236 godot] \u6ce8\u91ca\u6700\u540e\u5e94\u8be5\u4ee5\u53e5\u53f7\u7ed3\u5c3e\u3002</p> <p>[\u5efa\u8bae] \u5f53\u67d0\u4e2a\u90e8\u5206\u7b49\u5f85\u5b8c\u6210\u65f6\uff0c\u53ef\u7528 <code>TODO:</code> \u5f00\u5934\u7684\u6ce8\u91ca\u6765\u63d0\u9192\u7ef4\u62a4\u4eba\u5458\u3002</p> <p>[\u5efa\u8bae] \u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u4f7f\u7528\u884c\u6ce8\u91ca\u3002\u5757\u6ce8\u91ca\u4e3b\u8981\u7528\u5728\u5305\u7684\u6ce8\u91ca\u4e0a\uff0c\u4e0d\u8fc7\u5757\u6ce8\u91ca\u5728\u8868\u8fbe\u5f0f\u4e2d\u6216\u7981\u7528\u5927\u91cf\u4ee3\u7801\u65f6\u5f88\u6709\u7528\u3002</p> <p>[\u5efa\u8bae] \u5f53\u67d0\u4e2a\u90e8\u5206\u5b58\u5728\u5df2\u77e5\u95ee\u9898\u9700\u8981\u4fee\u590d\u6216\u6539\u8fdb\u65f6\uff0c\u53ef\u7528 <code>FIXME:</code> \u5f00\u5934\u7684\u6ce8\u91ca\u6765\u63d0\u9192\u7ef4\u62a4\u4eba\u5458\u3002</p> <p>[\u5efa\u8bae] \u9700\u8981\u7279\u522b\u8bf4\u660e\u67d0\u4e2a\u95ee\u9898\u65f6\uff0c\u53ef\u7528 <code>NOTE:</code> \u5f00\u5934\u7684\u6ce8\u91ca\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_9","title":"\u7ed3\u6784\u4f53","text":"<p>[\u5f3a\u5236] \u4e0d\u8981\u5c06 Context \u6210\u5458\u6dfb\u52a0\u5230 Struct \u7c7b\u578b\u4e2d\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_10","title":"\u9ad8\u6548","text":"<p>[\u5f3a\u5236] Map\u5728\u521d\u59cb\u5316\u65f6\u9700\u8981\u6307\u5b9a\u957f\u5ea6<code>make(map[T1]T2, hint)</code>\u3002</p> <p>[\u5f3a\u5236] Slice\u5728\u521d\u59cb\u5316\u65f6\u9700\u8981\u6307\u5b9a\u957f\u5ea6\u548c\u5bb9\u91cf<code>make([]T, length, capacity)</code>\u3002</p> <p>\u6211\u4eec\u6765\u770b\u4e0b\u4e0b\u9762\u8fd9\u6bb5\u7a0b\u5e8f\uff0c\u5b83\u7684\u76ee\u7684\u662f\u5f80\u5207\u7247\u4e2d\u5faa\u73af\u6dfb\u52a0\u5143\u7d20\u3002</p> Text Only<pre><code>func createSlice(n int) (slice []string) {\n   for i := 0; i &lt; n; i++ {\n      slice = append(slice, \"I\", \"love\", \"go\")\n   }\n   return slice\n}\n</code></pre> <p>\u4ece\u529f\u80fd\u4e0a\u6765\u770b\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6ca1\u6709\u95ee\u9898\u3002\u4f46\u662f\uff0c\u8fd9\u79cd\u5199\u6cd5\u5ffd\u7565\u4e86\u4e00\u4e2a\u4e8b\u5b9e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5f80\u5207\u7247\u4e2d\u6dfb\u52a0\u6570\u636e\u65f6\uff0c\u5207\u7247\u4f1a\u81ea\u52a8\u6269\u5bb9\uff0cGo\u8fd0\u884c\u65f6\u4f1a\u521b\u5efa\u65b0\u7684\u5185\u5b58\u7a7a\u95f4\u5e76\u6267\u884c\u62f7\u8d1d\u3002</p> <p>\u81ea\u52a8\u6269\u5bb9\u663e\u7136\u662f\u6709\u6210\u672c\u7684\u3002\u5728\u5faa\u73af\u64cd\u4f5c\u4e2d\u6267\u884c\u8fd9\u6837\u7684\u4ee3\u7801\u4f1a\u653e\u5927\u6027\u80fd\u635f\u5931\uff0c\u51cf\u6162\u7a0b\u5e8f\u7684\u8fd0\u884c\u901f\u5ea6\u3002\u6027\u80fd\u635f\u5931\u7684\u5bf9\u6bd4\u53ef\u53c2\u8003\u8fd9\u7bc7\u6587\u7ae0\u3002\u6211\u4eec\u53ef\u4ee5\u6539\u5199\u4e00\u4e0b\u4e0a\u9762\u8fd9\u6bb5\u7a0b\u5e8f\uff0c\u5728\u521d\u59cb\u5316\u65f6\u6307\u5b9a\u5408\u9002\u7684\u5207\u7247\u5bb9\u91cf\uff1a</p> Text Only<pre><code>func createSlice(n int) []string {\n   slice := make([]string, 0, n*3)\n   for i := 0; i &lt; n; i++ {\n      slice = append(slice, \"I\", \"love\", \"go\")\n   }\n   return slice\n}\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u5728\u4e00\u5f00\u59cb\u5c31\u6307\u5b9a\u4e86\u9700\u8981\u7684\u5bb9\u91cf\uff0c\u6700\u5927\u7a0b\u5ea6\u907f\u514d\u4e86\u5185\u5b58\u7684\u6d6a\u8d39\u3002\u540c\u65f6\uff0c\u8fd0\u884c\u65f6\u4e0d\u9700\u8981\u518d\u6267\u884c\u81ea\u52a8\u6269\u5bb9\u64cd\u4f5c\uff0c\u52a0\u901f\u4e86\u7a0b\u5e8f\u7684\u8fd0\u884c\u3002</p> <p>[\u5f3a\u5236]  time.After()\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4f1a\u53d1\u751f\u6cc4\u9732\uff0c\u66ff\u6362\u4e3a\u4f7f\u7528Timer\u3002</p> <p>[\u5f3a\u5236] \u6570\u5b57\u4e0e\u5b57\u7b26\u4e32\u8f6c\u6362\u65f6\uff0c\u4f7f\u7528strconv\uff0c\u800c\u4e0d\u662ffmt\u3002</p> <p>[\u5f3a\u5236] \u8bfb\u5199\u78c1\u76d8\u65f6\uff0c\u4f7f\u7528\u8bfb\u5199buffer\u3002</p> <p>[\u5efa\u8bae] \u8c28\u614e\u4f7f\u7528Slice\u7684\u622a\u65ad\u64cd\u4f5c\u548cappend\u64cd\u4f5c\uff0c\u9664\u975e\u4f60\u77e5\u9053\u4e0b\u9762\u7684\u4ee3\u7801\u8f93\u51fa\u4ec0\u4e48\uff1a</p> Text Only<pre><code>x := []int{1, 2, 3, 4}\ny := x[:2]\nfmt.Println(cap(x), cap(y))\ny = append(y, 30)\nfmt.Println(\"x:\", x)\nfmt.Println(\"y:\", y)\n</code></pre> <p>[\u5efa\u8bae] \u4efb\u4f55\u4e66\u5199\u7684\u534f\u7a0b\uff0c\u90fd\u9700\u8981\u660e\u786e\u534f\u7a0b\u4ec0\u4e48\u65f6\u5019\u9000\u51fa\u3002</p> <p>[\u5efa\u8bae] \u70ed\u70b9\u4ee3\u7801\u4e2d\uff0c\u5185\u5b58\u5206\u914d\u590d\u7528\u5185\u5b58\u53ef\u4ee5\u4f7f\u7528 sync.Pool \u63d0\u901f\u3002</p> <p>[\u5efa\u8bae] \u5c06\u9891\u7e41\u7684\u5b57\u7b26\u4e32\u62fc\u63a5\u64cd\u4f5c\uff08+=\uff09\uff0c\u66ff\u6362\u4e3aStringBuffer \u6216 StringBuilder\u3002</p> <p>[\u5efa\u8bae] \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u91cd\u590d\u5339\u914d\u65f6\uff0c\u5229\u7528Compile\u63d0\u524d\u7f16\u8bd1\u63d0\u901f\u3002</p> <p>[\u5efa\u8bae]  \u5f53\u7a0b\u5e8f\u4e25\u91cd\u4f9d\u8d56Map\u65f6\uff0cMap\u7684Key\u4f7f\u7528int\u800c\u4e0d\u662fstring\u5c06\u63d0\u901f\u3002</p> <p>[\u5efa\u8bae]  \u591a\u8bfb\u5c11\u5199\u7684\u573a\u666f\uff0c\u4f7f\u7528\u8bfb\u5199\u9501\u800c\u4e0d\u662f\u5199\u9501\u5c06\u63d0\u901f\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_11","title":"\u5065\u58ee\u6027","text":"<p>[\u5f3a\u5236] \u9664\u975e\u51fa\u73b0\u4e0d\u53ef\u6062\u590d\u7684\u7a0b\u5e8f\u9519\u8bef\uff0c\u5426\u5219\u4e0d\u8981\u4f7f\u7528 panic \u6765\u5904\u7406\u5e38\u89c4\u9519\u8bef\uff0c\u4f7f\u7528 error \u548c\u591a\u8fd4\u56de\u503c\u3002</p> <p>[\u5f3a\u5236 revive] \u9519\u8bef\u4fe1\u606f\u4e0d\u5e94\u8be5\u9996\u5b57\u6bcd\u5927\u5199\uff08\u9664\u4e13\u6709\u540d\u8bcd\u548c\u7f29\u5199\u8bcd\u5916\uff09\uff0c\u4e5f\u4e0d\u5e94\u8be5\u4ee5\u6807\u70b9\u7b26\u53f7\u7ed3\u675f\u3002\u56e0\u4e3a\u9519\u8bef\u4fe1\u606f\u901a\u5e38\u5728\u5176\u4ed6\u4e0a\u4e0b\u6587\u4e2d\u88ab\u6253\u5370\u3002</p> <p>[\u5f3a\u5236 errcheck] \u4e0d\u8981\u4f7f\u7528 _ \u53d8\u91cf\u6765\u4e22\u5f03 error\u3002\u5982\u679c\u51fd\u6570\u8fd4\u56de error\uff0c\u5e94\u8be5\u5f3a\u5236\u68c0\u67e5\u3002</p> <p>[\u5efa\u8bae] \u5728\u5904\u7406\u9519\u8bef\u65f6\uff0c\u5982\u679c\u6211\u4eec\u9010\u5c42\u8fd4\u56de\u76f8\u540c\u7684\u9519\u8bef\uff0c\u90a3\u4e48\u5728\u6700\u540e\u65e5\u5fd7\u6253\u5370\u65f6\uff0c\u6211\u4eec\u5e76\u4e0d\u77e5\u9053\u4ee3\u7801\u4e2d\u95f4\u7684\u6267\u884c\u8def\u5f84\u3002\u4f8b\u5982\u627e\u4e0d\u5230\u6587\u4ef6\u65f6\u6253\u5370\u7684<code>No such file or directory</code>\uff0c\u8fd9\u4f1a\u51cf\u6162\u6211\u4eec\u6392\u67e5\u95ee\u9898\u7684\u901f\u5ea6\u3002\u56e0\u6b64\uff0c\u5728\u4e2d\u95f4\u5904\u7406err\u65f6\uff0c\u9700\u8981\u4f7f\u7528fmt.Errorf \u6216\u7b2c\u4e09\u65b9\u5305\u7ed9\u9519\u8bef\u6dfb\u52a0\u989d\u5916\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u50cf\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5728fmt.Errorf\u4e2d\uff0c\u9664\u4e86\u5b9e\u9645\u62a5\u9519\u7684\u4fe1\u606f\uff0c\u8fd8\u52a0\u4e0a\u4e86\u6388\u6743\u9519\u8bef\u4fe1\u606f<code>authenticate failed</code> \uff1a</p> Text Only<pre><code>func AuthenticateRequest(r *Request) error {\n        err := authenticate(r.User)\n        if err != nil {\n                return fmt.Errorf(\"authenticate failed: %v\", err)\n        }\n        return nil\n}\n</code></pre> <p>\u5f53\u6709\u591a\u4e2a\u9519\u8bef\u9700\u8981\u5904\u7406\u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u5c06fmt.Errorf\u653e\u5165defer\u4e2d\uff1a</p> Text Only<pre><code>func DoSomeThings(val1 int, val2 string) (_ string, err error) {\n    defer func() {\n        if err != nil {\n            err = fmt.Errorf(\"in DoSomeThings: %w\", err)\n        }\n    }()\n    val3, err := doThing1(val1)\n    if err != nil {\n        return \"\", err\n    }\n    val4, err := doThing2(val2)\n    if err != nil {\n        return \"\", err\n    }\n    return doThing3(val3, val4)\n}\n</code></pre> <p>[\u5f3a\u5236] \u5229\u7528recover\u6355\u83b7panic\u65f6\uff0c\u9700\u8981\u7531defer\u51fd\u6570\u76f4\u63a5\u8c03\u7528\u3002</p> <p>\u4f8b\u5982\uff0c\u4e0b\u9762\u4f8b\u5b50\u4e2d\u7684panic\u662f\u53ef\u4ee5\u88ab\u6355\u83b7\u7684\uff1a</p> Text Only<pre><code>package main\n\nimport \"fmt\"\n\nfunc printRecover() {\n    r := recover()\n    fmt.Println(\"Recovered:\", r)\n}\n\nfunc main() {\n    defer printRecover()\n\n    panic(\"OMG!\")\n}\n</code></pre> <p>\u4f46\u662f\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u7684panic\u5374\u4e0d\u80fd\u88ab\u6355\u83b7\uff1a</p> Text Only<pre><code>package main\n\nimport \"fmt\"\n\nfunc printRecover() {\n    r := recover()\n    fmt.Println(\"Recovered:\", r)\n}\n\nfunc main() {\n    defer func() {\n        printRecover()\n    }()\n\n    panic(\"OMG!\")\n}\n</code></pre> <p>[\u5f3a\u5236] \u4e0d\u7528\u91cd\u590d\u4f7f\u7528recover\uff0c\u53ea\u9700\u8981\u5728\u6bcf\u4e00\u4e2a\u534f\u7a0b\u7684\u6700\u4e0a\u5c42\u51fd\u6570\u62e6\u622a\u5373\u53ef\u3002recover\u53ea\u80fd\u591f\u6355\u83b7\u5f53\u524d\u534f\u7a0b\uff0c\u800c\u4e0d\u80fd\u8de8\u534f\u7a0b\u6355\u83b7panic\uff0c\u4e0b\u4f8b\u4e2d\u7684panic\u5c31\u662f\u65e0\u6cd5\u88ab\u6355\u83b7\u7684\u3002</p> Text Only<pre><code>package main\n\nimport \"fmt\"\n\nfunc printRecover() {\n    r := recover()\n    fmt.Println(\"Recovered:\", r)\n}\n\nfunc main() {\n    defer printRecover()\n    go func() {\n        panic(\"OMG!\")\n    }()\n    // ...\n}\n</code></pre> <p>[\u5f3a\u5236] \u6709\u4e9b\u7279\u6b8a\u7684\u9519\u8bef\u662frecover\u4e0d\u4f4f\u7684\uff0c\u4f8b\u5982Map\u7684\u5e76\u53d1\u8bfb\u5199\u51b2\u7a81\u3002\u8fd9\u79cd\u9519\u8bef\u53ef\u4ee5\u901a\u8fc7race\u5de5\u5177\u6765\u68c0\u67e5\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_12","title":"\u6269\u5c55\u6027","text":"<p>[\u5efa\u8bae] \u5229\u7528\u63a5\u53e3\u5b9e\u73b0\u6269\u5c55\u6027\u3002\u63a5\u53e3\u7279\u522b\u9002\u7528\u4e8e\u8bbf\u95ee\u5916\u90e8\u7ec4\u4ef6\u7684\u60c5\u51b5\uff0c\u4f8b\u5982\u8bbf\u95ee\u6570\u636e\u5e93\u3001\u8bbf\u95ee\u4e0b\u6e38\u670d\u52a1\u3002\u53e6\u5916\uff0c\u63a5\u53e3\u53ef\u4ee5\u65b9\u4fbf\u6211\u4eec\u8fdb\u884c\u529f\u80fd\u6d4b\u8bd5\u3002\u5173\u4e8e\u63a5\u53e3\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u9700\u8981\u5355\u72ec\u8bba\u8ff0\u3002</p> <p>[\u5efa\u8bae] \u4f7f\u7528\u529f\u80fd\u9009\u9879\u6a21\u5f0f(options \u6a21\u5f0f)\u5bf9\u4e00\u4e9b\u516c\u5171API\u7684\u6784\u9020\u51fd\u6570\u8fdb\u884c\u6269\u5c55\uff0c\u5927\u91cf\u7b2c\u4e09\u65b9\u5e93\u4f8b\u5982gomicro\u3001zap\u7b49\u90fd\u4f7f\u7528\u4e86\u8fd9\u79cd\u7b56\u7565\u3002</p> Text Only<pre><code>db.Open(addr, db.DefaultCache, zap.NewNop())\n\u53ef\u4ee5\u66ff\u6362\u4e3a=&gt;\ndb.Open(\n    addr,\n    db.WithCache(false),\n    db.WithLogger(log),\n)\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_13","title":"\u5de5\u5177","text":"<p>\u8981\u4eba\u5de5\u6765\u4fdd\u8bc1\u56e2\u961f\u6210\u5458\u9075\u5b88\u4e86\u4e0a\u8ff0\u7684\u7f16\u7a0b\u89c4\u8303\u5e76\u4e0d\u662f\u4e00\u4ef6\u5bb9\u6613\u7684\u4e8b\u60c5\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u6709\u8bb8\u591a\u9759\u6001\u7684\u548c\u52a8\u6001\u7684\u4ee3\u7801\u5206\u6790\u5de5\u5177\u5e2e\u52a9\u56e2\u961f\u8bc6\u522b\u4ee3\u7801\u89c4\u8303\u7684\u9519\u8bef\uff0c\u751a\u81f3\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e9b\u4ee3\u7801\u7684bug\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#golangci-lint","title":"golangci-lint","text":"<p>golangci-lint \u662f\u5f53\u524d\u5927\u591a\u6570\u516c\u53f8\u91c7\u7528\u7684\u9759\u6001\u4ee3\u7801\u5206\u6790\u5de5\u5177\uff0c\u8bcd\u8bedLinter \u6307\u7684\u662f\u4e00\u79cd\u5206\u6790\u6e90\u4ee3\u7801\u4ee5\u6b64\u6807\u8bb0\u7f16\u7a0b\u9519\u8bef\u3001\u4ee3\u7801\u7f3a\u9677\u3001\u98ce\u683c\u9519\u8bef\u7684\u5de5\u5177\u3002</p> <p>\u800cgolangci-lint\u662f\u96c6\u5408\u591a\u79cdLinter\u7684\u5de5\u5177\u3002\u8981\u67e5\u770b\u652f\u6301\u7684 Linter \u5217\u8868\u4ee5\u53ca\u542f\u7528/\u7981\u7528\u4e86\u54ea\u4e9bLinter\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\uff1a</p> Text Only<pre><code>golangci-lint help linters\n</code></pre> <p>Go\u8bed\u8a00\u5b9a\u4e49\u4e86\u5b9e\u73b0Linter\u7684API\uff0c\u5b83\u8fd8\u63d0\u4f9b\u4e86golint\u5de5\u5177\uff0c\u7528\u4e8e\u96c6\u6210\u4e86\u51e0\u79cd\u5e38\u89c1\u7684Linter\u3002\u5728\u6e90\u7801\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u67e5\u770b\u600e\u4e48\u5728\u6807\u51c6\u5e93\u4e2d\u5b9e\u73b0\u5178\u578b\u7684Linter\u3002</p> <p>Linter\u7684\u5b9e\u73b0\u539f\u7406\u662f\u9759\u6001\u626b\u63cf\u4ee3\u7801\u7684AST\uff08\u62bd\u8c61\u8bed\u6cd5\u6811\uff09\uff0cLinter\u7684\u6807\u51c6\u5316\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u7075\u6d3b\u5b9e\u73b0\u81ea\u5df1\u7684Linters\u3002\u4e0d\u8fc7golangci-lint\u91cc\u9762\u5176\u5b9e\u5df2\u7ecf\u96c6\u6210\u4e86\u5305\u62ecgolint\u5728\u5185\u7684\u603b\u591aLinter\uff0c\u5e76\u4e14\u6709\u7075\u6d3b\u7684\u914d\u7f6e\u80fd\u529b\u3002\u6240\u4ee5\u5728\u81ea\u5df1\u5199Linter\u4e4b\u524d\uff0c\u5efa\u8bae\u5148\u4e86\u89e3golangci-lint\u73b0\u6709\u7684\u80fd\u529b\u3002</p> <p>\u5728\u5927\u578b\u9879\u76ee\u4e2d\u521a\u5f00\u59cb\u4f7f\u7528golang-lint\u4f1a\u51fa\u73b0\u5927\u91cf\u7684\u9519\u8bef\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6211\u4eec\u53ea\u5e0c\u671b\u626b\u63cf\u589e\u91cf\u7684\u4ee3\u7801\u3002\u5982\u4e0b\u6240\u793a\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728golangci-lint\u914d\u7f6e\u6587\u4ef6\u4e2d\u8c03\u6574new-from-rev\u53c2\u6570\uff0c\u914d\u7f6e\u4ee5\u5f53\u524d\u57fa\u51c6\u5206\u652f\u4e3a\u57fa\u7840\u5b9e\u73b0\u589e\u91cf\u626b\u63cf</p> Text Only<pre><code>linters:\n enable-all: true\nissues:\n new-from-rev: master\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#pre-commit","title":"Pre-Commit","text":"<p>\u5728\u4ee3\u7801\u901a\u8fc7Git Commit\u63d0\u4ea4\u5230\u4ee3\u7801\u4ed3\u5e93\u4e4b\u524d\uff0cgit \u63d0\u4f9b\u4e86\u4e00\u79cdpre-commit\u7684hook\u80fd\u529b\uff0c\u7528\u4e8e\u6267\u884c\u4e00\u4e9b\u524d\u7f6e\u811a\u672c\u3002\u5728\u811a\u672c\u4e2d\u52a0\u5165\u68c0\u67e5\u7684\u4ee3\u7801\uff0c\u5c31\u53ef\u4ee5\u5728\u672c\u5730\u62e6\u622a\u4f4f\u4e00\u4e9b\u4e0d\u7b26\u5408\u89c4\u8303\u7684\u4ee3\u7801\uff0c\u907f\u514d\u9891\u7e41\u89e6\u53d1CI\u6216\u8005\u6d6a\u8d39\u65f6\u95f4\u3002pre-commit\u7684\u914d\u7f6e\u548c\u4f7f\u7528\u65b9\u6cd5\uff0c\u53ef\u4ee5\u53c2\u8003TiDB\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#race","title":"\u5e76\u53d1\u68c0\u6d4b race","text":"<p>Go 1.1 \u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u68c0\u67e5\u5de5\u5177race\u6765\u6392\u67e5\u6570\u636e\u4e89\u7528\u95ee\u9898\u3002race \u53ef\u4ee5\u7528\u5728\u591a\u4e2aGo\u6307\u4ee4\u4e2d\uff0c\u4e00\u65e6\u68c0\u6d4b\u5668\u5728\u7a0b\u5e8f\u4e2d\u627e\u5230\u6570\u636e\u4e89\u7528\uff0c\u5c31\u4f1a\u6253\u5370\u62a5\u544a\u3002\u8fd9\u4efd\u62a5\u544a\u5305\u542b\u53d1\u751frace\u51b2\u7a81\u7684\u534f\u7a0b\u6808\uff0c\u4ee5\u53ca\u6b64\u65f6\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0b\u6808\u3002\u53ef\u4ee5\u5728\u7f16\u8bd1\u65f6\u548c\u8fd0\u884c\u65f6\u6267\u884crace\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a</p> Text Only<pre><code>$ go test -race mypkg\n$ go run -race mysrc.go\n$ go build -race mycmd\n$ go install -race mypkg\n</code></pre> <p>\u5728\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c \u8fd0\u884c\u4e2d\u52a0\u5165race\u68c0\u67e5\u540e\u76f4\u63a5\u62a5\u9519\u3002\u4ece\u62a5\u9519\u540e\u8f93\u51fa\u7684\u6808\u5e27\u4fe1\u606f\u4e2d\uff0c\u6211\u4eec\u80fd\u770b\u51fa\u5177\u4f53\u53d1\u751f\u5e76\u53d1\u51b2\u7a81\u7684\u4f4d\u7f6e\u3002</p> Text Only<pre><code>\u00bb go run -race 2_race.go\n==================\nWARNING: DATA RACE\nRead at 0x00000115c1f8 by goroutine 7:\n    main.add()\n        bookcode/concurrence_control/2_race.go:5 +0x3a\nPrevious write at 0x00000115c1f8 by goroutine 6:\n    main.add()\n        bookcode/concurrence_control/2_race.go:5 +0x56\n</code></pre> <p>\u7b2c\u56db\u884cRead at \u8868\u660e\u8bfb\u53d6\u53d1\u751f\u57282_race.go \u6587\u4ef6\u7684\u7b2c5\u884c\uff0c\u800c\u7b2c\u4e03\u884cPrevious write \u8868\u660e\u524d\u4e00\u4e2a\u5199\u5165\u4e5f\u53d1\u751f\u57282_race.go \u6587\u4ef6\u7684\u7b2c5\u884c\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u975e\u5e38\u5feb\u901f\u5730\u5b9a\u4f4d\u6570\u636e\u4e89\u7528\u95ee\u9898\u4e86\u3002</p> <p>\u7ade\u4e89\u68c0\u6d4b\u7684\u6210\u672c\u56e0\u7a0b\u5e8f\u800c\u5f02\u3002\u5bf9\u4e8e\u5178\u578b\u7684\u7a0b\u5e8f\uff0c\u5185\u5b58\u4f7f\u7528\u91cf\u53ef\u80fd\u589e\u52a0 5~10 \u500d\uff0c\u6267\u884c\u65f6\u95f4\u4f1a\u589e\u52a02~20\u500d\u3002\u540c\u65f6\uff0c\u7ade\u4e89\u68c0\u6d4b\u5668\u4f1a\u4e3a\u5f53\u524d\u6bcf\u4e2adefer\u548crecover\u8bed\u53e5\u989d\u5916\u5206\u914d8\u5b57\u8282\u3002\u5728Goroutine\u9000\u51fa\u524d\uff0c\u8fd9\u4e9b\u989d\u5916\u5206\u914d\u7684\u5b57\u8282\u4e0d\u4f1a\u88ab\u56de\u6536\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u957f\u671f\u8fd0\u884c\u7684Goroutine\uff0c\u800c\u4e14\u5b9a\u671f\u6709defer \u548crecover\u8c03\u7528\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5185\u5b58\u7684\u4f7f\u7528\u91cf\u53ef\u80fd\u65e0\u9650\u589e\u957f\u3002\uff08\u8fd9\u4e9b\u5185\u5b58\u5206\u914d\u4e0d\u4f1a\u663e\u793a\u5230 runtime.ReadMemStats\u6216runtime / pprof \u7684\u8f93\u51fa\u3002\uff09</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_14","title":"\u8986\u76d6\u7387","text":"<p>\u4e00\u822c\u6211\u4eec\u4f1a\u4f7f\u7528\u4ee3\u7801\u8986\u76d6\u7387\u6765\u5224\u65ad\u4ee3\u7801\u4e66\u5199\u7684\u8d28\u91cf\uff0c\u8bc6\u522b\u65e0\u6548\u4ee3\u7801\u3002go tool cover \u662fgo\u8bed\u8a00\u63d0\u4f9b\u7684\u8bc6\u522b\u4ee3\u7801\u8986\u76d6\u7387\u7684\u5de5\u5177\uff0c\u5728\u540e\u9762\u7684\u8bfe\u7a0b\u4e2d\u8fd8\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_code_standard/#_15","title":"\u603b\u7ed3","text":"<p>\u4ee3\u7801\u89c4\u8303\u53ef\u4ee5\u52a9\u529b\u56e2\u961f\u534f\u4f5c\u3001\u5e2e\u52a9\u6211\u4eec\u5199\u51fa\u66f4\u52a0\u7b80\u6d01\u3001\u9ad8\u6548\u3001\u5065\u58ee\u548c\u53ef\u6269\u5c55\u7684\u4ee3\u7801\u3002\u8fd9\u8282\u8bfe\uff0c\u6211\u5217\u51fa\u4e86\u4e00\u5957Go\u7f16\u7a0b\u89c4\u8303\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u5e76\u901a\u8fc7golangci-lint\u7b49\u5de5\u5177\u5bf9\u4e0d\u89c4\u8303\u751a\u81f3\u662f\u9519\u8bef\u7684\u4ee3\u7801\u8fdb\u884c\u4e86\u5f3a\u5236\u68c0\u67e5\uff0c\u4fdd\u8bc1\u4e86\u4ee3\u7801\u8d28\u91cf\u3002\u5728\u540e\u9762\u7684\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u5c06\u4e25\u683c\u6309\u7167\u8fd9\u4e2a\u89c4\u8303\u7f16\u5199\u4ee3\u7801\u3002</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/","title":"Go\u5728\u4e0d\u540c\u5e73\u53f0\u7684\u5b89\u88c5\u53ca\u914d\u7f6e\u6307\u5357","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_1","title":"\u524d\u7f6e\u8bf4\u660e\uff1a","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_2","title":"\u5f53\u524d\u73b0\u72b6","text":"<ul> <li>\u5f53\u524dGo\u6700\u65b0\u7a33\u5b9a\u7248\uff1ago1.19\uff082022\u5e7408\u670811\u65e5\uff09</li> <li>\u5b98\u7f51\uff1ahttps://go.dev/</li> <li>github\u5730\u5740\uff1ahttps://github.com/golang/go</li> <li>\u5f53\u524dStar\uff1a103k</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_3","title":"\u4e0b\u8f7d\u7ad9\u70b9","text":"<ul> <li>Go\u5b98\u65b9\u4e0b\u8f7d\u7ad9\u70b9\uff1ahttps://go.dev/dl/</li> <li>\u56fd\u5185\u955c\u50cf\u4e0b\u8f7d\u7ad9\u70b9\uff1a</li> <li>https://golang.google.cn/dl/</li> <li>https://gomirrors.org/</li> <li>https://studygolang.com/dl</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#cdn","title":"CDN\u52a0\u901f\u4ee3\u7406\u7ad9\u70b9","text":"<p>\u4e03\u725b\uff1aGoproxy \u4e2d\u56fd https://goproxy.cn \u963f\u91cc\uff1a mirrors.aliyun.com/goproxy/ \u5b98\u65b9\uff1a &lt; \u5168\u7403 CDN \u52a0\u901f https://goproxy.io/&gt; \u5176\u4ed6\uff1ajfrog \u7ef4\u62a4 https://gocenter.io</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_4","title":"\u5b89\u88c5\u4e00\u4e2a\u7248\u672c","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#linux","title":"Linux\u5b89\u88c5","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_5","title":"\u5b89\u88c5\u65b9\u6848","text":"<ol> <li>\u4ece\u53d1\u884c\u7248\u4ed3\u5e93\u5b89\u88c5\uff08\u4e0d\u5efa\u8bae\uff0c\u4e00\u822c\u7248\u672c\u8f83\u8001\uff09</li> <li>\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305\u5b89\u88c5\uff08\u63a8\u8350\uff0c\u672c\u624b\u518c\u4f7f\u7528\u6b64\u5b89\u88c5\u65b9\u5f0f\uff09</li> <li>\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5</li> </ol>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_6","title":"\u5b89\u88c5\u6d41\u7a0b","text":"Bash<pre><code># step1: \u4e0b\u8f7d\u5e76\u89e3\u538bGo Linux\u5b89\u88c5\u5305\nwget -c https://golang.google.cn/dl/go1.19.linux-amd64.tar.gz \n\n# step2: \u5c06\u5b89\u88c5\u5305\u89e3\u538b\u5230\u5b89\u88c5\u76ee\u5f55\u4e2d\ntar -C /usr/local -xvf go1.19.linux-amd64.tar.gz \n\n# step3:\u914d\u7f6e\u73af\u5883\u53d8\u91cf\n# vim $HOME/.profile\nexport PATH=$PATH:/usr/local/go/bin\n\nsource ~/.profile\n\n# step4: \u9a8c\u8bc1, \u8f93\u51fa\u7248\u672c\u4fe1\u606f\u8868\u793a\u5b89\u88c5\u6210\u529f\ngo version\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#mac","title":"Mac\u5b89\u88c5","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_7","title":"\u5b89\u88c5\u65b9\u6848","text":"<ol> <li>\u5728\u955c\u50cf\u7ad9\u70b9 \u4e0b\u8f7d\u5b89\u88c5\u5305\u8fdb\u884c\u56fe\u50cf\u5316\u754c\u9762\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5</li> <li>\u5728terminal \u4e0a\u4e0b\u8f7d\u5b89\u88c5\u5305,\u4f7f\u7528\u548clinux\u76f8\u540c\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5</li> </ol>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_8","title":"\u5b89\u88c5\u6d41\u7a0b","text":"<ul> <li> <p>\u65b9\u5f0f\u4e00\uff1abrew\u5b89\u88c5 Bash<pre><code>brew info go \nbrew install go\ngo version\n</code></pre></p> </li> <li> <p>\u65b9\u5f0f\u4e8c\uff1a\u4e0b\u8f7d\u5b89\u88c5\u5305\u5b89\u88c5 Bash<pre><code># step1 \u4e0b\u8f7d\u5b89\u88c5\u5305\nwget -c https://golang.google.cn/dl/go1.19.darwin-amd64.pkg\n\n# step2 \u53cc\u51fb\u5b89\u88c5\u5305\uff0c\u8fdb\u884c\u56fe\u5f62\u5316\u754c\u9762\u5b89\u88c5\n\n# step3 \u914d\u7f6e\u73af\u5883\u53d8\u91cf\n# vim ~/.zshrc\nexport PATH=$PATH:/usr/local/go/bin\n\nsource ~/.zshrc\n\n# step4: \u9a8c\u8bc1, \u8f93\u51fa\u7248\u672c\u4fe1\u606f\u8868\u793a\u5b89\u88c5\u6210\u529f\ngo version\n</code></pre></p> </li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#windows","title":"Windows\u5b89\u88c5","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_9","title":"\u5b89\u88c5\u65b9\u6848","text":"<ol> <li>\u4e0b\u8f7d\u5b89\u88c5\u5305\u8fdb\u884c\u56fe\u50cf\u5316\u754c\u9762\u5b89\u88c5\u65b9\u5f0f</li> </ol>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_10","title":"\u5b89\u88c5\u6d41\u7a0b","text":"<ol> <li>\u4e0b\u8f7d</li> </ol> <ol> <li> <p>\u4f7f\u7528\u9ed8\u8ba4\u5b89\u88c5\u5373\u53ef</p> <p>\u53ea\u9700\u4e00\u8def\u70b9\u51fb\u201c\u7ee7\u7eed\uff08next\uff09\u201d\u5c31\u53ef\u5b8c\u6210 Go \u7a0b\u5e8f\u7684\u5b89\u88c5\u4e86\uff0c\u5b89\u88c5\u7a0b\u5e8f\u9ed8\u8ba4\u4f1a\u628a Go \u5b89\u88c5\u5728 C:\\Program Files\\Go \u4e0b\u9762\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9a\u5236\u4f60\u7684\u5b89\u88c5\u76ee\u5f55\u3002</p> </li> <li> <p>\u914d\u7f6e\u73af\u5883\u53d8\u91cf</p> <p>\u9664\u4e86\u4f1a\u5c06 Go \u5b89\u88c5\u5230\u4f60\u7684\u7cfb\u7edf\u4e2d\u4e4b\u5916\uff0cGo \u5b89\u88c5\u7a0b\u5e8f\u8fd8\u4f1a\u81ea\u52a8\u4e3a\u4f60\u8bbe\u7f6e\u597d Go \u4f7f\u7528\u6240\u9700\u7684\u73af\u5883\u53d8\u91cf\uff0c\u5305\u62ec\u5728\u7528\u6237\u73af\u5883\u53d8\u91cf\u4e2d\u589e\u52a0 GOPATH\uff0c\u5b83\u7684\u503c\u9ed8\u8ba4\u4e3a C:\\Users[\u7528\u6237\u540d]\\go\uff0c\u5728\u7cfb\u7edf\u53d8\u91cf\u4e2d\u4e5f\u4f1a\u4e3a Path \u53d8\u91cf\u589e\u52a0\u4e00\u4e2a\u503c\uff1aC:\\Program Files\\Go\\bin\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u4efb\u610f\u8def\u5f84\u4e0b\u4f7f\u7528 Go \u4e86\u3002</p> </li> <li> <p>\u9a8c\u8bc1 Bash<pre><code>go version\n</code></pre></p> </li> </ol>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_11","title":"\u5378\u8f7d","text":"Bash<pre><code># \u5220\u9664/usr/local/go \u76ee\u5f55\n\n# \u5220\u9664PATH\u73af\u5883\u53d8\u91cf /usr/local/go/bin\n\n# \u82e5\u901a\u8fc7\u5b89\u88c5\u5305\u5b89\u88c5\u7684\uff0c\u76f4\u63a5\u5220\u9664/etc/paths.d/go \u5373\u53ef\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#go","title":"\u5b89\u88c5\u591a\u4e2aGo\u7248\u672c","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_12","title":"\u9002\u7528\u573a\u666f\uff1a","text":"<ul> <li>\u4e00\u4e2a\u7248\u672c\u7528\u4e8e\u5b66\u4e60\u6216\u672c\u5730\u5f00\u53d1\uff0c\u53e6\u5916\u4e00\u4e2a\u7248\u672c\u7528\u4e8e\u751f\u4ea7\u6784\u5efa\u3002</li> <li>\u5b66\u4e60\u4e00\u822c\u53ef\u4ee5\u91c7\u7528\u6700\u65b0\u7248\u3002</li> <li>\u4e1a\u52a1\u751f\u4ea7\u5f00\u53d1\u4e00\u822c\u7528\u4e8e\u6700\u65b0\u7248\u672c\u7684\u524d\u4e00\u4e2a\u7a33\u5b9a\u7248</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_13","title":"\u5b89\u88c5\u65b9\u6848","text":"<ol> <li>\u91cd\u65b0\u8bbe\u7f6ePATH\u73af\u5883\u53d8\u91cf</li> <li>go get \u547d\u4ee4</li> <li>go get \u547d\u4ee4\u5b89\u88c5\u8d39\u7a33\u5b9a\u7248\u672c</li> </ol>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_14","title":"\u5b89\u88c5\u6d41\u7a0b","text":"<p>\u65b9\u6848\u4e00\u5b89\u88c5\u6d41\u7a0b</p> <ul> <li> <p>\u53ea\u9700\u8981\u5c06\u4e0d\u540c\u7248\u672c\u7684 Go \u5b89\u88c5\u5728\u4e0d\u540c\u8def\u5f84\u4e0b\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u7684 Go \u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u6240\u5728\u8def\u5f84\u52a0\u5165\u5230 PATH \u73af\u5883\u53d8\u91cf\u4e2d\u5c31\u53ef\u4ee5\u4e86 Bash<pre><code># \u4ee5Linux\u4e0b \u5b89\u88c51.15.13\u7248\u672c\u4e3a\u4f8b\n\n# step1 \u5c06\u6307\u5b9a\u7248\u672c\u7684go\u5b89\u88c5\u5230go1.15.13\u76ee\u5f55\u4e0b\n$mkdir /usr/local/go1.15.13\n$wget -c https://golang.google.cn/dl/go1.15.13.linux-amd64.tar.gz\n$tar -C /usr/local/go1.15.13 -xzf go1.15.13.linux-amd64.tar.gz\n\n# step2 \u914d\u7f6ePATH\uff0c\u5c06\u539f\u6765\u7684PATH\u53d8\u91cf\u66ff\u6362\u4e3a\u65b0\u7684\u5b89\u88c5\u76ee\u5f55\u8def\u5f84\u3002\n\nexport PATH=$PATH:/usr/local/go/bin\n# \u6539\u4e3a\nexport PATH=$PATH:/usr/local/go1.15.13/go/bin\n\nsource ~/.profile\n\n# step3 \u9a8c\u8bc1\ngo version\n</code></pre></p> </li> <li> <p>\u5bf9\u4e8e\u540e\u7eed\u9700\u8981\u5728\u4e24\u4e2a\u7248\u672c\u4e4b\u95f4\u5207\u6362\uff0c\u53ea\u9700\u8981\u91cd\u65b0\u6309\u7167\u4e0a\u8ff0\u6b65\u9aa4\u4fee\u6539PATH\u53d8\u91cf\u5373\u53ef\u3002</p> </li> </ul> <p>\u65b9\u6848\u4e8c\u5b89\u88c5\u6d41\u7a0b</p> <p>\u6b64\u65b9\u6cd5\u7684\u524d\u63d0\u662f\uff0c\u7cfb\u7edf\u5df2\u7ecf\u5b89\u88c5\u4e86\u4e00\u4e2ago\u7248\u672c\u4e86</p> <p>Bash<pre><code># \u4ee5Linux\u4e0b \u5b89\u88c51.15.13\u7248\u672c\u4e3a\u4f8b\n\n# step1 \u5c06 $ HOME/go/bin \u52a0\u5165\u5230 PATH \u73af\u5883\u53d8\u91cf\u4e2d\u5e76\u751f\u6548\uff0c\u5373\u4fbf\u8fd9\u4e2a\u76ee\u5f55\u5f53\u524d\u4e0d\u5b58\u5728\u4e5f\u6ca1\u5173\u7cfb\uff1a\nexport PATH=$PATH:/usr/local/go/bin:~/go/bin\n\n# step2 \u6267\u884c\u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\u5b89\u88c5 Go 1.15.13 \u7248\u672c\u7684\u4e0b\u8f7d\u5668\uff1a\ngo get golang.org/dl/go1.15.13\n# \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5c06\u540d\u4e3a Go 1.15.13 \u7684\u53ef\u6267\u884c\u6587\u4ef6\u5b89\u88c5\u5230 $HOME/go/bin \u8fd9\u4e2a\u76ee\u5f55\u4e0b\n\n# step3 \u518d\u6267\u884c\u4e0b\u5217\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\ngo1.15.13 download\n&gt;&gt;&gt;log:\nDownloaded   0.0% (    16384 / 121120420 bytes) ...\nDownloaded   1.8% (  2129904 / 121120420 bytes) ...\nDownloaded  84.9% (102792432 / 121120420 bytes) ...\nDownloaded 100.0% (121120420 / 121120420 bytes)\nUnpacking /root/sdk/go1.15.13/go1.15.13.linux-amd64.tar.gz ...\nSuccess. You may now run 'go1.15.13'\n\n# step4 \u9a8c\u8bc1\ngo1.15.13 version\n&gt;&gt;&gt;log:\ngo version go1.15.13 linux/amd64\n# \u63d0\u793a\uff1a\u5982\u679c\u9700\u6b64\u7248\u672c\u8fdb\u884c\u5de5\u4f5c\uff0c\u9700\u8981\u5e26\u4e0ago\u7248\u53f7\u518d\u52a0\u4e0a\u76f8\u5173\u547d\u4ee4\u8fdb\u884c\u6267\u884c\uff0c\u5982\uff1a\ngo1.15.13 env GOROOT\n&gt;&gt;&gt;log:\n/root/sdk/go1.15.13\n</code></pre> \u65b9\u6848\u4e09\u5b89\u88c5\u6d41\u7a0b</p> <p>\u975e\u7a33\u5b9a\u7248\u672c\uff1a - beta \u7248\u672c - \u6700\u65b0\u7684 tip \u7248\u672c\uff0c</p> Bash<pre><code>go get golang.org/dl/go1.19beta1@latest\ngo1.19beta1@latest download\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#go_1","title":"\u914d\u7f6eGo","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_15","title":"\u5e38\u7528\u914d\u7f6e\u9879\u8bf4\u660e","text":"<ul> <li> <p>Linux\u73af\u5883\u4e0b Bash<pre><code>go env\n\n# \u8bbe\u7f6e\u4ee3\u7406\ngo env -w GOPROXY=https://goproxy.cn,direct\n\n# \u542f\u7528 Go Modules \u529f\u80fd\ngo env -w GO111MODULE=on\n\n# \u6e05\u9664\u6a21\u5757\u7f13\u5b58\ngo clean --modcache\n</code></pre></p> </li> <li> <p>Windows\u73af\u5883\u4e0b Bash<pre><code># \u542f\u7528 Go Modules \u529f\u80fd\n$env:GO111MODULE=\"on\"\n\n# \u914d\u7f6e GOPROXY \u73af\u5883\u53d8\u91cf\uff0c\u4ee5\u4e0b\u4e09\u9009\u4e00\n\n# 1. \u4e03\u725b CDN\n$env:GOPROXY=\"https://goproxy.cn,direct\"\n\n# 2. \u963f\u91cc\u4e91\n$env:GOPROXY=\"https://mirrors.aliyun.com/goproxy/,direct\"\n\n# 3. \u5b98\u65b9\n$env:GOPROXY=\"https://goproxy.io,direct\"\n</code></pre></p> </li> <li> <p>\u6d4b\u8bd5 Bash<pre><code># \u6d4b\u8bd5\ngo time go get golang.org/x/tour\n</code></pre></p> </li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#114","title":"\u4f4e\u4e8e1.14\u7248\u672c\u7684\u914d\u7f6e","text":"<ul> <li>\u4e00\u5b9a\u8981\u5c06\u4ee3\u7801\u65b0\u5efa\u5230gopath\u76ee\u5f55\u4e4b\u4e0b\u7684src\u4e0b </li> <li>\u9700\u8981\u8bbe\u7f6e GO111MODULE=off  Bash<pre><code>go env  # \u67e5\u770bgo\u7684\u73af\u5883\u53d8\u91cf\ngo env -w GO111MODULE=off\n</code></pre></li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#114_1","title":"\u9ad8\u4e8e1.14\u7248\u672c\u7684\u914d\u7f6e","text":"<ul> <li>\u786e\u8ba4GO111MODULE=on \u662f\u5426\u8bbe\u7f6e</li> <li>\u4f7f\u7528go modules\u7684\u65b9\u5f0f\uff0c\u5728\u4efb\u610f\u76ee\u5f55\u4e0b\u65b0\u5efa\u9879\u76ee\uff08\u4e0d\u4e00\u5b9a\u975e\u8981\u653e\u5728gopath/src \u6216 goroot/src\u4e0b\uff09\uff0c\u90fd\u53ef\u4ee5\u8fd0\u884c\u4ee3\u7801</li> </ul> <p>Note: \u5982\u679c\u4e4b\u524d\u7684\u9879\u76ee\u6ca1\u6709\u4f7f\u7528go modules\u7684\u65b9\u5f0f\u957f\u521b\u5efa\u9879\u76ee\uff0c\u5f53\u4e0b\u9700\u8981\u6539\u4e3a\u6b64\u6a21\u5f0f\uff0c\u5219\u6267\u884c\u4e0b\u5217\u64cd\u4f5c\u5373\u53ef\uff1a Text Only<pre><code>1. \u5728\u9879\u76ee\u7684\u6839\u8def\u5f84\u4e0b\u65b0\u5efago.mod \u6587\u4ef62. \u5728go.mod\u6587\u4ef6\u4e2d\u5199\u5165module \"PackageTestgo 1.16\n</code></pre></p> <ul> <li>\u603b\u7ed3 </li> <li>\u80fd\u7528go modules\u5c31\u7528modules ,\u4e0d\u7528\u53bb\u8003\u8651\u4ee5\u524d\u7684\u5f00\u53d1\u6a21\u5f0f**</li> <li>\u5373\u4f7f\u4f7f\u7528\u4e86\u4ee5\u524d\u7684\u5f00\u53d1\u6a21\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u81ea\u52a8\u8bbe\u7f6e\u4e3a\u73b0\u5728\u7684modules\u6a21\u5f0f</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide/#_16","title":"\u63a8\u8350\u63d2\u4ef6\u5b89\u88c5","text":"<ul> <li>go fmt</li> <li>Goimports</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/","title":"Go\u73af\u5883\u5b89\u88c5\u548c\u914d\u7f6e","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#1","title":"1.\u4e0b\u8f7d\u5730\u5740\uff1a","text":"<p>Go\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff1ahttps://golang.org/dl/</p> <p>Go\u5b98\u65b9\u955c\u50cf\u7ad9\uff08\u63a8\u8350\uff09\uff1ahttps://golang.google.cn/dl/</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#2","title":"2.\u5b89\u88c5","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#linux","title":"linux\u73af\u5883","text":"Bash<pre><code># \u4e0b\u8f7dtar\u5305\n# \u4f7f\u7528 wget \u6216\u5728\u5b98\u65b9\u4e0b\u8f7d\u540e\u4e0a\u4f20\u81f3\u670d\u52a1\u5668\nwget https://golang.org/dl/go1.16.2.linux-amd64.tar.gz\n\n# \u89e3\u538b\u81f3/usr/local/\u76ee\u5f55\u4e0b\ntar -C /usr/local -xzf go1.16.2.linux-amd64.tar.gz\n\n# \u914d\u7f6e\u73af\u5883\u53d8\u91cf\nvim ~/.bashrc\n\nexport GOROOT=/root/go\nexport GOPATH=/root/projects/go\nexport PATH=$PATH:$GOROOT/bin:$GPPATH/bin\n\n# \u7f16\u8f91\u4fdd\u5b58\u5e76\u9000\u51favim\u540e\uff0c\u6267\u884c\uff1a\nsource ~/.bashrc\n\n# \u67e5\u770bgo\u7684\u7248\u672c\ngo version \n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#mac","title":"Mac\u73af\u5883","text":"<ul> <li>\u65b9\u5f0f\u4e00\uff1abrew\u5b89\u88c5</li> </ul> Bash<pre><code>brew info go \nbrew install go\ngo version\n</code></pre> <ul> <li>\u65b9\u5f0f\u4e8c\uff1a\u4e0b\u8f7d\u5b89\u88c5\u5305\u5b89\u88c5</li> </ul> Bash<pre><code>#\u3000\u4e00\u822c\u9ed8\u8ba4\u5b89\u88c5\u5728\uff1ausers/local/go\n\n# \u914d\u7f6e\u73af\u5883\u53d8\u91cfvim .zshrc \u6216\u5176\u4ed6\u914d\u7f6e\u6587\u4ef6\uff08.bash_profile\uff09\nexport GOROOT=/usr/local/go\nexport GOPATH=$HOME/workspace/go\nexport PATH=$PATH:$GOROOT/bin:$GOPATH/bin/\nexport GO111MODULE=on\nexport GOPROXY=https://goproxy.cn,direct\n\n# \u91cd\u8f7d\u914d\u7f6e\u6587\u4ef6\nsource ~/.zshrc\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#window","title":"Window\u73af\u5883","text":"<ul> <li>\u4e0b\u8f7d\u5b89\u88c5\u5305</li> <li>\u8fd0\u884c\u5b89\u88c5\u5305\u6587\u4ef6</li> <li>\u914d\u7f6e\u73af\u5883\u53d8\u91cfPATH</li> <li>\u91cd\u542f\u547d\u4ee4\u7a97\u53e3</li> <li>go version \u6d4b\u8bd5\u5b89\u88c5\u7ed3\u679c</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#3","title":"3:\u62d3\u5c55\u8865\u5145","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#_1","title":"\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u91cd\u70b9\u540d\u8bcd","text":"Bash<pre><code>GOROOT\uff1aGo\u8bed\u8a00\u5b89\u88c5\u6839\u76ee\u5f55\u7684\u8def\u5f84\uff0c\u4e5f\u5c31\u662fGO\u8bed\u8a00\u7684\u5b89\u88c5\u8def\u5f84\u3002\nGOPATH\uff1a\u82e5\u5e72\u5de5\u4f5c\u533a\u76ee\u5f55\u7684\u8def\u5f84\u3002\u662f\u6211\u4eec\u81ea\u5df1\u5b9a\u4e49\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002\nGOBIN\uff1aGO\u7a0b\u5e8f\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff08executable file\uff09\u7684\u8def\u5f84\u3002\n</code></pre> <p>Go1.14\u7248\u672c\u4e4b\u540e\uff0c\u90fd\u63a8\u8350\u4f7f\u7528<code>go mod</code>\u6a21\u5f0f\u6765\u7ba1\u7406\u4f9d\u8d56\u73af\u5883\u4e86\uff0c\u4e5f\u4e0d\u518d\u5f3a\u5236\u6211\u4eec\u628a\u4ee3\u7801\u5fc5\u987b\u5199\u5728<code>GOPATH</code>\u4e0b\u9762\u7684src\u76ee\u5f55\u4e86\uff0c\u4f60\u53ef\u4ee5\u5728\u4f60\u7535\u8111\u7684\u4efb\u610f\u4f4d\u7f6e\u7f16\u5199go\u4ee3\u7801\u3002\uff08\u7f51\u4e0a\u6709\u4e9b\u6559\u7a0b\u9002\u7528\u4e8e1.11\u7248\u672c\u4e4b\u524d\u3002\uff09</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#go","title":"go\u7684\u57fa\u672c\u547d\u4ee4","text":"Bash<pre><code>go build main.go \n  \u7f16\u8bd1\u6e90\u7801\u6587\u4ef6\u548c\u5f53\u524d\u76ee\u5f55\u7684\u4ee3\u7801\u5305\n  \u7f16\u8bd1\u547d\u4ee4\u6e90\u7801\u6587\u4ef6\u540e\uff0c\u521b\u5efa\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\n  -o: output \u6307\u5b9a\u7f16\u8bd1\u8f93\u51fa\u7684\u540d\u79f0\uff0c\u4ee3\u66ff\u9ed8\u8ba4\u7684\u5305\u540d\u3002\n  -i: install \u5b89\u88c5\u4f5c\u4e3a\u76ee\u6807\u7684\u4f9d\u8d56\u5173\u7cfb\u7684\u5305(\u7528\u4e8e\u589e\u91cf\u7f16\u8bd1\u63d0\u901f)\u3002\n\ngo run main.go \u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c Go \u7a0b\u5e8f\u3002\n  \u7528\u4e8e\u8fd0\u884c\u547d\u4ee4\u6e90\u7801\u6587\u4ef6\n  \u53ea\u80fd\u63a5\u53d7\u4e00\u4e2a\u547d\u4ee4\u6e90\u7801\u6587\u4ef6\u4ee5\u53ca\u82e5\u5e72\u4e2a\u5e93\u6e90\u7801\u6587\u4ef6\u4f5c\u4e3a\u6587\u4ef6\u53c2\u6570\n  -a \u5f3a\u5236\u7f16\u8bd1\u76f8\u5173\u4ee3\u7801\n  -p [n] \u5e76\u884c\u7f16\u8bd1\n  -v \u5c55\u793a\u88ab\u7f16\u8bd1\u7684\u4ee3\u7801\u5305\u540d\u79f0\n  -work \u4e0d\u5220\u9664\u521b\u5efa\u7684\u4e34\u65f6\u76ee\u5f55  \n\ngo install\n  \u7f16\u8bd1\u548c\u5b89\u88c5\u4ee3\u7801\u5305\u6216\u6e90\u7801\u6587\u4ef6\n  \u5b89\u88c5\u4ee3\u7801\u5305\u4f1a\u5728\u5de5\u4f5c\u533a/pkg/\u5e73\u53f0\u76ee\u5f55\u751f\u6210\u5f52\u6863\u6587\u4ef6\n  \u5b89\u88c5\u547d\u4ee4\u6e90\u7801\u6587\u4ef6\u4f1a\u5728 bin\u76ee\u5f55\u4e0b\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\n\ngo get\n  \u4ece\u8fdc\u7a0b\u4ee3\u7801\u4ed3\u5e93\u62c9\u53d6\u4ee3\u7801\u5305,\u62c9\u53d6\u5230 GOPATH \u7684 src \u76ee\u5f55\u4e2d\n  -u \u66f4\u65b0\u5df2\u5b58\u5728\u7684\u4ee3\u7801\u5305\n  \u7528\u5bfc\u5165\u8def\u5f84\u7f16\u8bd1\u7a0b\u5e8f\u65f6\uff0cgo build \u547d\u4ee4\u4f1a\u4f7f\u7528 GOPATH \u7684\u8bbe\u7f6e\uff0c\u5728\u78c1\u76d8\u4e0a\u641c\u7d22\u8fd9\u4e2a\u5305\u3002\u4e8b\u5b9e\u4e0a\uff0c \u8fd9\u4e2a\u5bfc\u5165\u8def\u5f84\u4ee3\u8868\u4e00\u4e2a URL\uff0c\u6307\u5411 GitHub \u4e0a\u7684\u4ee3\u7801\u5e93\u3002\u5982\u679c\u8def\u5f84\u5305\u542b URL\uff0c\u53ef\u4ee5\u4f7f\u7528 Go \u5de5\u5177\u94fe\u4ece DVCS \u83b7\u53d6\u5305\uff0c\u5e76\u628a\u5305\u7684\u6e90\u4ee3\u7801\u4fdd\u5b58\u5728 GOPATH \u6307\u5411\u7684\u8def\u5f84\u91cc\u4e0e URL \u5339\u914d\u7684\u76ee\u5f55\u91cc\u3002\u8fd9\u4e2a\u83b7\u53d6\u8fc7\u7a0b \u4f7f\u7528 go get \u547d\u4ee4\u5b8c\u6210\u3002go get \u5c06\u83b7\u53d6\u4efb\u610f\u6307\u5b9a\u7684 URL \u7684\u5305\uff0c\u6216\u8005\u4e00\u4e2a\u5df2\u7ecf\u5bfc\u5165\u7684\u5305\u6240\u4f9d\u8d56\u7684\u5176 \u4ed6\u5305\u3002\u7531\u4e8ego get\u7684\u8fd9\u79cd\u9012\u5f52\u7279\u6027\uff0c\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u626b\u63cf\u67d0\u4e2a\u5305\u7684\u6e90\u7801\u6811\uff0c\u83b7\u53d6\u80fd\u627e\u5230\u7684\u6240\u6709\u4f9d\u8d56\u5305\u3002\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#go_1","title":"go\u7684\u76ee\u5f55\u8bf4\u660e","text":"<ul> <li>\u5de5\u4f5c\u533a</li> </ul> Bash<pre><code>src\u76ee\u5f55:\n    \u5b58\u653e\u6e90\u7801\u6587\u4ef6,\u4ee5\u4ee3\u7801\u5305\u4e3a\u7ec4\u7ec7\u5f62\u5f0f\n\npkg\u76ee\u5f55:\n    \u5b58\u653e\u6e90\u7801\u6587\u4ef6\u4ee5\u53ca\u5b89\u88c5\u540e\u7684\u7ed3\u679c\u6587\u4ef6(\u5f52\u6863\u6587\u4ef6),\u540d\u79f0\u4ee5 .a\u7ed3\u5c3e\n    \u9690\u85cf\u73af\u5883\u53d8\u91cf $GOOS _$GOARCH,\u5982 linux_amd64\n        GOOS \u64cd\u4f5c\u7cfb\u7edf\n        GOARCH \u8ba1\u7b97\u67b6\u6784\n\nbin\u76ee\u5f55:\n    \u5b58\u653ego\u7684\u53ef\u6267\u884c\u6587\u4ef6\n    \u4ec5\u4ec5\u5728\u6ca1\u6709\u8bbe\u7f6egoBin\u65f6\u751f\u6548 \n</code></pre> <ul> <li>\u9879\u76ee\u76ee\u5f55</li> </ul> Bash<pre><code>cmd\uff1a\u547d\u4ee4\u884c\u529f\u80fd\u96c6\u5408\u3002\nconfigs\uff1a\u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6\u96c6\u5408\u3002\ndeployments\uff1a\u6784\u5efaDocker\u955c\u50cf\u7b49\u6587\u4ef6\u96c6\u5408\u3002\ndocs\uff1a\u6587\u6863\u96c6\u5408\u3002\ninitializers\uff1a\u521d\u59cb\u5316\u6587\u4ef6\u96c6\u5408\u3002\nlogs\uff1a\u5b58\u50a8\u9879\u76ee\u65e5\u5fd7\u6587\u4ef6\u96c6\u5408\u3002\npkg\uff1a\u9879\u76ee\u8f85\u52a9\u529f\u80fd\uff0c\u6bd4\u5982\u4e2d\u95f4\u4ef6\u3001\u63d2\u4ef6\u7b49\u3002\nscripts\uff1a\u811a\u672c\u6587\u4ef6\u96c6\u5408\u3002\nsrc\uff1a\u9879\u76ee\u7684\u6838\u5fc3\u6587\u4ef6\uff0c\u6838\u5fc3\u7684\u5904\u7406\u73af\u8282\u3002\ntools\uff1a\u9879\u76ee\u8f85\u52a9\u5de5\u5177\u3002\nvendor\uff1a\u7b2c\u4e09\u65b9\u5e93\u6587\u4ef6\u96c6\u5408\u3002\nmain.go\uff1a\u9879\u76ee\u51fd\u6570\u5165\u53e3\u3002\nMakefile\uff1a\u9879\u76ee\u6784\u5efa\u547d\u4ee4\u96c6\u5408\u3002\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#_2","title":"\u5f00\u53d1\u73af\u5883\u914d\u7f6e\u548c\u5207\u6362","text":"<p>\u5bfc\u5305\u987a\u5e8f\uff1a\u5148\u67e5\u627egopath/src/\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u5305\u662f\u5426\u6709\uff0c\u518d\u627egoroot/src/\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u5305\u662f\u5426\u6709</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#go-114","title":"go \u7248\u672c\u4f4e\u4e8e1.14\u7684\u914d\u7f6e","text":"<ul> <li> <p>\u4e00\u5b9a\u8981\u5c06\u4ee3\u7801\u65b0\u5efa\u5230gopath\u76ee\u5f55\u4e4b\u4e0b\u7684src\u4e0b</p> </li> <li> <p>\u9700\u8981\u8bbe\u7f6e GO111MODULE=off </p> </li> </ul> Bash<pre><code>go env  # \u67e5\u770bgo\u7684\u73af\u5883\u53d8\u91cf\ngo env -w GO111MODULE=off \n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#go-114_1","title":"go \u7248\u672c\u9ad8\u4e8e1.14\u653e\u5165\u914d\u7f6e","text":"<ul> <li>\u786e\u8ba4GO111MODULE=on \u662f\u5426\u8bbe\u7f6e</li> <li>\u4f7f\u7528go modules\u7684\u65b9\u5f0f\uff0c\u5728\u4efb\u610f\u76ee\u5f55\u4e0b\u65b0\u5efa\u9879\u76ee\uff08\u4e0d\u4e00\u5b9a\u975e\u8981\u653e\u5728gopath/src \u6216 goroot/src\u4e0b\uff09\uff0c\u90fd\u53ef\u4ee5\u8fd0\u884c\u4ee3\u7801</li> </ul> <p>Note: \u5982\u679c\u4e4b\u524d\u7684\u9879\u76ee\u6ca1\u6709\u4f7f\u7528go modules\u7684\u65b9\u5f0f\u957f\u521b\u5efa\u9879\u76ee\uff0c\u5f53\u4e0b\u9700\u8981\u6539\u4e3a\u6b64\u6a21\u5f0f\uff0c\u5219\u6267\u884c\u4e0b\u5217\u64cd\u4f5c\u5373\u53ef\uff1a</p> Text Only<pre><code>1. \u5728\u9879\u76ee\u7684\u6839\u8def\u5f84\u4e0b\u65b0\u5efago.mod \u6587\u4ef6\n2. \u5728go.mod\u6587\u4ef6\u4e2d\u5199\u5165\n\nmodule \"PackageTest\ngo 1.16\n</code></pre> <ul> <li>\u603b\u7ed3<ul> <li>\u80fd\u7528go modules\u5c31\u7528modules ,\u4e0d\u7528\u53bb\u8003\u8651\u4ee5\u524d\u7684\u5f00\u53d1\u6a21\u5f0f**</li> <li>\u5373\u4f7f\u4f7f\u7528\u4e86\u4ee5\u524d\u7684\u5f00\u53d1\u6a21\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u81ea\u52a8\u8bbe\u7f6e\u4e3a\u73b0\u5728\u7684modules\u6a21\u5f0f</li> </ul> </li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#_3","title":"\u8bbe\u7f6e\u4ee3\u7406\u52a0\u901f","text":"Bash<pre><code>go env -w GOPROXY=https://goproxy.io,direct\ngo env -w GO111MODULE=on\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_install_guide_2/#_4","title":"\u63a8\u8350\u63d2\u4ef6\u5b89\u88c5","text":"<ul> <li>go fmt</li> <li>Goimports</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/","title":"Go\u5b89\u5168\u6307\u5357[\u6458\u5f55]","text":"<p>\u672c\u6587cover: Tencent</p>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#_1","title":"\u901a\u7528\u7c7b","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#1","title":"1. \u4ee3\u7801\u5b9e\u73b0\u7c7b","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#11","title":"1.1 \u5185\u5b58\u7ba1\u7406","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#111","title":"1.1.1\u3010\u5fc5\u987b\u3011\u5207\u7247\u957f\u5ea6\u6821\u9a8c","text":"<ul> <li>\u5728\u5bf9slice\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u5fc5\u987b\u5224\u65ad\u957f\u5ea6\u662f\u5426\u5408\u6cd5\uff0c\u9632\u6b62\u7a0b\u5e8fpanic</li> </ul> Go<pre><code>// bad: \u672a\u5224\u65addata\u7684\u957f\u5ea6\uff0c\u53ef\u5bfc\u81f4 index out of range\nfunc decode(data []byte) bool {\n    if data[0] == 'F' &amp;&amp; data[1] == 'U' &amp;&amp; data[2] == 'Z' &amp;&amp; data[3] == 'Z' &amp;&amp; data[4] == 'E' &amp;&amp; data[5] == 'R' {\n        fmt.Println(\"Bad\")\n        return true\n    }\n    return false\n}\n\n// bad: slice bounds out of range\nfunc foo() {\n    var slice = []int{0, 1, 2, 3, 4, 5, 6}\n    fmt.Println(slice[:10])\n}\n\n// good: \u4f7f\u7528data\u524d\u5e94\u5224\u65ad\u957f\u5ea6\u662f\u5426\u5408\u6cd5\nfunc decode(data []byte) bool {\n    if len(data) == 6 {\n        if data[0] == 'F' &amp;&amp; data[1] == 'U' &amp;&amp; data[2] == 'Z' &amp;&amp; data[3] == 'Z' &amp;&amp; data[4] == 'E' &amp;&amp; data[5] == 'R' {\n            fmt.Println(\"Good\")\n            return true\n        }\n    }\n    return false\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#112nil","title":"1.1.2\u3010\u5fc5\u987b\u3011nil\u6307\u9488\u5224\u65ad","text":"<ul> <li>\u8fdb\u884c\u6307\u9488\u64cd\u4f5c\u65f6\uff0c\u5fc5\u987b\u5224\u65ad\u8be5\u6307\u9488\u662f\u5426\u4e3anil\uff0c\u9632\u6b62\u7a0b\u5e8fpanic\uff0c\u5c24\u5176\u5728\u8fdb\u884c\u7ed3\u6784\u4f53Unmarshal\u65f6</li> </ul> Go<pre><code>type Packet struct {\n    PackeyType    uint8\n    PackeyVersion uint8\n    Data          *Data\n}\n\ntype Data struct {\n    Stat uint8\n    Len  uint8\n    Buf  [8]byte\n}\n\nfunc (p *Packet) UnmarshalBinary(b []byte) error {\n    if len(b) &lt; 2 {\n        return io.EOF\n    }\n\n    p.PackeyType = b[0]\n    p.PackeyVersion = b[1]\n\n    // \u82e5\u957f\u5ea6\u7b49\u4e8e2\uff0c\u90a3\u4e48\u4e0d\u4f1anew Data\n    if len(b) &gt; 2 {\n        p.Data = new(Data)\n    }\n    return nil\n}\n\n// bad: \u672a\u5224\u65ad\u6307\u9488\u662f\u5426\u4e3anil\nfunc main() {\n    packet := new(Packet)\n    data := make([]byte, 2)\n    if err := packet.UnmarshalBinary(data); err != nil {\n        fmt.Println(\"Failed to unmarshal packet\")\n        return\n    }\n\n    fmt.Printf(\"Stat: %v\\n\", packet.Data.Stat)\n}\n\n// good: \u5224\u65adData\u6307\u9488\u662f\u5426\u4e3anil\nfunc main() {\n    packet := new(Packet)\n    data := make([]byte, 2)\n\n    if err := packet.UnmarshalBinary(data); err != nil {\n        fmt.Println(\"Failed to unmarshal packet\")\n        return\n    }\n\n    if packet.Data == nil {\n        return\n    }\n\n    fmt.Printf(\"Stat: %v\\n\", packet.Data.Stat)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#113","title":"1.1.3\u3010\u5fc5\u987b\u3011\u6574\u6570\u5b89\u5168","text":"<ul> <li>\u5728\u8fdb\u884c\u6570\u5b57\u8fd0\u7b97\u64cd\u4f5c\u65f6\uff0c\u9700\u8981\u505a\u597d\u957f\u5ea6\u9650\u5236\uff0c\u9632\u6b62\u5916\u90e8\u8f93\u5165\u8fd0\u7b97\u5bfc\u81f4\u5f02\u5e38\uff1a</li> <li>\u786e\u4fdd\u65e0\u7b26\u53f7\u6574\u6570\u8fd0\u7b97\u65f6\u4e0d\u4f1a\u53cd\u8f6c</li> <li>\u786e\u4fdd\u6709\u7b26\u53f7\u6574\u6570\u8fd0\u7b97\u65f6\u4e0d\u4f1a\u51fa\u73b0\u6ea2\u51fa</li> <li>\u786e\u4fdd\u6574\u578b\u8f6c\u6362\u65f6\u4e0d\u4f1a\u51fa\u73b0\u622a\u65ad\u9519\u8bef</li> <li> <p>\u786e\u4fdd\u6574\u578b\u8f6c\u6362\u65f6\u4e0d\u4f1a\u51fa\u73b0\u7b26\u53f7\u9519\u8bef</p> </li> <li> <p>\u4ee5\u4e0b\u573a\u666f\u5fc5\u987b\u4e25\u683c\u8fdb\u884c\u957f\u5ea6\u9650\u5236\uff1a</p> </li> <li>\u4f5c\u4e3a\u6570\u7ec4\u7d22\u5f15</li> <li>\u4f5c\u4e3a\u5bf9\u8c61\u7684\u957f\u5ea6\u6216\u8005\u5927\u5c0f</li> <li>\u4f5c\u4e3a\u6570\u7ec4\u7684\u8fb9\u754c\uff08\u5982\u4f5c\u4e3a\u5faa\u73af\u8ba1\u6570\u5668\uff09</li> </ul> Go<pre><code>// bad: \u672a\u9650\u5236\u957f\u5ea6\uff0c\u5bfc\u81f4\u6574\u6570\u6ea2\u51fa\nfunc overflow(numControlByUser int32) {\n    var numInt int32 = 0\n    numInt = numControlByUser + 1\n    // \u5bf9\u957f\u5ea6\u9650\u5236\u4e0d\u5f53\uff0c\u5bfc\u81f4\u6574\u6570\u6ea2\u51fa\n    fmt.Printf(\"%d\\n\", numInt)\n    // \u4f7f\u7528numInt\uff0c\u53ef\u80fd\u5bfc\u81f4\u5176\u4ed6\u9519\u8bef\n}\n\nfunc main() {\n    overflow(2147483647)\n}\n\n// good\nfunc overflow(numControlByUser int32) {\n    var numInt int32 = 0\n    numInt = numControlByUser + 1\n    if numInt &lt; 0 {\n        fmt.Println(\"integer overflow\")\n        return\n    }\n    fmt.Println(\"integer ok\")\n}\n\nfunc main() {\n    overflow(2147483647)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#114make","title":"1.1.4\u3010\u5fc5\u987b\u3011make\u5206\u914d\u957f\u5ea6\u9a8c\u8bc1","text":"<ul> <li>\u5728\u8fdb\u884cmake\u5206\u914d\u5185\u5b58\u65f6\uff0c\u9700\u8981\u5bf9\u5916\u90e8\u53ef\u63a7\u7684\u957f\u5ea6\u8fdb\u884c\u6821\u9a8c\uff0c\u9632\u6b62\u7a0b\u5e8fpanic\u3002</li> </ul> Go<pre><code>// bad\nfunc parse(lenControlByUser int, data []byte) {\n    size := lenControlByUser\n    // \u5bf9\u5916\u90e8\u4f20\u5165\u7684size\uff0c\u8fdb\u884c\u957f\u5ea6\u5224\u65ad\u4ee5\u514d\u5bfc\u81f4panic\n    buffer := make([]byte, size)\n    copy(buffer, data)\n}\n\n// good\nfunc parse(lenControlByUser int, data []byte) ([]byte, error) {\n    size := lenControlByUser\n    // \u9650\u5236\u5916\u90e8\u53ef\u63a7\u7684\u957f\u5ea6\u5927\u5c0f\u8303\u56f4\n    if size &gt; 64*1024*1024 {\n        return nil, errors.New(\"value too large\")\n    }\n    buffer := make([]byte, size)\n    copy(buffer, data)\n    return buffer, nil\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#115setfinalizer","title":"1.1.5\u3010\u5fc5\u987b\u3011\u7981\u6b62SetFinalizer\u548c\u6307\u9488\u5faa\u73af\u5f15\u7528\u540c\u65f6\u4f7f\u7528","text":"<ul> <li>\u5f53\u4e00\u4e2a\u5bf9\u8c61\u4ece\u88abGC\u9009\u4e2d\u5230\u79fb\u9664\u5185\u5b58\u4e4b\u524d\uff0cruntime.SetFinalizer()\u90fd\u4e0d\u4f1a\u6267\u884c\uff0c\u5373\u4f7f\u7a0b\u5e8f\u6b63\u5e38\u7ed3\u675f\u6216\u8005\u53d1\u751f\u9519\u8bef\u3002\u7531\u6307\u9488\u6784\u6210\u7684\u201c\u5faa\u73af\u5f15\u7528\u201d\u867d\u7136\u80fd\u88abGC\u6b63\u786e\u5904\u7406\uff0c\u4f46\u7531\u4e8e\u65e0\u6cd5\u786e\u5b9aFinalizer\u4f9d\u8d56\u987a\u5e8f\uff0c\u4ece\u800c\u65e0\u6cd5\u8c03\u7528runtime.SetFinalizer()\uff0c\u5bfc\u81f4\u76ee\u6807\u5bf9\u8c61\u65e0\u6cd5\u53d8\u6210\u53ef\u8fbe\u72b6\u6001\uff0c\u4ece\u800c\u9020\u6210\u5185\u5b58\u65e0\u6cd5\u88ab\u56de\u6536\u3002</li> </ul> Go<pre><code>// bad\nfunc foo() {\n    var a, b Data\n    a.o = &amp;b\n    b.o = &amp;a\n\n    // \u6307\u9488\u5faa\u73af\u5f15\u7528\uff0cSetFinalizer()\u65e0\u6cd5\u6b63\u5e38\u8c03\u7528\n    runtime.SetFinalizer(&amp;a, func(d *Data) {\n        fmt.Printf(\"a %p final.\\n\", d)\n    })\n    runtime.SetFinalizer(&amp;b, func(d *Data) {\n        fmt.Printf(\"b %p final.\\n\", d)\n    })\n}\n\nfunc main() {\n    for {\n        foo()\n        time.Sleep(time.Millisecond)\n    }\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#116channel","title":"1.1.6\u3010\u5fc5\u987b\u3011\u7981\u6b62\u91cd\u590d\u91ca\u653echannel","text":"<ul> <li>\u91cd\u590d\u91ca\u653e\u4e00\u822c\u5b58\u5728\u4e8e\u5f02\u5e38\u6d41\u7a0b\u5224\u65ad\u4e2d\uff0c\u5982\u679c\u6076\u610f\u653b\u51fb\u8005\u6784\u9020\u51fa\u5f02\u5e38\u6761\u4ef6\u4f7f\u7a0b\u5e8f\u91cd\u590d\u91ca\u653echannel\uff0c\u5219\u4f1a\u89e6\u53d1\u8fd0\u884c\u65f6panic\uff0c\u4ece\u800c\u9020\u6210DoS\u653b\u51fb\u3002</li> </ul> Go<pre><code>// bad\nfunc foo(c chan int) {\n    defer close(c)\n    err := processBusiness()\n    if err != nil {\n        c &lt;- 0\n        close(c) // \u91cd\u590d\u91ca\u653echannel\n        return\n    }\n    c &lt;- 1\n}\n\n// good\nfunc foo(c chan int) {\n    defer close(c) // \u4f7f\u7528defer\u5ef6\u8fdf\u5173\u95edchannel\n    err := processBusiness()\n    if err != nil {\n        c &lt;- 0\n        return\n    }\n    c &lt;- 1\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#117","title":"1.1.7\u3010\u5fc5\u987b\u3011\u786e\u4fdd\u6bcf\u4e2a\u534f\u7a0b\u90fd\u80fd\u9000\u51fa","text":"<ul> <li>\u542f\u52a8\u4e00\u4e2a\u534f\u7a0b\u5c31\u4f1a\u505a\u4e00\u4e2a\u5165\u6808\u64cd\u4f5c\uff0c\u5728\u7cfb\u7edf\u4e0d\u9000\u51fa\u7684\u60c5\u51b5\u4e0b\uff0c\u534f\u7a0b\u4e5f\u6ca1\u6709\u8bbe\u7f6e\u9000\u51fa\u6761\u4ef6\uff0c\u5219\u76f8\u5f53\u4e8e\u534f\u7a0b\u5931\u53bb\u4e86\u63a7\u5236\uff0c\u5b83\u5360\u7528\u7684\u8d44\u6e90\u65e0\u6cd5\u56de\u6536\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5185\u5b58\u6cc4\u9732\u3002</li> </ul> Go<pre><code>// bad: \u534f\u7a0b\u6ca1\u6709\u8bbe\u7f6e\u9000\u51fa\u6761\u4ef6\nfunc doWaiter(name string, second int) {\n    for {\n        time.Sleep(time.Duration(second) * time.Second)\n        fmt.Println(name, \" is ready!\")\n    }\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#118unsafe","title":"1.1.8\u3010\u63a8\u8350\u3011\u4e0d\u4f7f\u7528unsafe\u5305","text":"<ul> <li>\u7531\u4e8eunsafe\u5305\u7ed5\u8fc7\u4e86 Golang \u7684\u5185\u5b58\u5b89\u5168\u539f\u5219\uff0c\u4e00\u822c\u6765\u8bf4\u4f7f\u7528\u8be5\u5e93\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u53ef\u5bfc\u81f4\u5185\u5b58\u7834\u574f\uff0c\u5c3d\u91cf\u907f\u514d\u4f7f\u7528\u8be5\u5305\u3002\u82e5\u5fc5\u987b\u8981\u4f7f\u7528unsafe\u64cd\u4f5c\u6307\u9488\uff0c\u5fc5\u987b\u505a\u597d\u5b89\u5168\u6821\u9a8c\u3002</li> </ul> Go<pre><code>// bad: \u901a\u8fc7unsafe\u64cd\u4f5c\u539f\u59cb\u6307\u9488\nfunc unsafePointer() {\n    b := make([]byte, 1)\n    foo := (*int)(unsafe.Pointer(uintptr(unsafe.Pointer(&amp;b[0])) + uintptr(0xfffffffe)))\n    fmt.Print(*foo + 1)\n}\n\n// [signal SIGSEGV: segmentation violation code=0x1 addr=0xc100068f55 pc=0x49142b]\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#119slice","title":"1.1.9\u3010\u63a8\u8350\u3011\u4e0d\u4f7f\u7528slice\u4f5c\u4e3a\u51fd\u6570\u5165\u53c2","text":"<ul> <li>slice\u5728\u4f5c\u4e3a\u51fd\u6570\u5165\u53c2\u65f6\uff0c\u51fd\u6570\u5185\u5bf9slice\u7684\u4fee\u6539\u53ef\u80fd\u4f1a\u5f71\u54cd\u539f\u59cb\u6570\u636e</li> </ul> Go<pre><code>  // bad\n  // slice\u4f5c\u4e3a\u51fd\u6570\u5165\u53c2\u65f6\u5305\u542b\u539f\u59cb\u6570\u7ec4\u6307\u9488\n  func modify(array []int) {\n      array[0] = 10 // \u5bf9\u5165\u53c2slice\u7684\u5143\u7d20\u4fee\u6539\u4f1a\u5f71\u54cd\u539f\u59cb\u6570\u636e\n  }\n\n  func main() {\n      array := []int{1, 2, 3, 4, 5}\n\n      modify(array)\n      fmt.Println(array) // output\uff1a[10 2 3 4 5]\n  }\n\n  // good\n  // \u6570\u7ec4\u4f5c\u4e3a\u51fd\u6570\u5165\u53c2\uff0c\u800c\u4e0d\u662fslice\n  func modify(array [5]int) {\n    array[0] = 10\n  }\n\n  func main() {\n      // \u4f20\u5165\u6570\u7ec4\uff0c\u6ce8\u610f\u6570\u7ec4\u4e0eslice\u7684\u533a\u522b\n      array := [5]int{1, 2, 3, 4, 5}\n\n      modify(array)\n      fmt.Println(array)\n  }\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#12","title":"1.2 \u6587\u4ef6\u64cd\u4f5c","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#121","title":"1.2.1\u3010\u5fc5\u987b\u3011 \u8def\u5f84\u7a7f\u8d8a\u68c0\u67e5","text":"<ul> <li>\u5728\u8fdb\u884c\u6587\u4ef6\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u5bf9\u5916\u90e8\u4f20\u5165\u7684\u6587\u4ef6\u540d\u672a\u505a\u9650\u5236\uff0c\u53ef\u80fd\u5bfc\u81f4\u4efb\u610f\u6587\u4ef6\u8bfb\u53d6\u6216\u8005\u4efb\u610f\u6587\u4ef6\u5199\u5165\uff0c\u4e25\u91cd\u53ef\u80fd\u5bfc\u81f4\u4ee3\u7801\u6267\u884c\u3002</li> </ul> Go<pre><code>// bad: \u4efb\u610f\u6587\u4ef6\u8bfb\u53d6\nfunc handler(w http.ResponseWriter, r *http.Request) {\n    path := r.URL.Query()[\"path\"][0]\n\n    // \u672a\u8fc7\u6ee4\u6587\u4ef6\u8def\u5f84\uff0c\u53ef\u80fd\u5bfc\u81f4\u4efb\u610f\u6587\u4ef6\u8bfb\u53d6\n    data, _ := ioutil.ReadFile(path)\n    w.Write(data)\n\n    // \u5bf9\u5916\u90e8\u4f20\u5165\u7684\u6587\u4ef6\u540d\u53d8\u91cf\uff0c\u8fd8\u9700\u8981\u9a8c\u8bc1\u662f\u5426\u5b58\u5728../\u7b49\u8def\u5f84\u7a7f\u8d8a\u7684\u6587\u4ef6\u540d\n    data, _ = ioutil.ReadFile(filepath.Join(\"/home/user/\", path))\n    w.Write(data)\n}\n\n// bad: \u4efb\u610f\u6587\u4ef6\u5199\u5165\nfunc unzip(f string) {\n    r, _ := zip.OpenReader(f)\n    for _, f := range r.File {\n        p, _ := filepath.Abs(f.Name)\n        // \u672a\u9a8c\u8bc1\u538b\u7f29\u6587\u4ef6\u540d\uff0c\u53ef\u80fd\u5bfc\u81f4../\u7b49\u8def\u5f84\u7a7f\u8d8a\uff0c\u4efb\u610f\u6587\u4ef6\u8def\u5f84\u5199\u5165\n        ioutil.WriteFile(p, []byte(\"present\"), 0640)\n    }\n}\n\n// good: \u68c0\u67e5\u538b\u7f29\u7684\u6587\u4ef6\u540d\u662f\u5426\u5305\u542b..\u8def\u5f84\u7a7f\u8d8a\u7279\u5f81\u5b57\u7b26\uff0c\u9632\u6b62\u4efb\u610f\u5199\u5165\nfunc unzipGood(f string) bool {\n    r, err := zip.OpenReader(f)\n    if err != nil {\n        fmt.Println(\"read zip file fail\")\n        return false\n    }\n    for _, f := range r.File {\n        if !strings.Contains(f.Name, \"..\") {\n            p, _ := filepath.Abs(f.Name)\n            ioutil.WriteFile(p, []byte(\"present\"), 0640)\n        } else {\n            return false\n        }\n    }\n    return true\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#122","title":"1.2.2\u3010\u5fc5\u987b\u3011 \u6587\u4ef6\u8bbf\u95ee\u6743\u9650","text":"<ul> <li>\u6839\u636e\u521b\u5efa\u6587\u4ef6\u7684\u654f\u611f\u6027\u8bbe\u7f6e\u4e0d\u540c\u7ea7\u522b\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u4ee5\u9632\u6b62\u654f\u611f\u6570\u636e\u88ab\u4efb\u610f\u6743\u9650\u7528\u6237\u8bfb\u53d6\u3002\u4f8b\u5982\uff0c\u8bbe\u7f6e\u6587\u4ef6\u6743\u9650\u4e3a\uff1a<code>-rw-r-----</code></li> </ul> Go<pre><code>ioutil.WriteFile(p, []byte(\"present\"), 0640)\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#13","title":"1.3 \u7cfb\u7edf\u63a5\u53e3","text":"<p>1.3.1\u3010\u5fc5\u987b\u3011\u547d\u4ee4\u6267\u884c\u68c0\u67e5 - \u4f7f\u7528<code>exec.Command</code>\u3001<code>exec.CommandContext</code>\u3001<code>syscall.StartProcess</code>\u3001<code>os.StartProcess</code>\u7b49\u51fd\u6570\u65f6\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\uff08path\uff09\u76f4\u63a5\u53d6\u5916\u90e8\u8f93\u5165\u503c\u65f6\uff0c\u5e94\u4f7f\u7528\u767d\u540d\u5355\u9650\u5b9a\u53ef\u6267\u884c\u7684\u547d\u4ee4\u8303\u56f4\uff0c\u4e0d\u5141\u8bb8\u4f20\u5165<code>bash</code>\u3001<code>cmd</code>\u3001<code>sh</code>\u7b49\u547d\u4ee4\uff1b - \u4f7f\u7528<code>exec.Command</code>\u3001<code>exec.CommandContext</code>\u7b49\u51fd\u6570\u65f6\uff0c\u901a\u8fc7<code>bash</code>\u3001<code>cmd</code>\u3001<code>sh</code>\u7b49\u521b\u5efashell\uff0c-c\u540e\u7684\u53c2\u6570\uff08arg\uff09\u62fc\u63a5\u5916\u90e8\u8f93\u5165\uff0c\u5e94\u8fc7\u6ee4\\n  $  &amp;  ;  |  '  \"  ( )  `\u7b49\u6f5c\u5728\u6076\u610f\u5b57\u7b26\uff1b</p> Go<pre><code>// bad\nfunc foo() {\n    userInputedVal := \"&amp;&amp; echo 'hello'\" // \u5047\u8bbe\u5916\u90e8\u4f20\u5165\u8be5\u53d8\u91cf\u503c\n    cmdName := \"ping \" + userInputedVal\n\n    // \u672a\u5224\u65ad\u5916\u90e8\u8f93\u5165\u662f\u5426\u5b58\u5728\u547d\u4ee4\u6ce8\u5165\u5b57\u7b26\uff0c\u7ed3\u5408sh\u53ef\u9020\u6210\u547d\u4ee4\u6ce8\u5165\n    cmd := exec.Command(\"sh\", \"-c\", cmdName)\n    output, _ := cmd.CombinedOutput()\n    fmt.Println(string(output))\n\n    cmdName := \"ls\"\n    // \u672a\u5224\u65ad\u5916\u90e8\u8f93\u5165\u662f\u5426\u662f\u9884\u671f\u547d\u4ee4\n    cmd := exec.Command(cmdName)\n    output, _ := cmd.CombinedOutput()\n    fmt.Println(string(output))\n}\n\n// good\nfunc checkIllegal(cmdName string) bool {\n    if strings.Contains(cmdName, \"&amp;\") || strings.Contains(cmdName, \"|\") || strings.Contains(cmdName, \";\") ||\n        strings.Contains(cmdName, \"$\") || strings.Contains(cmdName, \"'\") || strings.Contains(cmdName, \"`\") ||\n        strings.Contains(cmdName, \"(\") || strings.Contains(cmdName, \")\") || strings.Contains(cmdName, \"\\\"\") {\n        return true\n    }\n    return false\n}\n\nfunc main() {\n    userInputedVal := \"&amp;&amp; echo 'hello'\"\n    cmdName := \"ping \" + userInputedVal\n\n    if checkIllegal(cmdName) { // \u68c0\u67e5\u4f20\u7ed9sh\u7684\u547d\u4ee4\u662f\u5426\u6709\u7279\u6b8a\u5b57\u7b26\n        return // \u5b58\u5728\u7279\u6b8a\u5b57\u7b26\u76f4\u63a5return\n    }\n\n    cmd := exec.Command(\"sh\", \"-c\", cmdName)\n    output, _ := cmd.CombinedOutput()\n    fmt.Println(string(output))\n}\n</code></pre> <p></p>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#14","title":"1.4 \u901a\u4fe1\u5b89\u5168","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#141tls","title":"1.4.1\u3010\u5fc5\u987b\u3011\u7f51\u7edc\u901a\u4fe1\u91c7\u7528TLS\u65b9\u5f0f","text":"<ul> <li>\u660e\u6587\u4f20\u8f93\u7684\u901a\u4fe1\u534f\u8bae\u76ee\u524d\u5df2\u88ab\u9a8c\u8bc1\u5b58\u5728\u8f83\u5927\u5b89\u5168\u98ce\u9669\uff0c\u88ab\u4e2d\u95f4\u4eba\u52ab\u6301\u540e\u53ef\u80fd\u5bfc\u81f4\u8bb8\u591a\u5b89\u5168\u98ce\u9669\uff0c\u56e0\u6b64\u5fc5\u987b\u91c7\u7528\u81f3\u5c11TLS\u7684\u5b89\u5168\u901a\u4fe1\u65b9\u5f0f\u4fdd\u8bc1\u901a\u4fe1\u5b89\u5168\uff0c\u4f8b\u5982gRPC/Websocket\u90fd\u4f7f\u7528TLS1.3\u3002</li> </ul> Go<pre><code>// good\nfunc main() {\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, req *http.Request) {\n        w.Header().Add(\"Strict-Transport-Security\", \"max-age=63072000; includeSubDomains\")\n        w.Write([]byte(\"This is an example server.\\n\"))\n    })\n\n    // \u670d\u52a1\u5668\u914d\u7f6e\u8bc1\u4e66\u4e0e\u79c1\u94a5\n    log.Fatal(http.ListenAndServeTLS(\":443\", \"yourCert.pem\", \"yourKey.pem\", nil))\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#142tls","title":"1.4.2\u3010\u63a8\u8350\u3011TLS\u542f\u7528\u8bc1\u4e66\u9a8c\u8bc1","text":"<ul> <li>TLS\u8bc1\u4e66\u5e94\u5f53\u662f\u6709\u6548\u7684\u3001\u672a\u8fc7\u671f\u7684\uff0c\u4e14\u914d\u7f6e\u6b63\u786e\u7684\u57df\u540d\uff0c\u751f\u4ea7\u73af\u5883\u7684\u670d\u52a1\u7aef\u5e94\u542f\u7528\u8bc1\u4e66\u9a8c\u8bc1\u3002</li> </ul> Go<pre><code>// bad\nimport (\n    \"crypto/tls\"\n    \"net/http\"\n)\n\nfunc doAuthReq(authReq *http.Request) *http.Response {\n    tr := &amp;http.Transport{\n        TLSClientConfig: &amp;tls.Config{InsecureSkipVerify: true},\n    }\n    client := &amp;http.Client{Transport: tr}\n    res, _ := client.Do(authReq)\n    return res\n}\n\n// good\nimport (\n    \"crypto/tls\"\n    \"net/http\"\n)\n\nfunc doAuthReq(authReq *http.Request) *http.Response {\n    tr := &amp;http.Transport{\n        TLSClientConfig: &amp;tls.Config{InsecureSkipVerify: false},\n    }\n    client := &amp;http.Client{Transport: tr}\n    res, _ := client.Do(authReq)\n    return res\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#15","title":"1.5 \u654f\u611f\u6570\u636e\u4fdd\u62a4","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#151","title":"1.5.1\u3010\u5fc5\u987b\u3011\u654f\u611f\u4fe1\u606f\u8bbf\u95ee","text":"<ul> <li>\u7981\u6b62\u5c06\u654f\u611f\u4fe1\u606f\u786c\u7f16\u7801\u5728\u7a0b\u5e8f\u4e2d\uff0c\u65e2\u53ef\u80fd\u4f1a\u5c06\u654f\u611f\u4fe1\u606f\u66b4\u9732\u7ed9\u653b\u51fb\u8005\uff0c\u4e5f\u4f1a\u589e\u52a0\u4ee3\u7801\u7ba1\u7406\u548c\u7ef4\u62a4\u7684\u96be\u5ea6</li> <li>\u4f7f\u7528\u914d\u7f6e\u4e2d\u5fc3\u7cfb\u7edf\u7edf\u4e00\u6258\u7ba1\u5bc6\u94a5\u7b49\u654f\u611f\u4fe1\u606f</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#152","title":"1.5.2\u3010\u5fc5\u987b\u3011\u654f\u611f\u6570\u636e\u8f93\u51fa","text":"<ul> <li>\u53ea\u8f93\u51fa\u5fc5\u8981\u7684\u6700\u5c0f\u6570\u636e\u96c6\uff0c\u907f\u514d\u591a\u4f59\u5b57\u6bb5\u66b4\u9732\u5f15\u8d77\u654f\u611f\u4fe1\u606f\u6cc4\u9732</li> <li>\u4e0d\u80fd\u5728\u65e5\u5fd7\u4fdd\u5b58\u5bc6\u7801\uff08\u5305\u62ec\u660e\u6587\u5bc6\u7801\u548c\u5bc6\u6587\u5bc6\u7801\uff09\u3001\u5bc6\u94a5\u548c\u5176\u5b83\u654f\u611f\u4fe1\u606f</li> <li>\u5bf9\u4e8e\u5fc5\u987b\u8f93\u51fa\u7684\u654f\u611f\u4fe1\u606f\uff0c\u5fc5\u987b\u8fdb\u884c\u5408\u7406\u8131\u654f\u5c55\u793a</li> </ul> Go<pre><code>// bad\nfunc serve() {\n    http.HandleFunc(\"/register\", func(w http.ResponseWriter, r *http.Request) {\n        r.ParseForm()\n        user := r.Form.Get(\"user\")\n        pw := r.Form.Get(\"password\")\n\n        log.Printf(\"Registering new user %s with password %s.\\n\", user, pw)\n    })\n    http.ListenAndServe(\":80\", nil)\n}\n\n// good\nfunc serve1() {\n    http.HandleFunc(\"/register\", func(w http.ResponseWriter, r *http.Request) {\n        r.ParseForm()\n        user := r.Form.Get(\"user\")\n        pw := r.Form.Get(\"password\")\n\n        log.Printf(\"Registering new user %s.\\n\", user)\n\n        // ...\n        use(pw)\n    })\n    http.ListenAndServe(\":80\", nil)\n}\n</code></pre> <ul> <li>\u907f\u514d\u901a\u8fc7GET\u65b9\u6cd5\u3001\u4ee3\u7801\u6ce8\u91ca\u3001\u81ea\u52a8\u586b\u5145\u3001\u7f13\u5b58\u7b49\u65b9\u5f0f\u6cc4\u9732\u654f\u611f\u4fe1\u606f</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#153","title":"1.5.3\u3010\u5fc5\u987b\u3011\u654f\u611f\u6570\u636e\u5b58\u50a8","text":"<ul> <li>\u654f\u611f\u6570\u636e\u5e94\u4f7f\u7528SHA2\u3001RSA\u7b49\u7b97\u6cd5\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8</li> <li>\u654f\u611f\u6570\u636e\u5e94\u4f7f\u7528\u72ec\u7acb\u7684\u5b58\u50a8\u5c42\uff0c\u5e76\u5728\u8bbf\u95ee\u5c42\u5f00\u542f\u8bbf\u95ee\u63a7\u5236</li> <li>\u5305\u542b\u654f\u611f\u4fe1\u606f\u7684\u4e34\u65f6\u6587\u4ef6\u6216\u7f13\u5b58\u4e00\u65e6\u4e0d\u518d\u9700\u8981\u5e94\u7acb\u523b\u5220\u9664</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#154","title":"1.5.4\u3010\u5fc5\u987b\u3011\u5f02\u5e38\u5904\u7406\u548c\u65e5\u5fd7\u8bb0\u5f55","text":"<ul> <li>\u5e94\u5408\u7406\u4f7f\u7528panic\u3001recover\u3001defer\u5904\u7406\u7cfb\u7edf\u5f02\u5e38\uff0c\u907f\u514d\u51fa\u9519\u4fe1\u606f\u8f93\u51fa\u5230\u524d\u7aef</li> </ul> Go<pre><code>defer func () {\n    if r := recover(); r != nil {\n        fmt.Println(\"Recovered in start()\")\n    }\n}()\n</code></pre> <ul> <li>\u5bf9\u5916\u73af\u5883\u7981\u6b62\u5f00\u542fdebug\u6a21\u5f0f\uff0c\u6216\u5c06\u7a0b\u5e8f\u8fd0\u884c\u65e5\u5fd7\u8f93\u51fa\u5230\u524d\u7aef</li> </ul> Bash<pre><code>// bad\ndlv --listen=:2345 --headless=true --api-version=2 debug test.go\n// good\ndlv debug test.go\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#16","title":"1.6 \u52a0\u5bc6\u89e3\u5bc6","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#161","title":"1.6.1\u3010\u5fc5\u987b\u3011\u4e0d\u5f97\u786c\u7f16\u7801\u5bc6\u7801/\u5bc6\u94a5","text":"<ul> <li>\u5728\u8fdb\u884c\u7528\u6237\u767b\u9646\uff0c\u52a0\u89e3\u5bc6\u7b97\u6cd5\u7b49\u64cd\u4f5c\u65f6\uff0c\u4e0d\u5f97\u5728\u4ee3\u7801\u91cc\u786c\u7f16\u7801\u5bc6\u94a5\u6216\u5bc6\u7801\uff0c\u53ef\u901a\u8fc7\u53d8\u6362\u7b97\u6cd5\u6216\u8005\u914d\u7f6e\u7b49\u65b9\u5f0f\u8bbe\u7f6e\u5bc6\u7801\u6216\u8005\u5bc6\u94a5\u3002</li> </ul> Go<pre><code>// bad\nconst (\n    user     = \"dbuser\"\n    password = \"s3cretp4ssword\"\n)\n\nfunc connect() *sql.DB {\n    connStr := fmt.Sprintf(\"postgres://%s:%s@localhost/pqgotest\", user, password)\n    db, err := sql.Open(\"postgres\", connStr)\n    if err != nil {\n        return nil\n    }\n    return db\n}\n\n// bad\nvar (\n    commonkey = []byte(\"0123456789abcdef\")\n)\n\nfunc AesEncrypt(plaintext string) (string, error) {\n    block, err := aes.NewCipher(commonkey)\n    if err != nil {\n        return \"\", err\n    }\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#162","title":"1.6.2\u3010\u5fc5\u987b\u3011\u5bc6\u94a5\u5b58\u50a8\u5b89\u5168","text":"<ul> <li>\u5728\u4f7f\u7528\u5bf9\u79f0\u5bc6\u7801\u7b97\u6cd5\u65f6\uff0c\u9700\u8981\u4fdd\u62a4\u597d\u52a0\u5bc6\u5bc6\u94a5\u3002\u5f53\u7b97\u6cd5\u6d89\u53ca\u654f\u611f\u3001\u4e1a\u52a1\u6570\u636e\u65f6\uff0c\u53ef\u901a\u8fc7\u975e\u5bf9\u79f0\u7b97\u6cd5\u534f\u5546\u52a0\u5bc6\u5bc6\u94a5\u3002\u5176\u4ed6\u8f83\u4e3a\u4e0d\u654f\u611f\u7684\u6570\u636e\u52a0\u5bc6\uff0c\u53ef\u4ee5\u901a\u8fc7\u53d8\u6362\u7b97\u6cd5\u7b49\u65b9\u5f0f\u4fdd\u62a4\u5bc6\u94a5\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#163","title":"1.6.3\u3010\u63a8\u8350\u3011\u4e0d\u4f7f\u7528\u5f31\u5bc6\u7801\u7b97\u6cd5","text":"<ul> <li>\u5728\u4f7f\u7528\u52a0\u5bc6\u7b97\u6cd5\u65f6\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\u52a0\u5bc6\u5f3a\u5ea6\u8f83\u5f31\u7684\u7b97\u6cd5\u3002</li> </ul> Text Only<pre><code>// bad\ncrypto/des\uff0ccrypto/md5\uff0ccrypto/sha1\uff0ccrypto/rc4\u7b49\u3002\n\n// good\ncrypto/rsa\uff0ccrypto/aes\u7b49\u3002\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#17","title":"1.7 \u6b63\u5219\u8868\u8fbe\u5f0f","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#171regexp","title":"1.7.1\u3010\u63a8\u8350\u3011\u4f7f\u7528regexp\u8fdb\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d","text":"<ul> <li>\u6b63\u5219\u8868\u8fbe\u5f0f\u7f16\u5199\u4e0d\u6070\u5f53\u53ef\u88ab\u7528\u4e8eDoS\u653b\u51fb\uff0c\u9020\u6210\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u63a8\u8350\u4f7f\u7528regexp\u5305\u8fdb\u884c\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u3002regexp\u4fdd\u8bc1\u4e86\u7ebf\u6027\u65f6\u95f4\u6027\u80fd\u548c\u4f18\u96c5\u7684\u5931\u8d25\uff1a\u5bf9\u89e3\u6790\u5668\u3001\u7f16\u8bd1\u5668\u548c\u6267\u884c\u5f15\u64ce\u90fd\u8fdb\u884c\u4e86\u5185\u5b58\u9650\u5236\u3002\u4f46regexp\u4e0d\u652f\u6301\u4ee5\u4e0b\u6b63\u5219\u8868\u8fbe\u5f0f\u7279\u6027\uff0c\u5982\u4e1a\u52a1\u4f9d\u8d56\u8fd9\u4e9b\u7279\u6027\uff0c\u5219regexp\u4e0d\u9002\u5408\u4f7f\u7528\u3002</li> <li>\u56de\u6eaf\u5f15\u7528Backreferences</li> <li>\u67e5\u770bLookaround</li> </ul> Go<pre><code>// good\nmatched, err := regexp.MatchString(`a.b`, \"aaxbb\")\nfmt.Println(matched) // true\nfmt.Println(err)     // nil\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#_2","title":"\u540e\u53f0\u7c7b","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#1_1","title":"1 \u4ee3\u7801\u5b9e\u73b0\u7c7b","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#11_1","title":"1.1 \u8f93\u5165\u6821\u9a8c","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#111_1","title":"1.1.1\u3010\u5fc5\u987b\u3011\u6309\u7c7b\u578b\u8fdb\u884c\u6570\u636e\u6821\u9a8c","text":"<ul> <li>\u6240\u6709\u5916\u90e8\u8f93\u5165\u7684\u53c2\u6570\uff0c\u5e94\u4f7f\u7528<code>validator</code>\u8fdb\u884c\u767d\u540d\u5355\u6821\u9a8c\uff0c\u6821\u9a8c\u5185\u5bb9\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6570\u636e\u957f\u5ea6\u3001\u6570\u636e\u8303\u56f4\u3001\u6570\u636e\u7c7b\u578b\u4e0e\u683c\u5f0f\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u7684\u5e94\u5f53\u62d2\u7edd</li> </ul> Go<pre><code>// good\nimport (\n    \"fmt\"\n    \"github.com/go-playground/validator/v10\"\n)\n\nvar validate *validator.Validate\n\nfunc validateVariable() {\n    myEmail := \"abc@tencent.com\"\n    errs := validate.Var(myEmail, \"required,email\")\n    if errs != nil {\n        fmt.Println(errs)\n        return\n        //\u505c\u6b62\u6267\u884c\n    }\n    // \u9a8c\u8bc1\u901a\u8fc7\uff0c\u7ee7\u7eed\u6267\u884c\n    ...\n}\n\nfunc main() {\n    validate = validator.New()\n    validateVariable()\n}\n</code></pre> <ul> <li>\u65e0\u6cd5\u901a\u8fc7\u767d\u540d\u5355\u6821\u9a8c\u7684\u5e94\u4f7f\u7528<code>html.EscapeString</code>\u3001<code>text/template</code>\u6216<code>bluemonday</code>\u5bf9<code>&lt;, &gt;, &amp;, ',\"</code>\u7b49\u5b57\u7b26\u8fdb\u884c\u8fc7\u6ee4\u6216\u7f16\u7801</li> </ul> Go<pre><code>import (\n    \"text/template\"\n)\n\n// TestHTMLEscapeString HTML\u7279\u6b8a\u5b57\u7b26\u8f6c\u4e49\nfunc main(inputValue string) string {\n    escapedResult := template.HTMLEscapeString(inputValue)\n    return escapedResult\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#12-sql","title":"1.2 SQL\u64cd\u4f5c","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#121sql","title":"1.2.1\u3010\u5fc5\u987b\u3011SQL\u8bed\u53e5\u9ed8\u8ba4\u4f7f\u7528\u9884\u7f16\u8bd1\u5e76\u7ed1\u5b9a\u53d8\u91cf","text":"<ul> <li>\u4f7f\u7528<code>database/sql</code>\u7684prepare\u3001Query\u6216\u4f7f\u7528GORM\u7b49ORM\u6267\u884cSQL\u64cd\u4f5c</li> </ul> Go<pre><code>import (\n    \"github.com/jinzhu/gorm\"\n    _ \"github.com/jinzhu/gorm/dialects/sqlite\"\n)\n\ntype Product struct {\n    gorm.Model\n    Code  string\n    Price uint\n}\n\n...\nvar product Product\n...\ndb.First(&amp;product, 1)\n</code></pre> <ul> <li>\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\uff0c\u7981\u6b62\u62fc\u63a5SQL\u8bed\u53e5\uff0c\u53e6\u5916\u5bf9\u4e8e\u4f20\u5165\u53c2\u6570\u7528\u4e8eorder by\u6216\u8868\u540d\u7684\u9700\u8981\u901a\u8fc7\u6821\u9a8c</li> </ul> Go<pre><code>// bad\nimport (\n    \"database/sql\"\n    \"fmt\"\n    \"net/http\"\n)\n\nfunc handler(db *sql.DB, req *http.Request) {\n    q := fmt.Sprintf(\"SELECT ITEM,PRICE FROM PRODUCT WHERE ITEM_CATEGORY='%s' ORDER BY PRICE\",\n        req.URL.Query()[\"category\"])\n    db.Query(q)\n}\n\n// good\nfunc handlerGood(db *sql.DB, req *http.Request) {\n    // \u4f7f\u7528?\u5360\u4f4d\u7b26\n    q := \"SELECT ITEM,PRICE FROM PRODUCT WHERE ITEM_CATEGORY='?' ORDER BY PRICE\"\n    db.Query(q, req.URL.Query()[\"category\"])\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#13_1","title":"1.3 \u7f51\u7edc\u8bf7\u6c42","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#131","title":"1.3.1\u3010\u5fc5\u987b\u3011\u8d44\u6e90\u8bf7\u6c42\u8fc7\u6ee4\u9a8c\u8bc1","text":"<ul> <li> <p>\u4f7f\u7528<code>\"net/http\"</code>\u4e0b\u7684\u65b9\u6cd5<code>http.Get(url)</code>\u3001<code>http.Post(url, contentType, body)</code>\u3001<code>http.Head(url)</code>\u3001<code>http.PostForm(url, data)</code>\u3001<code>http.Do(req)</code>\u65f6\uff0c\u5982\u53d8\u91cf\u503c\u5916\u90e8\u53ef\u63a7\uff08\u6307\u4ece\u53c2\u6570\u4e2d\u52a8\u6001\u83b7\u53d6\uff09\uff0c\u5e94\u5bf9\u8bf7\u6c42\u76ee\u6807\u8fdb\u884c\u4e25\u683c\u7684\u5b89\u5168\u6821\u9a8c\u3002</p> </li> <li> <p>\u5982\u8bf7\u6c42\u8d44\u6e90\u57df\u540d\u5f52\u5c5e\u56fa\u5b9a\u7684\u8303\u56f4\uff0c\u5982\u53ea\u5141\u8bb8<code>a.qq.com</code>\u548c<code>b.qq.com</code>\uff0c\u5e94\u505a\u767d\u540d\u5355\u9650\u5236\u3002\u5982\u4e0d\u9002\u7528\u767d\u540d\u5355\uff0c\u5219\u63a8\u8350\u7684\u6821\u9a8c\u903b\u8f91\u6b65\u9aa4\u662f\uff1a</p> </li> <li> <p>\u7b2c 1 \u6b65\u3001\u53ea\u5141\u8bb8HTTP\u6216HTTPS\u534f\u8bae</p> </li> <li> <p>\u7b2c 2 \u6b65\u3001\u89e3\u6790\u76ee\u6807URL\uff0c\u83b7\u53d6\u5176HOST</p> </li> <li> <p>\u7b2c 3 \u6b65\u3001\u89e3\u6790HOST\uff0c\u83b7\u53d6HOST\u6307\u5411\u7684IP\u5730\u5740\u8f6c\u6362\u6210Long\u578b</p> </li> <li> <p>\u7b2c 4 \u6b65\u3001\u68c0\u67e5IP\u5730\u5740\u662f\u5426\u4e3a\u5185\u7f51IP\uff0c\u7f51\u6bb5\u6709\uff1a</p> Text Only<pre><code>// \u4ee5RFC\u5b9a\u4e49\u7684\u4e13\u6709\u7f51\u7edc\u4e3a\u4f8b\uff0c\u5982\u6709\u81ea\u5b9a\u4e49\u79c1\u6709\u7f51\u6bb5\u4ea6\u5e94\u52a0\u5165\u7981\u6b62\u8bbf\u95ee\u5217\u8868\u3002\n10.0.0.0/8\n172.16.0.0/12\n192.168.0.0/16\n127.0.0.0/8\n</code></pre> </li> <li> <p>\u7b2c 5 \u6b65\u3001\u8bf7\u6c42URL</p> </li> <li> <p>\u7b2c 6 \u6b65\u3001\u5982\u6709\u8df3\u8f6c\uff0c\u8df3\u8f6c\u540e\u6267\u884c1\uff0c\u5426\u5219\u7ed1\u5b9a\u7ecf\u6821\u9a8c\u7684ip\u548c\u57df\u540d\uff0c\u5bf9URL\u53d1\u8d77\u8bf7\u6c42</p> </li> <li> <p>\u5b98\u65b9\u5e93<code>encoding/xml</code>\u4e0d\u652f\u6301\u5916\u90e8\u5b9e\u4f53\u5f15\u7528\uff0c\u4f7f\u7528\u8be5\u5e93\u53ef\u907f\u514dxxe\u6f0f\u6d1e</p> </li> </ul> Go<pre><code>import (\n    \"encoding/xml\"\n    \"fmt\"\n    \"os\"\n)\n\nfunc main() {\n    type Person struct {\n        XMLName  xml.Name `xml:\"person\"`\n        Id       int      `xml:\"id,attr\"`\n        UserName string   `xml:\"name&gt;first\"`\n        Comment  string   `xml:\",comment\"`\n    }\n\n    v := &amp;Person{Id: 13, UserName: \"John\"}\n    v.Comment = \" Need more details. \"\n\n    enc := xml.NewEncoder(os.Stdout)\n    enc.Indent(\"  \", \"    \")\n    if err := enc.Encode(v); err != nil {\n        fmt.Printf(\"error: %v\\n\", err)\n    }\n\n}\n</code></pre> <p></p>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#14_1","title":"1.4 \u670d\u52a1\u5668\u7aef\u6e32\u67d3","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#141","title":"1.4.1\u3010\u5fc5\u987b\u3011\u6a21\u677f\u6e32\u67d3\u8fc7\u6ee4\u9a8c\u8bc1","text":"<ul> <li>\u4f7f\u7528<code>text/template</code>\u6216\u8005<code>html/template</code>\u6e32\u67d3\u6a21\u677f\u65f6\u7981\u6b62\u5c06\u5916\u90e8\u8f93\u5165\u53c2\u6570\u5f15\u5165\u6a21\u677f\uff0c\u6216\u4ec5\u5141\u8bb8\u5f15\u5165\u767d\u540d\u5355\u5185\u5b57\u7b26\u3002</li> </ul> Go<pre><code>// bad\nfunc handler(w http.ResponseWriter, r *http.Request) {\n    r.ParseForm()\n    x := r.Form.Get(\"name\")\n\n    var tmpl = `&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;\n    &lt;form action=\"/\" method=\"post\"&gt;\n        First name:&lt;br&gt;\n    &lt;input type=\"text\" name=\"name\" value=\"\"&gt;\n    &lt;input type=\"submit\" value=\"Submit\"&gt;\n    &lt;/form&gt;&lt;p&gt;` + x + ` &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;`\n\n    t := template.New(\"main\")\n    t, _ = t.Parse(tmpl)\n    t.Execute(w, \"Hello\")\n}\n\n// good\nimport (\n    \"fmt\"\n    \"github.com/go-playground/validator/v10\"\n)\n\nvar validate *validator.Validate\nvalidate = validator.New()\n\nfunc validateVariable(val) {\n    errs := validate.Var(val, \"gte=1,lte=100\") // \u9650\u5236\u5fc5\u987b\u662f1-100\u7684\u6b63\u6574\u6570\n    if errs != nil {\n        fmt.Println(errs)\n        return false\n    }\n    return true\n}\n\nfunc handler(w http.ResponseWriter, r *http.Request) {\n    r.ParseForm()\n    x := r.Form.Get(\"name\")\n\n    if validateVariable(x) {\n        var tmpl = `&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;\n            &lt;form action=\"/\" method=\"post\"&gt;\n            First name:&lt;br&gt;\n            &lt;input type=\"text\" name=\"name\" value=\"\"&gt;\n            &lt;input type=\"submit\" value=\"Submit\"&gt;\n            &lt;/form&gt;&lt;p&gt;` + x + ` &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;`\n        t := template.New(\"main\")\n        t, _ = t.Parse(tmpl)\n        t.Execute(w, \"Hello\")\n    } else {\n        // ...\n    }\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#15-web","title":"1.5 Web\u8de8\u57df","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#151cors","title":"1.5.1\u3010\u5fc5\u987b\u3011\u8de8\u57df\u8d44\u6e90\u5171\u4eabCORS\u9650\u5236\u8bf7\u6c42\u6765\u6e90","text":"<ul> <li>CORS\u8bf7\u6c42\u4fdd\u62a4\u4e0d\u5f53\u53ef\u5bfc\u81f4\u654f\u611f\u4fe1\u606f\u6cc4\u6f0f\uff0c\u56e0\u6b64\u5e94\u5f53\u4e25\u683c\u8bbe\u7f6eAccess-Control-Allow-Origin\u4f7f\u7528\u540c\u6e90\u7b56\u7565\u8fdb\u884c\u4fdd\u62a4\u3002</li> </ul> Go<pre><code>// good\nc := cors.New(cors.Options{\n    AllowedOrigins:   []string{\"http://qq.com\", \"https://qq.com\"},\n    AllowCredentials: true,\n    Debug:            false,\n})\n\n// \u5f15\u5165\u4e2d\u95f4\u4ef6\nhandler = c.Handler(handler)\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#16_1","title":"1.6 \u54cd\u5e94\u8f93\u51fa","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#161-http","title":"1.6.1 \u3010\u5fc5\u987b\u3011\u8bbe\u7f6e\u6b63\u786e\u7684HTTP\u54cd\u5e94\u5305\u7c7b\u578b","text":"<ul> <li>\u54cd\u5e94\u5934Content-Type\u4e0e\u5b9e\u9645\u54cd\u5e94\u5185\u5bb9\uff0c\u5e94\u4fdd\u6301\u4e00\u81f4\u3002\u5982\uff1aAPI\u54cd\u5e94\u6570\u636e\u7c7b\u578b\u662fjson\uff0c\u5219\u54cd\u5e94\u5934\u4f7f\u7528<code>application/json</code>\uff1b\u82e5\u4e3axml\uff0c\u5219\u8bbe\u7f6e\u4e3a<code>text/xml</code>\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#162_1","title":"1.6.2 \u3010\u5fc5\u987b\u3011\u6dfb\u52a0\u5b89\u5168\u54cd\u5e94\u5934","text":"<ul> <li>\u6240\u6709\u63a5\u53e3\u3001\u9875\u9762\uff0c\u6dfb\u52a0\u54cd\u5e94\u5934 <code>X-Content-Type-Options: nosniff</code>\u3002</li> <li>\u6240\u6709\u63a5\u53e3\u3001\u9875\u9762\uff0c\u6dfb\u52a0\u54cd\u5e94\u5934<code>X-Frame-Options</code>\u3002\u6309\u9700\u5408\u7406\u8bbe\u7f6e\u5176\u5141\u8bb8\u8303\u56f4\uff0c\u5305\u62ec\uff1a<code>DENY</code>\u3001<code>SAMEORIGIN</code>\u3001<code>ALLOW-FROM origin</code>\u3002\u7528\u6cd5\u53c2\u8003\uff1aMDN\u6587\u6863</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#163http","title":"1.6.3\u3010\u5fc5\u987b\u3011\u5916\u90e8\u8f93\u5165\u62fc\u63a5\u5230HTTP\u54cd\u5e94\u5934\u4e2d\u9700\u8fdb\u884c\u8fc7\u6ee4","text":"<ul> <li>\u5e94\u5c3d\u91cf\u907f\u514d\u5916\u90e8\u53ef\u63a7\u53c2\u6570\u62fc\u63a5\u5230HTTP\u54cd\u5e94\u5934\u4e2d\uff0c\u5982\u4e1a\u52a1\u9700\u8981\u5219\u9700\u8981\u8fc7\u6ee4\u6389<code>\\r</code>\u3001<code>\\n</code>\u7b49\u6362\u884c\u7b26\uff0c\u6216\u8005\u62d2\u7edd\u643a\u5e26\u6362\u884c\u7b26\u53f7\u7684\u5916\u90e8\u8f93\u5165\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#164response","title":"1.6.4\u3010\u5fc5\u987b\u3011\u5916\u90e8\u8f93\u5165\u62fc\u63a5\u5230response\u9875\u9762\u524d\u8fdb\u884c\u7f16\u7801\u5904\u7406","text":"<ul> <li>\u76f4\u51fahtml\u9875\u9762\u6216\u4f7f\u7528\u6a21\u677f\u751f\u6210html\u9875\u9762\u7684\uff0c\u63a8\u8350\u4f7f\u7528<code>text/template</code>\u81ea\u52a8\u7f16\u7801\uff0c\u6216\u8005\u4f7f\u7528<code>html.EscapeString</code>\u6216<code>text/template</code>\u5bf9<code>&lt;, &gt;, &amp;, ',\"</code>\u7b49\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\u3002</li> </ul> Go<pre><code>import (\n    \"html/template\"\n)\n\nfunc outtemplate(w http.ResponseWriter, r *http.Request) {\n    param1 := r.URL.Query().Get(\"param1\")\n    tmpl := template.New(\"hello\")\n    tmpl, _ = tmpl.Parse(`{{define \"T\"}}{{.}}{{end}}`)\n    tmpl.ExecuteTemplate(w, \"T\", param1)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#17_1","title":"1.7 \u4f1a\u8bdd\u7ba1\u7406","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#171session","title":"1.7.1\u3010\u5fc5\u987b\u3011\u5b89\u5168\u7ef4\u62a4session\u4fe1\u606f","text":"<ul> <li>\u7528\u6237\u767b\u5f55\u65f6\u5e94\u91cd\u65b0\u751f\u6210session\uff0c\u9000\u51fa\u767b\u5f55\u540e\u5e94\u6e05\u7406session\u3002 Go<pre><code>import (\n    \"github.com/gorilla/handlers\"\n    \"github.com/gorilla/mux\"\n    \"net/http\"\n)\n\n// \u521b\u5efacookie\nfunc setToken(res http.ResponseWriter, req *http.Request) {\n    expireToken := time.Now().Add(time.Minute * 30).Unix()\n    expireCookie := time.Now().Add(time.Minute * 30)\n\n    //...\n\n    cookie := http.Cookie{\n        Name:     \"Auth\",\n        Value:    signedToken,\n        Expires:  expireCookie, // \u8fc7\u671f\u5931\u6548\n        HttpOnly: true,\n        Path:     \"/\",\n        Domain:   \"127.0.0.1\",\n        Secure:   true,\n    }\n\n    http.SetCookie(res, &amp;cookie)\n    http.Redirect(res, req, \"/profile\", 307)\n}\n\n// \u5220\u9664cookie\nfunc logout(res http.ResponseWriter, req *http.Request) {\n    deleteCookie := http.Cookie{\n        Name:    \"Auth\",\n        Value:   \"none\",\n        Expires: time.Now(),\n    }\n    http.SetCookie(res, &amp;deleteCookie)\n    return\n}\n</code></pre></li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#172csrf","title":"1.7.2\u3010\u5fc5\u987b\u3011CSRF\u9632\u62a4","text":"<ul> <li>\u6d89\u53ca\u7cfb\u7edf\u654f\u611f\u64cd\u4f5c\u6216\u53ef\u8bfb\u53d6\u654f\u611f\u4fe1\u606f\u7684\u63a5\u53e3\u5e94\u6821\u9a8c<code>Referer</code>\u6216\u6dfb\u52a0<code>csrf_token</code>\u3002</li> </ul> Go<pre><code>// good\nimport (\n    \"github.com/gorilla/csrf\"\n    \"github.com/gorilla/mux\"\n    \"net/http\"\n)\n\nfunc main() {\n    r := mux.NewRouter()\n    r.HandleFunc(\"/signup\", ShowSignupForm)\n    r.HandleFunc(\"/signup/post\", SubmitSignupForm)\n    // \u4f7f\u7528csrf_token\u9a8c\u8bc1\n    http.ListenAndServe(\":8000\",\n        csrf.Protect([]byte(\"32-byte-long-auth-key\"))(r))\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#18","title":"1.8 \u8bbf\u95ee\u63a7\u5236","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#181","title":"1.8.1\u3010\u5fc5\u987b\u3011\u9ed8\u8ba4\u9274\u6743","text":"<ul> <li> <p>\u9664\u975e\u8d44\u6e90\u5b8c\u5168\u53ef\u5bf9\u5916\u5f00\u653e\uff0c\u5426\u5219\u7cfb\u7edf\u9ed8\u8ba4\u8fdb\u884c\u8eab\u4efd\u8ba4\u8bc1\uff0c\u4f7f\u7528\u767d\u540d\u5355\u7684\u65b9\u5f0f\u653e\u5f00\u4e0d\u9700\u8981\u8ba4\u8bc1\u7684\u63a5\u53e3\u6216\u9875\u9762\u3002</p> </li> <li> <p>\u6839\u636e\u8d44\u6e90\u7684\u673a\u5bc6\u7a0b\u5ea6\u548c\u7528\u6237\u89d2\u8272\uff0c\u4ee5\u6700\u5c0f\u6743\u9650\u539f\u5219\uff0c\u8bbe\u7f6e\u4e0d\u540c\u7ea7\u522b\u7684\u6743\u9650\uff0c\u5982\u5b8c\u5168\u516c\u5f00\u3001\u767b\u5f55\u53ef\u8bfb\u3001\u767b\u5f55\u53ef\u5199\u3001\u7279\u5b9a\u7528\u6237\u53ef\u8bfb\u3001\u7279\u5b9a\u7528\u6237\u53ef\u5199\u7b49</p> </li> <li> <p>\u6d89\u53ca\u7528\u6237\u81ea\u8eab\u76f8\u5173\u7684\u6570\u636e\u7684\u8bfb\u5199\u5fc5\u987b\u9a8c\u8bc1\u767b\u5f55\u6001\u7528\u6237\u8eab\u4efd\u53ca\u5176\u6743\u9650\uff0c\u907f\u514d\u8d8a\u6743\u64cd\u4f5c</p> </li> </ul> SQL<pre><code>-- \u4f2a\u4ee3\u7801\nselect id from table where id=:id and userid=session.userid\n</code></pre> <ul> <li>\u6ca1\u6709\u72ec\u7acb\u8d26\u53f7\u4f53\u7cfb\u7684\u5916\u7f51\u670d\u52a1\u4f7f\u7528<code>QQ</code>\u6216<code>\u5fae\u4fe1</code>\u767b\u5f55\uff0c\u5185\u7f51\u670d\u52a1\u4f7f\u7528<code>\u7edf\u4e00\u767b\u5f55\u670d\u52a1</code>\u767b\u5f55\uff0c\u5176\u4ed6\u4f7f\u7528\u8d26\u53f7\u5bc6\u7801\u767b\u5f55\u7684\u670d\u52a1\u9700\u8981\u589e\u52a0\u9a8c\u8bc1\u7801\u7b49\u4e8c\u6b21\u9a8c\u8bc1</li> </ul> <p></p>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#19","title":"1.9 \u5e76\u53d1\u4fdd\u62a4","text":"","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#191","title":"1.9.1\u3010\u5fc5\u987b\u3011\u7981\u6b62\u5728\u95ed\u5305\u4e2d\u76f4\u63a5\u8c03\u7528\u5faa\u73af\u53d8\u91cf","text":"<ul> <li>\u5728\u5faa\u73af\u4e2d\u542f\u52a8\u534f\u7a0b\uff0c\u5f53\u534f\u7a0b\u4e2d\u4f7f\u7528\u5230\u4e86\u5faa\u73af\u7684\u7d22\u5f15\u503c\uff0c\u7531\u4e8e\u591a\u4e2a\u534f\u7a0b\u540c\u65f6\u4f7f\u7528\u540c\u4e00\u4e2a\u53d8\u91cf\u4f1a\u4ea7\u751f\u6570\u636e\u7ade\u4e89\uff0c\u9020\u6210\u6267\u884c\u7ed3\u679c\u5f02\u5e38\u3002</li> </ul> Go<pre><code>// bad\nfunc main() {\n    runtime.GOMAXPROCS(runtime.NumCPU())\n    var group sync.WaitGroup\n\n    for i := 0; i &lt; 5; i++ {\n        group.Add(1)\n        go func() {\n            defer group.Done()\n            fmt.Printf(\"%-2d\", i) // \u8fd9\u91cc\u6253\u5370\u7684i\u4e0d\u662f\u6240\u671f\u671b\u7684\n        }()\n    }\n    group.Wait()\n}\n\n// good\nfunc main() {\n    runtime.GOMAXPROCS(runtime.NumCPU())\n    var group sync.WaitGroup\n\n    for i := 0; i &lt; 5; i++ {\n        group.Add(1)\n        go func(j int) {\n            defer func() {\n                if r := recover(); r != nil {\n                    fmt.Println(\"Recovered in start()\")\n                }\n                group.Done()\n            }()\n            fmt.Printf(\"%-2d\", j) // \u95ed\u5305\u5185\u90e8\u4f7f\u7528\u5c40\u90e8\u53d8\u91cf\n        }(i) // \u628a\u5faa\u73af\u53d8\u91cf\u663e\u5f0f\u5730\u4f20\u7ed9\u534f\u7a0b\n    }\n    group.Wait()\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#192map","title":"1.9.2\u3010\u5fc5\u987b\u3011\u7981\u6b62\u5e76\u53d1\u5199map","text":"<ul> <li>\u5e76\u53d1\u5199map\u5bb9\u6613\u9020\u6210\u7a0b\u5e8f\u5d29\u6e83\u5e76\u5f02\u5e38\u9000\u51fa\uff0c\u5efa\u8bae\u52a0\u9501\u4fdd\u62a4 Go<pre><code>// bad\nfunc main() {\n    m := make(map[int]int)\n    // \u5e76\u53d1\u8bfb\u5199\n    go func() {\n        for {\n            _ = m[1]\n        }\n    }()\n    go func() {\n        for {\n            m[2] = 1\n        }\n    }()\n    select {}\n}\n</code></pre></li> </ul>","tags":["Go"]},{"location":"golang/gobestpractices/go_security_guide/#193","title":"1.9.3\u3010\u5fc5\u987b\u3011\u786e\u4fdd\u5e76\u53d1\u5b89\u5168","text":"<p>\u654f\u611f\u64cd\u4f5c\u5982\u679c\u672a\u4f5c\u5e76\u53d1\u5b89\u5168\u9650\u5236\uff0c\u53ef\u5bfc\u81f4\u6570\u636e\u8bfb\u5199\u5f02\u5e38\uff0c\u9020\u6210\u4e1a\u52a1\u903b\u8f91\u9650\u5236\u88ab\u7ed5\u8fc7\u3002\u53ef\u901a\u8fc7\u540c\u6b65\u9501\u6216\u8005\u539f\u5b50\u64cd\u4f5c\u8fdb\u884c\u9632\u62a4\u3002</p> <p>\u901a\u8fc7\u540c\u6b65\u9501\u5171\u4eab\u5185\u5b58</p> <p>Go<pre><code>// good\nvar count int\n\nfunc Count(lock *sync.Mutex) {\n    lock.Lock() // \u52a0\u5199\u9501\n    count++\n    fmt.Println(count)\n    lock.Unlock() // \u89e3\u5199\u9501\uff0c\u4efb\u4f55\u4e00\u4e2aLock()\u6216RLock()\u5747\u9700\u8981\u4fdd\u8bc1\u5bf9\u5e94\u6709Unlock()\u6216RUnlock()\n}\n\nfunc main() {\n    lock := &amp;sync.Mutex{}\n    for i := 0; i &lt; 10; i++ {\n        go Count(lock) // \u4f20\u9012\u6307\u9488\u662f\u4e3a\u4e86\u9632\u6b62\u51fd\u6570\u5185\u7684\u9501\u548c\u8c03\u7528\u9501\u4e0d\u4e00\u81f4\n    }\n    for {\n        lock.Lock()\n        c := count\n        lock.Unlock()\n        runtime.Gosched() // \u4ea4\u51fa\u65f6\u95f4\u7247\u7ed9\u534f\u7a0b\n        if c &gt; 10 {\n            break\n        }\n    }\n}\n</code></pre> - \u4f7f\u7528<code>sync/atomic</code>\u6267\u884c\u539f\u5b50\u64cd\u4f5c</p> Go<pre><code>// good\nimport (\n    \"sync\"\n    \"sync/atomic\"\n)\n\nfunc main() {\n    type Map map[string]string\n    var m atomic.Value\n    m.Store(make(Map))\n    var mu sync.Mutex // used only by writers\n    read := func(key string) (val string) {\n        m1 := m.Load().(Map)\n        return m1[key]\n    }\n    insert := func(key, val string) {\n        mu.Lock() // \u4e0e\u6f5c\u5728\u5199\u5165\u540c\u6b65\n        defer mu.Unlock()\n        m1 := m.Load().(Map) // \u5bfc\u5165struct\u5f53\u524d\u6570\u636e\n        m2 := make(Map)      // \u521b\u5efa\u65b0\u503c\n        for k, v := range m1 {\n            m2[k] = v\n        }\n        m2[key] = val\n        m.Store(m2) // \u7528\u65b0\u7684\u66ff\u4ee3\u5f53\u524d\u5bf9\u8c61\n    }\n    _, _ = read, insert\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/","title":"Go\u7684\u57fa\u672c\u77e5\u8bc6\u70b9","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#25","title":"25\u4e2a\u5173\u952e\u5b57","text":"Go<pre><code>break      default       func     interface   select\ncase       defer         go       map         struct\nchan       else          goto     package     switch\nconst      fallthrough   if       range       type\ncontinue   for           import   return      var\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_1","title":"\u5185\u5efa\u7c7b\u578b","text":"Go<pre><code>int       int8          int16         int32        int64\nuint      uint8         uint16        uint32       uint64   uintptr\nfloat32   float64       complex128    complex64\nbool      byte(uint8)   rune(int32)   string       error\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_2","title":"\u5185\u5efa\u5e38\u91cf","text":"Go<pre><code>true false iota nil\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_3","title":"\u5185\u5efa\u51fd\u6570","text":"Go<pre><code>make      len      cap    new     append    copy     close  delete\ncomplex   real     imag\npanic     recover\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_4","title":"\u5e38\u7528\u57fa\u672c\u547d\u4ee4","text":"Text Only<pre><code>go build main.go \n  \u7f16\u8bd1\u6e90\u7801\u6587\u4ef6\u548c\u5f53\u524d\u76ee\u5f55\u7684\u4ee3\u7801\u5305\n  \u7f16\u8bd1\u547d\u4ee4\u6e90\u7801\u6587\u4ef6\u540e\uff0c\u521b\u5efa\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\n  -o: output \u6307\u5b9a\u7f16\u8bd1\u8f93\u51fa\u7684\u540d\u79f0\uff0c\u4ee3\u66ff\u9ed8\u8ba4\u7684\u5305\u540d\u3002\n  -i: install \u5b89\u88c5\u4f5c\u4e3a\u76ee\u6807\u7684\u4f9d\u8d56\u5173\u7cfb\u7684\u5305(\u7528\u4e8e\u589e\u91cf\u7f16\u8bd1\u63d0\u901f)\u3002\n\ngo run main.go \u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c Go \u7a0b\u5e8f\u3002\n  \u7528\u4e8e\u8fd0\u884c\u547d\u4ee4\u6e90\u7801\u6587\u4ef6\n  \u53ea\u80fd\u63a5\u53d7\u4e00\u4e2a\u547d\u4ee4\u6e90\u7801\u6587\u4ef6\u4ee5\u53ca\u82e5\u5e72\u4e2a\u5e93\u6e90\u7801\u6587\u4ef6\u4f5c\u4e3a\u6587\u4ef6\u53c2\u6570\n  -a \u5f3a\u5236\u7f16\u8bd1\u76f8\u5173\u4ee3\u7801\n  -p [n] \u5e76\u884c\u7f16\u8bd1\n  -v \u5c55\u793a\u88ab\u7f16\u8bd1\u7684\u4ee3\u7801\u5305\u540d\u79f0\n  -work \u4e0d\u5220\u9664\u521b\u5efa\u7684\u4e34\u65f6\u76ee\u5f55  \n\ngo install\n  \u7f16\u8bd1\u548c\u5b89\u88c5\u4ee3\u7801\u5305\u6216\u6e90\u7801\u6587\u4ef6\n  \u5b89\u88c5\u4ee3\u7801\u5305\u4f1a\u5728\u5de5\u4f5c\u533a/pkg/\u5e73\u53f0\u76ee\u5f55\u751f\u6210\u5f52\u6863\u6587\u4ef6\n  \u5b89\u88c5\u547d\u4ee4\u6e90\u7801\u6587\u4ef6\u4f1a\u5728 bin\u76ee\u5f55\u4e0b\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\n\ngo get\n  \u4ece\u8fdc\u7a0b\u4ee3\u7801\u4ed3\u5e93\u62c9\u53d6\u4ee3\u7801\u5305,\u62c9\u53d6\u5230 GOPATH \u7684 src \u76ee\u5f55\u4e2d\n  -u \u66f4\u65b0\u5df2\u5b58\u5728\u7684\u4ee3\u7801\u5305\n  \u7528\u5bfc\u5165\u8def\u5f84\u7f16\u8bd1\u7a0b\u5e8f\u65f6\uff0cgo build \u547d\u4ee4\u4f1a\u4f7f\u7528 GOPATH \u7684\u8bbe\u7f6e\uff0c\u5728\u78c1\u76d8\u4e0a\u641c\u7d22\u8fd9\u4e2a\u5305\u3002\u4e8b\u5b9e\u4e0a\uff0c \u8fd9\u4e2a\u5bfc\u5165\u8def\u5f84\u4ee3\u8868\u4e00\u4e2a URL\uff0c\u6307\u5411 GitHub \u4e0a\u7684\u4ee3\u7801\u5e93\u3002\u5982\u679c\u8def\u5f84\u5305\u542b URL\uff0c\u53ef\u4ee5\u4f7f\u7528 Go \u5de5\u5177\u94fe\u4ece DVCS \u83b7\u53d6\u5305\uff0c\u5e76\u628a\u5305\u7684\u6e90\u4ee3\u7801\u4fdd\u5b58\u5728 GOPATH \u6307\u5411\u7684\u8def\u5f84\u91cc\u4e0e URL \u5339\u914d\u7684\u76ee\u5f55\u91cc\u3002\u8fd9\u4e2a\u83b7\u53d6\u8fc7\u7a0b \u4f7f\u7528 go get \u547d\u4ee4\u5b8c\u6210\u3002go get \u5c06\u83b7\u53d6\u4efb\u610f\u6307\u5b9a\u7684 URL \u7684\u5305\uff0c\u6216\u8005\u4e00\u4e2a\u5df2\u7ecf\u5bfc\u5165\u7684\u5305\u6240\u4f9d\u8d56\u7684\u5176 \u4ed6\u5305\u3002\u7531\u4e8ego get\u7684\u8fd9\u79cd\u9012\u5f52\u7279\u6027\uff0c\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u626b\u63cf\u67d0\u4e2a\u5305\u7684\u6e90\u7801\u6811\uff0c\u83b7\u53d6\u80fd\u627e\u5230\u7684\u6240\u6709\u4f9d\u8d56\u5305\u3002\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_5","title":"\u5e38\u7528\u8f6c\u6362\u7b26","text":"<ul> <li>\u5f52\u7eb3\uff1a</li> </ul> \u683c\u5f0f \u8bf4\u660e %% \u4e00\u4e2a%\u5b57\u9762\u91cf %b \u4e00\u4e2a\u4e8c\u8fdb\u5236\u6574\u6570\u503c\uff08\u57fa\u6570\u4e3a2\uff09\uff0c\u6216\u662f\u4e00\u4e2a\uff08\u9ad8\u7ea7\u7684\uff09\u7528\u79d1\u5b66\u8ba1\u6570\u6cd5\u8868\u793a\u7684\u6307\u6570\u4e3a2\u7684\u6d6e\u70b9\u6570 <code>%c</code> \u5b57\u7b26\u578b\uff0c\u53ef\u4ee5\u5427\u8f93\u5165\u7684\u6570\u5b57\u6309\u7167ASCII\u7801\u76f8\u5e94\u8f6c\u6362\u4e3a\u5bf9\u5e94\u5b57\u7b26 <code>%d</code> \u4e00\u4e2a\u5341\u8fdb\u5236\u6570\u503c\uff08\u57fa\u6570\u4e3a10\uff09 %e \u4ee5\u79d1\u5b66\u8ba1\u6570\u6cd5e\u8868\u793a\u7684\u6d6e\u70b9\u6570\u6216\u8005\u590d\u6570\u503c %E \u4ee5\u79d1\u5b66\u8ba1\u6570\u6cd5E\u8868\u793a\u7684\u6d6e\u70b9\u6570\u6216\u8005\u590d\u6570\u503c %f \u4ee5\u6807\u51c6\u8ba1\u6570\u6cd5\u8868\u793a\u7684\u6d6e\u70b9\u6570\u6216\u8005\u590d\u6570\u503c %g \u4ee5%e\u6216%f\u8868\u793a\u7684\u6d6e\u70b9\u6570\u6216\u590d\u6570\uff0c\u4efb\u4f55\u4e00\u4e2a\u90fd\u4ee5\u6700\u4e3a\u7d27\u51d1\u7684\u65b9\u5f0f\u8f93\u51fa %G \u4ee5%E\u6216%f\u8868\u793a\u7684\u6d6e\u70b9\u6570\u6216\u590d\u6570\uff0c\u4efb\u4f55\u4e00\u4e2a\u90fd\u4ee5\u6700\u4e3a\u7d27\u51d1\u7684\u65b9\u5f0f\u8f93\u51fa %o \u4e00\u4e2a\u4ee5\u516b\u8fdb\u5236\u8868\u793a\u7684\u6570\u5b57\uff08\u57fa\u6570\u4e3a8\uff09 %p \u4ee5\u5341\u516d\u8fdb\u5236\uff08\u57fa\u6570\u4e3a16\uff09\u8868\u793a\u7684\u4e00\u4e2a\u503c\u7684\u5730\u5740\uff0c\u524d\u7f00\u4e3a0x\uff0c\u5b57\u6bcd\u4f7f\u7528\u5c0f\u5199\u7684a-f\u8868\u793a %q \u4f7f\u7528Go\u8bed\u6cd5\u4ee5\u53ca\u5fc5\u987b\u65f6\u4f7f\u7528\u8f6c\u4e49\uff0c\u4ee5\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\u7684\u5b57\u7b26\u4e32\u6216\u8005\u5b57\u8282\u5207\u7247 %s \u5b57\u7b26\u4e32\u3002\u8f93\u51fa\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\u76f4\u81f3\u5b57\u7b26\u4e32\u4e2d\u7684\u7a7a\u5b57\u7b26\uff08\u5b57\u7b26\u4e32\u4ee5'\\0'\u7ed3\u5c3e\uff0c\u8fd9\u4e2a'\\0'\u5373\u8868\u793a\u7a7a\u5b57\u7b26\uff09 %t \u4ee5true\u6216\u8005false\u8f93\u51fa\u7684\u5e03\u5c14\u503c <code>%T</code> \u4f7f\u7528Go\u8bed\u6cd5\u8f93\u51fa\u7684\u503c\u7684\u7c7b\u578b %U \u4e00\u4e2a\u7528Unicode\u8868\u793a\u6cd5\u8868\u793a\u7684\u6574\u578b\u7801\u70b9\uff0c\u9ed8\u8ba4\u503c\u4e3a4\u4e2a\u6570\u5b57\u5b57\u7b26 <code>%v</code> \u4f7f\u7528\u9ed8\u8ba4\u683c\u5f0f\u8f93\u51fa\u7684\u5185\u7f6e\u6216\u81ea\u5b9a\u4e49\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u662f\u4f7f\u7528\u5176\u7c7b\u578b\u7684String()\u65b9\u5f0f\u8f93\u51fa\u7684\u81ea\u5b9a\u4e49\u503c\uff0c\u5982\u679c\u8be5\u65b9\u6cd5\u5b58\u5728\u7684\u8bdd %x \u4ee5\u5341\u516d\u8fdb\u5236\u8868\u793a\u7684\u6574\u578b\u503c\uff08\u57fa\u6570\u4e3a\u5341\u516d\uff09\uff0c\u6570\u5b57a-f\u4f7f\u7528\u5c0f\u5199\u8868\u793a %X \u4ee5\u5341\u516d\u8fdb\u5236\u8868\u793a\u7684\u6574\u578b\u503c\uff08\u57fa\u6570\u4e3a\u5341\u516d\uff09\uff0c\u6570\u5b57A-F\u4f7f\u7528\u5927\u5199\u8868\u793a <ul> <li>Pactice-Code</li> </ul> Go<pre><code>type User struct {\n    Name string\n    Age int\n}\nuser : = User{\n    \"overnote\",\n    1,\n}\nfmt.Printf(\"%%\\n\")                   // %\nfmt.Printf(\"%b\\n\", 16)               // 10000\nfmt.Printf(\"%c\\n\", 65)               // A\nfmt.Printf(\"%c\\n\", 0x4f60)           // \u4f60\nfmt.Printf(\"%U\\n\", '\u4f60')              // U+4f60\nfmt.Printf(\"%x\\n\", '\u4f60')              // 4f60\nfmt.Printf(\"%X\\n\", '\u4f60')              // 4F60\nfmt.Printf(\"%d\\n\", 'A')              // 65\nfmt.Printf(\"%t\\n\", 1 &gt; 2)            // false\nfmt.Printf(\"%e\\n\", 4396.7777777)     // 4.396778e+03 \u9ed8\u8ba4\u7cbe\u5ea66\u4f4d\nfmt.Printf(\"%20.3e\\n\", 4396.7777777) //            4.397e+03 \u8bbe\u7f6e\u5bbd\u5ea620,\u7cbe\u5ea63,\u5bbd\u5ea6\u4e00\u822c\u7528\u4e8e\u5bf9\u9f50\nfmt.Printf(\"%E\\n\", 4396.7777777)     // 4.396778E+03\nfmt.Printf(\"%f\\n\", 4396.7777777)     // 4396.777778\nfmt.Printf(\"%o\\n\", 16)               // 20\nfmt.Printf(\"%p\\n\", []int{1})         // 0xc000016110\nfmt.Printf(\"Hello %s\\n\", \"World\")    // Hello World\nfmt.Printf(\"Hello %q\\n\", \"World\")    // Hello \"World\"\nfmt.Printf(\"%T\\n\", 3.0)              // float64\nfmt.Printf(\"%v\\n\", user)             // {overnote 1}\nfmt.Printf(\"%+v\\n\", user)            // {Name:overnote Age:1}\nfmt.Printf(\"%#v\\n\", user)            // main.User{Name:\"overnote\", Age:1}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#package","title":"\u5173\u4e8epackage\u7684\u7406\u89e3","text":"<p>\u6982\u5ff5\u7684\u7406\u89e3</p> <ul> <li>\u548cpython\u4e00\u6837\uff0c\u628a\u76f8\u540c\u529f\u80fd\u7684\u4ee3\u7801\u653e\u5230\u4e00\u4e2a\u76ee\u5f55\uff0c\u79f0\u4e4b\u4e3a\u5305\uff08package\uff09</li> <li>\u6bcf\u4e2ago\u7a0b\u5e8f\u90fd\u662f\u7531\u5305\u6784\u6210\uff0c\u4e00\u822c\u4ee5\u5305\u4e3a\u5355\u4f4d\u8fdb\u884c\u8fd0\u884c</li> <li>main\u5305\uff08main\u51fd\u6570\uff09\u662f\u7528\u6765\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5e76\u4e14\u6bcf\u4e2a\u7a0b\u5e8f\u6709\u4e14\u53ea\u6709\u4e00\u4e2amain\u5305</li> <li>\u5305\u7684\u4e3b\u8981\u7528\u9014\u662f\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u590d\u7528\u6027</li> </ul> <p>\u5bfc\u5305\u7684\u65b9\u5f0f</p> <ul> <li>\u533f\u540d\u5bfc\u5165( _ )</li> </ul> Go<pre><code>_ \"learngo/init/lib2\"\n//\u8868\u793a\u5bfc\u5165\u8fd9\u4e2a\u5305\uff0c\u6267\u884c\u5bfc\u5165(\u8c03\u7528)\u5305\u4e2d\u7684init()\u4f46\u662f\u4e0d\u5f15\u7528\u8be5\u5305\u4e2d\u7684\u5143\u7d20.\n//fg: \u5e94\u7528\u573a\u666f\uff1a\u6bd4\u5982\u6570\u6570\u636e\u5e93\u9a71\u52a8\u7684\u6ce8\u518c\n</code></pre> <ul> <li>\u5305\u522b\u540d</li> </ul> Go<pre><code>lb2 \"learngo/init/lib2\"\n//\u53ef\u76f4\u63a5\u7528lb2\u4ee3\u66fflib2\u7684\u5305\u540d\u8c03\u7528\u5305\u4e2d\u5bf9\u5916\u7684\u51fd\u6570\n</code></pre> <ul> <li>\u5d4c\u5165\u5f0f\u5bfc\u5165</li> </ul> Go<pre><code>. \"learngo/init/lib2\"\n//\u76f8\u5f53\u4e8elib2\u4e2d\u7684\u4ee3\u7801\u76f4\u63a5\u5bfc\u5165\u5f53\u524d\u5305\uff0c\u53ef\u76f4\u63a5\u4f7f\u7528lib2\u4e2d\u7684\u51fd\u6570\uff0c\u65e0\u9700\u524d\u7f00\u3002\u591a\u4e2a\u5d4c\u5165\u5f0f\u5bfc\u5165\u5bb9\u6613\u4ea7\u751f\u53d8\u91cf\u540d\u91cd\u590d\u9519\u8bef\u3002\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#init","title":"init\u51fd\u6570\u7684\u7406\u89e3","text":"<ul> <li>package\u4ee5\u9012\u5f52\u7684\u5f62\u5f0f\u5bfc\u5165\uff0cinit()\u76f8\u5f53\u4e8ereturn\u8bed\u53e5\u56de\u6eaf\u5230\u4e0a\u4e00\u7ea7\u8c03\u7528\uff0c\u4e00\u822c\u7528\u6765\u521d\u59cb\u5316\u5305\u5185\u53c2\u6570\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#main","title":"main\u51fd\u6570\u7684\u4f7f\u7528","text":"Go<pre><code>//1)go\u8bed\u8a00\u4ee5\u5305\u4f5c\u4e3a\u7ba1\u7406\u5355\u4f4d\n//2)\u6bcf\u4e2a\u6587\u4ef6\u5fc5\u987b\u5148\u58f0\u660e\u5305\n//3)\u7a0b\u5e8f\u5fc5\u987b\u6709\u4e00\u4e2amain\u5305\uff08\u91cd\u8981\uff09\n\npackage main\n\n//go\u8bed\u8a00\u4ee5\u53cc\u659c\u6760\u4f5c\u4e3a\u6ce8\u91ca\u7684\u6807\u8bc6\n/*\n    \u8fd9\u662f\u5757\u6ce8\u91ca\n    \u53ef\u4ee5\u591a\u6bb5\u6ce8\u91ca\n*/\n\nimport \"fmt\"\n\n//\u5165\u53e3\u51fd\u6570\uff0c\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\nfunc main() { //\u5de6\u62ec\u53f7\u5fc5\u987b\u4e0e\u51fd\u6570\u540d\u540c\u884c\uff0c\u5426\u5219\u4f1a\u62a5\u9519\n    //\u6253\u5370\n    //\u201chello go\"\u6253\u5370\u5230\u5c4f\u5e55\uff0cPrintln()\u4f1a\u81ea\u52a8\u6362\u884c\n    //\u8c03\u7528\u51fd\u6570\uff0c\u5927\u90e8\u5206\u90fd\u9700\u8981\u5bfc\u5165\u5305\n    fmt.Println(\"hello go\") //go\u8bed\u8a00\u7ed3\u5c3e\u6ca1\u6709\u5206\u53f7\n    fmt.Println(\"hello haha\")\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_6","title":"\u547d\u540d\u89c4\u8303","text":"<ul> <li>\u6807\u8bc6\u7b26\u7684\u547d\u540d\u8981\u5c3d\u91cf\u91c7\u53d6\u7b80\u77ed\u4e14\u6709\u610f\u4e49\u3002</li> <li>\u4e3a\u53d8\u91cf\u3001\u51fd\u6570\u3001\u5e38\u91cf\u547d\u540d\u65f6\u91c7\u7528\u9a7c\u5cf0\u547d\u540d\u6cd5\uff0c\u4f8b\u5982 stuName\u3001getVal\u3002</li> <li>\u5982\u679c\u9996\u5b57\u6bcd\u5927\u5199\uff0c\u5219\u8868\u793a\u5b83\u53ef\u4ee5\u88ab\u5176\u5b83\u7684\u5305\u8bbf\u95ee\uff08\u7c7b\u4f3c\u4e8e Java \u4e2d\u7684 public\uff09\uff1b\u5982\u679c\u9996\u5b57\u6bcd\u5c0f\u5199\uff0c\u5219\u8868\u793a\u5b83\u53ea\u80fd\u5728\u672c\u5305\u4e2d\u4f7f\u7528 (\u7c7b\u4f3c\u4e8e Java \u4e2d private\uff09\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_7","title":"\u53d8\u91cf\u58f0\u660e\u7684\u591a\u6837\u6027","text":"<p>Var \u5173\u952e\u5b57\u58f0\u660e</p> <ul> <li>\u53c8\u79f0\u53d8\u91cf\u5b8c\u6574\u58f0\u660e</li> </ul> Go<pre><code>var \u53d8\u91cf\u540d\u79f0 \u6570\u636e\u7c7b\u578b [ = \u53d8\u91cf\u521d\u59cb\u503c]             //\u65b9\u5f0f\u4e00\n// fg:\nvar name string\n\nvar \u53d8\u91cf\u540d1, \u53d8\u91cf\u540d2 &lt;\u53d8\u91cf\u7c7b\u578b&gt; = \u521d\u59cb\u503c1,\u521d\u59cb\u503c2  //\u65b9\u5f0f\u4e8c\n//fg:\nvar a, b = 2, 3\n\nvar (                                        //\u65b9\u5f0f\u4e09\n    name1 = initialvalue1,\n    name2 = initialvalue2\n)\n</code></pre> <p>:= \u7684\u65b9\u5f0f\u58f0\u660e</p> <ul> <li>\u53c8\u79f0\u77ed\u53d8\u91cf\u58f0\u660e</li> </ul> Go<pre><code>name := initialvalue\n//fg:\na := 1\n\n//\u591a\u53d8\u91cf\nb, c := 2, 3\nname, age := \"xiang\", 18 \n</code></pre> <ul> <li>\u6b64\u65b9\u5f0f\u53ea\u9002\u7528\u4e8e\u51fd\u6570/\u65b9\u6cd5\u5185\u90e8\uff0c\u6216if/for/switch/\u7684\u521d\u59cb\u5316\u8bed\u53e5\u4e2d</li> <li>\u5728\u51fd\u6570\u5916\u90e8\u65e0\u6cd5\u9002\u7528\uff08\u7f16\u8bd1\u4e0d\u901a\u8fc7\uff09</li> </ul> <p>_ \u5ffd\u7565\u53d8\u91cf</p> <ul> <li>_\uff08\u4e0b\u5212\u7ebf\uff09\u662f\u4e2a\u7279\u6b8a\u7684\u53d8\u91cf\u540d\uff0c\u4efb\u4f55\u8d4b\u4e88\u5b83\u7684\u503c\u90fd\u4f1a\u88ab\u4e22\u5f03</li> </ul> Go<pre><code>_, b := 1, 2\n//\u5c06\u503c2\u8d4b\u4e88b\uff0c\u5e76\u540c\u65f6\u4e22\u5f031\n</code></pre> <p>\u53d8\u91cf\u58f0\u660e\u4e2d\u7684\u7c7b\u578b\u63a8\u65ad</p> <ul> <li>\u5982\u679c\u53d8\u91cf\u6709\u521d\u59cb\u503c\uff0c\u90a3\u4e48 Go \u80fd\u591f\u81ea\u52a8\u63a8\u65ad\u5177\u6709\u521d\u59cb\u503c\u7684\u53d8\u91cf\u7684\u7c7b\u578b</li> <li>\u5982\u679c\u53d8\u91cf\u6709\u521d\u59cb\u503c\uff0c\u5c31\u53ef\u4ee5\u5728\u53d8\u91cf\u58f0\u660e\u4e2d\u7701\u7565 <code>type</code>\u3002</li> <li>\u5982\u679c\u53d8\u91cf\u58f0\u660e\u7684\u8bed\u6cd5\u662f var name = initialvalue\uff0cGo \u80fd\u591f\u6839\u636e\u521d\u59cb\u503c\u81ea\u52a8\u63a8\u65ad\u53d8\u91cf\u7684\u7c7b\u578b\u3002</li> </ul> <p>\u53d8\u91cf\u58f0\u660e\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>GO\u58f0\u660e\u7684\u53d8\u91cf\u5c31\u4f1a\u7acb\u5373\u5206\u914d\u5185\u5b58\u7a7a\u95f4\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u4f1a\u88ab\u9ed8\u8ba4\u521d\u59cb\u5316\u503c</li> <li>\u82e5\u4e00\u4e2a\u53d8\u91cf\u672a\u88ab\u8d4b\u503c\uff0cGo \u4f1a\u81ea\u52a8\u5730\u5c06\u5176\u521d\u59cb\u5316\uff0c\u8d4b\u503c\u8be5\u53d8\u91cf\u7c7b\u578b\u7684\u96f6\u503c\uff08Zero Value)</li> </ul> <p>\u53d8\u91cf\u58f0\u660e\u7684practice-code</p> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //\u53d8\u91cf\u7684\u5b9a\u4e49\n    //\u9759\u6001\u7684\u8bed\u8a00\u7684\u53d8\u91cf\u548c\u52a8\u6001\u8bed\u8a00\u7684\u53d8\u91cf\u5b9a\u4e49\u5dee\u5f02\u5f88\u5927\n    //1. \u6700\u57fa\u7840\u7684\u53d8\u91cf\u5b9a\u4e49\n    //var i int // int i\n    //i = 20\n    //fmt.Println(i)\n    //\u5b9a\u4e49\u5e76\u521d\u59cb\u5316\n    //var i int = 10\n    //fmt.Println(i)\n    //2. \u6839\u636e\u503c\u81ea\u884c\u5224\u65ad\u53d8\u91cf\u7c7b\u578b\uff08\u7c7b\u578b\u63a8\u65ad\uff09\n    //var i = 100 //\u5e76\u6ca1\u6709\u8bbe\u7f6e\u7c7b\u578b\n    //fmt.Println(i)\n\n    // 3. go\u8bed\u8a00\u65e2\u7136\u4e00\u95e8\u65b0\u8bed\u8a00 \u7701\u7565var\n    //i := 100\n    //fmt.Println(i)\n\n    //var a int = 10\n    //var b = 10\n    //c := 10\n    //fmt.Println(a, b , c)\n\n    //\u591a\u53d8\u91cf\u5b9a\u4e49\n    //var a, b, c int\n    //a, b, c = 10, 20, 30\n    //fmt.Println(a, b, c)\n\n    //var a, b, c int = 10, 20 ,30\n    //fmt.Println(a, b, c)\n\n    //// \u96c6\u5408\u7c7b\u578b\n    //var (\n    //  a int\n    //  name string\n    //)\n\n    //var i int =10\n    //i = 20\n    //fmt.Println(i)\n\n    //\u533f\u540d\u53d8\u91cf\uff0c \u53d8\u91cf\u4e00\u65e6\u88ab\u5b9a\u4e49 \u4e0d\u4f7f\u7528\n    //\u5e38\u91cf -\n    //const PI = 3.1415926\n    //r := 2.0\n    //\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c \u4ee3\u7801\u5199\u7684\u4e0d\u597d \u4e00\u4e0d\u5c0f\u5fc3\u5728\u67d0\u4e2a\u5730\u65b9\u5c06PI\u7ed9\u6539\u6389\u4e86\n\n    //\u679a\u4e3e\n    //const (\n    //  Unknown = 0\n    //  Female = 1\n    //  Male = 2\n    //)\n    //\n    ////\u5e38\u91cf\u7ec4\u5982\u4e0d\u6307\u5b9a\u7c7b\u578b\u548c\u521d\u59cb\u5316\u503c\uff0c\u8be5\u7c7b\u578b\u548c\u503c\u548c\u4e0a\u4e00\u884c\u7684\u7c7b\u578b\u4e00\u81f4\n    //const (\n    //  x int = 16\n    //  y\n    //  s = \"abc\"\n    //  z\n    //)\n    //fmt.Println(x,y,s)\n    //1. \u5e38\u91cf\u7684\u6570\u636e\u7c7b\u578b\u503c\u53ef\u4ee5\u662f\u5e03\u5c14\uff0c\u6570\u5b57 \u548c\u5b57\u7b26\u4e32\n    //2. \u4e0d\u66fe\u4f7f\u7528\u7684\u5e38\u91cf\uff0c\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u662f\u4e0d\u4f1a\u62a5\u9519\n    //const\u5e38\u91cf\u7684iota\uff0c \u5e38\u91cf\u8ba1\u6570\u5668 \u679a\u4e3e\n    const (\n        Book = iota //\u8ba1\u7b97\u5668\n        Cloth //\u884c\n        Phone\n        DeskTop\n    )\n    //0,1,2 \u672c\u8eab\u4e0d\u91cd\u8981\uff0c \u8fd9\u4e09\u4e2a\u503c\u4e0d\u4e00\u6837\n    //iota \u8be5\u5e38\u91cf\u7684\u503c\u7b49\u4e8e\u4e0a\u4e00\u4e2a\u5e38\u91cf\u7684\u8868\u8fbe\u5f0f\n    fmt.Println(Book, Cloth, Phone, DeskTop)\n    //iota\u4f60\u771f\u7684\u61c2\u4e86\u5417\uff1f\n    // 1. iota\u53ea\u80fd\u5728\u5e38\u91cf\u7ec4\u4e2d\u662f\u4f7f\u7528\n    // 2. \u4e0d\u540c\u7684const\u5b9a\u4e49\u5757\u4e92\u76f8\u4e0d\u5e72\u6270\n    const (\n        Unknown = iota\n        Female\n        Male\n    )\n    fmt.Println(Unknown, Female, Male)\n\n    //3. \u6ca1\u6709\u8868\u8fbe\u5f0f\u7684\u5e38\u91cf\u5b9a\u4e49\u590d\u7528\u4e0a\u4e00\u884c\u7684\u8868\u8fbe\u5f0f\n    //4. \u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\uff0ciota\u4ece0\u9010\u884c\u52a0\u4e00\n    const (\n        a = iota //iota  = 0\n        b = 10 //iota = 1 \u6bcf\u4e00\u884ciota\u52a0\u4e00\n        c // c=10 , iota = 2\n        d,e = iota, iota //iota=3\n        f = iota //iota=4\n        //iota\u4ee3\u8868\u7684\u662f\u8fd9\u91cc\u7684\u884c\u6570\n    )\n\n    fmt.Println(a, b, c, d, e, f)\n    //\u53d8\u91cf\u7684\u4f5c\u7528\u57df\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_8","title":"\u5e38\u91cf\u7684\u58f0\u660e","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#const","title":"const","text":"Go<pre><code>const identifier [type] = value\n//fg:\nconst a int = 10  //\u5b9a\u4e49\u4ee5\u540e\u4e0d\u80fd\u518d\u88ab\u4fee\u6539\n//fg:\nconst a = 55     // \u5141\u8bb8\n      a = 66     // \u4e0d\u5141\u8bb8\u91cd\u65b0\u8d4b\u503c\n</code></pre> <ul> <li>\u5e38\u91cf\u4e2d\u7684\u6570\u636e\u7c7b\u578b\u53ea\u53ef\u4ee5\u662f\u5e03\u5c14\u578b\u3001\u6570\u5b57\u578b\uff08\u6574\u6570\u578b\u3001\u6d6e\u70b9\u578b\u548c\u590d\u6570\uff09\u548c\u5b57\u7b26\u4e32\u578b</li> <li>\u5e38\u91cf\u4e0d\u80fd\u518d\u91cd\u65b0\u8d4b\u503c\u4e3a\u5176\u4ed6\u7684\u503c</li> <li>\u5e38\u91cf\u7684\u503c\u4f1a\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u786e\u5b9a</li> <li>\u5e38\u91cf\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u52a8\u63a8\u5bfc\u7c7b\u578b\u6765\u5b9a\u4e49,\u4f46\u662f\u4e0d\u80fd\u4f7f\u7528:=\u7684\u65b9\u5f0f</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#iota","title":"\u679a\u4e3eiota","text":"<ul> <li>\u9884\u58f0\u660e\u6807\u8bc6\u7b26iota\uff0c\u5b83\u9ed8\u8ba4\u5f00\u59cb\u503c\u662f0\uff0c\u4e00\u7ec4\u591a\u4e2a\u5e38\u91cf\u540c\u65f6\u58f0\u660e\u65f6\u5176\u503c\u9010\u884c\u9012\u589e</li> <li>iota\u5e38\u7528\u6765\u8868\u793a\u81ea\u589e\u7684\u679a\u4e3e\u53d8\u91cf\uff0c\u4e13\u95e8\u7528\u6765\u521d\u59cb\u5316\u5e38\u91cf</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    // 1\uff0ciota\u7684\u529f\u80fd\u662f\u5e38\u91cf\u751f\u6210\u5668\uff0c\u6bcf\u9694\u4e00\u884c\uff0c\u81ea\u52a8\u7d2f\u52a01\n    // 2\uff0ciota\u7ed9\u5e38\u91cf\u8d4b\u503c\u4f7f\u7528\n\n    const (\n        a = iota //1\n        b = iota //2\n        c = iota //3\n    )\n    fmt.Printf(\"a = %d, b = %d, c = %d\\n\", a, b, c)\n\n    //3\uff0c\u591a\u4e2aiota\u65f6\uff0c\u53ef\u4ee5\u53ea\u5199\u4e00\u4e2a\u3002\u6548\u679c\u4e0e\u4e0a\u8fb9\u7684\u4e00\u6837\n    const (\n        a1 = iota\n        b1\n        c1\n    )\n    fmt.Printf(\"a1 = %d, b1 = %d, c1 = %d\\n\", a1, b1, c1)\n\n    //4\uff0ciota\u518d\u6b21\u9047\u5230cost\uff0c\u5c06\u4f1a\u91cd\u7f6e\u4e3a0\n    const d = iota //0\n    fmt.Println(\"d =\", d)\n\n    //5\uff0c\u5982\u679c\u5728\u540c\u4e00\u884c\uff0c\u90a3\u4e48\u503c\u90fd\u4e00\u6837\n    const (\n        i          = iota\n        j1, j2, j3 = iota, iota, iota\n        k          = iota\n    )\n    fmt.Printf(\"i = %d, j1 = %d, j2 = %d, j3 = %d, k = %d\\n\", i, j1, j2, j3, k)\n\n  //\u4f4d\u8fd0\u7b97\u65b9\u5f0f\n  const (\n    Open = 1 &lt;&lt; iota //1\n    Close //2\n    Pending //4\n)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_9","title":"\u5e38\u7528\u683c\u5f0f\u5316\u8f93\u51fa\u51fd\u6570","text":"Go<pre><code>package main\n\nimport \"fmt\"\nimport \"os\"\n\ntype point struct {\n    x, y int\n}\n\nfunc main() {\n\n    // Go\u63d0\u4f9b\u4e86\u51e0\u79cd\u6253\u5370\u683c\u5f0f\uff0c\u7528\u6765\u683c\u5f0f\u5316\u4e00\u822c\u7684Go\u503c\uff0c\u4f8b\u5982\n    // \u4e0b\u9762\u7684%v\u6253\u5370\u4e86\u4e00\u4e2apoint\u7ed3\u6784\u4f53\u7684\u5bf9\u8c61\u7684\u503c\n    p := point{1, 2}\n    fmt.Printf(\"%v\\n\", p)\n\n    // \u5982\u679c\u6240\u683c\u5f0f\u5316\u7684\u503c\u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\u5bf9\u8c61\uff0c\u90a3\u4e48`%+v`\u7684\u683c\u5f0f\u5316\u8f93\u51fa\n    // \u5c06\u5305\u62ec\u7ed3\u6784\u4f53\u7684\u6210\u5458\u540d\u79f0\u548c\u503c\n    fmt.Printf(\"%+v\\n\", p)\n\n    // `%#v`\u683c\u5f0f\u5316\u8f93\u51fa\u5c06\u8f93\u51fa\u4e00\u4e2a\u503c\u7684Go\u8bed\u6cd5\u8868\u793a\u65b9\u5f0f\u3002\n    fmt.Printf(\"%#v\\n\", p)\n\n    // \u4f7f\u7528`%T`\u6765\u8f93\u51fa\u4e00\u4e2a\u503c\u7684\u6570\u636e\u7c7b\u578b\n    fmt.Printf(\"%T\\n\", p)\n\n    // \u683c\u5f0f\u5316\u5e03\u5c14\u578b\u53d8\u91cf\n    fmt.Printf(\"%t\\n\", true)\n\n    // \u6709\u5f88\u591a\u7684\u65b9\u5f0f\u53ef\u4ee5\u683c\u5f0f\u5316\u6574\u578b\uff0c\u4f7f\u7528`%d`\u662f\u4e00\u79cd\n    // \u6807\u51c6\u7684\u4ee510\u8fdb\u5236\u6765\u8f93\u51fa\u6574\u578b\u7684\u65b9\u5f0f\n    fmt.Printf(\"%d\\n\", 123)\n\n    // \u8fd9\u79cd\u65b9\u5f0f\u8f93\u51fa\u6574\u578b\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u65b9\u5f0f\n    fmt.Printf(\"%b\\n\", 14)\n\n    // \u8fd9\u91cc\u6253\u5370\u51fa\u8be5\u6574\u578b\u6570\u503c\u6240\u5bf9\u5e94\u7684\u5b57\u7b26\n    fmt.Printf(\"%c\\n\", 33)\n\n    // \u4f7f\u7528`%x`\u8f93\u51fa\u4e00\u4e2a\u503c\u768416\u8fdb\u5236\u8868\u793a\u65b9\u5f0f\n    fmt.Printf(\"%x\\n\", 456)\n\n    // \u6d6e\u70b9\u578b\u6570\u503c\u4e5f\u6709\u51e0\u79cd\u683c\u5f0f\u5316\u65b9\u6cd5\u3002\u6700\u57fa\u672c\u7684\u4e00\u79cd\u662f`%f`\n    fmt.Printf(\"%f\\n\", 78.9)\n\n    // `%e`\u548c`%E`\u4f7f\u7528\u79d1\u5b66\u8ba1\u6570\u6cd5\u6765\u8f93\u51fa\u6574\u578b\n    fmt.Printf(\"%e\\n\", 123400000.0)\n    fmt.Printf(\"%E\\n\", 123400000.0)\n\n    // \u4f7f\u7528`%s`\u8f93\u51fa\u57fa\u672c\u7684\u5b57\u7b26\u4e32\n    fmt.Printf(\"%s\\n\", \"\\\"string\\\"\")\n\n    // \u8f93\u51fa\u50cfGo\u6e90\u7801\u4e2d\u90a3\u6837\u5e26\u53cc\u5f15\u53f7\u7684\u5b57\u7b26\u4e32\uff0c\u9700\u4f7f\u7528`%q`\n    fmt.Printf(\"%q\\n\", \"\\\"string\\\"\")\n\n    // `%x`\u4ee516\u8fdb\u5236\u8f93\u51fa\u5b57\u7b26\u4e32\uff0c\u6bcf\u4e2a\u5b57\u7b26\u4e32\u7684\u5b57\u8282\u7528\u4e24\u4e2a\u5b57\u7b26\u8f93\u51fa\n    fmt.Printf(\"%x\\n\", \"hex this\")\n\n    // \u4f7f\u7528`%p`\u8f93\u51fa\u4e00\u4e2a\u6307\u9488\u7684\u503c\n    fmt.Printf(\"%p\\n\", &amp;p)\n\n    // \u5f53\u8f93\u51fa\u6570\u5b57\u7684\u65f6\u5019\uff0c\u7ecf\u5e38\u9700\u8981\u53bb\u63a7\u5236\u8f93\u51fa\u7684\u5bbd\u5ea6\u548c\u7cbe\u5ea6\u3002\n    // \u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u4f4d\u4e8e%\u540e\u9762\u7684\u6570\u5b57\u6765\u63a7\u5236\u8f93\u51fa\u7684\u5bbd\u5ea6\uff0c\u9ed8\u8ba4\n    // \u60c5\u51b5\u4e0b\u8f93\u51fa\u662f\u53f3\u5bf9\u9f50\u7684\uff0c\u5de6\u8fb9\u52a0\u4e0a\u7a7a\u683c\n    fmt.Printf(\"|%6d|%6d|\\n\", 12, 345)\n\n    // \u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u6d6e\u70b9\u6570\u7684\u8f93\u51fa\u5bbd\u5ea6\uff0c\u540c\u65f6\u4f60\u8fd8\u53ef\u4ee5\u6307\u5b9a\u6d6e\u70b9\u6570\n    // \u7684\u8f93\u51fa\u7cbe\u5ea6\n    fmt.Printf(\"|%6.2f|%6.2f|\\n\", 1.2, 3.45)\n\n    // To left-justify, use the `-` flag.\n    fmt.Printf(\"|%-6.2f|%-6.2f|\\n\", 1.2, 3.45)\n\n    // \u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u8f93\u51fa\u5b57\u7b26\u4e32\u7684\u5bbd\u5ea6\u6765\u4fdd\u8bc1\u5b83\u4eec\u8f93\u51fa\u5bf9\u9f50\u3002\u9ed8\u8ba4\n    // \u60c5\u51b5\u4e0b\uff0c\u8f93\u51fa\u662f\u53f3\u5bf9\u9f50\u7684\n    fmt.Printf(\"|%6s|%6s|\\n\", \"foo\", \"b\")\n\n    // \u4e3a\u4e86\u4f7f\u7528\u5de6\u5bf9\u9f50\u4f60\u53ef\u4ee5\u5728\u5bbd\u5ea6\u4e4b\u524d\u52a0\u4e0a`-`\u53f7\n    fmt.Printf(\"|%-6s|%-6s|\\n\", \"foo\", \"b\")\n\n    // `Printf`\u51fd\u6570\u7684\u8f93\u51fa\u662f\u8f93\u51fa\u5230\u547d\u4ee4\u884c`os.Stdout`\u7684\uff0c\u4f60\n    // \u53ef\u4ee5\u7528`Sprintf`\u6765\u5c06\u683c\u5f0f\u5316\u540e\u7684\u5b57\u7b26\u4e32\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\n    s := fmt.Sprintf(\"a %s\", \"string\")\n    fmt.Println(s)\n\n    // \u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528`Fprintf`\u6765\u5c06\u683c\u5f0f\u5316\u540e\u7684\u503c\u8f93\u51fa\u5230`io.Writers`\n    fmt.Fprintf(os.Stderr, \"an %s\\n\", \"error\")\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_basics/#_10","title":"\u5e38\u7528\u683c\u5f0f\u5316\u8f93\u5165\u51fd\u6570","text":"Go<pre><code>ackage main\n\nimport \"fmt\"\n\nfunc main() {\n    var a int\n    fmt.Println(\"\u8bf7\u8f93\u5165\u53d8\u91cfa\u7684\u503c\uff1a\")\n\n    //fmt.Scanf(\"%d\", &amp;a) \u963b\u585e\u7b49\u5f85\u7528\u6237\u7684\u8f93\u5165\uff0c\u522b\u5fd8\u4e86&amp;\n    //\u5bf9\u5e94\u683c\u5f0f\u5199\u6cd5\n    // fmt.Scanf(\"%d\", &amp;a)\n\n    //\u81ea\u52a8\u5339\u914d\u683c\u5f0f\u7684\u5199\u6cd5\n    fmt.Scan(&amp;a)\n    fmt.Println(\"a =\", a)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/","title":"Go\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_1","title":"\u6570\u636e\u7c7b\u578b\u5206\u7c7b\u6982\u8ff0","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_2","title":"\u57fa\u672c\u7c7b\u578b","text":"\u7c7b\u578b \u540d\u79f0 \u957f\u5ea6 \u96f6\u503c \u8bf4\u660e <code>bool</code> \u5e03\u5c14\u7c7b\u578b 1 false \u5176\u503c\u4e0d\u4e3a\u771f\u5373\u4e3a\u5047\uff0c\u4e0d\u53ef\u4ee5\u7528\u6570\u5b57\u4ee3\u8868true\u6216false <code>byte</code> \u5b57\u8282\u578b 1 0 uint8\u522b\u540d rune \u5b57\u7b26\u7c7b\u578b 4 0 \u4e13\u7528\u4e8e\u5b58\u50a8unicode\u7f16\u7801\uff0c\u7b49\u4ef7\u4e8euint32 <code>init,uint</code> \u6574\u578b 4\u62168 0 23\u4f4d\u621664\u4f4d int8,uint8 \u6574\u578b 1 0 -128-127,0-255 int16,uint16 \u6574\u578b 2 0 -32768-32768,0-65535 int32,uint32 \u6574\u578b 4 0 -21\u4ebf-21\u4ebf\uff0c0-42\u4ebf int64,uint64 \u6574\u578b 8 0 <code>float32</code> \u6d6e\u70b9\u578b 4 0.0 \u5c0f\u6570\u4f4d\u7cbe\u786e\u52307\u4f4d <code>float64</code> \u6d6e\u70b9\u578b 8 0.0 \u5c0f\u6570\u4f4d\u7cbe\u786e\u523015\u4f4d complex64 \u590d\u6570\u7c7b\u578b 8 complex128 \u590d\u6570\u7c7b\u578b 16 unitptr \u6574\u578b 4\u62168 \u8db3\u4ee5\u5b58\u50a8\u6307\u9488\u7684uint32\u6216uint64\u6574\u6570 <code>string</code> \u5b57\u7b26\u4e32 \"\" utf-8\u5b57\u7b26\u4e32","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_3","title":"\u7c7b\u578b\u5f52\u7eb3","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_4","title":"\u503c\u7c7b\u578b","text":"<ul> <li>\u6574\u578b\uff1a    int8,          uint   </li> <li>\u6d6e\u70b9\u578b    float32,    float64</li> <li>\u5e03\u5c14\u578b    bool</li> <li>\u6570\u7ec4        array </li> <li>\u7ed3\u6784\u4f53    struct</li> <li>\u5b57\u7b26\u4e32    string</li> <li>\u590d\u6570        complex</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_5","title":"\u5f15\u7528\u7c7b\u578b","text":"<ul> <li>\u5207\u7247      slice</li> <li>\u5b57\u5178      map</li> <li>\u6307\u9488       *</li> <li>\u51fd\u6570      func</li> <li>\u63a5\u53e3      interface</li> <li>\u7ba1\u9053      chan</li> </ul> <p>Note: go\u8bed\u8a00\u6ca1\u6709\u5b57\u7b26\u578b\uff0c\u4f7f\u7528byte\u6765\u4fdd\u5b58\u5355\u4e2a\u5b57\u6bcd</p>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_6","title":"\u57fa\u672c\u7c7b\u578b\u8be6\u8ff0","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#bool","title":"bool \u2014\u5e03\u5c14","text":"<ul> <li>\u5e03\u5c14\u7c7b\u578b\u53ea\u53ef\u4ee5\u662f\u5e38\u91cftrue\u6216false</li> <li>\u6570\u5b57\u7c7b\u578b\u548cbool\u7c7b\u578b\u4e0d\u80fd\u76f8\u4e92\u8f6c\u6362</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n  //bool\n    var w bool // \u7533\u58f0\u660e\u53d8\u91cf\uff0c\u5982\u679c\u6ca1\u6709\u521d\u59cb\u5316\uff0c\u9ed8\u8ba4\u4e3afalse\n    var ww bool = true\n    var www = true //\u81ea\u52a8\u63a8\u65ad\u7c7b\u578b\n    fmt.Println(w, ww, www)\n    a := true\n    b := false\n    fmt.Println(a, b)\n    c := a &amp;&amp; b\n    fmt.Println(c)\n    d := a || b\n    fmt.Println(d)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#string","title":"string\u2014\u5b57\u7b26\u4e32","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#string-","title":"string-\u6982\u8ff0","text":"<ul> <li>\u5b57\u7b26\u4e32\u662f\u5b57\u8282\u7684\u96c6\u5408\uff0c\u5b57\u7b26\u4e32\u662f\u5b57\u8282\u7684\u5b9a\u957f\u6570\u7ec4\u3002</li> <li>\u5b57\u7b26\u4e32\u662f\u4e00\u79cd\u503c\u7c7b\u578b\uff0c\u4e14\u503c\u4e0d\u53ef\u53d8\uff0c\u5373\u521b\u5efa\u67d0\u4e2a\u6587\u672c\u540e\u5c06\u65e0\u6cd5\u518d\u6b21\u4fee\u6539\u8fd9\u4e2a\u6587\u672c\u7684\u5185\u5bb9</li> <li>\u5b57\u7b26\u4e32\u662f UTF-8 \u5b57\u7b26\u7684\u4e00\u4e2a\u5e8f\u5217\uff08\u5f53\u5b57\u7b26\u4e3a ASCII \u7801\u8868\u4e0a\u7684\u5b57\u7b26\u65f6\u5219\u5360\u7528 1 \u4e2a\u5b57\u8282\uff0c\u5176\u5b83\u5b57\u7b26\u6839\u636e\u9700\u8981\u5360\u7528 2-4 \u4e2a\u5b57\u8282\uff09</li> <li>\u5185\u7f6e\u51fd\u6570len()\u8fd4\u56de\u7684\u662f\u5b57\u8282\u6570\u800c\u4e0d\u662f\u5b57\u7b26\u6570\u3002</li> <li>\u5b57\u7b26\u4e32\u662f\u7528\u4e00\u5bf9\u53cc\u5f15\u53f7\"\u6216\u53cd\u5f15\u53f7``(\u952e\u76d8\u6570\u5b571\u7684\u5de6\u8fb9\u952e)\u62ec\u8d77\u6765\u5b9a\u4e49</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //string\n    var str1 string // \u58f0\u660e\u5b57\u7b26\u4e32\u7c7b\u578b\n    str1 = \"aaa\"\n    fmt.Println(\"str1=\", str1)\n    first := \"Ronin\"\n    last := \"ssWang\"\n    name := first + last\n    fmt.Println(\"My name is\", name)\n    fmt.Printf(\"name \u7684\u7c7b\u578b\u662f %T\\n\", name)\n\n    // len()\uff0c\u5185\u5efa\u51fd\u6570\uff0c\u53ef\u4ee5\u8fd4\u56de\u5b57\u7b26\u4e32\u6709\u591a\u5c11\u4e2a\u5b57\u7b26\n    fmt.Println(\"len(name)=\", len(name))  //len(name)=11\n  //\u5982\u679c\u53ea\u60f3\u64cd\u4f5c\u67d0\u4e2a\u5b57\u7b26\uff0c\u53ef\u7528\u5982\u4e0b\u65b9\u5f0f\n    fmt.Printf(\"name[0] = %c, name[1] = %c\", name[0], name[1])\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_7","title":"\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884c\u4fee\u6539\u7684\u65b9\u5f0f","text":"<p>\u867d\u7136\u5b57\u7b26\u4e32\u4e0d\u53ef\u4ee5\u76f4\u63a5\u6539\u53d8\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u4fee\u6539</p> <ul> <li> <p>\u65b9\u5f0f\u4e00\uff1a\u901a\u8fc7\u8f6c\u6362\u4e3a\u5b57\u8282\u6570\u7ec4 []byte\u7c7b\u578b\uff0c\u6784\u9020\u4e00\u4e2a\u4e34\u65f6\u5b57\u7b26\u4e32</p> </li> <li> <p>\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528\u5207\u7247</p> </li> </ul> <p>Practice-Code</p> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //\u65b9\u5f0f\u4e00\n    str := \"hello\"\n  strTemp := []byte(str)\n  fmt.Println(\"strTemp=\", strTemp)          // [104 101 108 108 111]\n  strTemp[0] = 'c'\n  strResult := string(strTemp)\n  fmt.Println(\"strResult=\", strResult)      // strResult= cello\n\n    //\u65b9\u5f0f\u4e8c\n  str := \"hello\"\n  str = \"c\"+ str[1:]        // 1: \u8868\u793a\u4ece\u7b2c1\u4f4d\u5f00\u59cb\u5230\u6700\u540e\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#string_1","title":"string\u7684\u5e38\u7528\u64cd\u4f5c","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_8","title":"\u5305\u542b","text":"Go<pre><code>Contains(s, substr string) bool   \u5305\u542b\u5b50\u5b57\u7b26\u4e32\nContainsAny(s, chars string) bool  \u4efb\u610f\u70b9\u7801\u503c\u662f\u5426s\u4e2d\u51fa\u73b0\nContainsRune(s string, r rune) bool r unicode\u503c\u662f\u5426s\u4e2d\u51fa\u73b0\nCount(s, sep string) int   sep \u5b50\u5b57\u7b26\u4e32\u51fa\u73b0\u7684\u6b21\u6570\nEqualFold(s, t string) bool   \u6bd4\u8f83\u5b57\u7b26\u4e32\u76f8\u7b49\u5ffd\u7565\u5927\u5c0f\u5199\nHasPrefix(s, prefix string) bool \u662f\u5426\u6709\u524d\u7f00\nHasSuffix(s, suffix string) bool \u662f\u5426\u6709\u540e\u7f00\n\nfmt.Println(strings.Contains(\"seafood\", \"foo\"))//true\nfmt.Println(strings.Contains(\"seafood\", \"bar\"))//false\nfmt.Println(strings.Contains(\"seafood\", \"\"))//true\nfmt.Println(strings.Contains(\"\", \"\"))//true\nfmt.Println(strings.ContainsAny(\"test\",\"\"))//false\nfmt.Println(strings.ContainsAny(\"test\",\"tr\"))//true\nfmt.Println(strings.Count(\"test\", \"t\"))//2\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_9","title":"\u4f4d\u7f6e","text":"Go<pre><code>Index(s, sep string) int  \u8fd4\u56de\u7b2c\u4e00\u4e2asep\u5728s\u4e2d\u7684\u4f4d\u7f6e\nIndexAny(s, chars string) int  \u8fd4\u56dechars\u4e2dunicode\u7801\u70b9\u5728s\u4e2d\u7b2c\u4e00\u4e2a\u6240\u5728\u7684\u4f4d\u7f6e\nIndexFunc(s string, f func(rune) bool) int \u8fd4\u56des \u4e2dunicode\u7801\u70b9\u6ee1\u8db3\u51fd\u6570f\u7684\u4f4d\u7f6e\nIndexByte(s string, c byte) int \u8fd4\u56de\u7b2c\u4e00\u4e2ac byte\u5728s\u4e2d\u51fa\u73b0\u7684\u4f4d\u7f6e\nIndexRune(s string, r rune) int \u8fd4\u56de\u7b2c\u4e00\u4e2ar unicode\u5728s\u4e2d\u51fa\u73b0\u7684\u4f4d\u7f6e\nLastIndex(s, sep string) int\nLastIndexAny(s, chars string)\nLastIndexFunc(s string, f func(rune)bool)int\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_10","title":"\u8fc7\u6ee4","text":"Go<pre><code>Trim(s string, cutset string) string \u4ece\u4e24\u7aef\u8fc7\u6ee4\u5305\u542bcutset\u4e2d\u7801\u70b9\u503c\nTrimFunc(s string, f func(rune) bool)string\u4ece\u4e24\u7aef\u8fc7\u6ee4\u6ee1\u8db3f\u7684\u7801\u70b9\u503c\nTrimLeft(s, string, cutset s string) string\nTrimLeftFunc(s string, f func(rune) bool)string\nTrimRight(s, string, cutset s string) string\nTrimRightFunc(s string, f func(rune) bool)string\nTrimSpace(s string) string \u4ece\u4e24\u7aef\u8fc7\u6ee4\u7a7a\u767d\u5b57\u7b26\u548c\u7a7a\u683c\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_11","title":"\u66ff\u6362","text":"Go<pre><code>Map(mapping func(rune) rune, s string) string \u6839\u636emapping\u51fd\u6570\u66ff\u6362\u91cc\u9762\u6bcf\u4e2arune\nNewReplacer(oldnew \u2026string) \u521b\u5efa\u4e00\u4e2a\u66ff\u6362\u5668\u5bf9\u8c61\nReplace(s, old, new string, n int) string \u628aold \u66ff\u6362\u4e3anew\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_12","title":"\u5927\u5c0f\u5199","text":"Go<pre><code>Title(s string) string \u5bf9s\u4e2d\u6bcf\u4e00\u4e2a\u5355\u8bcd\u8fdb\u884c\u6807\u9898\u9996\u5b57\u6bcd\u5927\u5199\nToTitle(s string) string  \u5f97\u5230s\u7684\u6807\u9898\u683c\u5f0f\nToLower(s string) string  \u5f97\u5230\u5c0f\u5199\nToLowerSpeical(case unicode.SpecialCase, s string) string \u9488\u5bf9\u7279\u6b8a\u7684\u7f16\u7801\u683c\u5f0f\u5c0f\u5199\nToUpper(s string) string\nToUpperSpeical(case unicode.SpecialCase, s string) string\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_13","title":"\u5206\u5272","text":"Go<pre><code>Fields(s string) []string  \u5bf9\u5b57\u7b26\u4e32\u6309\u7a7a\u767d\u8fdb\u884c\u5206\u5272\nFieldsFunc(s string, f func(rune) bool) \u5bf9\u6ee1\u8db3f\u7684\u51fd\u6570\u8fdb\u884c\u5207\u5272\nSplit(s, sep string) []string  \u4ee5sep\u5bf9\u5b57\u7b26\u4e32s\u8fdb\u884c\u5206\u5272\nSplitN(s, sep string, n int)[] string \u4ee5sep\u5bf9\u5b57\u7b26\u4e32s\u8fdb\u884c\u5206\u5272\u6210\u51e0\u90e8\u5206\nSplitAfter(s, sep string) [] string \nSplitAfterN(s, sep string, n int)[] string\nTrimPrefix(s, prefix string) string \u53bb\u6389\u524d\u7f00\nTrimSuffix(s, suffix string) string  \u53bb\u6389\u540e\u7f00\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_14","title":"\u5408\u5e76","text":"Go<pre><code>Join(a []string, sep string) string\u7528\u5206\u5272\u7b26sep\u5408\u5e76a\nNewReader(s string) *Reader \u521b\u5efa\u4e00\u4e2a\u5b57\u7b26\u4e32\u5bf9\u8c61\nRepeat(s string, count int) string \u65b0\u751f\u6210\u4e00\u4e2as\u91cd\u590d\u51e0\u6b21\u7684\u5b57\u7b26\u4e32\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_15","title":"\u8f6c\u6362","text":"<ul> <li>\u5b57\u7b26\u4e32\u8f6c\u5316\u7684\u51fd\u6570\u5728strconv\u4e2d\uff0c\u5982\u4e0b\u4e5f\u53ea\u662f\u5217\u51fa\u4e00\u4e9b\u5e38\u7528\u7684\uff1a</li> <li>Append \u7cfb\u5217\u51fd\u6570\u5c06\u6574\u6570\u7b49\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u540e\uff0c\u6dfb\u52a0\u5230\u73b0\u6709\u7684\u5b57\u8282\u6570\u7ec4\u4e2d\u3002</li> </ul> Go<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n)\n\nfunc main() {\n    str := make([]byte, 0, 100)\n    str = strconv.AppendInt(str, 4567, 10)\n    str = strconv.AppendBool(str, false)\n    str = strconv.AppendQuote(str, \"abcdefg\")\n    str = strconv.AppendQuoteRune(str, '\u5355')\n    fmt.Println(string(str))\n}\n</code></pre> <ul> <li>Format \u7cfb\u5217\u51fd\u6570\u628a\u5176\u4ed6\u7c7b\u578b\u7684\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32</li> </ul> Go<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n)\n\nfunc main() {\n    a := strconv.FormatBool(false)\n    b := strconv.FormatFloat(123.23, 'g', 12, 64)\n    c := strconv.FormatInt(1234, 10)\n    d := strconv.FormatUint(12345, 10)\n    e := strconv.Itoa(1023)\n    fmt.Println(a, b, c, d, e)\n}\n</code></pre> <ul> <li>Parse \u7cfb\u5217\u51fd\u6570\u628a\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5176\u4ed6\u7c7b\u578b</li> </ul> Go<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n)\nfunc checkError(e error){\n    if e != nil{\n        fmt.Println(e)\n    }\n}\nfunc main() {\n    a, err := strconv.ParseBool(\"false\")\n    checkError(err)\n    b, err := strconv.ParseFloat(\"123.23\", 64)\n    checkError(err)\n    c, err := strconv.ParseInt(\"1234\", 10, 64)\n    checkError(err)\n    d, err := strconv.ParseUint(\"12345\", 10, 64)\n    checkError(err)\n    e, err := strconv.Atoi(\"1023\")\n    checkError(err)\n    fmt.Println(a, b, c, d, e)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_16","title":"\u904d\u5386","text":"<ul> <li>range \u5728\u5b57\u7b26\u4e32\u4e2d\u8fed\u4ee3 unicode \u7f16\u7801\u3002\u7b2c\u4e00\u4e2a\u8fd4\u56de\u503c\u662frune \u7684\u8d77\u59cb\u5b57\u8282\u4f4d\u7f6e\uff0c\u7136\u540e\u7b2c\u4e8c\u4e2a\u662f rune \u81ea\u5df1\u3002</li> </ul> Go<pre><code>for index,value := range \"123ABCabc\"{\n     fmt.Println(index,value)\n    }\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#byte","title":"byte\u2014\u5b57\u7b26","text":"Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //byte\n    var n byte\n    n = 87\n    fmt.Printf(\"%c, %d\\n\", n, n)  //%c:\u4ee5\u5b57\u7b26\u7684\u5f62\u5f0f\u6253\u5370\uff0c%d:\u4ee5\u6574\u578b\u65b9\u5f0f\u6253\u5370\n    var ch byte\n    ch = 'a'  // \u5355\u5f15\u53f7\u8868\u793a\u5b57\u7b26\uff0c \u53cc\u5f15\u53f7\u8868\u793a\u5b57\u7b26\u4e32\n    fmt.Printf(\"%c, %d\\n\", ch, ch) \n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#rune","title":"rune","text":"<ul> <li>rune\u9ed8\u8ba4\u7684\u5b57\u7b26\u7f16\u7801\u662futf-8\u7c7b\u578b\u7684</li> <li>rune\u5185\u7f6e\u4e24\u79cd\u5b57\u7b26\u7c7b\u578b</li> <li>byte\u5b57\u8282\u7c7b\u578b\uff08byte\u662fuint\u7684\u522b\u540d\uff09</li> <li>\u8868\u793aUnicode\u7f16\u7801\u7684\u5b57\u7b26rune, \u5728go\u5185\u90e8\u662fint32\u7c7b\u578b\u7684\u522b\u540d\uff0c\u5360\u75284\u4e2a\u5b57\u8282</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //rune\n    str := \"nihao\u4f60\u597d\"\n    fmt.Println(len(str))\n    k := []byte(str)\n    for _, v := range k {\n        fmt.Print(string(v)) //nihao\u00e4\u00bd\u00a0\u00e5\u00a5\u00bd\n    }\n    fmt.Println(\"\")\n    r := []rune(str)\n    for _, v := range r {\n        fmt.Print(string(v)) // nihao\u4f60\u597d\n    }\n    fmt.Println(\"\")\n    r[0] = 'N'\n    r[5] = '\u60a8'\n    fmt.Println(string(r)) // Nihao\u60a8\u597d\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#float","title":"float\u2014\u6d6e\u70b9\u578b","text":"Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    // float\n    var y float32\n    y = 3.3\n    yy := 6.555 // \u81ea\u52a8\u63a8\u5bfc\u7c7b\u578b\uff0c\u9ed8\u8ba4\u662ffloat64,\u8981\u6bd4float32\u66f4\u7cbe\u786e\n    fmt.Println(\"y=\", y)\n    fmt.Printf(\"yy\u7684\u7c7b\u578b\u4e3a %T\", yy) //yy\u7684\u7c7b\u578b\u4e3a float64\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#complex","title":"complex\u2014\u590d\u6570\u7c7b\u578b","text":"Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //complex\n    var t complex128\n    t = 2.1 + 3.14i\n    fmt.Println(\"t=\", t)\n    t1 := 3.3 + 5.5i\n    fmt.Printf(\"t1\u7684\u7c7b\u578b\u662f%T\\n\", t1)\n    // \u901a\u8fc7\u5185\u5efa\u51fd\u6570\uff0c\u53d6\u51fa\u5b9e\u90e8\u548c\u865a\u90e8\n    fmt.Println(\"real(t1)=\", real(t1), \"imag(t1)=\", imag(t1)) //real(t1)= 3.3 imag(t1)= 5.5\n\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_17","title":"\u5e38\u7528\u7c7b\u578b\u8f6c\u6362","text":"Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //\u4e0d\u80fd\u8f6c\u6362\u7684\u7c7b\u578b\uff0c\u53eb\u4e0d\u517c\u5bb9\u7c7b\u578b\uff0c\u5148\u4e3e\u4e00\u4e2a\u4e0d\u80fd\u8f6c\u6362\u7684\u4f8b\u5b50\n    var flag bool\n    flag = true\n    fmt.Printf(\"flag = %t\\n\", flag)\n\n    //bool\u7c7b\u578b\u4e0d\u80fd\u8f6c\u6362\u4e3aint\n    //fmt.Printf(\"flag = %d\\n\", int(flag))\n\n    // 0\u5c31\u662f\u5047\uff0c\u975e0\u5c31\u662f\u771f\n    // \u6574\u578b\u4e5f\u4e0d\u80fd\u8f6c\u6362\u4e3abool\n    // flag = bool(1)\n\n    //\u518d\u4e3e\u4e00\u4e2a\u80fd\u591f\u8f6c\u6362\u7684\u4f8b\u5b50\u3002\n\n    var ch byte\n    ch = 'a' //\u5b57\u7b26\u7c7b\u578b\u672c\u8d28\u4e0a\u5c31\u662f\u6574\u578b\n    var t int\n    t = int(ch) //\u7c7b\u578b\u8f6c\u6362\uff0c\u8868\u793a\u628ach\u7684\u503c\u53d6\u51fa\u6765\u4e4b\u540e\uff0c\u8f6c\u6210int\u518d\u8d4b\u7ed9t\n    fmt.Println(\"t =\", t)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_18","title":"\u7ed9\u7c7b\u578b\u53d6\u522b\u540d","text":"Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //\u7ed9int64\u8d77\u4e00\u4e2a\u522b\u540dbigint\uff0c\u522b\u540d\u7684\u5173\u952e\u5b57\u662ftype\n    type bigint int64\n    var a bigint //\u7b49\u4ef7\u4e8e var a int64\n    fmt.Printf(\"a type is %T\\n\", a)\n\n    //\u4e5f\u53ef\u4ee5\u4e00\u6b21\u6027\u8d77\u591a\u4e2a\u522b\u540d\n    type (\n        long int64\n        char byte\n    )\n    var b long = 11\n    var c char = 'a'\n    fmt.Printf(\"b = %d, c = %d\\n\", b, c)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#_19","title":"\u6269\u5c55","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#go","title":"go\u8bed\u8a00\u4e2d\u7684\u96f6\u503c\u673a\u5236","text":"<p>\u521d\u59cb\u5316\u65f6\u81ea\u5e26\u9ed8\u8ba4\u503c</p> Go<pre><code>int     0\nint8    0\nint32   0\nint64   0\nuint    0x0\nrune    0           //rune\u7684\u5b9e\u9645\u7c7b\u578b\u662f int32\nbyte    0x0         // byte\u7684\u5b9e\u9645\u7c7b\u578b\u662f uint8\nfloat32 0           //\u957f\u5ea6\u4e3a 4 byte\nfloat64 0           //\u957f\u5ea6\u4e3a 8 byte\nbool    false\nstring  \"\"\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_struct/#gonan","title":"go\u4e2d\u7684NaN\u975e\u6570","text":"<ul> <li>\u51fd\u6570<code>math.IsNaN</code>\u7528\u4e8e\u6d4b\u8bd5\u4e00\u4e2a\u6570\u662f\u5426\u662f\u975e\u6570NaN\uff0c</li> <li>\u51fd\u6570<code>math.NaN</code>\u5219\u8fd4\u56de\u975e\u6570\u5bf9\u5e94\u7684\u503c\u3002</li> <li>\u867d\u7136\u53ef\u4ee5\u7528math.NaN\u6765\u8868\u793a\u4e00\u4e2a\u975e\u6cd5\u7684\u7ed3\u679c\uff0c\u4f46\u662f\u6d4b\u8bd5\u4e00\u4e2a\u7ed3\u679c\u662f\u5426\u662f\u975e\u6570NaN\u5219\u662f\u5145\u6ee1\u98ce\u9669\u7684\uff0c\u56e0\u4e3aNaN\u548c\u4efb\u4f55\u6570\u90fd\u662f\u4e0d\u76f8\u7b49\u7684\u3002</li> </ul> Go<pre><code>nan := math.NaN()\n// \"false false false\"\nfmt.Println(nan == nan, nan &lt; nan, nan &gt; nan) \n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/","title":"Go\u7684\u5bb9\u5668\u6570\u636e\u7c7b\u578b","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#array","title":"Array\u2014\u6570\u7ec4","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_1","title":"\u6570\u7ec4\u7684\u7406\u89e3","text":"<ul> <li>\u6570\u7ec4\u662f\u5177\u6709\u76f8\u540c\u552f\u4e00\u7c7b\u578b\u7684\u4e00\u7ec4\u5df2\u7f16\u53f7\u4e14\u957f\u5ea6\u56fa\u5b9a\u7684\u6570\u636e\u9879\u5e8f\u5217\u3002</li> <li>\u4e0a\u8ff0\u552f\u4e00\u7c7b\u578b\u53ef\u4ee5\u8bf4his\u4efb\u610f\u7684\u539f\u59cb\u7c7b\u578b\u5982\uff1a\u6574\u578b\u3001\u5b57\u7b26\u4e32\u6216\u81ea\u5b9a\u4e49\u7c7b\u578b</li> <li>\u4e00\u4e2a\u6570\u7ec4\u7531\u96f6\u4e2a\u6216\u591a\u4e2a\u5143\u7d20\u7ec4\u6210\u3002</li> <li>\u6570\u7ec4\u7684\u5927\u5c0f\u786e\u5b9a\u3001\u7c7b\u578b\u4e00\u81f4</li> <li>\u6ce8\u610fGo \u4e2d\u7684\u6570\u7ec4\u662f\u503c\u7c7b\u578b\u800c\u4e0d\u662f\u5f15\u7528\u7c7b\u578b\u3002</li> <li>\u957f\u5ea6\u4e00\u6837\u4e14\u6bcf\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u548c\u503c\u4e5f\u4e00\u6837\u7684\u6570\u7ec4\uff0c\u624d\u80fd\u76f8\u7b49\u3002</li> <li>\u6570\u7ec4\u5c5e\u4e8e\u503c\u7c7b\u578b\u7684\uff0c\u5373\u5c06\u4e00\u4e2a\u6570\u7ec4\u8d4b\u503c\u7ed9\u53e6\u5916\u4e00\u4e2a\u6570\u7ec4\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5c06\u6574\u4e2a\u6570\u7ec4\u62f7\u8d1d\u4e00\u4efd\u3002</li> </ul> Go<pre><code>[n]elmentType  // n:\u6570\u7ec4\u957f\u5ea6\u3001elementType\uff1a\u6570\u7ec4\u5143\u7d20\u7c7b\u578b\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_2","title":"\u58f0\u660e","text":"<ul> <li>\u9700\u8981\u6307\u660e\u6570\u7ec4\u7684\u5927\u5c0f\u548c\u5b58\u50a8\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5176\u8868\u793a\u5f62\u5f0f\u4e3a <code>[n]T</code>\u3002<code>n</code> \u8868\u793a\u6570\u7ec4\u4e2d\u5143\u7d20\u7684\u957f\u5ea6\u503c\uff0c<code>T</code> \u4ee3\u8868\u6bcf\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u3002</li> <li>\u6570\u7ec4\u7684\u957f\u5ea6\u5728\u58f0\u660e\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u7ed9\u5b9a\uff0c\u800c\u6570\u7ec4\u4e00\u65e6\u58f0\u660e\uff0c\u5176\u957f\u5ea6\u548c\u7c7b\u578b\u90fd\u4e0d\u80fd\u6539\u53d8\u3002</li> </ul> Go<pre><code>var &lt;\u6570\u7ec4\u540d\u79f0&gt; [&lt;\u6570\u7ec4\u957f\u5ea6&gt;]&lt;\u5143\u7d20\u7c7b\u578b&gt;\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_3","title":"\u521d\u59cb\u5316","text":"<ul> <li>\u521d\u59cb\u5316\u5143\u7d20\u901a\u8fc7\u5927\u62ec\u53f7\u5305\u88f9\u8d77\u6765\u3002</li> <li>\u5728\u7b80\u7565\u58f0\u660e\u4e2d\uff0c\u4e0d\u9700\u8981\u5c06\u6570\u7ec4\u4e2d\u6240\u6709\u7684\u5143\u7d20\u8d4b\u503c\u3002</li> </ul> Go<pre><code>var &lt;\u6570\u7ec4\u540d\u79f0&gt; = [&lt;\u6570\u7ec4\u957f\u5ea6&gt;]&lt;\u5143\u7d20\u7c7b\u578b&gt;{\u5143\u7d201,\u5143\u7d202,...}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_4","title":"\u7701\u7565\u53f7","text":"<p>\u6570\u7ec4\u7684\u957f\u5ea6\u53ef\u4ee5\u4f7f\u7528\u7701\u7565\u53f7 <code>...</code> \u4ee3\u66ff\uff0c\u8fd9\u4e2a\u5e76\u4e0d\u662f\u4ee3\u8868\u53ef\u4ee5\u7701\u7565\u6570\u7ec4\u957f\u5ea6\u7684\u58f0\u660e\uff0c\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u8ba1\u7b97\u6570\u7ec4\u957f\u5ea6\uff0c\u5b83\u7684\u957f\u5ea6\u503c\u7b49\u4e8e\u5f53\u524d\u6570\u7ec4\u521d\u59cb\u5316\u5143\u7d20\u7684\u4e2a\u6570\u3002</p>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_5","title":"\u7d22\u5f15\u5b9a\u4e49","text":"Go<pre><code>[&lt;\u6570\u7ec4\u957f\u5ea6&gt;]&lt;\u5143\u7d20\u7c7b\u578b&gt;{\u7d22\u5f151:\u5143\u7d201,\u7d22\u5f152:\u5143\u7d202,\u2026}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#practice-code","title":"Practice-Code","text":"Go<pre><code>package main\n\nimport \"fmt\"\n\nconst (\n    Frist int = iota\n    Second\n    Third\n    Fourth\n)\n\nfunc main() {\n    var a1 [3]int\n    fmt.Println(a1) // [0 0 0]\n    var a2 = [3]int{1, 2, 3}\n    fmt.Println(a2) // [1 2 3]\n    var a3 = [3]string{\"a\", \"b\", \"c\"}\n    fmt.Println(a3) //[a b c]\n    var a4 = [5]string{\"r\", \"t\", \"s\"}\n    fmt.Println(a4) //[r t s  ]  s\u540e\u9762\u662f\u4e24\u4e2a\u7a7a\u5b57\u7b26\u4e32\n    a5 := [5]int{1, 3, 5}\n    fmt.Println(a5) //[1 3 5 0 0]\n    a6 := [3]int{7}\n    fmt.Println(a6) //[7 0 0]\n    a7 := [...]int{11, 22, 33}\n    fmt.Println(a7) //[11 22 33]  [...]\u8868\u793a\u7701\u7565\u6570\u7ec4\u957f\u5ea6\uff0c\u7f16\u8f91\u5668\u4f1a\u81ea\u52a8\u8ba1\u7b97\u957f\u5ea6\n    a8 := [4]string{Frist: \"1\", Second: \"2\", Third: \"3\", Fourth: \"4\"}\n    fmt.Println(a8) //[1 2 3 4]\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_6","title":"\u6570\u7ec4\u7684\u5e38\u7528\u64cd\u4f5c","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_7","title":"\u6bd4\u8f83","text":"<ul> <li> <p>\u540c\u6837\u7c7b\u578b\u7684\u6570\u7ec4\u662f\u53ef\u4ee5\u76f8\u4e92\u8d4b\u503c\u7684\uff0c\u76f8\u540c\u7c7b\u578b\u7684\u6570\u7ec4\u5fc5\u987b\u662f\u957f\u5ea6\u4e00\u6837\uff0c\u5e76\u4e14\u6bcf\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u4e5f\u4e00\u6837\u7684\u6570\u7ec4</p> </li> <li> <p>\u6570\u7ec4\u7684\u5927\u5c0f\u662f\u7c7b\u578b\u7684\u4e00\u90e8\u5206\u3002\u56e0\u6b64 <code>[5]int</code> \u548c <code>[25]int</code> \u662f\u4e0d\u540c\u7c7b\u578b\u3002</p> </li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_8","title":"\u53d6\u503c","text":"<ul> <li>\u5f53\u6570\u7ec4\u8d4b\u503c\u7ed9\u4e00\u4e2a\u65b0\u7684\u53d8\u91cf\u65f6\uff0c\u8be5\u53d8\u91cf\u4f1a\u5f97\u5230\u4e00\u4e2a\u539f\u59cb\u6570\u7ec4\u7684\u4e00\u4e2a\u526f\u672c\u3002</li> <li>\u5982\u679c\u5bf9\u65b0\u53d8\u91cf\u8fdb\u884c\u66f4\u6539\uff0c\u5219\u4e0d\u4f1a\u5f71\u54cd\u539f\u59cb\u6570\u7ec4\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_9","title":"\u4fee\u6539","text":"<ul> <li>\u53d6\u4e0b\u6807\u5e76\u8d4b\u503c</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_10","title":"\u83b7\u53d6\u957f\u5ea6","text":"<ul> <li>\u901a\u8fc7\u5c06\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 <code>len</code> \u51fd\u6570\uff0c\u53ef\u4ee5\u5f97\u5230\u6570\u7ec4\u7684\u957f\u5ea6\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#for","title":"for\u904d\u5386","text":"<ul> <li><code>for</code> \u5faa\u73af\u53ef\u7528\u4e8e\u904d\u5386\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#range","title":"range\u904d\u5386","text":"<ul> <li><code>range</code> \u8fd4\u56de\u7d22\u5f15\u548c\u8be5\u7d22\u5f15\u5904\u7684\u503c\uff0c \u5e76\u4e14\u53ef\u4ee5\u83b7\u53d6\u6570\u7ec4\u4e2d\u6240\u6709\u5143\u7d20\u7684\u603b\u548c\u3002</li> <li>\u5982\u679c\u4f60\u53ea\u9700\u8981\u503c\u5e76\u5e0c\u671b\u5ffd\u7565\u7d22\u5f15\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u7528 <code>_</code> \u7a7a\u767d\u6807\u8bc6\u7b26\u66ff\u6362\u7d22\u5f15\u6765\u6267\u884c\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#practice-code_1","title":"Practice-Code","text":"Go<pre><code>arr[:]      //\u4ee3\u8868\u6240\u6709\u5143\u7d20\narr[:5]     //\u4ee3\u8868\u524d\u4e94\u4e2a\u5143\u7d20\uff0c\u5373\u533a\u95f4\u7684\u5de6\u95ed\u53f3\u5f00\narr[5:]     //\u4ee3\u8868\u4ece\u7b2c5\u4e2a\u5f00\u59cb\uff08\u4e0d\u5305\u542b\u7b2c5\u4e2a\uff09\nlen(arr)    //\u6570\u7ec4\u7684\u957f\u5ea6\n//\u4ee5\u4e0a\u64cd\u4f5c\u4f1a\u5f15\u53d1\u7c7b\u578b\u7684\u53d8\u5316\uff0c\u6570\u7ec4\u5c06\u4f1a\u8f6c\u5316\u4e3aslice\n</code></pre> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //\u6570\u7ec4\u7684\u64cd\u4f5c---\u6bd4\u8f83\n    //aa := [3]int{5, 78, 8}\n    //var bb [5]int\n    //bb = aa //cannot use aa (type [3]int) as type [5]int in assignment\n\n    //\u6570\u7ec4\u7684\u64cd\u4f5c---\u53d6\u503c\n    cc := [...]string{\"anhui\", \"jiangsu\", \"shanghai\", \"zhejiang\"}\n    dd := cc[1]\n    fmt.Println(dd) //jiangsu\n\n    //\u6570\u7ec4\u7684\u64cd\u4f5c---\u4fee\u6539\n    cc[1] = \"beijing\"\n    fmt.Println(cc) //[anhui beijing shanghai zhejiang]\n\n    //\u6570\u7ec4\u7684\u64cd\u4f5c---\u6c42\u957f\u5ea6\n    ee := [...]float64{33.3, 45.2, 43, 89.1}\n    fmt.Println(\"length of ee is\", len(ee)) //length of ee is 4\n\n    //\u6570\u7ec4\u7684\u64cd\u4f5c---for\u904d\u5386\n    for i := 0; i &lt; len(ee); i++ {\n        fmt.Printf(\"%d th element of ee is %.2f\\n\", i, ee[i])\n        //0 th element of ee is 33.30\n        //1 th element of ee is 45.20\n        //2 th element of ee is 43.00\n        //3 th element of ee is 89.10\n    }\n\n    //\u6570\u7ec4\u7684\u64cd\u4f5c---\u4f7f\u7528range\u904d\u5386\n    sum := float64(0)\n    for ii, v := range ee {\n        fmt.Printf(\"%d the element of ee is %.2f\\n\", ii, v)\n        sum += v\n    }\n    fmt.Println(\"\\nsum of all elements of ee\", sum) //sum of all elements of ee 210.6\n\n    //\u6570\u7ec4\u7684\u64cd\u4f5c---\u4f7f\u7528range\u904d\u5386,\u4e14\u5ffd\u7565\u7d22\u5f15\u53ea\u9700\u8981\u83b7\u53d6\u503c\n    for _, v := range ee {\n        fmt.Println(v)\n        //33.3\n        //45.2\n        //43\n        //89.1\n    }\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_11","title":"\u6570\u7ec4\u7684\u62d3\u5c55","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_12","title":"\u6570\u7ec4\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570","text":"<ul> <li>\u5f53\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570\u65f6\uff0c\u5b83\u662f\u6309\u7167\u503c\u4f20\u9012\uff0c\u800c\u539f\u59cb\u6570\u7ec4\u4fdd\u6301\u4e0d\u53d8</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    array := [3]int{1:2}\n    modify(array)\n    fmt.Println(\"current list\",array)  //current list [0 2 0]\n}\n\nfunc modify(a [3]int){\n    a[1] =3\n    fmt.Println(\"modify list\",a)  //modify list [0 3 0]\n}\n</code></pre> <ul> <li>\u4f20\u9012\u6570\u7ec4\u7684\u6307\u9488\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4fee\u6539\u6570\u7ec4\u503c\u7684</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    array := [3]int{1:2}\n    modify(&amp;array)\n    fmt.Println(\"current list\",array)\n}\n\nfunc modify(a *[3]int){\n    a[1] =3\n    fmt.Println(\"modify list\",*a)\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_13","title":"\u591a\u7ef4\u6570\u7ec4","text":"Go<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc printarray(a [3][2]string) {\n    for _, v1 := range a {\n        for _, v2 := range v1 {\n            fmt.Printf(\"%s \", v2)\n        }\n        fmt.Printf(\"\\n\")\n    }\n}\n\nfunc main() {\n    a := [3][2]string{\n        {\"lion\", \"tiger\"},\n        {\"cat\", \"dog\"},\n        {\"pigeon\", \"peacock\"}, // this comma is necessary. The compiler will complain if you omit this comma\n    }\n    printarray(a)\n    var b [3][2]string\n    b[0][0] = \"apple\"\n    b[0][1] = \"samsung\"\n    b[1][0] = \"microsoft\"\n    b[1][1] = \"google\"\n    b[2][0] = \"AT&amp;T\"\n    b[2][1] = \"T-Mobile\"\n    fmt.Printf(\"\\n\")\n    printarray(b)\n  //lion tiger\n    //cat dog\n    //pigeon peacock\n\n    //apple samsung\n    // microsoft google\n    //AT&amp;T T-Mobile\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#slice","title":"Slice\u2014\u5207\u7247","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_14","title":"\u5207\u7247\u7684\u7406\u89e3","text":"<ul> <li>slice\u662f\u5bf9\u6570\u7ec4\u7684\u4e00\u4e2a\u8fde\u7eed\u7247\u6bb5\u7684\u5f15\u7528\uff0c\u5176\u672c\u8eab\u5e76\u4e0d\u662f\u6570\u7ec4\uff0c\u5b83\u6307\u5411\u5e95\u5c42\u7684\u6570\u7ec4\u3002</li> <li>slice\u662f\u4e00\u4e2a\u5f15\u7528\u7c7b\u578b\u3002</li> <li>slice\u9ed8\u8ba4\u6307\u5411\u4e00\u6bb5\u8fde\u7eed\u7684\u5185\u5b58\u533a\u57df\uff0c\u53ef\u4ee5\u662f\u6570\u7ec4\uff0c\u4e5f\u53ef\u4ee5\u662fslice\u672c\u8eab\u3002</li> <li>\u5982\u679c\u591a\u4e2aslice\u6307\u5411\u76f8\u540c\u7684\u5e95\u5c42\u6570\u7ec4\uff0c\u5176\u4e2d\u4e00\u4e2a\u7684\u503c\u6539\u53d8\u4e86\u4f1a\u5f71\u54cd\u5168\u90e8\u3002</li> <li>\u6570\u7ec4\u662f\u503c\u4f20\u9012\uff0cslice\u662f\u5f15\u7528\u4f20\u9012</li> <li>\u5207\u7247\u7684\u904d\u5386\u53ef\u4ee5\u4f7f\u7528for\u5faa\u73af\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528range\u51fd\u6570</li> </ul> <p>Note: </p> <ul> <li>\u4f7f\u7528make()\u521b\u5efa\uff0c </li> <li>\u4f7f\u7528len()\u83b7\u53d6\u5143\u7d20\u4e2a\u6570\uff0c</li> <li>cap()\u83b7\u53d6\u5bb9\u91cf,\u4e00\u822c\u4eceslice\u7684\u5f00\u59cb\u4f4d\u7f6e\u76f4\u81f3\u5e95\u5c42\u6570\u7ec4\u7684\u7ed3\u675f\u4f4d\u7f6e</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#slice_1","title":"slice\u7684\u5b58\u50a8\u7ed3\u6784\u4f53\uff1a","text":"Go<pre><code>type IntSlice struct {\n  array = unsafe.Pointer    //\u6307\u5411\u5e95\u5c42\u6570\u7ec4\u7684\u6307\u9488\n  len int                   //\u5207\u7247\u5143\u7d20\u6570\u91cf    \n  cap int                   //\u5e95\u5c42\u6570\u7ec4\u7684\u5bb9\u91cf\n}\n</code></pre> <p>Note:</p> <ul> <li> <p>\u5207\u7247\u901a\u8fc7\u5185\u90e8\u7684\u6307\u9488\u548c\u76f8\u5173\u5c5e\u6027\u5f15\u7528\u6570\u7ec4\u7247\u6bb5\uff0c\u5b9e\u73b0\u4e86\u53d8\u957f\u65b9\u6848\uff0cSlice\u5e76\u4e0d\u662f\u771f\u6b63\u610f\u4e49\u4e0a\u7684\u52a8\u6001\u6570\u7ec4\u3002</p> </li> <li> <p>\u5408\u7406\u8bbe\u7f6e\u5b58\u50a8\u80fd\u529b\uff0c\u53ef\u4ee5\u5927\u5e45\u63d0\u5347\u6027\u80fd\uff0c\u6bd4\u5982\u77e5\u9053\u6700\u591a\u5143\u7d20\u4e2a\u6570\u4e3a50\uff0c\u90a3\u4e48\u63d0\u524d\u8bbe\u7f6e\u4e3a50\uff0c\u800c\u4e0d\u662f\u5148\u8bbe\u4e3a30\uff0c\u53ef\u4ee5\u660e\u663e\u51cf\u5c11\u91cd\u65b0\u5206\u914d\u5185\u5b58\u7684\u64cd\u4f5c\u3002</p> </li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_15","title":"\u5207\u7247\u7684\u521b\u5efa","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_16","title":"\u65b9\u5f0f\u4e00:","text":"<ul> <li>var \u58f0\u660e\u4e00\u4e2a\u65b0slice,\u672a\u88ab\u521d\u59cb\u5316\u7684slice \u4e3anil</li> </ul> Go<pre><code>var identifier []type\n//fg:\n// \u58f0\u660e\u5b57\u7b26\u4e32\u5207\u7247\nvar strList []string\n// \u58f0\u660e\u6574\u578b\u5207\u7247\nvar numList []int\n// \u58f0\u660e\u4e00\u4e2a\u7a7a\u5207\u7247\nvar numListEmpty = []int{}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_17","title":"\u65b9\u5f0f\u4e8c\uff1a","text":"<ul> <li>make,\u52a8\u6001\u521b\u5efa\u5207\u7247</li> </ul> Go<pre><code>//make( []Type, size, cap )  \ninit_slice := make ([]string, cap)  //cap \u4e3a\u9884\u5206\u914d\u7684\u5143\u7d20\u6570\u91cf\uff0c\u8fd9\u4e2a\u503c\u8bbe\u5b9a\u540e\u4e0d\u5f71\u54cd size\uff0c\u53ea\u662f\u63d0\u524d\u5206\u914d\u7a7a\u95f4\uff0c\u964d\u4f4e\u591a\u6b21\u5206\u914d\u7a7a\u95f4\u9020\u6210\u6027\u80fd\u95ee\u9898\n//fg:\ntmp_slice1 := make([]string, 4)\ntmp_slice2 := make([]int, 2, 10)\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_18","title":"\u65b9\u5f0f\u4e09\uff1a","text":"<ul> <li>array\u2014\u2014&gt;slice</li> </ul> Go<pre><code>// slice [\u5f00\u59cb\u4f4d\u7f6e : \u7ed3\u675f\u4f4d\u7f6e]\nvar names = [3]string{\"bobo\", \"jake\", \"tom\"}\nsubName := names[1:2]  // subName\u5c31\u662f\u4e00\u4e2aslice\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_19","title":"\u65b9\u5f0f\u56db:","text":"<ul> <li>new</li> </ul> Go<pre><code>subName1 := new([]string)\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_20","title":"\u5207\u7247\u7684\u5e38\u7528\u64cd\u4f5c","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_21","title":"\u5173\u4e8e\u5207\u7247\u7684\u5185\u7f6e\u51fd\u6570","text":"Go<pre><code>len()                                 //\u8fd4\u56de\u5207\u7247\u957f\u5ea6\ncap()                                 //\u8fd4\u56de\u5207\u7247\u5e95\u5c42\u6570\u7ec4\u5bb9\u91cf\nappend()                            //\u5bf9\u5207\u7247\u8ffd\u52a0\u5143\u7d20\nfunc copy(dst, src []Type) int  //\u5c06src\u4e2d\u6570\u636e\u62f7\u8d1d\u5230dst\u4e2d\uff0c\u8fd4\u56de\u62f7\u8d1d\u7684\u5143\u7d20\u4e2a\u6570\n</code></pre> Go<pre><code>// \u58f0\u660e\u4e00\u4e2a\u6570\u7ec4\nvar array = [10]byte{'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'}\n// \u58f0\u660e\u4e24\u4e2aslice\nvar aSlice, bSlice []byte\n\n// \u6f14\u793a\u4e00\u4e9b\u7b80\u4fbf\u64cd\u4f5c\naSlice = array[:3] // \u7b49\u4ef7\u4e8eaSlice = array[0:3] aSlice\u5305\u542b\u5143\u7d20: a,b,c\naSlice = array[5:] // \u7b49\u4ef7\u4e8eaSlice = array[5:10] aSlice\u5305\u542b\u5143\u7d20: f,g,h,i,j\naSlice = array[:] // \u7b49\u4ef7\u4e8eaSlice = array[0:10] \u8fd9\u6837aSlice\u5305\u542b\u4e86\u5168\u90e8\u7684\u5143\u7d20\n\n// \u4eceslice\u4e2d\u83b7\u53d6slice\naSlice = array[3:7] // aSlice\u5305\u542b\u5143\u7d20: d,e,f,g\uff0clen=4\uff0ccap=7\nbSlice = aSlice[1:3] // bSlice \u5305\u542baSlice[1], aSlice[2] \u4e5f\u5c31\u662f\u542b\u6709: e,f\nbSlice = aSlice[:3] // bSlice \u5305\u542b aSlice[0], aSlice[1], aSlice[2] \u4e5f\u5c31\u662f\u542b\u6709: d,e,f\nbSlice = aSlice[0:5] // \u5bf9slice\u7684slice\u53ef\u4ee5\u5728cap\u8303\u56f4\u5185\u6269\u5c55\uff0c\u6b64\u65f6bSlice\u5305\u542b\uff1ad,e,f,g,h\nbSlice = aSlice[:] // bSlice\u5305\u542b\u6240\u6709aSlice\u7684\u5143\u7d20: d,e,f,g\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#append","title":"append\u6dfb\u52a0\u5143\u7d20","text":"<ul> <li>\u5982\u679c\u6700\u7ec8\u957f\u5ea6\u672a\u8d85\u8fc7\u8ffd\u52a0\u5230slice\u7684\u5bb9\u91cf\u5219\u8fd4\u56de\u539f\u59cbslice\uff0c\u5982\u679c\u8d85\u8fc7\u8ffd\u52a0\u5230\u7684slice\u7684\u5bb9\u91cf\u5219\u5c06\u91cd\u65b0\u5206\u914d\u5185\u5bb9\u5730\u5740\u5e76\u62f7\u8d1d\u539f\u59cb\u6570\u636e\u3002</li> <li>\u5982\u679c\u7a7a\u95f4\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u8db3\u591f\u591a\u7684\u5143\u7d20\uff0c\u5207\u7247\u5c31\u4f1a\u8fdb\u884c\u201c\u6269\u5bb9\u201d\uff0c\u6b64\u65f6\u65b0\u5207\u7247\u7684\u957f\u5ea6\u4f1a\u53d1\u751f\u6539\u53d8\u3002\u5bb9\u91cf\u7684\u6269\u5c55\u89c4\u5f8b\u662f\u6309\u5bb9\u91cf\u7684 2 \u500d\u6570\u8fdb\u884c\u6269\u5145\uff0c\u4f8b\u5982 1\u30012\u30014\u30018\u300116\u2026\u2026</li> <li>\u5207\u7247\u5f00\u5934\u6dfb\u52a0\u5143\u7d20\u4e00\u822c\u90fd\u4f1a\u5bfc\u81f4\u5185\u5b58\u7684\u91cd\u65b0\u5206\u914d\uff0c\u800c\u4e14\u4f1a\u5bfc\u81f4\u5df2\u6709\u5143\u7d20\u5168\u90e8\u88ab\u590d\u5236 1 \u6b21\uff0c\u56e0\u6b64\uff0c\u4ece\u5207\u7247\u7684\u5f00\u5934\u6dfb\u52a0\u5143\u7d20\u7684\u6027\u80fd\u8981\u6bd4\u4ece\u5c3e\u90e8\u8ffd\u52a0\u5143\u7d20\u7684\u6027\u80fd\u5dee\u5f88\u591a\u3002</li> <li>slice\u652f\u6301\u94fe\u5f0f\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5c06\u591a\u4e2aappend\u64cd\u4f5c\u7ec4\u5408\u8d77\u6765</li> </ul> Go<pre><code>//\u5f00\u5934\u6dfb\u52a0\nvar a = []int{1,2,3}\na = append([]int{0}, a...) // \u5728\u5f00\u5934\u6dfb\u52a01\u4e2a\u5143\u7d20\na = append([]int{-3,-2,-1}, a...) // \u5728\u5f00\u5934\u6dfb\u52a01\u4e2a\u5207\u7247\n\n//\u5c3e\u90e8\u6dfb\u52a0\nvar a []int\na = append(a, 1) // \u8ffd\u52a01\u4e2a\u5143\u7d20\na = append(a, 1, 2, 3) // \u8ffd\u52a0\u591a\u4e2a\u5143\u7d20, \u624b\u5199\u89e3\u5305\u65b9\u5f0f\na = append(a, []int{1,2,3}...) // \u8ffd\u52a0\u4e00\u4e2a\u5207\u7247, \u5207\u7247\u9700\u8981\u89e3\u5305\n\n//\u94fe\u5f0f\u64cd\u4f5c\nvar a []int\na = append(a[:i], append([]int{x}, a[i:]...)...) // \u5728\u7b2ci\u4e2a\u4f4d\u7f6e\u63d2\u5165x\na = append(a[:i], append([]int{1,2,3}, a[i:]...)...) // \u5728\u7b2ci\u4e2a\u4f4d\u7f6e\u63d2\u5165\u5207\u7247\n\n\n//\u81ea\u52a8\u6269\u5bb9\nvar numbers []int\nfor i := 0; i &lt; 10; i++ {\n    numbers = append(numbers, i)\n    fmt.Printf(\"len: %d  cap: %d pointer: %p\\n\", len(numbers), cap(numbers), numbers)\n}\n// log\nlen: 1  cap: 1 pointer: 0xc0000ae2a0\nlen: 2  cap: 2 pointer: 0xc0000ae2b0\nlen: 3  cap: 4 pointer: 0xc0000c4020\nlen: 4  cap: 4 pointer: 0xc0000c4020\nlen: 5  cap: 8 pointer: 0xc0000b00c0\nlen: 6  cap: 8 pointer: 0xc0000b00c0\nlen: 7  cap: 8 pointer: 0xc0000b00c0\nlen: 8  cap: 8 pointer: 0xc0000b00c0\nlen: 9  cap: 16 pointer: 0xc0000c6000\nlen: 10  cap: 16 pointer: 0xc0000c6000\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_22","title":"\u5220\u9664\u5143\u7d20","text":"<ul> <li> <p>go\u8bed\u97f3\u5e76\u5e76\u6ca1\u6709\u5bf9\u5220\u9664slice\u5143\u7d20\u63d0\u4f9b\u4e13\u7528\u7684\u8bed\u6cd5\u6216\u8005\u63a5\u53e3</p> </li> <li> <p>\u5982\u679c\u6709\u5220\u9664\u7684\u9700\u6c42\uff0c\u9700\u8981\u4f7f\u7528slice\u672c\u8eab\u7684\u7279\u6027\u6765\u5220\u9664\u5143\u7d20</p> </li> <li> <p>\u5220\u9664slice\u5143\u7d20\u7684\u672c\u8d28\u662f\uff1a\u4ee5\u88ab\u5220\u9664\u5143\u7d20\u4e3a\u5206\u754c\u70b9\uff0c\u5c06\u524d\u540e\u4e24\u4e2a\u90e8\u5206\u7684\u5185\u5b58\u91cd\u65b0\u8fde\u63a5\u8d77\u6765</p> </li> </ul> <p></p> Go<pre><code>//\u4ece\u5f00\u5934\u5220\u9664\na := []int{1, 2, 3}\n // \u5220\u9664\u5f00\u59341\u4e2a\u5143\u7d20\na = a[1:] // [2,3]\na = append(a[:0], a[1:]...) // \u5220\u9664\u5f00\u59341\u4e2a\u5143\u7d20\na = append(a[:0], a[N:]...) // \u5220\u9664\u5f00\u5934N\u4e2a\u5143\u7d20\n//\u4f7f\u7528copy()\u51fd\u6570\u5220\u9664\u5f00\u5934\u7684\u5143\u7d20\na := []int{1, 2, 3}\na = a[:copy(a, a[1:])] // \u5220\u9664\u5f00\u59341\u4e2a\u5143\u7d20\na = a[:copy(a, a[N:])] // \u5220\u9664\u5f00\u5934N\u4e2a\u5143\u7d20\n\n//\u4ece\u4e2d\u95f4\u4f4d\u7f6e\u5f00\u59cb\u5220\u9664\na = []int{1, 2, 3, ...}\na = append(a[:i], a[i+1:]...) // \u5220\u9664\u4e2d\u95f41\u4e2a\u5143\u7d20\na = append(a[:i], a[i+N:]...) // \u5220\u9664\u4e2d\u95f4N\u4e2a\u5143\u7d20\na = a[:i+copy(a[i:], a[i+1:])] // \u5220\u9664\u4e2d\u95f41\u4e2a\u5143\u7d20\na = a[:i+copy(a[i:], a[i+N:])] // \u5220\u9664\u4e2d\u95f4N\u4e2a\u5143\u7d20\n\n//\u4ece\u5c3e\u90e8\u5220\u9664\na = []int{1, 2, 3}\na = a[:len(a)-1] // \u5220\u9664\u5c3e\u90e81\u4e2a\u5143\u7d20\na = a[:len(a)-N] // \u5220\u9664\u5c3e\u90e8N\u4e2a\u5143\u7d20\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#copy","title":"copy()\u62f7\u8d1d","text":"<ul> <li>copy()\u53ef\u4ee5\u5c06\u4e00\u4e2a\u5207\u7247\u590d\u5236\u5230\u53e6\u5916\u4e00\u4e2a\u5207\u7247\u4e2d\uff0c\u8fd4\u56de\u503c\u8868\u793a\u5b9e\u9645\u53d1\u751f\u590d\u5236\u7684\u5143\u7d20\u4e2a\u6570</li> <li>\u5982\u679c\u52a0\u5165\u7684\u4e24\u4e2a\u5207\u7247\u4e0d\u4e00\u6837\u5927\uff0c\u5c31\u4f1a\u6309\u7167\u5176\u4e2d\u8f83\u5c0f\u7684\u90a3\u4e2a\u5207\u7247\u7684\u5143\u7d20\u4e2a\u6570\u8fdb\u884c\u590d\u5236</li> <li>\u76ee\u6807\u5207\u7247\u5fc5\u987b\u5206\u914d\u8fc7\u7a7a\u95f4\u4e14\u8db3\u591f\u627f\u8f7d\u590d\u5236\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u5e76\u4e14\u6765\u6e90\u548c\u76ee\u6807\u7684\u7c7b\u578b\u5fc5\u987b\u4e00\u81f4</li> </ul> Go<pre><code>// \u5c06 srcSlice \u590d\u5236\u5230 destSlice\ncopy( destSlice, srcSlice []T) int\n\n//\u5207\u7247\u5927\u5c0f\u4e0d\u4e00\u81f4\nslice1 := []int{1, 2, 3, 4, 5}\nslice2 := []int{5, 4, 3}\ncopy(slice2, slice1) // \u53ea\u4f1a\u590d\u5236slice1\u7684\u524d3\u4e2a\u5143\u7d20\u5230slice2\u4e2d\nfmt.Println(slice2)\ncopy(slice1, slice2) // \u53ea\u4f1a\u590d\u5236slice2\u76843\u4e2a\u5143\u7d20\u5230slice1\u7684\u524d3\u4e2a\u4f4d\u7f6e\nfmt.Println(slice1)\n// log\n[1 2 3]\n[1 2 3 4 5]\n\n// \u590d\u5236\u5bf9\u539f\u503c\u5f71\u54cd\nunc main() {\n    // \u8bbe\u7f6e\u5143\u7d20\u6570\u91cf\u4e3a1000\n    const elementCount = 1000\n    // \u9884\u5206\u914d\u8db3\u591f\u591a\u7684\u5143\u7d20\u5207\u7247\n    srcData := make([]int, elementCount)\n    // \u5c06\u5207\u7247\u8d4b\u503c\n    for i := 0; i &lt; elementCount; i++ {\n        srcData[i] = i\n    }\n    // \u5f15\u7528\u5207\u7247\u6570\u636e\n    refData := srcData\n    // \u9884\u5206\u914d\u8db3\u591f\u591a\u7684\u5143\u7d20\u5207\u7247\n    copyData := make([]int, elementCount)\n    // \u5c06\u6570\u636e\u590d\u5236\u5230\u65b0\u7684\u5207\u7247\u7a7a\u95f4\u4e2d\n    copy(copyData, srcData)\n    // \u4fee\u6539\u539f\u59cb\u6570\u636e\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\n    srcData[0] = 999\n    // \u6253\u5370\u5f15\u7528\u5207\u7247\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\n    fmt.Println(refData[0])\n    // \u6253\u5370\u590d\u5236\u5207\u7247\u7684\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u5143\u7d20\n    fmt.Println(copyData[0], copyData[elementCount-1])\n    // \u590d\u5236\u539f\u59cb\u6570\u636e\u4ece4\u52306(\u4e0d\u5305\u542b)\n    copy(copyData, srcData[4:6])\n    for i := 0; i &lt; 5; i++ {\n        fmt.Printf(\"%d \", copyData[i])\n    }\n}\n// log\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_23","title":"\u5b57\u7b26\u4e32\u8f6c\u5207\u7247","text":"Go<pre><code>str := \"hello,\u4e16\u754c\"\na := []byte(str)        //\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a[]byte\u7c7b\u578b\u5207\u7247\nb := []rune(str)        //\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a[]rune\u7c7b\u578b\u5207\u7247\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_24","title":"\u5207\u7247\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570","text":"Go<pre><code>func test(s []int) {\n    fmt.Printf(\"test---%p\\n\", s) // \u6253\u5370\u4e0emain\u51fd\u6570\u76f8\u540c\u7684\u5730\u5740\n    s = append(s, 1, 2, 3, 4, 5)\n    fmt.Printf(\"test---%p\\n\", s) // \u4e00\u65e6append\u7684\u6570\u636e\u8d85\u8fc7\u5207\u7247\u957f\u5ea6\uff0c\u5219\u4f1a\u6253\u5370\u65b0\u5730\u5740\n    fmt.Println(\"test---\", s)    // [0 0 0 1 2 3 4 5]\n}\n\nfunc main() {\n\n    s1 := make([]int, 3)\n    test(s1)\n    fmt.Printf(\"main---%p\\n\", s1) // \u4e0d\u4f1a\u56e0\u4e3atest\u51fd\u6570\u5185\u7684append\u800c\u6539\u53d8\n    fmt.Println(\"main---\", s1)    // [ 0 0 0]\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#slice_2","title":"\u591a\u7ef4slice","text":"Go<pre><code>//sliceName \u4e3a\u5207\u7247\u7684\u540d\u5b57\n//sliceType\u4e3a\u5207\u7247\u7684\u7c7b\u578b\uff0c\u6bcf\u4e2a[]\u4ee3\u8868\u7740\u4e00\u4e2a\u7ef4\u5ea6\uff0c\u5207\u7247\u6709\u51e0\u4e2a\u7ef4\u5ea6\u5c31\u9700\u8981\u51e0\u4e2a[]\nvar sliceName [][]...[]sliceType\n\n// \u58f0\u660e\u4e00\u4e2a\u4e8c\u7ef4\u6574\u578b\u5207\u7247\u5e76\u8d4b\u503c\nslice := [][]int{{10}, {100, 200}}\n// \u4e3a\u7b2c\u4e00\u4e2a\u5207\u7247\u8ffd\u52a0\u503c\u4e3a 20 \u7684\u5143\u7d20\nslice[0] = append(slice[0], 20)\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#map","title":"Map\u2014\u5b57\u5178","text":"<p>Go- map ---&gt; python-dict</p>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#map_1","title":"map\u7684\u7406\u89e3","text":"<ul> <li>map\u662f\u4e00\u4e2a\u65e0\u5e8f\u952e\u503c\u5bf9\u96c6\u5408</li> <li>map\u7684\u957f\u5ea6\u662f\u4e0d\u56fa\u5b9a\u7684\uff0c\u4e5f\u5c31\u662f\u548cslice\u4e00\u6837\uff0c\u4e5f\u662f\u4e00\u79cd\u5f15\u7528\u7c7b\u578b</li> <li>\u5185\u7f6e\u7684len\u51fd\u6570\u540c\u6837\u9002\u7528\u4e8emap\uff0c\u8fd4\u56demap\u62e5\u6709\u7684key\u7684\u6570\u91cf</li> <li>map\u548c\u5176\u4ed6\u57fa\u672c\u578b\u522b\u4e0d\u540c\uff0c\u5b83\u4e0d\u662fthread-safe\uff0c\u5728\u591a\u4e2ago-routine\u5b58\u53d6\u65f6\uff0c\u5fc5\u987b\u4f7f\u7528mutex lock\u673a\u5236</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#map_2","title":"map\u7684\u521b\u5efa","text":"<ul> <li>\u8981\u6c42\u6240\u6709\u7684key\u7684\u6570\u636e\u7c7b\u578b\u90fd\u76f8\u540c\uff0c\u6240\u6709value\u7684\u6570\u636e\u7c7b\u578b\u90fd\u76f8\u540c</li> <li>key\u548cvalue\u7684\u7c7b\u578b\u53ef\u4ee5\u4e3a\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //\u5e38\u89c4\u521b\u5efa\n    m1 := map[string]string{\n        \"m1\": \"v1\",\n    }\n    fmt.Printf(\"%v\\n\", m1) //map[m1:v1]\n\n    //\u4f7f\u7528make\u51fd\u6570\u521b\u5efa\uff0cmake\u53ef\u4ee5\u521b\u5efaslice/map\n    m2 := make(map[string]string)\n    m2[\"m2\"] = \"v2\"\n    fmt.Printf(\"%v\\n\", m2) //map[m2:v2]\n\n    //\u5b9a\u4e49\u4e00\u4e2a\u7a7amap\n    m3 := map[string]string{}\n    m4 := make(map[string]string)\n    fmt.Printf(\"%v\\n\", m3) //map[]\n    fmt.Printf(\"%v\\n\", m4) // map[]\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#map-key","title":"Map \u4e2dkey\u7684\u7c7b\u578b","text":"<ul> <li>map\u4e2d\u7684key \u4e0d\u662f\u6240\u6709\u7684\u7c7b\u578b\u90fd\u652f\u6301\uff0c\u8be5\u7c7b\u578b\u9700\u8981\u652f\u6301 == \u6216 != \u64cd\u4f5c\uff0c[]\u5185\u7684\u7c7b\u578b\u6307\u4efb\u610f\u53ef\u4ee5\u8fdb\u884c\u6bd4\u8f83\u7684\u7c7b\u578b</li> <li>key\u7684\u5e38\u7528\u7c7b\u578b\uff1a</li> <li>int</li> <li>rune</li> <li>string</li> <li>\u57fa\u4e8e\u4e0a\u8ff0\u7c7b\u578b\u81ea\u5b9a\u4e49\u7684\u7c7b\u578b</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    // map\u4e2dkey\u7684\u7c7b\u578b\n    // key\u4e3a\u5207\u7247\u7c7b\u578b---\u4e0d\u652f\u6301\n    //a1 := []int{1, 2, 3}\n    //b1 := []int{1, 2, 3}\n    //if a1 == b1 {  //\u7f16\u8bd1\u4e0d\u901a\u8fc7\n    //}\n\n    // key \u4e3a\u6570\u7ec4\u7c7b\u578b\uff08\u56e0\u4e3a\u6570\u7ec4\u662f\u503c\u7c7b\u578b\uff09--- \u652f\u6301\n    a1 := [3]int{1, 2, 3}\n    b1 := [3]int{1, 2, 3}\n    if a1 == b1 { //\u7f16\u8bd1\u901a\u8fc7\n        fmt.Println(\"true\")\n    }\n\n    //interface{}\u7c7b\u578b\u53ef\u4ee5\u4f5c\u4e3akey\uff0c\u4f46\u662f\u9700\u8981\u52a0\u5165\u7684key\u7684\u7c7b\u578b\u662f\u53ef\u4ee5\u6bd4\u8f83\u7684\n    //var m5 map[interface{}]string\n    //m6 = make(map[interface{}]string)\n    //m5[[]byte(\"k2\")] = \"v2\" // panic: runtime error: hash of unhashable type []uint8\n    //m5[123] = \"123\"\n    //m6[12.3] = \"123\"\n    //fmt.Println(m5)\n    //fmt.Println(m6)\n\n    // book\u91cc\u9762\u7684\u5143\u7d20\u90fd\u662f\u652f\u6301== !=\n    type book struct {\n        name string\n    }\n    var m7 map[book]string\n    fmt.Println(m7) //map[]\n    }\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#map_3","title":"map\u7684\u5e38\u7528\u64cd\u4f5c","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_25","title":"\u589e\u5220\u6539\u67e5","text":"Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    // map\u7684\u589e\u5220\u6539\u67e5\n    //\u521b\u5efa\n    mm := map[string]string{\n        \"a\": \"va\",\n        \"b\": \"vb\",\n    }\n    fmt.Println(len(mm)) //2\n\n    // \u589e\u52a0\u3001\u4fee\u6539\n    // k\u4e0d\u5b58\u5728\u4e3a\u589e\u52a0\uff0ck\u5b58\u5728\u4e3a\u4fee\u6539\n    mm[\"c\"] = \"\"\n    mm[\"c\"] = \"11\"                       // \u91cd\u590d\u589e\u52a0(key\u76f8\u540c)\uff0c\u4f7f\u7528\u65b0\u7684\u503c\u8986\u76d6\n    fmt.Printf(\"%#v %#v\\n\", mm, len(mm)) // map[string]string{\"a\":\"va\", \"b\":\"vb\", \"c\":\"11\"} 3\n\n    // \u5220\u9664\n    // delete(m, k) \u5c06k\u4ee5\u53cak\u5bf9\u5e94\u7684v\u4ecem\u4e2d\u5220\u6389\uff1b\u5982\u679ck\u4e0d\u5728m\u4e2d\uff0c\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\n    delete(mm, \"x\")                      // \u5220\u9664\u4e0d\u5b58\u5728\u7684key,\u539fm\u4e0d\u5f71\u54cd\n    delete(mm, \"a\")                      // \u5220\u9664\u5b58\u5728\u7684key\n    fmt.Printf(\"%#v %#v\\n\", mm, len(mm)) // map[string]string{\"b\":\"vb\", \"c\":\"11\"} 2\n    delete(mm, \"a\")                      // \u91cd\u590d\u5220\u9664\u4e0d\u62a5\u9519,m\u65e0\u5f71\u54cd\n    fmt.Printf(\"%#v %#v\\n\", mm, len(mm)) /// map[string]string{\"b\":\"vb\", \"c\":\"11\"} 2\n\n    // \u67e5\u627e\n    // v := m[k] // \u4ecem\u4e2d\u53d6\u952ek\u5bf9\u5e94\u7684\u503c\u7ed9v\uff0c\u5982\u679ck\u5728m\u4e2d\u4e0d\u5b58\u5728\uff0c\u5219\u5c06value\u7c7b\u578b\u7684\u96f6\u503c\u8d4b\u503c\u7ed9v\n    // v, ok := m[k] // \u4ecem\u4e2d\u53d6\u952ek\u5bf9\u5e94\u7684\u503c\u7ed9v\uff0c\u5982\u679ck\u5b58\u5728\uff0cok=true,\u5982\u679ck\u4e0d\u5b58\u5728\uff0c\u5c06value\u7c7b\u578b\u7684\u96f6\u503c\u8d4b\u503c\u7ed9v\u540c\u65f6ok=false\n    // \u67e51 - \u5143\u7d20\u4e0d\u5b58\u5728\n    v1 := mm[\"x\"] //\n    v2, ok2 := mm[\"x\"]\n    fmt.Printf(\"%#v %#v %#v\\n\", v1, v2, ok2) // \"\" \"\" false\n\n    // \u67e52 - \u5143\u7d20\u5b58\u5728\n    v3 := mm[\"a\"]\n    v4, ok4 := mm[\"a\"]\n    fmt.Printf(\"%#v %#v %#v\\n\", v3, v4, ok4) //\"va\" \"va\" true\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_data_type/#_26","title":"\u904d\u5386","text":"<ul> <li>map\u7684\u904d\u5386\u662f\u65e0\u5e8f\u7684\uff0c\u56fa\u5728\u904d\u5386\u662f\u4e0d\u80fd\u901a\u8fc7index\u83b7\u53d6\uff0c\u4e8c\u5fc5\u987b\u901a\u8fc7key\u83b7\u53d6</li> <li>\u4f7f\u7528for range\u904d\u5386\u65f6\uff0ck,v \u4f7f\u7528\u540c\u4e00\u5757\u5185\u5b58</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    //\u904d\u5386--\u904d\u5386\u987a\u5e8f\u968f\u673a\uff0ck,v\u4f7f\u7528\u7684\u540c\u4e00\u5757\u5185\u5b58\n    ma := map[string]int{\n        \"a\": 1,\n        \"b\": 2,\n        \"c\": 3,\n    }\n    for k, v := range ma {\n        fmt.Printf(\"k:[%v]. v:[%v]\\n\", k, v)\n        //k:[a]. v:[1]\n        //k:[b]. v:[2]\n        //k:[c]. v:[3]\n    }\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_point/","title":"Go\u7684\u6307\u9488\u548c\u7ed3\u6784\u4f53","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_1","title":"\u6307\u9488","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_2","title":"\u6307\u9488\u7684\u7406\u89e3","text":"<ul> <li>\u6307\u9488\u4ee3\u8868\u67d0\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u9ed8\u8ba4\u503c\u4e3anil,</li> <li>\u4f7f\u7528&amp;\u53d6\u53d8\u91cf\u5730\u5740\uff0c\u901a\u8fc7*\u8bbf\u95ee\u76ee\u6807\u5bf9\u8c61\u3002</li> <li>Go\u4e2d\u76f4\u63a5\u4f7f\u7528<code>.</code>\u8bbf\u95ee\u76ee\u6807\u6210\u5458</li> <li>go\u4e2d\u6307\u9488\u4e0d\u652f\u6301\u8fd0\u7b97\uff08\u7531\u4e8e\u5783\u573e\u56de\u6536\u673a\u5236\u7684\u5b58\u5728\uff0c\u5bf9\u6307\u9488\u8fd0\u7b97\u9020\u6210\u4e86\u8bb8\u591a\u56f0\u6270\uff09</li> <li>\u652f\u6301\u591a\u7ea7\u6307\u9488\uff0c\u5982 <code>**T</code>,  </li> <li>\u7a7a\u6307\u9488\uff1a\u58f0\u660e\u4f46\u672a\u521d\u59cb\u5316\u7684\u6307\u9488</li> <li>\u91ce\u6307\u9488\uff1a\u5f15\u7528\u4e86\u65e0\u6548\u5730\u5740\u7684\u6307\u9488\uff0c\u5982\uff1a<code>var p *int = 0</code>\uff0c<code>var p *int = 0xff00</code>(\u8d85\u51fa\u8303\u56f4)</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_3","title":"\u6307\u9488\u7684\u521b\u5efa","text":"Go<pre><code>package main\n\nimport \"fmt\"\n\n//\u521b\u5efa\u6307\u9488\nfunc main() {\n  var a int = 10\n    fmt.Println(\"&amp;a=\", &amp;a)          // 0xc000096008 \u4e00\u4e2a\u5341\u516d\u8fdb\u5236\u6570\n\n    var p *int = &amp;a\n    fmt.Println(\"*p=\", *p)          // 10\n}\n\n//\u5b9e\u73b0\u53d8\u91cf\u503c\u4ea4\u6362\nfunc swap(p1,p2 *int) {\n    *p1,*p2 = *p2,*p1\n    }\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_4","title":"\u7ed3\u6784\u4f53\u6307\u9488","text":"Go<pre><code>package main\n\nimport \"fmt\"\n\ntype User struct{\n        name string\n        age int\n    }\n\nfunc main() {\n  var u = User{\n    name:\"lisi\",\n    age: 18,\n  }\n  p := &amp;u\n  fmt.Println(u.name)       //\u8f93\u51fa\u674e\u56db\n  fmt.Println(p.name)       //\u8f93\u51fa\u674e\u56db\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_point/#new","title":"new\u51fd\u6570\u7684\u4f7f\u7528","text":"<ul> <li>new()\u51fd\u6570\u53ef\u4ee5\u5728 heap\u5806 \u533a\u7533\u8bf7\u4e00\u7247\u5185\u5b58\u5730\u5740\u7a7a\u95f4\uff1a</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var p *bool\n    p = new(bool)\n    fmt.Println(*p)     // false\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_5","title":"\u7ed3\u6784\u4f53","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_6","title":"\u7ed3\u6784\u4f53\u7684\u7406\u89e3","text":"<ul> <li>\u7ed3\u6784\u4f53\u53ef\u4ee5\u7528\u6765\u58f0\u660e\u65b0\u7684\u7c7b\u578b\uff0c\u4f5c\u4e3a\u5176\u4ed6\u7c7b\u578b\u7684\u5c5e\u6027/\u5b57\u6bb5\u7684\u5bb9\u5668</li> <li>\u7ed3\u6784\u4f53\u4e2d\u7684\u7c7b\u578b\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b\uff0c\u4e14\u5b58\u50a8\u7a7a\u95f4\u662f\u8fde\u7eed\u7684\uff0c\u5176\u5b57\u6bb5\u6309\u7167\u58f0\u660e\u65f6\u7684\u987a\u5e8f\u5b58\u653e</li> <li>\u5982\u679c\u7ed3\u6784\u4f53\u7684\u6240\u6709\u7684\u6210\u5458\u90fd\u662f\u53ef\u4ee5\u6bd4\u8f83\u7684\uff0c \u90a3\u4e48\u7ed3\u6784\u4f53\u672c\u8eab\u4e5f\u662f\u53ef\u4ee5\u6bd4\u8f83\u7684\uff0c\u4f7f\u7528 == != \uff0c\u4e0d\u652f\u6301 &gt; \u548c &lt;</li> <li>\u5982\u679c\u7ed3\u6784\u4f53\u7684\u6210\u5458\u8981\u88ab\u5305\u5916\u8c03\u7528\uff0c\u9700\u8981\u9996\u5b57\u6bcd\u5927\u5199</li> <li>\u88abnew\u751f\u6210\u7684\u7ed3\u6784\u4f53\u5b9e\u4f8b\u5176\u5b9e\u662f\u6307\u9488\u7c7b\u578b</li> <li>\u5bf9\u7ed3\u6784\u4f53\u8fdb\u884c<code>&amp;</code>\u53d6\u5730\u5740\u64cd\u4f5c\u65f6\uff0c\u4e5f\u53ef\u4ee5\u89c6\u4e3a\u5bf9\u8be5\u7c7b\u578b\u8fdb\u884c\u4e00\u6b21<code>new</code>\u7684\u5b9e\u4f8b\u5316\u64cd\u4f5c\u3002</li> </ul>","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_7","title":"\u7ed3\u6784\u4f53\u7684\u521b\u5efa\u548c\u4f7f\u7528","text":"","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_8","title":"\u57fa\u7840","text":"Go<pre><code>type Person struct {\n    name string\n    age int\n}\n\n//\u6309\u987a\u5e8f\u521d\u59cb\u5316\uff1a\u6bcf\u4e2a\u6210\u5458\u90fd\u5fc5\u987b\u521d\u59cb\u5316\nvar p1 Person = Person{\"lisi\", 20}\n\n//\u5236\u5b9a\u6210\u5458\u521d\u59cb\u5316\uff1a\u6ca1\u6709\u88ab\u521d\u59cb\u5316\u7684\uff0c\u81ea\u52a8\u8d4b\u96f6\u503c\np2 := Person{age:30}\n\n// new \u7533\u8bf7\u7ed3\u6784\u4f53\np3 := new(Person)      //\u88abnew\u751f\u6210\u7684\u7ed3\u6784\u4f53\u5b9e\u4f8b\u5176\u5b9e\u662f\u6307\u9488\u7c7b\u578b\np3.name = \"zs\"          //\u8fd9\u91cc\u7684.\u8bed\u6cd5\u53ea\u662f\u8bed\u6cd5\u7cd6\uff0c\u5c06p3.name\u8f6c\u6362\u6210\u4e86(*p3).name\np3.age = 27\n\n//\u76f4\u63a5\u58f0\u660e\nvar s4 Person\np4.name = \"ww\"\np4.age = 30\n\n//\u7ed3\u6784\u4f53\u5b9e\u4f8b\u5316\nins := &amp;T{}   //T\u662f\u7ed3\u6784\u4f53\u7c7b\u578b ,ins\u4e3a\u7ed3\u6784\u4f53\u7684\u5b9e\u4f8b\uff0c\u7c7b\u578b\u4e3a*T\uff0c\u662f\u6307\u9488\u7c7b\u578b\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_9","title":"\u5185\u5d4c\u7ed3\u6784\u4f53","text":"<ul> <li>\u5f53\u524d\u7ed3\u6784\u4f53\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u5176\u5185\u5d4c\u7ed3\u6784\u4f53\u7684\u5185\u90e8\u5b57\u6bb5</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\ntype Animal struct {\n    Age int\n}\n\ntype Person struct {\n    Animal\n    Name string\n}\n\ntype Student struct {\n    Person\n    ClassName string\n}\n\nfunc main() {\n\n    // \u521d\u59cb\u5316\u65b9\u5f0f1\n    s1 := Student{\n        Person{\n            Animal: Animal {\n                Age: 15,\n            },\n            Name:\"lisi\",\n        },\n        \"\u4e00\u73ed\",\n    }\n    fmt.Println(s1.Age)             // \u6b63\u786e\u8f93\u51fa15\n    fmt.Println(s1.Person.Name)     // \u6b63\u786e\u8f93\u51falisi\n\n    // \u521d\u59cb\u5316\u65b9\u5f0f2\n    var s2 Student\n    s2.Name = \"zs\"\n    s2.Age = 30\n    s2.ClassName = \"\u4e8c\u73ed\"\n    fmt.Println(s2.Age)             // \u6b63\u786e\u8f93\u51fa30\n    fmt.Println(s2.Person.Name)     // \u6b63\u786e\u8f93\u51fazs\n}\n</code></pre>","tags":["Go"]},{"location":"golang/gosyntax/go_point/#_10","title":"\u533f\u540d\u5b57\u6bb5","text":"<ul> <li>\u7ed3\u6784\u4f53\u7684\u5b57\u6bb5\u540d\u4e0e\u7c7b\u578b\u4e00\u4e00\u5bf9\u5e94\uff0c\u5982\u679c\u4e0d\u63d0\u4f9b\u540d\u5b57\uff0c\u5219\u4e3a\u533f\u540d\u5b57\u6bb5\u3002</li> <li>\u533f\u540d\u5b57\u6bb5\u5982\u679c\u662f\u4e00\u4e2astruct\uff0c\u8fd9\u4e2astruct\u62e5\u6709\u7684\u5168\u90e8\u5b57\u6bb5\u90fd\u88ab\u9690\u5f0f\u5f15\u5165\u4e86\u5f53\u524d\u7684struct\u3002</li> <li>\u4e0d\u4ec5\u4ec5\u662fstruct\uff0c\u5176\u4ed6\u6240\u6709\u5185\u7f6e\u7c7b\u578b\u548c\u81ea\u5b9a\u4e49\u7c7b\u578b\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u533f\u540d\u5b57\u6bb5\uff1a</li> </ul> Go<pre><code>package main\n\nimport \"fmt\"\n\ntype Person struct {\n    name string\n    age int\n}\n\ntype course []string\n\ntype Student struct {\n    Person                   // \u533f\u540d\u5b57\u6bb5\uff0c\u90a3\u4e48\u9ed8\u8ba4Student\u5c31\u5305\u542b\u4e86Person\u7684\u6240\u6709\u5b57\u6bb5\n    course                   // \u5185\u7f6e\u4e00\u4e2a\u5207\u7247\u7c7b\u578b\n    classroom string\n}\n\nfunc main() {\n\n    // \u521b\u5efa\u4e00\u4e2a\u5b66\u751f\n    s := Student{Person:Person{\"LiLei\", 17}, classroom:\"\u4e8c\u73ed\"}\n\n    // \u8bbf\u95ee\u8be5\u5b66\u751f\u5b57\u6bb5\n    fmt.Println(\"name = \", s.name)\n    fmt.Println(\"classroom =  \", s.classroom)\n\n    // \u4fee\u6539\u5b66\u751f\u7684\u8bfe\u7a0b\n    s.course = []string{\"\u8bed\u6587\", \"\u7f8e\u672f\"}\n    fmt.Println(\"course = \", s.course)          // [\u8bed\u6587 \u7f8e\u672f]\n}\n\n// \u5982\u679cPerson\u548cStudent\u4e2d\u90fd\u6709\u540c\u4e00\u4e2a\u5b57\u6bb5\uff0c\u90a3\u4e48Go\u4f1a\u4f18\u5148\u8bbf\u95ee\u5f53\u524d\u5c42\u3002\u4f8b\u5982\u4e8c\u8005\u90fd\u6709tel\u5b57\u6bb5\uff0c\u90a3\u4e48s.tel\u5c06\u4f1a\u8bbf\u95ee\u7684\u662fStudent\u4e2d\u7684\u6570\u636e\u3002\n</code></pre>","tags":["Go"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/","title":"Docker\u67b6\u6784\u548c\u539f\u7406\u5b66\u4e60","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker","title":"Docker\u4ecb\u7ecd","text":"<p>Docker\u5b98\u7f51\u5730\u5740</p> <ul> <li>Docker\u662f\u4e00\u6b3e\u7528Go\u8bed\u8a00\u5f00\u53d1\u7684\uff0c\u7528\u4e8e\u5f00\u53d1\u3001\u8fd0\u884c\u548c\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u653e\u7ba1\u7406\u5e73\u53f0\uff1b\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5728\u5b8c\u5168\u9694\u79bb\u73af\u5883\u4e2d\u8fd0\u884c\u548c\u6253\u5305\u5e94\u7528\u7a0b\u5e8f\u7684\u80fd\u529b\uff0c\u901a\u5e38\u5c06\u8fd9\u4e2a\u9694\u79bb\u7684\u73af\u5883\u6210\u4e3a\u5bb9\u5668\uff1b</li> <li>Docker\u5df2\u7ecf\u63d0\u4f9b\u5de5\u5177\u548c\u7ec4\u4ef6(Docker Client\u3001Docker Daemon\u7b49)\u6765\u7ba1\u7406\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\uff1a</li> <li>\u7531\u4e8e\u5bb9\u5668\u662f\u9694\u79bb\u7684\u73af\u5883\uff0c\u6240\u4ee5\u5176\u5177\u6709\u9694\u79bb\u6027\u548c\u5b89\u5168\u6027\uff1b</li> <li>\u53ef\u4ee5\u5728\u4e00\u4e2a\u5bbf\u4e3b\u673a\u4e0a\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u5bb9\u5668\uff0c\u4e14\u4e0d\u4f1a\u76f8\u4e92\u5e72\u6270\uff1b</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker_1","title":"Docker \u4e3b\u8981\u89e3\u51b3\u7684\u95ee\u9898","text":"<ul> <li>\u4fdd\u8bc1\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883\u7684\u4e00\u81f4\u6027\uff1b</li> <li>\u964d\u4f4e\u914d\u7f6e\u5f00\u53d1\u73af\u5883\u3001\u751f\u4ea7\u73af\u5883\u7684\u590d\u6742\u5ea6\u548c\u6210\u672c\uff1b</li> <li>\u5b9e\u73b0\u7a0b\u5e8f\u7684\u5feb\u901f\u90e8\u7f72\u548c\u5206\u53d1\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker_2","title":"Docker\u548c\u865a\u62df\u673a\u7684\u533a\u522b","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker-cs","title":"Docker\u67b6\u6784 (C/S)","text":"<p>Docker\u662f\u4e00\u79cdC/S\u67b6\u6784\u7684\u4ea7\u54c1\uff08Docker Engine\uff09</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#dockerdocker-engine","title":"Docker\u5f15\u64ce\uff08Docker Engine\uff09","text":"<ul> <li>Server\u7aef\uff1a\u672c\u8d28\u4e0a\u4e00\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff08docker daemon\uff09,\u4e3b\u8981\u7684\u804c\u8d23\u662f\u8d1f\u8d23\u521b\u5efa\u5e76\u7ba1\u7406Docker\u7684\u5bf9\u8c61\uff08\u955c\u50cf\u3001\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u6570\u636e\u5377\uff09</li> <li>REST API: \u4e00\u5957\u7528\u4e8e\u4e0e\u548cDocker Daemon\u901a\u4fe1\u7684\u63a5\u53e3\u534f\u8bae</li> <li>Client\u7aef\uff1a\u672c\u8d28\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u63a5\u53e3\uff08Command Line Interface\uff09,\u4e3b\u8981\u7684\u804c\u8d23\u662f\u63a5\u6536\u7528\u6237\u5728\u547d\u4ee4\u884c\u7684\u6307\u4ee4\uff0c\u901a\u8fc7\u534f\u8bae\uff08REST API\uff09\u76f4\u63a5\u64cd\u4f5cDocker Daemon\u6267\u884c\u7528\u6237\u64cd\u4f5c\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#_1","title":"\u7ed3\u6784\u56fe","text":"<ul> <li>Docker\u5ba2\u6237\u7aef(Docker Client)</li> <li>Docker\u5ba2\u6237\u7aef(Docker Client)\u662f\u7528\u6237\u4e0eDocker\u8fdb\u884c\u4ea4\u4e92\u7684\u6700\u4e3b\u8981\u65b9\u5f0f\u3002\u5f53\u5728\u7ec8\u7aef\u8f93\u5165docker\u547d\u4ee4\u65f6\uff0c\u5bf9\u5e94\u7684\u5c31\u4f1a\u5728\u670d\u52a1\u7aef\u4ea7\u751f\u5bf9\u5e94\u7684\u4f5c\u7528\uff0c\u5e76\u628a\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002Docker Client\u9664\u4e86\u8fde\u63a5\u672c\u5730\u670d\u52a1\u7aef\uff0c\u901a\u8fc7\u66f4\u6539\u6216\u6307\u5b9aDOCKER_HOST\u8fde\u63a5\u8fdc\u7a0b\u670d\u52a1\u7aef\u3002</li> <li>Docker\u670d\u52a1\u7aef(Docker Server)</li> <li>Docker Daemon\u5176\u5b9e\u5c31\u662fDocker \u7684\u670d\u52a1\u7aef\u3002\u5b83\u8d1f\u8d23\u76d1\u542cDocker API\u8bf7\u6c42(\u5982Docker Client)\u5e76\u7ba1\u7406Docker\u5bf9\u8c61(Docker Objects)\uff0c\u5982\u955c\u50cf\u3001\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u6570\u636e\u5377\u7b49</li> <li>Docker Registries</li> <li>\u4fd7\u79f0Docker\u4ed3\u5e93\uff0c\u4e13\u95e8\u7528\u4e8e\u5b58\u50a8\u955c\u50cf\u7684\u4e91\u670d\u52a1\u73af\u5883.</li> <li>Docker Hub\u5c31\u662f\u4e00\u4e2a\u516c\u6709\u7684\u5b58\u653e\u955c\u50cf\u7684\u5730\u65b9\uff0c\u7c7b\u4f3cGithub\u5b58\u50a8\u4ee3\u7801\u6587\u4ef6\u3002\u540c\u6837\u7684\u4e5f\u53ef\u4ee5\u7c7b\u4f3cGithub\u90a3\u6837\u642d\u5efa\u79c1\u6709\u7684\u4ed3\u5e93\u3002</li> <li>Docker \u5bf9\u8c61(Docker Objects)</li> <li>Image\uff08\u955c\u50cf\uff09\uff1a\u4e00\u4e2aDocker\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u62ec\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u6240\u6709\u4ee3\u7801\u5185\u5bb9\u3001\u4f9d\u8d56\u5e93\u3001\u73af\u5883\u53d8\u91cf\u548c\u914d\u7f6e\u6587\u4ef6\u7b49\u3002</li> <li>Container\uff08\u5bb9\u5668\uff09\uff1a\u955c\u50cf\u88ab\u8fd0\u884c\u8d77\u6765\u540e\u7684\u5b9e\u4f8b\u3002</li> <li>Network\uff08\u7f51\u7edc\uff09\uff1a\u5916\u90e8\u6216\u8005\u5bb9\u5668\u95f4\u5982\u4f55\u4e92\u76f8\u8bbf\u95ee\u7684\u7f51\u7edc\u65b9\u5f0f\uff0c\u5982host\u6a21\u5f0f\u3001bridge\u6a21\u5f0f\u3002</li> <li>Volume\uff08\u6570\u636e\u5377\uff09\uff1a\u5bb9\u5668\u4e0e\u5bbf\u4e3b\u673a\u4e4b\u95f4\u3001\u5bb9\u5668\u4e0e\u5bb9\u5668\u4e4b\u95f4\u5171\u4eab\u5b58\u50a8\u65b9\u5f0f\uff0c\u7c7b\u4f3c\u865a\u62df\u673a\u4e0e\u4e3b\u673a\u4e4b\u95f4\u7684\u5171\u4eab\u6587\u4ef6\u76ee\u5f55\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_arch_and_principle/#docker_3","title":"Docker \u5e95\u5c42\u6280\u672f\u5b9e\u73b0","text":"<ul> <li>Docker\u4f7f\u7528Go\u8bed\u8a00\u5b9e\u73b0\u3002</li> <li>Docker\u5229\u7528linux\u5185\u6838\u7684\u51e0\u4e2a\u7279\u6027\u6765\u5b9e\u73b0\u529f\u80fd:</li> <li>\u5229\u7528linux\u7684\u547d\u540d\u7a7a\u95f4(Namespaces)</li> <li>\u5229\u7528linux\u63a7\u5236\u7ec4(Control Groups)</li> <li>\u5229\u7528linux\u7684\u8054\u5408\u6587\u4ef6\u7cfb\u7edf(Union File Systems)</li> <li>Docker\u53ea\u80fd\u5728linux\u4e0a\u8fd0\u884c\uff0c\u5728windows\u3001MacOS\u4e0a\u8fd0\u884cDocker\uff0c\u5176\u5b9e\u672c\u8d28\u4e0a\u662f\u501f\u52a9\u4e86\u865a\u62df\u5316\u6280\u672f\uff0c\u7136\u540e\u5728linux\u865a\u62df\u673a\u4e0a\u8fd0\u884c\u7684Docker\u7a0b\u5e8f</li> <li>\u5bb9\u5668\u683c\u5f0f\uff08 Container Format \uff09:</li> <li>Docker Engine\u5c06namespace\u3001cgroups\u3001UnionFS\u8fdb\u884c\u7ec4\u5408\u540e\u7684\u4e00\u4e2apackage\uff0c\u5c31\u662f\u4e00\u4e2a\u5bb9\u5668\u683c\u5f0f(Container Format)\u3002Docker\u901a\u8fc7\u5bf9\u8fd9\u4e2apackage\u4e2d\u7684namespace\u3001cgroups\u3001UnionFS\u8fdb\u884c\u7ba1\u7406\u63a7\u5236\u5b9e\u73b0\u5bb9\u5668\u7684\u521b\u5efa\u548c\u751f\u547d\u5468\u671f\u7ba1\u7406\u3002</li> <li>\u5bb9\u5668\u683c\u5f0f(Container Format)\u6709\u591a\u79cd\uff0c\u5176\u4e2dDocker\u76ee\u524d\u4f7f\u7528\u7684\u5bb9\u5668\u683c\u5f0f\u88ab\u79f0\u4e3alibcontainer</li> <li>Namespaces\uff08\u547d\u540d\u7a7a\u95f4\uff09\uff1a\u4e3aDocker\u5bb9\u5668\u63d0\u4f9b\u64cd\u4f5c\u7cfb\u7edf\u5c42\u9762\u7684\u9694\u79bb</li> <li>\u8fdb\u7a0b\u53f7\u9694\u79bb\uff1a\u6bcf\u4e00\u4e2a\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u53f7\u603b\u662f\u4ece1\u5f00\u59cb\u8d77\u7b97</li> <li>\u7f51\u7edc\u9694\u79bb\uff1a\u5bb9\u5668\u7684\u7f51\u7edc\u4e0e\u5bbf\u4e3b\u673a\u6216\u5176\u4ed6\u5bb9\u5668\u7684\u7f51\u7edc\u662f\u9694\u79bb\u7684\u3001\u5206\u5f00\u7684\uff0c\u4e5f\u5c31\u662f\u76f8\u5f53\u4e8e\u4e24\u4e2a\u7f51\u7edc</li> <li>\u8fdb\u7a0b\u95f4\u901a\u9694\u79bb\uff1a\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u4e0e\u5bbf\u4e3b\u673a\u6216\u5176\u4ed6\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u662f\u4e92\u76f8\u4e0d\u53ef\u89c1\u7684\uff0c\u901a\u4fe1\u9700\u8981\u501f\u52a9\u7f51\u7edc</li> <li>\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u9694\u79bb: \u5bb9\u5668\u62e5\u6709\u81ea\u5df1\u5355\u72ec\u7684\u5de5\u4f5c\u76ee\u5f55</li> <li>\u5185\u6838\u4ee5\u53ca\u7cfb\u7edf\u7248\u672c\u53f7\u9694\u79bb\uff1a\u5bb9\u5668\u67e5\u770b\u5185\u6838\u7248\u672c\u53f7\u6216\u8005\u7cfb\u7edf\u7248\u672c\u53f7\u65f6\uff0c\u67e5\u770b\u7684\u662f\u5bb9\u5668\u7684\uff0c\u800c\u975e\u5bbf\u4e3b\u673a\u7684</li> <li>Control Groups\uff08\u63a7\u5236\u7ec4-cgroups\uff09\uff1a\u4e3aDocker\u5bb9\u5668\u63d0\u4f9b\u786c\u4ef6\u5c42\u9762\u7684\u9694\u79bb</li> <li>\u63a7\u5236\u7ec4\u80fd\u63a7\u5236\u5e94\u7528\u7a0b\u5e8f\u6240\u4f7f\u7528\u7684\u786c\u4ef6\u8d44\u6e90\u3002</li> <li>\u57fa\u4e8e\u8be5\u7279\u6027\uff0c\u63a7\u5236\u7ec4\u5e2e\u52a9docker\u5f15\u64ce\u5c06\u786c\u4ef6\u8d44\u6e90\u5171\u4eab\u7ed9\u5bb9\u5668\u4f7f\u7528\uff0c\u5e76\u4e14\u52a0\u4ee5\u7ea6\u675f\u548c\u9650\u5236\u3002\u5982\u63a7\u5236\u5bb9\u5668\u6240\u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f\u3002</li> <li>Union File Systems\uff08\u8054\u5408\u6587\u4ef6\u7cfb\u7edf--UnionFS\uff09\uff1a\u5229\u7528\u5206\u5c42(layer)\u601d\u60f3\u7ba1\u7406\u955c\u50cf\u548c\u5bb9\u5668</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/","title":"Docker\u5e38\u7528\u547d\u4ee4\u901f\u67e5","text":"<p>docker \u76ee\u5f55\uff1a - /etc/docker/   -----------&gt; docker\u7684\u8ba4\u8bc1\u76ee\u5f55 - /var/lib/docker/ ----------&gt; docker \u7684\u5e94\u7528\u5b89\u88c5\u76ee\u5f55</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_1","title":"\u955c\u50cf\u7ba1\u7406\u547d\u4ee4","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_2","title":"\u641c\u7d22\u955c\u50cf","text":"Bash<pre><code>docker search [iamge_name]\n# eg:\ndocker search centos   \n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_3","title":"\u83b7\u53d6\u955c\u50cf","text":"Bash<pre><code>docker pull [iamge_name]\n# eg:\ndocker pull centos   \n\n# \u5907\u6ce8\uff1a\u83b7\u53d6\u7684\u955c\u50cf\u5b58\u5728\u5728/var/lib/docekr \u76ee\u5f55\u91cc\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_4","title":"\u67e5\u770b\u955c\u50cf","text":"Bash<pre><code># \u67e5\u770b\u6307\u5b9a\u955c\u50cf\ndocker images &lt;image_name&gt;\n\n# \u67e5\u770b\u6240\u6709\u955c\u50cf\ndocker images\ndocker image ls\n\n# \u67e5\u770b\u6240\u6709\u672c\u5730\u7684iamges,\u5305\u62ec\u5df2\u5220\u9664\u7684\u955c\u50cf\u8bb0\u5f55\ndocker images -a\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_5","title":"\u67e5\u770b\u955c\u50cf\u5386\u53f2","text":"Bash<pre><code>docker history [image_name]\n# \u53ef\u4ee5\u67e5\u770b\u6b64\u955c\u50cf\u9ed8\u8ba4\u542f\u52a8\u4e86\u54ea\u4e9b\u547d\u4ee4\uff0c\u6216\u8005\u5c01\u8d26\u4e86\u54ea\u4e9b\u7cfb\u7edf\u5c42\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_6","title":"\u91cd\u547d\u540d\u955c\u50cf","text":"Bash<pre><code>docker tag [old_image]:[old_version] [new_image]:[new_version]\n# eg:\ndocker tag nginx:latest sswang-nginx:v1.0\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_7","title":"\u5220\u9664\u955c\u50cf","text":"Bash<pre><code>docker rmi [image_id/image_name:image_version]\n# eg:\ndocker rmi 3fa822599e10 \n\n# \u5982\u679c\u4e00\u4e2aimage_id\u5b58\u5728\u591a\u4e2a\u540d\u79f0\uff0c\u90a3\u4e48\u5e94\u8be5\u4f7f\u7528name:tag\u7684\u683c\u5f0f\u5220\u9664\u955c\u50cf\u6e05\u9664\u72b6\u6001\u4e3adangling\u7684\u955c\u50cf\ndocker image prune \n\n# \u79fb\u9664\u6240\u6709\u672a\u88ab\u4f7f\u7528\u7684\u955c\u50cf\ndocker image prune -a\n\n# \u5220\u9664\u90e8\u5206\u955c\u50cf\ndocker image prune -a --filter \"until=24h\"\n\n# \u5220\u9664\u5168\u90e8\u7684images\uff0c\ndocker rmi $(docker images -q)\ndocker rmi -f $(docker images -q)  # \u5f3a\u5236\u5220\u9664\u52a0-f\n\n# \u5220\u9664\u6240\u6709\u60ac\u6302\u72b6\u6001\u7684\u955c\u50cf\ndocker image rm $(docker image ls -f dangling=true -q)\ndocker image \n\n# \u5220\u9664untagged images\uff0c\u4e5f\u5c31\u662f\u90a3\u4e9bid\u4e3a\u7684image\u7684\u8bdd\u53ef\u4ee5\u7528\ndocker rmi $(docker images | grep \"^\" | awk \"{print $3}\") \n\n# \u5220\u9664\u6240\u6709\u4e0d\u4f7f\u7528\u7684\u955c\u50cf\ndocker image prune --force --all\u6216\u8005docker image prune -f -a\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_8","title":"\u5b9a\u5236\u955c\u50cf","text":"<ul> <li> <p>\u5f53\u6211\u4eec\u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u7684\u65f6\u5019\uff08\u5982\u679c\u4e0d\u4f7f\u7528\u5377\u7684\u8bdd\uff09\uff0c\u6211\u4eec\u505a\u7684\u4efb\u4f55\u6587\u4ef6\u4fee\u6539\u90fd\u4f1a\u88ab\u8bb0\u5f55\u4e8e\u5bb9\u5668\u5b58\u50a8\u5c42\u91cc\u3002\u800c Docker \u63d0\u4f9b\u4e86\u4e00\u4e2a<code>docker commit</code>\u547d\u4ee4\uff0c\u53ef\u4ee5\u5c06\u5bb9\u5668\u7684\u5b58\u50a8\u5c42\u4fdd\u5b58\u4e0b\u6765\u6210\u4e3a\u955c\u50cf\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f\u5728\u539f\u6709\u955c\u50cf\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u53e0\u52a0\u4e0a\u5bb9\u5668\u7684\u5b58\u50a8\u5c42\uff0c\u5e76\u6784\u6210\u65b0\u7684\u955c\u50cf\u3002\u4ee5\u540e\u6211\u4eec\u8fd0\u884c\u8fd9\u4e2a\u65b0\u955c\u50cf\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u62e5\u6709\u539f\u6709\u5bb9\u5668\u6700\u540e\u7684\u6587\u4ef6\u53d8\u5316\u3002 Bash<pre><code>docker run --name webserver -d -p 80:80 nginx  # \u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\n\ndocker commit \\\n --author \"wss\" \\\n --message \"\u4fee\u6539\u4e86\u5185\u5bb9\" \\\n webserver \\\n nginx:v2 \n\n # webserver \u542f\u52a8\u7684\u5bb9\u5668\n</code></pre></p> </li> <li> <p>\u53ef\u4ee5\u4f7f\u7528docker diff \u67e5\u770b\u4fee\u6539\u7684\u5185\u5bb9</p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_9","title":"\u5bfc\u5165\u5bfc\u51fa\u955c\u50cf\u65b9\u5f0f\u4e00\uff1a","text":"Bash<pre><code>docker save -o [\u5305\u6587\u4ef6] [\u955c\u50cf]   # docker save \u4f1a\u4fdd\u5b58\u955c\u50cf\u7684\u6240\u6709\u5386\u53f2\u8bb0\u5f55\u548c\u5143\u6570\u636e\u4fe1\u606f\ndocker save [\u955c\u50cf 1] ... [\u955c\u50cf n] &gt; [\u5305\u6587\u4ef6]\n# eg:\ndocker save -o nginx.tar sswang-nginx\n\ndocker load &lt; [image.tar_name]  # docker load \u4e0d\u80fd\u6307\u5b9a\u955c\u50cf\u7684\u540d\u79f0\ndocker load --input [image.tar_name]\n# eg:\ndocker load &lt; nginx.tar\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_10","title":"\u5bfc\u5165\u5bfc\u51fa\u955c\u50cf\u65b9\u5f0f\u4e8c","text":"Bash<pre><code># cat \u955c\u50cf\u538b\u7f29\u5305 | docker import \u955c\u50cf\u540d\uff1a\u7248\u672c   \ncat op_docker_img.tar | docker import - op_docker:v1\n\n# \u955c\u50cf\u5bfc\u5165\u5230\u672c\u5730  \ndocker export \u955c\u50cfid &gt; \u672c\u5730\u4fdd\u5b58\u8def\u5f84.tar\n\n# \u672c\u5730\u5bfc\u5165\u955c\u50cf\ndocker import - \u955c\u50cf\u540d &lt; \u672c\u5730\u4fdd\u5b58\u8def\u5f84.tar\n</code></pre> <p>\u4e0a\u4f20\u955c\u50cf\u5230\u4ed3\u5e93 Bash<pre><code>docker login   \ndocker pushdocker push \u955c\u50cf\u540d\uff1atags\n</code></pre></p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_11","title":"\u5bb9\u5668\u7ba1\u7406\u547d\u4ee4","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_12","title":"\u67e5\u770b\u5bb9\u5668","text":"Bash<pre><code>docker ps  # ps \u663e\u793a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\ndocker ps -a  # \u663e\u793a\u6240\u6709\u8fd0\u884c\u8fc7\u7684\u5bb9\u5668\uff0c\u5305\u62ec\u5df2\u7ecf\u4e0d\u8fd0\u884c\u7684\u5bb9\u5668\ndocker container ls  # \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\ndocker ps -aq  # \u5217\u51fa\u6240\u6709\u7684\u5bb9\u5668id\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_13","title":"\u542f\u52a8\uff08\u8fd0\u884c\uff09\u5bb9\u5668","text":"Bash<pre><code>docker run &lt;\u53c2\u6570\uff0c\u53ef\u9009&gt; [docker_image] [\u6267\u884c\u7684\u547d\u4ee4]\ndocker run -d nginx  # -d \u8868\u793a\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u8fd0\u884c\n-i \u8868\u793a\u4ee5\u201c\u4ea4\u4e92\u6a21\u5f0f\u201d\u8fd0\u884c\u5bb9\u5668\n-t \u8868\u793a\u5bb9\u5668\u542f\u52a8\u540e\u4f1a\u8fdb\u5165\u5176\u547d\u4ee4\u884c\u3002\u52a0\u5165\u8fd9\u4e24\u4e2a\u53c2\u6570\u540e\uff0c\u5bb9\u5668\u521b\u5efa\u5c31\u80fd\u767b\u5f55\u8fdb\u53bb\u3002\u5373 \u5206\u914d\u4e00\u4e2a\u4f2a\u7ec8\u7aef\u3002\n--name \u4e3a\u521b\u5efa\u7684\u5bb9\u5668\u547d\u540d\n-v \u8868\u793a\u76ee\u5f55\u6620\u5c04\u5173\u7cfb(\u524d\u8005\u662f\u5bbf\u4e3b\u673a\u76ee\u5f55\uff0c\u540e\u8005\u662f\u6620\u5c04\u5230\u5bbf\u4e3b\u673a\u4e0a\u7684\u76ee\u5f55\uff0c\u5373 \u5bbf\u4e3b\u673a\u76ee\u5f55:\u5bb9\u5668\u4e2d\u76ee\u5f55)\uff0c\u53ef\u4ee5\u4f7f \u7528\u591a\u4e2a-v \u505a\u591a\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6\u6620\u5c04\u3002\u6ce8\u610f:\u6700\u597d\u505a\u76ee\u5f55\u6620\u5c04\uff0c\u5728\u5bbf\u4e3b\u673a\u4e0a\u505a\u4fee\u6539\uff0c\u7136\u540e \u5171\u4eab\u5230\u5bb9\u5668\u4e0a\u3002\n-d \u5728run\u540e\u9762\u52a0\u4e0a-d\u53c2\u6570,\u5219\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b88\u62a4\u5f0f\u5bb9\u5668\u5728\u540e\u53f0\u8fd0\u884c(\u8fd9\u6837\u521b\u5efa\u5bb9\u5668\u540e\u4e0d \u4f1a\u81ea\u52a8\u767b\u5f55\u5bb9\u5668\uff0c\u5982\u679c\u53ea\u52a0-i -t \u4e24\u4e2a\u53c2\u6570\uff0c\u521b\u5efa\u540e\u5c31\u4f1a\u81ea\u52a8\u8fdb\u53bb\u5bb9\u5668)\u3002\n-p \u8868\u793a\u7aef\u53e3\u6620\u5c04\uff0c\u524d\u8005\u662f\u5bbf\u4e3b\u673a\u7aef\u53e3\uff0c\u540e\u8005\u662f\u5bb9\u5668\u5185\u7684\u6620\u5c04\u7aef\u53e3\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a-p \u505a\u591a\u4e2a\u7aef\u53e3\u6620\u5c04\n-e \u4e3a\u5bb9\u5668\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\n--network=host \u8868\u793a\u5c06\u4e3b\u673a\u7684\u7f51\u7edc\u73af\u5883\u6620\u5c04\u5230\u5bb9\u5668\u4e2d\uff0c\u5bb9\u5668\u7684\u7f51\u7edc\u4e0e\u4e3b\u673a\u76f8\u540c\n\n\n\n# \u542f\u52a8\u5df2\u7ecf\u7ec8\u6b62\u7684\u5bb9\u5668\ndocker start [container_id]\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_14","title":"\u5173\u95ed\u5bb9\u5668","text":"Bash<pre><code>docker stop [container_id]\n# eg:\ndocker stop 8005c40a1d16\n\ndocker stop $(docker ps -aq)   # \u505c\u6b62\u6240\u6709\u7684container\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_15","title":"\u5220\u9664\u5bb9\u5668","text":"Bash<pre><code># \u6b63\u5e38\u5220\u9664\u5bb9\u5668\ndocker rm [container_id]\ndocker container prune  # \u5220\u9664\u6240\u6709\u505c\u6b62\u7684\u5bb9\u5668\n# eg:\ndocker rm 1a5f6a0c9443\n\n# \u5f3a\u5236\u5220\u9664\ndocker rm -f [container_id]\n# eg:\ndocker rm -f 8005c40a1d16\n\n# \u5220\u9664\u90e8\u5206\u5bb9\u5668\ndocker container prune --filter \"until=24h\"\n\n# \u6279\u91cf\u5173\u95ed\u5bb9\u5668\ndocker rm -f $(docker ps -aq)\n\n# \u4e00\u952e\u5220\u9664\u6240\u6709\u5df2\u7ecf\u505c\u6b62\u7684\u5bb9\u5668\ndocker container prune\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_16","title":"\u6e05\u9664\u5bb9\u5668","text":"Bash<pre><code>docker system prune  # \u53ef\u4ee5\u7528\u4e8e\u6e05\u7406\u78c1\u76d8\uff0c\u5220\u9664\u5173\u95ed\u7684\u5bb9\u5668\u3001\u65e0\u7528\u7684\u6570\u636e\u5377\u548c\u7f51\u7edc\uff0c\u4ee5\u53ca dangling \u955c\u50cf\uff08\u5373\u65e0 tag \u7684\u955c\u50cf\uff09\u3002\ndocker system prune -a # \u6e05\u7406\u5f97\u66f4\u52a0\u5f7b\u5e95\uff0c\u53ef\u4ee5\u5c06\u6ca1\u6709\u5bb9\u5668\u4f7f\u7528 Docker\u955c\u50cf\u90fd\u5220\u6389\u3002\n\ndocker container prune : \u4ec5\u5220\u9664\u505c\u6b62\u8fd0\u884c\u7684\u5bb9\u5668\u3002\ndocker ps -aq \u540c\u4e0a\n\ndocker rm -f $(docker ps -aq) : \u5220\u9664\u6240\u6709\u5bb9\u5668\uff08\u5305\u62ec\u505c\u6b62\u7684\u3001\u6b63\u5728\u8fd0\u884c\u7684\uff09\u3002\ndocker container rm -f $(docker container ls -aq) : \u540c\u4e0a\u3002\n\ndocker builder prune  # \u5220\u9664 build cache\u3002\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_17","title":"\u67e5\u770b\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5","text":"Bash<pre><code>docker system df \n\n[root@centos801 bluewhale]# docker system df\nTYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE\nImages          14        10        2.671GB   1.267GB (47%)\nContainers      19        17        125.2kB   0B (0%)\nLocal Volumes   0         0         0B        0B\nBuild Cache     0         0         0B        0B\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_18","title":"\u8fdb\u5165\u5bb9\u5668","text":"<p>docker \u5bb9\u5668\u542f\u52a8\u547d\u4ee4\u53c2\u6570\u8be6\u89e3\uff1a --name:\u7ed9\u5bb9\u5668\u5b9a\u4e49\u4e00\u4e2a\u540d\u79f0 -i:\u5219\u8ba9\u5bb9\u5668\u7684\u6807\u51c6\u8f93\u5165\u4fdd\u6301\u6253\u5f00\u3002 -t:\u8ba9docker\u5206\u914d\u4e00\u4e2a\u4f2a\u7ec8\u7aef,\u5e76\u7ed1\u5b9a\u5230\u5bb9\u5668\u7684\u6807\u51c6\u8f93\u5165\u4e0a /bin/bash:\u6267\u884c\u4e00\u4e2a\u547d\u4ee4</p> Bash<pre><code># \u521b\u5efa\u5e76\u8fdb\u5165\u5bb9\u5668\ndocker run --name [container_name] -it [docker_image] /bin/bash\n\n# \u624b\u5de5\u65b9\u5f0f\u8fdb\u5165\u5bb9\u5668\ndocker exec -it \u5bb9\u5668id /bin/bash\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_19","title":"\u9000\u51fa\u5bb9\u5668","text":"Bash<pre><code>exit\nCtrl + D\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_20","title":"\u57fa\u4e8e\u5bb9\u5668\u521b\u5efa\u955c\u50cf","text":"Bash<pre><code>docker commit -m '\u6539\u52a8\u4fe1\u606f' -a \"\u4f5c\u8005\u4fe1\u606f\" [container_id] [new_image:tag]\n# eg:\ndocker commit -m 'mkdir /sswang' -a \"sswang\" d74fff341687 sswang-nginx:v0.2\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_21","title":"\u67e5\u770b\u65e5\u5fd7","text":"Bash<pre><code># \u67e5\u770b\u5bb9\u5668\u8fd0\u884c\u65e5\u5fd7\ndocker logs [\u5bb9\u5668id]\n# eg:\ndocker logs 7c5a24a68f96\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_22","title":"\u67e5\u770b\u4fe1\u606f","text":"Bash<pre><code># \u67e5\u770b\u5bb9\u5668\u5168\u90e8\u4fe1\u606f\ndocker inspect [\u5bb9\u5668id]\n# eg:\ndocker inspect 930f29ccdf8a\n\n# \u67e5\u770b\u5bb9\u5668\u7f51\u7edc\u4fe1\u606f\ndocker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' 930f29ccdf8a\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_23","title":"\u6570\u636e\u7ba1\u7406\u547d\u4ee4","text":"<p><code>\u6570\u636e\u5377</code>\u662f\u4e00\u4e2a\u53ef\u4f9b\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u4f7f\u7528\u7684\u7279\u6b8a\u76ee\u5f55\uff0c\u5b83\u7ed5\u8fc7<code>UFS</code>\uff0c\u53ef\u4ee5\u63d0\u4f9b\u5f88\u591a\u6709\u7528\u7684\u7279\u6027\uff1a</p> <ul> <li>\u6570\u636e\u5377 \u53ef\u4ee5\u5728\u5bb9\u5668\u4e4b\u95f4\u5171\u4eab\u548c\u91cd\u7528</li> <li>\u5bf9 \u6570\u636e\u5377 \u7684\u4fee\u6539\u4f1a\u7acb\u9a6c\u751f\u6548</li> <li>\u5bf9 \u6570\u636e\u5377 \u7684\u66f4\u65b0\uff0c\u4e0d\u4f1a\u5f71\u54cd\u955c\u50cf</li> <li> <p>\u6570\u636e\u5377 \u9ed8\u8ba4\u4f1a\u4e00\u76f4\u5b58\u5728\uff0c\u5373\u4f7f\u5bb9\u5668\u88ab\u5220\u9664</p> <p>\u6570\u636e\u5377 \u7684\u4f7f\u7528\uff0c\u7c7b\u4f3c\u4e8e Linux \u4e0b\u5bf9\u76ee\u5f55\u6216\u6587\u4ef6\u8fdb\u884c mount\uff0c\u955c\u50cf\u4e2d\u7684\u88ab\u6307\u5b9a\u4e3a\u6302\u8f7d\u70b9\u7684\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u4f1a\u9690\u85cf\u6389\uff0c\u80fd\u663e\u793a\u770b\u7684\u662f\u6302\u8f7d\u7684 \u6570\u636e\u5377\u3002</p> </li> <li> <p>\u9009\u62e9 -v \u8fd8\u662f -\u2013mount \u53c2\u6570\uff1a Docker \u65b0\u7528\u6237\u5e94\u8be5\u9009\u62e9<code>--mount</code>\u53c2\u6570\uff0c\u7ecf\u9a8c\u4e30\u5bcc\u7684 Docker \u4f7f\u7528\u8005\u5bf9<code>-v</code>\u6216\u8005\u00a0<code>--volume</code>\u5df2\u7ecf\u5f88\u719f\u6089\u4e86\uff0c\u4f46\u662f\u63a8\u8350\u4f7f\u7528<code>--mount</code>\u53c2\u6570\u3002</p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_24","title":"\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5377\uff1a","text":"Bash<pre><code>docker volume create my-vol\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_25","title":"\u67e5\u770b\u6240\u6709\u7684\u6570\u636e\u5377\uff1a","text":"Bash<pre><code>$ docker volume ls\nlocal               my-vol\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_26","title":"\u5728\u4e3b\u673a\u91cc\u67e5\u770b\u6307\u5b9a\u6570\u636e\u5377\u7684\u4fe1\u606f","text":"Bash<pre><code>$ docker volume inspect my-vol\n[\n    {\n        \"Driver\": \"local\",\n        \"Labels\": {},\n        \"Mountpoint\": \"/var/lib/docker/volumes/my-vol/_data\",\n        \"Name\": \"my-vol\",\n        \"Options\": {},\n        \"Scope\": \"local\"\n    }\n]\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#run","title":"\u5728\u8fd0\u884crun\u547d\u4ee4\u65f6\u6302\u8f7d\u6570\u636e\u5377","text":"<ul> <li>\u4f7f\u7528<code>--mount</code>\u6807\u8bb0\u6765\u5c06 \u6570\u636e\u5377 \u6302\u8f7d\u5230\u5bb9\u5668\u91cc</li> <li>\u5728\u4e00\u6b21<code>docker run</code>\u4e2d\u53ef\u4ee5\u6302\u8f7d\u591a\u4e2a \u6570\u636e\u5377\u3002 Bash<pre><code>$ docker run -d -P \\\n    --name web \\\n    # -v my-vol:/wepapp \\\n    --mount source=my-vol,target=/webapp \\\n    training/webapp \\\n    python app.py\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_27","title":"\u67e5\u770b\u6570\u636e\u5377\u7684\u5177\u4f53\u4fe1\u606f","text":"Bash<pre><code>$ docker inspect web\n...\n\"Mounts\": [\n    {\n        \"Type\": \"volume\",\n        \"Name\": \"my-vol\",\n        \"Source\": \"/var/lib/docker/volumes/my-vol/_data\",\n        \"Destination\": \"/app\",\n        \"Driver\": \"local\",\n        \"Mode\": \"\",\n        \"RW\": true,\n        \"Propagation\": \"\"\n    }\n],\n...\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_28","title":"\u5220\u9664\u6570\u636e\u5377\uff1a","text":"<ul> <li>\u6570\u636e\u5377\u4f5c\u7528\u7528\u6765\u6570\u636e\u6301\u4e45\u5316\uff0c\u72ec\u7acb\u4e8e\u5bb9\u5668\u4e4b\u5916\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u5bb9\u5668\u88ab\u5220\u9664\u800c\u6570\u636e\u5377\u88ab\u5220\u9664\u7684</li> <li> <p>\u5982\u679c\u9700\u8981\u5728\u5220\u9664\u5bb9\u5668\u7684\u540c\u65f6\u79fb\u9664\u6570\u636e\u5377\u3002\u53ef\u4ee5\u5728\u5220\u9664\u5bb9\u5668\u7684\u65f6\u5019\u4f7f\u7528<code>docker rm -v</code>\u8fd9\u4e2a\u547d\u4ee4\u3002 Bash<pre><code>docker volume rm my-vol\n</code></pre></p> </li> <li> <p>\u65e0\u4e3b\u7684\u6570\u636e\u5377\u53ef\u80fd\u4f1a\u5360\u636e\u5f88\u591a\u7a7a\u95f4\uff0c\u8981\u6e05\u7406\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4 Bash<pre><code>docker volume prune\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_29","title":"\u6302\u8f7d\u4e3b\u673a\u76ee\u5f55","text":"<ul> <li>Docker \u65b0\u7528\u6237\u5e94\u8be5\u9009\u62e9 --mount \u53c2\u6570</li> <li>\u7ecf\u9a8c\u4e30\u5bcc\u7684 Docker \u4f7f\u7528\u8005\u5bf9 -v \u6216\u8005 --volume \u5df2\u7ecf\u5f88\u719f\u6089\u4e86</li> <li>\u63a8\u8350\u4f7f\u7528 --mount \u53c2\u6570\u3002</li> <li>\u5907\u6ce8\uff1a</li> <li>-v:\u5982\u679c\u672c\u5730\u76ee\u5f55\u4e0d\u5b58\u5728 Docker \u4f1a\u81ea\u52a8\u4e3a\u4f60\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939</li> <li>--mount \u53c2\u6570\u65f6\u5982\u679c\u672c\u5730\u76ee\u5f55\u4e0d\u5b58\u5728\uff0cDocker \u4f1a\u62a5\u9519\u3002</li> <li> <p>Docker \u6302\u8f7d\u4e3b\u673a\u76ee\u5f55\u7684\u9ed8\u8ba4\u6743\u9650\u662f \u8bfb\u5199\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u589e\u52a0<code>readonly</code>\u6307\u5b9a\u4e3a \u53ea\u8bfb\u3002 Bash<pre><code>$ docker run -d -P \\\n    --name web \\\n    # -v /src/webapp:/opt/webapp \\\n    --mount type=bind,source=/src/webapp,target=/opt/webapp, readonly \\\n    training/webapp \\\n    python app.py\n# \u4e0a\u8ff0\u547d\u4ee4\u7684\u610f\u601d\u662f\u52a0\u8f7d\u4e3b\u673a\u7684 /src/webapp \u76ee\u5f55\u5230\u5bb9\u5668\u7684 /opt/webapp\u76ee\u5f55\n</code></pre></p> </li> <li> <p>\u52a0\u4e86<code>readonly</code>\u4e4b\u540e\uff0c\u5c31\u6302\u8f7d\u4e3a \u53ea\u8bfb \u4e86\u3002\u5982\u679c\u4f60\u5728\u5bb9\u5668\u5185 /opt/webapp \u76ee\u5f55\u65b0\u5efa\u6587\u4ef6\uff0c\u4f1a\u663e\u793a\u5982\u4e0b\u9519\u8bef: Bash<pre><code>/opt/webapp # touch new.txt\ntouch: new.txt: Read-only file system\n\n# \u67e5\u770b\u6570\u636e\u5377\u7684\u5177\u4f53\u5185\u5bb9\n$ docker inspect web\n...\n\"Mounts\": [\n    {\n        \"Type\": \"bind\",\n        \"Source\": \"/src/webapp\",\n        \"Destination\": \"/opt/webapp\",\n        \"Mode\": \"\",\n        \"RW\": true,\n        \"Propagation\": \"rprivate\"\n    }\n],\n</code></pre></p> </li> <li> <p><code>--mount</code>\u6807\u8bb0\u4e5f\u53ef\u4ee5\u4ece\u4e3b\u673a\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u5230\u5bb9\u5668\u4e2d</p> </li> <li>\u5c0f\u6280\u5de7\uff1a\u8bb0\u5f55\u5728\u5bb9\u5668\u8f93\u5165\u8fc7\u7684\u547d\u4ee4\u3002 Bash<pre><code>$ docker run --rm -it \\\n   # -v $HOME/.bash_history:/root/.bash_history \\\n   --mount type=bind,source=$HOME/.bash_history,target=/root/.bash_history \\\n   ubuntu:17.10 \\\n   bash\n\nroot@2affd44b4667:/# history\n1  ls\n2  diskutil list\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_30","title":"\u7f51\u7edc\u7ba1\u7406\u547d\u4ee4","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#bridge","title":"Bridge\u6a21\u5f0f","text":"<p>\u5f53<code>Docker</code>\u8fdb\u7a0b\u542f\u52a8\u65f6\uff0c\u4f1a\u5728\u4e3b\u673a\u4e0a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a<code>docker0</code>\u7684\u865a\u62df\u7f51\u6865\uff0c\u6b64\u4e3b\u673a\u4e0a\u542f\u52a8\u7684<code>Docker</code>\u5bb9\u5668\u4f1a\u8fde\u63a5\u5230\u8fd9\u4e2a\u865a\u62df\u7f51\u6865\u4e0a\u3002\u865a\u62df\u7f51\u6865\u7684\u5de5\u4f5c\u65b9\u5f0f\u548c\u7269\u7406\u4ea4\u6362\u673a\u7c7b\u4f3c\uff0c\u8fd9\u6837\u4e3b\u673a\u4e0a\u7684\u6240\u6709\u5bb9\u5668\u5c31\u901a\u8fc7\u4ea4\u6362\u673a\u8fde\u5728\u4e86\u4e00\u4e2a\u4e8c\u5c42\u7f51\u7edc\u4e2d\u3002\u4ece<code>docker0</code>\u5b50\u7f51\u4e2d\u5206\u914d\u4e00\u4e2a IP \u7ed9\u5bb9\u5668\u4f7f\u7528\uff0c\u5e76\u8bbe\u7f6e docker0 \u7684 IP \u5730\u5740\u4e3a\u5bb9\u5668\u7684\u9ed8\u8ba4\u7f51\u5173\u3002\u5728\u4e3b\u673a\u4e0a\u521b\u5efa\u4e00\u5bf9\u865a\u62df\u7f51\u5361<code>veth pair</code>\u8bbe\u5907\uff0cDocker \u5c06 veth pair \u8bbe\u5907\u7684\u4e00\u7aef\u653e\u5728\u65b0\u521b\u5efa\u7684\u5bb9\u5668\u4e2d\uff0c\u5e76\u547d\u540d\u4e3a<code>eth0</code>\uff08\u5bb9\u5668\u7684\u7f51\u5361\uff09\uff0c\u53e6\u4e00\u7aef\u653e\u5728\u4e3b\u673a\u4e2d\uff0c\u4ee5<code>vethxxx</code>\u8fd9\u6837\u7c7b\u4f3c\u7684\u540d\u5b57\u547d\u540d\uff0c\u5e76\u5c06\u8fd9\u4e2a\u7f51\u7edc\u8bbe\u5907\u52a0\u5165\u5230 docker0 \u7f51\u6865\u4e2d\u3002\u53ef\u4ee5\u901a\u8fc7<code>brctl show</code>\u547d\u4ee4\u67e5\u770b\u3002 <code>bridge</code>\u6a21\u5f0f\u662f docker \u7684\u9ed8\u8ba4\u7f51\u7edc\u6a21\u5f0f\uff0c\u4e0d\u5199<code>\u2013net</code>\u53c2\u6570\uff0c\u5c31\u662f<code>bridge</code>\u6a21\u5f0f\u3002\u4f7f\u7528<code>docker run -p</code>\u65f6\uff0cdocker \u5b9e\u9645\u662f\u5728<code>iptables</code>\u505a\u4e86<code>DNAT</code>\u89c4\u5219\uff0c\u5b9e\u73b0\u7aef\u53e3\u8f6c\u53d1\u529f\u80fd\u3002\u53ef\u4ee5\u4f7f\u7528<code>iptables -t nat -vnL</code>\u67e5\u770b\u3002<code>bridge</code>\u6a21\u5f0f\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6f14\u793a\uff1a Bash<pre><code>$ docker run -tid --net=bridge --name docker_bri1 \\\n             ubuntu-base:v3\n             docker run -tid --net=bridge --name docker_bri2 \\\n             ubuntu-base:v3 \n$ brctl show\n$ docker exec -ti docker_bri1 /bin/bash\n$ ifconfig \u2013a\n$ route \u2013n\n</code></pre> \u5982\u679c\u4f60\u4e4b\u524d\u6709 Docker \u4f7f\u7528\u7ecf\u9a8c\uff0c\u4f60\u53ef\u80fd\u5df2\u7ecf\u4e60\u60ef\u4e86\u4f7f\u7528<code>--link</code>\u53c2\u6570\u6765\u4f7f\u5bb9\u5668\u4e92\u8054\u3002 \u968f\u7740 Docker \u7f51\u7edc\u7684\u5b8c\u5584\uff0c\u5f3a\u70c8\u5efa\u8bae\u5927\u5bb6\u5c06\u5bb9\u5668\u52a0\u5165\u81ea\u5b9a\u4e49\u7684 Docker \u7f51\u7edc\u6765\u8fde\u63a5\u591a\u4e2a\u5bb9\u5668\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 --link \u53c2\u6570\u3002 \u4e0b\u9762\u5148\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Docker \u7f51\u7edc\u3002 Bash<pre><code>$ docker network create -d bridge my-net\n</code></pre> <code>-d</code>\u53c2\u6570\u6307\u5b9a Docker \u7f51\u7edc\u7c7b\u578b\uff0c\u6709 <code>bridge overlay</code>\u3002\u5176\u4e2d overlay \u7f51\u7edc\u7c7b\u578b\u7528\u4e8e Swarm mode\uff0c\u5728\u672c\u5c0f\u8282\u4e2d\u4f60\u53ef\u4ee5\u5ffd\u7565\u5b83\u3002 \u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u5e76\u8fde\u63a5\u5230\u65b0\u5efa\u7684 my-net \u7f51\u7edc Bash<pre><code>$ docker run -it --rm --name busybox1 --network my-net busybox sh\n</code></pre> \u6253\u5f00\u65b0\u7684\u7ec8\u7aef\uff0c\u518d\u8fd0\u884c\u4e00\u4e2a\u5bb9\u5668\u5e76\u52a0\u5165\u5230 my-net \u7f51\u7edc Bash<pre><code>$ docker run -it --rm --name busybox2 --network my-net busybox sh\n</code></pre> \u518d\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u7ec8\u7aef\u67e5\u770b\u5bb9\u5668\u4fe1\u606f Bash<pre><code>$ docker container ls\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\nb47060aca56b        busybox             \"sh\"                11 minutes ago      Up 11 minutes                           busybox2\n8720575823ec        busybox             \"sh\"                16 minutes ago      Up 16 minutes                           busybox1\n</code></pre> \u4e0b\u9762\u901a\u8fc7 ping \u6765\u8bc1\u660e busybox1 \u5bb9\u5668\u548c busybox2 \u5bb9\u5668\u5efa\u7acb\u4e86\u4e92\u8054\u5173\u7cfb\u3002 \u5728 busybox1 \u5bb9\u5668\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 Bash<pre><code>/ # ping busybox2\nPING busybox2 (172.19.0.3): 56 data bytes\n64 bytes from 172.19.0.3: seq=0 ttl=64 time=0.072 ms\n64 bytes from 172.19.0.3: seq=1 ttl=64 time=0.118 ms\n</code></pre> \u7528 ping \u6765\u6d4b\u8bd5\u8fde\u63a5 busybox2 \u5bb9\u5668\uff0c\u5b83\u4f1a\u89e3\u6790\u6210 172.19.0.3\u3002 \u540c\u7406\u5728 busybox2 \u5bb9\u5668\u6267\u884c ping busybox1\uff0c\u4e5f\u4f1a\u6210\u529f\u8fde\u63a5\u5230\u3002 Bash<pre><code>/ # ping busybox1\nPING busybox1 (172.19.0.2): 56 data bytes\n64 bytes from 172.19.0.2: seq=0 ttl=64 time=0.064 ms\n64 bytes from 172.19.0.2: seq=1 ttl=64 time=0.143 ms\n</code></pre> \u8fd9\u6837\uff0cbusybox1 \u5bb9\u5668\u548c busybox2 \u5bb9\u5668\u5efa\u7acb\u4e86\u4e92\u8054\u5173\u7cfb\u3002 \u5982\u679c\u4f60\u6709\u591a\u4e2a\u5bb9\u5668\u4e4b\u95f4\u9700\u8981\u4e92\u76f8\u8fde\u63a5\uff0c\u63a8\u8350\u4f7f\u7528<code>Docker Compose</code>\u3002</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#host","title":"Host \u6a21\u5f0f","text":"<p>\u5982\u679c\u542f\u52a8\u5bb9\u5668\u7684\u65f6\u5019\u4f7f\u7528<code>host</code>\u6a21\u5f0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5bb9\u5668\u5c06\u4e0d\u4f1a\u83b7\u5f97\u4e00\u4e2a\u72ec\u7acb\u7684<code>Network Namespace</code>\uff0c\u800c\u662f\u548c\u5bbf\u4e3b\u673a\u5171\u7528\u4e00\u4e2a Network Namespace\u3002\u5bb9\u5668\u5c06\u4e0d\u4f1a\u865a\u62df\u51fa\u81ea\u5df1\u7684\u7f51\u5361\uff0c\u914d\u7f6e\u81ea\u5df1\u7684 IP \u7b49\uff0c\u800c\u662f\u4f7f\u7528\u5bbf\u4e3b\u673a\u7684 IP \u548c\u7aef\u53e3\u3002\u4f46\u662f\uff0c\u5bb9\u5668\u7684\u5176\u4ed6\u65b9\u9762\uff0c\u5982\u6587\u4ef6\u7cfb\u7edf\u3001\u8fdb\u7a0b\u5217\u8868\u7b49\u8fd8\u662f\u548c\u5bbf\u4e3b\u673a\u9694\u79bb\u7684\u3002 Host\u6a21\u5f0f\u5982\u4e0b\u56fe\u6240\u793a\uff1a  \u6f14\u793a\uff1a Bash<pre><code>$ docker run -tid --net=host --name docker_host1 ubuntu-base:v3\n$ docker run -tid --net=host --name docker_host2 ubuntu-base:v3\n$ docker exec -ti docker_host1 /bin/bash\n$ docker exec -ti docker_host1 /bin/bash\n$ ifconfig \u2013a\n$ route \u2013n\n</code></pre></p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#container","title":"Container \u6a21\u5f0f","text":"<p>\u8fd9\u4e2a\u6a21\u5f0f\u6307\u5b9a\u65b0\u521b\u5efa\u7684\u5bb9\u5668\u548c\u5df2\u7ecf\u5b58\u5728\u7684\u4e00\u4e2a\u5bb9\u5668\u5171\u4eab\u4e00\u4e2a Network Namespace\uff0c\u800c\u4e0d\u662f\u548c\u5bbf\u4e3b\u673a\u5171\u4eab\u3002\u65b0\u521b\u5efa\u7684\u5bb9\u5668\u4e0d\u4f1a\u521b\u5efa\u81ea\u5df1\u7684\u7f51\u5361\uff0c\u914d\u7f6e\u81ea\u5df1\u7684 IP\uff0c\u800c\u662f\u548c\u4e00\u4e2a\u6307\u5b9a\u7684\u5bb9\u5668\u5171\u4eab IP\u3001\u7aef\u53e3\u8303\u56f4\u7b49\u3002\u540c\u6837\uff0c\u4e24\u4e2a\u5bb9\u5668\u9664\u4e86\u7f51\u7edc\u65b9\u9762\uff0c\u5176\u4ed6\u7684\u5982\u6587\u4ef6\u7cfb\u7edf\u3001\u8fdb\u7a0b\u5217\u8868\u7b49\u8fd8\u662f\u9694\u79bb\u7684\u3002\u4e24\u4e2a\u5bb9\u5668\u7684\u8fdb\u7a0b\u53ef\u4ee5\u901a\u8fc7 lo \u7f51\u5361\u8bbe\u5907\u901a\u4fe1\u3002 Container\u6a21\u5f0f\u793a\u610f\u56fe\uff1a \u6f14\u793a\uff1a Bash<pre><code>$ docker run -tid --net=container:docker_bri1 \\\n              --name docker_con1 ubuntu-base:v3\n$ docker exec -ti docker_con1 /bin/bash\n$ docker exec -ti docker_bri1 /bin/bash\n$ ifconfig \u2013a\n$ route -n\n</code></pre></p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#none","title":"None\u6a21\u5f0f","text":"<p>\u4f7f\u7528<code>none</code>\u6a21\u5f0f\uff0cDocker \u5bb9\u5668\u62e5\u6709\u81ea\u5df1\u7684 Network Namespace\uff0c\u4f46\u662f\uff0c\u5e76\u4e0d\u4e3aDocker \u5bb9\u5668\u8fdb\u884c\u4efb\u4f55\u7f51\u7edc\u914d\u7f6e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a Docker \u5bb9\u5668\u6ca1\u6709\u7f51\u5361\u3001IP\u3001\u8def\u7531\u7b49\u4fe1\u606f\u3002\u9700\u8981\u6211\u4eec\u81ea\u5df1\u4e3a Docker \u5bb9\u5668\u6dfb\u52a0\u7f51\u5361\u3001\u914d\u7f6e IP \u7b49\u3002 None\u6a21\u5f0f\u793a\u610f\u56fe: \u6f14\u793a\uff1a Bash<pre><code>$ docker run -tid --net=none --name \\\n                docker_non1 ubuntu-base:v3\n$ docker exec -ti docker_non1 /bin/bash\n$ ifconfig \u2013a\n$ route -n\n</code></pre></p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_31","title":"\u5e38\u7528\u6e05\u7406\u547d\u4ee4","text":"<ul> <li> <p>\u4e00\u952e\u5220\u9664\u6240\u6709\u5df2\u7ecf\u505c\u6b62\u7684\u5bb9\u5668 Text Only<pre><code>docker container prune\n</code></pre></p> </li> <li> <p>\u5220\u9664\u6240\u6709\u5bb9\u5668\uff08\u5305\u542b\u505c\u6b62\u7684 \u6b63\u5728\u8fd0\u884c\u7684\uff09 Text Only<pre><code>docker rm -f $(docker ps -aq)\ndocker container rm -f $(docker container ls -aq)\n</code></pre></p> </li> <li> <p>\u6240\u6709\u60ac\u6302\u72b6\u6001\u7684\u955c\u50cf Text Only<pre><code>docker image ls -f dangling=true\n</code></pre></p> </li> <li> <p>\u5220\u9664\u6240\u6709\u60ac\u6302\u72b6\u6001\u7684\u955c\u50cf Text Only<pre><code>docker image rm $(docker image ls -f dangling=true -q)\ndocker image prune\n</code></pre></p> </li> <li> <p>\u5220\u9664\u4e0d\u5728\u4f7f\u7528\u7684\u6570\u636e\u96c6 Text Only<pre><code>docker volume rm $(docker volume ls -q)\ndocker volume prune\n</code></pre></p> </li> <li> <p>\u5220\u9664build cache Text Only<pre><code>docker builder prune\n</code></pre></p> </li> <li> <p>\u4e00\u952e\u6e05\u7406 Text Only<pre><code>docker system prune\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#compose","title":"compose\u547d\u4ee4","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#docker-composeyml","title":"docker-compose.yml","text":"Bash<pre><code>version: \"3\"\nservices:\n website:\n   build: ./bluewhale\n   hostname: website\n   command: bash -c \"python3 manage.py collectstatic --no-input &amp;&amp;\n                     python manage.py makemigrations &amp;&amp;\n                     python3 manage.py migrate &amp;&amp;\n                     gunicorn bluewhale.wsgi:application --bind 0.0.0.0:8001\"\n   expose:\n      - \"8001\"\n   volumes:\n      - ./bluewhale:/data/projects/bluewhale_docker/bluewhale:rw # \u6302\u8f7d\u9879\u76ee\u4ee3\u7801\n      - static-volume:/data/projects/bluewhale_docker/bluewhale/static\n      - ./compose/bw_uwsgi:/tmp # \u6302\u8f7duwsgi\u65e5\u5fd7\n   links:\n      - mysqldb\n   depends_on: # \u4f9d\u8d56\u5173\u7cfb\n      - mysqldb\n   networks:\n      - web_network\n      - db_network\n   environment:\n      - DEBUG=False\n   restart: \"on-failure\"\n   tty: true\n   stdin_open: true\n\nnetworks:\n  web_network:\n    driver: bridge\n  db_network:\n    driver: bridge\nvolumes:\n  static-volume:\n  bluewhale_db_vol:\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_command/#_32","title":"\u542f\u52a8\u3001\u505c\u6b62\u3001\u5220\u9664","text":"Bash<pre><code>docker-compose up -d  # -d\u8868\u793a\u5b88\u62a4\u8fdb\u7a0b\u542f\u52a8\ndocker-compose stop  \ndocker-compose rm \n\n#\u505c\u6b62\u548c\u5220\u9664\u53ef\u4ee5\u5408\u5e76\u6267\u884c\ndocker-compose stop &amp;&amp; docker-compose rm\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_common_software_install/","title":"Docker\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u6c47\u603b","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_common_software_install/#docker-mysql-","title":"docker-mysql-\u5b89\u88c5","text":"<ul> <li> <p>\u5b89\u88c5\u6307\u4ee4\u548c\u6307\u4ee4\u53c2\u6570\u8bf4\u660e Bash<pre><code>docker run -p 3306:3306 --name mymysql -v $PWD/conf:/etc/mysql/conf.d -v $PWD/logs:/logs -v $PWD/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7\n\n-p 3306:3306  : \u5c06\u5bb9\u5668\u76843306\u7aef\u53e3\u6620\u5c04\u5230\u4e3b\u673a\u76843306\u7aef\u53e3\n\n-v  -v $PWD/logs:/logs  : \u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684conf/my.cnf \u6302\u8f7d\u5230\u5bb9\u5668\u7684/etc/mysql/my.cnf\n\n-v  -v $PWD/data:/var/lib/mysql   : \u5c06\u4e3b\u673a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684data\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684/var/lib/mysql\n\n-e  -e MYSQL_ROOT_PASSWORD=123456  : \u521d\u59cb\u5316root\u7528\u6237\u7684\u5bc6\u7801\n</code></pre></p> </li> <li> <p>\u8fdb\u5165\u5bb9\u5668\u914d\u7f6e Bash<pre><code>docker exec -it \u5bb9\u5668id /bin/bash\n\n# \u8fdb\u5165MySQL\nmysql -uroot -p123456;\n\n#\u3000\u5efa\u7acb\u7528\u6237\u5e76\u6388\u6743\nGRANT ALL PRIVILEGES ON  *.* TO 'root'@'%' IDENTIFIED BY 'root123' WITH GRANT OPTION;\n\nflush privileges;\n</code></pre></p> </li> </ul> <ul> <li>https://github.com/Ryan-Miao/docker-yapi</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_detail_commands/","title":"\u67e5\u770bDocker\u5bb9\u5668\u542f\u52a8\u7684\u8be6\u7ec6\u547d\u4ee4\u53ca\u53c2\u6570","text":"<p>\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0c\u524d\u4eba\u5728\u4f7f\u7528docker\u90e8\u7f72\u7684\u670d\u52a1\u65f6\u5e76\u6ca1\u6709\u7559\u4e0b\u8be6\u7ec6\u7684\u90e8\u7f72\u6587\u6863\uff0c\u56e0\u670d\u52a1\u610f\u5916\u6302\u6389\u540e\uff0c\u9700\u8981\u5bf9\u5176\u91cd\u542f\uff0c\u5e26\u7740\u8fd9\u6837\u7684\u9700\u6c42\uff0c\u5c1d\u8bd5\u4e86\u4ee5\u4e0b\u51e0\u79cd\u65b9\u6848\uff0c\u6545\u6b64\u8bb0\u5f55\u603b\u7ed3\u4e00\u4e0b\uff1b</p> <p>\u901a\u8fc7<code>docker ps -a</code>\u627e\u5230\u9700\u8981\u542f\u52a8\u7684\u5bb9\u5668\u540d\u79f0</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_detail_commands/#docker","title":"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 docker\u539f\u751f\u547d\u4ee4","text":"<ul> <li><code>docker inspect &lt;container name&gt;</code> \u67e5\u770b</li> <li>\u53d1\u73b0\u8f93\u51fa\u7684\u4fe1\u606f\u6bd4\u8f83\u8be6\u7ec6\uff0c\u9700\u8981\u6709\u4e00\u5b9a\u7684\u4e0a\u4e0b\u6587\u80cc\u666f\uff0c\u624d\u53ef\u80fd\u77e5\u9053\u5f53\u65f6\u8be5\u670d\u52a1\u5bb9\u5668\u7684\u542f\u52a8\u547d\u4ee4\uff0c\u4f53\u9a8c\u4e0d\u662f\u5f88\u53cb\u597d JSON<pre><code># \u4ee5\u4e0b\u65e5\u5fd7\u4ec5\u5c55\u793a\u4e86\u90e8\u5206\u8f93\u51fa\u5b57\u6bb5\n\n[root@automlgpu4 bluewhale_dev]# docker inspect product-pg-1\n[\n    {\n        \"Id\": \"19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c\",\n        \"Created\": \"2023-07-04T06:56:17.349741798Z\",\n        \"Path\": \"docker-entrypoint.sh\",\n        \"Args\": [\n            \"postgres\"\n        ],\n        \"Image\": \"sha256:1149d285a5f5c4340cefa2211869c3a6b1128ac78974545e0b4fe62d3d0e66a8\",\n        \"ResolvConfPath\": \"/data/docker/containers/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c/resolv.conf\",\n        \"HostnamePath\": \"/data/docker/containers/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c/hostname\",\n        \"HostsPath\": \"/data/docker/containers/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c/hosts\",\n        \"LogPath\": \"/data/docker/containers/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c/19ec2701ca0df73da5d193daaf2ef72b2bb55d144d7ea7ccd9136a5f7f62c17c-json.log\",\n        \"Name\": \"/product-pg-1\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\"\uff0c\n        \"ExecIDs\": null,\n        \"GraphDriver\": {\n            \"Data\": {},\n            \"Name\": \"overlay2\"\n        },\n        \"Config\": {\n            \"Hostname\": \"pg\",\n            \"Domainname\": \"\",\n            \"User\": \"\"\n            },\n            \"Env\": [\n                \"POSTGRES_USER=root\",\n                \"POSTGRES_PASSWORD=2023\",\n                \"TZ=Asia/Shanghai\",\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"LANG=en_US.utf8\",\n                \"PG_MAJOR=14\",\n                \"PG_VERSION=14.1\",\n                \"PG_SHA256=4d3c101ea7ae38982f06bdc73758b53727fb6402ecd9382006fa5ecc7c2ca41f\",\n                \"PGDATA=/var/lib/postgresql/data\"\n            ],\n            \"Cmd\": [\n                \"postgres\"\n            ],\n            \"Image\": \"postgres:14-alpine\",\n            \"Volumes\": {\n                \"/var/lib/postgresql/data\": {}\n            },\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": [\n                \"docker-entrypoint.sh\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"com.docker.compose.config-hash\": \"f7d46590f5568ccc12b47ec4e104686e98fa22e081b8f1b2f57af3670affaef1\",\n                \"com.docker.compose.container-number\": \"1\",\n                \"com.docker.compose.depends_on\": \"\",\n                \"com.docker.compose.image\": \"sha256:1149d285a5f5c4340cefa2211869c3a6b1128ac78974545e0b4fe62d3d0e66a8\",\n                \"com.docker.compose.oneoff\": \"False\",\n                \"com.docker.compose.project\": \"product\"\uff0c\n                \"com.docker.compose.service\": \"pg\",\n                \"com.docker.compose.version\": \"2.13.0\"\n            },\n            \"StopSignal\": \"SIGINT\"\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"e637937788ef9cdb7b6b72b3fff145520cc990ce342bab28fdf27b8da9a87987\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"5432/tcp\": null\n            },\n            \"Networks\": {\n                \"product_back\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": [\n                        \"product-pg-1\",\n                        \"pg\",\n                        \"19ec2701ca0d\"\n                    ],\n                    \"NetworkID\": \"1bf3395d104c6b062e42d96dc58d7fbd32c8c25615a749be04820fb9eb5701ae\",\n                    \"EndpointID\": \"ef940c3a5b9b6ee928c30ac48ece25551e63b3ed840c64eb02ab972c15e692e4\",\n                    \"Gateway\": \"172.25.0.1\",\n                    \"IPAddress\": \"172.25.0.9\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:19:00:09\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_detail_commands/#_1","title":"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528\u7b2c\u4e09\u65b9\u5de5\u5177","text":"<ul> <li><code>get_command_4_run_container</code> </li> <li> <p>\u901a\u8fc7\u641c\u7d22\u5f15\u64ce\u627e\u5230\u8be5\u5de5\u5177\uff0c\u4e8e\u662f\u4fbf\u5f00\u59cb\u5c1d\u8bd5\u9a8c\u8bc1\uff0c\u5177\u4f53\u4f7f\u7528\u5982\u4e0b\uff1b Bash<pre><code># \u62c9\u53d6\u955c\u50cf\ndocker pull cucker/get_command_4_run_container\n\n# \u542f\u52a8\ndocker run --rm -v /var/run/docker.sock:/var/run/docker.sock cucker/get_command_4_run_container [\u5bb9\u5668\u540d\u79f0]/[\u5bb9\u5668ID]\n\n# \u67e5\u770b\u8f93\u51fa\u7ed3\u679c\n</code></pre></p> </li> <li> <p>\u5bf9\u4e8e\u542f\u52a8\u547d\u4ee4\u5c01\u88c5\u6210\u4e00\u4e2abash\u547d\u4ee4\uff0c\u540e\u7eed\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 <code>get_docker_command [\u5bb9\u5668\u540d\u79f0]/[\u5bb9\u5668ID]</code> Bash<pre><code>echo \"alias get_docker_command='docker run --rm -v /var/run/docker.sock:/var/run/docker.sock cucker/get_command_4_run_container'\" &gt;&gt; ~/.bashrc \\\n&amp;&amp; \\\n. ~/.bashrc\n</code></pre></p> </li> <li> <p>\u64cd\u4f5c\u65e5\u5fd7\u5982\u4e0b\uff1a Bash<pre><code>[root@automlgpu4 bluewhale_dev]# docker pull cucker/get_command_4_run_container\nUsing default tag: latest\nlatest: Pulling from cucker/get_command_4_run_container\n8a49fdb3b6a5: Pull complete \n0357922e53aa: Pull complete \n9676b6d4b964: Pull complete \nddbd03ee1059: Pull complete \n877a053836a3: Pull complete \na68de691a1fb: Pull complete \nac3fd788d9e3: Pull complete \n51fb85f07a5a: Pull complete \nDigest: sha256:d3fba2642b3bd30dc8bd7379b18e889c6ad9d76c138ffe870b47b7fb6b9c9e94\nStatus: Downloaded newer image for cucker/get_command_4_run_container:latest\ndocker.io/cucker/get_command_4_run_container:latest\n[root@automlgpu4 bluewhale_dev]# docker run --rm -v /var/run/docker.sock:/var/run/docker.sock cucker/get_command_4_run_container bluewhale_dev-pg-1\ndocker run -d \\\n --name bluewhale_dev-pg-1 \\\n --cgroupns host \\\n --env POSTGRES_PASSWORD=lanjing.2022 \\\n --env TZ=Asia/Shanghai \\\n --env POSTGRES_USER=root \\\n --hostname pg \\\n --label com.docker.compose.config-hash=5a31f16dd78cccc6759eba8ae3183d729013898d96a7b364124fec1efcabf280 \\\n --label com.docker.compose.container-number=1 \\\n --label com.docker.compose.depends_on=\"\" \\\n --label com.docker.compose.image=sha256:1149d285a5f5c4340cefa2211869c3a6b1128ac78974545e0b4fe62d3d0e66a8 \\\n --label com.docker.compose.oneoff=False \\\n --label com.docker.compose.project=bluewhale_dev \\\n --label com.docker.compose.project.config_files=/data/bluewhale/bluewhale_dev/docker-compose.yml \\\n --label com.docker.compose.project.working_dir=/data/bluewhale/bluewhale_dev \\\n --label com.docker.compose.service=pg \\\n --label com.docker.compose.version=2.13.0 \\\n --log-opt max-size=100m \\\n --network=bluewhale_dev_looklook_net \\\n -p 5532:5432/tcp \\\n --stop-signal SIGINT \\\n -v /data/bluewhale/bluewhale_dev/data/pg:/var/lib/postgresql/data:rw \\\n postgres:14-alpine\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/","title":"Docker\u955c\u50cf\u65e0\u6cd5\u62c9\u53d6\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#_1","title":"\u4e8b\u51fa\u6709\u56e0\uff1a","text":"<p>\u81ea2024\u5e745\u6708\u5e956\u6708\u521d\uff0c\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\uff0c\u7a81\u7136\u95f4\u5728\u56fd\u5185\u5c31\u65e0\u6cd5\u6b63\u5e38\u8bbf\u95ee\u548c\u62c9\u53d6Docker\u955c\u50cf\u6e90\uff0c\u9274\u4e8e\u672c\u4eba\u76ee\u524d\u4ece\u4e8b\u4e91\u539f\u751fModelOps\u5de5\u4f5c\uff0c\u51e0\u4e4e\u6bcf\u5929\u90fd\u8981\u548cK8S\u3001Docker\u6253\u4ea4\u9053\uff0c\u955c\u50cf\u65e0\u6cd5\u62c9\u53d6\u4e00\u76f4\u8ba9\u4eba\u5f88\u82e6\u607c\u548c\u65e0\u5948\uff0c\u6240\u4ee5\u5728\u65e5\u5e38\u5de5\u4f5c\u548c\u63a2\u7d22\u4e2d\uff0c\u603b\u7ed3\u6c47\u603b\u4e86\u5982\u4e0b\u53ef\u4ee5\u62c9\u53bb\u7684\u5b98\u65b9\u955c\u50cf\u6e90\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u8fd9\u4e9b\u65b9\u6848\u53ef\u80fd\u4f1a\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u65e0\u6cd5\u4f7f\u7528\uff0c\u82e5\u662f\u5982\u6b64\u8bf7\u89c1\u8c05!</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#_3","title":"\u65b9\u6848\u4e00\uff1a\u5728\u7ebf\u4e0b\u8f7d","text":"<ul> <li>\u6e21\u6e21\u9e1f\u7684\u5bb9\u5668\u955c\u50cf\u5c0f\u7ad9\uff1a\u672c\u7ad9\u4f5c\u8005\u5ba3\u4f20100%\u540c\u6b65\u5b98\u65b9\u955c\u50cf\uff0c\u76ee\u524d\u652f\u6301\u540c\u6b65\u955c\u50cf\u6e90\uff1agcr.io ghcr.io quay.io k8s.gcr.io docker.io registry.k8s.io docker.elastic.co skywalking.docker.scarf.sh \u5355\u4e2a\u955c\u50cf\u5927\u5c0f\u9650\u52362G\uff0c\u5168\u7ad9\u76ee\u524d\u955c\u50cf\u7d22\u5f15\u6570\u91cf4262\uff0c\u540c\u6b651502GB;</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#_4","title":"\u65b9\u6848\u4e8c\uff1a\u5728\u62c9\u53d6\u955c\u50cf\u52a0\u4e0a\u4e0b\u5217\u524d\u7f00","text":"<ul> <li>\u63a8\u8350\u9879\u76ee1\uff1ahttps://github.com/DaoCloud/public-image-mirror</li> <li>\u63a8\u8350\u9879\u76ee2\uff1ahttps://github.com/kubesre/docker-registry-mirrors</li> </ul> \u6e90\u7ad9 \u66ff\u6362\u4e3a cr.l5d.io l5d.kubesre.xyz docker.elastic.co elastic.kubesre.xyz docker.io dhub.kubesre.xyz gcr.io gcr.kubesre.xyz ghcr.io ghcr.kubesre.xyz k8s.gcr.io k8s-gcr.kubesre.xyz registry.k8s.io k8s.kubesre.xyz mcr.microsoft.com mcr.kubesre.xyz nvcr.io nvcr.kubesre.xyz quay.io quay.kubesre.xyz registry.jujucharms.com jujucharms.kubesre.xy <p>Bash<pre><code># \u793a\u4f8b\ndocker pull k8s.kubesre.xyz/ingress-nginx/opentelemetry-1.25.3-v20240813-b93310d\n</code></pre> </p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_image_pull_problem_for_solution/#issue","title":"\u65b9\u6848\u4e09\uff1a \u901a\u8fc7\u5f00\u6e90\u9879\u76ee\u7684 issue","text":"<p>\u6b64\u65b9\u6848\u9002\u7528\u4e8e\u53ef\u4ee5\u8bbf\u95eeDocker\u955c\u50cf\u4ed3\u5e93\uff0c\u4f46\u65e0\u6cd5\u8bbf\u95ee\u5176\u4ed6\u955c\u50cf\u4ed3\u5e93\uff08registry.k8s.io\u3001gcr.io \u7b49\uff09\u3002</p> <ul> <li>https://github.com/myysophia/hub-mirror</li> </ul> <p>\u4f7f\u7528\u8bf4\u660e\uff1a</p> <ol> <li>\u5728\u8be5\u9879\u76ee\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0issue\uff0c\u4f1a\u51fa\u73b0\u4e00\u4e2a\u6a21\u677f\uff0c\u5c06\u6a21\u677f\u5185\u5bb9\u4fee\u6539\u4e3a\u9700\u8981\u62c9\u53bb\u7684\u955c\u50cf\uff0c\u63d0\u4ea4issue\uff0c\u5c31\u4f1a\u89e6\u53d1github\u7684CI\uff0c\u5c31\u4f1a\u8fdb\u884c\u62c9\u53bb\u62c9\u53d6\u955c\u50cf\uff0c\u5e76\u63a8\u9001\u5230\u516c\u5f00Docker\u4ed3\u5e93\u3002</li> </ol> JSON<pre><code>{\n    \"hub-mirror\": [\n        \"\u4f60\u9700\u8981\u8f6c\u6362\u7684\u955c\u50cf\",\n        \"\u4f60\u9700\u8981\u8f6c\u6362\u7684\u955c\u50cf\",\n        \"\u6bcf\u6b21\u6700\u591a 11 \u4e2a\",\n        \"\u6539\u8fd9\u4e2a json \u5c31\u53ef\u4ee5\u4e86\",\n        \"\u522b\u4e71\u6539\u5185\u5bb9\",\n        \"\u6807\u9898\u968f\u610f\uff0c\u4fdd\u6301\u9635\u578b\u662f\u6700\u597d\u7684\",\n        \"hub-mirror \u6807\u7b7e\u662f\u5fc5\u9009\u7684\",\n        \"......\"\n    ]\n}\n\n####################PS\u6539\u6210\u4e0b\u9762\u8fd9\u4e2a################\n{\n\"hub-mirror\": [\n  \"registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.4.3\"\n  ]\n}\n####################PS\u6539\u6210\u4e0b\u9762\u8fd9\u4e2a################\n</code></pre> <ol> <li>\u7136\u540e\u4ecedocker\u955c\u50cf\u4ed3\u5e93\u62c9\u53bb\u6240\u9700\u8981\u7684\u955c\u50cf </li> </ol>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/","title":"Docker\u5b89\u88c5\u5378\u8f7d\u6307\u5357","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#install-for-centos","title":"Install for CentOS","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#step1","title":"step1: \u5378\u8f7d\u65e7\u7248\u672c","text":"<ul> <li>\u65e7\u7248\u672c\u7684 Docker \u53eb\u00a0<code>docker</code>\u00a0\u6216\u8005\u00a0<code>docker-engine</code>\uff0c\u73b0\u5728\u7684\u7248\u672c\u88ab\u79f0\u4e3a<code>docker-ce</code>\uff0c\u5982\u679c\u4e4b\u524d\u5b89\u88c5\u8fc7\uff0c\u5219\u5148\u5378\u8f7d\u6389\u4e4b\u524d\u7684\u7248\u672c\uff1a Bash<pre><code>$ sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#step2docker-ce","title":"step2:\u5b89\u88c5Docker-CE","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_1","title":"\u79bb\u7ebf\u5b89\u88c5","text":"Bash<pre><code>https://download.docker.com/linux/centos/7/x86_64/stable/Packages/ \n\n# \u5728\u4e0a\u8ff0\u7f51\u5740\u4e2d\u4e0b\u8f7d\u81ea\u5df1\u60f3\u8981\u5b89\u88c5\u7684\u7248\u672c\uff08.rpm\u6587\u4ef6\uff09\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_2","title":"\u5728\u7ebf\u5b89\u88c5","text":"<ul> <li> <p>\u5b89\u88c5\u73af\u5883\u4f9d\u8d56\uff08yum-utils\u63d0\u4f9b\u4e86yum-config-manager\u7684\u4e00\u4e9b\u5b9e\u7528\u7684\u529f\u80fd\uff09 Bash<pre><code>yum install -y yum-utils  device-mapper-persistent-data lvm2\n</code></pre></p> </li> <li> <p>\u6dfb\u52a0stable\u7248\u672c\u7684docker\u4ed3\u5e93 Bash<pre><code>sudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\n</code></pre></p> </li> <li> <p>\u5b89\u88c5\u6700\u65b0\u7248\u672c Bash<pre><code>yum install docker-ce docker-ce-cli containerd.io\n</code></pre></p> </li> <li> <p>\u5b89\u88c5\u6307\u5b9a\u7248\u672c Bash<pre><code># \u67e5\u770b\u53ef\u5b89\u88c5\u7684\u7248\u672c\u547d\u4ee4\nyum list docker-ce --showduplicates | sort -r\n\n# \u4e0a\u8ff0\u547d\u4ee4\u8f93\u51fa\u5982\u4e0b\uff1a\n * updates: mirrors.tuna.tsinghua.edu.cn\nLoading mirror speeds from cached hostfile\nLoaded plugins: fastestmirror, langpacks\n * extras: mirrors.huaweicloud.com\ndocker-ce.x86_64            3:19.03.4-3.el7                     docker-ce-stable\n......\ndocker-ce.x86_64            3:18.09.9-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.8-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.7-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.6-3.el7                     docker-ce-stable\n......\ndocker-ce.x86_64            18.06.0.ce-3.el7                    docker-ce-stable\n\n# eg: \u5b89\u88c5docker-ce-18.09.9\u7248\u672c\nsudo yum -y install docker-ce-18.09.9 docker-ce-cli-18.09.9 containerd.io \n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_3","title":"\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u542f\u52a8","text":"Bash<pre><code>systemctl daemon-reload \n\nsystemctl enable docker  &amp;&amp; systemctl start docker\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_4","title":"\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f","text":"<ul> <li>\u5982\u679c\u51fa\u73b0docker\u7684\u7248\u672c\u4fe1\u606f\u5219\u8868\u793a\u6210\u529f\u5b89\u88c5 Bash<pre><code>docker info \n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_5","title":"\u914d\u7f6e\u6269\u5c55\uff08\u975e\u5fc5\u987b\u4f46\u662f\u5efa\u8bae\uff09","text":"<ul> <li>\u65b0\u5efadocker.json\u7684docker\u914d\u7f6e\u6587\u4ef6 <p>\u83b7\u53d6\u963f\u91cc\u4e91\u63d0\u4f9b\u7684\u955c\u50cf\u52a0\u901f\u670d\u52a1\u7684\u94fe\u63a5\uff1a https://cr.console.aliyun.com/cn-beijing/instances/mirrors\u3002</p> </li> </ul> Bash<pre><code>mkdir -p /etc/docker/\n\nvim /etc/docker/daemon.json\n{\n  \"data-root\": \"/data/software/docker\",\n  \"registry-mirrors\": [\"https://p0rish3o.mirror.aliyuncs.com\"],\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\n</code></pre> <ul> <li>daemon.json\u5185\u5bb9\u8bf4\u660e\uff1a</li> <li>data-root\uff1a \u4fee\u6539\u5b89\u88c5\u76ee\u5f55\uff08\u9ed8\u8ba4\u5b89\u88c5\u76ee\u5f55\u5728/var/lib/docker\u4e0b\uff09<ul> <li>\u53c2\u8003\u94fe\u63a5:  \u8fc1\u79fb Docker \u7684\u9ed8\u8ba4\u5b89\u88c5(\u5b58\u50a8)\u76ee\u5f55</li> </ul> </li> <li>registry-mirrors\uff1a \u914d\u7f6e\u963f\u91cc\u4e91\u4f5c\u4e3a\u955c\u50cf\u52a0\u901f\u670d\u52a1</li> <li>exec-opts\uff1a \u6b64\u914d\u7f6e\u4e3a\u5b89\u88c5k8s\u6240\u5fc5\u987b</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#install-for-ubuntu","title":"Install for Ubuntu","text":"Bash<pre><code># step1. \u66f4\u65b0ubuntu\u7684apt\u6e90\u7d22\u5f15\nsudo apt-get update\n\n# step2: \u5b89\u88c5\u5305\u5141\u8bb8apt\u901a\u8fc7HTTPS\u4f7f\u7528\u4ed3\u5e93\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common gnupg lsb-release\n\n# step3: \u6dfb\u52a0Docker\u5b98\u65b9GPG key\n# curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\n# step4: \u8bbe\u7f6eDocker\u7a33\u5b9a\u7248\u4ed3\u5e93\n# sudo add-apt-repository \\\n#    \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n#    $(lsb_release -cs) \\\n#    stable\"\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n\n# step5: \u6dfb\u52a0\u4ed3\u5e93\u540e\uff0c\u66f4\u65b0apt\u6e90\u7d22\u5f15\nsudo apt-get update\n\n# step7: \u5b89\u88c5\u6700\u65b0\u7248Docker CE\uff08\u793e\u533a\u7248\uff09\nsudo apt-get install docker-ce  docker-ce-cli containerd.io docker-compose-plugin\n\n# step8: \u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f,\u62c9\u53d6\u6210\u529f\u5219\u8868\u793a\u5b89\u88c5\u5b8c\u6210\nsudo docker run hello-world\n</code></pre> <p>\u5907\u6ce8\uff1a\u4e3a\u4e86\u907f\u514d\u6bcf\u6b21\u547d\u4ee4\u90fd\u8f93\u5165sudo\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u7528\u6237\u6743\u9650\uff0c\u6ce8\u610f\u6267\u884c\u540e\u987b\u6ce8\u9500\u91cd\u65b0\u767b\u5f55</p> Bash<pre><code>sudo usermod -a -G docker $USER\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_install_guide/#_6","title":"\u5378\u8f7d\u6307\u5357\uff1a","text":"Bash<pre><code>yum list installed | grep docker \n\nyum -y remove  docker.x86_64   docker-client.x86_64  docker-common.x86_64\n\nrm -rf  /var/lib/docker\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/","title":"Docker\u5b9e\u7528\u6280\u5de7","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#load","title":"| \u6279\u91cfload\u955c\u50cf","text":"<p>\u4e00\u952eload\u6587\u4ef6\u5939\u91cc\u7684\u8bf4\u7528\u955c\u50cf</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#_1","title":"\u65b9\u5f0f\u4e00\uff1a","text":"Bash<pre><code> ls -F /data/package_3th/*.tar | awk '{cmd=\"docker load -i \"$0;print(cmd);system(cmd)}'\n # /data/package_3th \u4e3a\u955c\u50cf\u7684\u6587\u4ef6\u5939\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#_2","title":"\u65b9\u5f0f\u4e8c\uff1a","text":"Python<pre><code>import os\nimport sys\n\nif __name__ == \"__main__\":\n    workdir = '/data/package_3th'\n    os.chdir(workdir)\n    files = os.listdir(workdir)\n    for filename in files:\n        print(filename)\n        os.system('docker load -i %s'%filename)\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#runlike","title":"| runlike:\u901a\u8fc7\u5bb9\u5668\u6253\u5370\u51fa\u5bb9\u5668\u7684\u542f\u52a8\u547d\u4ee4","text":"<p>\u5728runlike\u4f20\u9012\u4e00\u4e2a\u5bb9\u5668\u540d\u79f0\uff0c\u5c31\u4f1a\u76f4\u63a5\u6253\u5370\u51fa\u8be5\u5bb9\u5668\u7684\u8fd0\u884c\u547d\u4ee4\u3002<code>runlike</code>\u4f7f\u7528\u8d77\u6765\u975e\u5e38\u65b9\u4fbf\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7<code>pip</code>\u5b89\u88c5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5bb9\u5668\u65b9\u5f0f\u514d\u5b89\u88c5\u4f7f\u7528:</p> Bash<pre><code># pip\n$ pip install runlike\n\n# by docker\n$ alias runlike=\"docker run --rm -v /var/run/docker.sock:/var/run/docker.sock assaflavie/runlike\"\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_practical_skills/#whaler-dockerfile","title":"| whaler: \u901a\u8fc7\u955c\u50cf\u5bfc\u51fadockerfile","text":"<p>\u901a\u8fc7\u00a0whaler[2] \u6765\u5feb\u901f\u7684\u5bfc\u51fa. \u8fd9\u91cc\u6211\u4eec\u4f9d\u65e7\u4e0d\u5b89\u88c5\uff0c\u901a\u8fc7\u5bb9\u5668\u5316\u7684\u65b9\u5f0f\u4f7f\u7528dfimage\u547d\u4ee4\uff0c\u4fbf\u4e8e\u4f7f\u7528\uff0c\u6211\u4eec\u5c06\u8be5\u547d\u4ee4\u5199\u6210\u547d\u4ee4\u522b\u540d\uff1a</p> Bash<pre><code># alias export docker image to dockerfile\n$ alias whaler=\"docker run -t --rm -v /var/run/docker.sock:/var/run/docker.sock:ro pegleg/whaler\"\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/","title":"docker-registry\u642d\u5efa\u4e0e\u4f7f\u7528","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#docker-hub","title":"Docker Hub","text":"<ul> <li>\u662fdocker \u5b98\u65b9\u7ef4\u62a4\u7684\u4e00\u4e2a\u516c\u5171\u4ed3\u5e93</li> <li>\u5f53\u62c9\u53d6\u955c\u50cf\u6bd4\u8f83\u6162\u65f6\uff0c\u53ef\u4ee5\u914d\u7f6e\u955c\u50cf\u52a0\u901f\u5668\uff1ahttp://docker-cn.com/</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_1","title":"\u6ce8\u518c","text":"<ul> <li>\u5728 https://cloud.docker.com \u514d\u8d39\u6ce8\u518c\u4e00\u4e2a Docker \u8d26\u53f7\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_2","title":"\u767b\u5f55","text":"<ul> <li>\u901a\u8fc7\u6267\u884c<code>docker login</code>\u547d\u4ee4\u4ea4\u4e92\u5f0f\u7684\u8f93\u5165\u7528\u6237\u540d\u53ca\u5bc6\u7801\u6765\u5b8c\u6210\u5728\u547d\u4ee4\u884c\u754c\u9762\u767b\u5f55 Docker Hub\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_3","title":"\u6ce8\u9500","text":"<ul> <li>\u4f60\u53ef\u4ee5\u901a\u8fc7<code>docker logout</code>\u9000\u51fa\u767b\u5f55\u3002 \u62c9\u53d6\u955c\u50cf</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_4","title":"\u62c9\u53d6\u955c\u50cf","text":"<ul> <li>\u901a\u8fc7<code>docker search</code>\u547d\u4ee4\u6765\u67e5\u627e\u5b98\u65b9\u4ed3\u5e93\u4e2d\u7684\u955c\u50cf</li> <li> <p><code>\u901a\u8fc7docker pull</code>\u547d\u4ee4\u6765\u5c06\u5b83\u4e0b\u8f7d\u5230\u672c\u5730\u3002 Bash<pre><code>$ docker search centos\nNAME                                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\ncentos                                          The official build of CentOS.                   465       [OK]\ntianon/centos                                   CentOS 5 and 6, created using rinse instea...   28\nblalor/centos                                   Bare-bones base CentOS 6.5 image                6                    [OK]\nsaltstack/centos-6-minimal                                                                      6                    [OK]\ntutum/centos-6.4                                DEPRECATED. Use tutum/centos:6.4 instead. ...   5                    [OK]\n</code></pre></p> </li> <li> <p>\u5b98\u65b9\u7684\u955c\u50cf\u8bf4\u660e\u662f\u5b98\u65b9\u9879\u76ee\u7ec4\u521b\u5efa\u548c\u7ef4\u62a4\u7684\uff0c<code>automated</code>\u8d44\u6e90\u5141\u8bb8\u7528\u6237\u9a8c\u8bc1\u955c\u50cf\u7684\u6765\u6e90\u548c\u5185\u5bb9\u3002</p> </li> <li>\u6839\u636e\u662f\u5426\u662f\u5b98\u65b9\u63d0\u4f9b\uff0c\u53ef\u5c06\u955c\u50cf\u8d44\u6e90\u5206\u4e3a\u4e24\u7c7b\u3002</li> <li>\u4e00\u79cd\u662f\u7c7b\u4f3c centos \u8fd9\u6837\u7684\u955c\u50cf\uff0c\u88ab\u79f0\u4e3a\u57fa\u7840\u955c\u50cf\u6216\u6839\u955c\u50cf\u3002\u8fd9\u4e9b\u57fa\u7840\u955c\u50cf\u7531 Docker \u516c\u53f8\u521b\u5efa\u3001\u9a8c\u8bc1\u3001\u652f\u6301\u3001\u63d0\u4f9b\u3002\u8fd9\u6837\u7684\u955c\u50cf\u5f80\u5f80\u4f7f\u7528\u5355\u4e2a\u5355\u8bcd\u4f5c\u4e3a\u540d\u5b57\u3002</li> <li>\u8fd8\u6709\u4e00\u79cd\u7c7b\u578b\uff0c\u6bd4\u5982 tianon/centos \u955c\u50cf\uff0c\u5b83\u662f\u7531 Docker \u7684\u7528\u6237\u521b\u5efa\u5e76\u7ef4\u62a4\u7684\uff0c\u5f80\u5f80\u5e26\u6709\u7528\u6237\u540d\u79f0\u524d\u7f00\u3002\u53ef\u4ee5\u901a\u8fc7\u524d\u7f00<code>username/</code>\u6765\u6307\u5b9a\u4f7f\u7528\u67d0\u4e2a\u7528\u6237\u63d0\u4f9b\u7684\u955c\u50cf\uff0c\u6bd4\u5982 tianon \u7528\u6237\u3002</li> <li>\u5728\u67e5\u627e\u7684\u65f6\u5019\u901a\u8fc7<code>--filter=stars=N</code>\u53c2\u6570\u53ef\u4ee5\u6307\u5b9a\u4ec5\u663e\u793a\u6536\u85cf\u6570\u91cf\u4e3a N \u4ee5\u4e0a\u7684\u955c\u50cf\u3002\u4e0b\u8f7d\u5b98\u65b9 centos \u955c\u50cf\u5230\u672c\u5730\u3002 Bash<pre><code>$ docker pull centos\nPulling repository centos\n0b443ba03958: Download complete\n539c0211cd76: Download complete\n511136ea3c5a: Download complete\n7064731afe90: Download complete\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_5","title":"\u63a8\u9001\u955c\u50cf","text":"<ul> <li>\u767b\u5f55\u540e\u901a\u8fc7<code>docker push</code>\u547d\u4ee4\u6765\u5c06\u81ea\u5df1\u7684\u955c\u50cf\u63a8\u9001\u5230 Docker Hub\u3002 Bash<pre><code>$ docker tag ubuntu:17.10 username/ubuntu:17.10\n$ docker image ls\nREPOSITORY                                               TAG                    IMAGE ID            CREATED             SIZE\nubuntu                                                   17.10                  275d79972a86        6 days ago          94.6MB\nusername/ubuntu                                          17.10                  275d79972a86        6 days ago          94.6MB\n$ docker push username/ubuntu:17.10\n$ docker search username\nNAME                      DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nusername/ubuntu\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_6","title":"\u79c1\u6709\u4ed3\u5e93","text":"","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_7","title":"\u642d\u5efa\u6d41\u7a0b","text":"<ul> <li> <p><code>docker-registry</code>\u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u4e8e\u6784\u5efa\u79c1\u6709\u7684\u955c\u50cf\u4ed3\u5e93\u3002\u672c\u6587\u5185\u5bb9\u57fa\u4e8e docker-registry v2.x \u7248\u672c\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u83b7\u53d6\u5b98\u65b9 registry \u955c\u50cf\u6765\u8fd0\u884c\u3002 Bash<pre><code>$ docker run -d -p 30001:5000 --restart=always --name registry docker.io/registry\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\uff1a Bash<pre><code>vim /etc/docker/daemon.json\n\n{\n    \"registry-mirrors\":[\"https://docker.mirrors.ustc.edu.cn\"],\n    \"insecure-registries\":[\"127.0.0.1:30001\"]  # \u670d\u52a1\u5668ip\u548c\u7aef\u53e3\n}\n</code></pre></p> </li> <li> <p>\u91cd\u542fdocker\u670d\u52a1 Bash<pre><code>systemctl restart docker\n</code></pre></p> </li> <li> <p>\u8fd9\u5c06\u4f7f\u7528\u5b98\u65b9\u7684<code>registry</code>\u955c\u50cf\u6765\u542f\u52a8\u79c1\u6709\u4ed3\u5e93\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ed3\u5e93\u4f1a\u88ab\u521b\u5efa\u5728\u5bb9\u5668\u7684<code>/var/lib/registry</code>\u76ee\u5f55\u4e0b\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7 -v \u53c2\u6570\u6765\u5c06\u955c\u50cf\u6587\u4ef6\u5b58\u653e\u5728\u672c\u5730\u7684\u6307\u5b9a\u8def\u5f84\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\u5c06\u4e0a\u4f20\u7684\u955c\u50cf\u653e\u5230\u672c\u5730\u7684 /opt/data/registry \u76ee\u5f55\u3002 Bash<pre><code>$ docker run -d -p 30001:5000 --restart=always -v /opt/data/registry:/var/lib/registry docker.io/registry\n</code></pre></p> </li> <li> <p>\u8bbf\u95ee\uff1ahttp://127.0.0.1:30001/v2/_catalog JSON<pre><code>{\n\"repositories\": [\n]\n}\n</code></pre></p> </li> <li> <p>\u767b\u5f55 Bash<pre><code>docker login -u \u7528\u6237\u540d -p \u5bc6\u7801\n</code></pre></p> </li> <li> <p>\u4e0a\u4f20\u955c\u50cf\u5230\u4ed3\u5e93 Bash<pre><code>docker tag frontend_docker:v1 127.0.0.1:30001/frontend_docker:v1  # \u6253\u6807\u7b7e\ndocker push 127.0.0.1:30001/frontend_docker:v1  \n\n{\n\"repositories\": [\n\"frontend_docker\"\n]\n}\n</code></pre></p> </li> <li> <p>\u62c9\u53d6\u955c\u50cf Bash<pre><code>docker pull 127.0.0.1:30001/frontend_docker:v1\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_8","title":"\u5728\u79c1\u6709\u4ed3\u5e93\u4e0a\u4f20\u3001\u641c\u7d22\u3001\u4e0b\u8f7d\u955c\u50cf","text":"<ul> <li> <p>\u521b\u5efa\u597d\u79c1\u6709\u4ed3\u5e93\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528<code>docker tag</code>\u6765\u6807\u8bb0\u4e00\u4e2a\u955c\u50cf\uff0c\u7136\u540e\u63a8\u9001\u5b83\u5230\u4ed3\u5e93\u3002\u4f8b\u5982\u79c1\u6709\u4ed3\u5e93\u5730\u5740\u4e3a 127.0.0.1:5000\u3002\u5148\u5728\u672c\u673a\u67e5\u770b\u5df2\u6709\u7684\u955c\u50cf\u3002 Text Only<pre><code>$ docker image ls\nREPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB\n</code></pre></p> </li> <li> <p>\u4f7f\u7528<code>docker tag</code>\u5c06 ubuntu:latest \u8fd9\u4e2a\u955c\u50cf\u6807\u8bb0\u4e3a 127.0.0.1:5000/ubuntu:latest\u3002 </p> </li> <li> <p>\u683c\u5f0f\u4e3a docker tag IMAGE[:TAG] [REGISTRY_HOST[:REGISTRY_PORT]/]REPOSITORY[:TAG] Text Only<pre><code>$ docker tag ubuntu:latest 127.0.0.1:5000/ubuntu:latest\n$ docker image ls\nREPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB\n127.0.0.1:5000/ubuntu:latest      latest              ba5877dc9bec        6 weeks ago         192.7 MB\n</code></pre></p> </li> <li> <p>\u4f7f\u7528<code>docker push</code>\u4e0a\u4f20\u6807\u8bb0\u7684\u955c\u50cf\u3002 Text Only<pre><code>$ docker push 127.0.0.1:5000/ubuntu:latest\nThe push refers to repository [127.0.0.1:5000/ubuntu]\n373a30c24545: Pushed\na9148f5200b0: Pushed\ncdd3de0940ab: Pushedfc56279bbb33: Pushed\nb38367233d37: Pushed\n2aebd096e0e2: Pushed\nlatest: digest: sha256:fe4277621f10b5026266932ddf760f5a756d2facd505a94d2da12f4f52f71f5a size: 1568\n</code></pre></p> </li> <li> <p>\u7528<code>curl</code>\u67e5\u770b\u4ed3\u5e93\u4e2d\u7684\u955c\u50cf\u3002 Text Only<pre><code>$ curl 127.0.0.1:5000/v2/_catalog\n{\"repositories\":[\"ubuntu\"]}\n</code></pre></p> </li> <li> <p>\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230 {\"repositories\":[\"ubuntu\"]}\uff0c\u8868\u660e\u955c\u50cf\u5df2\u7ecf\u88ab\u6210\u529f\u4e0a\u4f20\u4e86\u3002</p> </li> <li>\u4ece\u79c1\u6709\u4ed3\u5e93\u4e2d\u4e0b\u8f7d\u8fd9\u4e2a\u955c\u50cf\u3002 Text Only<pre><code>$ docker image rm 127.0.0.1:5000/ubuntu:latest\n$ docker pull 127.0.0.1:5000/ubuntu:latest\nPulling repository 127.0.0.1:5000/ubuntu:latest\nba5877dc9bec: Download complete\n511136ea3c5a: Download complete\n9bad880da3d2: Download complete\n25f11f5fb0cb: Download complete\nebc34468f71d: Download complete\n2318d26665ef: Download complete\n$ docker image ls\nREPOSITORY                         TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\n127.0.0.1:5000/ubuntu:latest       latest              ba5877dc9bec        6 weeks ago         192.7 MB\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_9","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528 127.0.0.1:5000 \u4f5c\u4e3a\u4ed3\u5e93\u5730\u5740\uff0c\u6bd4\u5982\u60f3\u8ba9\u672c\u7f51\u6bb5\u7684\u5176\u4ed6\u4e3b\u673a\u4e5f\u80fd\u628a\u955c\u50cf\u63a8\u9001\u5230\u79c1\u6709\u4ed3\u5e93\u3002\u4f60\u5c31\u5f97\u628a\u4f8b\u5982 192.168.199.100:5000 \u8fd9\u6837\u7684\u5185\u7f51\u5730\u5740\u4f5c\u4e3a\u79c1\u6709\u4ed3\u5e93\u5730\u5740\uff0c\u8fd9\u65f6\u4f60\u4f1a\u53d1\u73b0\u65e0\u6cd5\u6210\u529f\u63a8\u9001\u955c\u50cf\u3002</li> <li>\u8fd9\u662f\u56e0\u4e3a Docker \u9ed8\u8ba4\u4e0d\u5141\u8bb8\u975e HTTPS \u65b9\u5f0f\u63a8\u9001\u955c\u50cf\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 Docker \u7684\u914d\u7f6e\u9009\u9879\u6765\u53d6\u6d88\u8fd9\u4e2a\u9650\u5236\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#ubuntu-1404-debian-7-wheezy","title":"Ubuntu 14.04, Debian 7 Wheezy","text":"<ul> <li> <p>\u5bf9\u4e8e\u4f7f\u7528 upstart \u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u7f16\u8f91<code>/etc/default/docker</code>\u6587\u4ef6\uff0c\u5728\u5176\u4e2d\u7684<code>DOCKER_OPTS</code>\u4e2d\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a Text Only<pre><code>DOCKER_OPTS=\"--registry-mirror=https://registry.docker-cn.com --insecure-registries=192.168.199.100:5000\"\n</code></pre></p> </li> <li> <p>\u91cd\u65b0\u542f\u52a8\u670d\u52a1: Text Only<pre><code>$ sudo service docker restart\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#ubuntu-1604-debian-8-centos-7","title":"Ubuntu 16.04+, Debian 8+, centos 7","text":"<ul> <li>\u5bf9\u4e8e\u4f7f\u7528 systemd \u7684\u7cfb\u7edf\uff0c\u8bf7\u5728<code>/etc/docker/daemon.json</code>\u4e2d\u5199\u5165\u5982\u4e0b\u5185\u5bb9\uff08\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u8bf7\u65b0\u5efa\u8be5\u6587\u4ef6\uff09 Text Only<pre><code>{\n  \"registry-mirror\": [\n    \"https://registry.docker-cn.com\"\n  ],\n  \"insecure-registries\": [\n    \"192.168.199.100:5000\"\n  ]\n}   \n</code></pre> <p>\u6ce8\u610f\uff1a\u8be5\u6587\u4ef6\u5fc5\u987b\u7b26\u5408<code>json</code>\u89c4\u8303\uff0c\u5426\u5219 Docker \u5c06\u4e0d\u80fd\u542f\u52a8\u3002</p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/docker_registry_usage/#_10","title":"\u5176\u4ed6","text":"<p>\u5bf9\u4e8e Docker for Windows\u3001Docker for Mac \u5728\u8bbe\u7f6e\u4e2d\u7f16\u8f91<code>daemon.json</code>\u589e\u52a0\u548c\u4e0a\u8fb9\u4e00\u6837\u7684\u5b57\u7b26\u4e32\u5373\u53ef\u3002</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/","title":"Dockerfile\u5e38\u7528\u547d\u4ee4\u4e0e\u7f16\u5199\u6307\u5357","text":"<p>Dockerfile\u4e2d\u7684\u6bcf\u4e00\u4e2a\u6307\u4ee4\u90fd\u4f1a\u5efa\u7acb\u4e00\u5c42\u955c\u50cf</p>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#from","title":"FROM\uff1a\u6307\u5b9a\u57fa\u7840\u955c\u50cf","text":"<ul> <li>\u5728dockerfile\u6587\u4ef6\u4e2d\u5fc5\u987b\u662f\u7b2c\u4e00\u6761\u547d\u4ee4</li> <li>\u53ef\u4ee5\u4f7f\u7528Docker store\u4e0a\u5b98\u65b9\u955c\u50cf\uff08nginx\u3001redis\u3001mongo\u3001mysql\u3001httpd\u3001php\u3001tomcat \u7b49\uff09</li> <li>\u53ef\u4ee5\u4f7f\u7528\u65b9\u4fbf\u5f00\u53d1\uff0c\u6784\u5efa\uff0c\u8fd0\u884c\u5404\u79cd\u8bed\u8a00\u7684\u5e94\u7528\u955c\u50cf\uff08node\u3001openjdk\u3001python\u3001ruby\u3001golang\u00a0\u7b49\uff09</li> <li>\u53ef\u4ee5\u4f7f\u7528\u66f4\u4e3a\u57fa\u7840\u7684\u64cd\u4f5c\u7cfb\u7edf\u955c\u50cf\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u7684\u8f6f\u4ef6\u5e93\u63d0\u4f9b\u4e86\u66f4\u5e7f\u9614\u7684\u6269\u5c55\u7a7a\u95f4\uff08ubuntu\u3001debian\u3001centos\u3001fedora\u3001alpine \u7b49\uff09</li> <li>\u53ef\u4ee5\u4f7f\u7528\u7a7a\u767d\u955c\u50cf\uff08scratch\uff09,\u4e00\u822cgo\u5f00\u53d1\u7684\u4f7f\u7528\u6bd4\u8f83\u591a Docker<pre><code>FROM nginx\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#run","title":"RUN\uff1a\u6267\u884c\u547d\u4ee4","text":"<ul> <li>RUN \u7684\u683c\u5f0f\u6709\u4e24\u79cd\uff1a</li> <li> <p>shell\u683c\u5f0f\uff1aRUN &lt;\u547d\u4ee4&gt;\uff0c \u548c\u5728\u547d\u4ee4\u884c\u76f4\u63a5\u8f93\u5165\u547d\u4ee4\u7684\u6548\u679c\u4e00\u6837\u3002 Docker<pre><code>RUN echo '&lt;h1&gt;Hello, Docker!&lt;/h1&gt;' &gt; /usr/share/nginx/html/index.html\n</code></pre></p> </li> <li> <p>exec\u683c\u5f0f\uff1aRUN [\"\u53ef\u6267\u884c\u6587\u4ef6\", \"\u53c2\u65701\", \"\u53c2\u65702\"]\uff0c\u8fd9\u66f4\u50cf\u662f\u51fd\u6570\u8c03\u7528\u4e2d\u7684\u683c\u5f0f Docker<pre><code>FROM debian:jessie\nRUN apt-get update\nRUN apt-get install -y gcc libc6-dev make\nRUN wget -O redis.tar.gz \"http://download.redis.io/releases/redis-3.2.5.tar.gz\"\nRUN mkdir -p /usr/src/redis\nRUN tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1\nRUN make -C /usr/src/redis\nRUN make -C /usr/src/redis install\n# \u4e0a\u8ff0\u8fd9\u79cd\u5199\u6cd5\uff0c\u521b\u5efa\u4e867\u5c42\u955c\u50cf\u3002\u901a\u5e38\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u662f\u6ca1\u6709\u5fc5\u8981\u7684\uff0c\u53ef\u4ee5\u4f18\u5316\u4e3a\u4e0b\u5217\u5f62\u5f0f\nFROM debian:jessie\nRUN buildDeps='gcc libc6-dev make' \\\n&amp;&amp; apt-get update \\\n&amp;&amp; apt-get install -y $buildDeps \\\n&amp;&amp; wget -O redis.tar.gz \"http://download.redis.io/releases/redis-3.2.5.tar.gz\" \\\n&amp;&amp; mkdir -p /usr/src/redis \\\n&amp;&amp; tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1 \\\n&amp;&amp; make -C /usr/src/redis \\\n&amp;&amp; make -C /usr/src/redis install \\\n&amp;&amp; rm -rf /var/lib/apt/lists/* \\\n&amp;&amp; rm redis.tar.gz \\\n&amp;&amp; rm -r /usr/src/redis \\\n&amp;&amp; apt-get purge -y --auto-remove $buildDeps\n\n# \u6b64\u65f6\u53ea\u521b\u5efa\u4e86\u4e00\u5c42\u955c\u50cf\uff0c\u8282\u7701\u4e86\u7a7a\u95f4\uff0c\u52a0\u5feb\u4e86\u5236\u4f5c\u955c\u50cf\u7684\u901f\u5ea6\uff0c\n# \u53e6\u5916\u901a\u5e38\u5728\u6267\u884c\u5b8c\u5b89\u88c5\u547d\u4ee4\u4ee5\u540e\uff0c\u4e00\u822c\u9700\u8981\u53bb\u6e05\u7406\u6389\u8f6f\u4ef6\u5305\u548c\u7f13\u5b58\u3002\u7f29\u5c0f\u955c\u50cf\u7684\u5927\u5c0f\u3002\n</code></pre></p> </li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#build","title":"Build: \u6784\u5efa\u955c\u50cf","text":"Bash<pre><code>docker build [\u9009\u9879] &lt;\u4e0a\u4e0b\u6587\u8def\u5f84/URL/-&gt;\n\n$ docker build -t nginx:v3 .\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM nginx\n---&gt; e43d811ce2f4\nStep 2 : RUN echo '&lt;h1&gt;Hello, Docker!&lt;/h1&gt;' &gt; /usr/share/nginx/html/index.html\n---&gt; Running in 9cdc27646c7b\n---&gt; 44aa4490ce2c\nRemoving intermediate container 9cdc27646c7b\nSuccessfully built 44aa4490ce2c\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#context","title":"Context\uff1a\u955c\u50cf\u6784\u5efa\u4e0a\u4e0b\u6587","text":"<p>\u5f53\u6211\u4eec\u8fdb\u884c\u955c\u50cf\u6784\u5efa\u7684\u65f6\u5019\uff0c\u5e76\u975e\u6240\u6709\u5b9a\u5236\u90fd\u4f1a\u901a\u8fc7 RUN \u6307\u4ee4\u5b8c\u6210\uff0c\u7ecf\u5e38\u4f1a\u9700\u8981\u5c06\u4e00\u4e9b\u672c\u5730\u6587\u4ef6\u590d\u5236\u8fdb\u955c\u50cf\uff0c\u6bd4\u5982\u901a\u8fc7 COPY \u6307\u4ee4\u3001ADD \u6307\u4ee4\u7b49\u3002\u800c docker build \u547d\u4ee4\u6784\u5efa\u955c\u50cf\uff0c\u5176\u5b9e\u5e76\u975e\u5728\u672c\u5730\u6784\u5efa\uff0c\u800c\u662f\u5728\u670d\u52a1\u7aef\uff0c\u4e5f\u5c31\u662f Docker \u5f15\u64ce\u4e2d\u6784\u5efa\u7684\u3002\u90a3\u4e48\u5728\u8fd9\u79cd\u5ba2\u6237\u7aef/\u670d\u52a1\u7aef\u7684\u67b6\u6784\u4e2d\uff0c\u5982\u4f55\u624d\u80fd\u8ba9\u670d\u52a1\u7aef\u83b7\u5f97\u672c\u5730\u6587\u4ef6\u5462\uff1f \u8fd9\u5c31\u5f15\u5165\u4e86\u4e0a\u4e0b\u6587\u7684\u6982\u5ff5\u3002\u5f53\u6784\u5efa\u7684\u65f6\u5019\uff0c\u7528\u6237\u4f1a\u6307\u5b9a\u6784\u5efa\u955c\u50cf\u4e0a\u4e0b\u6587\u7684\u8def\u5f84\uff0cdocker build \u547d\u4ee4\u5f97\u77e5\u8fd9\u4e2a\u8def\u5f84\u540e\uff0c\u4f1a\u5c06\u8def\u5f84\u4e0b\u7684\u6240\u6709\u5185\u5bb9\u6253\u5305\uff0c\u7136\u540e\u4e0a\u4f20\u7ed9 Docker \u5f15\u64ce\u3002\u8fd9\u6837 Docker \u5f15\u64ce\u6536\u5230\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u5305\u540e\uff0c\u5c55\u5f00\u5c31\u4f1a\u83b7\u5f97\u6784\u5efa\u955c\u50cf\u6240\u9700\u7684\u4e00\u5207\u6587\u4ef6\u3002</p> Docker<pre><code>COPY ./package.json /app/\n\n# \u8fd9\u5e76\u4e0d\u662f\u8981\u590d\u5236\u6267\u884c docker build \u547d\u4ee4\u6240\u5728\u7684\u76ee\u5f55\u4e0b\u7684 package.json\uff0c\u4e5f\u4e0d\u662f\u590d\u5236 Dockerfile \u6240\u5728\u76ee\u5f55\u4e0b\u7684 package.json\uff0c\n# \u800c\u662f\u590d\u5236 \u4e0a\u4e0b\u6587\uff08context\uff09 \u76ee\u5f55\u4e0b\u7684 package.json\u3002\n</code></pre> <p><code>COPY</code>\u8fd9\u7c7b\u6307\u4ee4\u4e2d\u7684\u6e90\u6587\u4ef6\u7684\u8def\u5f84\u90fd\u662f\u76f8\u5bf9\u8def\u5f84\u3002\u8fd9\u4e5f\u662f\u521d\u5b66\u8005\u7ecf\u5e38\u4f1a\u95ee\u7684\u4e3a\u4ec0\u4e48 COPY ../package.json /app \u6216\u8005 COPY /opt/xxxx /app \u65e0\u6cd5\u5de5\u4f5c\u7684\u539f\u56e0\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u8def\u5f84\u5df2\u7ecf\u8d85\u51fa\u4e86\u4e0a\u4e0b\u6587\u7684\u8303\u56f4\uff0cDocker \u5f15\u64ce\u65e0\u6cd5\u83b7\u5f97\u8fd9\u4e9b\u4f4d\u7f6e\u7684\u6587\u4ef6\u3002\u5982\u679c\u771f\u7684\u9700\u8981\u90a3\u4e9b\u6587\u4ef6\uff0c\u5e94\u8be5\u5c06\u5b83\u4eec\u590d\u5236\u5230\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e2d\u53bb\u3002</p> Bash<pre><code>$ docker build -t nginx:v3 .\nSending build context to Docker daemon 2.048 kB\n...\n# \u901a\u8fc7build \u8f93\u51fa\uff0c\u53ef\u4ee5\u770b\u5230\u53d1\u9001\u4e0a\u4e0b\u6587\u7684\u8fc7\u7a0b\n</code></pre> <ul> <li>\u7ecf\u9a8cNote:</li> <li>\u4e00\u822c\u6765\u8bf4\uff0c\u5e94\u8be5\u4f1a\u5c06 Dockerfile \u7f6e\u4e8e\u4e00\u4e2a\u7a7a\u76ee\u5f55\u4e0b\uff0c\u6216\u8005\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u3002\u5982\u679c\u8be5\u76ee\u5f55\u4e0b\u6ca1\u6709\u6240\u9700\u6587\u4ef6\uff0c\u90a3\u4e48\u5e94\u8be5\u628a\u6240\u9700\u6587\u4ef6\u590d\u5236\u4e00\u4efd\u8fc7\u6765\u3002\u5982\u679c\u76ee\u5f55\u4e0b\u6709\u4e9b\u4e1c\u897f\u786e\u5b9e\u4e0d\u5e0c\u671b\u6784\u5efa\u65f6\u4f20\u7ed9 Docker \u5f15\u64ce\uff0c\u90a3\u4e48\u53ef\u4ee5\u7528 .gitignore \u4e00\u6837\u7684\u8bed\u6cd5\u5199\u4e00\u4e2a<code>.dockerignore</code>\uff0c\u8be5\u6587\u4ef6\u662f\u7528\u4e8e\u5254\u9664\u4e0d\u9700\u8981\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u4f20\u9012\u7ed9 Docker \u5f15\u64ce\u7684\u3002</li> <li>\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4f1a\u6709\u4eba\u8bef\u4ee5\u4e3a\u00a0.\u00a0\u662f\u6307\u5b9a Dockerfile \u6240\u5728\u76ee\u5f55\u5462\uff1f\u8fd9\u662f\u56e0\u4e3a\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4e0d\u989d\u5916\u6307\u5b9a Dockerfile \u7684\u8bdd\uff0c\u4f1a\u5c06\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e0b\u7684\u540d\u4e3a Dockerfile \u7684\u6587\u4ef6\u4f5c\u4e3a Dockerfile\u3002</li> <li>\u8fd9\u53ea\u662f\u9ed8\u8ba4\u884c\u4e3a\uff0c\u5b9e\u9645\u4e0a Dockerfile \u7684\u6587\u4ef6\u540d\u5e76\u4e0d\u8981\u6c42\u5fc5\u987b\u4e3a Dockerfile\uff0c\u800c\u4e14\u5e76\u4e0d\u8981\u6c42\u5fc5\u987b\u4f4d\u4e8e\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e2d\uff0c\u6bd4\u5982\u53ef\u4ee5\u7528<code>-f ../Dockerfile.php</code>\u53c2\u6570\u6307\u5b9a\u67d0\u4e2a\u6587\u4ef6\u4f5c\u4e3a Dockerfile\u3002</li> <li>\u4e00\u822c\u5927\u5bb6\u4e60\u60ef\u6027\u7684\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u7684\u6587\u4ef6\u540d Dockerfile\uff0c\u4ee5\u53ca\u4f1a\u5c06\u5176\u7f6e\u4e8e\u955c\u50cf\u6784\u5efa\u4e0a\u4e0b\u6587\u76ee\u5f55\u4e2d\u3002</li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerifle_guide/#_1","title":"\u8fc1\u79fb\u955c\u50cf","text":"<p>Docker \u8fd8\u63d0\u4f9b\u4e86docker load\u548cdocker save\u547d\u4ee4\uff0c\u7528\u4ee5\u5c06\u955c\u50cf\u4fdd\u5b58\u4e3a\u4e00\u4e2a tar \u6587\u4ef6\uff0c\u7136\u540e\u4f20\u8f93\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\u4e0a\uff0c\u518d\u52a0\u8f7d\u8fdb\u6765\u3002\u8fd9\u662f\u5728\u6ca1\u6709 Docker Registry \u65f6\u7684\u505a\u6cd5\uff0c\u73b0\u5728\u5df2\u7ecf\u4e0d\u63a8\u8350\uff0c\u955c\u50cf\u8fc1\u79fb\u5e94\u8be5\u76f4\u63a5\u4f7f\u7528 Docker Registry\uff0c\u65e0\u8bba\u662f\u76f4\u63a5\u4f7f\u7528 Docker Hub \u8fd8\u662f\u4f7f\u7528\u5185\u7f51\u79c1\u6709 Registry \u90fd\u53ef\u4ee5\u3002</p> <p>\u4f7f\u7528docker save\u547d\u4ee4\u53ef\u4ee5\u5c06\u955c\u50cf\u4fdd\u5b58\u4e3a\u5f52\u6863\u6587\u4ef6\u3002\u6bd4\u5982\u6211\u4eec\u5e0c\u671b\u4fdd\u5b58\u8fd9\u4e2a alpine \u955c\u50cf\u3002 Bash<pre><code>docker image ls alpine\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nalpine              latest              baa5d63471ea        5 weeks ago         4.803 MB\n\n# \u4fdd\u5b58\u955c\u50cf\u7684\u547d\u4ee4\u4e3a\uff1a\ndocker save alpine | gzip &gt; alpine-latest.tar.gz\n\n# \u52a0\u8f7d\u955c\u50cf\ndocker load -i alpine-latest.tar.gz\nLoaded image: alpine:latest\n</code></pre></p> <ul> <li>\u4e0a\u8ff0\u4e24\u6761\u547d\u4ee4\u53ef\u4ee5\u5408\u5e76\u4e3a\u4e00\u6761\u547d\u4ee4,\u5e76\u4e14\u5e26\u6709\u8fdb\u5ea6\u6761 Bash<pre><code>docker save &lt;\u955c\u50cf\u540d&gt; | bzip2 | pv | ssh &lt;\u7528\u6237\u540d&gt;@&lt;\u4e3b\u673a\u540d&gt; 'cat | docker load'\n</code></pre></li> </ul>","tags":["Docker"]},{"location":"notehub/cloud_native/docker/dockerignore_template/","title":"dockerignore\u6587\u4ef6","text":"Docker<pre><code>**/__pycache__\n**/*venv\n**/.classpath\n**/.dockerignore\n**/.env\n**/.git\n**/.gitignore\n**/.project\n**/.settings\n**/.toolstarget\n**/.vs\n**/.vscode\n**/*.*proj.user\n**/*.dbmdl\n**/*.jfm\n**/bin\n**/charts\n**/docker-compose*\n**/compose*\n**/Dockerfile*\n**/node_modules\n**/npm-debug.log\n**/obj\n**/secrets.dev.yaml\n**/values.dev.yaml\n*.db\n.python-version\nLICENSE\nREADME.md\n</code></pre>","tags":["Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_software_usage/","title":"docker-compose\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5\u6c47\u603b","text":"","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_software_usage/#yapi","title":"\u5b89\u88c5YApi","text":"<ul> <li>\u65b9\u5f0f\u4e00\uff1a</li> </ul> YAML<pre><code>version: '3'\n\nservices:\n  yapi-web:\n    image: liuqingzheng/yapi:latest\n    container_name: yapi-web\n    ports:\n      - 3000:3000\n    environment:\n      - YAPI_ADMIN_ACCOUNT=466640681@qq.com\n      - YAPI_ADMIN_PASSWORD=Aa123456!\n      - YAPI_CLOSE_REGISTER=true\n      - YAPI_DB_SERVERNAME=yapi-mongo\n      - YAPI_DB_PORT=27017\n      - YAPI_DB_DATABASE=yapi\n      - YAPI_MAIL_ENABLE=false\n      - YAPI_LDAP_LOGIN_ENABLE=false\n      - YAPI_PLUGINS=[]\n    depends_on:\n      - yapi-mongo\n    links:\n      - yapi-mongo\n    restart: unless-stopped\n  yapi-mongo:\n    image: mongo:latest\n    container_name: yapi-mongo\n    volumes:\n      - ./data/db:/data/db\n    expose:\n      - 27017\n    restart: unless-stopped\n</code></pre> YAML<pre><code>docker-compose up -d # \u542f\u52a8\ndocker-compose stop  # \u505c\u6b62\ndocker-compose rm    # \u5220\u9664\n\nhttp://127.0.0.1:3000/\n\u8f93\u5165\u90ae\u7bb1\uff1a466640681@qq.com\n\u8f93\u5165\u5bc6\u7801\uff1aAa123456!\n</code></pre> <ul> <li>\u65b9\u5f0f\u4e8c\uff1a</li> <li>\u53c2\u8003\u94fe\u63a5\uff1a[https://github.com/Ryan-Miao/docker-yapi]</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/","title":"docker-compose\u4f7f\u7528\u603b\u7ed3","text":"","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#compose","title":"compose\u7b80\u8ff0","text":"<ul> <li><code>Docker Compose</code>\u662f<code>Docker</code>\u5b98\u65b9\u7f16\u6392\uff08Orchestration\uff09\u9879\u76ee\u4e4b\u4e00\uff0c\u8d1f\u8d23\u5feb\u901f\u7684\u90e8\u7f72\u5206\u5e03\u5f0f\u5e94\u7528</li> <li>\u5b83\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u4e00\u4e2a\u5355\u72ec\u7684\u00a0<code>docker-compose.yml</code>\u6a21\u677f\u6587\u4ef6\uff08YAML \u683c\u5f0f\uff09\u6765\u5b9a\u4e49\u4e00\u7ec4\u76f8\u5173\u8054\u7684\u5e94\u7528\u5bb9\u5668\u4e3a\u4e00\u4e2a\u9879\u76ee</li> <li>\u9002\u7528\u4e8e\u5f00\u53d1\u73af\u5883\u6216\u8005\u5355\u673a\u73af\u5883\u4e0b\u7684\u5bb9\u5668\u7f16\u6392</li> <li>Compose \u4e2d\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a</li> <li>\u670d\u52a1 (service)\uff1a\u4e00\u4e2a\u5e94\u7528\u7684\u5bb9\u5668\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5305\u62ec\u82e5\u5e72\u8fd0\u884c\u76f8\u540c\u955c\u50cf\u7684\u5bb9\u5668\u5b9e\u4f8b\u3002</li> <li>\u9879\u76ee (project)\uff1a\u7531\u4e00\u7ec4\u5173\u8054\u7684\u5e94\u7528\u5bb9\u5668\u7ec4\u6210\u7684\u4e00\u4e2a\u5b8c\u6574\u4e1a\u52a1\u5355\u5143\uff0c\u5728 docker-compose.yml \u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_1","title":"\u5b89\u88c5","text":"","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_2","title":"\u4e8c\u8fdb\u5236\u5b89\u88c5","text":"<ul> <li>\u4ece \u5b98\u65b9 GitHub Release \u5904\u76f4\u63a5\u4e0b\u8f7d\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u5373\u53ef\u3002\u4f8b\u5982\uff0c\u5728 Linux 64 \u4f4d\u7cfb\u7edf\u4e0a\u76f4\u63a5\u4e0b\u8f7d\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u5305\u3002 Text Only<pre><code>sudo curl -L https://github.com/docker/compose/releases/download/1.17.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose\n\nsudo chmod +x /usr/local/bin/docker-compose\n\ndocker-compose version\n</code></pre></li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#pip","title":"PIP \u5b89\u88c5","text":"<p>\u6ce8\uff1a x86_64 \u67b6\u6784\u7684 Linux \u5efa\u8bae\u6309\u7167\u4e0a\u8fb9\u7684\u65b9\u6cd5\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305\u8fdb\u884c\u5b89\u88c5\uff0c\u5982\u679c\u60a8\u8ba1\u7b97\u673a\u7684\u67b6\u6784\u662f ARM (\u4f8b\u5982\uff0c\u6811\u8393\u6d3e)\uff0c\u518d\u4f7f\u7528 pip \u5b89\u88c5\u3002</p> <p>\u8fd9\u79cd\u65b9\u5f0f\u662f\u5c06 Compose \u5f53\u4f5c\u4e00\u4e2a Python \u5e94\u7528\u6765\u4ece pip \u6e90\u4e2d\u5b89\u88c5\u3002\u6267\u884c\u5b89\u88c5\u547d\u4ee4\uff1a Bash<pre><code>$ sudo pip install -U docker-compose\nCollecting docker-compose\n  Downloading docker-compose-1.17.1.tar.gz (149kB): 149kB downloaded\n...\nSuccessfully installed docker-compose cached-property requests texttable websocket-client docker-py dockerpty six enum34 backports.ssl-match-hostname ipaddress\n</code></pre></p> <ul> <li>bash \u8865\u5168\u547d\u4ee4\uff1a Bash<pre><code>$ curl -L https://raw.githubusercontent.com/docker/compose/1.8.0/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose\n</code></pre></li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_3","title":"\u5bb9\u5668\u4e2d\u6267\u884c","text":"<p>Compose \u65e2\u7136\u662f\u4e00\u4e2a Python \u5e94\u7528\uff0c\u81ea\u7136\u4e5f\u53ef\u4ee5\u76f4\u63a5\u7528\u5bb9\u5668\u6765\u6267\u884c\u5b83\u3002 Text Only<pre><code>$ curl -L https://github.com/docker/compose/releases/download/1.8.0/run.sh &gt; /usr/local/bin/docker-compose\n$ chmod +x /usr/local/bin/docker-compose\n</code></pre> \u5b9e\u9645\u4e0a\uff0c\u67e5\u770b\u4e0b\u8f7d\u7684<code>run.sh</code>\u811a\u672c\u5185\u5bb9\uff0c\u5982\u4e0b: Text Only<pre><code>set -e\nVERSION=\"1.8.0\"\nIMAGE=\"docker/compose:$VERSION\"\n# Setup options for connecting to docker hostif [ -z \"$DOCKER_HOST\" ]; then\n    DOCKER_HOST=\"/var/run/docker.sock\"fiif [ -S \"$DOCKER_HOST\" ]; then\n    DOCKER_ADDR=\"-v $DOCKER_HOST:$DOCKER_HOST -e DOCKER_HOST\"else\n    DOCKER_ADDR=\"-e DOCKER_HOST -e DOCKER_TLS_VERIFY -e DOCKER_CERT_PATH\"fi\n# Setup volume mounts for compose config and contextif [ \"$(pwd)\" != '/' ]; then\n    VOLUMES=\"-v $(pwd):$(pwd)\"fiif [ -n \"$COMPOSE_FILE\" ]; then\n    compose_dir=$(dirname $COMPOSE_FILE)fi# TODO: also check --file argumentif [ -n \"$compose_dir\" ]; then\n    VOLUMES=\"$VOLUMES -v $compose_dir:$compose_dir\"fiif [ -n \"$HOME\" ]; then\n    VOLUMES=\"$VOLUMES -v $HOME:$HOME -v $HOME:/root\" # mount $HOME in /root to share docker.configfi\n# Only allocate tty if we detect oneif [ -t 1 ]; then\n    DOCKER_RUN_OPTIONS=\"-t\"fiif [ -t 0 ]; then\n    DOCKER_RUN_OPTIONS=\"$DOCKER_RUN_OPTIONS -i\"fi\nexec docker run --rm $DOCKER_RUN_OPTIONS $DOCKER_ADDR $COMPOSE_OPTIONS $VOLUMES -w \"$(pwd)\" $IMAGE \"$@\"\n</code></pre></p> <ul> <li>\u53ef\u4ee5\u770b\u5230\uff0c\u5b83\u5176\u5b9e\u662f\u4e0b\u8f7d\u4e86<code>docker/compose</code>\u955c\u50cf\u5e76\u8fd0\u884c\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_4","title":"\u5378\u8f7d","text":"<ul> <li> <p>\u5982\u679c\u662f\u4e8c\u8fdb\u5236\u5305\u65b9\u5f0f\u5b89\u88c5\u7684\uff0c\u5220\u9664\u4e8c\u8fdb\u5236\u6587\u4ef6\u5373\u53ef\u3002 Text Only<pre><code>$ sudo rm /usr/local/bin/docker-compose\n</code></pre></p> </li> <li> <p>\u5982\u679c\u662f\u901a\u8fc7 pip \u5b89\u88c5\u7684\uff0c\u5219\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5373\u53ef\u5220\u9664\u3002 Text Only<pre><code>$ sudo pip uninstall docker-compose\n</code></pre></p> </li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_5","title":"\u4f7f\u7528","text":"<ul> <li> <p>\u7f16\u5199<code>Dockerfile</code>\u6587\u4ef6 Text Only<pre><code>FROM python:3.6-alpine\nADD . /code\nWORKDIR /code\nRUN pip install redis flask\nCMD [\"python\", \"app.py\"]\n</code></pre></p> </li> <li> <p>\u7f16\u5199<code>docker-compose.yml</code>\u6587\u4ef6 Text Only<pre><code>version: '3'\nservices:\n  web:    \n  build: .    \n  ports:    \n  - \"5000:5000\"\n  volumes:\n       - .:/code\n  redis:    \n  image: \"redis:alpine\"\n</code></pre></p> </li> <li> <p>\u8fd0\u884c compose \u9879\u76ee: Text Only<pre><code>$ docker-compose up\n</code></pre></p> </li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#compose_1","title":"Compose \u547d\u4ee4","text":"","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_6","title":"\u5e38\u7528\u547d\u4ee4\u603b\u7ed3","text":"Bash<pre><code>docker-compose up -d    \u4ee5\u5b88\u62a4\u8fdb\u7a0b\u6a21\u5f0f\u8fd0\u884c\u52a0-d\u9009\u9879\ndocker-compose ps   \u5217\u51fa\u6240\u6709\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668,\u7c7b\u4f3cdocker ps\ndocker-compose logs web \u67e5\u770bweb\u670d\u52a1\u65e5\u5fd7\ndocker-compose stop \u505c\u6b62\u5df2\u8fd0\u884c\u7684\u670d\u52a1\ndocker-compose down \u505c\u6b62\u5e76\u79fb\u9664\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u955c\u50cf\u548c\u6570\u636e\u5377.\u6bd4stop\u66f4\u5f7b\u5e95\ndocker-compose restart  \u91cd\u542fYAML\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u670d\u52a1\ndocker-compose kill \u505c\u6b62\u670d\u52a1\ndocker-compose rm   \u5220\u9664\u6307\u5b9a\u5df2\u7ecf\u505c\u6b62\u670d\u52a1\u7684\u5bb9\u5668\ndocker-compose build    \u6784\u5efa\u6216\u91cd\u5efa\u670d\u52a1\ndocker-compose images   \u5217\u51fa\u6240\u6709\u955c\u50cf\ndocker-compose pull \u62c9\u53bb\u5e76\u4e0b\u8f7d\u6307\u5b9a\u670d\u52a1\u955c\u50cf\ndocker-compose push push\u670d\u52a1\u955c\u50cf\ndocker-compose top  \u663e\u793a\u5404\u4e2a\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u8fdb\u7a0b\n</code></pre>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#_7","title":"\u67e5\u770b\u547d\u4ee4\u4f7f\u7528\u683c\u5f0f","text":"<ul> <li>docker-compose [COMMAND] --help</li> <li> <p>docker-compose help [COMMAND] Text Only<pre><code>docker-compose [-f=&lt;arg&gt;...] [options] [COMMAND] [ARGS...]\n</code></pre> \u547d\u4ee4\u9009\u9879\uff1a</p> </li> <li> <p>-f, --file FILE \u6307\u5b9a\u4f7f\u7528\u7684 Compose \u6a21\u677f\u6587\u4ef6\uff0c\u9ed8\u8ba4\u4e3a docker-compose.yml\uff0c\u53ef\u4ee5\u591a\u6b21\u6307\u5b9a\u3002</p> </li> <li>-p, --project-name NAME \u6307\u5b9a\u9879\u76ee\u540d\u79f0\uff0c\u9ed8\u8ba4\u5c06\u4f7f\u7528\u6240\u5728\u76ee\u5f55\u540d\u79f0\u4f5c\u4e3a\u9879\u76ee\u540d\u3002</li> <li>--x-networking \u4f7f\u7528 Docker \u7684\u53ef\u62d4\u63d2\u7f51\u7edc\u540e\u7aef\u7279\u6027</li> <li>--x-network-driver DRIVER \u6307\u5b9a\u7f51\u7edc\u540e\u7aef\u7684\u9a71\u52a8\uff0c\u9ed8\u8ba4\u4e3a bridge</li> <li>--verbose \u8f93\u51fa\u66f4\u591a\u8c03\u8bd5\u4fe1\u606f\u3002</li> <li>-v, --version \u6253\u5370\u7248\u672c\u5e76\u9000\u51fa\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#build","title":"build \u683c\u5f0f","text":"<ul> <li>*docker-compose build [options] [SERVICE...]\uff0c *\u6784\u5efa\uff08\u91cd\u65b0\u6784\u5efa\uff09\u9879\u76ee\u4e2d\u7684\u670d\u52a1\u5bb9\u5668</li> <li>\u53ef\u4ee5\u968f\u65f6\u5728\u9879\u76ee\u76ee\u5f55\u4e0b\u8fd0\u884c<code>docker-compose build</code>\u6765\u91cd\u65b0\u6784\u5efa\u670d\u52a1\u3002\u9009\u9879\u5305\u62ec\uff1a</li> <li>--force-rm \u5220\u9664\u6784\u5efa\u8fc7\u7a0b\u4e2d\u7684\u4e34\u65f6\u5bb9\u5668\u3002</li> <li>--no-cache \u6784\u5efa\u955c\u50cf\u8fc7\u7a0b\u4e2d\u4e0d\u4f7f\u7528 cache\uff08\u8fd9\u5c06\u52a0\u957f\u6784\u5efa\u8fc7\u7a0b\uff09\u3002</li> <li>--pull \u59cb\u7ec8\u5c1d\u8bd5\u901a\u8fc7 pull \u6765\u83b7\u53d6\u66f4\u65b0\u7248\u672c\u7684\u955c\u50cf\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#config","title":"config:","text":"<ul> <li>\u9a8c\u8bc1 Compose \u6587\u4ef6\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff0c\u82e5\u6b63\u786e\u5219\u663e\u793a\u914d\u7f6e\uff0c\u82e5\u683c\u5f0f\u9519\u8bef\u663e\u793a\u9519\u8bef\u539f\u56e0\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#down","title":"down\uff1a","text":"<ul> <li>\u6b64\u547d\u4ee4\u5c06\u4f1a\u505c\u6b62 up \u547d\u4ee4\u6240\u542f\u52a8\u7684\u5bb9\u5668\uff0c\u5e76\u79fb\u9664\u7f51\u7edc</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#exec","title":"exec\uff1a","text":"<ul> <li>\u8fdb\u5165\u6307\u5b9a\u7684\u5bb9\u5668\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#help","title":"help\uff1a","text":"<ul> <li>\u83b7\u5f97\u4e00\u4e2a\u547d\u4ee4\u7684\u5e2e\u52a9\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#images","title":"images\uff1a","text":"<ul> <li>\u5217\u51fa Compose \u6587\u4ef6\u4e2d\u5305\u542b\u7684\u955c\u50cf\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#kill","title":"kill\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose kill [options] [SERVICE...]\u3002</li> <li>\u901a\u8fc7\u53d1\u9001<code>SIGKILL</code>\u4fe1\u53f7\u6765\u5f3a\u5236\u505c\u6b62\u670d\u52a1\u5bb9\u5668\u3002\u652f\u6301\u901a\u8fc7<code>-s</code>\u53c2\u6570\u6765\u6307\u5b9a\u53d1\u9001\u7684\u4fe1\u53f7\uff0c\u4f8b\u5982\u901a\u8fc7\u5982\u4e0b\u6307\u4ee4\u53d1\u9001<code>SIGINT</code>\u4fe1\u53f7\u3002 Text Only<pre><code>$ docker-compose kill -s SIGINT\n</code></pre></li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#logs","title":"logs\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose logs [options] [SERVICE...]\uff0c</li> <li>\u67e5\u770b\u670d\u52a1\u5bb9\u5668\u7684\u8f93\u51fa\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cdocker-compose \u5c06\u5bf9\u4e0d\u540c\u7684\u670d\u52a1\u8f93\u51fa\u4f7f\u7528\u4e0d\u540c\u7684\u989c\u8272\u6765\u533a\u5206\u3002\u53ef\u4ee5\u901a\u8fc7 <code>--no-color</code>\u6765\u5173\u95ed\u989c\u8272\u3002\u8be5\u547d\u4ee4\u5728\u8c03\u8bd5\u95ee\u9898\u7684\u65f6\u5019\u5341\u5206\u6709\u7528\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#pause","title":"pause\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose pause [SERVICE...]\uff0c\u6682\u505c\u4e00\u4e2a\u670d\u52a1\u5bb9\u5668\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#port","title":"port\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose port [options] SERVICE PRIVATE_PORT\uff0c\u6253\u5370\u67d0\u4e2a\u5bb9\u5668\u7aef\u53e3\u6240\u6620\u5c04\u7684\u516c\u5171\u7aef\u53e3\u3002\u9009\u9879\uff1a</li> <li>--protocol=proto \u6307\u5b9a\u7aef\u53e3\u534f\u8bae\uff0ctcp\uff08\u9ed8\u8ba4\u503c\uff09\u6216\u8005 udp\u3002</li> <li>--index=index \u5982\u679c\u540c\u4e00\u670d\u52a1\u5b58\u5728\u591a\u4e2a\u5bb9\u5668\uff0c\u6307\u5b9a\u547d\u4ee4\u5bf9\u8c61\u5bb9\u5668\u7684\u5e8f\u53f7\uff08\u9ed8\u8ba4\u4e3a 1\uff09\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#ps","title":"ps\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose ps [options] [SERVICE...]\uff0c\u5217\u51fa\u9879\u76ee\u4e2d\u76ee\u524d\u7684\u6240\u6709\u5bb9\u5668\u3002\u9009\u9879\uff1a</li> <li><code>-q</code>\u53ea\u6253\u5370\u5bb9\u5668\u7684 ID \u4fe1\u606f\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#pull","title":"pull\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3a<code>docker-compose pull [options] [SERVICE...]</code>\uff0c\u62c9\u53d6\u670d\u52a1\u4f9d\u8d56\u7684\u955c\u50cf\u3002\u9009\u9879\uff1a</li> <li>--ignore-pull-failures \u5ffd\u7565\u62c9\u53d6\u955c\u50cf\u8fc7\u7a0b\u4e2d\u7684\u9519\u8bef\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#push","title":"push\uff1a","text":"<ul> <li>\u63a8\u9001\u670d\u52a1\u4f9d\u8d56\u7684\u955c\u50cf\u5230 Docker \u955c\u50cf\u4ed3\u5e93\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#restart","title":"restart\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose restart [options] [SERVICE...]\uff0c\u91cd\u542f\u9879\u76ee\u4e2d\u7684\u670d\u52a1\u3002\u9009\u9879\uff1a</li> <li>-t, --timeout TIMEOUT \u6307\u5b9a\u91cd\u542f\u524d\u505c\u6b62\u5bb9\u5668\u7684\u8d85\u65f6\uff08\u9ed8\u8ba4\u4e3a 10 \u79d2\uff09\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#rm","title":"rm\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose rm [options] [SERVICE...],\u5220\u9664\u6240\u6709\uff08\u505c\u6b62\u72b6\u6001\u7684\uff09\u670d\u52a1\u5bb9\u5668\u3002\u63a8\u8350\u5148\u6267\u884c <code>docker-compose stop</code>\u547d\u4ee4\u6765\u505c\u6b62\u5bb9\u5668\u3002\u9009\u9879\uff1a</li> <li>-f, --force \u5f3a\u5236\u76f4\u63a5\u5220\u9664\uff0c\u5305\u62ec\u975e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\u3002\u4e00\u822c\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\u8be5\u9009\u9879\u3002</li> <li>-v \u5220\u9664\u5bb9\u5668\u6240\u6302\u8f7d\u7684\u6570\u636e\u5377\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#run","title":"run\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose run [options] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]\uff0c\u5728\u6307\u5b9a\u670d\u52a1\u4e0a\u6267\u884c\u4e00\u4e2a\u547d\u4ee4\u3002\u4f8b\u5982\uff1a Bash<pre><code>$ docker-compose run ubuntu ping docker.com\n</code></pre> <p>\u5c06\u4f1a\u542f\u52a8\u4e00\u4e2a ubuntu \u670d\u52a1\u5bb9\u5668\uff0c\u5e76\u6267\u884c ping docker.com \u547d\u4ee4\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u5b58\u5728\u5173\u8054\uff0c\u5219\u6240\u6709\u5173\u8054\u7684\u670d\u52a1\u5c06\u4f1a\u81ea\u52a8\u88ab\u542f\u52a8\uff0c\u9664\u975e\u8fd9\u4e9b\u670d\u52a1\u5df2\u7ecf\u5728\u8fd0\u884c\u4e2d\u3002 \u8be5\u547d\u4ee4\u7c7b\u4f3c\u542f\u52a8\u5bb9\u5668\u540e\u8fd0\u884c\u6307\u5b9a\u7684\u547d\u4ee4\uff0c\u76f8\u5173\u5377\u3001\u94fe\u63a5\u7b49\u7b49\u90fd\u5c06\u4f1a\u6309\u7167\u914d\u7f6e\u81ea\u52a8\u521b\u5efa\u3002</p> </li> </ul> <p>\u7ed9\u5b9a\u547d\u4ee4\u5c06\u4f1a\u8986\u76d6\u539f\u6709\u7684\u81ea\u52a8\u8fd0\u884c\u547d\u4ee4\uff1b \u4e0d\u4f1a\u81ea\u52a8\u521b\u5efa\u7aef\u53e3\uff0c\u4ee5\u907f\u514d\u51b2\u7a81\u3002</p> <ul> <li> <p>\u5982\u679c\u4e0d\u5e0c\u671b\u81ea\u52a8\u542f\u52a8\u5173\u8054\u7684\u5bb9\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528<code>--no-deps</code>\u9009\u9879\uff0c\u4f8b\u5982: Bash<pre><code>$ docker-compose run --no-deps web python manage.py shell\n</code></pre> \u5c06\u4e0d\u4f1a\u542f\u52a8 web \u5bb9\u5668\u6240\u5173\u8054\u7684\u5176\u5b83\u5bb9\u5668,\u9009\u9879\uff1a</p> </li> <li> <p>-d \u540e\u53f0\u8fd0\u884c\u5bb9\u5668\u3002</p> </li> <li>--name NAME \u4e3a\u5bb9\u5668\u6307\u5b9a\u4e00\u4e2a\u540d\u5b57\u3002</li> <li>--entrypoint CMD \u8986\u76d6\u9ed8\u8ba4\u7684\u5bb9\u5668\u542f\u52a8\u6307\u4ee4\u3002</li> <li>-e KEY=VAL \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u503c\uff0c\u53ef\u591a\u6b21\u4f7f\u7528\u9009\u9879\u6765\u8bbe\u7f6e\u591a\u4e2a\u73af\u5883\u53d8\u91cf\u3002</li> <li>-u, --user=\"\" \u6307\u5b9a\u8fd0\u884c\u5bb9\u5668\u7684\u7528\u6237\u540d\u6216\u8005 uid\u3002</li> <li>--no-deps \u4e0d\u81ea\u52a8\u542f\u52a8\u5173\u8054\u7684\u670d\u52a1\u5bb9\u5668\u3002</li> <li>--rm \u8fd0\u884c\u547d\u4ee4\u540e\u81ea\u52a8\u5220\u9664\u5bb9\u5668\uff0cd \u6a21\u5f0f\u4e0b\u5c06\u5ffd\u7565\u3002</li> <li>-p, --publish=[] \u6620\u5c04\u5bb9\u5668\u7aef\u53e3\u5230\u672c\u5730\u4e3b\u673a\u3002</li> <li>--service-ports \u914d\u7f6e\u670d\u52a1\u7aef\u53e3\u5e76\u6620\u5c04\u5230\u672c\u5730\u4e3b\u673a\u3002</li> <li>-T \u4e0d\u5206\u914d\u4f2a tty\uff0c\u610f\u5473\u7740\u4f9d\u8d56 tty \u7684\u6307\u4ee4\u5c06\u65e0\u6cd5\u8fd0\u884c\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#scale","title":"scale\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose scale [options] [SERVICE=NUM...]\uff0c\u8bbe\u7f6e\u6307\u5b9a\u670d\u52a1\u8fd0\u884c\u7684\u5bb9\u5668\u4e2a\u6570\u3002 </li> <li> <p>\u901a\u8fc7 service=num \u7684\u53c2\u6570\u6765\u8bbe\u7f6e\u6570\u91cf\u3002\u4f8b\u5982\uff1a Bash<pre><code>$ docker-compose scale web=3 db=2\n</code></pre> \u5c06\u542f\u52a8 3 \u4e2a\u5bb9\u5668\u8fd0\u884c web \u670d\u52a1\uff0c2 \u4e2a\u5bb9\u5668\u8fd0\u884c db \u670d\u52a1\u3002 \u4e00\u822c\u7684\uff0c\u5f53\u6307\u5b9a\u6570\u76ee\u591a\u4e8e\u8be5\u670d\u52a1\u5f53\u524d\u5b9e\u9645\u8fd0\u884c\u5bb9\u5668\uff0c\u5c06\u65b0\u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668\uff1b\u53cd\u4e4b\uff0c\u5c06\u505c\u6b62\u5bb9\u5668\u3002\u9009\u9879\uff1a</p> </li> <li> <p>-t, --timeout TIMEOUT \u505c\u6b62\u5bb9\u5668\u65f6\u5019\u7684\u8d85\u65f6\uff08\u9ed8\u8ba4\u4e3a 10 \u79d2\uff09\u3002</p> </li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#start","title":"start\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose start [SERVICE...]\uff0c\u542f\u52a8\u5df2\u7ecf\u5b58\u5728\u7684\u670d\u52a1\u5bb9\u5668\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#stop","title":"stop\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose stop [options] [SERVICE...], \u505c\u6b62\u5df2\u7ecf\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\u7684\u5bb9\u5668\uff0c\u4f46\u4e0d\u5220\u9664\u5b83\u3002\u901a\u8fc7<code>docker-compose start</code>\u53ef\u4ee5\u518d\u6b21\u542f\u52a8\u8fd9\u4e9b\u5bb9\u5668\u3002\u9009\u9879\uff1a</li> <li>-t, --timeout TIMEOUT \u505c\u6b62\u5bb9\u5668\u65f6\u5019\u7684\u8d85\u65f6\uff08\u9ed8\u8ba4\u4e3a 10 \u79d2\uff09\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#top","title":"top\uff1a","text":"<ul> <li>\u67e5\u770b\u5404\u4e2a\u670d\u52a1\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u8fdb\u7a0b\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#unpause","title":"unpause\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose unpause [SERVICE...]\uff0c\u6062\u590d\u5904\u4e8e\u6682\u505c\u72b6\u6001\u4e2d\u7684\u670d\u52a1\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/dockercompose/docker_compose_summary/#up","title":"up\uff1a","text":"<ul> <li>\u683c\u5f0f\u4e3adocker-compose up [options] [SERVICE...]\uff0c\u8be5\u547d\u4ee4\u5341\u5206\u5f3a\u5927\uff0c\u5b83\u5c06\u5c1d\u8bd5\u81ea\u52a8\u5b8c\u6210\u5305\u62ec\u6784\u5efa\u955c\u50cf\uff0c\uff08\u91cd\u65b0\uff09\u521b\u5efa\u670d\u52a1\uff0c\u542f\u52a8\u670d\u52a1\uff0c\u5e76\u5173\u8054\u670d\u52a1\u76f8\u5173\u5bb9\u5668\u7684\u4e00\u7cfb\u5217\u64cd\u4f5c\u3002\u94fe\u63a5\u7684\u670d\u52a1\u90fd\u5c06\u4f1a\u88ab\u81ea\u52a8\u542f\u52a8\uff0c\u9664\u975e\u5df2\u7ecf\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\u3002 \u53ef\u4ee5\u8bf4\uff0c\u5927\u90e8\u5206\u65f6\u5019\u90fd\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u8be5\u547d\u4ee4\u6765\u542f\u52a8\u4e00\u4e2a\u9879\u76ee\u3002</li> <li>\u9ed8\u8ba4\u60c5\u51b5\uff0c<code>docker-compose up</code>\u542f\u52a8\u7684\u5bb9\u5668\u90fd\u5728\u524d\u53f0\uff0c\u63a7\u5236\u53f0\u5c06\u4f1a\u540c\u65f6\u6253\u5370\u6240\u6709\u5bb9\u5668\u7684\u8f93\u51fa\u4fe1\u606f\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u8fdb\u884c\u8c03\u8bd5\u3002 \u5f53\u901a\u8fc7 Ctrl-C \u505c\u6b62\u547d\u4ee4\u65f6\uff0c\u6240\u6709\u5bb9\u5668\u5c06\u4f1a\u505c\u6b62\u3002</li> <li>\u5982\u679c\u4f7f\u7528<code>docker-compose up -d</code>\uff0c\u5c06\u4f1a\u5728\u540e\u53f0\u542f\u52a8\u5e76\u8fd0\u884c\u6240\u6709\u7684\u5bb9\u5668\u3002\u4e00\u822c\u63a8\u8350\u751f\u4ea7\u73af\u5883\u4e0b\u4f7f\u7528\u8be5\u9009\u9879\u3002</li> <li>\u9ed8\u8ba4\u60c5\u51b5\uff0c\u5982\u679c\u670d\u52a1\u5bb9\u5668\u5df2\u7ecf\u5b58\u5728\uff0c<code>docker-compose up</code>\u5c06\u4f1a\u5c1d\u8bd5\u505c\u6b62\u5bb9\u5668\uff0c\u7136\u540e\u91cd\u65b0\u521b\u5efa\uff08\u4fdd\u6301\u4f7f\u7528 volumes-from \u6302\u8f7d\u7684\u5377\uff09\uff0c\u4ee5\u4fdd\u8bc1\u65b0\u542f\u52a8\u7684\u670d\u52a1\u5339\u914d docker-compose.yml \u6587\u4ef6\u7684\u6700\u65b0\u5185\u5bb9\u3002\u5982\u679c\u7528\u6237\u4e0d\u5e0c\u671b\u5bb9\u5668\u88ab\u505c\u6b62\u5e76\u91cd\u65b0\u521b\u5efa\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>docker-compose up --no-recreate</code>\u3002\u8fd9\u6837\u5c06\u53ea\u4f1a\u542f\u52a8\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\uff0c\u800c\u5ffd\u7565\u5df2\u7ecf\u8fd0\u884c\u7684\u670d\u52a1\u3002</li> <li>\u5982\u679c\u7528\u6237\u53ea\u60f3\u91cd\u65b0\u90e8\u7f72\u67d0\u4e2a\u670d\u52a1\uff0c\u53ef\u4ee5\u4f7f\u7528<code>docker-compose up --no-deps -d &lt;SERVICE_NAME&gt;</code>\u6765\u91cd\u65b0\u521b\u5efa\u670d\u52a1\u5e76\u540e\u53f0\u505c\u6b62\u65e7\u670d\u52a1\uff0c\u542f\u52a8\u65b0\u670d\u52a1\uff0c\u5e76\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u6240\u4f9d\u8d56\u7684\u670d\u52a1\u3002\u9009\u9879\uff1a</li> <li>-d \u5728\u540e\u53f0\u8fd0\u884c\u670d\u52a1\u5bb9\u5668\u3002</li> <li>--no-color \u4e0d\u4f7f\u7528\u989c\u8272\u6765\u533a\u5206\u4e0d\u540c\u7684\u670d\u52a1\u7684\u63a7\u5236\u53f0\u8f93\u51fa\u3002</li> <li>--no-deps \u4e0d\u542f\u52a8\u670d\u52a1\u6240\u94fe\u63a5\u7684\u5bb9\u5668\u3002</li> <li>--force-recreate \u5f3a\u5236\u91cd\u65b0\u521b\u5efa\u5bb9\u5668\uff0c\u4e0d\u80fd\u4e0e<code>--no-recreate</code>\u540c\u65f6\u4f7f\u7528\u3002 <code>--no-recreate</code>\u5982\u679c\u5bb9\u5668\u5df2\u7ecf\u5b58\u5728\u4e86\uff0c\u5219\u4e0d\u91cd\u65b0\u521b\u5efa\uff0c\u4e0d\u80fd\u4e0e <code>--force-recreate</code>\u540c\u65f6\u4f7f\u7528\u3002 <code>--no-build</code>\u4e0d\u81ea\u52a8\u6784\u5efa\u7f3a\u5931\u7684\u670d\u52a1\u955c\u50cf\u3002</li> <li>-t, --timeout TIMEOUT \u505c\u6b62\u5bb9\u5668\u65f6\u5019\u7684\u8d85\u65f6\uff08\u9ed8\u8ba4\u4e3a 10 \u79d2\uff09\u3002</li> </ul>","tags":["DockerCompose","Docker"]},{"location":"notehub/cloud_native/k8s/helm_usage/","title":"k8s\u5305\u7ba1\u7406\u5de5\u5177Helm\u7684\u4f7f\u7528","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm","title":"Helm\u6982\u8ff0","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#_1","title":"\u57fa\u672c\u4fe1\u606f","text":"<ul> <li>Github\u5730\u5740\uff1aHelm</li> <li>\u6587\u6863\u5730\u5740</li> <li>\u5f53\u524d\u6700\u65b0\u7248\u672cv3.15.4\uff0c\u5f53\u524dStar\u657026.6k.</li> <li>Chart\u5305\u6258\u7ba1\u5e73\u53f0\uff1aArtifactHub</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_1","title":"Helm\u662f\u4ec0\u4e48\uff1f","text":"<p>Helm\u662fKubernetes\uff08K8S\uff09\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0cHelm\u4e3b\u8981\u662f\u7528\u6765\u7ba1\u7406Chart\u5305\uff0c\u7c7b\u4f3c\u4e8ePython\u7684pip\u3001CentOS\u7684yum\u3001MacOS\u7684brew\u7b49\u3002Helm\u4e3b\u8981\u6709\u4e09\u5927\u57fa\u672c\u6982\u5ff5\uff0c\u5206\u522b\u4e3a\uff1a</p> <ul> <li>Chart: \u4ee3\u8868\u4e00\u4e2aHelm\u5305\uff0c\u5b83\u5305\u542b\u4e86\u5728K8S\u96c6\u7fa4\u4e2d\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u3001\u5de5\u5177\u6216\u670d\u52a1\u6240\u9700\u8981\u7684\u6240\u6709YAML\u683c\u5f0f\u7684\u8d44\u6e90\u5b9a\u4e49\u6587\u4ef6\u4ee5\u53ca\u8fd9\u4e9b\u8d44\u6e90\u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u901a\u8fc7Helm Chart\u5305\u6765\u6574\u4f53\u7ef4\u62a4\u8fd9\u4e9b\u8d44\u6e90\u3002</li> <li>Repository\uff1a\u5b83\u662f\u7528\u6765\u5b58\u653e\u548c\u5171\u4eabHelm Chart\u7684\u5730\u65b9\uff0c\u7c7b\u4f3c\u4e8e\u5b58\u653e\u6e90\u7801\u7684Github\u7684Repository\uff0c\u4ee5\u53ca\u5b58\u653e\u955c\u50cf\u7684Docker\u7684Repository\u3002</li> <li>Release: \u5b83\u662f\u8fd0\u884c\u5728K8S\u96c6\u7fa4\u4e2d\u7684Chart\u7684\u5b9e\u4f8b\u3002\u4e00\u4e2aChart\u901a\u5e38\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u96c6\u7fa4\u4e2d\u5b89\u88c5\u591a\u6b21\u3002\u6bcf\u4e00\u6b21\u5b89\u88c5\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Release\u3002</li> </ul> <p>Helm\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2ahelm\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u8be5\u5de5\u5177\u53ef\u4ee5\u57fa\u4e8eChartb\u5305\u4e00\u952e\u521b\u5efa\u5e94\u7528\uff0c\u5728\u521b\u5efa\u5e94\u7528\u65f6\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49Chart\u914d\u7f6e\u3002\u5e94\u7528\u53d1\u5e03\u8005\u53ef\u4ee5\u901a\u8fc7Helm\u6253\u5305\u5e94\u7528\u3001\u7ba1\u7406\u5e94\u7528\u4f9d\u8d56\u7ba1\u7406\uff0c\u7ba1\u7406\u5e94\u7528\u7248\u672c\u3001\u5e76\u53d1\u5e03\u5e94\u7528\u5230\u8f6f\u4ef6\u4ed3\u5e93\u3002</p> <ul> <li>\u5bf9\u4e8e\u4f7f\u7528\u8005\u6765\u8bf4\uff0c\u4f7f\u7528Helm\u540e\u4e0d\u9700\u8981\u5199\u590d\u6742\u7684\u5e94\u7528\u90e8\u7f72\u6587\u4ef6\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u5728K8S\u4e0a\u67e5\u627e\u3001\u5b89\u88c5\u3001\u5347\u7ea7\u3001\u56de\u6eda\u4ee5\u53ca\u5378\u8f7d\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_2","title":"Helm\u67b6\u6784","text":"<p>Helm Client\uff08helm\u547d\u4ee4\uff09\u548cHelm Chart\u5305\u65f6\u6838\u5fc3\uff0chelm\u547d\u4ee4\u53ef\u4ee5\u4eceChart Repository\u4e2d\u4e0b\u8f7dHelm Chart\u5305\uff0c\u8bfb\u53d6kubeconfig\u6587\u4ef6\uff0c\u5e76\u6784\u5efakube-apiserver REST API \u63a5\u53e3\u7684HTTP\u8bf7\u6c42\uff0c\u901a\u8fc7\u8c03\u7528K8S\u63d0\u4f9b\u7684REST API \u63a5\u53e3\uff0c\u5c06Chart\u5305\u4e2d\u5305\u542b\u7684YAML\u683c\u5f0f\u5b9a\u4e49\u7684K8S\u8d44\u6e90\uff0c\u5728K8S\u96c6\u7fa4\u4e2d\u521b\u5efa\uff0c \u8fd9\u4e9b\u8d44\u6e90\u4ee5Release\u7684\u5f62\u5f0f\u5b58\u5728\u4e0eK8S\u96c6\u7fa4\u4e2d\uff0c\u6bcf\u4e2aRelease \u53c8\u5305\u542b\u591a\u4e2aK8S\u8d44\u6e90\uff0c\u5982Deployment\u3001Pod\u3001Service\u7b49\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_3","title":"Helm\u7ec4\u6210","text":"<ul> <li> <p>\u6a21\u677f\u6587\u4ef6</p> </li> <li> <p>\u3010\u901a\u5e38\u6709\u591a\u4e2a\u3011\uff0c\u57fa\u4e8e<code>text/template</code> \u6a21\u677f\u6587\u4ef6\uff0c\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u6a21\u677f\u6e32\u67d3\u80fd\u529b\u3002Helm\u53ef\u4ee5\u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u503c\u6e32\u67d3\u8fdb\u6a21\u677f\u6587\u4ef6\u4e2d\uff0c\u6700\u7ec8\u751f\u6210\u4e00\u4e2a\u53ef\u4ee5\u90e8\u7f72\u7684K8S YAML\u683c\u5f0f\u7684\u8d44\u6e90\u5b9a\u4e49\u6587\u4ef6\u3002</p> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6</p> </li> <li> <p>\u3010\u901a\u5e38\u6709\u4e00\u4e2a\u3011\u3002</p> </li> </ul> <p>\u603b\u7ed3\uff1a</p> <ul> <li>\u5728Helm\u4e2d\uff0c\u90e8\u7f72\u4e00\u4e2a\u5e94\u7528\u53ef\u4ee5\u7b80\u5316\u4e3aChart\u6a21\u677f\uff08\u591a\u4e2a\u670d\u52a1\uff09+ Chart\u914d\u7f6e \u2014&gt; \u5e94\u7528\u3002</li> <li>Chart\u6a21\u677f\u4e00\u4e2a\u5e94\u7528\u53ea\u7528\u7f16\u5199\u4e00\u6b21\uff0c\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\uff0c\u518d\u90e8\u7f72\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684\u914d\u7f6e\uff0c\u4ece\u800c\u5c06\u5e94\u7528\u90e8\u7f72\u5230\u4e0d\u540c\u73af\u5883\u6216\u540c\u4e00\u73af\u5883\u90e8\u7f72\u4e0d\u540c\u914d\u7f6e\u7684\u5e94\u7528\u3002</li> </ul> <p></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_4","title":"Helm\u5b89\u88c5","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<ul> <li>\u4e00\u4e2a\u53ef\u7528\u7684K8S\u96c6\u7fa4</li> <li>\u786e\u5b9a\u5b89\u88c5\u7248\u672c\u548c\u5b89\u5168\u914d\u7f6e</li> <li>\u5b89\u88c5\u548c\u914d\u7f6eHelm</li> </ul> <p>\u5b89\u88c5</p> <ul> <li>\u5b98\u65b9\u5b89\u88c5\u6307\u5357</li> <li>Helm \u5404\u4e2a\u7248\u672c\u5b89\u88c5\u5305\uff1aHelm Releases</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#_3","title":"\u5b89\u88c5\u6b65\u9aa4","text":"Bash<pre><code>$ wget https://get.helm.sh/helm-v3.15.4-linux-amd64.tar.gz\n$ tar -xvzf helm-v3.15.4-linux-amd64.tar.gz\n$ mv linux-amd64/helm /usr/local/bin/helm\n$ chmod +x /usr/local/bin/helm\n$ helm version  # \u8f93\u51fa\u7248\u672c\u53f7\u5373\u8868\u793a\u5b89\u88c5\u6210\u529f\n######log info ########\nversion.BuildInfo{Version:\"v3.15.4\", GitCommit:\"fa9efb07d9d8debbb4306d72af76a383895aa8c4\", GitTreeState:\"clean\", GoVersion:\"go1.22.6\"}\n</code></pre> <p>\u5b89\u88c5helm\u547d\u4ee4\u81ea\u52a8\u8865\u5168\u811a\u672c\uff08\u975e\u5fc5\u987b\uff09</p> <ul> <li>\u6587\u6863\u53c2\u8003</li> </ul> Bash<pre><code>helm completion bash &gt; /etc/bash_completion.d/helm\n</code></pre> <ul> <li>\u6267\u884c helm comp\uff0c\u5c31\u4f1a\u81ea\u52a8\u8865\u5168\u4e3ahelm completion\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_5","title":"Helm\u4f7f\u7528","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/helm_usage/#helm_6","title":"Helm\u5e38\u7528\u547d\u4ee4\u6c47\u603b","text":"\u547d\u4ee4 \u63cf\u8ff0 completion \u751f\u6210\u6307\u5b9aShell\u7684\u81ea\u52a8\u8865\u5168\u811a\u672c\uff0c\u6bd4\u5982bash\u3001zsh\u7b49 create \u521b\u5efa\u4e00\u4e2a Chart \u5e76\u6307\u5b9a\u540d\u5b57 dependency \u7ba1\u7406 Chart \u4f9d\u8d56 env \u6253\u5370Helm\u5ba2\u6237\u7aef\u7684\u73af\u5883\u53d8\u91cf\u4fe1\u606f\uff0c\u4f8b\u5982HELM_CACHE_HOME\u3001HELM_NAMESPACE\u3001HELM_REPOSITORY_CONFIG\u7b49 get \u4e0b\u8f7d\u4e00\u4e2a Release\u3002\u53ef\u7528\u5b50\u547d\u4ee4\uff1aall\u3001hooks\u3001manifest\u3001notes\u3001values help \u6253\u5370helm\u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f history \u83b7\u53d6 Release\u5386\u53f2 install \u5b89\u88c5\u4e00\u4e2a Chart lint \u68c0\u67e5\u4e00\u4e2aChart\u5305\uff0c\u5e76\u6253\u5370\u6f5c\u5728\u7684\u95ee\u9898 list \u5217\u51fa Release package \u5c06 Chart \u76ee\u5f55\u6253\u5305\u5230 Chart \u5b58\u50a8\u6587\u4ef6\u4e2d plugin Helm\u63d2\u4ef6 pull \u4ece\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u4e0b\u8f7d Chart \u5e76\u89e3\u538b\u5230\u672c\u5730\uff0c\u4f8b\u5982helm pull stable/redis --untar repo \u6dfb\u52a0\uff08add\uff09\u3001\u5217\u51fa\uff08list\uff09\u3001\u79fb\u9664\uff08remove\uff09\u3001\u66f4\u65b0\uff08update\uff09\u548c\u7d22\u5f15\uff08index\uff09Chart \u4ed3\u5e93 rollback \u4ece\u4e4b\u524d\u7248\u672c\u56de\u6eda search \u6839\u636e\u5173\u952e\u5b57\u641c\u7d22 Charts\uff0c\u53ef\u7528\u5b50\u547d\u4ee4\uff1ahub\u3001repo show \u67e5\u770b Chart \u8be6\u7ec6\u4fe1\u606f\u3002\u53ef\u7528\u5b50\u547d\u4ee4\uff1aall\u3001chart\u3001readme\u3001values status \u663e\u793a\u5df2\u547d\u540d\u7248\u672c\u7684\u72b6\u6001 template \u672c\u5730\u5448\u73b0\u6a21\u677f test \u5728 Release \u4e2d\u8fd0\u884c Helm \u4e2d\u7684\u9884\u5b9a\u4e49\u6d4b\u8bd5 uninstall \u5378\u8f7d\u4e00\u4e2a Release upgrade \u66f4\u65b0\u4e00\u4e2a Release verify \u9a8c\u8bc1\u7ed9\u5b9a\u8def\u5f84\u7684Chart\u662f\u5426\u5df2\u88ab\u7b7e\u540d\u4e14\u6709\u6548 version \u67e5\u770b Helm \u5ba2\u6237\u7aef\u7248\u672c","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/","title":"k8s\u5e38\u7528\u547d\u4ee4\u603b\u7ed3","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#1","title":"1. \u521b\u5efa/\u5220\u9664\u8d44\u6e90","text":"<p>\u4e00\u822c\u4f1a\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u901a\u8fc7yaml\u6587\u4ef6</li> <li>\u547d\u4ee4\u521b\u5efa\u3002</li> </ul> Bash<pre><code># \u901a\u8fc7\u6587\u4ef6\u521b\u5efa\u4e00\u4e2aDeployment\nkubectl create -f /path/to/deployment.yaml\ncat /path/to/deployment.yaml | kubectl create -f -\n\n# \u4e0d\u8fc7\u4e00\u822c\u53ef\u80fd\u66f4\u5e38\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u521b\u5efa\u8d44\u6e90\nkubectl apply -f /path/to/deployment.yaml\n\n# \u5220\u9664\u8d44\u6e90\nkubectl delete -f /path/to/deployment.yaml\n\u6216 \nkubectl delete pod pod\u540d\u79f0\n\n\n# \u901a\u8fc7kubectl\u547d\u4ee4\u76f4\u63a5\u521b\u5efa\nkubectl run nginx_app --image=nginx:1.9.1 --replicas=3\n</code></pre> <p>kubectl\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u66f4\u65b0\u8d44\u6e90\u7684\u547d\u4ee4\uff0c\u5982</p> <ul> <li>kubectl edit</li> <li>kubectl patch</li> <li>kubectl replace</li> </ul> Bash<pre><code># kubectl edit\uff1a\u76f8\u5f53\u4e8e\u5148\u7528get\u53bb\u83b7\u53d6\u8d44\u6e90\uff0c\u7136\u540e\u8fdb\u884c\u66f4\u65b0\uff0c\u6700\u540e\u5bf9\u66f4\u65b0\u540e\u7684\u8d44\u6e90\u8fdb\u884capply\nkubectl edit deployment/nginx_app\n\n# kubectl patch\uff1a\u4f7f\u7528\u8865\u4e01\u4fee\u6539\u3001\u66f4\u65b0\u67d0\u4e2a\u8d44\u6e90\u7684\u5b57\u6bb5\uff0c\u6bd4\u5982\u66f4\u65b0\u67d0\u4e2anode\nkubectl patch node/node-0 -p '{\"spec\":{\"unschedulable\":true}}'\nkubectl patch -f node-0.json -p '{\"spec\": {\"unschedulable\": \"true\"}}'\n\n# kubectl replace\uff1a\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u6765\u66ff\u6362\u8d44\u6e90\nkubectl replace -f /path/to/new_nginx_app.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#2","title":"2. \u67e5\u770b\u8d44\u6e90","text":"<p>\u83b7\u53d6\u4e0d\u540c\u79cd\u7c7b\u8d44\u6e90\u7684\u4fe1\u606f\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#21-nodes","title":"2.1 nodes\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl get nodes  # \u67e5\u770b\u96c6\u7fa4\u7684\u4fe1\u606f\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#22-pod","title":"2.2 pod\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl get pods  # \u67e5\u770bpods \n\nkubectl get pod -o wide  # \u67e5\u770b\u6307\u5b9apod\u7684\u8be6\u7ec6\u4fe1\u606f\n\nkubectl get pods --all-namespaces  # \u67e5\u770b\u6240\u6709\u547d\u540d\u7a7a\u95f4\u7684pods\n\u6216\u8005\nkubectl get pods -A\n\nkubectl get pods -n \u547d\u540d\u7a7a\u95f4\u540d pod\u540d\u79f0\n\n# kubectl describe \u8d44\u6e90\u7c7b\u578b \u8d44\u6e90\u540d\u79f0  \nkubectl describe pod nginx-XXXXXX  # \u67e5\u770b\u540d\u79f0\u4e3anginx-XXXXXX\u7684Pod\u7684\u4fe1\u606f\n\nkubectl delete pod pod\u540d --grace-period=0 --force  # \u5f3a\u5236\u5220\u9664\u4e00\u4e2apod(\u9002\u7528\u4e8e\u666e\u901adelete\u65e0\u6cd5\u5220\u9664\u7684\u573a\u666f)\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#23-deployments","title":"2.3 deployments\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl get deployments-A  # \u67e5\u770b\u6240\u6709\u7a7a\u95f4\u7684deployments\n\u6216\u8005\nkubectl get deployments --all-namespaces\n\nkubectl get deployments -n kube-system  # \u67e5\u770b\u6307\u5b9a\u547d\u540d\u7a7a\u95f4\u7684deployments\n\nkubectl describe deployment nginx  #\u67e5\u770b\u540d\u79f0\u4e3anginx\u7684Deployment\u7684\u4fe1\u606f\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#24-logs","title":"2.4  logs\u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl logs\u00a0- \u67e5\u770bpod\u4e2d\u7684\u5bb9\u5668\u7684\u6253\u5370\u65e5\u5fd7\n\n(\u548c\u547d\u4ee4docker logs \u7c7b\u4f3c)\n\n# kubectl logs Pod\u540d\u79f0\n\n#\u67e5\u770b\u540d\u79f0\u4e3anginx-pod-XXXXXXX\u7684Pod\u5185\u7684\u5bb9\u5668\u6253\u5370\u7684\u65e5\u5fd7\n\nkubectl logs -f nginx-pod-XXXXXXX\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#25-exec","title":"2.5  exec \u76f8\u5173\u547d\u4ee4","text":"Bash<pre><code>kubectl exec\n- \u5728pod\u4e2d\u7684\u5bb9\u5668\u73af\u5883\u5185\u6267\u884c\u547d\u4ee4(\u548c\u547d\u4ee4docker exec \u7c7b\u4f3c)\n\n# kubectl exec Pod\u540d\u79f0 \u64cd\u4f5c\u547d\u4ee4\n\n# \u5728\u540d\u79f0\u4e3anginx-pod-xxxxxx\u7684Pod\u4e2d\u8fd0\u884cbash\nkubectl exec-it nginx-pod-xxxxxx /bin/bash\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#26-namespace","title":"2.6 namespace \u64cd\u4f5c","text":"Bash<pre><code>kubectl delete namespace \u540d\u79f0  # \u5220\u9664\u6307\u5b9anamespace \n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#26","title":"2.6 \u5176\u4ed6\u547d\u4ee4","text":"Bash<pre><code># \u6307\u5b9a\u8d44\u6e90\u7684\u4fe1\u606f\uff0c\u683c\u5f0f\uff1akubectl get &lt;resource_type&gt;/&lt;resource_name&gt;\uff0c\u6bd4\u5982\u83b7\u53d6deployment nginx_app\u7684\u4fe1\u606f\nkubectl get deployment/nginx_app -o wide\n\n# \u4e5f\u53ef\u4ee5\u5bf9\u6307\u5b9a\u7684\u8d44\u6e90\u8fdb\u884c\u683c\u5f0f\u5316\u8f93\u51fa\uff0c\u6bd4\u5982\u8f93\u51fa\u683c\u5f0f\u4e3ajson\u3001yaml\u7b49\nkubectl get deployment/nginx_app -o json\n\n# \u8fd8\u53ef\u4ee5\u5bf9\u8f93\u51fa\u7ed3\u679c\u8fdb\u884c\u81ea\u5b9a\u4e49\uff0c\u6bd4\u5982\u5bf9pod\u53ea\u8f93\u51fa\u5bb9\u5668\u540d\u79f0\u548c\u955c\u50cf\u540d\u79f0\nkubectl get pod httpd-app-5bc589d9f7-rnhj7 -o custom-columns=CONTAINER:.spec.containers[0].name,IMAGE:.spec.containers[0].image\n\n# \u83b7\u53d6\u67d0\u4e2a\u7279\u5b9akey\u7684\u503c\u8fd8\u53ef\u4ee5\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\u5f97\u5230\uff0c\u6b64\u76ee\u5f55\u53c2\u7167go template\u7684\u7528\u6cd5\uff0c\u4e14\u547d\u4ee4\u7ed3\u5c3e'\\n'\u662f\u4e3a\u4e86\u8f93\u51fa\u7ed3\u679c\u6362\u884c\nkubectl get pod httpd-app-5bc589d9f7-rnhj7 -o template --template='{{(index spec.containers 0).name}}{{\"\\n\"}}'\n\n#\u5176\u4ed6\u66f4\u591a\u547d\u4ee4\u4f7f\u7528kubectl get --help\u67e5\u770b\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#3","title":"3. \u90e8\u7f72\u547d\u4ee4\u96c6","text":"<p>\u90e8\u7f72\u547d\u4ee4\u5305\u62ec\u8d44\u6e90\u7684\u8fd0\u884c\u7ba1\u7406\u547d\u4ee4\u3001\u6269\u5bb9\u548c\u7f29\u5bb9\u547d\u4ee4\u548c\u81ea\u52a8\u6269\u7f29\u5bb9\u547d\u4ee4\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#31-rollout","title":"3.1 rollout\u547d\u4ee4","text":"<p>\u7ba1\u7406\u8d44\u6e90\u7684\u8fd0\u884c\uff0c\u6bd4\u5982eployment\u3001Daemonet\u3001StatefulSet\u7b49\u8d44\u6e90\u3002</p> <ul> <li>\u67e5\u770b\u90e8\u7f72\u72b6\u6001\uff1a\u6bd4\u5982\u66f4\u65b0deployment/nginx_app\u4e2d\u5bb9\u5668\u7684\u955c\u50cf\u540e\u67e5\u770b\u5176\u66f4\u65b0\u7684\u72b6\u6001\u3002</li> </ul> Bash<pre><code>kubectl set image deployment/nginx_app nginx=nginx:1.9.1\nkubectl rollout status deployment/nginx_app\n</code></pre> <ul> <li>\u8d44\u6e90\u7684\u6682\u505c\u53ca\u6062\u590d\uff1a\u53d1\u51fa\u4e00\u6b21\u6216\u591a\u6b21\u66f4\u65b0\u524d\u6682\u505c\u4e00\u4e2a Deployment\uff0c\u7136\u540e\u518d\u6062\u590d\u5b83\uff0c\u8fd9\u6837\u5c31\u80fd\u5728Deployment\u6682\u505c\u671f\u95f4\u8fdb\u884c\u591a\u6b21\u4fee\u590d\u5de5\u4f5c\uff0c\u800c\u4e0d\u4f1a\u53d1\u51fa\u4e0d\u5fc5\u8981\u7684 rollout\u3002</li> </ul> Bash<pre><code># \u6682\u505c\nkubectl rollout pause deployment/nginx_app\n\n# \u5b8c\u6210\u6240\u6709\u7684\u66f4\u65b0\u64cd\u4f5c\u547d\u4ee4\u540e\u8fdb\u884c\u6062\u590d\nkubectl rollout resume deployment/nginx_app\n</code></pre> <ul> <li>\u56de\u6eda\uff1a\u5982\u4e0a\u5bf9\u4e00\u4e2aDeployment\u7684image\u505a\u4e86\u66f4\u65b0\uff0c\u4f46\u662f\u5982\u679c\u9047\u5230\u66f4\u65b0\u5931\u8d25\u6216\u8bef\u66f4\u65b0\u7b49\u60c5\u51b5\u65f6\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u56de\u6eda\u3002</li> </ul> Bash<pre><code># \u56de\u6eda\u4e4b\u524d\u5148\u67e5\u770b\u5386\u53f2\u7248\u672c\u4fe1\u606f\nkubectl rollout history deployment/nginx_app\n\n# \u56de\u6eda\nkubectl rollout undo deployment/nginx_app\n\n# \u5f53\u7136\u4e5f\u53ef\u4ee5\u6307\u5b9a\u7248\u672c\u53f7\u56de\u6eda\u81f3\u6307\u5b9a\u7248\u672c\nkubectl rollout undo deployment/nginx_app --to-revision=&lt;version_index&gt;\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#32-scale","title":"3.2 scale\u547d\u4ee4","text":"<p>\u5bf9\u4e00\u4e2aDeployment\u3001RS\u3001StatefulSet\u8fdb\u884c\u6269/\u7f29\u5bb9\u3002</p> Bash<pre><code># \u6269\u5bb9\nkubectl scale deployment/nginx_app --replicas=5\n# \u5982\u679c\u662f\u7f29\u5bb9\uff0c\u628a\u5bf9\u5e94\u7684\u526f\u672c\u6570\u8bbe\u7f6e\u7684\u6bd4\u5f53\u524d\u7684\u526f\u672c\u6570\u5c0f\u5373\u53ef\n\n# \u53e6\u5916\uff0c\u8fd8\u53ef\u4ee5\u9488\u5bf9\u5f53\u524d\u7684\u526f\u672c\u6570\u76ee\u505a\u6761\u4ef6\u9650\u5236\uff0c\u6bd4\u5982\u5f53\u524d\u526f\u672c\u6570\u662f5\u5219\u8fdb\u884c\u7f29\u5bb9\u81f3\u526f\u672c\u6570\u76ee\u4e3a3\nkubectl scale --current-replicas=5 --replicas=3 deployment/nginx_app\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#33-autoscale","title":"3.3 autoscale\u547d\u4ee4","text":"<p>\u901a\u8fc7\u521b\u5efa\u4e00\u4e2aautoscaler\uff0c\u53ef\u4ee5\u81ea\u52a8\u9009\u62e9\u548c\u8bbe\u7f6e\u5728K8s\u96c6\u7fa4\u4e2dPod\u7684\u6570\u91cf\u3002</p> Bash<pre><code># \u57fa\u4e8eCPU\u7684\u4f7f\u7528\u7387\u521b\u5efa3-10\u4e2apod\nkubectl autoscale deployment/nginx_app --min=3 --max=10 --cpu_percent=80\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#4","title":"4. \u96c6\u7fa4\u7ba1\u7406\u547d\u4ee4","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#41-cordon-uncordon","title":"4.1 cordon &amp; uncordon\u547d\u4ee4","text":"<p>\u8bbe\u7f6e\u662f\u5426\u80fd\u591f\u5c06pod\u8c03\u5ea6\u5230\u8be5\u8282\u70b9\u4e0a\u3002</p> Bash<pre><code># \u4e0d\u53ef\u8c03\u5ea6\nkubectl cordon node-0\n\n# \u5f53\u67d0\u4e2a\u8282\u70b9\u9700\u8981\u7ef4\u62a4\u65f6\uff0c\u53ef\u4ee5\u9a71\u9010\u8be5\u8282\u70b9\u4e0a\u7684\u6240\u6709pods(\u4f1a\u5220\u9664\u8282\u70b9\u4e0a\u7684pod\uff0c\u5e76\u4e14\u81ea\u52a8\u901a\u8fc7\u4e0a\u9762\u547d\u4ee4\u8bbe\u7f6e\n# \u8be5\u8282\u70b9\u4e0d\u53ef\u8c03\u5ea6\uff0c\u7136\u540e\u5728\u5176\u4ed6\u53ef\u7528\u8282\u70b9\u91cd\u65b0\u542f\u52a8pods)\nkubectl drain node-0\n\n# \u5f85\u5176\u7ef4\u62a4\u5b8c\u6210\u540e\uff0c\u53ef\u518d\u8bbe\u7f6e\u8be5\u8282\u70b9\u4e3a\u53ef\u8c03\u5ea6\nkubectl uncordon node-0\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#42-taint","title":"4.2 taint\u547d\u4ee4","text":"<p>\u76ee\u524d\u4ec5\u80fd\u4f5c\u7528\u4e8e\u8282\u70b9\u8d44\u6e90\uff0c\u4e00\u822c\u8fd9\u4e2a\u547d\u4ee4\u901a\u5e38\u4f1a\u7ed3\u5408pod\u7684tolerations\u5b57\u6bb5\u7ed3\u5408\u4f7f\u7528\uff0c\u5bf9\u4e8e\u6ca1\u6709\u8bbe\u7f6e\u5bf9\u5e94toleration\u7684pod\u662f\u4e0d\u4f1a\u8c03\u5ea6\u5230\u6709\u8be5taint\u7684\u8282\u70b9\u4e0a\u7684\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u907f\u514dpod\u88ab\u8c03\u5ea6\u5230\u4e0d\u5408\u9002\u7684\u8282\u70b9\u4e0a\u3002\u4e00\u4e2a\u8282\u70b9\u7684taint\u4e00\u822c\u4f1a\u5305\u62eckey\u3001value\u548ceffect(effect\u53ea\u80fd\u5728NoSchedule, PreferNoSchedule, NoExecute\u4e2d\u53d6\u503c)\u3002</p> Bash<pre><code># \u8bbe\u7f6etaint\nkubecl taint nodes node-0 key1=value1:NoSchedule\n\n# \u79fb\u9664taint\nkubecl taint nodes node-0 key1:NoSchedule-\n</code></pre> <p>\u5982\u679cpod\u60f3\u8981\u88ab\u8c03\u5ea6\u5230\u4e0a\u8ff0\u8bbe\u7f6e\u4e86taint\u7684\u8282\u70b9node-0\u4e0a\uff0c\u5219\u9700\u8981\u5728\u8be5pod\u7684spec\u7684tolerations\u5b57\u6bb5\u8bbe\u7f6e\uff1a</p> YAML<pre><code>tolerations:\n- key: \"key1\"\n  operator: \"Equal\"\n  value: \"value1\"\n  effect: \"NoSchedule\"\n\n# \u6216\u8005\ntolerations:\n- key: \"key1\"\n  operator: \"Exists\"\n  effect: \"NoSchedule\"\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#5","title":"5. \u5176\u5b83","text":"Bash<pre><code># \u6620\u5c04\u7aef\u53e3\u5141\u8bb8\u5916\u90e8\u8bbf\u95ee\nkubectl expose deployment/nginx_app --type='NodePort' --port=80\n# \u7136\u540e\u901a\u8fc7kubectl get services -o wide\u6765\u67e5\u770b\u88ab\u968f\u673a\u6620\u5c04\u7684\u7aef\u53e3\n# \u5982\u6b64\u5c31\u53ef\u4ee5\u901a\u8fc7node\u7684\u5916\u90e8IP\u548c\u7aef\u53e3\u6765\u8bbf\u95eenginx\u670d\u52a1\u4e86\n\n# \u8f6c\u53d1\u672c\u5730\u7aef\u53e3\u8bbf\u95eePod\u7684\u5e94\u7528\u670d\u52a1\u7a0b\u5e8f\nkubectl port-forward nginx_app_pod_0 8090:80\n# \u5982\u6b64\uff0c\u672c\u5730\u53ef\u4ee5\u8bbf\u95ee\uff1acurl -i localhost:8090\n\n# \u5728\u521b\u5efa\u6216\u542f\u52a8\u67d0\u4e9b\u8d44\u6e90\u7684\u65f6\u5019\u6ca1\u6709\u8fbe\u5230\u9884\u671f\u7ed3\u679c\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5148\u7b80\u5355\u8fdb\u884c\u6545\u969c\u5b9a\u4f4d\nkubectl describe deployment/nginx_app\nkubectl logs nginx_pods\nkubectl exec nginx_pod -c nginx-app &lt;command&gt;\n\n# \u96c6\u7fa4\u5185\u90e8\u8c03\u7528\u63a5\u53e3(\u6bd4\u5982\u7528curl\u547d\u4ee4)\uff0c\u53ef\u4ee5\u91c7\u7528\u4ee3\u7406\u7684\u65b9\u5f0f\uff0c\u6839\u636e\u8fd4\u56de\u7684ip\u53ca\u7aef\u53e3\u4f5c\u4e3abaseurl\nkubectl proxy &amp;\n\n# \u67e5\u770bK8s\u652f\u6301\u7684\u5b8c\u6574\u8d44\u6e90\u5217\u8868\nkubectl api-resources\n\n# \u67e5\u770bK8s\u652f\u6301\u7684api\u7248\u672c\nkubectl api-versions\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_cmd/#_1","title":"\u672a\u5f52\u6863\u547d\u4ee4\u5927\u7efc\u5408","text":"Bash<pre><code># \u67e5\u770b\u5177\u4f53pods\uff0c\u8bb0\u5f97\u540e\u8fb9\u8ddfnamespace\u540d\u5b57\u54e6\nkubectl get pods  kubernetes-dashboard-76479d66bb-nj8wr --namespace=kube-system\n# \u67e5\u770bpods\u5177\u4f53\u4fe1\u606f\nkubectl get pods -o wide kubernetes-dashboard-76479d66bb-nj8wr --namespace=kube-system\n# \u67e5\u770b\u96c6\u7fa4\u5065\u5eb7\u72b6\u6001\nkubectl get cs\n# \u83b7\u53d6\u6240\u6709deployment\nkubectl get deployment --all-namespaces\n# \u5217\u51fa\u8be5 namespace \u4e2d\u7684\u6240\u6709 pod \u5305\u62ec\u672a\u521d\u59cb\u5316\u7684\nkubectl get pods --include-uninitialized\n# \u67e5\u770bdeployment()\nkubectl get deployment nginx-app\n# \u67e5\u770brc\u548cservers\nkubectl get rc,services\n# \u67e5\u770bpods\u7ed3\u6784\u4fe1\u606f\uff08\u91cd\u70b9\uff0c\u901a\u8fc7\u8fd9\u4e2a\u770b\u65e5\u5fd7\u5206\u6790\u9519\u8bef\uff09\n# \u5bf9\u63a7\u5236\u5668\u548c\u670d\u52a1\uff0cnode\u540c\u6837\u6709\u6548\nkubectl describe pods xxxxpodsname --namespace=xxxnamespace\n# \u5176\u4ed6\u63a7\u5236\u5668\u7c7b\u4f3c\u5427\uff0c\u5c31\u662fkubectl get \u63a7\u5236\u5668 \u63a7\u5236\u5668\u5177\u4f53\u540d\u79f0\n# \u67e5\u770bpod\u65e5\u5fd7\nkubectl logs $POD_NAME\n# \u67e5\u770bpod\u53d8\u91cf\nkubectl exec my-nginx-5j8ok -- printenv | grep SERVICE\n# \u96c6\u7fa4\nkubectl get cs           # \u96c6\u7fa4\u5065\u5eb7\u60c5\u51b5\nkubectl cluster-info     # \u96c6\u7fa4\u6838\u5fc3\u7ec4\u4ef6\u8fd0\u884c\u60c5\u51b5\nkubectl get namespaces    # \u8868\u7a7a\u95f4\u540d\nkubectl version           # \u7248\u672c\nkubectl api-versions      # API\nkubectl get events       # \u67e5\u770b\u4e8b\u4ef6\nkubectl get nodes      //\u83b7\u53d6\u5168\u90e8\u8282\u70b9\nkubectl delete node k8s2  //\u5220\u9664\u8282\u70b9\nkubectl rollout status deploy nginx-test\n# \u521b\u5efa\nkubectl create -f ./nginx.yaml           # \u521b\u5efa\u8d44\u6e90\nkubectl create -f .                            # \u521b\u5efa\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709yaml\u8d44\u6e90\nkubectl create -f ./nginx1.yaml -f ./mysql2.yaml     # \u4f7f\u7528\u591a\u4e2a\u6587\u4ef6\u521b\u5efa\u8d44\u6e90\nkubectl create -f ./dir                        # \u4f7f\u7528\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6e05\u5355\u6587\u4ef6\u6765\u521b\u5efa\u8d44\u6e90\nkubectl create -f https://git.io/vPieo         # \u4f7f\u7528 url \u6765\u521b\u5efa\u8d44\u6e90\nkubectl run -i --tty busybox --image=busybox    ----\u521b\u5efa\u5e26\u6709\u7ec8\u7aef\u7684pod\nkubectl run nginx --image=nginx                # \u542f\u52a8\u4e00\u4e2a nginx \u5b9e\u4f8b\nkubectl run mybusybox --image=busybox --replicas=5    ----\u542f\u52a8\u591a\u4e2apod\nkubectl explain pods,svc                       # \u83b7\u53d6 pod \u548c svc \u7684\u6587\u6863\n# \u66f4\u65b0\nkubectl rolling-update python-v1 -f python-v2.json           # \u6eda\u52a8\u66f4\u65b0 pod frontend-v1\nkubectl rolling-update python-v1 python-v2 --image=image:v2  # \u66f4\u65b0\u8d44\u6e90\u540d\u79f0\u5e76\u66f4\u65b0\u955c\u50cf\nkubectl rolling-update python --image=image:v2                 # \u66f4\u65b0 frontend pod \u4e2d\u7684\u955c\u50cf\nkubectl rolling-update python-v1 python-v2 --rollback        # \u9000\u51fa\u5df2\u5b58\u5728\u7684\u8fdb\u884c\u4e2d\u7684\u6eda\u52a8\u66f4\u65b0\ncat pod.json | kubectl replace -f -                              # \u57fa\u4e8e stdin \u8f93\u5165\u7684 JSON \u66ff\u6362 pod\n\u5f3a\u5236\u66ff\u6362\uff0c\u5220\u9664\u540e\u91cd\u65b0\u521b\u5efa\u8d44\u6e90\u3002\u4f1a\u5bfc\u81f4\u670d\u52a1\u4e2d\u65ad\u3002\nkubectl replace --force -f ./pod.json\n\u4e3a nginx RC \u521b\u5efa\u670d\u52a1\uff0c\u542f\u7528\u672c\u5730 80 \u7aef\u53e3\u8fde\u63a5\u5230\u5bb9\u5668\u4e0a\u7684 8000 \u7aef\u53e3\nkubectl expose rc nginx --port=80 --target-port=8000\n\n\u66f4\u65b0\u5355\u5bb9\u5668 pod \u7684\u955c\u50cf\u7248\u672c\uff08tag\uff09\u5230 v4\nkubectl get pod nginx-pod -o yaml | sed 's/\\(image: myimage\\):.*$/\\1:v4/' | kubectl replace -f -\nkubectl label pods nginx-pod new-label=awesome                      # \u6dfb\u52a0\u6807\u7b7e\nkubectl annotate pods nginx-pod icon-url=http://goo.gl/XXBTWq       # \u6dfb\u52a0\u6ce8\u89e3\nkubectl autoscale deployment foo --min=2 --max=10                # \u81ea\u52a8\u6269\u5c55 deployment \u201cfoo\u201d\n# \u7f16\u8f91\u8d44\u6e90\nkubectl edit svc/docker-registry                      # \u7f16\u8f91\u540d\u4e3a docker-registry \u7684 service\nKUBE_EDITOR=\"nano\" kubectl edit svc/docker-registry   # \u4f7f\u7528\u5176\u5b83\u7f16\u8f91\u5668\n# \u52a8\u6001\u4f38\u7f29pod\nkubectl scale --replicas=3 rs/foo                                 # \u5c06foo\u526f\u672c\u96c6\u53d8\u62103\u4e2a\nkubectl scale --replicas=3 -f foo.yaml                            # \u7f29\u653e\u201cfoo\u201d\u4e2d\u6307\u5b9a\u7684\u8d44\u6e90\u3002\nkubectl scale --current-replicas=2 --replicas=3 deployment/mysql  # \u5c06deployment/mysql\u4ece2\u4e2a\u53d8\u62103\u4e2a\nkubectl scale --replicas=5 rc/foo rc/bar rc/baz                   # \u53d8\u66f4\u591a\u4e2a\u63a7\u5236\u5668\u7684\u6570\u91cf\nkubectl rollout status deploy deployment/mysql                         # \u67e5\u770b\u53d8\u66f4\u8fdb\u5ea6\n# \u5220\u9664\nkubectl delete -f ./pod.json                                              # \u5220\u9664 pod.json \u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u7c7b\u578b\u548c\u540d\u79f0\u7684 pod\nkubectl delete pod,service baz foo                                        # \u5220\u9664\u540d\u4e3a\u201cbaz\u201d\u7684 pod \u548c\u540d\u4e3a\u201cfoo\u201d\u7684 service\nkubectl delete pods,services -l name=myLabel                              # \u5220\u9664\u5177\u6709 name=myLabel \u6807\u7b7e\u7684 pod \u548c serivce\nkubectl delete pods,services -l name=myLabel --include-uninitialized      # \u5220\u9664\u5177\u6709 name=myLabel \u6807\u7b7e\u7684 pod \u548c service\uff0c\u5305\u62ec\u5c1a\u672a\u521d\u59cb\u5316\u7684\nkubectl -n my-ns delete po,svc --all # \u5220\u9664 my-ns namespace\u4e0b\u7684\u6240\u6709 pod \u548c serivce\uff0c\u5305\u62ec\u5c1a\u672a\u521d\u59cb\u5316\u7684\nkubectl delete pods prometheus-7fcfcb9f89-qkkf7 --grace-period=0 --force \u5f3a\u5236\u5220\u9664\n\n# \u4ea4\u4e92\nkubectl logs nginx-pod                                 # dump \u8f93\u51fa pod \u7684\u65e5\u5fd7\uff08stdout\uff09\nkubectl logs nginx-pod -c my-container                 # dump \u8f93\u51fa pod \u4e2d\u5bb9\u5668\u7684\u65e5\u5fd7\uff08stdout\uff0cpod \u4e2d\u6709\u591a\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff09\nkubectl logs -f nginx-pod                              # \u6d41\u5f0f\u8f93\u51fa pod \u7684\u65e5\u5fd7\uff08stdout\uff09\nkubectl logs -f nginx-pod -c my-container              # \u6d41\u5f0f\u8f93\u51fa pod \u4e2d\u5bb9\u5668\u7684\u65e5\u5fd7\uff08stdout\uff0cpod \u4e2d\u6709\u591a\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff09\nkubectl run -i --tty busybox --image=busybox -- sh  # \u4ea4\u4e92\u5f0f shell \u7684\u65b9\u5f0f\u8fd0\u884c pod\nkubectl attach nginx-pod -i                            # \u8fde\u63a5\u5230\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\nkubectl port-forward nginx-pod 5000:6000               # \u8f6c\u53d1 pod \u4e2d\u7684 6000 \u7aef\u53e3\u5230\u672c\u5730\u7684 5000 \u7aef\u53e3\nkubectl exec nginx-pod -- ls /                         # \u5728\u5df2\u5b58\u5728\u7684\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4\uff08\u53ea\u6709\u4e00\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\uff09\nkubectl exec nginx-pod -c my-container -- ls /         # \u5728\u5df2\u5b58\u5728\u7684\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4\uff08pod \u4e2d\u6709\u591a\u4e2a\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\uff09\nkubectl top pod POD_NAME --containers               # \u663e\u793a\u6307\u5b9a pod\u548c\u5bb9\u5668\u7684\u6307\u6807\u5ea6\u91cf\n# \u8c03\u5ea6\u914d\u7f6e\n$ kubectl cordon k8s-node                                                # \u6807\u8bb0 my-node \u4e0d\u53ef\u8c03\u5ea6\n$ kubectl drain k8s-node                                                 # \u6e05\u7a7a my-node \u4ee5\u5f85\u7ef4\u62a4\n$ kubectl uncordon k8s-node                                              # \u6807\u8bb0 my-node \u53ef\u8c03\u5ea6\n$ kubectl top node k8s-node                                              # \u663e\u793a my-node \u7684\u6307\u6807\u5ea6\u91cf\n$ kubectl cluster-info dump                                             # \u5c06\u5f53\u524d\u96c6\u7fa4\u72b6\u6001\u8f93\u51fa\u5230 stdout                                    \n$ kubectl cluster-info dump --output-directory=/path/to/cluster-state   # \u5c06\u5f53\u524d\u96c6\u7fa4\u72b6\u6001\u8f93\u51fa\u5230 /path/to/cluster-state\n#\u5982\u679c\u8be5\u952e\u548c\u5f71\u54cd\u7684\u6c61\u70b9\uff08taint\uff09\u5df2\u5b58\u5728\uff0c\u5219\u4f7f\u7528\u6307\u5b9a\u7684\u503c\u66ff\u6362\n$ kubectl taint nodes foo dedicated=special-user:NoSchedule\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/","title":"k8s\u90e8\u7f72\u5e38\u89c1\u95ee\u9898\u6c47\u603b","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#16643-was-refused","title":"1.\u7cfb\u7edf\u91cd\u542f\u4ee5\u540e6643 was refused","text":"Bash<pre><code># \u62a5\u9519\u5185\u5bb9\uff1a\n[root@centos801 ~]# kubectl get nodes\nThe connection to the server 192.168.33.130:6443 was refused - did you specify the right host or port?\n\n# \u89e3\u51b3\u65b9\u6848\nsudo -i  # \u4e3a\u4e86\u9891\u7e41\u7684\u6267\u884c\u67d0\u4e9b\u53ea\u6709\u8d85\u7ea7\u7528\u6237\u624d\u80fd\u6267\u884c\u7684\u6743\u9650\uff0c\u800c\u4e0d\u7528\u6bcf\u6b21\u8f93\u5165\u5bc6\u7801\nswapoff -a  # \u5173\u95ed\u7cfb\u7edf\u7684\u4ea4\u6362\u533a\u3002\nexit\nstrace -eopenat kubectl version\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#2nodejoin","title":"2.node\u8282\u70b9\u91cd\u65b0join\u65f6\uff0c\u9700\u8981\u6267\u884c\u4e0b\u5217\u547d\u4ee4","text":"Bash<pre><code>kubeadm reset\n\n# \u5982\u679c\u6709\u62a5\u9519\u4fe1\u606f\u5982\u4e0b\uff1a\nThe reset process does not clean CNI configuration. To do so, you must remove /etc/cni/net.d\n\nThe reset process does not reset or clean up iptables rules or IPVS tables.\nIf you wish to reset iptables, you must do so manually by using the \"iptables\" command.\n\nIf your cluster was setup to utilize IPVS, run ipvsadm --clear (or similar)\nto reset your system's IPVS tables.\n\nThe reset process does not clean your kubeconfig files and you must remove them manually.\nPlease, check the contents of the $HOME/.kube/config file.\n[root@centos803 ~]# iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n\n# \u5219\u6267\u884c\u547d\u4ee4\uff0c\u7136\u540e\u518d\u6267\u884cjoin\u64cd\u4f5c\niptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#3kube-flannel","title":"3.kube-flannel\u7684\u72b6\u6001\u5f02\u5e38","text":"<ul> <li> <p>\u5177\u4f53\u5f02\u5e38\u4fe1\u606f Bash<pre><code>[root@centos801 ~]# kubectl get pods -n kube-system\nNAME                                READY   STATUS              RESTARTS   AGE\ncoredns-6d56c8448f-hnjbz            0/1     ContainerCreating   0          14m\ncoredns-6d56c8448f-tc4j2            0/1     ContainerCreating   0          14m\netcd-centos801                      1/1     Running             0          14m\nkube-apiserver-centos801            1/1     Running             0          14m\nkube-controller-manager-centos801   1/1     Running             0          14m\nkube-flannel-ds-8bvql               0/1     CrashLoopBackOff    6          9m41s\nkube-flannel-ds-lj5vp               0/1     CrashLoopBackOff    6          8m52s\nkube-flannel-ds-qxgq9               0/1     CrashLoopBackOff    7          11m\nkube-proxy-jsssg                    1/1     Running             0          14m\nkube-proxy-pq9rf                    1/1     Running             0          8m52s\nkube-proxy-z77tv                    1/1     Running             0          9m41s\nkube-scheduler-centos801            1/1     Running             0          14m\n</code></pre></p> </li> <li> <p>\u9519\u8bef\u539f\u56e0\u662f\u5728\u8fdb\u884ckubeadm init\u65f6\u6ca1\u6709\u6dfb\u52a0\u5982\u4e0b\u53c2\u6570 Bash<pre><code>--pod-network-cidr=10.244.0.0/16\n</code></pre></p> </li> <li> <p>\u4f46\u662f\u68c0\u67e5\u521d\u59cb\u5316\u547d\u4ee4\u6709\u8fdb\u884c\u8bbe\u7f6e\u6b64\u53c2\u6570 Bash<pre><code>kubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.19.4 \\\n--service-cidr=10.96.0.0/12 \n--pod-network-cidr=10.244.0.0/16\n</code></pre></p> </li> <li> <p>\u5bfb\u601d\u5343\u904d\uff0c\u82b1\u4e86\u8fd1\u4e09\u4e2a\u5c0f\u65f6\u5728chrome\u3001kubeadm init\u3001kube join \u4e4b\u95f4\u8f97\u8f6c\u53cd\u4fa7 Bash<pre><code>[root@centos801 ~]# kubeadm init \\\n&gt; --apiserver-advertise-address=192.168.33.131 \\\n&gt; --image-repository registry.aliyuncs.com/google_containers \\\n&gt; --kubernetes-version v1.19.4 \nW0312 14:43:44.370062  280711 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[init] Using Kubernetes version: v1.19.4\n[preflight] Running pre-flight checks\n        [WARNING FileExisting-tc]: tc not found in system path\n        [WARNING Hostname]: hostname \"centos801\" could not be reached\n        [WARNING Hostname]: hostname \"centos801\": lookup centos801 on 114.114.114.114:53: no such host\n</code></pre></p> </li> <li> <p>\u53d1\u73b0\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u4e22\u5931\uff0c\u6700\u7ec8\u4eba\u50bb\u6389\u4e86\uff0c--pod-network-cidr \u524d\u9762\u6dfb\u52a0\u4e00\u4e2a \"\\\",\u518d\u91cd\u65b0\u6267\u884cinit\u547d\u4ee4\uff0c\u5373\u53ef\u89e3\u51b3\u95ee\u9898 Bash<pre><code>kubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.19.4 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16\n\n[root@centos801 ~]# kubectl get pods -n kube-system\nNAME                                READY   STATUS    RESTARTS   AGE\ncoredns-6d56c8448f-qhftp            1/1     Running   0          3m42s\ncoredns-6d56c8448f-w8h9n            1/1     Running   0          3m42s\netcd-centos801                      1/1     Running   0          3m58s\nkube-apiserver-centos801            1/1     Running   0          3m59s\nkube-controller-manager-centos801   1/1     Running   0          3m58s\nkube-flannel-ds-5fljb               1/1     Running   0          52s\nkube-flannel-ds-cxk58               1/1     Running   0          22s\nkube-flannel-ds-z9zpr               1/1     Running   0          2m2s\nkube-proxy-ftvsz                    1/1     Running   0          3m42s\nkube-proxy-j6x7f                    1/1     Running   0          22s\nkube-proxy-l6pxl                    1/1     Running   0          52s\nkube-scheduler-centos801            1/1     Running   0          3m58s\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#4initjoin","title":"4.\u91cd\u65b0\u8fdb\u884c\u96c6\u7fa4init\u548cjoin\u64cd\u4f5c\u7684\u6b63\u786e\u6d41\u7a0b","text":"Bash<pre><code># master\u548cnode\u8282\u70b9\u90fd\u9700\u8981\u6267\u884c\nkubeadm reset --force\niptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X\n\n# \u53ea\u5728master\u8282\u70b9\u6267\u884c\nkubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.19.4 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16 \n\n# \u53ea\u5728node\u8282\u70b9\u6267\u884c\nkubeadm join 192.168.33.131:6443 --token hxxxre.qbaa224113efwjs1 \\\n  --discovery-token-ca-cert-hash sha256:208d7b79e19f460c5311eeeddfc9102316932d877f717b8bb1bc86dbb85133a7\n</code></pre> <p>1/ \u5404\u7ec4\u4ef6\u542f\u52a8\u5931\u8d25\u65f6\uff0c\u5982\u4f55\u65b9\u4fbf\u7684\u67e5\u770b\u9519\u8bef\uff1f \u53ef\u4f7f\u7528\u547d\u4ee4 <code>systemctl status &lt;\u7ec4\u4ef6\u540d&gt;</code> \u6216 <code>journalctl -xefu &lt;\u7ec4\u4ef6\u540d&gt;</code>\u67e5\u770b\u65e5\u5fd7\u3002 2/ \u6ce8\u610fcgroup\u542f\u52a8\u95ee\u9898 Text Only<pre><code>failed to create kubelet: misconfiguration: kubelet cgroup driver: \"cgroupfs\" is different from docker cgroup driver: \"systemd\"\n</code></pre> kubelet \u9ed8\u8ba4\u4f7f\u7528 <code>cgroupfs</code> \u542f\u52a8\uff0c\u53ef\u4fee\u6539\u4e3adocker \u7684<code>systemd</code>\uff0c \u6216\u4fee\u6539docker \u542f\u52a8\u4e3a <code>cgroupfs</code>\u3002 docker \u4fee\u6539\u7684\u5730\u65b9\u4e3a /etc/docker/daemon.json Text Only<pre><code>{\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\n</code></pre> kuberlet \u53ef\u4fee\u6539systemd \u7684service\u4e2d\u542f\u52a8\u547d\u4ee4\u589e\u52a0<code>--cgroup-driver</code>\u53c2\u6570\uff1a Text Only<pre><code># \u53ef\u6307\u5b9a\u542f\u52a8\u53c2\u6570 \nDOCKER_CGROUPS=$(docker info | grep 'Cgroup' | cut -d' ' -f3)\n--cgroup-driver=$DOCKER_CGROUPS\n</code></pre> 3/ \u8282\u70b9\u5220\u9664\u540e\u5982\u4f55\u91cd\u65b0\u6388\u6743\uff1f \u8282\u70b9\u5220\u9664\u540e\uff0c\u91cd\u542f kubelet\u3002\u5728Master \u7aef\u662f\u770b\u4e0d\u5230\u7533\u8bf7\u4fe1\u606f\u7684\uff0c\u9700\u8981\u5c06\u4e0a\u6b21\u7533\u8bf7\u7684\u8bc1\u4e66\u5220\u9664\uff0c\u518d\u91cd\u542f\u3002 Text Only<pre><code># master\nkubectl delete node node01\n# node01 \nrm -f /opt/kubernetes/ssl/kubelet*\nsystemctl restart kubelet\n</code></pre> 4/ \u6392\u67e5pod\u65e0\u6cd5\u542f\u52a8\u7684\u601d\u8def Text Only<pre><code># 1. \u5148\u67e5\u770bpod\u7684\u6700\u8fd1\u7684\u64cd\u4f5c\nkubectl describe pod &lt;pod-name&gt; -n kube-system \n# 2. \u67e5\u770bpod \u7684\u65e5\u5fd7\nkubectl logs pod &lt;pod-name&gt;\n</code></pre> 5/ \u89e3\u51b3Dashboard 2.0 chrome\u6d4f\u89c8\u5668\u4e0d\u80fd\u8bbf\u95ee\u7684\u95ee\u9898 Text Only<pre><code>mkdir key &amp;&amp; cd key\n# 1 \u751f\u6210\u8bc1\u4e66\nopenssl genrsa -out dashboard.key 2048\nopenssl req -new -out dashboard.csr -key dashboard.key -subj '/CN=kubernetes-dashboard-certs'\nopenssl x509 -req -in dashboard.csr -signkey dashboard.key -out dashboard.crt\n# 2 \u5220\u9664\u539f\u6709\u7684\u8bc1\u4e66secret\nkubectl delete secret kubernetes-dashboard-certs -n kube-system\n# 3 \u521b\u5efa\u65b0\u7684\u8bc1\u4e66secret\nkubectl create secret generic kubernetes-dashboard-certs --from-file=dashboard.key --from-file=dashboard.crt -n kube-system\n# 4 \u67e5\u770bdashboard pod\uff0cv2.0\u662f -n kubernetes-dashboard\nkubectl get pod -n kube-system\n# 5 \u91cd\u542fdashboard pod\uff0cv2.0\u662f -n kubernetes-dashboard\nkubectl delete pod &lt;pod name&gt; -n kube-system\n</code></pre> 6/ \u5982\u4f55\u5f7b\u5e95\u7684\u5220\u9664\u4e00\u4e2apod? K8S\u4e2dpod \u662f\u6709<code>deployments</code>\u6765\u53d1\u5e03\u7684\uff0c\u6240\u4ee5\u76f4\u63a5\u5220\u9664pod\u540e\uff0ck8s\u65e0\u6cd5\u8bc6\u522b\u662f\u4eba\u4e3a\u8fd8\u662f\u6545\u969c\uff0c\u5b83\u4f1a\u6839\u636e<code>deployments</code> \u63cf\u8ff0\u7684\u4fe1\u606f\uff0c\u91cd\u65b0\u542f\u52a8\u4e00\u4e2apod\u3002\u6240\u4ee5\u8981\u5220\u9664pod \u65f6\uff0c\u76f4\u63a5\u5220\u9664\u5bf9\u5e94\u7684 <code>deployments</code>\uff0cpod\u4f1a\u81ea\u52a8\u5220\u9664\u3002 Text Only<pre><code>kubectl delete deployment &lt;deployment_name&gt; -n &lt;namespace&gt;\n</code></pre> 7/ \u8282\u70b9\u7ef4\u62a4\u65f6\uff0c\u5982\u4f55\u624b\u52a8\u9a71\u8d76pod? Text Only<pre><code># 1\u3001\u6807\u8bb0\u8282\u70b9\u4e0d\u53ef\u8c03\u5ea6\nkubectl cordon &lt;node name&gt;\n# 2\u3001\u624b\u52a8\u8fc1\u79fbpod \nkubectl drain &lt;node name&gt; --delete-local-data --ignore-daemonsets --force\n# 3\u3001\u5e26\u8282\u70b9\u7ef4\u62a4\u5b8c\u6210\u4e4b\u540e\uff0c\u6062\u590d\u53ef\u8c03\u5ea6\nkubectl uncordon &lt;node name&gt;\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#5-kubeadm-k8s1194","title":"5. kubeadm \u5b89\u88c5k8s1.19.4\u9700\u8981\u7684\u955c\u50cf\u8bf4\u660e\uff1a","text":"<p>\u6267\u884ckubeadm init \u5361\u5728pull image \uff0c\u7531\u4e8e\u9ed8\u8ba4\u6e90\u662f\u8c37\u6b4c\uff0c\u955c\u50cf\u901a\u5e38\u62c9\u53d6\u4e0d\u4e0b\u6765\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u56fd\u5185\u6e90\u8fdb\u884c\u5fc5\u8981\u955c\u50cf\u7684\u62c9\u53d6</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step1kubeadm","title":"step1:\u67e5\u770b\u5f53\u524d\u7248\u672c\u7684kubeadm \u9700\u8981\u7684\u955c\u50cf\u5305\u548c\u7248\u672c","text":"Bash<pre><code>kubeadm  config images list  \n</code></pre> <ul> <li>\u65e5\u5fd7 Bash<pre><code>(base) [root@automlgpu4 k8s]# kubeadm config images list\nW0608 17:33:50.021855   83264 version.go:102] could not fetch a Kubernetes version from the internet: unable to get URL \"https://dl.k8s.io/release/stable-1.txt\": Get \"https://dl.k8s.io/release/stable-1.txt\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)\nW0608 17:33:50.022758   83264 version.go:103] falling back to the local client version: v1.19.4\nW0608 17:33:50.023105   83264 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\nk8s.gcr.io/kube-apiserver:v1.19.4\nk8s.gcr.io/kube-controller-manager:v1.19.4\nk8s.gcr.io/kube-scheduler:v1.19.4\nk8s.gcr.io/kube-proxy:v1.19.4\nk8s.gcr.io/pause:3.2\nk8s.gcr.io/etcd:3.4.13-0\nk8s.gcr.io/coredns:1.7.0\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step2","title":"step2:\u5c06\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\u5bfc\u51fa\u5e76\u7f16\u8f91","text":"<p>Bash<pre><code>kubeadm config print init-defaults &gt; kubeadm.conf \nvim kubeadm.conf  # \u6253\u5f00\u6587\u4ef6\u5e76\u4fee\u6539\n</code></pre> Bash<pre><code>(base) [root@automlgpu4 k8s]# vim kubeadm.conf \n\n 1 kubeadm.conf                                                                                                                                                                            X \n apiVersion: kubeadm.k8s.io/v1beta2\n bootstrapTokens:\n - groups:\n   - system:bootstrappers:kubeadm:default-node-token\n   token: abcdef.0123456789abcdef\n   ttl: 24h0m0s\n   usages:\n   - signing\n   - authentication\n kind: InitConfiguration\n localAPIEndpoint:\n   advertiseAddress: 172.16.2.117  # \u672c\u673a\u7684ip\n   bindPort: 6443\n nodeRegistration:\n   criSocket: /var/run/dockershim.sock\n   name: automlgpu4\n   taints:\n   - effect: NoSchedule\n     key: node-role.kubernetes.io/master\n ---\n apiServer:\n   timeoutForControlPlane: 4m0s\n apiVersion: kubeadm.k8s.io/v1beta2\n certificatesDir: /etc/kubernetes/pki\n clusterName: kubernetes\n controllerManager: {}\n dns:\n   type: CoreDNS\n etcd:\n   local:\n     dataDir: /var/lib/etcd\n imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers  # \u66f4\u66f4\u6362\u4e3a\u963f\u91cc\u955c\u50cf\u6e90\n kind: ClusterConfiguration\n kubernetesVersion: v1.19.4\n networking:\n   dnsDomain: cluster.local\n   serviceSubnet: 10.96.0.0/12\n scheduler: {}\n ~                                                                                                                                                                                           \n ~                                                                                                                                                                                           \n ~             \n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step3image","title":"step3:\u62c9\u53d6image","text":"Bash<pre><code>kubeadm config images pull --config kubeadm.conf \n</code></pre> <ul> <li>\u65e5\u5fd7 Bash<pre><code>(base) [root@automlgpu4 k8s]# kubeadm config images pull --config kubeadm.conf\nW0608 17:09:52.812134   60183 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.4\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.13-0\n[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step4","title":"step4: \u4fee\u6539\u955c\u50cf\u6807\u7b7e","text":"Bash<pre><code>docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.4 k8s.gcr.io/kube-apiserver:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.4 k8s.gcr.io/kube-controller-manager:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.4 k8s.gcr.io/kube-scheduler:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.4 k8s.gcr.io/kube-proxy:v1.19.4\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2 k8s.gcr.io/pause:3.2\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.13-0 k8s.gcr.io/etcd:3.4.13-0\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0 k8s.gcr.io/coredns:1.7.0\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_common_qa/#step5kubeadm-init","title":"step5:\u6267\u884ckubeadm init \u64cd\u4f5c","text":"Bash<pre><code>kubeadm init --config kubeadm.conf\n</code></pre> <ul> <li>\u65e5\u5fd7\uff1a Bash<pre><code>(base) [root@automlgpu4 k8s]# kubeadm init --config kubeadm.conf \nW0608 17:24:49.913798   72683 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]\n[init] Using Kubernetes version: v1.19.4\n[preflight] Running pre-flight checks\n[preflight] Pulling images required for setting up a Kubernetes cluster\n[preflight] This might take a minute or two, depending on the speed of your internet connection\n[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'\n[certs] Using certificateDir folder \"/etc/kubernetes/pki\"\n[certs] Generating \"ca\" certificate and key\n[certs] Generating \"apiserver\" certificate and key\n[certs] apiserver serving cert is signed for DNS names [automlgpu4 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 172.16.2.117]\n[certs] Generating \"apiserver-kubelet-client\" certificate and key\n[certs] Generating \"front-proxy-ca\" certificate and key\n[certs] Generating \"front-proxy-client\" certificate and key\n[certs] Generating \"etcd/ca\" certificate and key\n[certs] Generating \"etcd/server\" certificate and key\n[certs] etcd/server serving cert is signed for DNS names [automlgpu4 localhost] and IPs [172.16.2.117 127.0.0.1 ::1]\n[certs] Generating \"etcd/peer\" certificate and key\n[certs] etcd/peer serving cert is signed for DNS names [automlgpu4 localhost] and IPs [172.16.2.117 127.0.0.1 ::1]\n[certs] Generating \"etcd/healthcheck-client\" certificate and key\n[certs] Generating \"apiserver-etcd-client\" certificate and key\n[certs] Generating \"sa\" key and public key\n[kubeconfig] Using kubeconfig folder \"/etc/kubernetes\"\n[kubeconfig] Writing \"admin.conf\" kubeconfig file\n[kubeconfig] Writing \"kubelet.conf\" kubeconfig file\n[kubeconfig] Writing \"controller-manager.conf\" kubeconfig file\n[kubeconfig] Writing \"scheduler.conf\" kubeconfig file\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Starting the kubelet\n[control-plane] Using manifest folder \"/etc/kubernetes/manifests\"\n[control-plane] Creating static Pod manifest for \"kube-apiserver\"\n[control-plane] Creating static Pod manifest for \"kube-controller-manager\"\n[control-plane] Creating static Pod manifest for \"kube-scheduler\"\n[etcd] Creating static Pod manifest for local etcd in \"/etc/kubernetes/manifests\"\n[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory \"/etc/kubernetes/manifests\". This can take up to 4m0s\n[apiclient] All control plane components are healthy after 17.004681 seconds\n[upload-config] Storing the configuration used in ConfigMap \"kubeadm-config\" in the \"kube-system\" Namespace\n[kubelet] Creating a ConfigMap \"kubelet-config-1.19\" in namespace kube-system with the configuration for the kubelets in the cluster\n[upload-certs] Skipping phase. Please see --upload-certs\n[mark-control-plane] Marking the node automlgpu4 as control-plane by adding the label \"node-role.kubernetes.io/master=''\"\n[mark-control-plane] Marking the node automlgpu4 as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]\n[bootstrap-token] Using token: abcdef.0123456789abcdef\n[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes\n[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials\n[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token\n[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster\n[bootstrap-token] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace\n[kubelet-finalize] Updating \"/etc/kubernetes/kubelet.conf\" to point to a rotatable kubelet client certificate and key\n[addons] Applied essential addon: CoreDNS\n[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 172.16.2.117:6443 --token abcdef.0123456789abcdef \\\n    --discovery-token-ca-cert-hash sha256:ede5cb0692ec5bf94eb0b2305ac3bea32e25bc10e87dce5a9c9be25bbcedc9cc \n(base) [root@automlgpu4 k8s]# mkdir -p $HOME/.kube\n(base) [root@automlgpu4 k8s]# sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n(base) [root@automlgpu4 k8s]# sudo chown $(id -u):$(id -g) $HOME/.kube/config\n(base) [root@automlgpu4 k8s]# kubectl get node \nNAME         STATUS     ROLES    AGE   VERSION\nautomlgpu4   NotReady   master   41s   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_core_name/","title":"k8s\u6838\u5fc3\u6982\u5ff5","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_core_name/#_1","title":"\u58f0\u660e\u5f0f\u7ba1\u7406","text":"<ul> <li>\u901a\u8fc7yml\u58f0\u660e\u671f\u671b\u7684\u72b6\u6001\uff0ck8s\u81ea\u52a8\u6839\u636e\u5b9a\u4e49\u7684\u72b6\u6001\u8fdb\u884c\u8c03\u5ea6\uff08\u76f8\u5bf9\u547d\u4ee4\u5f0f\u7ba1\u7406\u800c\u8a00\uff0ck8s\u4e5f\u63d0\u4f9b\u547d\u4ee4\u5f0f\u7ba1\u7406\u7684\u65b9\u5f0f</li> <li>\u58f0\u660e\u5f0f\uff1a<code>kubectl apply -f &lt;directory&gt;</code></li> <li>\u547d\u4ee4\u5f0f\uff1a<code>kubectl run xxx,  kubectl expose...</code></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_core_name/#_2","title":"\u540d\u8bcd\u53ca\u89e3\u91ca","text":"<ul> <li>Master node: \u96c6\u7fa4\u4e3b\u63a7\u8282\u70b9\uff0c\u4e0a\u9762\u8fd0\u884c\u8c03\u5ea6\u5bb9\u5668\uff0c\u7ba1\u7406\u5bb9\u5668\uff1b</li> <li>Worker node:\u5de5\u4f5c\u8282\u70b9\uff0c\u4e0a\u9762\u8fd0\u884c\u5e94\u7528\u7684\u5bb9\u5668\uff1b</li> <li>Pods: \u5bb9\u5668\uff0ck8s\u5bf9\u5bb9\u5668\u8fdb\u884c\u7ba1\u7406\uff0c \u81ea\u52a8\u521b\u5efa\u3001\u9500\u6bc1\u5bb9\u5668\uff1b </li> <li>Service: \u4f7f\u7528\u6807\u7b7e\u9009\u62e9\u7b97\u7b26\uff08selectors) \u6807\u8bc6\u4e00\u7ec4pod,\u5728\u96c6\u7fa4\u5185\u6709\u56fa\u5b9aIP,\u53ef\u4ee5\u7528\u4e8e\u96c6\u7fa4\u5185\u90e8\u5bb9\u5668/\u5e94\u7528\u63d0\u4f9b\u7a33\u5b9a\u7684\u8bbf\u95ee\u5165\u53e3\uff0c\u53ef\u4ee5\u901a\u8fc7service\u540d\u79f0\u8bbf\u95ee\u5230\u670d\u52a1</li> <li>Deployment:\u4e00\u5957\u90e8\u7f72\u5bb9\u5668\u7684\u96c6\u5408\uff1b</li> <li>ReplicationController:\u53ef\u4ee5\u590d\u5236\u7684\u5bb9\u5668\uff0c\u529f\u80fd\u96c6\u6bd4ReplicaSet\u5c11\uff0c\u5df2\u4e0d\u63a8\u8350\u4f7f\u7528\uff1b</li> <li>ReplicaSet:\u53ef\u4ee5\u6269\u5bb9\u3001\u7f29\u5bb9\u7684\u5bb9\u5668\u526f\u672c\u96c6\uff0c\u5728\u5bb9\u5668\u96c6\u4e0d\u9700\u8981\u72b6\u6001\uff0c\u4e5f\u4e0d\u9700\u8981\u88ab\u5176\u4ed6\u5bb9\u5668\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528ReplicaSet.\u5176\u4ed6\u5bb9\u5668\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95eeRS\uff0c \u53ef\u4ee5\u901a\u8fc7service\u6765\u8bbf\u95ee\uff1b</li> <li>StatefulSet:\u6709\u72b6\u6001\u7684\u670d\u52a1\uff0c\u6bd4\u5982zookeeper,\u96c6\u7fa4\u88ab\u5916\u90e8\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u9700\u8981\u6307\u5b9a\u591a\u4e2azookeeper\u670d\u52a1\u7684ip\u6216\u8005hostname.\u7531\u4e8e\u662f\u6709\u72b6\u6001\u7684\uff0c\u6bd4\u59823\u4e2a\u8282\u70b9\u7684zookeeper\uff0c \u4e0d\u8bba\u5982\u4f55\u7f29\u5bb9\uff08\u5305\u62ec\u5b95\u673a\u6062\u590d\uff09\uff0c3\u4e2a\u8282\u70b9\u5bb9\u5668\u540d\u79f0/\u4e3b\u673a\u540d\u603b\u662fzk-0, zk-1, zk-2</li> <li>Ingress: \u5bf9\u5916\u66b4\u9732\u53ef\u4ee5\u8bbf\u95ee\u7684\u5165\u53e3\uff0c\u4e3a\u670d\u52a1\u63d0\u4f9b\u5916\u7f51\uff08\u4ece\u96c6\u7fa4\u5916\uff09\u7684\u8bbf\u95ee\u5165\u53e3\uff1b</li> <li>Namespace:\u8d44\u6e90\u53ef\u4ee5\u653e\u5728namespace\u4e0b\u9762\uff0c \u4e0d\u540cnamespace\u4e4b\u95f4\u76f8\u4e92\u9694\u79bb\uff1b</li> <li>Controller:\u5305\u62ec\u6709\u8282\u70b9\u63a7\u5236\u5668\u3001\u8def\u7531\u63a7\u5236\u5668\u3001\u670d\u52a1\u63a7\u5236\u5668\uff1b</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_dashboard/","title":"k8s\u7684Dashboard\u5b89\u88c5","text":"Bash<pre><code># step1:\nwget https://raw.githubusercontent.com/kubernetes/dashboard/v2.2.0/aio/deploy/recommended.yaml\nvim recommended.yaml\n# \u4fee\u6539Service\u4e3aNodePort\u7c7b\u578b\n---\n......\nkind: Service\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nspec:\n  ports:\n    - port: 443\n      targetPort: 8443\n  selector:\n    k8s-app: kubernetes-dashboard\n  type: NodePort  # \u52a0\u4e0atype=NodePort\u53d8\u6210NodePort\u7c7b\u578b\u7684\u670d\u52a1\n---\n\n# step2:\n# \u521b\u5efa\nkubectl apply -f recommended.yaml \n\n# \u67e5\u770bpod\u7684\u72b6\u6001\nkubectl get pods -n kubernetes-dashboard -l k8s-app=kubernetes-dashboard\n\n# \u67e5\u770bsvc\u5206\u914d\u7684\u7aef\u53e3(note:\u8bbf\u95ee\u65f6\u9700\u8981\u4f7f\u7528https)\nkubectl get svc -n kubernetes-dashboard\n\n# step3:\n# \u521b\u5efa\u4e00\u4e2a\u5177\u6709\u5168\u5c40\u6240\u6709\u6743\u9650\u7684\u7528\u6237\u6765\u767b\u5f55Dashboard\uff1a(dashboard-admin.yaml)\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1beta1\nmetadata:\n  name: admin\n  annotations:\n    rbac.authorization.kubernetes.io/autoupdate: \"true\"\nroleRef:\n  kind: ClusterRole\n  name: cluster-admin\n  apiGroup: rbac.authorization.k8s.io\nsubjects:\n- kind: ServiceAccount\n  name: admin\n  namespace: kubernetes-dashboard\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin\n  namespace: kubernetes-dashboard\n\n---\n# \u521b\u5efa\nkubectl apply -f admin.yaml\n\n# \u67e5\u770bsecret\nkubectl get secret -n kubernetes-dashboard|grep admin-token\n\n# \u4f1a\u751f\u6210\u4e00\u4e32\u5f88\u957f\u7684base64\u540e\u7684\u5b57\u7b26\u4e32\uff08echo &lt;token\u503c&gt; | base64 -d \uff09\nkubectl get secret &lt;secret\u540d\u79f0&gt; -o jsonpath={.data.token} -n kubernetes-dashboard |base64 -d\n\n# \u7528\u4e0a\u9762\u7684 base64 \u89e3\u7801\u540e\u7684\u5b57\u7b26\u4e32\u4f5c\u4e3a token \u767b\u5f55 Dashboard \u5373\u53ef\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/","title":"k8s\u4e2detcd\u6302\u8f7d\u5185\u5b58\u5377\u6b65\u9aa4","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step1-api-server-etcd","title":"STEP1: \u505c\u6389API-server\u548c etcd","text":"Bash<pre><code>systemctl stop kubelet &amp;&amp; systemctl stop containerd\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step2-etcfstab-tmpfs","title":"STEP2: \u4fee\u6539/etc/fstab \u52a0\u4e0atmpfs\u6302\u8f7d\u9879","text":"Bash<pre><code>mkdir /data/etcd-data\nmount -a\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step3","title":"STEP3\uff1a \u62f7\u8d1d\u6570\u636e\u5230\u65b0\u7684\u6587\u4ef6\u5939\u4e0b\uff0c \u7136\u540e\u521b\u5efa\u8f6f\u8fde\u63a5","text":"Bash<pre><code>cp -r /var/lib/etcd/* /data/etcd-data\nrm -rf /var/lib/etcd\nln -s /data/etcd-data /var/lib/etcd\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step4-api-server-etcd","title":"STEP4: \u91cd\u542fAPI-server \u548c etcd \u89c2\u5bdf\u96c6\u7fa4\u662f\u5426\u6b63\u5e38","text":"Bash<pre><code>systemctl stop containerd &amp;&amp; systemctl stop kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_ectd_mount_memo/#step5","title":"STEP5: \u8bbe\u7f6e\u81ea\u52a8\u5907\u4efd\u548c\u6062\u590d","text":"Bash<pre><code>mkdir /data/etcd-data-backup\n\n# \u5907\u4efd\nrsync  -a --delete --recursive --force /data/etcd-data /data/etcd-data-backup\n\n# \u8fd8\u539f\nrsync -a --recursive --force /data/etcd-data-backup /data/etcd-data\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/","title":"\u5b89\u88c5\uff1a","text":"<p>\u5171\u4eab\u6570\u636e\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a/data/k8s/share/</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#k8s-masternfs-server","title":"k8s-master\u8282\u70b9\u5b89\u88c5\uff08nfs-server\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#1","title":"1.\u5173\u95ed\u9632\u706b\u5899","text":"Bash<pre><code>systemctl stop firewalld.service &amp;&amp; systemctl disable firewalld.service\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#2nfs","title":"2.\u5b89\u88c5nfs\u53ca\u4f9d\u8d56","text":"Bash<pre><code> yum -y install nfs-utils rpcbind\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#3","title":"3.\u8bbe\u7f6e\u5171\u4eab\u76ee\u5f55\u6743\u9650","text":"Bash<pre><code>chmod 755 /data/k8s/share/\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#4nfs","title":"4.\u914d\u7f6enfs","text":"<p>\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a/etc/exports</p> Bash<pre><code>$ vi /etc/exports\n/data/k8s/share  *(rw,sync,no_root_squash)\n</code></pre> <ul> <li>\u914d\u7f6e\u53c2\u6570\u8bf4\u660e\uff1a</li> <li>*\uff1a\u8868\u793a\u4efb\u4f55\u4eba\u90fd\u6709\u6743\u9650\u8fde\u63a5\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u7f51\u6bb5\uff0c\u4e00\u4e2a IP\uff0c\u4e5f\u53ef\u4ee5\u662f\u57df\u540d</li> <li>rw\uff1a\u8bfb\u5199\u7684\u6743\u9650</li> <li>sync\uff1a\u8868\u793a\u6587\u4ef6\u540c\u65f6\u5199\u5165\u786c\u76d8\u548c\u5185\u5b58</li> <li>no_root_squash\uff1a\u5f53\u767b\u5f55 NFS \u4e3b\u673a\u4f7f\u7528\u5171\u4eab\u76ee\u5f55\u7684\u4f7f\u7528\u8005\u662f root \u65f6\uff0c\u5176\u6743\u9650\u5c06\u88ab\u8f6c\u6362\u6210\u4e3a\u533f\u540d\u4f7f\u7528\u8005\uff0c\u901a\u5e38\u5b83\u7684 UID \u4e0e GID\uff0c\u90fd\u4f1a\u53d8\u6210 nobody \u8eab\u4efd</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#5nfs-rpcbind","title":"5.\u542f\u52a8nfs\u4f9d\u8d56-rpcbind","text":"Bash<pre><code>systemctl start rpcbind.service &amp;&amp; systemctl enable rpcbind\n\n# \u67e5\u770b\u72b6\u6001\u662f\u5426\u4e3aactive\nsystemctl status rpcbind\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#6nfs","title":"6.\u542f\u52a8nfs","text":"Bash<pre><code>systemctl start nfs.service &amp;&amp; systemctl enable nfs\n\n# \u67e5\u770b\u72b6\u6001\u662f\u5426\u4e3aactive\nsystemctl status nfs\n</code></pre> <ul> <li>\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e0b\u547d\u4ee4\u786e\u8ba4\u662f\u5426\u5b89\u88c5\u542f\u52a8\u6210\u529f Bash<pre><code>$ rpcinfo -p|grep nfs\n    100003    3   tcp   2049  nfs\n    100003    4   tcp   2049  nfs\n    100227    3   tcp   2049  nfs_acl\n    100003    3   udp   2049  nfs\n    100003    4   udp   2049  nfs\n    100227    3   udp   2049  nfs_acl\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#7","title":"7.\u67e5\u770b\u6302\u8f7d\u76ee\u5f55\u6743\u9650","text":"Bash<pre><code>$ cat /var/lib/nfs/etab \n/data/k8s/share *(rw,sync,wdelay,hide,nocrossmnt,secure,no_root_squash,no_all_squash,no_subtree_check,secure_locks,acl,no_pnfs,anonuid=65534,anongid=65534,sec=sys,rw,secure,no_root_squash,no_all_squash)\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#k8s-nodenfs-client","title":"k8s-node\u8282\u70b9\u5b89\u88c5\uff08nfs-client\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#1server","title":"1.\u5173\u95ed\u9632\u706b\u5899\uff08\u540cserver\u7aef\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#2nfsserver","title":"2.\u5b89\u88c5nfs\u53ca\u4f9d\u8d56\uff08\u540cserver\u7aef\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#3nfsserver","title":"3.\u542f\u52a8nfs\u548c\u4f9d\u8d56\uff08\u540cserver\u7aef\uff09","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#4nfs_1","title":"4.\u68c0\u67e5nfs\u6536\u662f\u5426\u6709\u5171\u4eab\u76ee\u5f55","text":"Bash<pre><code>$ showmount -e 172.16.2.117\nExport list for 172.16.2.117:\n/data/k8s/share *\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#5client","title":"5.\u5728client\u65b0\u5efa\u76ee\u5f55","text":"Bash<pre><code>$ mkdir -p /data/kubeadm/data\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#6nfs_1","title":"6.\u5c06nfs\u5171\u4eab\u76ee\u5f55\u6302\u8f7d\u5230\u4e0a\u8ff0\u65b0\u5efa\u76ee\u5f55\u4e2d","text":"Bash<pre><code>$ mount -t nfs 172.16.2.117:/data/k8s/share /data/kubeadm/data\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#7_1","title":"7.\u6d4b\u8bd5","text":"<ul> <li>\u5728client\u7aef\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6</li> <li>\u5728server\u67e5\u770b\u8be5\u6587\u4ef6\u662f\u5426\u5b58\u5728</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#_2","title":"\u4f7f\u7528\uff1a","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#1nfs-client-classyaml","title":"1.\u521b\u5efanfs-client-class.yaml","text":"YAML<pre><code>apiVersion: storage.k8s.io/v1\n kind: StorageClass\n metadata:\n   name: kubeflow-nfs-storage\n   annotations:\n     storageclass.kubernetes.io/is-default-class: \"true\"\n provisioner: fuseim.pri/ifs # or choose another name, must match deployment's env PROVISIONER_NAME'\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#2nfs-client-deploymentyaml","title":"2.\u521b\u5efanfs-client-deployment.yaml","text":"YAML<pre><code>apiVersion: apps/v1\n kind: Deployment\n metadata:\n   name: nfs-client-provisioner\n   labels:\n     app: nfs-client-provisioner\n   namespace: default\n spec:\n   replicas: 1\n   strategy:\n     type: Recreate\n   selector:\n     matchLabels:\n       app: nfs-client-provisioner\n   template:\n     metadata:\n       labels:\n         app: nfs-client-provisioner\n     spec:\n       serviceAccountName: nfs-client-provisioner\n       containers:\n         - name: nfs-client-provisioner\n           image: quay.io/external_storage/nfs-client-provisioner:latest\n           volumeMounts:\n             - name: nfs-client-root\n               mountPath: /persistentvolumes\n           env:\n             - name: PROVISIONER_NAME\n               value: fuseim.pri/ifs\n             - name: NFS_SERVER\n               value: 172.16.2.117\n             - name: NFS_PATH\n               value: /data/k8s/share\n       volumes:\n         - name: nfs-client-root\n           nfs:\n             server: 172.16.2.117\n             path: /data/k8s/share\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#3nfs-client-sayaml","title":"3.\u521b\u5efanfs-client-sa.yaml","text":"YAML<pre><code>apiVersion: v1\n kind: ServiceAccount\n metadata:\n   name: nfs-client-provisioner\n\n ---\n kind: ClusterRole\n apiVersion: rbac.authorization.k8s.io/v1\n metadata:\n   name: nfs-client-provisioner-runner\n rules:\n   - apiGroups: [\"\"]\n     resources: [\"persistentvolumes\"]\n     verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"]\n   - apiGroups: [\"\"]\n     resources: [\"persistentvolumeclaims\"]\n     verbs: [\"get\", \"list\", \"watch\", \"update\"]\n   - apiGroups: [\"storage.k8s.io\"]\n     resources: [\"storageclasses\"]\n     verbs: [\"get\", \"list\", \"watch\"]\n   - apiGroups: [\"\"]\n     resources: [\"events\"]\n     verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n   - apiGroups: [\"\"]\n     resources: [\"endpoints\"]\n     verbs: [\"create\", \"delete\", \"get\", \"list\", \"watch\", \"patch\", \"update\"]\n\n ---\n kind: ClusterRoleBinding\n apiVersion: rbac.authorization.k8s.io/v1\n metadata:\n   name: run-nfs-client-provisioner\n subjects:\n   - kind: ServiceAccount\n     name: nfs-client-provisioner\n     namespace: default\n roleRef:\n   kind: ClusterRole\n   name: nfs-client-provisioner-runner\n   apiGroup: rbac.authorization.k8s.io\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#4","title":"4.\u6267\u884c\uff1a","text":"Bash<pre><code>kubectl apply -f nfs-client-class.yaml\nkubectl apply -f nfs-client-deployment.yaml\nkubectl apply -f nfs-client-sa.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_storageclass_nfs/#5","title":"5.\u67e5\u770b\uff1a","text":"Bash<pre><code>$ kubectl get pods \nNAME                                      READY   STATUS             RESTARTS   AGE\nnfs-client-provisioner-5bb4f74bfb-v9sqz   1/1     running            13         5d20h\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/","title":"k8s\u5b9e\u7528\u5c0f\u6280\u5de7","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#1yaml","title":"1.\u5feb\u901f\u7f16\u5199yaml\u6587\u4ef6","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#step1yaml","title":"STEP1:\u4f7f\u7528\u547d\u4ee4\u751f\u6210yaml\u6587\u4ef6","text":"Bash<pre><code># kubectl create \nkubectl create deployment web --image=nginx -o yaml --dry-run\n# -o \u4f7f\u7528yaml\u683c\u5f0f\u5c55\u793a\n# -dry-run \u5c1d\u8bd5\u8fd0\u884c\uff0c\u5e76\u4e0d\u4f1a\u771f\u6b63\u8fd0\u884c\n# \u4fdd\u5b58\u81f3myweb.yaml\n\nkubectl create deployment web --image=nginx -o yaml --dry-run &gt; myweb.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#step2-yaml","title":"STEP2:\u4f7f\u7528\u547d\u4ee4\u5bfc\u51fa yaml \u6587\u4ef6","text":"Bash<pre><code>kubectl get\nkubectl get deploy # \u67e5\u770b\u90e8\u7f72\nkubectl get deploy nginx -o yaml --export &gt; myweb.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#_1","title":"k8s\u5b9e\u7528\u5c0f\u6280\u5de7","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#_2","title":"k8s\u5b9e\u7528\u5c0f\u6280\u5de7","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#2composek8s","title":"2.\u628acompose\u6587\u4ef6\u8f6c\u6362\u6210k8s\u58f0\u660e\u5f0f\u914d\u7f6e\u6587\u4ef6\u3002","text":"<ul> <li> <p>\u4e0b\u8f7d\u94fe\u63a5\uff1ahttps://github.com/kubernetes/kompose/releases/ Bash<pre><code># \u4e0b\u8f7d\u5b89\u88c5\ncurl -L https://github.com/kubernetes/kompose/releases/download/v1.22.0/kompose-darwin-amd64 -o kompose\n\nchmod +x compose &amp;&amp; sudo mv kompose /usr/local/bin/\n\n# \u4f7f\u7528\n#step1:\nkompose convert     \n\nstep2:\u8c03\u6574\u8f6c\u6362\u540e\u7684\u6587\u4ef6\u5185\u5bb9\n\nstep3:kubectl apply -f k8s  # \u5b89\u88c5\u5e94\u7528\u5230k8s\u96c6\u7fa4\n</code></pre></p> </li> <li> <p>\u6548\u679c Bash<pre><code>(base) \u279c  bluewhale_docker ls\nbk-docker-compose.yml bluewhale             compose               docker-compose.yml    frontend              mysql\n(base) \u279c  bluewhale_docker kompose convert\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/compose/mysql/init/init.sql\" isn't supported - ignoring path on the host\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/compose/mysql/conf/my.cnf\" isn't supported - ignoring path on the host\nINFO Network db_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nINFO Network web_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/bluewhale\" isn't supported - ignoring path on the host\nWARN Volume mount on the host \"/Users/roninssw/ssWang/codehub/hccodes/bluewhale_docker/compose/bw_uwsgi\" isn't supported - ignoring path on the host\nINFO Network web_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nINFO Network db_network is detected at Source, shall be converted to equivalent NetworkPolicy at Destination\nINFO Kubernetes file \"mysqldb-service.yaml\" created\nINFO Kubernetes file \"nginx-service.yaml\" created\nINFO Kubernetes file \"website-service.yaml\" created\nINFO Kubernetes file \"mysqldb-pod.yaml\" created\nINFO Kubernetes file \"mysqldb-claim0-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"bluewhale-db-vol-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"mysqldb-claim2-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"db_network-networkpolicy.yaml\" created\nINFO Kubernetes file \"nginx-pod.yaml\" created\nINFO Kubernetes file \"static-volume-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"web_network-networkpolicy.yaml\" created\nINFO Kubernetes file \"website-pod.yaml\" created\nINFO Kubernetes file \"website-claim0-persistentvolumeclaim.yaml\" created\nINFO Kubernetes file \"website-claim2-persistentvolumeclaim.yaml\" created\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#3k8sdjango","title":"3.\u4f7f\u7528k8s\u90e8\u7f72django\u5e94\u7528\u7684\u6d41\u7a0b\uff1a","text":"<ol> <li>\u642d\u5efak8s\u96c6\u7fa4\u73af\u5883</li> <li>\u914d\u7f6ekube/config\u6587\u4ef6\uff08<code>vim ~/.kube/config</code>\uff09   </li> <li>\u914d\u7f6e\u5b8c\u6210\u4ee5\u540e\u53ef\u4ee5\u901a\u8fc7<code>kubectl</code> \u548c\u96c6\u7fa4\u8fdb\u884c\u4ea4\u4e92</li> <li>\u4f7f\u7528Dockerfile\u6587\u4ef6\u7f16\u5199Django\u670d\u52a1\u5e76\u751f\u6210\u955c\u50cf\uff0c\u6216\u8005\u4f7f\u7528docker-compose\u751f\u6210\uff0c</li> <li>\u5982\u679c\u4f7f\u7528docker-compose\u751f\u6210\u7684\u955c\u50cf\uff0c\u53ef\u4ee5\u4f7f\u7528kompose \u811a\u672c\u5de5\u5177\u5bf9docker-compose\u6587\u4ef6\u8f6c\u6210k8s\u7684yaml\u6587\u4ef6</li> <li>\u4fee\u6539\u751f\u6210\u7684yaml\u6587\u4ef6\uff0c</li> <li>\u4f7f\u7528<code>kubectl apply -f \u6587\u4ef6/\u6587\u4ef6\u5939</code> \uff0c\u8fd0\u884c \u670d\u52a1\u7684\u5bb9\u5668\u0153</li> </ol>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/k8s_usage_skills/#4-djangok8s","title":"4. \u90e8\u7f72django\u670d\u52a1\u5230\u963f\u91cc\u4e91\u7684k8s\u96c6\u7fa4\u7684\u6d41\u7a0b","text":"<ul> <li>step1\uff1a\u521b\u5efakubernetes\u96c6\u7fa4\uff0c\u521b\u5efa\u955c\u50cf\u4ed3\u5e93</li> <li>step2: \u914d\u7f6e\u672c\u5730\u7684kubeconfig</li> <li>step3: Docker login \u5230\u955c\u50cf\u4ed3\u5e93</li> <li>step4: Docker build &amp; docker push \u63a8\u9001\u955c\u50cf\u5230\u955c\u50cf\u4ed3\u5e93</li> <li>step5:  k8s \u90e8\u7f72\u5230\u96c6\u7fa4\uff1a<code>kubectl apply -f k8s</code></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/","title":"k8s\u5b9e\u7528\u5de5\u5177\u4e4bKtConnect","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#_1","title":"\u6982\u8ff0","text":"<ul> <li>\u5b98\u7f51\u94fe\u63a5</li> </ul> <p>KtConnect \u662f\u963f\u91cc\u5f00\u6e90\u7684\u4e00\u6b3e\u4e91\u539f\u751f\u534f\u540c\u5f00\u53d1\u6d4b\u8bd5\u89e3\u51b3\u65b9\u6848,\u65e8\u5728\u63d0\u5347\u5f00\u53d1\u8005\u5728Kubernetes \u573a\u666f\u4e0b\u7684\u672c\u5730\u5f00\u53d1\u6d4b\u8bd5\u6548\u7387,\u5b83\u901a\u8fc7\u5efa\u7acb\u672c\u5730\u5230K8S\u96c6\u7fa4\u7684\u53cc\u5411\u901a\u9053,\u5141\u8bb8\u5f00\u53d1\u8005\u5728\u672c\u5730\u76f4\u63a5\u8bbf\u95eeK8S\u96c6\u7fa4\u670d\u52a1,\u6216\u5c06K8S\u96c6\u7fa4\u7684\u6d41\u91cf\u8f6c\u53d1\u5230\u672c\u5730.\u7b80\u8a00\u4e4b,KtConnect\u662f\u9762\u5411K8S\u7684\u672c\u5730\u5f00\u53d1\u8005\u8f85\u52a9\u5de5\u5177.</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#_2","title":"\u5b89\u88c5","text":"<ul> <li>\u4e0b\u8f7d\u94fe\u63a5</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#1kubectl-client","title":"1\u3001\u4e0b\u8f7dkubectl client \u547d\u4ee4\u884c\u5de5\u5177","text":"<ul> <li>\u94fe\u63a5</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#2","title":"2\u3001\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u5e76\u9a8c\u8bc1","text":"Bash<pre><code>kubectl version --client\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4]\u276f kubectl version --client\nClient Version: v1.29.2\nKustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#3k8sconfig","title":"3\u3001\u914d\u7f6eK8S\u96c6\u7fa4\u7684config","text":"<ul> <li>\u5c06k8s\u96c6\u7fa4\u7684config\u914d\u7f6e\u6587\u4ef6\u62f7\u8d1d\u5230<code>C:\\Users\\xxxx\\.kube</code> \u6587\u4ef6\u5939\u4e2d</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#4k8s","title":"4\u3001\u9a8c\u8bc1\u662f\u5426\u80fd\u8fde\u63a5\u5230k8s\u96c6\u7fa4","text":"Bash<pre><code>kubectl cluster-info\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4] \u276f kubectl cluster-info\nKubernetes control plane is running at https://172.x.x.x:6443\nCoreDNS is running at https://172.16.2.129:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#5ktconnect","title":"5\u3001\u4e0b\u8f7dktconnect\u5e76\u914d\u7f6e","text":"<ul> <li>\u4e0b\u8f7d kt connect \u5e76\u5c06\u5176\u653e\u5230\u548ckubectl client \u7684\u540c\u4e00\u4e2a bin\u76ee\u5f55\u4e0b</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#6","title":"6\u3001\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f","text":"Bash<pre><code>ktctl -v\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4] \u276f ktctl -v\nktctl version 0.3.7\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/ktconnect_usage/#7","title":"7\u3001\u542f\u52a8","text":"<ul> <li>\u4f7f\u7528\u7ba1\u7406\u5458\u542f\u52a8Powershell,\u5e76\u542f\u52a8kt-connect</li> </ul> Bash<pre><code>ktctl connect -n &lt;namespace name&gt; --excludeIps 172.16.2.0/24   # &lt;\u7f51\u5173\u5730\u5740\u9700\u8981\u66f4\u6362\u6210\u4e3a\u81ea\u5df1\u7684\n\n############PS#####################\n\ue62a JHC142: C:\\ [\ue235 base 3.12.4] \u276f ktctl connect -n bluewhale-platform --excludeIps 172.16.2.0/24\n4:15PM INF Using cluster context kubernetes-admin@kubernetes (kubernetes)\n4:15PM INF KtConnect 0.3.7 start at 22548 (windows amd64)\n4:15PM INF Fetching cluster time ...\n4:15PM INF Using tun2socks mode\n4:15PM INF Successful create config map kt-connect-shadow-odtnt\n4:15PM INF Deploying shadow pod kt-connect-shadow-odtnt in namespace bluewhale-platform\n4:15PM INF Waiting for pod kt-connect-shadow-odtnt ...\n4:15PM INF Pod kt-connect-shadow-odtnt is ready\n4:15PM INF Port forward local:10441 -&gt; pod kt-connect-shadow-odtnt:22 established\n4:15PM INF Socks proxy established\n2024/08/23 16:15:17 Using existing driver 0.14\n2024/08/23 16:15:17 Creating adapter\n4:15PM INF Tun device KtConnectTunnel is ready\n2024/08/23 16:15:17 Removed orphaned adapter \"KtConnectTunnel 1\"\n4:15PM INF Adding route to 10.96.0.0/16\n4:15PM INF Adding route to 100.90.254.0/24\n4:15PM INF Adding route to 100.82.112.0/24\n4:15PM INF Adding route to 100.85.170.0/24\n4:15PM INF Adding route to 100.103.44.0/24\n4:15PM INF Route to tun device completed\n4:15PM INF Setting up dns in local mode\n4:15PM INF Port forward local:45198 -&gt; pod kt-connect-shadow-odtnt:53 established\n4:15PM INF Setup local DNS with upstream [tcp:127.0.0.1:45198 udp:172.16.1.117:53]\n4:15PM INF Creating udp dns on port 53\n4:15PM INF ---------------------------------------------------------------\n4:15PM INF  All looks good, now you can access to resources in the kubernetes cluster\n4:15PM INF ---------------------------------------------------------------\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/","title":"kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.19.4)","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step1","title":"STEP1: \u524d\u7f6e\u5de5\u4f5c(\u51c6\u5907/\u68c0\u67e5\u73af\u5883)","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1","title":"1.\u96c6\u7fa4\u670d\u52a1\u5668\u8981\u6c42\uff1a","text":"<ul> <li>\u6bcf\u53f0\u673a\u5668 2 GB \u6216\u66f4\u591a\u7684\u5185\u5b58 (\u5982\u679c\u5c11\u4e8e\u8fd9\u4e2a\u6570\u5b57\u5c06\u4f1a\u5f71\u54cd\u60a8\u5e94\u7528\u7684\u8fd0\u884c\u5185\u5b58)</li> <li>2 CPU \u6216\u66f4\u591a</li> <li>\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u673a\u5668\u7684\u7f51\u7edc\u4e92\u901a</li> <li>\u53ef\u4ee5\u8bbf\u95ee\u5916\u7f51</li> <li>\u7981\u6b62 swap \u5206\u533a <p>eg:</p> </li> </ul> IP \u4e3b\u673a\u540d \u7cfb\u7edf\u7248\u672c CPU \u5185\u5b58 \u5907\u6ce8 192.168.33.131 master1 centos8.2 2G 2 <p>\u6b64\u914d\u7f6e\u4e3a\u6700\u4f4e\u8981\u6c42 | | 192.168.33.132 | node1 | centos8.2 | 2G | 2 |  | | 192.168.33.133 | node2 | centos8.2 | 2G | 2 |  |</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2ipdnshosts","title":"2.\u8bbe\u7f6e\u670d\u52a1\u5668\u9759\u6001IP/DNS/hosts\u4e3b\u673a\u540d","text":"<p>eg\uff1a</p> Bash<pre><code># \u67e5\u770b\u7f51\u5361\u540d\u5b57\nnmcli d\n\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0cxxx\u4e3a\u5bf9\u5e94\u7f51\u5361\u7684\u540d\u5b57\nvim /etc/sysconfig/network-scripts/ifcfg-xxx   \n\n# \u4fee\u6539\u5e76\u4fdd\u5b58\u7f51\u5361\u4fe1\u606f\uff08\u4fee\u6539demo\u5982\u4e0b\uff1a\uff09\nTYPE=\"Ethernet\"\nPROXY_METHOD=\"none\"\nBROWSER_ONLY=\"no\"\nBOOTPROTO=\"static\" #\u542f\u7528\u9759\u6001IP\u5730\u5740\nDEFROUTE=\"yes\"\nIPV4_FAILURE_FATAL=\"no\"\nIPV6INIT=\"yes\"\nIPV6_AUTOCONF=\"yes\"\nIPV6_DEFROUTE=\"yes\"\nIPV6_FAILURE_FATAL=\"no\"\nIPV6_ADDR_GEN_MODE=\"stable-privacy\"\nNAME=\"ens33\"\nUUID=\"5e51c653-26b7-4e87-bbe6-4a06df6ff1d4\"\nDEVICE=\"ens33\"\nONBOOT=\"yes\"\nIPADDR=\"192.168.33.132\" #\u8bbe\u7f6eIP\u5730\u5740\nNETMASK=\"255.255.255.0\"  #\u8bbe\u7f6e\u5b50\u7f51\u63a9\u7801\nGATEWAY=\"192.168.189.2\"  #\u8bbe\u7f6e\u7f51\u5173\nDNS1=\"8.8.8.8\"           #DNS\nDNS2=\"114.114.114.114\"\n\n# \u4fdd\u5b58\u9000\u51fa\u5e76\u91cd\u542f\u7f51\u5361 xxx\u4e3a\u7f51\u5361\u540d\nifup xxx\n\uff08eg: ifup ens33\uff09\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3hostname","title":"3.\u8bbe\u7f6e\u4e3b\u673a\u540d\uff08hostname\uff09","text":"Bash<pre><code># xxx\u4e3a\u4e3b\u673a\u540d \nhostnamectl set-hostname xxx \n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#4hosts","title":"4.\u67e5\u770b\u6216\u8bbe\u7f6ehosts","text":"<ul> <li>\u8282\u70b9\u7684 hostname \u5fc5\u987b\u4f7f\u7528\u6807\u51c6\u7684 DNS \u547d\u540d\uff0c\u53e6\u5916\u5343\u4e07\u4e0d\u7528\u4ec0\u4e48\u9ed8\u8ba4\u7684\u00a0<code>localhost</code>\u00a0\u7684 hostname\uff0c\u4f1a\u5bfc\u81f4\u5404\u79cd\u9519\u8bef\u51fa\u73b0\u7684\u3002\u5728 Kubernetes \u9879\u76ee\u91cc\uff0c\u673a\u5668\u7684\u540d\u5b57\u4ee5\u53ca\u4e00\u5207\u5b58\u50a8\u5728 Etcd \u4e2d\u7684 API \u5bf9\u8c61\uff0c\u90fd\u5fc5\u987b\u4f7f\u7528\u6807\u51c6\u7684 DNS \u547d\u540d\uff08RFC 1123\uff09\u3002\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u00a0<code>hostnamectl set-hostname ydzs-node1</code>\u00a0\u6765\u4fee\u6539 hostname\u3002 Bash<pre><code>vim /etc/hosts \u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\n192.168.33.131 master1\n192.168.33.132 node1\n192.168.33.133 node2\n\n\u6216\ncat &gt;&gt; /etc/hosts &lt;&lt; EOF\n192.168.33.131 master1\n192.168.33.132 node1\n192.168.33.133 node2\nEOF\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#5","title":"5.\u7981\u7528\u9632\u706b\u5899\uff1a","text":"Bash<pre><code>systemctl stop firewalld &amp;&amp; systemctl disable firewalld\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#6swap","title":"6.\u7981\u7528swap\uff08\u4ea4\u6362\u5206\u533a\uff09","text":"Bash<pre><code>swapoff -a  &amp;&amp; sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n\n\n# \u5907\u6ce8\u53c2\u8003\uff08\u901a\u5e38\u4ec5\u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u5373\u53ef\uff09\uff1a\n# \u5173\u95edSwap\uff0c\u673a\u5668\u91cd\u542f\u540e\u4e0d\u751f\u6548\nswapoff -a\n\n# \u4fee\u6539/etc/fstab\u6c38\u4e45\u5173\u95edSwap\ncp -p /etc/fstab /etc/fstab.bak$(date '+%Y%m%d%H%M%S')\n\n# CentOS\nsed -i \"s/\\/dev\\/mapper\\/centos-swap/\\#\\/dev\\/mapper\\/centos-swap/g\" /etc/fstab\n\n# \u4fee\u6539\u540e\u91cd\u65b0\u6302\u8f7d\u5168\u90e8\u6302\u8f7d\u70b9\nmount -a\n\n# \u67e5\u770bSwap\nfree -m\ncat /proc/swaps\n\n# \u6216\nsed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#7selinux","title":"7.\u7981\u7528selinux","text":"Bash<pre><code>setenforce 0    # \u4e34\u65f6\nsed -i \"s/^SELINUX=enforcing/SELINUX=disabled/g\" /etc/sysconfig/selinux\nsed -i \"s/^SELINUX=enforcing/SELINUX=disabled/g\" /etc/selinux/config\nsed -i \"s/^SELINUX=permissive/SELINUX=disabled/g\" /etc/sysconfig/selinux\nsed -i \"s/^SELINUX=permissive/SELINUX=disabled/g\" /etc/selinux/config\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#8br_netfilter","title":"8.\u52a0\u8f7dbr_netfilter\u6a21\u5757","text":"<ul> <li>\u7531\u4e8e\u5f00\u542f\u5185\u6838 ipv4 \u8f6c\u53d1\u9700\u8981\u52a0\u8f7d br_netfilter \u6a21\u5757 Bash<pre><code> modprobe br_netfilter\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#9ipv4iptables","title":"9.\u5c06\u6865\u63a5\u7684IPv4\u6d41\u91cf\u4f20\u9012\u5230iptables\u7684\u94fe","text":"Bash<pre><code>cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\nEOF\n\n# \u91cd\u542f\u751f\u6548\nsysctl --system \n\u6216\nsysctl -p /etc/sysctl.d/k8s.conf\n</code></pre> <p>Explain: bridge-nf \u4f7f\u5f97 netfilter \u53ef\u4ee5\u5bf9 Linux \u7f51\u6865\u4e0a\u7684 IPv4/ARP/IPv6 \u5305\u8fc7\u6ee4\u3002\u6bd4\u5982\uff0c\u8bbe\u7f6e<code>net.bridge.bridge-nf-call-iptables\uff1d1</code>\u540e\uff0c\u4e8c\u5c42\u7684\u7f51\u6865\u5728\u8f6c\u53d1\u5305\u65f6\u4e5f\u4f1a\u88ab iptables\u7684 FORWARD \u89c4\u5219\u6240\u8fc7\u6ee4\u3002\u5e38\u7528\u7684\u9009\u9879\u5305\u62ec\uff1a    - net.bridge.bridge-nf-call-arptables\uff1a\u662f\u5426\u5728 arptables \u7684 FORWARD \u4e2d\u8fc7\u6ee4\u7f51\u6865\u7684 ARP \u5305    - net.bridge.bridge-nf-call-ip6tables\uff1a\u662f\u5426\u5728 ip6tables \u94fe\u4e2d\u8fc7\u6ee4 IPv6 \u5305    - net.bridge.bridge-nf-call-iptables\uff1a\u662f\u5426\u5728 iptables \u94fe\u4e2d\u8fc7\u6ee4 IPv4 \u5305    - net.bridge.bridge-nf-filter-vlan-tagged\uff1a\u662f\u5426\u5728 iptables/arptables \u4e2d\u8fc7\u6ee4\u6253\u4e86 vlan \u6807\u7b7e\u7684\u5305\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#10-ipvs","title":"10.\u5b89\u88c5 ipvs\uff1a","text":"<ul> <li> <p>\u4fdd\u8bc1\u5728\u8282\u70b9\u91cd\u542f\u540e\u80fd\u81ea\u52a8\u52a0\u8f7d\u6240\u9700\u6a21\u5757\u3002\u4f7f\u7528<code>lsmod | grep -e ip_vs -e nf_conntrack_ipv4</code>\u547d\u4ee4\u67e5\u770b\u662f\u5426\u5df2\u7ecf\u6b63\u786e\u52a0\u8f7d\u6240\u9700\u7684\u5185\u6838\u6a21\u5757 Bash<pre><code>cat &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;EOF\n#!/bin/bash\nmodprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack_ipv4\nEOF\n\nchmod 755 /etc/sysconfig/modules/ipvs.modules &amp;&amp; bash /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4\n</code></pre></p> </li> <li> <p>\u63a5\u4e0b\u6765\u8fd8\u9700\u8981\u786e\u4fdd\u5404\u4e2a\u8282\u70b9\u4e0a\u5df2\u7ecf\u5b89\u88c5\u4e86 ipset \u8f6f\u4ef6\u5305\uff1a Bash<pre><code>yum install ipset\n</code></pre></p> </li> <li> <p>\u4e3a\u4e86\u4fbf\u4e8e\u67e5\u770b ipvs \u7684\u4ee3\u7406\u89c4\u5219\uff0c\u6700\u597d\u5b89\u88c5\u4e00\u4e0b\u7ba1\u7406\u5de5\u5177 ipvsadm\uff1a Bash<pre><code>yum install ipvsadm -y\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#11","title":"11.\u540c\u6b65\u670d\u52a1\u5668\u65f6\u95f4","text":"Bash<pre><code>#yum\u548cdnf\u90fd\u53ef\u4ee5\u5b89\u88c5\uff0c\u63a8\u8350\u7528dnf\nyum install chrony -y\nsystemctl enable chronyd &amp;&amp; systemctl start chronyd\n\n#\u5907\u4efd\u914d\u7f6e\ncp /etc/chrony.conf  /etc/chrony.conf.orig\n#\u6ce8\u89e3\u6389pool\nsed -i '/^pool/s/^/#/' /etc/chrony.conf\ngrep '#pool' /etc/chrony.conf\nsed -i '/#pool/a\\server cn.pool.ntp.org iburst' /etc/chrony.conf\nsed -i '/#pool/a\\server ntp.ntsc.ac.cn iburst' /etc/chrony.conf\nsed -i '/#pool/a\\server ntp1.aliyun.com iburst' /etc/chrony.conf\ngrep -A 3 '#pool' /etc/chrony.conf\n\n# \u91cd\u542f\nsystemctl restart chronyd.service\n\nchronyc sources\n# \u8f93\u51fa\u5982\u4e0b\u5185\u5bb9\n210 Number of sources = 4\nMS Name/IP address         Stratum Poll Reach LastRx Last sample               \n===============================================================================\n^- 0.cl.ntp.edgeuno.com          3   6     7     1  -3631us[+4657us] +/-  286ms\n^? ntp8.flashdance.cx            2   6     5     1  -6585us[+1703us] +/-  172ms\n^* time.neu.edu.cn               1   6     7     1   -104us[+8184us] +/-   29ms\n^+ ntp6.flashdance.cx            2   6     7     0    -16ms[  -16ms] +/-  188ms\n(base) [root@automlgpu3 ~]# date\nWed Jun 30 13:53:22 CST 2021\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#12","title":"12.\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6","text":"Bash<pre><code>yum install -y vim  lrzsz wget curl man tree rsync gcc gcc-c++ cmake telnet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step2docker","title":"STEP2:\u5b89\u88c5\u4f9d\u8d56\u2014\u2014Docker","text":"<p>\u8be6\u60c5\u67e5\u9605\uff1a\u3010docker-\u5b89\u88c5-\u5378\u8f7d\u6307\u5357\u3011</p> <ul> <li>Note:</li> <li>\u7531\u4e8e\u9ed8\u8ba4\u60c5\u51b5\u4e0b kubelet \u4f7f\u7528\u7684 cgroupdriver \u662f systemd\uff0c\u6240\u4ee5\u9700\u8981\u4fdd\u6301 docker \u548ckubelet \u7684 cgroupdriver \u4e00\u81f4\uff0c\u6211\u4eec\u8fd9\u91cc\u4fee\u6539 docker \u7684 cgroupdriver=systemd\u3002\u5982\u679c\u4e0d\u4fee\u6539 docker \u5219\u9700\u8981\u4fee\u6539 kubelet \u7684\u542f\u52a8\u914d\u7f6e\uff0c\u9700\u8981\u4fdd\u8bc1\u4e24\u8005\u4e00\u81f4\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step3kubeadmkubeletkubectl","title":"STEP3:\u5b89\u88c5kubeadm/kubelet/kubectl","text":"<p>Note:  - \u6267\u884c\u6b64\u6b65\u9aa4\u524d\u786e\u4fddSTEP1\u548cSTEP2\u90fd\u6210\u529f\u6267\u884c - \u4e0b\u5217\u8fc7\u7a0b\u4f7f\u7528\u6267\u884cyum\u6e90\u7684\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5 - \u6b64\u6b65\u9aa4\u6240\u6709\u7684\u7ed3\u70b9\u90fd\u9700\u8981\u6267\u884c</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1yum","title":"1.\u8bbe\u7f6eyum\u6e90","text":"<ul> <li> <p>\u80fd\u4f7f\u7528\u79d1\u5b66\u4e0a\u7f51\u8bbe\u7f6e\u6e90\u7684\u65b9\u5f0f Bash<pre><code>cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg\n        https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg\nEOF\n</code></pre></p> </li> <li> <p>\u4e0d\u80fd\u79d1\u5b66\u4e0a\u7f51\u8bbe\u7f6e\u6e90\u7684\u65b9\u5f0f Bash<pre><code>cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\n        http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n</code></pre></p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2yum","title":"2.\u91cd\u65b0\u6784\u5efayum\u7f13\u5b58","text":"Bash<pre><code>yum -y install epel-release\nyum clean all\nyum makecache\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3kubeadmkubeletkubectl","title":"3.\u5b89\u88c5kubeadm/kubelet/kubectl","text":"Bash<pre><code>yum -y install kubelet-1.19.4 kubeadm-1.19.4 kubectl-1.19.4\n\n# \u67e5\u770b k8s \u7684\u7248\u672c\nkubelet --version\n\n# \u67e5\u770b kubeadm \u7684\u7248\u672c\nkubeadm version\n\n# \u67e5\u770b kubectl \u7248\u672c\nkubectl version --client\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#4kubelet","title":"4.\u8bbe\u7f6ekubelet\u670d\u52a1\u5f00\u673a\u542f\u52a8","text":"Bash<pre><code>systemctl enable kubelet &amp;&amp; systemctl start kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step4","title":"STEP4: \u521d\u59cb\u5316\u96c6\u7fa4","text":"<p>Note: master\u7ed3\u70b9\u914d\u7f6ekubeadm \u521d\u59cb\u5316\u6587\u4ef6 - \u6267\u884c\u7684\u521d\u59cb\u5316\u7684\u65b9\u5f0f\u6709\u591a\u79cd    - \u914d\u7f6eyaml\u7684\u65b9\u5f0f    - \u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u914d\u7f6e\u53c2\u6570\u65b9\u5f0f</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#yaml","title":"\u65b9\u5f0f\u4e00\uff1a\u914d\u7f6eyaml\u7684\u65b9\u5f0f","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1_1","title":"1.\u5bfc\u51fa\u9ed8\u8ba4\u7684\u521d\u59cb\u5316\u914d\u7f6e\uff1a","text":"Bash<pre><code>$ kubeadm config print init-defaults &gt; kubeadm.yaml\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2","title":"2.\u6839\u636e\u9700\u6c42\u4fee\u6539\u914d\u7f6e","text":"<ul> <li>kube-proxy \u7684\u6a21\u5f0f\u4e3a ipvs</li> <li>\u5b89\u88c5 flannel \u7f51\u7edc\u63d2\u4ef6,\u9700\u8981\u5c06 networking.podSubnet \u8bbe\u7f6e\u4e3a<code>10.244.0.0/16</code>\uff1a</li> </ul> YAML<pre><code>apiVersion: kubeadm.k8s.io/v1beta2\nbootstrapTokens:\n- groups:\n  - system:bootstrappers:kubeadm:default-node-token\n  token: abcdef.0123456789abcdef\n  ttl: 24h0m0s\n  usages:\n  - signing\n  - authentication\nkind: InitConfiguration\nlocalAPIEndpoint:\n  advertiseAddress: 192.168.33.131  # apiserver \u8282\u70b9\u5185\u7f51IP\n  bindPort: 6443\nnodeRegistration:\n  criSocket: /var/run/dockershim.sock\n  name: ydzs-master  # \u9ed8\u8ba4\u8bfb\u53d6\u5f53\u524dmaster\u8282\u70b9\u7684hostname\n  taints:\n  - effect: NoSchedule\n    key: node-role.kubernetes.io/master\n---\napiServer:\n  timeoutForControlPlane: 4m0s\napiVersion: kubeadm.k8s.io/v1beta2\ncertificatesDir: /etc/kubernetes/pki\nclusterName: kubernetes\ncontrollerManager: {}\ndns:\n  type: CoreDNS\netcd:\n  local:\n    dataDir: /var/lib/etcd\nimageRepository: registry.aliyuncs.com/google_containers  # \u4fee\u6539\u6210\u963f\u91cc\u4e91\u955c\u50cf\u6e90\nkind: ClusterConfiguration\nkubernetesVersion: v1.16.2\nnetworking:\n  dnsDomain: cluster.local\n  podSubnet: 10.244.0.0/16  # Pod \u7f51\u6bb5\uff0cflannel\u63d2\u4ef6\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u7f51\u6bb5\n  serviceSubnet: 10.96.0.0/12\nscheduler: {}\n---\napiVersion: kubeproxy.config.k8s.io/v1alpha1\nkind: KubeProxyConfiguration\nmode: ipvs  # kube-proxy \u6a21\u5f0f\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3","title":"3.\u6267\u884c\u521d\u59cb\u5316","text":"Bash<pre><code>kubeadm init --config kubeadm.yaml\n\n# \u6267\u884c\u6210\u529f\u4f1a\u663e\u793a\u5982\u4e0b\u5185\u5bb9\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.33.131:6443 --token j7t5rh.7ao1kxy4ngj3ua2u \\\n    --discovery-token-ca-cert-hash sha256:22a3006ef3935419f13f3da59592f2450da4fd33035f81bd0d8048efd0cb38aa \n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_1","title":"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528\u547d\u4ee4\u884c\u6307\u5b9a\u914d\u7f6e\u53c2\u6570\u65b9\u5f0f","text":"Bash<pre><code>kubeadm init \\\n--apiserver-advertise-address=192.168.33.131 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.18.2 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16 \n</code></pre> <ul> <li>\u53c2\u6570\u8bf4\u660e\uff1a Bash<pre><code>--apiserver-advertise-address\uff1a\u672c\u673aIP\uff08\u4e5f\u662f Master\u7684IP\uff09\uff0c\u4f7f\u7528\u5185\u7f51IP\n--image-repository registry.aliyuncs.com/google_containers \uff1a\u62c9\u53d6\u955c\u50cf\u7684\u5730\u5740\uff0c\u8fd9\u91cc\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u955c\u50cf\u4ed3\u5e93\n--kubernetes-version\uff1a k8s \u7248\u672c\u53f7\n--service-cidr\uff1a\u66b4\u9732\u670d\u52a1\u7684IP\u7f51\u6bb5\uff0cIP\u4e0d\u4e0e\u73b0\u6709\u7684\u51b2\u7a81\u5c31\u53ef\u4ee5\n--pod-network-cidr\uff1a Pod\u7684IP\u7f51\u6bb5\uff0cIP\u4e0d\u4e0e\u73b0\u6709\u7684\u51b2\u7a81\u5c31\u53ef\u4ee5\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#kubeconfig","title":"\u62f7\u8d1d kubeconfig \u6587\u4ef6","text":"Bash<pre><code>$ mkdir -p $HOME/.kube\n$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n$ sudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_2","title":"\u67e5\u770b\u8282\u70b9\u4fe1\u606f","text":"<ul> <li>\u72b6\u6001\u4e3aNoteReady\u7684\u539f\u56e0\u662f\u6ca1\u6709\u5b89\u88c5\u7f51\u5361 Bash<pre><code>kubectl get nodes\n\n# \u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   NotReady   master   4h55m   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step5","title":"STEP5:\u6dfb\u52a0\u8282\u70b9","text":"<p>Note:  - \u5b89\u88c5kubeadm \u3001 kubelet \u3001kubectl  - \u5982\u679c\u5fd8\u4e86token\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u5217\u547d\u4ee4\u91cd\u65b0\u751f\u6210    - kubeadm token create --print-join-command</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1kubeadm-kubelet-kubectl","title":"1.\u5b89\u88c5kubeadm \u3001 kubelet \u3001kubectl","text":"<ul> <li>\u53ef\u4ee5\u53c2\u8003\u4e0a\u9762master\u8282\u70b9\u7684\u5b89\u88c5\u65b9\u5f0f</li> <li>\u6ce8\u610f:node\u8282\u70b9\u4e0d\u9700\u8981\u6267\u884cinit\u7684\u64cd\u4f5c</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2join","title":"2.\u6267\u884cjoin\u64cd\u4f5c","text":"Bash<pre><code>kubeadm join 192.168.33.131:6443 --token j7t5rh.7ao1kxy4ngj3ua2u \\\n    --discovery-token-ca-cert-hash sha256:22a3006ef3935419f13f3da59592f2450da4fd33035f81bd0d8048efd0cb38aa \n\n# \u6267\u884c\u6210\u529f\u540e\u4f1a\u663e\u793a\u5982\u4e0b\u5185\u5bb9\uff1a\n[root@centos803 ~]# kubeadm join 192.168.33.131:6443 --token whrgqy.u4qqzag60frlk4vw     --discovery-token-ca-cert-hash sha256:5846f57ce7e8843f5adc272a3261a8b5b158867328134ee745622eef2185e532\nW0304 14:10:56.883083   26739 join.go:346] [preflight] WARNING: JoinControlPane.controlPlane settings will be ignored when control-plane flag is not set.\n[preflight] Running pre-flight checks\n        [WARNING Hostname]: hostname \"centos803\" could not be reached\n        [WARNING Hostname]: hostname \"centos803\": lookup centos803 on 8.8.8.8:53: no such host\n[preflight] Reading configuration from the cluster...\n[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -oyaml'\n[kubelet-start] Downloading configuration for the kubelet from the \"kubelet-config-1.18\" ConfigMap in the kube-system namespace\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Starting the kubelet\n[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...\n\nThis node has joined the cluster:\n* Certificate signing request was sent to apiserver and a response was received.\n* The Kubelet was informed of the new secure connection details.\n\nRun 'kubectl get nodes' on the control-plane to see this node join the cluster.\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#3master","title":"3.\u5728master\u67e5\u770b\u8282\u70b9\u4fe1\u606f","text":"<ul> <li>\u72b6\u6001\u4e3aNoteReady\u7684\u539f\u56e0\u662f\u6ca1\u6709\u5b89\u88c5\u7f51\u5361 Bash<pre><code>kubectl get nodes\n\n# \u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   NotReady   master   4h55m   v1.19.4\ncentos802   NotReady   &lt;none&gt;   4h16m   v1.19.4\ncentos803   NotReady   &lt;none&gt;   3h46m   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#step6","title":"STEP6: \u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6","text":"<p>Note: \u5728master\u8282\u70b9\u5b89\u88c5\u5c31\u597d</p> <p>\u5e38\u7528\u7684kubernetes\u7f51\u7edc\u63d2\u4ef6\u6709\uff1a - flannel\uff08\u6b64\u5904\u9009\u62e9\u5b89\u88c5\uff09 - calico</p> <p>k8s\u5b98\u65b9\u6587\u6863\u4e2d\u7f51\u7edc\u63d2\u4ef6\u8bf4\u660e</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1flannel","title":"1.\u5b89\u88c5flannel","text":"<p>\u5f53\u6211\u4eec\u90e8\u7f72\u5b8c\u7f51\u7edc\u63d2\u4ef6\u540e\u6267\u884c ifconfig \u547d\u4ee4\uff0c\u6b63\u5e38\u4f1a\u770b\u5230\u65b0\u589e\u7684<code>cni0</code>\u4e0e<code>flannel1</code>\u8fd9\u4e24\u4e2a\u865a\u62df\u8bbe\u5907\uff0c\u4f46\u662f\u5982\u679c\u6ca1\u6709\u770b\u5230<code>cni0</code>\u8fd9\u4e2a\u8bbe\u5907\u4e5f\u4e0d\u7528\u592a\u62c5\u5fc3\uff0c\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf<code>/var/lib/cni</code>\u76ee\u5f55\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5e76\u4e0d\u662f\u8bf4\u90e8\u7f72\u6709\u95ee\u9898\uff0c\u800c\u662f\u8be5\u8282\u70b9\u4e0a\u6682\u65f6\u8fd8\u6ca1\u6709\u5e94\u7528\u8fd0\u884c\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u8be5\u8282\u70b9\u4e0a\u8fd0\u884c\u4e00\u4e2a Pod \u5c31\u53ef\u4ee5\u770b\u5230\u8be5\u76ee\u5f55\u4f1a\u88ab\u521b\u5efa\uff0c\u5e76\u4e14<code>cni0</code>\u8bbe\u5907\u4e5f\u4f1a\u88ab\u521b\u5efa\u51fa\u6765\u3002</p> Bash<pre><code>$ wget https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml\n# \u56e0\u4e3a\u6709\u8282\u70b9\u662f\u591a\u7f51\u5361\uff0c\u6240\u4ee5\u9700\u8981\u5728\u8d44\u6e90\u6e05\u5355\u6587\u4ef6\u4e2d\u6307\u5b9a\u5185\u7f51\u7f51\u5361\n# \u641c\u7d22\u5230\u540d\u4e3a kube-flannel-ds-amd64 \u7684 DaemonSet\uff0c\u5728kube-flannel\u5bb9\u5668\u4e0b\u9762\n$ vi kube-flannel.yml\n......\ncontainers:\n- name: kube-flannel\n  image: quay.io/coreos/flannel:v0.11.0-amd64\n  command:\n  - /opt/bin/flanneld\n  args:\n  - --ip-masq\n  - --kube-subnet-mgr\n  - --iface=eth0  # \u5982\u679c\u662f\u591a\u7f51\u5361\u7684\u8bdd\uff0c\u6307\u5b9a\u5185\u7f51\u7f51\u5361\u7684\u540d\u79f0\n......\n$ kubectl apply -f kube-flannel.yml  # \u5b89\u88c5 flannel \u7f51\u7edc\u63d2\u4ef6\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2master","title":"2.\u518d\u6b21\u5728master\u67e5\u770b\u8282\u70b9\u4fe1\u606f","text":"<ul> <li>\u72b6\u6001\u4e3aNoteReady\u7684\u539f\u56e0\u662f\u6ca1\u6709\u5b89\u88c5\u7f51\u5361 Bash<pre><code>kubectl get nodes\n\n# \u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   Ready      master   4h55m   v1.19.4\ncentos802   Ready      &lt;none&gt;   4h16m   v1.19.4\ncentos803   Ready      &lt;none&gt;   3h46m   v1.19.4\n</code></pre></li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_3","title":"\u5907\u6ce8\u5185\u5bb9\uff1a","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_4","title":"\u91cd\u7f6e\u7684\u65b9\u6cd5\uff1a","text":"<p>\u5982\u679c\u4f60\u7684\u96c6\u7fa4\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u9047\u5230\u4e86\u5176\u4ed6\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u8fdb\u884c\u91cd\u7f6e\uff1a Bash<pre><code>$ kubeadm reset\n$ ifconfig cni0 down &amp;&amp; ip link delete cni0\n$ ifconfig flannel.1 down &amp;&amp; ip link delete flannel.1\n$ rm -rf /var/lib/cni/\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_5","title":"\u5f7b\u5e95\u5378\u8f7d\u7684\u65b9\u6cd5","text":"Bash<pre><code>#!/bin/bash\nkubeadm reset -f\nmodprobe -r ipip\nlsmod\nrm -rf ~/.kube/\nrm -rf /etc/kubernetes/\nrm -rf /etc/systemd/system/kubelet.service.d\nrm -rf /etc/systemd/system/kubelet.service\nrm -rf /usr/bin/kube*\nrm -rf /etc/cni\nrm -rf /opt/cni\nrm -rf /var/lib/etcd\nrm -rf /var/etcd\nyum -y remove kubeadm kubectl kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_6","title":"\u5e38\u7528\u63d2\u4ef6\u5b89\u88c5","text":"<p>\u6240\u6709\u7684\u63d2\u4ef6\u90fd\u5728master\u4e3b\u673a\u4e0a\u5b89\u88c5\uff0c\u5b83\u4f1a\u81ea\u52a8\u63a8\u9001\u5230node\u8282\u70b9\u4e0a\u5b89\u88c5\uff0c\u5982\u9700\u8981\u4f1a\u8fde\u63a5\u4e0amaster</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1kubernetes-dashboard","title":"1.\u5b89\u88c5kubernetes-dashboard","text":"<ul> <li> <p>\u4e0b\u8f7d\u5b89\u88c5 Text Only<pre><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.3/aio/deploy/recommended.yaml\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u662f\u5426\u5b89\u88c5\u6210\u529f Bash<pre><code>kubectl get po --all-namespaces|grep dashboard\n</code></pre></p> </li> <li> <p>\u4fee\u6539node\u4e3aNodePort\u6a21\u5f0f Bash<pre><code>kubectl patch svc -n kubernetes-dashboard kubernetes-dashboard -p '{\"spec\":{\"type\":\"NodePort\"}}'\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u670d\u52a1 svc\u662fservice\u662f\u7f29\u5199 Bash<pre><code>kubectl get svc -n kubernetes-dashboard\n</code></pre></p> </li> <li> <p>\u8bbf\u95ee\u6d4f\u89c8\u5668,\u4f7f\u7528https\u7684\u65b9\u5f0f\u8bbf\u95ee Text Only<pre><code>https://192.168.33.130:32005/\n</code></pre></p> </li> <li> <p>\u8f93\u5165\u521a\u521a\u521d\u59cb\u5316\u751f\u6210\u7684token: tsmqw9.wbp9qzvd2owjgj6s Text Only<pre><code>kubeadm join 192.168.33.132:6443 --token  \\\n    --discovery-token-ca-cert-hash sha256:5ca47847041f5f152d818e38355a8972174413cdb9f0f515393ffce773a5a2db\n</code></pre></p> </li> <li> <p>\u521b\u5efadashboard\u7ba1\u7406\u7528\u6237\u53catoken Text Only<pre><code># \u521b\u5efadashboard\u7ba1\u7406\u7528\u6237\nkubectl create serviceaccount dashboard-admin -n kubernetes-dashboard\n\n# \u7ed1\u5b9a\u7528\u6237\u4e3a\u96c6\u7fa4\u7ba1\u7406\u7528\u6237\nkubectl create clusterrolebinding dashboard-cluster-admin --clusterrole=cluster-admin \\\n--serviceaccount=kubernetes-dashboard:dashboard-admin\n\n# \u67e5\u770b\u7ba1\u7406\u7528\u6237\u7684token, \u5e76\u590d\u5236\u5230\u6d4f\u89c8\u5668\u4e2d\u767b\u5f55\nkubectl describe secret -n kubernetes-dashboard dashboard-admin-token\n</code></pre></p> </li> <li> <p>\u4e0b\u5217\u4e3a\u5b89\u88c5dashboard\u65f6\u6267\u884c\u6b65\u9aa4\u7684log\uff0c\u4f9b\u53c2\u8003 Text Only<pre><code>[root@centos801 ~]# kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.3/aio/deploy/recommended.yaml\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nnamespace/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nserviceaccount/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nservice/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nsecret/kubernetes-dashboard-certs configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nsecret/kubernetes-dashboard-csrf configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nsecret/kubernetes-dashboard-key-holder configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nconfigmap/kubernetes-dashboard-settings configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nrole.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nclusterrole.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nclusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\ndeployment.apps/kubernetes-dashboard configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\nservice/dashboard-metrics-scraper configured\nWarning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply\ndeployment.apps/dashboard-metrics-scraper configured\n[root@centos801 ~]# kubectl get po --all-namespaces|grep dashboard\nkubernetes-dashboard   dashboard-metrics-scraper-6b4884c9d5-kmr82   1/1     Running            0          132m\nkubernetes-dashboard   dashboard-metrics-scraper-6b4884c9d5-nq7ns   1/1     Terminating        0          5h8m\nkubernetes-dashboard   kubernetes-dashboard-7bfbb48676-phc8t        1/1     Terminating        0          5h8m\nkubernetes-dashboard   kubernetes-dashboard-7bfbb48676-pjfgb        1/1     Running            0          132m\nkubernetes-dashboard   kubernetes-dashboard-7f99b75bf4-765h8        0/1     Pending            0          16s\n[root@centos801 ~]# kubectl patch svc -n kubernetes-dashboard kubernetes-dashboard -p '{\"spec\":{\"type\":\"NodePort\"}}'\n\nservice/kubernetes-dashboard patched\n[root@centos801 ~]# service/kubernetes-dashboard patched\n-bash: service/kubernetes-dashboard: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\n[root@centos801 ~]# kubectl patch svc -n kubernetes-dashboard kubernetes-dashboard -p '{\"spec\":{\"type\":\"NodePort\"}}'\nservice/kubernetes-dashboard patched (no change)\n[root@centos801 ~]# kubectl get svc -n kubernetes-dashboard\nNAME                        TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)         AGE\ndashboard-metrics-scraper   ClusterIP   10.106.23.98    &lt;none&gt;        8000/TCP        5h10m\nkubernetes-dashboard        NodePort    10.108.155.79   &lt;none&gt;        443:32005/TCP   5h10m\n[root@centos801 ~]# kubectl create serviceaccount dashboard-admin -n kubernetes-dashboard\nserviceaccount/dashboard-admin created\n[root@centos801 ~]# kubectl create clusterrolebinding dashboard-cluster-admin --clusterrole=cluster-admin \\\n&gt; --serviceaccount=kubernetes-dashboard:dashboard-admin\nclusterrolebinding.rbac.authorization.k8s.io/dashboard-cluster-admin created\n[root@centos801 ~]# kubectl describe secret -n kubernetes-dashboard dashboard-admin-token\nName:         dashboard-admin-token-qflhd\nNamespace:    kubernetes-dashboard\nLabels:       &lt;none&gt;\nAnnotations:  kubernetes.io/service-account.name: dashboard-admin\n              kubernetes.io/service-account.uid: 8a81530d-8abf-4af1-aa66-f026bbee16f7\n\nType:  kubernetes.io/service-account-token\n\nData\n====\ntoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6IldWZTB2aWVxWE0tVUhad3pQdnRhM1Z2a01PSi1rMS1EemdvQk44bVNMVkUifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tdG9rZW4tcWZsaGQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGFzaGJvYXJkLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiOGE4MTUzMGQtOGFiZi00YWYxLWFhNjYtZjAyNmJiZWUxNmY3Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.GdJoeFOZB_p0qvc1RmU0o2MfyCZl_ElWQzrieILwKCkPZpJlfDCPdXGBPkrtGlCIBfBvufaLwyFBeer9USb-3AcfwYBfACI5ZUUE6Wu6svTJwsMFdIIgCtWBDldcqKU1TRcGPaOaEIPkne_OZX4sn2hSny04wc4ewfv99iUakTBi8etBx4cBBs5V55lZ47aTb0DCsit8cKRsj-7nEqWX3yzlREe_UBvAa7nRXQaM4dcgGXolWphYYxQQAdLi3Iq2qzqxu3jdodWKgOa2pvMM0Opd_zbtVKsABZA0TihxtWs6w5clHpScsRt-urBNTJVz7tuYHkkV6AyO6CZ-8ZOCYg\nca.crt:     1025 bytes\nnamespace:  20 bytes\n\n[root@centos801 ~]# kubectl get nodes\nNAME        STATUS     ROLES    AGE     VERSION\ncentos801   Ready      master   6h47m   v1.18.2\ncentos802   NotReady   &lt;none&gt;   6h8m    v1.18.2\ncentos803   Ready      &lt;none&gt;   5h38m   v1.18.2\n</code></pre></p> </li> <li> <p>\u96c6\u7fa4\u6210\u529f\u90e8\u7f72</p> </li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#_7","title":"\u6269\u5c55","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#1ca","title":"1.\u83b7\u53d6ca\u8bc1\u4e66\u7684\u65b9\u6cd5","text":"<p>discovery-token-ca-cert-hash \u7684\u503c\u662f\u4e0d\u4f1a\u53d8\u7684\uff0c\u60f3\u8981\u67e5\u770b\u5219\u6267\u884c\uff1a</p> Text Only<pre><code>openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed 's/^.* //'\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1194/#2_1","title":"2.\u914d\u7f6e\u81ea\u52a8\u8865\u5168\u7684\u547d\u4ee4","text":"Text Only<pre><code># \u5b89\u88c5bash\u81ea\u52a8\u8865\u5168\u63d2\u4ef6\nyum install bash-completion -y\n\n# \u8bbe\u7f6ekubectl\u4e0ekubeadm\u547d\u4ee4\u8865\u5168\uff0c\u4e0b\u6b21login\u751f\u6548\nkubectl completion bash &gt;/etc/bash_completion.d/kubectl\nkubeadm completion bash &gt; /etc/bash_completion.d/kubeadm\n\n------------------------------------\u6216\u8005\u4e0b\u9762\u7684\u65b9\u5f0f----------------------------------------------------------------\ndnf install bash-completion -y\nsource /usr/share/bash-completion/bash_completion\nsource &lt;(kubectl completion bash)\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/","title":"kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.27.9)","text":"<p>\u518d\u51fa\u53d1\uff0c\u5e94\u4e1a\u52a1\u9700\u8981\uff0c\u9700\u8981\u518d\u6b21\u7740\u624b\u90e8\u7f72 kubernetes \u96c6\u7fa4\uff0c\u4e4b\u524d\u5206\u522b\u9646\u7eed\u7528\u4e0d\u540c\u5de5\u5177\u90e8\u7f72\u8fc7\u4e0d\u540c\u7684\u7248\u672c\uff0c\u5728\u6b64\u518d\u505a\u4e00\u6b21\u5168\u65b0\u7684\u90e8\u7f72\uff0c\u5e76\u91cd\u65b0\u6574\u7406\u548c\u5f52\u6863\u4ee5\u524d\u90e8\u7f72\u7684\u6d41\u7a0b\u6b65\u9aa4\u548c\u9047\u5230\u7684\u95ee\u9898\u53ca\u89e3\u51b3\u529e\u6cd5\u3002\u2014\u20142024\u5e7408\u670816\u65e523:50:14\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#kubeadm-v1279","title":"kubeadm \u90e8\u7f72 v1.27.9 \u7248\u672c","text":"<p>\u672c\u6b21\u76ee\u6807\u662f\u642d\u5efa\u4e00\u4e2a\u4e00\u4e3b\u4e24\u4ece\u7684 k8s \u96c6\u7fa4\u3002\u786c\u4ef6\u8981\u6c42\u5efa\u8bae\u4e0d\u8981\u4f4e\u4e8e2 \u6838 CPU\u30012G \u5185\u5b58\u300120G \u786c\u76d8\uff0c\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u662f Linux\u3002 \u4e09\u53f0\u673a\u5668\u4e4b\u95f4\u9700\u8981\u914d\u7f6e SSH \u514d\u5bc6\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#_1","title":"\u524d\u7f6e\u51c6\u5907\u8bf4\u660e","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u9700\u8981\u5206\u522b\u5728\u6240\u6709\u673a\u5668\u4e0a\u6267\u884c\uff01\uff01\uff01</p> <ul> <li>\u786c\u4ef6\u8981\u6c42</li> </ul> \u673a\u5668\u914d\u7f6e \u7528\u9014 \u670d\u52a1\u5668\u4e3b\u673a\u540d \u5185\u7f51IP\u5730\u5740 2\u68384G\u5185\u5b58\uff0c50G\u786c\u76d8\uff0cCentOS 7.9\u64cd\u4f5c\u7cfb\u7edf \u7ba1\u7406\u8282\u70b9 node77 172.16.3.77 2\u68382G\u5185\u5b58\uff0c50G\u786c\u76d8\uff0cCentOS 7.9\u64cd\u4f5c\u7cfb\u7edf \u5de5\u4f5c\u8282\u70b9 node78 172.16.3.78 2\u68382G\u5185\u5b58\uff0c50G\u786c\u76d8\uff0cCentOS 7.9\u64cd\u4f5c\u7cfb\u7edf \u5de5\u4f5c\u8282\u70b9 node79 172.16.3.79 <ol> <li> <p>\u5173\u95ed\u9632\u706b\u5899\u53ca\u76f8\u5173\u914d\u7f6e Bash<pre><code># \u5173\u95ed\u548c\u7981\u7528\u9632\u706b\u5899\nsystemctl stop firewalld\nsystemctl disable firewalld\n\n# \u5173\u95edselinux\uff0cselinux \u662f Linux \u7cfb\u7edf\u4e0b\u7684\u4e00\u4e2a\u5b89\u5168\u670d\u52a1\uff0c\u9700\u8981\u5173\u95ed\nsetenforce 0  # \u4e34\u65f6\nsed -i 's/enforcing/disabled/' /etc/selinux/config  # \u6c38\u4e45\n\n# \u5173\u95ed Linux \u7684 swap \u5206\u533a\uff0c\u63d0\u5347 Kubernetes \u7684\u6027\u80fd\nswapoff -a  # \u4e34\u65f6\nsed -ri 's/.*swap.*/#&amp;/' /etc/fstab    # \u6c38\u4e45\n</code></pre></p> </li> <li> <p>\u6309\u7167\u89c4\u5212\u4fee\u6539\u4e3b\u673a\u540d</p> <p>K8s \u4f7f\u7528\u4e3b\u673a\u540d\u8fdb\u884c\u8282\u70b9\u7684\u901a\u4fe1\uff0c\u6240\u4ee5\u9700\u8981\u6309\u7167\u8868\u683c\u4e2d\u7684\u4e3b\u673a\u540d\u4fee\u6539 3 \u53f0\u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u3002\u6ce8\u610f\uff1aK8s \u8981\u6c42\u4e3b\u673a\u540d\u4f7f\u7528 \u201c-\u201d \u6216\u8005 \u201c.\u201d \u8fde\u63a5\uff0c\u4e0d\u80fd\u4f7f\u7528\u4e0b\u5212\u7ebf \u201c_\u201d\u3002</p> </li> </ol> Bash<pre><code># \u5728192.168.1.11 \u8fd9\u4e2a\u673a\u5668\u4e0a\u6267\u884c\u4fee\u6539\u4e3b\u673a\u540d\u547d\u4ee4\nhostnamectl set-hostname k8s-master\n\n# \u5728192.168.1.12 \u8fd9\u4e2a\u673a\u5668\u4e0a\u6267\u884c\u4fee\u6539\u4e3b\u673a\u540d\u547d\u4ee4\nhostnamectl set-hostname k8s-worker1\n\n# \u5728192.168.1.13 \u8fd9\u4e2a\u673a\u5668\u4e0a\u6267\u884c\u4fee\u6539\u4e3b\u673a\u540d\u547d\u4ee4\nhostnamectl set-hostname k8s-worker2\n</code></pre> <ol> <li> <p>\u4e3b\u673a\u540d\u89e3\u6790 Bash<pre><code># \u6dfb\u52a0\u5404\u4e2a\u8282\u70b9\u7684\u89e3\u6790\uff0cIP \u5730\u5740\u9700\u8981\u66ff\u6362\u4e3a\u4f60\u81ea\u5df1\u670d\u52a1\u5668\u7684\u5185\u7f51 IP \u5730\u5740\u3002\ncat &gt;&gt; /etc/hosts &lt;&lt; EOF\n192.168.1.11 k8s-master\n192.168.1.12 k8s-worker1\n192.168.1.13 k8s-worker2\nEOF\n</code></pre></p> </li> <li> <p>\u65f6\u95f4\u540c\u6b65</p> <p>K8s \u8981\u6c42\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u65f6\u95f4\u4e00\u81f4\uff0c\u4f7f\u7528 ntpdate\uff08Network Time Protocol\uff09\u4ece\u7f51\u7edc\u540c\u6b65\u65f6\u95f4\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 ntpdate\uff0c\u4e4b\u540e\u518d\u6267\u884c\u540c\u6b65\u547d\u4ee4\u3002</p> </li> </ol> Bash<pre><code># \u5b89\u88c5ntp\u670d\u52a1\nyum install ntpdate -y\n\n# \u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u65f6\u95f4\u670d\u52a1\u540c\u6b65\u65f6\u95f4 \nntpdate ntp1.aliyun.com\n\n\n###############PS#######################\n# \u5982\u679c\u63d0\u793a\u6ca1\u6709\u5339\u914d\u5230 ntpdate\uff08Unable to find a match: ntpdate\uff09\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 wlnmp \u7684\u8f6f\u4ef6\u6e90\u5b89\u88c5 wntp\uff0c\n# \u7136\u540e\u518d\u6267\u884c\u65f6\u95f4\u540c\u6b65\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n\nrpm -ivh http://mirrors.wlnmp.com/centos/wlnmp-release-centos.noarch.rpm\nyum install wntp -y\n\n# \u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u65f6\u95f4\u670d\u52a1\u540c\u6b65\u65f6\u95f4 \nntpdate ntp1.aliyun.com\n###############PS#######################\n</code></pre> <ol> <li>\u914d\u7f6e\u7f51\u8def <p>\u4e3a\u4e86\u8ba9 K8s \u80fd\u591f\u8f6c\u53d1\u7f51\u7edc\u6d41\u91cf\uff0c\u9700\u8981\u4fee\u6539 iptables \u7684\u914d\u7f6e\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5feb\u901f\u7f16\u8f91 \u201cetc/sysctl.d/k8s.conf\u201d \u914d\u7f6e\u6587\u4ef6\uff0c\u589e\u52a0 iptables \u7684\u914d\u7f6e\u3002</p> </li> </ol> Bash<pre><code># \u4fee\u6539 Linux \u5185\u6838\u53c2\u6570\uff0c\u6dfb\u52a0\u7f51\u6865\u8fc7\u6ee4\u548c\u5730\u5740\u8f6c\u53d1\u529f\u80fd\ncat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF\n\n# \u4f7f\u914d\u7f6e\u751f\u6548\nsudo sysctl --system\n</code></pre> <ol> <li>\u91cd\u542f\u670d\u52a1\u5668 Bash<pre><code># \u8fd0\u884c \u201creboot\u201d \u547d\u4ee4\uff0c\u91cd\u542f\u670d\u52a1\u5668\uff0c\u8ba9\u4ee5\u4e0a\u914d\u7f6e\u751f\u6548\nreboot\n</code></pre></li> </ol>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#_2","title":"\u5b89\u88c5\u76f8\u5173\u8f6f\u4ef6","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u9700\u8981\u5206\u522b\u5728\u6240\u6709\u673a\u5668\u4e0a\u6267\u884c\uff01\uff01\uff01</p> <ol> <li>\u5b89\u88c5 Docker <p>\u53ef\u4ee5\u4f7f\u7528 Docker \u6216 Podman \u4f5c\u4e3a\u8fd0\u884c\u5bb9\u5668\u7684\u8fd0\u884c\u65f6\u7ec4\u4ef6\uff0c\u518d\u6b21\u4f7f\u7528 Docker</p> </li> </ol> Bash<pre><code># \u901a\u8fc7 wget \u547d\u4ee4\u83b7\u53d6 docker \u8f6f\u4ef6\u4ed3\u5e93\u4fe1\u606f\nwget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo\n\n# \u5b89\u88c5 docker-ce\nyum -y install docker-ce\n\n# \u5f00\u542f docker \u670d\u52a1\nsystemctl enable docker &amp;&amp; systemctl start docker\n</code></pre> <p>Docker \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u914d\u7f6e\u963f\u91cc\u4e91\u63d0\u4f9b\u7684\u955c\u50cf\u5e93\u6765\u52a0\u901f\u955c\u50cf\u4e0b\u8f7d\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5feb\u901f\u7f16\u8f91 \u201c/etc/docker/daemon.json\u201d \u6587\u4ef6\uff0c\u589e\u52a0\u955c\u50cf\u5e93\u914d\u7f6e\uff0c\u6700\u540e\u518d\u91cd\u542f Docker \u670d\u52a1\u3002</p> Bash<pre><code># \u914d\u7f6e\u955c\u50cf\u4e0b\u8f7d\u52a0\u901f\u5668\uff0c\u56fd\u5185\u4f7f\u7528\u963f\u91cc\u4e91\u955c\u50cf\u5e93\u4f1a\u66f4\u5feb\ncat &gt; /etc/docker/daemon.json &lt;&lt; EOF\n{\n  \"registry-mirrors\": [\"https://b9pmyelo.mirror.aliyuncs.com\"],\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"]\n}\nEOF\n\n# \u91cd\u542f docker \u670d\u52a1\nsystemctl restart docker\n</code></pre> <ol> <li>\u5b89\u88c5 cri-dockered <p>cri-dockerd \u7528\u4e8e\u4e3a Docker \u63d0\u4f9b\u4e00\u4e2a\u80fd\u591f\u652f\u6301 K8s \u5bb9\u5668\u8fd0\u884c\u65f6\u6807\u51c6\u7684\u5de5\u5177\uff0c\u4ece\u800c\u80fd\u591f\u8ba9 Docker \u4f5c\u4e3a K8s \u5bb9\u5668\u5f15\u64ce\u3002\u901a\u8fc7 wget \u4e0b\u8f7d cri-dockerd \u5b89\u88c5\u5305\uff0c\u7136\u540e\u901a\u8fc7 rpm \u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\u3002\u5982\u679c\u5b98\u65b9\u5730\u5740\u4e0b\u8f7d\u592a\u6162\uff0c\u53ef\u4ee5\u4f7f\u7528\u79bb\u7ebf\u5b89\u88c5\u5305\u8fdb\u884c\u5b89\u88c5</p> </li> </ol> Bash<pre><code># \u901a\u8fc7 wget \u547d\u4ee4\u83b7\u53d6 cri-dockerd\u8f6f\u4ef6\nwget https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.12/cri-dockerd-0.3.12-3.el7.x86_64.rpm\n# \u901a\u8fc7 rpm \u547d\u4ee4\u6267\u884c\u5b89\u88c5\u5305\nrpm -ivh cri-dockerd-0.3.12-3.el7.x86_64.rpm\n</code></pre> <p>\u5b89\u88c5\u5b8c\u6210\u540e\u4f7f\u7528 vi \u7f16\u8f91\u5668\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff08/usr/lib/systemd/system/cri-docker.service\uff09\uff0c\u5728 \u201cExecStart=/usr/bin/cri-dockerd --container-runtime-endpoint fd://\u201d \u8fd9\u4e00\u884c\u589e\u52a0 \u201c\u2013pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9\u201d\u3002</p> Bash<pre><code># \u6253\u5f00 cri-docker.service \u914d\u7f6e\u6587\u4ef6\nvi /usr/lib/systemd/system/cri-docker.service\n\n# \u4fee\u6539\u5bf9\u5e94\u7684\u914d\u7f6e\u9879\nExecStart=/usr/bin/cri-dockerd --container-runtime-endpoint fd:// --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u91cd\u65b0\u52a0\u8f7d\u5e76\u5f00\u542f cri-dockered \u670d\u52a1</p> Bash<pre><code># \u52a0\u8f7d\u914d\u7f6e\u5e76\u5f00\u542f\u670d\u52a1\nsystemctl daemon-reload\nsystemctl enable cri-docker &amp;&amp; systemctl start cri-docker\n</code></pre> <ol> <li>\u6dfb\u52a0\u963f\u91cc\u4e91 YUM \u8f6f\u4ef6\u6e90 <p>\u56fd\u5185\u662f\u65e0\u6cd5\u8bbf\u95ee K8s \u5b98\u65b9\u7684\u955c\u50cf\u5e93\uff0c\u5982\u679c\u4e0d\u589e\u52a0\u8fd9\u4e2a\u914d\u7f6e\uff0c\u540e\u7eed\u5c31\u65e0\u6cd5\u5b89\u88c5\u76f8\u5173\u5de5\u5177\u3002</p> </li> </ol> Bash<pre><code># \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5feb\u901f\u7f16\u8f91 \u201c/etc/yum.repos.d/kubernetes.repo\u201d \u914d\u7f6e\u6587\u4ef6\uff0c\u6dfb\u52a0\u963f\u91cc\u4e91\u7684\u955c\u50cf\u5e93\u3002\ncat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; EOF\n[kubernetes]\nname=Kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#kubeadmkubeletkubectl","title":"\u5b89\u88c5 kubeadm\u3001kubelet\u3001kubectl","text":"<p>\u4ee5\u4e0b\u6b65\u9aa4\u9700\u8981\u5206\u522b\u5728\u6240\u6709\u673a\u5668\u4e0a\u6267\u884c\uff01\uff01\uff01</p> <p>kubeadm \u7528\u6765\u521d\u59cb\u5316 K8s \u96c6\u7fa4\uff1bkubelet \u662f\u6bcf\u4e2a\u8282\u70b9\u7684 K8s \u7ba1\u7406\u5458\uff1bkubectl \u662f K8s \u7684\u547d\u4ee4\u884c\u4ea4\u4e92\u5de5\u5177</p> Bash<pre><code># \u6307\u5b9a\u4e86\u5b89\u88c5\u7684\u7248\u672c\u662f 1.28.0\nyum install -y kubelet-1.28.0 kubeadm-1.28.0 kubectl-1.28.0\n\n# \u5b89\u88c5\u6210\u529f\u540e\uff0c\u914d\u7f6e\u5f00\u673a\u542f\u52a8\u670d\u52a1\nsystemctl enable kubelet\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#master-k8s","title":"Master \u8282\u70b9\u521d\u59cb\u5316 k8s","text":"<p>\u53ea\u9700\u8981\u5728 Master \u8282\u70b9\u4e0a\u6267\u884c\u4ee5\u4e0b\u521d\u59cb\u5316\u547d\u4ee4\uff01\uff01\uff01 Bash<pre><code># \u201capiserver-advertise-address\u201d \u53c2\u6570\u9700\u8981\u66ff\u6362\u6210\u81ea\u5df1\u7684 Master \u8282\u70b9\u670d\u52a1\u5668\u7684\u5185\u7f51 IP\u3002\n\nkubeadm init \\\n  --apiserver-advertise-address=192.168.1.11 \\\n  --image-repository registry.aliyuncs.com/google_containers \\\n  --kubernetes-version v1.28.0 \\\n  --service-cidr=10.96.0.0/12 \\\n  --pod-network-cidr=10.244.0.0/16 \\\n  --cri-socket=unix:///var/run/cri-dockerd.sock \\\n  --ignore-preflight-errors=all\n\n\n###############\u53c2\u6570\u8bf4\u660e#######################\n# apiserver-advertise-address\uff1a\u96c6\u7fa4\u5e7f\u64ad\u5730\u5740\uff0c\u7528 master \u8282\u70b9\u7684\u5185\u7f51 IP\u3002\n# image-repository\uff1a\u7531\u4e8e\u9ed8\u8ba4\u62c9\u53d6\u955c\u50cf\u5730\u5740 k8s.gcr.io \u56fd\u5185\u65e0\u6cd5\u8bbf\u95ee\uff0c\u8fd9\u91cc\u6307\u5b9a\u963f\u91cc\u4e91\u955c\u50cf\u4ed3\u5e93\u5730\u5740\u3002\n# kubernetes-version\uff1a K8s \u7248\u672c\uff0c\u4e0e\u4e0a\u9762\u5b89\u88c5\u7684\u8f6f\u4ef6\u7248\u672c\u4e00\u81f4\u3002\n# service-cidr\uff1a\u96c6\u7fa4 Service \u7f51\u6bb5\u3002pod-network-cidr\uff1a\u96c6\u7fa4 Pod \u7f51\u6bb5\u3002\n# cri-socket\uff1a\u6307\u5b9a cri-socket \u63a5\u53e3\uff0c\u6211\u4eec\u8fd9\u91cc\u4f7f\u7528 unix:///var/run/cri-dockerd.sock\u3002\n###############\u53c2\u6570\u8bf4\u660e#######################\n</code></pre></p> <p>\u6267\u884c\u6210\u529f\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u5185\u5bb9</p> <p>Bash<pre><code>[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.1.11:6443 --token xxxxxx \\\n        --discovery-token-ca-cert-hash sha256:xxxxxx\n</code></pre> \u5728\u4ee5\u4e0a\u8fd4\u56de\u7ed3\u679c\u4e2d\u6709 3 \u6761\u547d\u4ee4\u9700\u8981\u7acb\u5373\u6267\u884c\uff0c\u8fd9\u662f\u7528\u6765\u8bbe\u7f6e kubectl \u5de5\u5177\u7684\u7ba1\u7406\u5458\u6743\u9650\uff0c\u6267\u884c\u4e4b\u540e\u5c31\u53ef\u4ee5\u5728 Master \u8282\u70b9\u4e0a\u901a\u8fc7\u7ec8\u7aef\u7a97\u53e3\u4f7f\u7528 kubectl \u547d\u4ee4\u4e86\u3002 Bash<pre><code># \u5728 Master \u8282\u70b9\u4e0a\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre> \u5728\u8fd4\u56de\u7ed3\u679c\u7684\u6700\u540e\uff0c\u8fd8\u6709 1 \u6761 \u201ckubeadm join\u201d \u547d\u4ee4\uff0c\u8fd9\u4e2a\u662f\u7528\u6765\u52a0\u5165\u5de5\u4f5c\u8282\u70b9\u7684\uff0c\u9700\u8981\u5728\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c\u3002</p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/kubeadm_deploy_k8s_cluster_v1279/#work-k8s","title":"work \u8282\u70b9\u52a0\u5165 k8s \u96c6\u7fa4","text":"<p>K8s \u521d\u59cb\u5316\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u5176\u4ed6 2 \u4e2a\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c \u201ckubeadm join\u201d \u547d\u4ee4\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u4e86 cri-dockerd \uff0c\u9700\u8981\u5728\u547d\u4ee4\u52a0\u4e0a \u201c\u2013cri-socket=unix:///var/run/cri-dockerd.sock\u201d \u53c2\u6570\uff08\u6ce8\uff1a\u5982\u679c\u4f7f\u7528\u516c\u6709\u4e91\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5148\u6253\u5f00 Master \u8282\u70b9\u6240\u5728\u670d\u52a1\u5668\u7684 6443 \u7aef\u53e3\uff0c\u8fd9\u4e2a\u662f K8s \u7684 API server \u7aef\u53e3\u3002\uff09 Bash<pre><code># \u5728\u4e24\u4e2a\u5de5\u4f5c\u8282\u70b9\u4e0a\u6267\u884c\nkubeadm join 192.168.1.11:6443 --token xxxxxx \\\n        --discovery-token-ca-cert-hash sha256:xxxxxx \\\n        --cri-socket=unix:///var/run/cri-dockerd.sock\n\n\n###############PS#######################\n# \u547d\u4ee4\u4e2d token \u6709\u6548\u671f\u4e3a 24 \u5c0f\u65f6\uff0c\u5f53 token \u8fc7\u671f\u4e4b\u540e\uff0c\u6267\u884c \u201ckubeadm join\u201d \u547d\u4ee4\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u65f6\u53ef\u4ee5\u76f4\u63a5\u5728 Master \u8282\u70b9\u4e0a\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210\u65b0\u7684 token\uff0c\u7136\u540e\u518d\u4f7f\u7528 \u201ckubeadm join\u201d \u547d\u4ee4\u52a0\u5165\u8282\u70b9\u3002\nkubeadm token create --print-join-command\n###############PS#######################\n</code></pre> \u6b64\u65f6\uff0c\u6211\u4eec\u7684\u96c6\u7fa4\u5c31\u90e8\u7f72\u6210\u529f\u4e86\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 \u201ckubectl get node\u201d \u547d\u4ee4\u6765\u67e5\u770b\u96c6\u7fa4\u8282\u70b9\u72b6\u6001\u3002</p> <p>\u4f60\u4f1a\u6ce8\u610f\u5230\u6240\u6709\u8282\u70b9\u7684\u72b6\u6001\u90fd\u662f \u201cNotReady\u201d\uff0c\u8fd9\u662f\u7531\u4e8e\u96c6\u7fa4\u8fd8\u7f3a\u5c11\u7f51\u7edc\u63d2\u4ef6\uff0c\u96c6\u7fa4\u7684\u5185\u90e8\u7f51\u7edc\u8fd8\u6ca1\u6709\u6b63\u5e38\u8fd0\u4f5c\u3002</p> <p>Bash<pre><code>[root@k8s-master ~]# kubectl get node\nNAME           STATUS     ROLES           AGE   VERSION\nk8s-master     NotReady   control-plane   84m   v1.28.0\nk8s-worker1    NotReady   &lt;none&gt;          82m   v1.28.0\nk8s-worker2    NotReady   &lt;none&gt;          47s   v1.28.0\n</code></pre> \u5b89\u88c5 k8s \u7f51\u7edc\u63d2\u4ef6 K8s \u7f51\u7edc\u63d2\u4ef6\uff0c\u4e5f\u79f0\u4e3a\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3\uff08CNI\uff09\u63d2\u4ef6\uff0c\u662f\u5b9e\u73b0 K8s \u96c6\u7fa4\u4e2d\u5bb9\u5668\u95f4\u901a\u4fe1\u548c\u7f51\u7edc\u8fde\u63a5\u7684\u5173\u952e\u7ec4\u4ef6\u3002\u5728\u8fd9\u91cc\u6211\u4f7f\u7528 Calico \u4f5c\u4e3a\u96c6\u7fa4\u7684\u7f51\u7edc\u63d2\u4ef6\u3002Calico \u662f\u901a\u8fc7\u6267\u884c\u4e00\u4e2a YAML \u6587\u4ef6\u90e8\u7f72\u5230 K8s \u96c6\u7fa4\u91cc\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9996\u5148\u9700\u8981\u901a\u8fc7 \u201cwget\u201d \u547d\u4ee4\u4e0b\u8f7d\u8fd9\u4e2a YAML \u6587\u4ef6\u3002 Bash<pre><code># \u4e0b\u8f7d Calico \u63d2\u4ef6\u90e8\u7f72\u6587\u4ef6\nwget https://docs.projectcalico.org/manifests/calico.yaml\n</code></pre> \u5176\u6b21\uff0c\u901a\u8fc7 vi \u7f16\u8f91\u5668\u4fee\u6539 \u201ccalico.yaml\u201d \u6587\u4ef6\u4e2d\u7684 \u201cCALICO_IPV4POOL_CIDR\u201d \u53c2\u6570\uff0c\u9700\u8981\u4e0e\u524d\u9762 \u201ckubeadm init\u201d \u547d\u4ee4\u4e2d\u7684 \u201c\u2013pod-network-cidr\u201d \u53c2\u6570\u4e00\u6837\uff0810.244.0.0/16\uff09,\u4fee\u6539\u4f4d\u7f6e\u5982\u4e0b\u6240\u793a Bash<pre><code># \u4fee\u6539\u6587\u4ef6\u65f6\u6ce8\u610f\u683c\u5f0f\u5bf9\u9f50\n4598 # The default IPv4 pool to create on startup if none exists. Pod IPs will be\n4599 # chosen from this range. Changing this value after installation will have\n4600 # no effect. This should fall within `--cluster-cidr`.\n4601 - name: CALICO_IPV4POOL_CIDR\n4602   value: \"10.244.0.0/16\"\n4603 # Disable file logging so `kubectl logs` works.\n4604 - name: CALICO_DISABLE_FILE_LOGGING\n4605   value: \"true\"\n</code></pre> \u6700\u540e\uff0c\u4f7f\u7528 \u201ckubectl apply\u201d \u547d\u4ee4\u5c06 Calico \u63d2\u4ef6\u90e8\u7f72\u5230\u96c6\u7fa4\u91cc\uff0c\u90e8\u7f72 YAML \u6587\u4ef6\u547d\u4ee4\u5982\u4e0b\uff1a Bash<pre><code>kubectl apply -f calico.yaml\n</code></pre> Calico \u90e8\u7f72\u4f1a\u6bd4\u8f83\u6162\uff0c\u5927\u6982\u7b49\u4e2a\u51e0\u5206\u949f\uff0c\u7b49\u5f85 Calico \u90e8\u7f72\u5b8c\u6210\u540e\uff0c\u518d\u6b21\u901a\u8fc7\u547d\u4ee4 \u201ckubectl get node\u201d \u67e5\u770b\u8282\u70b9\u72b6\u6001\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u6240\u6709\u8282\u70b9\u5df2\u7ecf\u51c6\u5907\u5c31\u7eea\uff0c\u606d\u559c\u4f60\uff01\u6b64\u65f6\u96c6\u7fa4\u6b63\u5f0f\u642d\u5efa\u6210\u529f\u3002 Bash<pre><code>[root@k8s-master ~]# kubectl get node\nNAME           STATUS   ROLES           AGE   VERSION\nk8s-master     Ready    control-plane   12h   v1.28.0\nk8s-worker1    Ready    &lt;none&gt;          12h   v1.28.0\nk8s-worker2    Ready    &lt;none&gt;          10h   v1.28.0\n</code></pre> PS: \u79bb\u7ebf\u5b89\u88c5\u65b9\u5f0f\uff08\u5728\u7ebf\u5b89\u88c5\u5931\u8d25\u65f6\u4f7f\u7528\u6b64\u65b9\u6cd5\uff09 Bash<pre><code># \u5047\u5b9a\u4e0b\u8f7d\u7684\u6587\u4ef6\u540d\u4e3a\uff1a\u201ccalico-image-3.25.1.zip\u201d\uff0c \u89e3\u538b\u540e\u5728\u6bcf\u4e2a\u8282\u70b9\u4e0a\u6267\u884c\u5bfc\u5165\u547d\u4ee4\u3002\nls *.tar |xargs -i docker load -i {}\n\n# \u201ccalico-yaml.zip\u201d \u4e2d\u662f\u90e8\u7f72\u6587\u4ef6\uff0c\u5728 Master \u8282\u70b9\u4e0a\u4f9d\u6b21\u90e8\u7f72\u4e24\u4e2a YAML \u6587\u4ef6\u3002\n# \u5148\u5220\u9664\u4e4b\u524d\u90e8\u7f72\u4e0d\u6210\u529f\u7684 Calico\nkubectl delete -f calico.yaml\n\n# \u4f9d\u6b21\u90e8\u7f72\u4e24\u4e2a yaml \u6587\u4ef6\nkubectl apply -f tigera-operator.yaml --server-sidekubectl apply -f custom-resources.yaml\n\n# \u7136\u540e\u7b49\u5f85\u90e8\u7f72\u5b8c\u6210\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u6240\u6709\u8282\u70b9\u51c6\u5907\u5c31\u7eea\u3002\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/","title":"k8s\u4e2dyaml\u6587\u4ef6\u7684\u7f16\u5199\u548c\u4f7f\u7528","text":"","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#yaml","title":"YAML\u57fa\u672c\u8bed\u6cd5","text":"<ul> <li>\u5927\u5c0f\u5199\u654f\u611f</li> <li>\u4f7f\u7528\u7f29\u8fdb\u8868\u793a\u5c42\u7ea7\u5173\u7cfb</li> <li>\u7f29\u8fdb\u65f6\u4e0d\u5141\u8bb8\u4f7f\u7528Tab\u952e\uff0c\u53ea\u5141\u8bb8\u4f7f\u7528\u7a7a\u683c\u3002</li> <li>\u7f29\u8fdb\u7684\u7a7a\u683c\u6570\u76ee\u4e0d\u91cd\u8981\uff0c\u53ea\u8981\u76f8\u540c\u5c42\u7ea7\u7684\u5143\u7d20\u5de6\u4fa7\u5bf9\u9f50\u5373\u53ef</li> <li><code>#</code> \u8868\u793a\u6ce8\u91ca\uff0c\u4ece\u8fd9\u4e2a\u5b57\u7b26\u4e00\u76f4\u5230\u884c\u5c3e\uff0c\u90fd\u4f1a\u88ab\u89e3\u6790\u5668\u5ffd\u7565\u3002</li> </ul>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#maps","title":"Maps","text":"<ul> <li>Map \u662f\u5b57\u5178\uff0c\u5c31\u662f\u4e00\u4e2a<code>key:value</code>\u7684\u952e\u503c\u5bf9\uff0c\u4f8b\u5982\uff1a</li> </ul> <p>YAML<pre><code>---\napiVersion: v1\nkind: Pod\n\n#######PS##########\n# \u7b2c\u4e00\u884c\u7684`---`\u662f\u5206\u9694\u7b26\uff0c\u662f\u53ef\u9009\u7684\uff0c\u5728\u5355\u4e00\u6587\u4ef6\u4e2d\uff0c\u53ef\u7528\u8fde\u7eed\u4e09\u4e2a\u8fde\u5b57\u53f7`---`\u533a\u5206\u591a\u4e2a\u6587\u4ef6\n# \u8f6c\u4e3aJSON\u5219\u4e3a\uff1a\n{\n    \"apiVersion\": \"v1\",\n    \"kind\": \"pod\"\n}\n#######PS##########\n</code></pre> \u6211\u4eec\u5728\u521b\u5efa\u4e00\u4e2a\u76f8\u5bf9\u590d\u6742\u4e00\u70b9\u7684 YAML \u6587\u4ef6\uff0c\u521b\u5efa\u4e00\u4e2a KEY \u5bf9\u5e94\u7684\u503c\u4e0d\u662f\u5b57\u7b26\u4e32\u800c\u662f\u4e00\u4e2a Maps\uff1a Text Only<pre><code>---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: kube100-site\n  labels:\n    app: web\n</code></pre> - \u7528\u4e86\u4e24\u4e2a\u7a7a\u683c\u4f5c\u4e3a\u7f29\u8fdb\uff0c\u7a7a\u683c\u7684\u6570\u91cf\u5e76\u4e0d\u91cd\u8981\uff0c\u4f46\u662f\u5f97\u4fdd\u6301\u4e00\u81f4\uff0c\u5e76\u4e14\u81f3\u5c11\u8981\u6c42\u4e00\u4e2a\u7a7a\u683c**\uff08\u4ec0\u4e48\u610f\u601d\uff1f\u5c31\u662f\u4f60\u522b\u4e00\u4f1a\u7f29\u8fdb\u4e24\u4e2a\u7a7a\u683c\uff0c\u4e00\u4f1a\u7f29\u8fdb4\u4e2a\u7a7a\u683c\uff09\u3002 - \u5728 YAML \u6587\u4ef6\u4e2d\u7edd\u5bf9\u4e0d\u8981\u4f7f\u7528 tab \u952e\u3002</p> <p>\u540c\u6837\u7684\u5c06\u4e0a\u9762\u7684 YAML \u6587\u4ef6\u8f6c\u6362\u6210 JSON \u6587\u4ef6\uff1a JSON<pre><code>{\n  \"apiVersion\": \"v1\",\n  \"kind\": \"Pod\",\n  \"metadata\": {\n    \"name\": \"kube100-site\",\n    \"labels\": {\n      \"app\": \"web\"\n    }\n  }\n}\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#lists","title":"Lists","text":"<p>Lists \u5c31\u662f\u5217\u8868\uff0c\u8bf4\u767d\u4e86\u5c31\u662f\u6570\u7ec4\uff0c\u5728 YAML \u6587\u4ef6\u4e2d\u53ef\u4ee5\u8fd9\u6837\u5b9a\u4e49\uff1a YAML<pre><code>args\n  - Cat\n  - Dog\n  - Fish\n</code></pre> - \u53ef\u4ee5\u6709\u4efb\u4f55\u6570\u91cf\u7684\u9879\u5728\u5217\u8868\u4e2d\uff0c\u6bcf\u4e2a\u9879\u7684\u5b9a\u4e49\u4ee5\u7834\u6298\u53f7\uff08-\uff09\u5f00\u5934\u7684\uff0c\u4e0e\u7236\u5143\u7d20\u76f4\u63a5\u53ef\u4ee5\u7f29\u8fdb\u4e00\u4e2a\u7a7a\u683c\u3002\u5bf9\u5e94\u7684 JSON \u683c\u5f0f\u5982\u4e0b\uff1a</p> JSON<pre><code>{\n    \"args\": [\"Cat\", \"Dog\", \"Fish\"]\n}\n</code></pre> <p>list \u7684\u5b50\u9879\u4e5f\u53ef\u4ee5\u662f Maps\uff0cMaps \u7684\u5b50\u9879\u4e5f\u53ef\u4ee5\u662flist\u5982\u4e0b\u6240\u793a\uff1a</p> <p>YAML<pre><code>---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: kube100-site\n  labels:\n    app: web\nspec:\n  containers:\n    - name: front-end\n      image: nginx\n      ports:\n        - containerPort: 80\n    - name: flaskapp-demo\n      image: jcdemo/flaskapp\n      ports:\n        - containerPort: 5000\n</code></pre> \u6211\u4eec\u53ef\u4ee5\u8f6c\u6210\u5982\u4e0b JSON \u683c\u5f0f\u6587\u4ef6\uff1a JSON<pre><code>{\n    \"apiVersion\": \"v1\",\n    \"kind\": \"Pod\",\n    \"metadata\": {\n        \"name\": \"kube100-site\",\n        \"labels\": {\n            \"app\": \"web\"\n        }\n    },\n    \"spec\": {\n        \"containers\": [{\n            \"name\": \"front-end\",\n            \"image\": \"nginx\",\n            \"ports\": [{\n                \"containerPort\": 80\n            }]\n        }, {\n            \"name\": \"flaskapp-demo\",\n            \"image\": \"jcdemo/flaskapp\",\n            \"ports\": [{\n                \"containerPort\": 5000\n            }]\n        }]\n    }\n}\n</code></pre></p>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_1","title":"\u5b57\u9762\u91cf\u4e0e\u6298\u53e0\u6837\u5f0f","text":"<p>\u5bf9\u4e8e\u8f83\u957f\u7684\u5b57\u7b26\u4e32\u6216\u8005\u5217\u8868\uff0cYAML\u63d0\u4f9b\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u8868\u793a\u65b9\u5f0f\uff1a\u5b57\u9762\u91cf\u6837\u5f0f(literal style)\u548c\u6298\u53e0\u6837\u5f0f(folded style)\u3002</p> <ul> <li>\u5b57\u9762\u91cf\u6837\u5f0f (\u4f7f\u7528 <code>|</code> \u7b26\u53f7):</li> </ul> YAML<pre><code>description: |\n  This is a long description that spans multiple lines.\n  It can include indents and newlines which will be preserved.\n</code></pre> <ul> <li>\u6298\u53e0\u6837\u5f0f (\u4f7f\u7528 <code>&gt;</code> \u7b26\u53f7):</li> </ul> YAML<pre><code>description: &gt;\n  This is a long description that spans multiple lines.\n  It can include indents and newlines which will be folded into a single line.\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_2","title":"\u951a\u70b9\u4e0e\u522b\u540d","text":"<p>\u951a\u70b9(anchor)\u548c\u522b\u540d(alias)\u53ef\u4ee5\u5e2e\u52a9\u907f\u514d\u91cd\u590d\u7684\u6570\u636e\u3002</p> <ul> <li>\u951a\u70b9 (\u4f7f\u7528 <code>&amp;name</code> \u5b9a\u4e49):</li> </ul> YAML<pre><code>&amp;baseImage\nimage: nginx\ntag: 1.19.2\n</code></pre> <ul> <li>\u522b\u540d (\u4f7f\u7528 <code>*name</code> \u5f15\u7528):</li> </ul> YAML<pre><code>containers:\n  - name: nginx-container\n    &lt;&lt;: *baseImage\n  - name: another-container\n    &lt;&lt;: *baseImage\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_3","title":"\u73af\u5883\u53d8\u91cf","text":"<p>\u5728YAML\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u6765\u52a8\u6001\u586b\u5145\u67d0\u4e9b\u5b57\u6bb5\u3002\u8fd9\u5bf9\u4e8e\u9700\u8981\u5728\u90e8\u7f72\u65f6\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u53d8\u5316\u7684\u503c\u975e\u5e38\u6709\u7528\u3002</p> YAML<pre><code>image: ${MY_REGISTRY}/nginx:${NGINX_VERSION}\n</code></pre>","tags":["K8S"]},{"location":"notehub/cloud_native/k8s/yaml_usage/#_4","title":"\u6761\u4ef6\u8868\u8fbe\u5f0f","text":"<p>\u867d\u7136YAML\u672c\u8eab\u4e0d\u652f\u6301\u6761\u4ef6\u903b\u8f91\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u6a21\u677f\u5f15\u64ce\uff08\u5982Jinja2\uff09\u7ed3\u5408YAML\u6765\u5b9e\u73b0\u590d\u6742\u7684\u6761\u4ef6\u903b\u8f91\u3002</p>","tags":["K8S"]},{"location":"notehub/mlops/kserve_deploy/","title":"Kserve\u5b89\u88c5\u90e8\u7f72","text":"","tags":["K8S","MLOps"]},{"location":"notehub/mlops/kserve_deploy/#_1","title":"\u524d\u7f6e\u8bf4\u660e","text":"<p>Kserve \u6709\u591a\u79cd\u5b89\u88c5\u90e8\u7f72\u6a21\u5f0f\uff0c\u5305\u62ec Serverless\u3001ModelMesh \u4ee5\u53ca Kubernetes Deployment\uff0c\u4e0b\u6587\u7684\u5b89\u88c5\u6a21\u578b\u91c7\u7528\u7684  Kubernetes Deployment \u4e2d\u7684 RawDeployment \u6a21\u5f0f\uff0c\u5176\u4ed6\u5b89\u88c5\u8be6\u89c1\u5b98\u65b9\u6587\u6863\uff0c</p> <p>\u5b98\u65b9\u6587\u6863\u63d0\u5230\u5b89\u88c5 Kserve \u9700\u8981\u4f9d\u8d56 Istio \u548c Cert Manager\u3001\u7531\u4e8e Isito \u7ec4\u4ef6\u6bd4\u8f83\u91cd\u4e14\u4e0d\u592a\u4e86\u89e3\uff0c\u8003\u8651\u5230\u6211\u7684\u76ee\u6807\u662f\u4e3a\u4e86\u5feb\u901f\u5b8c\u6210 kserve \u7684\u90e8\u7f72\uff0c\u6240\u4ee5\u5c31\u4f7f\u7528 Ingress-nginx \u6765\u66ff\u4ee3\u4e86 Istio\uff0c\u6548\u679c\u662f\u4e00\u6837\u3002\u53e6\u5916\u5b89\u88c5\u65f6\u9700\u8981\u6ce8\u610f\u7248\u672c\u5bf9\u5e94\u5173\u7cfb</p> K8s v1.29.7 KServe v0.13.0 Cert-manager v1.15.3 Ingress-nginx\uff08\u4e0ek8s\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\uff09 v4.11.2","tags":["K8S","MLOps"]},{"location":"notehub/mlops/kserve_deploy/#_2","title":"\u4f9d\u8d56\u7ec4\u4ef6","text":"","tags":["K8S","MLOps"]},{"location":"notehub/mlops/kserve_deploy/#ingress-nginx","title":"ingress-nginx \u90e8\u7f72","text":"<p>\u8be5\u7ec4\u4ef6\u91c7\u7528 Helm \u5b89\u88c5 </p> <ul> <li>\u5b98\u65b9\u6587\u6863</li> <li> <p>\u5b89\u88c5\u5305\u94fe\u63a5</p> </li> <li> <p>\u5982\u679c\u5728\u5916\u7f51\u72b6\u6001\u826f\u597d\u65f6\uff0c\u53ef\u4ee5\u91c7\u7528\u5728\u7ebf\u5b89\u88c5\uff0c\u7531\u4e8e\u5f53\u524d\u662f\u516c\u53f8\u5185\u7f51\uff0c\u6240\u4ee5\u91c7\u7528\u5c06 helm \u5b89\u88c5\u5305\u4e0b\u8f7d\u4e0b\u6765\uff0c\u8fdb\u884c\u79bb\u7ebf\u5b89\u88c5</p> </li> </ul> Bash<pre><code># \u6dfb\u52a0repo\nhelm repo add https://kubernetes.github.io/ingress-nginx\n\n# \u4e0b\u8f7dingress-nginx.tgz\nwget https://github.com/kubernetes/ingress-nginx/releases/download/helm-chart-4.11.2/ingress-nginx-4.11.2.tgz\n\n# \u89e3\u538b\ntar -zxf ingress-nginx-4.11.2.tgz\n\n# \u5b89\u88c5\nhelm install ingress-nginx ./ingress-nginx --namespace ingress-nginx --create-namespace\n\n\n# \u7531\u4e8eingress-nginx\u4f9d\u8d56\u7684\u955c\u50cf\u88ab\u5899\u65e0\u6cd5\u4e0b\u8f7d\uff0c\u6240\u4ee5\u9700\u8981\u66f2\u7ebf\u6551\u56fd\uff0c\u4e3b\u8981\u5220\u9664value.yaml\u4e2d\u7684\u955c\u50cfhash,\u9700\u8981\u5728\u6267\u884c\u8282\u70b9\u4e0b\u8f7d\ndocker pull k8s.kubesre.xyz/ingress-nginx/kube-webhook-certgen:v1.4.3\ndocker tag k8s.kubesre.xyz/ingress-nginx/kube-webhook-certgen:v1.4.3 registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.4.3\n\ndocker pull k8s.kubesre.xyz/ingress-nginx/controller:v1.11.2\ndocker tag k8s.kubesre.xyz/ingress-nginx/controller:v1.11.2 registry.k8s.io/ingress-nginx/controller:v1.11.2\n</code></pre> <ul> <li>\u5b89\u88c5\u6210\u529f\u540e\u6ee1\u523b\u770b\u5230\u5982\u4e0b\u4fe1\u606f</li> </ul> Bash<pre><code>(base) [root@node77 ingress-nginx]# helm install ingress-nginx ./ingress-nginx --namespace ingress-nginx\nNAME: ingress-nginx\nLAST DEPLOYED: Fri Aug 30 19:34:39 2024\nNAMESPACE: ingress-nginx\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\nNOTES:\nThe ingress-nginx controller has been installed.\nIt may take a few minutes for the load balancer IP to be available.\nYou can watch the status by running 'kubectl get service --namespace ingress-nginx ingress-nginx-controller --output wide --watch'\n\nAn example Ingress that makes use of the controller:\n  apiVersion: networking.k8s.io/v1\n  kind: Ingress\n  metadata:\n    name: example\n    namespace: foo\n  spec:\n    ingressClassName: nginx\n    rules:\n      - host: www.example.com\n        http:\n          paths:\n            - pathType: Prefix\n              backend:\n                service:\n                  name: exampleService\n                  port:\n                    number: 80\n              path: /\n    # This section is only required if TLS is to be enabled for the Ingress\n    tls:\n      - hosts:\n        - www.example.com\n        secretName: example-tls\n\nIf TLS is enabled for the Ingress, a Secret containing the certificate and key must also be provided:\n\n  apiVersion: v1\n  kind: Secret\n  metadata:\n    name: example-tls\n    namespace: foo\n  data:\n    tls.crt: &lt;base64 encoded cert&gt;\n    tls.key: &lt;base64 encoded key&gt;\n  type: kubernetes.io/tls\n(base) [root@node77 ingress-nginx]# kubectl get service --namespace ingress-nginx ingress-nginx-controller --output wide --watch\nNAME                       TYPE           CLUSTER-IP    EXTERNAL-IP   PORT(S)                      AGE   SELECTOR\ningress-nginx-controller   LoadBalancer   10.96.1.190   &lt;pending&gt;     80:32702/TCP,443:32064/TCP   37s   app.kubernetes.io/component=controller,app.kubernetes.io/instance=ingress-nginx,app.kubernetes.io/name=ingress-nginx\n</code></pre>","tags":["K8S","MLOps"]},{"location":"notehub/mlops/kserve_deploy/#certmanager","title":"CertManager \u90e8\u7f72","text":"<p>\u672c\u7ec4\u4ef6\u91c7\u7528 YAML \u65b9\u5f0f\u5b89\u88c5\uff0c\u82e5\u4f7f\u7528 Helm \u5b89\u88c5\uff0c\u8bf7\u53c2\u8003\uff1aLink</p> <ul> <li>\u6587\u6863\u5730\u5740</li> <li>\u4e0b\u8f7d\u5730\u5740</li> </ul> Bash<pre><code>kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.15.3/cert-manager.yaml\n\n(base) [root@node77 cert-manager]# kubectl get pods --namespace cert-manager\nNAME                                       READY   STATUS    RESTARTS   AGE\ncert-manager-cainjector-5fd6444f95-rbczx   1/1     Running   0          80s\ncert-manager-d894bbbd4-zd8ns               1/1     Running   0          80s\ncert-manager-webhook-869674f96f-cgp92      1/1     Running   0          80s\n</code></pre>","tags":["K8S","MLOps"]},{"location":"notehub/mlops/kserve_deploy/#kserve","title":"kserve \u90e8\u7f72","text":"","tags":["K8S","MLOps"]},{"location":"notehub/mlops/kserve_deploy/#_3","title":"\u5b89\u88c5","text":"<ul> <li>\u6587\u6863\u5730\u5740\uff1a \u5f53\u524d\u6700\u65b0\u7248\u672c v0.13.0</li> <li>\u5b89\u88c5\u6307\u5357</li> </ul> Bash<pre><code>kubectl apply -f https://github.com/kserve/kserve/releases/download/v0.13.0/kserve.yaml\n\nkubectl apply -f https://github.com/kserve/kserve/releases/download/v0.13.0/kserve-cluster-resources.yaml\n\n# \u4fee\u6539 inferenceservice-config \u7684\u90e8\u7f72\u6a21\u578b\u4e3a RawDeployment\nkubectl patch configmap/inferenceservice-config -n kserve --type=strategic -p '{\"data\": {\"deploy\": \"{\\\"defaultDeploymentMode\\\": \\\"RawDeployment\\\"}\"}}'\n\n\n# \u5c06kserve.yaml\u4e2dingressClassName\u7684\u503c\u4fee\u6539\u4e3anginx\uff0c\u9ed8\u8ba4\u503c\u4e3aistio\ningress: |-\n{\n    \"ingressClassName\" : \"nginx\",\n}\n</code></pre>","tags":["K8S","MLOps"]},{"location":"notehub/mlops/kserve_deploy/#_4","title":"\u6d4b\u8bd5","text":"<ol> <li>\u65b0\u5efa\u4e00\u4e2a Namespace</li> </ol> <p>\u4e0d\u8981\u653e\u5728\u9ed8\u8ba4 namespace \u4e0b\uff0c\u5f88\u91cd\u8981\u5f88\u5173\u952e\uff0c </p> Bash<pre><code>kubectl create namespace test\n</code></pre> <ol> <li>\u521b\u5efa\u4e00\u4e2a inferenceservice</li> </ol> <p>\u5b98\u65b9\u7684\u6848\u4f8b\u7684 yaml \u4e2d\uff0c\u5e76\u6ca1\u6709\u6307\u5b9a namespace\uff0c\u5982\u679c\u6267\u884c\u4e0b\u5217\u547d\u4ee4\u5c31\u4f1a\u521b\u5efa\u5230\u9ed8\u8ba4 namespace \u4e0b\uff0c\u540e\u7eed\u90e8\u7f72\u6a21\u578b\u5c31\u4f1a\u9047\u5230\u95ee\u9898\uff0c\u8be5\u95ee\u9898\u6392\u67e5\u4e86\u597d\u4e45\u3002 </p> <ul> <li>\u5b98\u7f51\u793a\u4f8b</li> </ul> Bash<pre><code>kubectl apply -n test -f - &lt;&lt;EOF\napiVersion: \"serving.kserve.io/v1beta1\"\nkind: \"InferenceService\"\nmetadata:\n  name: \"sklearn-iris\"\nspec:\n  predictor:\n    model:\n      modelFormat:\n        name: sklearn\n      storageUri: \"gs://kfserving-examples/models/sklearn/1.0/model\"\nEOF\n</code></pre> <ul> <li>\u5bf9\u4e0a\u8ff0\u5185\u5bb9\u8fdb\u884c\u4fee\u6539\u3002<ul> <li>\u65b0\u5efa yaml \u6587\u4ef6(sklearn-iris-model.yaml)</li> </ul> </li> </ul> YAML<pre><code>apiVersion: \"serving.kserve.io/v1beta1\"\nkind: \"InferenceService\"\nmetadata:\n  name: \"sklearn-iris-1\"\n  namespace: \"test\"  # \u8fd9\u4e2a\u5f88\u5173\u952e\u5f88\u91cd\u8981\nspec:\n  predictor:\n    model:\n      modelFormat:\n        name: sklearn\n      storageUri: \"http://172.16.x.xx:9999/model.joblib\"\n</code></pre> <ul> <li> <p>\u7531\u4e8e\u5b98\u65b9\u7ed9\u7684\u793a\u4f8b\u7684\u6a21\u578b\u5b58\u50a8\u5728 gs \u4e0a\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u65e0\u6cd5\u76f4\u63a5\u4e0b\u8f7d\uff0c\u6211\u4e2a\u4eba\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\u590d\u5236storageUri \u7684\u5730\u5740\uff08models/sklearn/1.0/model\uff09\uff0c\u70b9\u5f00\u5e73\u53f0\u4e0b\u8f7d\u94fe\u63a5\u7684\u540e\uff0c\u5c06\u8def\u5f84\u62fc\u5728\u540e\u9762\u8fdb\u884c\u4e0b\u8f7d\u5230\u672c\u5730\uff08\u9700\u8981\u6ce8\u610f\uff0c\u9700\u8981\u4e0b\u8f7d\u8be5\u6a21\u578b\u524d\u7f00\u4e0b\u7684\u6240\u6709\u8d44\u6e90\uff0c\u5e76\u653e\u5230\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0b\uff09\uff0c\u7136\u540e\u5728\u4e0a\u4f20\u5230\u90e8\u7f72\u7684\u73af\u5883\u4e2d\u3002   </p> </li> <li> <p>\u5728\u6a21\u578b\u6587\u4ef6\u5939\u4e0b\uff0c\u542f\u52a8\u4e00\u4e2a httpserver</p> </li> </ul> <p>\u8be5\u6b65\u9aa4\u975e\u5fc5\u987b\uff0c\u5982\u679c\u53ef\u4ee5\u76f4\u63a5\u4ece gs \u4e0b\uff0c\u5219\u5ffd\u7565\u8fd9\u4e00\u6b65\u3002\u542f\u52a8\u5916\u90e8\u670d\u52a1\u7684\u76ee\u7684\u662f\u80fd\u591f\u8ba9 kserve \u80fd\u591f\u53bb\u4e0b\u8f7d\u6a21\u578b </p> Bash<pre><code>(base) [root@node77 test-kserve-deploy]# python -m http.server 9999\nServing HTTP on 0.0.0.0 port 9999 (http://0.0.0.0:9999/) ...\n127.0.0.1 - - [03/Sep/2024 12:19:13] \"GET / HTTP/1.1\" 200 -\n\n(base) [root@node77 kserve]# curl 127.0.0.1:9999\n&lt;!DOCTYPE HTML&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\"&gt;\n&lt;title&gt;Directory listing for /&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Directory listing for /&lt;/h1&gt;\n&lt;hr&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\"mlflow-iris.yml\"&gt;mlflow-iris.yml&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"mlflow-wine-model.yaml\"&gt;mlflow-wine-model.yaml&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"mlflow_wine/\"&gt;mlflow_wine/&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"mlflow_wine.zip\"&gt;mlflow_wine.zip&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"my_model/\"&gt;my_model/&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"my_model.zip\"&gt;my_model.zip&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"python_env.yaml\"&gt;python_env.yaml&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"python_model.pkl\"&gt;python_model.pkl&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"sklearn_iris/\"&gt;sklearn_iris/&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"tmp/\"&gt;tmp/&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n(base) [root@node77 kserve]#\n</code></pre> <ul> <li>\u6267\u884c yaml \u6587\u4ef6</li> </ul> Bash<pre><code># \u5728\u6b64\u76ee\u5f55\u4e0b\n(base) [root@node77 sklearn_iris]# ls\nmodel.joblib  sklearn-iris-model.yaml\n\n# \u6267\u884c\u547d\u4ee4\nkubectl apply -f sklearn-iris-model.yaml\n</code></pre> <ul> <li>\u67e5\u770b\u6a21\u578b\u90e8\u7f72\u72b6\u6001</li> </ul> Bash<pre><code>(base) [root@node77 sklearn_iris]# kubectl get all -n test\nNAME                                            READY   STATUS    RESTARTS   AGE\npod/sklearn-iris-1-predictor-84d48876bb-wvlm7   1/1     Running   0          40s\n\nNAME                               TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)   AGE\nservice/sklearn-iris-1-predictor   ClusterIP   10.96.0.243   &lt;none&gt;        80/TCP    40s\n\nNAME                                       READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/sklearn-iris-1-predictor   1/1     1            1           40s\n\nNAME                                                  DESIRED   CURRENT   READY   AGE\nreplicaset.apps/sklearn-iris-1-predictor-84d48876bb   1         1         1       40s\n\nNAME                                                           REFERENCE                             TARGETS         MINPODS   MAXPODS   REPLICAS   AGE\nhorizontalpodautoscaler.autoscaling/sklearn-iris-1-predictor   Deployment/sklearn-iris-1-predictor   &lt;unknown&gt;/80%   1         1         1          40s\n</code></pre> <ul> <li>\u67e5\u770b inferenceservice \u72b6\u6001</li> </ul> Bash<pre><code>(base) [root@node77 sklearn_iris]# kubectl get inferenceservice -n test\nNAME             URL                                      READY   PREV   LATEST   PREVROLLEDOUTREVISION   LATESTREADYREVISION   AGE\nsklearn-iris-1   http://sklearn-iris-1-test.example.com   True                                                                  5m48s\n</code></pre> <p>\u4f7f\u7528 ingress \u6d4b\u8bd5</p> <ul> <li>\u67e5\u770b ingress-nginx \u8bbf\u95ee\u5730\u5740</li> </ul> Bash<pre><code>(base) [root@node77 sklearn_iris]# kubectl get svc -n test\nNAME                       TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)   AGE\nsklearn-iris-1-predictor   ClusterIP   10.96.0.243   &lt;none&gt;        80/TCP    7m2s\n</code></pre> <ul> <li>\u7f16\u5199\u8f93\u5165\u53c2\u6570 \u6587\u4ef6\uff0cinput.json</li> </ul> JSON<pre><code>{\n  \"instances\": [\n    [6.8,  2.8,  4.8,  1.4],\n    [6.0,  3.4,  4.5,  1.6]\n  ]\n}\n</code></pre> <ul> <li>\u7f16\u5199\u6d4b\u8bd5\u811a\u672c</li> </ul> Bash<pre><code>#!/bin/bash\n\n# nginx ingress \u7684\u8bbf\u95ee\u5730\u5740\nINGRESS_HOST=10.96.0.243\nINGRESS_PORT=80\n\nMODEL_NAME=sklearn-iris-1\nINPUT_PATH=@./input.json\n\nSERVICE_HOSTNAME=$(kubectl get inferenceservice ${MODEL_NAME} -o jsonpath='{.status.url}' | cut -d \"/\" -f 3)\n\n# \u4f7f\u7528 curl \u53d1\u8d77\u8bf7\u6c42\ncurl -H \"Content-Type: application/json\" -H \"Host: ${SERVICE_HOSTNAME}\" http://${INGRESS_HOST}:${INGRESS_PORT}/v1/models/$MODEL_NAME:predict -d $INPUT_PATH\n</code></pre> <ul> <li>\u6267\u884c\u6d4b\u8bd5 <code>sh -x infer_test.sh</code></li> <li>\u6d4b\u8bd5\u7ed3\u679c\u5982\u4e0b\u56fe</li> </ul> <p></p>","tags":["K8S","MLOps"]},{"location":"notehub/solution/","title":"SolutionHub","text":"<p>Tip</p> <p>\u8fd9\u91cc\u662fSolutionHub\uff0c\u7528\u4e8e\u8bb0\u5f55\u548c\u603b\u7ed3\u6211\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\u9047\u5230\u7684\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"notehub/solution/#bug","title":"Bug\u603b\u7ed3","text":"<ul> <li> Jupyter matplotlib\u753b\u56fe\u4e2d\u6587\u5b57\u4f53\u7f3a\u5931\uff082022-09-26\uff09</li> <li> Jupyter\u8fd0\u884casyncio run\u62a5\u9519\uff082022-08-30\uff09</li> <li> \u591a\u8bed\u8a00\u4e4b\u95f4\u7684RSA\u52a0\u89e3\u5bc6\u95ee\u9898\uff082022-07-28\uff09</li> <li> Conda\u4fee\u6539\u865a\u62df\u73af\u5883\u540d\u5bfc\u81f4\u5f02\u5e38\uff082022-07-08\uff09</li> <li> window\u73af\u5883\u4e2dpip\u5b89\u88c5\u62a5\u9519\uff082022-01-05\uff09</li> <li> Jupyterhub\u79bb\u7ebf\u90e8\u7f72\u8e29\u5751\u603b\u7ed3\uff082022-01-02)</li> </ul>"},{"location":"notehub/solution/#_1","title":"\u8fd0\u7ef4\u624b\u8bb0","text":"<ul> <li> Mac\u4f7f\u7528brew services\u62a5\u9519\uff082023-05-06\uff09</li> <li> win10\u7684cmd\u4e2d\u64cd\u4f5cgit\u4e2d\u6587\u4e71\u7801\u89e3\u51b3\u65b9\u6cd5\uff082023-04-06\uff09</li> <li> Centos\u7684yum\u6e90\u8bef\u5220\u89e3\u51b3\u65b9\u6cd5\uff082022-07-06\uff09</li> <li> \u670d\u52a1\u5668\u78c1\u76d8\u7a7a\u95f4\u6ee1\u7684\u89e3\u51b3\u529e\u6cd5\uff082022-02-06\uff09</li> </ul>"},{"location":"notehub/solution/bughub/conda_rename_env_bug/","title":"Conda\u4fee\u6539\u865a\u62df\u73af\u5883\u540d\u5bfc\u81f4\u5f02\u5e38","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/conda_rename_env_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<p>\u7531\u4e8e\u4e0d\u540c\u7684\u5f00\u53d1\u4eba\u5458\u5bf9conda\u73af\u5883\u540d\u7684\u7684\u547d\u540d\u98ce\u683c\u4e0d\u7edf\u4e00\uff0c\u5728\u4ea4\u4ed8\u90e8\u7f72\u65f6\uff0c\u4e3a\u4e86\u98ce\u683c\u7edf\u4e00\uff0c\u4fbf\u4e8e\u7ba1\u7406\uff0c\u4e8e\u662f\u5c31\u5bf9\u5176\u4ed6\u670d\u52a1\u7684\u73af\u5883\u540d\u8fdb\u884c\u7684mv\u64cd\u4f5c\uff0c\u5bfc\u81f4\u73af\u5883\u5305\u627e\u4e0d\u5230</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/conda_rename_env_bug/#bug","title":"Bug\u73b0\u573a","text":"Bash<pre><code>(project-service-py38env) [root@2-120 project-service]# bash run_server.sh\nrun_server.sh: /data/bluewhale/software/anaconda3/envs/project-service-py38env/bin/gunicorn: /data/bluewhale/software/anaconda3/envs/pms_py38env/bin/python: \u574f\u7684\u89e3\u91ca\u5668: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\n</code></pre> Bash<pre><code>#!/bin/bash\ngunicorn main:app -b 0.0.0.0:30010 -w 4 -k uvicorn.workers.UvicornH11Worker --daemon\n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/conda_rename_env_bug/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"<p>\u6839\u56e0\u5206\u6790\uff1a</p> <ol> <li>\u6267\u884cgunicorn\u547d\u4ee4\u65f6\uff0c\u4e3a\u4ec0\u4e48\u8fd8\u4f1a\u4f7f\u7528\u539f\u6765\u73af\u5883\u540d\u7684python\u89e3\u91ca\u5668\uff1f</li> <li>\u4e8e\u662f\u627e\u5230gunicorn\u7684\u53ef\u6267\u884c\u6587\u4ef6\u8def\u5f84\uff0c\u6253\u5f00\u770b\u4e00\u4e0b\u662f\u4e0d\u662f\u54ea\u91cc\u5bf9python\u89e3\u91ca\u5668\u7684\u8def\u5f84\u8fdb\u884c\u7684\u786c\u7f16\u7801\uff0c\u4e8e\u662f\u6253\u5f00gunicorn\u6587\u4ef6,\u67e5\u770b</li> </ol> Python<pre><code>#!/data/bluewhale/software/anaconda3/envs/pms_py38env/bin/python\n# -*- coding: utf-8 -*-\nimport re\nimport sys\nfrom gunicorn.app.wsgiapp import run\nif __name__ == '__main__':\n    sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])\n    sys.exit(run())\n~\n</code></pre> <ol> <li>\u679c\u7136\u7b2c\u4e00\u884c\u8fdb\u884c\u7684python\u89e3\u91ca\u5668\u8def\u5f84\u7684\u914d\u7f6e</li> <li>\u7ecf\u8fc7\u67e5\u9605\uff0c\u53d1\u73b0conda\u6ca1\u6709\u63d0\u4f9b\u8fd9\u79cd\u4fee\u6539\u6587\u4ef6\u540d\u5bf9\u73af\u5883\u540d\u8fdb\u884c\u4fee\u6539\u7684\u64cd\u4f5c\uff0c\u56e0\u4e3a\u73af\u5883\u91cc\u6709\u5f88\u591a\u7684\u811a\u672c\u6587\u4ef6\u90fd\u914d\u7f6e\u4e86\u518d\u6700\u521d\u521b\u5efa\u73af\u5883\u540d\u65f6\u8bbe\u7f6e\u7684python\u89e3\u91ca\u5668\u8def\u5f84\uff0c\u4e8e\u662f\u4e4e\u60f3\u5230\u4e86\u4e86\u4e00\u4e2a\u547d\u4ee4\uff0c--clone</li> <li>\u5f00\u59cb\u5c1d\u8bd5,\u628a\u4e4b\u524d\u901a\u8fc7mv\u547d\u4ee4\u91cd\u547d\u540d\u7684\u6587\u4ef6\u540d\u4fee\u6539\u4e3a\u539f\u6765\u7684\u540d\u5b57\uff0c\u7136\u540e\u5728\u4f7f\u7528clone\u547d\u4ee4</li> </ol> Bash<pre><code>(pms_py38env) [root@2-120 project-service]# conda create -n project-service-py38env --clone pms_py38env\nSource:      /data/bluewhale/software/anaconda3/envs/pms_py38env\nDestination: /data/bluewhale/software/anaconda3/envs/project-service-py38env\nPackages: 20\nFiles: 3367\nPreparing transaction: done\nVerifying transaction: done\nExecuting transaction: done\n#\n# To activate this environment, use\n#\n#     $ conda activate project-service-py38env\n#\n# To deactivate an active environment, use\n#\n#     $ conda deactivate\n</code></pre> <ol> <li>\u6fc0\u6d3b\u73af\u5883\uff0c\u91cd\u65b0\u8fd0\u884c\uff0c\u53d1\u73b0\u95ee\u9898\u89e3\u51b3\uff0c\u518d\u6b21\u6253\u5f00gunicorn\u811a\u672c\u6587\u4ef6\u67e5\u770b\uff0c\u7ed3\u679c\u9a8c\u8bc1\u4e86\u7b2c\u4e8c\u6b65\u7684\u731c\u60f3\u3002</li> </ol> <p>\u603b\u7ed3\uff1a</p> <ol> <li>conda\u73af\u5883\u7684\u91cd\u547d\u540d\u64cd\u4f5c\uff0c\u9700\u8981\u4f7f\u7528conda create -n  --clone  <li>\u975e\u5fc5\u8981\u60c5\u51b5\u4e0b\uff0c\u4e0d\u8981\u8f7b\u6613\u4fee\u6539\u73af\u5883\u540d\uff0c\u4e14\u4e0d\u8981\u60f3\u5f53\u7136\u7684\u8ba4\u4e3a\u4fee\u6539\u73af\u5883\u540d\u5c31\u662f\u91cd\u547d\u540d\u64cd\u4f5c\u3002</li> <p>2022\u5e7407\u670808\u65e513:04:56</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/","title":"Jupyter\u8fd0\u884casyncio run\u62a5\u9519","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<ul> <li>\u5728jupyter\u4e2d\u8fd0\u884c\u4e0b\u4e86\u4ee3\u7801 Python<pre><code>import asyncio\n\nasync def fake_page(url):\n    print(f\"faking:{url}\")\n    sleep_time = int(url.split('_')[-1])\n    await asyncio.sleep(sleep_time)\n    print(f\"OK\uff1a{url}\")\n\nasync def main(urls):\n    for url in urls:\n        await fake_page(url)\n\n\n%time asyncio.run(main(['url1', 'url2', 'url3', 'url4']))  # %time\u662fjupyter\u7684\u8bed\u6cd5\n</code></pre></li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#bug","title":"Bug\u73b0\u573a","text":"Python<pre><code>RuntimeError: asyncio.run() cannot be called from a running event loop\n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_3","title":"\u6839\u56e0\u5206\u6790\uff1a","text":"<p>\u53c2\u8003\u4e86\u4e0b\u5217\u94fe\u63a5\u7684\u5185\u5bb9\uff1a - https://stackoverflow.com/questions/55409641/asyncio-run-cannot-be-called-from-a-running-event-loop - https://github.com/jupyter/notebook/issues/3397</p> <ul> <li>\u521d\u6b65\u7ed3\u8bba\u662fjupyter\u4f9d\u8d56tornado\uff0c\u9ed8\u8ba4\u542f\u52a8\u4e86event loop</li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_4","title":"\u5b9e\u8df5\u6c42\u8bc1\uff1a","text":"<ul> <li> <p>\u5728jupyter\u4e2d\u8f93\u5165 Python<pre><code>import asyncio\n\nasyncio.get_event_loop()\n\n# &gt;&gt;&gt;\n&lt;_UnixSelectorEventLoop running=True closed=False debug=False&gt;\n</code></pre></p> </li> <li> <p>\u5728terminal\u4e2d\u8f93\u5165ipython\uff0c\u7136\u540e\u5728\u8f93\u5165\u4e0b\u5217\u5185\u5bb9 Python<pre><code>In [1]: import asyncio\n\nIn [2]: asyncio.get_event_loop()\nOut[2]: &lt;_UnixSelectorEventLoop running=False closed=False debug=False&gt;\n</code></pre></p> </li> </ul> <p>\u7ed3\u8bba\uff1a\u786e\u5b9ejupyter\u9ed8\u8ba4\u542f\u52a8\u4e86event loop</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_asyncio_run_bug/#_5","title":"\u89e3\u51b3\u65b9\u5f0f","text":"<ul> <li> <p>\u5728jupyter\u4e2d\u5728\u8f93\u5165\u5e76\u8fd0\u884c\u4e0b\u5217\u5185\u5bb9 Python<pre><code>!pip install nest_asyncio  # \u5b89\u88c5\n\nimport nest_asyncio  \nnest_asyncio.apply()\n</code></pre></p> </li> <li> <p>\u518d\u8fd0\u884c\u5f00\u5934\u90a3\u6bb5\u7a0b\u5e8f\uff0c\u62a5\u9519\u89e3\u51b3</p> </li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/","title":"Jupyter matplotlib\u753b\u56fe\u4e2d\u6587\u5b57\u4f53\u7f3a\u5931","text":"<p>\u7cfb\u7edf\uff1aMacOS 2022\u5e7409\u670826\u65e522:48:08</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<ul> <li>\u5728jupyterlab\u4e2d\u4f7f\u7528matplotlib\u753b\u56fe\uff0c\u56fe\u7684\u5750\u6807\u8f74\u4e2d\u6587\u5b57\u4f53\u4e0d\u663e\u793a\uff0c\u4e14jupyter cell \u629b\u51fa \u7f3a\u5931\u5f53\u524d\u5b57\u4f53</li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#bug","title":"Bug\u73b0\u573a","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_3","title":"\u6839\u56e0\u5206\u6790","text":"<ul> <li>\u6839\u636e\u9519\u8bef\u5806\u6808\u4fe1\u606f\u53ef\u770b\u51fa\uff0cmatplotlib\u9ed8\u8ba4\u4e0d\u81ea\u5e26\u4e2d\u6587\u5b57\u4f53\uff0c</li> <li>\u9700\u8981\u5148\u4e0b\u8f7d\u4e2d\u6587\u5b57\u4f53\uff0c\u653e\u5230\u5bf9\u5e94\u73af\u5883\u5305\u7684\u8def\u5f84\u4e0b</li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_4","title":"\u5b9e\u8df5\u6c42\u8bc1","text":"<ul> <li> <p>\u5728\u865a\u62df\u73af\u5883\u4e2d\u8fdb\u5165matplotlib\u5305\u4e0b\u67e5\u770b Bash<pre><code>(jupyter_py38env) \u279c  fonts cd ttf\n(jupyter_py38env) \u279c  ttf pwd\n/usr/local/Caskroom/miniforge/base/envs/jupyter_py38env/lib/python3.8/site-packages/matplotlib/mpl-data/fonts/ttf\n(jupyter_py38env) \u279c  ttf ls\nDejaVuSans-Bold.ttf            LICENSE_DEJAVU                 STIXSizOneSymReg.ttf\nDejaVuSans-BoldOblique.ttf     LICENSE_STIX                   STIXSizThreeSymBol.ttf\nDejaVuSans-Oblique.ttf         STIXGeneral.ttf                STIXSizThreeSymReg.ttf\nDejaVuSans.ttf                 STIXGeneralBol.ttf             STIXSizTwoSymBol.ttf\nDejaVuSansDisplay.ttf          STIXGeneralBolIta.ttf          STIXSizTwoSymReg.ttf\nDejaVuSansMono-Bold.ttf        STIXGeneralItalic.ttf          cmb10.ttf\nDejaVuSansMono-BoldOblique.ttf STIXNonUni.ttf                 cmex10.ttf\nDejaVuSansMono-Oblique.ttf     STIXNonUniBol.ttf              cmmi10.ttf\nDejaVuSansMono.ttf             STIXNonUniBolIta.ttf           cmr10.ttf\nDejaVuSerif-Bold.ttf           STIXNonUniIta.ttf              cmss10.ttf\nDejaVuSerif-BoldItalic.ttf     STIXSizFiveSymReg.ttf          cmsy10.ttf\nDejaVuSerif-Italic.ttf         STIXSizFourSymBol.ttf          cmtt10.ttf\nDejaVuSerif.ttf                STIXSizFourSymReg.ttf\nDejaVuSerifDisplay.ttf         STIXSizOneSymBol.ttf\n(jupyter_py38env) \u279c  ttf\n</code></pre></p> </li> <li> <p>\u786e\u5b9e\u6ca1\u6709\u627e\u5230\u4e2d\u6587\u5b57\u4f53</p> </li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyter_matplotlib_font_bug/#_5","title":"\u89e3\u51b3\u65b9\u5f0f","text":"<ol> <li> <p>\u627e\u5230Mac\u4e2dPython\u4f7f\u7528\u7684\u5b57\u4f53\u5e93\u7684\u4f4d\u7f6e Python<pre><code>In [1]: import matplotlib\n\n# \u67e5\u627e\u5b57\u4f53\u8def\u5f84\nIn [2]: print(matplotlib.matplotlib_fname())\n/usr/local/Caskroom/miniforge/base/envs/jupyter_py38env/lib/python3.8/site-packages/matplotlib/mpl-data/matplotlibrc\n\n# \u67e5\u770b\u5b57\u4f53\u7f13\u5b58\u8def\u5f84\nIn [3]: print(matplotlib.get_cachedir())\n/Users/roninsswang/.matplotlib\n</code></pre></p> </li> <li> <p>\u4e0b\u8f7d\u5b57\u4f53</p> </li> <li>\u5e38\u89c1\u4e2d\u82f1\u6587\u5b57\u4f53\u5bf9\u7167\u540d\u79f0</li> </ol> <p></p> <ul> <li>\u4e0b\u8f7d\u9700\u8981\u7684\u5b57\u4f53\uff0c\u6b64\u5904\u4e0b\u8f7dSimHei</li> <li>\u4e0b\u8f7d\u94fe\u63a5\uff1ahttp://d.xiazaiziti.com/en_fonts/fonts/s/SimHei.ttf</li> <li> <p>\u5c06\u4e0b\u8f7d\u7684\u5b57\u4f53\u79fb\u52a8\u5230matplotlib\u7684\u5b57\u4f53\u5e93\u7684\u4f4d\u7f6e Bash<pre><code>(jupyter_py38env) \u279c  ttf pwd\n/usr/local/Caskroom/miniforge/base/envs/jupyter_py38env/lib/python3.8/site-packages/matplotlib/mpl-data/fonts/ttf\n(jupyter_py38env) \u279c  ttf ls\nDejaVuSans-Bold.ttf            LICENSE_DEJAVU                 STIXSizOneSymReg.ttf\nDejaVuSans-BoldOblique.ttf     LICENSE_STIX                   STIXSizThreeSymBol.ttf\nDejaVuSans-Oblique.ttf         STIXGeneral.ttf                STIXSizThreeSymReg.ttf\nDejaVuSans.ttf                 STIXGeneralBol.ttf             STIXSizTwoSymBol.ttf\nDejaVuSansDisplay.ttf          STIXGeneralBolIta.ttf          STIXSizTwoSymReg.ttf\nDejaVuSansMono-Bold.ttf        STIXGeneralItalic.ttf          SimHei.ttf\nDejaVuSansMono-BoldOblique.ttf STIXNonUni.ttf                 cmb10.ttf\nDejaVuSansMono-Oblique.ttf     STIXNonUniBol.ttf              cmex10.ttf\nDejaVuSansMono.ttf             STIXNonUniBolIta.ttf           cmmi10.ttf\nDejaVuSerif-Bold.ttf           STIXNonUniIta.ttf              cmr10.ttf\nDejaVuSerif-BoldItalic.ttf     STIXSizFiveSymReg.ttf          cmss10.ttf\nDejaVuSerif-Italic.ttf         STIXSizFourSymBol.ttf          cmsy10.ttf\nDejaVuSerif.ttf                STIXSizFourSymReg.ttf          cmtt10.ttf\nDejaVuSerifDisplay.ttf         STIXSizOneSymBol.ttf\n(jupyter_py38env) \u279c  ttf\n</code></pre></p> </li> <li> <p>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6matplotlibrc</p> </li> <li> <p>\u8fdb\u5165\u4e0b\u5217\u8def\u5f84\u4e0b\uff1a Bash<pre><code>(jupyter_py38env) \u279c  mpl-data pwd\n/usr/local/Caskroom/miniforge/base/envs/jupyter_py38env/lib/python3.8/site-packages/matplotlib/mpl-data\n</code></pre></p> </li> <li> <p>\u7f16\u8f91\u3001\u4fdd\u5b58\u9000\u51fa</p> </li> </ul> <p></p> <ol> <li> <p>\u6e05\u9664\u7f13\u5b58 Bash<pre><code>rm -rf /Users/roninsswang/.matplotlib\n</code></pre></p> </li> <li> <p>\u91cd\u542fjupyterlab \uff0c\u518d\u6b64\u8fd0\u884c\uff0cBug\u89e3\u9664\u3002</p> </li> </ol>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyterhub_deploy_bug/","title":"Jupyterhub\u79bb\u7ebf\u90e8\u7f72\u8e29\u5751\u603b\u7ed3","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyterhub_deploy_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<p>\u5ba2\u6237\u5185\u7f51\u670d\u52a1\u5668\u90e8\u7f72\uff0c\u53ea\u6709\u7279\u5b9a\u7aef\u53e38888\uff0c\u53ea\u6709\u7279\u5b9apip\u5b89\u88c5\u6e90</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/jupyterhub_deploy_bug/#_2","title":"\u8fce\u5203\u800c\u89e3\uff1a","text":"<ol> <li>\u5b89\u88c5python</li> <li>\u521b\u5efa\u865a\u62df\u73af\u5883virtualenv,\u6700\u597d\u5c06\u5b89\u88c5virtualenv\u7684\u6587\u4ef6\u5939\u7684\u6743\u9650\u8c03\u6574711\u4ee5\u4e0a\uff0c\u5426\u5219\u591a\u7528\u6237\u4f1a\u7528\u6743\u9650\u95ee\u9898\uff08\u6b64\u5904\u8e29\u5751\u8f83\u957f\uff0c\u9664\u4e86\u91cd\u65b0\u90e8\u7f72\u4ee5\u5916\uff0c\u4fee\u6539\u6587\u4ef6\u5939\u7684\u5bf9\u5e94\u53ef\u6267\u884c\u6743\u9650\u5e94\u8be5\u662f\u5de5\u4f5c\u91cf\u6700\u5c0f\u7684\u505a\u6cd5\u3002\uff09</li> <li>\u6fc0\u6d3b\u865a\u62df\u73af\u5883\uff0csource /\u6216\u4f7f\u7528workon</li> <li>\u5b89\u88c5pip\u4f9d\u8d56\u5305</li> <li>\u4e0b\u8f7dnode\u6e90\u7801\uff0c\u8fdb\u884c\u79bb\u7ebf\u5b89\u88c5</li> <li>\u4e0b\u8f7dconfigurable-http-proxy\uff0c\u6700\u4f73\u5b9e\u8df5\u662f\uff1a\u5728\u6709\u7f51\u7684\u73af\u5883\u4e2d\uff0c\u65b0\u5efa\u4e00\u4e2a\u7a7a\u76ee\u5f55\uff0c\u5728\u6b64\u76ee\u5f55\u4e0b\u6267\u884c\uff1anpm install configurable-http-proxy ,\u5b89\u88c5\u5b8c\u6210\u4ee5\u540e\uff0c\u5c06\u8be5\u6587\u4ef6\u5939\u7684node_modules\u7684\u5185\u5bb9\u5168\u90e8\u79fb\u52a8\u670d\u52a1\u4e2d\u7684node/lib/node_module\u4e0b\uff0c\u5373\u53ef\uff0c\u6b64\u5904\u8e29\u5751\u5b9e\u8df5\u8f83\u957f</li> <li>\u751f\u6210\u914d\u7f6e\u5e76\u4fee\u6539\u914d\u7f6e</li> </ol> Python<pre><code>c.JupyterHub.base_url = '/jupyterhub'\nc.JupyterHub.ip = \"10.19.10.2\"\nc.Spawner.default_url = '/lab'\nc.PAMAuthenticator.open_sessions = False\nc.LocalAuthenticator.create_system_users = True\nc.Authenticator.admin_users = {'zhongtai'}  # #\u7ba1\u7406\u5458\u7528\u6237\nc.JupyterHub.admin_access = True\nc.JupyterHub.port = 8888\nc.Spawner.cmd = ['jupyterhub-singleuser']\n\nc.PAMAuthenticator.encoding = 'utf8'\nc.Authenticator.whitelist = {'hcjupyter','zhongtai'}  # \u767d\u540d\u5355\nc.JupyterHub.statsd_prefix = 'jupyterhub'\n#c.LocalProcessSpawner.shell_cmd = [\"bash\", \"-l\", \"-c\"]\nc.JupyterHub.proxy_cmd = ['/usr/local/node/bin/configurable-http-proxy',]\nc.Authenticator.delete_invalid_users = True\n\n\n/opt/nodejs/bin/configurable-http-proxy\n</code></pre> <ol> <li>\u542f\u52a8\u547d\u4ee4</li> </ol> Bash<pre><code># \u5728\u865a\u62df\u73af\u5883\u4e2d\u6267\u884c\n# \u524d\u53f0\u542f\u52a8\njupyterhub -f /etc/jupyterhub/config.py\n\n# \u540e\u53f0\u542f\u52a8\nnohup jupyterhub -f /etc/jupyterhub/config.py --no-ssl &amp; \n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/","title":"\u591a\u8bed\u8a00\u4e4b\u95f4\u7684RSA\u52a0\u89e3\u5bc6\u95ee\u9898","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<p>\u5728\u5b8c\u6210\u521b\u5efa\u6570\u636e\u6e90\u7684\u9700\u6c42\u65f6\uff0c\u9700\u8981\u5bf9\u6570\u636e\u6e90\u7684\u7528\u6237\u5bc6\u7801\u7b49\u76f8\u5173\u654f\u611f\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u4f20\u9012\uff0cVue\u524d\u7aef\u52a0\u5bc6\uff0cJava\u540e\u7aef\u548cPython\u540e\u7aef\u89e3\u5bc6\u3002\u7ecf\u8fc7\u65b9\u6848\u8c03\u7814\u540e\uff0c\u6700\u7ec8\u786e\u5b9a\u91c7\u7528RSA\u52a0\u89e3\u5bc6\u7684\u65b9\u6848\u3002  </p>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#bug","title":"Bug\u73b0\u573a","text":"<p>\u7531Java\u540e\u7aef\u901a\u8fc7\u5de5\u5177\u751f\u6210\u516c\u79c1\u94a5\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u516c\u94a5\u7ed9\u5230\u524d\u7aef\uff0c\u524d\u7aef\u5728\u521b\u5efa\u6570\u636e\u6e90\u5229\u7528\u516c\u94a5\u5bf9\u7528\u6237\u8f93\u5165\u7684\u654f\u611f\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\uff0cJava\u670d\u52a1\u63a5\u6536\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u5e76\u4fdd\u5b58\u3002Python\u670d\u52a1\u9700\u8981\u5728\u4f7f\u7528\u6570\u636e\u6e90\u65f6\u8fdb\u884c\u654f\u611f\u4fe1\u606f\u89e3\u5bc6\uff0c\u6b64\u65f6\u9047\u5230\u7684\u95ee\u9898\u662f\uff0c\u7ecfjava\u670d\u52a1\u89e3\u5bc6\u6821\u9a8c\u901a\u8fc7\uff0c\u800cPython\u5219\u65e0\u6cd5\u8fdb\u884c\u89e3\u5bc6\u3002</p>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"<p>\u6839\u56e0\u5206\u6790\uff1a</p> <p>\u7ecf\u8fc7\u5bf9Java\u670d\u52a1\u548cPython\u670d\u52a1\u7684\u52a0j\u89e3\u5bc6\u5b9e\u73b0\u8fdb\u884c\u6df1\u5165\u7814\u7a76\uff0c\u53d1\u73b0Java\u4e2d\u4f7f\u7528\u7684PKCS8,\u800cPython\u4e2d\u53ea\u6709PKCS1\uff0c\u56e0\u4e3a\u6b64\u534f\u8bae\u4e0d\u5339\u914d\uff0c\u5bfc\u81f4\u65e0\u6cd5\u89e3\u5bc6\u3002</p> <p>PKCS #1\u4e3aOpenSSH\u9ed8\u8ba4\u4f7f\u7528\u7684\u52a0\u5bc6\u6807\u51c6 [^2]:PKCS #8\u4e3aJava\u9ed8\u8ba4\u4f7f\u7528\u7684\u52a0\u5bc6\u6807\u51c6</p> <p>\u65b9\u68481\u5c1d\u8bd5\uff1a\u8bd5\u56fe\u5728python\u7684\u5de5\u5177\u5305\u4e2d\u627e\u5230\u5173\u4e8ePKCS8\u7684\u5b9e\u73b0\uff0c\u672a\u679c\u3002</p> <p>\u65b9\u68482\u5c1d\u8bd5\uff1a\u8bd5\u56fe\u5728Java\u7684\u5de5\u5177\u5305\u4e2d\u627e\u5230\u5173\u4e8ePKCS1\u7684\u5b9e\u73b0\uff0c\u672a\u679c\u3002</p> <p>\u65b9\u68483\u5c1d\u8bd5\uff1a\u7ecf\u8fc7\u4e00\u756a\u641c\u7d22\uff0c\u627e\u5230\u4e00\u79cd\u601d\u8def\uff0c\u5c06PKCS8\u751f\u6210\u7684\u79c1\u94a5\u8f6c\u6362\u6210PKCS1\u7684\u79c1\u94a5\uff0c\u518d\u8fdb\u884c\u5c1d\u8bd5\uff0c\u6210\u529f\u3002</p> <p>\u5b8c\u6210\u6d41\u7a0b\u603b\u7ed3\uff1a</p> <ul> <li>\u4f7f\u7528openssl\u751f\u6210\u79d8\u94a5</li> </ul> Bash<pre><code>openssl genrsa -out private.pem 1024\n</code></pre> <ul> <li>\u67e5\u770b\u79c1\u94a5</li> </ul> Bash<pre><code>-----BEGIN RSA PRIVATE KEY-----\nMIICWwIBAAKBgQDAQWZDPB5q3B0hKNO8Schw4ihwrJAITWHMMImjSKcRUSbAaKsM\n3kLhI8Sx7mPHVW21W6X4MOWyPLAlAOfX3DWNSHBThsJKOEeIlNmZ68MjCE6hWx+W\nfpUtPWmj8CBNUuZrHmAip4/2TTMHEfJPPzRA5FBmzjH7cn/5w+QlZjeINwIDAQAB\nAoGAR4ILv0ZFKgnk68h7uLTY0OPNltsYV34wufnzt7/2JALDHx3PQWIKDiN3rZa1\nlha4T5RfDwlg5gKcoabMlQVbBSPtvr2Rw0v9z8Ib7fsPqDJWUAkFL24DijpVEHiV\n*******************\nw7ZTo+aFijPS3ngRL6ksmIM+gbMwFQBBgnlKgmSrsA7wjpql9A+LLLyLoxAg+hFf\n5HgxInkJAkEAyP4R3tT2i6s/ZT01RPhNYJaHlaRsHAluPlyRDKCf/TLnDTHfB141\nkflUi/kcOMrSnwBYCDn9zh0qpf4O26iHPwJAHrOxcvbILmIhPHQucxQ0vf+S+dhs\n43K/WlkQ85BdgCTR8GTEgmQQ7TnY1a57k10jacbFKRjb19aiwQwrSbXRyQJAIVro\npE47TBpzPt3VhUifrrPMdG0A8/YssXSzLaFKa76S0YHBPXvI8Byshz4kDNi7818f\nPN5C3H3CoiFzXciuCQJAbLm5SfxCony3z5jkkQRM8Agl7sPCEt095zVJX+ln7apv\nt9Ci4v8kwGLz8un7PmLOvmMh7GzSh6qx7PinpI1WRw==\n-----END RSA PRIVATE KEY-----\n</code></pre> <ul> <li>\u751f\u6210\u67e5\u770b\u516c\u94a5</li> </ul> Bash<pre><code>openssl rsa -in private.pem -out public.pem -pubout\n\n-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDAQWZDPB5q3B0hKNO8Schw4ihw\nrJAITWHMMImjSKcRUSbAaKsM3kLhI8Sx7mPHVW21W6X4MOWyPLAlAOfX3DWNSHBT\n*******************\nzjH7cn/5w+QlZjeINwIDAQAB\n-----END PUBLIC KEY-----\n</code></pre> <ul> <li>\u5c06PKCS1\u7684\u79c1\u94a5\u8f6c\u6362\u4e3aPKCS8</li> </ul> Bash<pre><code>openssl pkcs8 -topk8 -inform PEM -in private.pem -outform pem -nocrypt -out pkcs8.pem\n</code></pre> <ul> <li>\u914d\u7f6e\u5230\u4ee3\u7801\u4e2d\uff0c\u5373\u53ef</li> </ul> Text Only<pre><code>-----BEGIN PRIVATE KEY-----\nMIICdQIBADANBgkqhkiG9w0BAQEFAASCAl8wggJbAgEAAoGBAMBBZkM8HmrcHSEo\n07xJyHDiKHCskAhNYcwwiaNIpxFRJsBoqwzeQuEjxLHuY8dVbbVbpfgw5bI8sCUA\n59fcNY1IcFOGwko4R4iU2ZnrwyMITqFbH5Z+lS09aaPwIE1S5mseYCKnj/ZNMwcR\n8k8/NEDkUGbOMftyf/nD5CVmN4g3AgMBAAECgYBHggu/RkUqCeTryHu4tNjQ482W\n2xhXfjC5+fO3v/YkAsMfHc9BYgoOI3etlrWWFrhPlF8PCWDmApyhpsyVBVsFI+2+\nvZHDS/3Pwhvt+w+oMlZQCQUvbgOKOlUQeJXezM9Ax6VmBKjM3RqctZ6IPphpO2KX\n2wprrUzwBhQkCa7MgQJBAPTfMtWLBI3DvAnDtlOj5oWKM9LeeBEvqSyYgz6BszAV\nAEGCeUqCZKuwDvCOmqX0D4ssvIujECD6EV/keDEieQkCQQDI/hHe1PaLqz9lPTVE\n+E1gloeVpGwcCW4+XJEMoJ/9MucNMd8HXjWR+VSL+Rw4ytKfAFgIOf3OHSql/g7b\n\n*************\n\nrnuTXSNpxsUpGNvX1qLBDCtJtdHJAkAhWuikTjtMGnM+3dWFSJ+us8x0bQDz9iyx\ndLMtoUprvpLRgcE9e8jwHKyHPiQM2LvzXx883kLcfcKiIXNdyK4JAkBsublJ/EKi\nfLfPmOSRBEzwCCXuw8IS3T3nNUlf6Wftqm+30KLi/yTAYvPy6fs+Ys6+YyHsbNKH\nqrHs+KekjVZH\n-----END PRIVATE KEY-----\n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#_3","title":"\u6269\u5c55","text":"","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#python","title":"Python\u4ee3\u7801\u7247\u6bb5","text":"Python<pre><code>import base64\n# pip install pycryptodome\nfrom Crypto.Cipher import PKCS1_v1_5\nfrom Crypto.PublicKey import RSA\n\nPUBLIC_KEY = \"MRFM4nWu25GsG+gLwkqClZk1DUva\\nKfkKK73ZQ8mcLI3Pbx8zaX+1P38S7KUIOK8QI9gzsIZ0RMamOmrwl4ECAwEAAQ==\"\nPRIVATE_KEY = \"MIIBOQIBAA8mcLI3Pbx8z\\naX+1P38S7KUIOK8QI9gzsIZ0RMamOmrwl4ECAwEAAQJAdZzQARRCEZ1P9GkIVbVa\\naYWcXSe53Paet+YeteIN3xJELq4qYYuYAGlF2HmP9wpKZHXHdmlGEs8fi+pUMEGP\\n8QIhAOYVlA5Jihog5jSEb5S2Id7Z7LjrusLs67MtjjQzj3ddAiEAm1QpjN/QzB4l\\nRxIHG2BlzwmU/vSJYGH8ePkRMuC8knUCIHF+43HIxN7uq5/sVD4/OaX8SdFONupA\\nhGP2bNdDN9nhAiATKYXauD3VAJ8Orn2r9e95ZDA6Z8aO2mfAMNHbWfhJhQIgCtFH\\nzTtqqn/mgfftb/9g3vYyBRAz90vlKAaHgd9/U/k=\"\n\n\ndef decrypt(data: str, private_key: str) -&gt; str:\n    convert_data = base64.b64decode(bytes(data, encoding=\"utf8\"))\n    rsa_key = RSA.importKey(base64.b64decode(private_key))\n    cipher = PKCS1_v1_5.new(rsa_key)\n    return str(cipher.decrypt(convert_data, \"DecryptError\"), encoding='utf-8')\n\n\ndef encrypt(data: str, public_key: str) -&gt; str:\n    rsa_key = RSA.importKey(base64.b64decode(public_key))\n    cipher = PKCS1_v1_5.new(rsa_key)\n    result_data = cipher.encrypt(bytes(data, encoding=\"utf8\"))\n    return str(base64.b64encode(result_data), encoding='utf-8')\n\n\nif __name__ == '__main__':\n    encrypt_result = encrypt('123456', PUBLIC_KEY)\n    print(encrypt_result)\n    # encrypt_result = 'RZRbgTEEN9hXVdRab3wbCycIwWqBcGjRk9V2V0nDhKZwjgQ4pWHOu6A=='\n    decrypt_data = decrypt(encrypt_result, PRIVATE_KEY)\n    print(decrypt_data)\n</code></pre>","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#java","title":"Java\u4ee3\u7801\u7247\u6bb5","text":"Java","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#rsa_1","title":"RSA\u7684\u79d8\u94a5\u7c7b\u578b\u6c47\u603b","text":"PKCS \u7248\u672c \u540d\u79f0 \u7b80\u4ecb PKCS #1 [^1] 2.1 RSA\u5bc6\u7801\u7f16\u8bd1\u6807\u51c6\uff08RSA Cryptography Standard\uff09 \u5b9a\u4e49\u4e86RSA\u7684\u6570\u7406\u57fa\u7840\u3001\u516c/\u79c1\u94a5\u683c\u5f0f\uff0c\u4ee5\u53ca\u52a0/\u89e3\u5bc6\u3001\u7b7e/\u9a8c\u7ae0\u7684\u6d41\u7a0b\u30021.5\u7248\u672c\u66fe\u7ecf\u906d\u5230\u653b\u51fb\u3002 PKCS #2 - \u64a4\u9500 \u539f\u672c\u662f\u7528\u4ee5\u89c4\u8303RSA\u52a0\u5bc6\u6458\u8981\u7684\u8f6c\u6362\u65b9\u5f0f\uff0c\u73b0\u5df2\u88ab\u7eb3\u5165PKCS#1\u4e4b\u4e2d\u3002 PKCS #3 1.4 DH\u5bc6\u94a5\u534f\u8bae\u6807\u51c6\uff08Diffie-Hellman key agreement Standard\uff09 \u89c4\u8303\u4ee5DH\u5bc6\u94a5\u534f\u8bae\u4e3a\u57fa\u7840\u7684\u5bc6\u94a5\u534f\u8bae\u6807\u51c6\u3002\u5176\u529f\u80fd\uff0c\u53ef\u4ee5\u8ba9\u4e24\u65b9\u901a\u8fc7\u91d1\u8bae\u534f\u8bae\uff0c\u62df\u5b9a\u4e00\u628a\u4f1a\u8bae\u5bc6\u94a5(Session key)\u3002 PKCS #4 - \u64a4\u9500 \u539f\u672c\u7528\u4ee5\u89c4\u8303\u8f6c\u6362RSA\u5bc6\u94a5\u7684\u6d41\u7a0b\u3002\u5df2\u88ab\u7eb3\u5165PKCS#1\u4e4b\u4e2d\u3002 PKCS #5 2.0 \u5bc6\u7801\u57fa\u690d\u52a0\u5bc6\u6807\u51c6\uff08Password-based Encryption Standard\uff09 \u53c2\u89c1RFC 2898\u4e0ePBKDF2\u3002 PKCS #6 1.5 \u8bc1\u4e66\u6269\u5c55\u8bed\u6cd5\u6807\u51c6\uff08Extended-Certificate Syntax Standard\uff09 \u5c06\u539f\u672cX.509\u7684\u8bc1\u4e66\u683c\u5f0f\u6807\u51c6\u52a0\u4ee5\u6269\u5145\u3002 PKCS #7 1.5 \u5bc6\u7801\u6d88\u606f\u8bed\u6cd5\u6807\u51c6\uff08Cryptographic Message Syntax Standard\uff09 \u53c2\u89c1RFC 2315\u3002\u89c4\u8303\u4e86\u4ee5\u516c\u5f00\u5bc6\u94a5\u57fa\u7840\u8bbe\u65bd\uff08PKI\uff09\u6240\u4ea7\u751f\u4e4b\u7b7e\u540d/\u5bc6\u6587\u4e4b\u683c\u5f0f\u3002\u5176\u76ee\u7684\u4e00\u6837\u662f\u4e3a\u4e86\u62d3\u5c55\u6570\u5b57\u8bc1\u4e66\u7684\u5e94\u7528\u3002\u5176\u4e2d\uff0c\u5305\u542b\u4e86S/MIME\u4e0eCMS\u3002 PKCS #8 [^2] 1.2 \u79c1\u94a5\u6d88\u606f\u8868\u793a\u6807\u51c6\uff08Private-Key Information Syntax Standard\uff09. Apache\u8bfb\u53d6\u8bc1\u4e66\u79c1\u94a5\u7684\u6807\u51c6\u3002 PKCS #9 2.0 \u9009\u62e9\u5c5e\u6027\u683c\u5f0f\uff08Selected Attribute Types\uff09 \u5b9a\u4e49PKCS#6\u30017\u30018\u300110\u7684\u9009\u62e9\u5c5e\u6027\u683c\u5f0f\u3002 PKCS #10 1.7 \u8bc1\u4e66\u7533\u8bf7\u6807\u51c6\uff08Certification Request Standard\uff09 \u53c2\u89c1RFC 2986\u3002 \u89c4\u8303\u4e86\u5411\u8bc1\u4e66\u4e2d\u5fc3\u7533\u8bf7\u8bc1\u4e66\u4e4bCSR\uff08certificate signing request\uff09\u7684\u683c\u5f0f\u3002 PKCS #11 2.20 \u5bc6\u7801\u8bbe\u5907\u6807\u51c6\u63a5\u53e3\uff08Cryptographic Token Interface (Cryptoki)\uff09 \u5b9a\u4e49\u4e86\u5bc6\u7801\u8bbe\u5907\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff08API\uff09\u4e4b\u89c4\u683c\u3002 PKCS #12 1.0 \u4e2a\u4eba\u6d88\u606f\u4ea4\u6362\u6807\u51c6\uff08Personal Information Exchange Syntax Standard\uff09 \u5b9a\u4e49\u4e86\u5305\u542b\u79c1\u94a5\u4e0e\u516c\u94a5\u8bc1\u4e66\uff08public key certificate\uff09\u7684\u6587\u4ef6\u683c\u5f0f\u3002\u79c1\u94a5\u91c7\u5bc6\u7801(password)\u4fdd\u62a4\u3002\u5e38\u89c1\u7684PFX\u5c31\u5c65\u884c\u4e86PKCS#12\u3002 PKCS #13 \u2013 \u692d\u5706\u66f2\u7ebf\u5bc6\u7801\u5b66\u6807\u51c6\uff08Elliptic curve cryptography Standard\uff09 \u5236\u5b9a\u4e2d\u3002\u89c4\u8303\u4ee5\u692d\u5706\u66f2\u7ebf\u5bc6\u7801\u5b66\u4e3a\u57fa\u7840\u6240\u53d1\u5c55\u4e4b\u5bc6\u7801\u6280\u672f\u5e94\u7528\u3002\u692d\u5706\u66f2\u7ebf\u5bc6\u7801\u5b66\u662f\u65b0\u7684\u5bc6\u7801\u5b66\u6280\u672f\uff0c\u5176\u5f3a\u5ea6\u4e0e\u6548\u7387\u7686\u6bd4\u73b0\u884c\u4ee5\u6307\u6570\u8fd0\u7b97\u4e3a\u57fa\u7840\u4e4b\u5bc6\u7801\u5b66\u7b97\u6cd5\u6765\u7684\u4f18\u79c0\u3002\u7136\u800c\uff0c\u8be5\u7b97\u6cd5\u7684\u5e94\u7528\u5c1a\u4e0d\u666e\u53ca\u3002 PKCS #14 \u2013 \u62df\u968f\u673a\u6570\u4ea7\u751f\u5668\u6807\u51c6\uff08Pseudo-random Number Generation\uff09 \u5236\u5b9a\u4e2d\u3002\u89c4\u8303\u62df\u968f\u673a\u6570\u4ea7\u751f\u5668\u7684\u4f7f\u7528\u4e0e\u8bbe\u8ba1\u3002 PKCS #15 1.1 \u5bc6\u7801\u8bbe\u5907\u6d88\u606f\u683c\u5f0f\u6807\u51c6\uff08Cryptographic Token Information Format Standard\uff09 \u5b9a\u4e49\u4e86\u5bc6\u7801","tags":["Bug"]},{"location":"notehub/solution/bughub/rsa_encryption_bug/#rsa_2","title":"RSA\u7684\u683c\u5f0f\u8f6c\u6362","text":"Bash<pre><code># \u751f\u6210PKCS1\u79c1\u94a5\nopenssl genrsa -out private.pem 1024\n\n# PKCS1\u79c1\u94a5\u8f6c\u6362\u4e3aPKCS8\nopenssl pkcs8 -topk8 -inform PEM -in private.pem -outform pem -nocrypt -out pkcs8.pem\n\n# PKCS8\u79c1\u94a5\u8f6c\u6362\u4e3aPKCS1\nopenssl rsa -in pkcs8.pem -out pkcs1.pem\n\n# \u4ecePKCS1\u79c1\u94a5\u4e2d\u751f\u6210PKCS8\u516c\u94a5\nopenssl rsa -in private.pem -pubout -out public.pem\n\n# \u4ecePKCS8\u79c1\u94a5\u4e2d\u751f\u6210PKCS8\u516c\u94a5\nopenssl rsa -in pkcs8.pem -pubout -out public_pkcs8.pem\n\n# \u4ecePKCS8\u516c\u94a5\u8f6c\u6362PKCS1\u516c\u94a5\nopenssl rsa -pubin -in public_pkcs8.pem -RSAPublicKey_out\n\n# \u4ecePKCS1\u516c\u94a5\u8f6c\u6362PKCS8\u516c\u94a5\nopenssl rsa -RSAPublicKey_in -in pub_pkcs1.pem -pubout\n</code></pre> <ul> <li>\u53c2\u8003\u94fe\u63a5\uff1ahttps://daniao.ws/rsa-java-to-python.html</li> </ul>","tags":["Bug"]},{"location":"notehub/solution/bughub/window_install_pip_bug/","title":"window\u73af\u5883\u4e2dpip\u5b89\u88c5\u62a5\u9519","text":"<ul> <li> <p>\u9519\u8bef\u65e5\u5fd7 Bash<pre><code>(blogenv) \u03bb pip install mkdocs -i https://pypi.mirrors.ustc.edu.cn/simple/ --trusted-host pypi.douban.com       \nLooking in indexes: https://pypi.mirrors.ustc.edu.cn/simple/                                                    \nWARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nWARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nWARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nWARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nWARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken \nby 'SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))': /simple/mkdocs/           \nCould not fetch URL https://pypi.mirrors.ustc.edu.cn/simple/mkdocs/: There was a problem confirming the ssl cert\nificate: HTTPSConnectionPool(host='pypi.mirrors.ustc.edu.cn', port=443): Max retries exceeded with url: /simple/\nmkdocs/ (Caused by SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))) - skipping  \nERROR: Could not find a version that satisfies the requirement mkdocs                                           \nERROR: No matching distribution found for mkdocs                                                                \nCould not fetch URL https://pypi.mirrors.ustc.edu.cn/simple/pip/: There was a problem confirming the ssl certifi\ncate: HTTPSConnectionPool(host='pypi.mirrors.ustc.edu.cn', port=443): Max retries exceeded with url: /simple/pip\n/ (Caused by SSLError(SSLEOFError(8, 'EOF occurred in violation of protocol (_ssl.c:1131)'))) - skipping        \n</code></pre></p> </li> <li> <p>\u89e3\u51b3\u65b9\u5f0f Bash<pre><code>pip install mkdocs -i http://pypi.douban.com/simple --trusted-host pypi.douban.com\n</code></pre></p> </li> </ul>","tags":["Bug"]},{"location":"notehub/solution/opshub/centos_yum_source_delete_solution/","title":"Centos\u7684yum\u6e90\u8bef\u5220\u89e3\u51b3\u65b9\u6cd5","text":"","tags":["Ops"]},{"location":"notehub/solution/opshub/centos_yum_source_delete_solution/#_1","title":"\u4e8b\u51fa\u6709\u56e0","text":"<ul> <li>\u66f4\u6362yum\u6e90\uff0c\u624b\u8befyum\u6e90\u8bef\u5220</li> </ul>","tags":["Ops"]},{"location":"notehub/solution/opshub/centos_yum_source_delete_solution/#bug","title":"Bug\u73b0\u573a","text":"Bash<pre><code>(base) [root@automlgpu4 bin]# yum \n-bash: /usr/bin/yum: No such file or directory\n</code></pre>","tags":["Ops"]},{"location":"notehub/solution/opshub/centos_yum_source_delete_solution/#_2","title":"\u8fce\u5203\u800c\u89e3","text":"Bash<pre><code># step1: \u67e5\u770bcentos\u7248\u672c\u4fe1\u606f\n$ rpm -q centos-release\n[output]: centos-release-7-9.2009.1.el7.centos.x86_64\n\n# step2 \u627e\u5230\u5bf9\u5e94\u7684\u6e90\u4fe1\u606f\uff0c\u94fe\u63a5\u5982\u4e0b\uff1a\nhttp://mirrors.163.com/\n\n# step3:\u6267\u884c\u4e0b\u9762\u547d\u4ee4\nrpm -ivh --nodeps http://mirrors.163.com/centos/7.9.2009/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm\nrpm -ivh --nodeps http://mirrors.163.com/centos/7.9.2009/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-54.el7_8.noarch.rpm\nrpm -ivh --nodeps http://mirrors.163.com/centos/7.9.2009/os/x86_64/Packages/yum-3.4.3-168.el7.centos.noarch.rpm\n\n# step4\ncd /etc/yum.repo.d/\nwget http://mirrors.163.com/.help/CentOS7-Base-163.repo\nyum repolist\nyum clean all\nyum makecache\n</code></pre>","tags":["Ops"]},{"location":"notehub/solution/opshub/mac_brew_service_error_solution/","title":"Mac\u4f7f\u7528brew services\u62a5\u9519","text":"<ul> <li>\u89e3\u51b3\u65b9\u6848</li> </ul> Bash<pre><code>brew tap homebrew/services\n</code></pre> <p>Mac \u4f7f\u7528 brew services list \u62a5\u9519</p> <ul> <li>\u62a5\u9519\u539f\u56e0</li> </ul> Bash<pre><code>(base) \u279c  ~ brew services start tomcat@8\nError: uninitialized constant Homebrew::Service::System\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-services/cmd/services.rb:61:in `services'\n/usr/local/Homebrew/Library/Homebrew/brew.rb:94:in `&lt;main&gt;'\n</code></pre> <ul> <li>\u95ee\u9898\u5206\u6790</li> <li>\u7531\u4e8e\u5347\u7ea7\u4e86mac \u7cfb\u7edf\uff0c\u5bfc\u81f4mac \u7684brew \u90e8\u5206\u529f\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528</li> <li>\u89e3\u51b3\u65b9\u6cd5</li> </ul> Text Only<pre><code>cd /usr/local/Homebrew/Library/Taps/homebrew/\nrm -rf homebrew-services\nbrew tap homebrew/services\n</code></pre> <ul> <li>\u6267\u884c\u65e5\u5fd7</li> </ul> Bash<pre><code>(base) \u279c  ~ brew services list\nError: uninitialized constant Homebrew::Service::System\n/usr/local/Homebrew/Library/Taps/homebrew/homebrew-services/cmd/services.rb:61:in `services'\n/usr/local/Homebrew/Library/Homebrew/brew.rb:94:in `&lt;main&gt;'\n(base) \u279c  ~ cd /usr/local/Homebrew/Library/Taps\n(base) \u279c  Taps git:(master) ls\nbigwig-club buo         homebrew\n(base) \u279c  Taps git:(master) cd homebrew/\n(base) \u279c  homebrew git:(master) ls\nhomebrew-cask     homebrew-core     homebrew-services\n(base) \u279c  homebrew git:(master) rm -rf homebrew-services\n(base) \u279c  homebrew git:(master) brew tap homebrew/services\n==&gt; Tapping homebrew/services\nCloning into '/usr/local/Homebrew/Library/Taps/homebrew/homebrew-services'...\nremote: Enumerating objects: 2430, done.\nremote: Counting objects: 100% (2430/2430), done.\nremote: Compressing objects: 100% (1151/1151), done.\nremote: Total 2430 (delta 1127), reused 2339 (delta 1091), pack-reused 0\nReceiving objects: 100% (2430/2430), 665.90 KiB | 716.00 KiB/s, done.\nResolving deltas: 100% (1127/1127), done.\nTapped 1 command (45 files, 834KB).\n(base) \u279c  homebrew git:(master) brew services list\nName       Status User File\nkafka      none\nredis      none\nsupervisor none\ntomcat@8   none\nzookeeper  none\n(base) \u279c  homebrew git:(master) brew services start tomcat@8\n==&gt; Successfully started `tomcat@8` (label: homebrew.mxcl.tomcat@8)\n(base) \u279c  homebrew git:(master) brew services list\nName       Status  User        File\nkafka      none\nredis      none\nsupervisor none\ntomcat@8   started roninsswang ~/Library/LaunchAgents/homebrew.mxcl.tomcat@8.plist\nzookeeper  none\n</code></pre>","tags":["Ops"]},{"location":"notehub/solution/opshub/server_disk_full_solution/","title":"\u670d\u52a1\u5668\u78c1\u76d8\u7a7a\u95f4\u6ee1\u7684\u89e3\u51b3\u529e\u6cd5","text":"<ul> <li>1.\u8f93\u5165\u547d\u4ee4\u67e5\u770b\u78c1\u76d8\u4fe1\u606f</li> </ul> Bash<pre><code>df \u2013h \n</code></pre> <ul> <li>2.\u8fdb\u5165\u5927\u5bb9\u91cf\u6587\u4ef6\u5939\u4e0b\uff0c\u4f7f\u7528\u547d\u4ee4\u67e5\u770b\u5177\u4f53\u6587\u4ef6\u5927\u5c0f</li> </ul> Bash<pre><code>sudo du -sh * \n</code></pre> <ul> <li>3.\u5220\u9664\u5927\u6587\u4ef6</li> </ul> Bash<pre><code>sudo rm -f \u6587\u4ef6\u540d   # \u4e00\u822c\u662f\u65e5\u5fd7\u6587\u4ef6\n</code></pre> <ul> <li>4.\u5220\u9664\u6587\u4ef6\u4ee5\u540e\uff0c\u5e76\u672a\u53d1\u73b0\u78c1\u76d8\u7684\u7a7a\u4f59\u7a7a\u95f4\u589e\u5927\uff0c\u8fd8\u9700\u8981\u6740\u6389\u6539\u5220\u9664\u547d\u4ee4\u7684\u8fdb\u7a0b</li> </ul> Bash<pre><code>sudo lsof / | grep deleted\n\nkill -9 \u8fdb\u7a0b\u53f7\n</code></pre> <ul> <li>5.\u91cd\u542f\u5bf9\u5e94\u9879\u76ee\u670d\u52a1</li> </ul>","tags":["Ops"]},{"location":"notehub/solution/opshub/win10_git_chinese_solution/","title":"win10\u7684cmd\u4e2d\u64cd\u4f5cgit\u4e2d\u6587\u4e71\u7801\u89e3\u51b3\u65b9\u6cd5","text":"<p>\u5728win10\u7684cmd\u7ec8\u7aef\u4e2d\u4f7f\u7528git\u65f6\uff0c\u51fa\u73b0\u4e2d\u6587\u4e71\u7801\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6cd5</p> <ul> <li>\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165\u4e0b\u5217\u6307\u4ee4</li> </ul> Bash<pre><code>git config --global core.quotepath false \ngit config --global gui.encoding utf-8\ngit config --global i18n.commit.encoding utf-8 \ngit config --global i18n.logoutputencoding utf-8 \n</code></pre> <ul> <li>\u5728\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u4e2d\u65b0\u589e\u73af\u5883\u53d8\u91cf</li> </ul> Bash<pre><code># LESSCHARSET=utf-8\n\u53d8\u91cf\u540d\uff1aLESSCHARSET\n\u503c\uff1autf-8\n</code></pre> <ul> <li>\u91cd\u542fcmd\uff0c\u6216\u8005\u5173\u95ed\u65b0\u5f00\u4e00\u4e2acmd\u7ec8\u7aef</li> </ul>","tags":["Ops"]},{"location":"python/","title":"Python\u7f16\u7a0b\u5b9e\u8df5","text":"<p>Tip</p> <p>\u8fd9\u91cc\u662fPython\u7f16\u7a0b\u5b9e\u8df5\u7684\u76f8\u5173\u5b66\u4e60\u548c\u5fc3\u5f97\u7684\u8bb0\u5f55.</p>"},{"location":"python/#python_1","title":"Python\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"python/#python_2","title":"Python\u5e38\u7528\u7b2c\u4e09\u65b9\u5e93","text":""},{"location":"python/#python-web","title":"Python Web \u5f00\u53d1","text":""},{"location":"python/#python_3","title":"Python\u73af\u5883\u53ca\u4f9d\u8d56\u5305\u7ba1\u7406","text":""},{"location":"python/#python_4","title":"Python\u8bed\u6cd5\u5b66\u4e60","text":""},{"location":"python/#python_5","title":"Python\u5e38\u7528\u5f00\u53d1\u5de5\u5177","text":""},{"location":"python/django/django_17_db_migrate/","title":"django1.7\u4ee5\u524d\u7684\u7248\u672c\u6267\u884c\u6570\u636e\u5e93\u8fc1\u79fb","text":"","tags":["Python","Django"]},{"location":"python/django/django_17_db_migrate/#django17_1","title":"django1.7\u4ee5\u524d\u7684\u7248\u672c\u6267\u884c\u6570\u636e\u5e93\u8fc1\u79fb","text":"Python<pre><code>#  1, \u5b89\u88c5South\n pip install South\n\n# 2.\u5728settings.py\u7684INSTALL_APPS\u4e2d\u6dfb\u52a0\uff1a\nINSTALLED_APPS = (\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'blog',\n    'south',\n)\n\n# 3.\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0cDjango\u4f1a\u65b0\u5efa\u4e00\u4e2a south_migrationhistory \u8868\uff0c\u7528\u6765\u8bb0\u5f55\u6570\u636e\u8868\u66f4\u6539(Migration)\u7684\u5386\u53f2\u7eaa\u5f55\n python manage.py syncdb\n\n$ python manage.py syncdb\nSyncing...\nCreating tables ...\nCreating table south_migrationhistory\nInstalling custom SQL ...\nInstalling indexes ...\nNo fixtures found.\n\nSynced:\n &gt; django.contrib.admin\n &gt; django.contrib.auth\n &gt; django.contrib.contenttypes\n &gt; django.contrib.sessions\n &gt; django.contrib.messages\n &gt; django.contrib.staticfiles\n &gt; blog\n &gt; south\n\nNot synced (use migrations): \n\n# 4.\u5f53models.py\u505a\u4efb\u4f55\u4fee\u6539\uff0c\u53ea\u8981\u6267\u884c\u4e0b\u9762\u64cd\u4f5c\npython manage.py schemamigration \u5e94\u7528\u540d --auto\n\n# 5.\u6267\u884c\u8fc1\u79fb\uff1a\npython manage.py migrate\n\n\u5907\u6ce8\uff1a\u4e0a\u8ff0\u64cd\u4f5c\u7684\u53c2\u8003\u94fe\u63a5\uff1ahttps://code.ziqiangxuetang.com/django/django-schema-migration.html\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_bulk_create/","title":"django\u6279\u91cf\u5bfc\u5165\u6570\u636e","text":"<ul> <li>\u5728Django\u4e2d\u9700\u8981\u5411\u6570\u636e\u5e93\u4e2d\u63d2\u5165\u591a\u6761\u6570\u636e\uff08list\uff09\u3002\u4f7f\u7528\u5982\u4e0b\u65b9\u6cd5\uff0c\u6bcf\u6b21save()\u7684\u65f6\u5019\u90fd\u4f1a\u8bbf\u95ee\u4e00\u6b21\u6570\u636e\u5e93\u3002\u5bfc\u81f4\u6027\u80fd\u95ee\u9898:</li> </ul> <p>Python<pre><code>for i in resultlist:\n    p = Account(name=i) \n    p.save()\n</code></pre> - \u5728django1.4\u4ee5\u540e\u52a0\u5165\u4e86\u65b0\u7684\u7279\u6027\u3002\u4f7f\u7528django.db.models.query.QuerySet.bulk_create()\u6279\u91cf\u521b\u5efa\u5bf9\u8c61\uff0c\u51cf\u5c11SQL\u67e5\u8be2\u6b21\u6570\u3002\u6539\u8fdb\u5982\u4e0b\uff1a</p> Python<pre><code>querysetlist=[]\nfor i in resultlist:\n    querysetlist.append(Account(name=i))        \nAccount.objects.bulk_create(querysetlist)\n</code></pre> <ul> <li> <p>Model.objects.bulk_create() \u66f4\u5feb\u66f4\u65b9\u4fbf</p> <ul> <li>\u5e38\u89c4\u7528\u6cd5:</li> </ul> Python<pre><code>#!/usr/bin/env python\n#coding:utf-8\n\nimport os\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"mysite.settings\")\n\n'''\nDjango \u7248\u672c\u5927\u4e8e\u7b49\u4e8e1.7\u7684\u65f6\u5019\uff0c\u9700\u8981\u52a0\u4e0a\u4e0b\u9762\u4e24\u53e5\nimport django\ndjango.setup()\n\u5426\u5219\u4f1a\u629b\u51fa\u9519\u8bef django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.\n'''\n\nimport django\nif django.VERSION &gt;= (1, 7):#\u81ea\u52a8\u5224\u65ad\u7248\u672c\n    django.setup()\n\n\ndef main():\n    from blog.models import Blog\n    f = open('oldblog.txt')\n    for line in f:\n        title,content = line.split('****')\n        Blog.objects.create(title=title,content=content)\n    f.close()\n\nif __name__ == \"__main__\":\n    main()\n    print('Done!')\n</code></pre> <ul> <li>\u4f7f\u7528\u6279\u91cf\u5bfc\u5165:</li> </ul> Python<pre><code>#!/usr/bin/env python\nimport os\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"mysite.settings\")\n\ndef main():\n    from blog.models import Blog\n    f = open('oldblog.txt')\n    BlogList = []\n    for line in f:\n        title,content = line.split('****')\n        blog = Blog(title=title,content=content)\n        BlogList.append(blog)\n    f.close()\n\n    Blog.objects.bulk_create(BlogList)\n\nif __name__ == \"__main__\":\n    main()\n    print('Done!')\n</code></pre> </li> <li> <p>\u7531\u4e8eBlog.objects.create()\u6bcf\u4fdd\u5b58\u4e00\u6761\u5c31\u6267\u884c\u4e00\u6b21SQL\uff0c\u800cbulk_create()\u662f\u6267\u884c\u4e00\u6761SQL\u5b58\u5165\u591a\u6761\u6570\u636e\uff0c\u505a\u4f1a\u5feb\u5f88\u591a\uff01\u5f53\u7136\u7528\u5217\u8868\u89e3\u6790\u4ee3\u66ff for \u5faa\u73af\u4f1a\u66f4\u5feb\uff01\uff01</p> </li> </ul> Python<pre><code>#!/usr/bin/env python\nimport os\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"mysite.settings\")\n\ndef main():\n    from blog.models import Blog\n    f = open('oldblog.txt')\n\n    BlogList = []\n    for line in f:\n        parts = line.split('****')\n        BlogList.append(Blog(title=parts[0], content=parts[1]))\n\n    f.close()\n\n    # \u4ee5\u4e0a\u56db\u884c \u4e5f\u53ef\u4ee5\u7528 \u5217\u8868\u89e3\u6790 \u5199\u6210\u4e0b\u9762\u8fd9\u6837\n    # BlogList = [Blog(title=line.split('****')[0], content=line.split('****')[1]) for line in f]\n\n    Blog.objects.bulk_create(BlogList)\n\nif __name__ == \"__main__\":\n    main()\n    print('Done!')\n</code></pre> <ul> <li> <p>\u6279\u91cf\u5bfc\u5165\u65f6\u6570\u636e\u91cd\u590d\u7684\u89e3\u51b3\u65b9\u6cd5</p> <p>\u5982\u679c\u4f60\u5bfc\u5165\u6570\u636e\u8fc7\u591a\uff0c\u5bfc\u5165\u65f6\u51fa\u9519\u4e86\uff0c\u6216\u8005\u4f60\u624b\u52a8\u505c\u6b62\u4e86\uff0c\u5bfc\u5165\u4e86\u4e00\u90e8\u5206\uff0c\u8fd8\u6709\u4e00\u90e8\u5206\u6ca1\u6709\u5bfc\u5165\u3002\u6216\u8005\u4f60\u518d\u6b21\u8fd0\u884c\u4e0a\u9762\u7684\u547d\u4ee4\uff0c\u4f60\u4f1a\u53d1\u73b0\u6570\u636e\u91cd\u590d\u4e86\uff0c\u600e\u4e48\u529e\u5462\uff1f</p> </li> <li> <p>django.db.models \u4e2d\u8fd8\u6709\u4e00\u4e2a\u51fd\u6570\u53eb get_or_create(),\u4e4b\u524d\u6587\u7ae0\u4e2d\u4e5f\u63d0\u5230\u8fc7,\u6709\u5c31\u83b7\u53d6\u8fc7\u6765\uff0c\u6ca1\u6709\u5c31\u521b\u5efa\uff0c\u7528\u5b83\u53ef\u4ee5\u907f\u514d\u91cd\u590d\uff0c\u4f46\u662f\u901f\u5ea6\u53ef\u4ee5\u4f1a\u6162\u4e9b\uff0c\u56e0\u4e3a\u8981\u5148\u5c1d\u8bd5\u83b7\u53d6\uff0c\u770b\u770b\u6709\u6ca1\u6709</p> </li> </ul> <p>\u53ea\u8981\u628a\u4e0a\u9762\u7684: Python<pre><code>Blog.objects.create(title=title,content=content)\n</code></pre> - \u6362\u6210\u4e0b\u9762\u7684\u5c31\u4e0d\u4f1a\u91cd\u590d\u5bfc\u5165\u6570\u636e\u4e86</p> Python<pre><code>Blog.objects.get_or_create(title=title,content=content)\n</code></pre> <ul> <li>\u8fd4\u56de\u503c\u662f(BlogObject, True/False)\u65b0\u5efa\u65f6\u8fd4\u56de True, \u5df2\u7ecf\u5b58\u5728\u65f6\u8fd4\u56de False\u3002</li> </ul>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/","title":"django\u4e2d\u7c7b\u89c6\u56fe\u7684\u4f7f\u7528","text":"","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#_1","title":"\u4e00\u3001\u7c7b\u89c6\u56fe\u7684\u5f15\u5165\uff1a","text":"<ul> <li> <p>\u51fd\u6570\u89c6\u56fe\uff1a\u4ee5\u51fd\u6570\u7684\u65b9\u5f0f\u5b9a\u4e49\u7684\u89c6\u56fe\uff1b</p> <ul> <li>\u51fd\u6570\u89c6\u56fe\u7684\u7f3a\u70b9\uff1a\u4e00\u4e2a\u89c6\u56fe\u5bf9\u5e94\u7684\u8def\u5f84\u63d0\u4f9b\u4e86\u591a\u79cd\u4e0d\u540cHTTP\u8bf7\u6c42\u65b9\u5f0f\u7684\u652f\u6301\u65f6\uff0c\u4fbf\u9700\u8981\u5728\u4e00\u4e2a\u51fd\u6570\u4e2d\u7f16\u5199\u4e0d\u540c\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u4ee3\u7801\u53ef\u8bfb\u6027\u4e0e\u590d\u7528\u6027\u90fd\u4e0d\u4f73\u3002 Python<pre><code> def register(request):\n    \"\"\"\u5904\u7406\u6ce8\u518c\"\"\"\n\n    # \u83b7\u53d6\u8bf7\u6c42\u65b9\u6cd5\uff0c\u5224\u65ad\u662fGET/POST\u8bf7\u6c42\n    if request.method == 'GET':\n        # \u5904\u7406GET\u8bf7\u6c42\uff0c\u8fd4\u56de\u6ce8\u518c\u9875\u9762\n        return render(request, 'register.html')\n    else:\n        # \u5904\u7406POST\u8bf7\u6c42\uff0c\u5b9e\u73b0\u6ce8\u518c\u903b\u8f91\n        return HttpResponse('\u8fd9\u91cc\u5b9e\u73b0\u6ce8\u518c\u903b\u8f91')\n</code></pre></li> </ul> </li> <li> <p>\u7c7b\u89c6\u56fe\uff1a\u4f7f\u7528\u7c7b\u6765\u5b9a\u4e49\u4e00\u4e2a\u89c6\u56fe\uff1b</p> </li> <li> <p>\u7c7b\u89c6\u56fe\u7684\u597d\u5904\uff1a</p> <ul> <li> <p>\u4ee3\u7801\u53ef\u8bfb\u6027\u597d\uff1b</p> </li> <li> <p>\u7c7b\u89c6\u56fe\u76f8\u5bf9\u4e8e\u51fd\u6570\u89c6\u56fe\u6709\u66f4\u9ad8\u7684\u590d\u7528\u6027\uff0c\u5982\u679c\u5176\u4ed6\u5730\u65b9\u9700\u8981\u7528\u5230\u67d0\u4e2a\u7c7b\u89c6\u56fe\u7684\u67d0\u4e2a\u7279\u5b9a\u903b\u8f91\uff0c\u76f4\u63a5\u7ee7\u627f\u8be5\u7c7b\u89c6\u56fe\u5373\u53ef\uff1b Python<pre><code># \u4f7f\u7528\u7c7b\u89c6\u56fe\u53ef\u4ee5\u5c06\u89c6\u56fe\u5bf9\u5e94\u7684\u4e0d\u540c\u8bf7\u6c42\u65b9\u5f0f\u4ee5\u7c7b\u4e2d\u7684\u4e0d\u540c\u65b9\u6cd5\u6765\u533a\u522b\u5b9a\u4e49\n\nfrom django.views.generic import View\n\nclass RegisterView(View):\n    \"\"\"\u7c7b\u89c6\u56fe\uff1a\u5904\u7406\u6ce8\u518c\"\"\"\n\n    def get(self, request):\n        \"\"\"\u5904\u7406GET\u8bf7\u6c42\uff0c\u8fd4\u56de\u6ce8\u518c\u9875\u9762\"\"\"\n        return render(request, 'register.html')\n\n    def post(self, request):\n        \"\"\"\u5904\u7406POST\u8bf7\u6c42\uff0c\u5b9e\u73b0\u6ce8\u518c\u903b\u8f91\"\"\"\n        return HttpResponse('\u8fd9\u91cc\u5b9e\u73b0\u6ce8\u518c\u903b\u8f91')\n</code></pre></p> </li> </ul> </li> </ul>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#django_1","title":"\u56e0\u6b64Django\u4e2d\u5f15\u7528\u4e86\u7c7b\u89c6\u56fe\u7684\u6982\u5ff5","text":"","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#_2","title":"\u4e8c\u3001\u7c7b\u89c6\u56fe\u7684\u4f7f\u7528","text":"<p>\u6d41\u7a0b\uff1a</p> <p>1. \u5b9a\u4e49\u4e00\u4e2a\u7c7b\u89c6\u56fe\uff1b\u9700\u8981\u7ee7\u627f\u81eaDjango\u63d0\u4f9b\u7684\u7236\u7c7bView\uff0c\u5bfc\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a Python<pre><code>from django.views.generic import View\n\n\u6216\n\nfrom django.views.generic.base import View\n</code></pre> 2. \u914d\u7f6e\u8def\u7531\uff1b\u2014\u2014&gt;\u4f7f\u7528\u7c7b\u89c6\u56fe\u7684as_view()\u65b9\u6cd5\u6765\u6dfb\u52a0\u3002</p> Python<pre><code>urlpatterns = [\n    # \u89c6\u56fe\u51fd\u6570\uff1a\u6ce8\u518c\n    # url(r'^register/$', views.register, name='register'),\n    # \u7c7b\u89c6\u56fe\uff1a\u6ce8\u518c\n    url(r'^register/$', views.RegisterView.as_view(), name='register'),\n]\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#_3","title":"\u4e09\u3001 \u7c7b\u89c6\u56fe\u539f\u7406","text":"Python<pre><code>@classonlymethod\n    def as_view(cls, **initkwargs):\n        \"\"\"\n        Main entry point for a request-response process.\n        \"\"\"\n        ...\u7701\u7565\u4ee3\u7801...\n\n        def view(request, *args, **kwargs):\n            self = cls(**initkwargs)\n            if hasattr(self, 'get') and not hasattr(self, 'head'):\n                self.head = self.get\n            self.request = request\n            self.args = args\n            self.kwargs = kwargs\n            # \u8c03\u7528dispatch\u65b9\u6cd5\uff0c\u6309\u7167\u4e0d\u540c\u8bf7\u6c42\u65b9\u5f0f\u8c03\u7528\u4e0d\u540c\u8bf7\u6c42\u65b9\u6cd5\n            return self.dispatch(request, *args, **kwargs)\n\n        ...\u7701\u7565\u4ee3\u7801...\n\n        # \u8fd4\u56de\u771f\u6b63\u7684\u51fd\u6570\u89c6\u56fe\n        return view\n\n\n    def dispatch(self, request, *args, **kwargs):\n        # Try to dispatch to the right method; if a method doesn't exist,\n        # defer to the error handler. Also defer to the error handler if the\n        # request method isn't on the approved list.\n        if request.method.lower() in self.http_method_names:\n            handler = getattr(self, request.method.lower(), self.http_method_not_allowed)\n        else:\n            handler = self.http_method_not_allowed\n        return handler(request, *args, **kwargs)\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#_4","title":"\u56db\u3001\u7c7b\u89c6\u56fe\u4f7f\u7528\u88c5\u9970\u5668","text":"Python<pre><code>\u7c7b\u89c6\u56fe\u6dfb\u52a0\u88c5\u9970\u5668\u7684\u6709\u4e09\u79cd\u65b9\u6cd5:\n\n1 \u5728URL\u914d\u7f6e\u4e2d\u88c5\u9970\u5668;\n2 \u5728\u7c7b\u89c6\u56fe\u4e2d\u88c5\u9970;\n3 \u6784\u9020Mixin\u6269\u5c55\u7c7b\uff08\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u591a\u7ee7\u627f\u7684\u7279\u6027\uff09\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#_5","title":"\u5b9a\u4e49\u4e00\u4e2a\u4e3a\u51fd\u6570\u89c6\u56fe\u51c6\u5907\u7684\u88c5\u9970\u5668","text":"Python<pre><code>\uff08\u5728\u8bbe\u8ba1\u88c5\u9970\u5668\u65f6\u57fa\u672c\u90fd\u4ee5\u51fd\u6570\u89c6\u56fe\u4f5c\u4e3a\u8003\u8651\u7684\u88ab\u88c5\u9970\u5bf9\u8c61\uff09\uff0c\u53ca\u4e00\u4e2a\u8981\u88ab\u88c5\u9970\u7684\u7c7b\u89c6\u56fe\u3002\n\ndef my_decorator(func):\n    def wrapper(request, *args, **kwargs):\n        print('\u81ea\u5b9a\u4e49\u88c5\u9970\u5668\u88ab\u8c03\u7528\u4e86')\n        print('\u8bf7\u6c42\u8def\u5f84%s' % request.path)\n        return func(request, *args, **kwargs)\n    return wrapper\n\nclass DemoView(View):\n    def get(self, request):\n        print('get\u65b9\u6cd5')\n        return HttpResponse('ok')\n\n    def post(self, request):\n        print('post\u65b9\u6cd5')\n        return HttpResponse('ok')\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#1-url","title":"1. \u5728URL\u914d\u7f6e\u4e2d\u88c5\u9970","text":"<ul> <li> <p>\u6b64\u79cd\u65b9\u5f0f\u4f1a\u4e3a\u7c7b\u89c6\u56fe\u4e2d\u7684\u6240\u6709\u8bf7\u6c42\u65b9\u6cd5\u90fd\u52a0\u4e0a\u88c5\u9970\u5668\u884c\u4e3a\uff08\u56e0\u4e3a\u662f\u5728\u89c6\u56fe\u5165\u53e3\u5904\uff0c\u5206\u53d1\u8bf7\u6c42\u65b9\u5f0f\u524d\uff09\u3002</p> </li> <li> <p>\u7f3a\u70b9\uff1a\u56e0\u88c5\u9970\u884c\u4e3a\u88ab\u653e\u7f6e\u5230\u4e86url\u914d\u7f6e\u4e2d\uff0c\u5355\u770b\u89c6\u56fe\u7684\u65f6\u5019\u65e0\u6cd5\u77e5\u9053\u6b64\u89c6\u56fe\u8fd8\u88ab\u6dfb\u52a0\u4e86\u88c5\u9970\u5668\uff0c\u4e0d\u5229\u4e8e\u4ee3\u7801\u7684\u5b8c\u6574\u6027\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002</p> </li> </ul> Python<pre><code>urlpatterns = [\n    url(r'^demo/$', my_decorate(DemoView.as_view()))\n]\n\nas_view\u662fview\u7c7b\u4e2d\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#2","title":"2 \u5728\u7c7b\u89c6\u56fe\u4e2d\u88c5\u9970","text":"<ul> <li>\u5728\u7c7b\u89c6\u56fe\u4e2d\u4f7f\u7528\u4e3a\u51fd\u6570\u89c6\u56fe\u51c6\u5907\u7684\u88c5\u9970\u5668\u65f6\uff0c\u4e0d\u80fd\u76f4\u63a5\u6dfb\u52a0\u88c5\u9970\u5668\uff0c\u9700\u8981\u4f7f\u7528method_decorator\u5c06\u5176\u8f6c\u6362\u4e3a\u9002\u7528\u4e8e\u7c7b\u89c6\u56fe\u65b9\u6cd5\u7684\u88c5\u9970\u5668\u3002</li> </ul> Python<pre><code>from django.utils.decorators import method_decorator\n\n# \u4e3a\u5168\u90e8\u8bf7\u6c42\u65b9\u6cd5\u6dfb\u52a0\u88c5\u9970\u5668\nclass DemoView(View):\n\n    # \u5982\u679c\u9700\u8981\u5bf9\u7c7b\u4e2d\u6240\u6709\u7684\u65b9\u6cd5\u90fd\u52a0\u88c5\u9970\u5668\uff0c\u53ea\u9700\u8981\u628a\u7236\u7c7b\u7684dispatch\u65b9\u6cd5\u91cd\u5199\uff0c\u7136\u540e\u8fd4\u56de\u5c31\u53ef\u4ee5\u4e86\n    @method_decorator(my_decorator)\n    def dispatch(self, *args, **kwargs):\n        return super().dispatch(*args, **kwargs)\n\n    def get(self, request):\n        print('get\u65b9\u6cd5')\n        return HttpResponse('ok')\n\n    def post(self, request):\n        print('post\u65b9\u6cd5')\n        return HttpResponse('ok')\n\n\n# \u4e3a\u7279\u5b9a\u8bf7\u6c42\u65b9\u6cd5\u6dfb\u52a0\u88c5\u9970\u5668\nclass DemoView(View):\n\n    @method_decorator(my_decorator)\n    def get(self, request):\n        print('get\u65b9\u6cd5')\n        return HttpResponse('ok')\n\n    def post(self, request):\n        print('post\u65b9\u6cd5')\n        return HttpResponse('ok')\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#method_decoratorname","title":"method_decorator\u88c5\u9970\u5668\u8fd8\u652f\u6301\u4f7f\u7528name\u53c2\u6570\u6307\u660e\u88ab\u88c5\u9970\u7684\u65b9\u6cd5","text":"Python<pre><code># \u4e3a\u5168\u90e8\u8bf7\u6c42\u65b9\u6cd5\u6dfb\u52a0\u88c5\u9970\u5668\n@method_decorator(my_decorator, name='dispatch')\nclass DemoView(View):\n    def get(self, request):\n        print('get\u65b9\u6cd5')\n        return HttpResponse('ok')\n\n    def post(self, request):\n        print('post\u65b9\u6cd5')\n        return HttpResponse('ok')\n\n\n# \u4e3a\u7279\u5b9a\u8bf7\u6c42\u65b9\u6cd5\u6dfb\u52a0\u88c5\u9970\u5668\n@method_decorator(my_decorator, name='get')\nclass DemoView(View):\n    def get(self, request):\n        print('get\u65b9\u6cd5')\n        return HttpResponse('ok')\n\n    def post(self, request):\n        print('post\u65b9\u6cd5')\n        return HttpResponse('ok')\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#method_decorator","title":"\u62d3\u5c55\uff1a\u4e3a\u4ec0\u4e48\u9700\u8981\u4f7f\u7528method_decorator???","text":"<ul> <li>\u4e3a\u51fd\u6570\u89c6\u56fe\u51c6\u5907\u7684\u88c5\u9970\u5668\uff0c\u5176\u88ab\u8c03\u7528\u65f6\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u7528\u4e8e\u63a5\u6536request\u5bf9\u8c61 Python<pre><code>def my_decorate(func):\n    def wrapper(request, *args, **kwargs):  # \u7b2c\u4e00\u4e2a\u53c2\u6570request\u5bf9\u8c61\n        ...\u4ee3\u7801\u7701\u7565...\n        return func(request, *args, **kwargs)\n    return wrapper\n</code></pre></li> <li>\u800c\u7c7b\u89c6\u56fe\u4e2d\u8bf7\u6c42\u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff0c\u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662frequest\u5bf9\u8c61\uff0c\u800c\u662fself \u89c6\u56fe\u5bf9\u8c61\u672c\u8eab\uff0c\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u53c2\u6570\u624d\u662frequest\u5bf9\u8c61 Python<pre><code>class DemoView(View):\n    def dispatch(self, request, *args, **kwargs):\n        ...\u4ee3\u7801\u7701\u7565...\n\n    def get(self, request):\n        ...\u4ee3\u7801\u7701\u7565...\n</code></pre></li> <li> <p>\u6240\u4ee5\u5982\u679c\u76f4\u63a5\u5c06\u7528\u4e8e\u51fd\u6570\u89c6\u56fe\u7684\u88c5\u9970\u5668\u88c5\u9970\u7c7b\u89c6\u56fe\u65b9\u6cd5\uff0c\u4f1a\u5bfc\u81f4\u53c2\u6570\u4f20\u9012\u51fa\u73b0\u95ee\u9898\u3002</p> </li> <li> </li> <li> <p>\u5982\u679c\u5c06\u88c5\u9970\u5668\u672c\u8eab\u6539\u4e3a\u53ef\u4ee5\u9002\u914d\u7c7b\u89c6\u56fe\u65b9\u6cd5\u7684\uff0c\u7c7b\u4f3c\u5982\u4e0b\uff0c\u5219\u65e0\u9700\u518d\u4f7f\u7528method_decorator\u3002 Python<pre><code>def my_decorator(func):\n    def wrapper(self, request, *args, **kwargs):  # \u6b64\u5904\u589e\u52a0\u4e86self\n        print('\u81ea\u5b9a\u4e49\u88c5\u9970\u5668\u88ab\u8c03\u7528\u4e86')\n        print('\u8bf7\u6c42\u8def\u5f84%s' % request.path)\n        return func(self, request, *args, **kwargs)  # \u6b64\u5904\u589e\u52a0\u4e86self\n    return wrapper\n</code></pre></p> </li> </ul>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#method_decoratorself","title":"method_decorator\u7684\u4f5c\u7528\u662f\u4e3a\u51fd\u6570\u89c6\u56fe\u88c5\u9970\u5668\u8865\u5145\u7b2c\u4e00\u4e2aself\u53c2\u6570\uff0c\u4ee5\u9002\u914d\u7c7b\u89c6\u56fe\u65b9\u6cd5\u3002","text":"","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#3-mixin","title":"3 \u6784\u9020Mixin\u6269\u5c55\u7c7b","text":"<p>\uff08\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u591a\u7ee7\u627f\u7684\u7279\u6027\uff09 \u4f7f\u7528Mixin\u6269\u5c55\u7c7b\uff0c\u4e5f\u4f1a\u4e3a\u7c7b\u89c6\u56fe\u7684\u6240\u6709\u8bf7\u6c42\u65b9\u6cd5\u90fd\u6dfb\u52a0\u88c5\u9970\u884c\u4e3a</p> Python<pre><code># \u4f7f\u7528\u6269\u5c55\u7c7b\u7684\u65b9\u6cd5\uff0c\u5b9e\u9645\u4e0a\u53ea\u9700\u91cd\u5199\u7236\u7c7b\u7684as_view\u65b9\u6cd5\uff0c\u5e76\u4e14\u4f20\u9012\u4e0d\u5b9a\u957f\u53c2\u6570\uff0c\n# \u7136\u540e\u5c31\u80fd\u62ff\u5230\u5165\u53e3\u7684\u89c6\u56fe\u51fd\u6570\uff0c\u5728\u5165\u53e3\u7684\u89c6\u56fe\u51fd\u6570\u4e2d\u518d\u6dfb\u52a0\u88c5\u9970\u5668\uff0c\u6700\u540e\u628a\u88c5\u9970\u7684\u7ed3\u679c\u5f53\u505a\u8fd4\u56de\u503c\uff0c\n# \u8fd9\u6837\uff0c\u5c31\u76f8\u5f53\u4e8e\u8c03\u7528\u7684\u662f\u81ea\u5df1\u7684\u65b9\u6cd5\uff1b\n\nclass MyDecoratorMixin(object):\n    @classmethod\n    def as_view(cls, *args, **kwargs):\n        view = super().as_view(*args, **kwargs)\n        view = my_decorator(view)\n        return view\n\n# class DemoView(Baseview\uff0cBaseView2\uff0cView)\nclass DemoView(MyDecoratorMixin, View):  # \u5728\u6240\u6709\u7684\u7c7b\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u7c7b\u90fd\u5199View\u7c7b\uff0c\u8fd9\u6837\u624d\u80fd\u4fdd\u8bc1\u6240\u6709\u7684\u90fd\u7ee7\u627f\u4e0eobject\u7c7b\n    def get(self, request):\n        print('get\u65b9\u6cd5')\n        return HttpResponse('ok')\n\n    def post(self, request):\n        print('post\u65b9\u6cd5')\n        return HttpResponse('ok')\n\nDjango\u4e2d\u7684Mixin\u540e\u7f00\u8868\u793a\u7684\u662f\u6269\u5c55\u7c7b\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_class_view_usage/#urlspyas_view","title":"\u62d3\u5c55\uff1a\u5173\u4e8e\u5728urls.py\u4e2d\u8def\u7531\u5230\u5e95\u8c03\u7528\u7684\u54ea\u4e2a\u7c7b\u7684as_view\u65b9\u6cd5\u7684\u8be6\u89e3\uff1a","text":"<p>\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u4e3a\u4e86\u6700\u540e\u80fd\u8c03\u7528\u6700\u539f\u751f\u7684View\u7c7b\u4e2d\u7684as_view\u65b9\u6cd5\uff0c\u5e76\u4e14\u8981\u4fdd\u8bc1View\u4e2d\u7684as_view\u65b9\u6cd5\u662f\u6700\u540e\u4e00\u6b21\u88ab\u6267\u884c</p> <ol> <li>\u660e\u786e\u591a\u7ee7\u627f\u4e2d\u9700\u627e\u7236\u7c7b\u65b9\u6cd5\u7684\u987a\u5e8f\uff1a</li> </ol> Python<pre><code>\u6761\u4ef6\uff1a\n    \u7236\u7c7bView  \n    \u5b50\u7c7b BaseView, BaseView2    \n    \u5b50\u5b50\u7c7b\uff1aDemoView\n\n\u7ee7\u627f\u987a\u5e8f\u662f\uff1a\u5f53\u8c03\u7528DemoView\u7684as_view\u65b9\u6cd5\u65f6\uff0c\u9996\u5148\u53bb\u5bfb\u627e\u51fa\u73b0\u5728\u5b50\u7c7b\u4e2d\u7684\u7b2c\u4e00\u4e2a\u7c7b\uff08BaseView\uff09,\u7136\u540e\u53bb\u6267\u884c\u8fd9\u4e2a\u7c7b\u7684as_view\u65b9\u6cd5\uff0c\u6267\u884c\u4ee5\u540e\uff0c\n\u53d1\u73b0\u8fd8\u9700\u8981\u53bb\u627eas_view\uff0c\u6b64\u65f6\uff0c\u53bb\u5bfb\u627e\u7684\u662f\u662f\u5b50\u7c7b\u4e2d\u7684\u540c\u7ea7\u7c7b\uff08BaseView2\uff09,\u800c\u4e0d\u662fView,\u627e\u5230\u4ee5\u540e\uff0c\n\u7136\u540e\u518d\u53bb\u6267\u884cBaseView2\u4e2d\u7684as_view\u65b9\u6cd5\uff0c\u6267\u884c\u4ee5\u540e\uff0c\u6b64\u65f6\u624d\u627e\u5230\u7236\u7c7b\uff08View\uff09\u4e2d\u7684as_view\u65b9\u6cd5\uff0c\u6700\u540e\u8fd4\u56de\u7684\u624d\u662fview\u51fd\u6570\uff1b\n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n\u6761\u4ef6\uff1a\n    \u7236\u7c7b\uff1aView, View2\n    \u5b50\u7c7b\uff1aBaseView\uff08\u7ee7\u627f\u4e8eView\uff09, BaseView2(\u7ee7\u627f\u4e8eView2)\n    \u5b50\u5b50\u7c7b\uff1aDemoView\n\n\u7ee7\u627f\u987a\u5e8f\u662f\uff1a\u5f53\u8c03\u7528DemoView\u7684as_view\u65b9\u6cd5\u65f6\uff0c\u9996\u5148\u53bb\u5bfb\u627e\u51fa\u73b0\u5728\u5b50\u7c7b\u4e2d\u7684\u7b2c\u4e00\u4e2a\u7c7b\uff08BaseView\uff09\uff0c\n\u7136\u540e\u53bb\u6267\u884c\u8fd9\u4e2a\u7c7b\u7684as_view\u65b9\u6cd5\uff0c\u6267\u884c\u4ee5\u540e\uff0c\u518d\u53bb\u627e\u4e0a\u4e00\u7ea7\u7c7b\u4e2d\u7684as_view\u65b9\u6cd5\uff0c\u6b64\u65f6\u627e\u7684\u662fView,\u800c\u4e0d\u662fBaseView2,\n(\u56e0\u4e3aBaseView\u548cBaseView2\u4e0d\u662f\u7ee7\u627f\u4e0e\u540c\u4e00\u7236\u7c7b\uff0c)\uff0c\u627e\u4ee5\u540e\uff0c\u6267\u884cas_view\u65b9\u6cd5\uff0c\u7136\u540e\u8fd4\u56deview\u51fd\u6570\uff0c\u5e76\u6ca1\u6709\u53bb\u6267\u884cBaseView2\u7c7b\u4e2d\u7684\u65b9\u6cd5\uff0c\n</code></pre> <p>\u7efc\u4e0a\u6240\u8ff0\uff1a\u4e3a\u4e86\u80fd\u591f\u8c03\u7528\u6240\u6709\u7c7b\u7684as_view\u65b9\u6cd5\uff0c\u5fc5\u987b\u5c06\u6240\u6709\u7684\u7c7b\u90fd\u7ee7\u627f\u4e8e\u540c\u4e00\u4e2a\u7236\u7c7b\uff0c\u56e0\u6b64\uff0c\u628a\u6240\u6709\u7684\u6269\u5c55\u7c7b\u90fd\u7ee7\u627f\u4e8e\uff08object\u57fa\u7c7b\uff09\uff0c\u5728\u6240\u6709\u7684\u7c7b\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u7c7b\u90fd\u5199View\u7c7b\uff0c\u8fd9\u6837\u624d\u80fd\u4fdd\u8bc1\u6240\u6709\u7684\u90fd\u7ee7\u627f\u4e0eobject\u7c7b\uff0c\u7136\u540e\u624d\u80fd\u4fdd\u8bc1\u8c03\u7528\u662f\u6700\u539f\u751f\u7684View\u7684\u65b9\u6cd5</p>","tags":["Python","Django"]},{"location":"python/django/django_lazyobject_analysis/","title":"django\u6e90\u7801\u5b66\u4e60\u4e4bLazyObject","text":"","tags":["Python","Django"]},{"location":"python/django/django_lazyobject_analysis/#_1","title":"\u5bfc\u5165","text":"Python<pre><code>from django.utils.functional import LazyObject\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_lazyobject_analysis/#lazyobject","title":"LazyObject\u6e90\u7801\u5206\u6790","text":"Python<pre><code>empty = object()  # empty\u662f\u4e00\u4e2aobject\u5bf9\u8c61\uff0c\u8868\u793a\u8fd8\u672a\u521d\u59cb\u5316\n\n\"\"\"\n#\u4e3a\u7c7b\u65b9\u6cd5\u5b9e\u73b0\u901a\u7528\u7684\u60f0\u6027\u52a0\u8f7d\u65b9\u6cd5\uff0c\u5373\u67e5\u770b\u5bf9\u8c61\u662f\u5426\u5b9e\u4f8b\u5316\n#\u82e5\u8fd8\u672a\u5b9e\u4f8b\u5316\uff0c\u8c03\u7528\u5b50\u7c7b\u5b9e\u4f8b\u5316\u65b9\u6cd5\n#\u6700\u540e\u5728\u751f\u6210\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528\u539f\u6765\u7684func\u7c7b\u65b9\u6cd5\n\"\"\"\ndef new_method_proxy(func):  \n# new_method_proxy\u662f\u4e2a\u5de5\u5382\u51fd\u6570\uff0c\u4e3a\u5176\u4ed6\u51fd\u6570\u589e\u52a0\u5b9e\u4f8b\u5316\u7684\u529f\u80fd\uff0c\n    def inner(self, *args):\n        # \u5224\u65ad\u662f\u5426empty,\u8868\u793a\u4e3a\u7a7a\uff0c\u672a\u5b9e\u4f8b\u5316\n        if self._wrapped is empty:\n            # \u8c03\u7528\u7ee7\u627f\u7c7b\u5b9e\u73b0\u7684_setup,\u5b9e\u4f8b\u5316\u7c7b\n            self._setup()\n        return func(self._wrapped, *args)\n    return inner\n\n\nclass LazyObject(object):\n    \"\"\"\n    A wrapper for another class that can be used to delay instantiation of the\n    wrapped class.\n\n    By subclassing, you have the opportunity to intercept and alter the\n    instantiation. If you don't need to do that, use SimpleLazyObject.\n    \"\"\"\n\n    # Avoid infinite recursion when tracing __init__ (#19456).\n    _wrapped = None\n\n    def __init__(self):\n        # Note: if a subclass overrides __init__(), it will likely need to\n        # override __copy__() and __deepcopy__() as well.\n        self._wrapped = empty  #\u6807\u8bb0\u662f\u5426\u6709\u5b9e\u4f8b\u5316\n\n     # \u901a\u8fc7\u5de5\u5382\u51fd\u6570\u751f\u6210__getattr__\u65b9\u6cd5\uff0c\u4e3a\u5176\u5224\u65ad\u662f\u5426\u5b9e\u4f8b\u5316\uff0c\u5982\u679c\u672a\u5b9e\u4f8b\u5316\uff0c\u5219\u8c03\u7528_setup\u5b9e\u4f8b\u5316\u7c7b\n    __getattr__ = new_method_proxy(getattr)  \n\n    def __setattr__(self, name, value):\n        if name == \"_wrapped\": #\u82e5\u4fee\u6539\u7684\u4e3a_wrapped\uff0c\u7279\u6b8a\u5904\u7406\n            # Assign to __dict__ to avoid infinite __setattr__ loops.\n            self.__dict__[\"_wrapped\"] = value\n        else:\n            if self._wrapped is empty:\n                self._setup()\n            setattr(self._wrapped, name, value)   #\u5b9e\u4f8b\u5316\u540e\uff0c\u4fee\u6539\u5b9e\u4f8b\u7684\u5c5e\u6027\n\n    def __delattr__(self, name):\n        if name == \"_wrapped\":  #\u4e0d\u53ef\u5220\u9664_wrapped\u5c5e\u6027\n            raise TypeError(\"can't delete _wrapped.\")\n        if self._wrapped is empty:\n            self._setup()\n        delattr(self._wrapped, name)\n\n    # \u9700\u8981\u5b50\u7c7b\u5b9e\u73b0\u81ea\u5df1\u7684_setup\n    def _setup(self):\n        \"\"\"\n        Must be implemented by subclasses to initialize the wrapped object.\n        \"\"\"\n        #\u53ea\u53ef\u7531\u5b50\u7c7b\u8c03\u7528\n        raise NotImplementedError('subclasses of LazyObject must provide a _setup() method')\n\n    # Because we have messed with __class__ below, we confuse pickle as to what\n    # class we are pickling. We're going to have to initialize the wrapped\n    # object to successfully pickle it, so we might as well just pickle the\n    # wrapped object since they're supposed to act the same way.\n    #\n    # Unfortunately, if we try to simply act like the wrapped object, the ruse\n    # will break down when pickle gets our id(). Thus we end up with pickle\n    # thinking, in effect, that we are a distinct object from the wrapped\n    # object, but with the same __dict__. This can cause problems (see #25389).\n    #\n    # So instead, we define our own __reduce__ method and custom unpickler. We\n    # pickle the wrapped object as the unpickler's argument, so that pickle\n    # will pickle it normally, and then the unpickler simply returns its\n    # argument.\n    def __reduce__(self):\n        if self._wrapped is empty:\n            self._setup()\n        return (unpickle_lazyobject, (self._wrapped,))\n\n    def __copy__(self):\n        if self._wrapped is empty:\n            # If uninitialized, copy the wrapper. Use type(self), not\n            # self.__class__, because the latter is proxied.\n            return type(self)()\n        else:\n            # If initialized, return a copy of the wrapped object.\n            return copy.copy(self._wrapped)\n\n    def __deepcopy__(self, memo):\n        if self._wrapped is empty:\n            # We have to use type(self), not self.__class__, because the\n            # latter is proxied.\n            result = type(self)()\n            memo[id(self)] = result\n            return result\n        return copy.deepcopy(self._wrapped, memo)\n\n    __bytes__ = new_method_proxy(bytes)\n    __str__ = new_method_proxy(str)\n    __bool__ = new_method_proxy(bool)\n\n    # Introspection support\n    __dir__ = new_method_proxy(dir)\n\n    # Need to pretend to be the wrapped class, for the sake of objects that\n    # care about this (especially in equality tests)\n    __class__ = property(new_method_proxy(operator.attrgetter(\"__class__\")))\n    __eq__ = new_method_proxy(operator.eq)\n    __lt__ = new_method_proxy(operator.lt)\n    __gt__ = new_method_proxy(operator.gt)\n    __ne__ = new_method_proxy(operator.ne)\n    __hash__ = new_method_proxy(hash)\n\n    # List/Tuple/Dictionary methods support\n    __getitem__ = new_method_proxy(operator.getitem)\n    __setitem__ = new_method_proxy(operator.setitem)\n    __delitem__ = new_method_proxy(operator.delitem)\n    __iter__ = new_method_proxy(iter)\n    __len__ = new_method_proxy(len)\n    __contains__ = new_method_proxy(operator.contains)\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_lazyobject_analysis/#_2","title":"\u603b\u7ed3\uff1a","text":"<ol> <li>LazyObject\u7684\u6838\u5fc3\u903b\u8f91\uff0c\u521d\u59cb\u5316\u7684\u65f6\u5019\u628a_wrapped\u8bbe\u7f6e\u4e3aempty\uff0c\u672a\u5bf9\u5b9e\u9645\u7684\u7c7b\u8fdb\u884c\u5b9e\u4f8b\u5316\u64cd\u4f5c\uff0c\u8fbe\u5230\u5ef6\u8fdf\u7c7b\u5b9e\u4f8b\u5316\u7684\u6548\u679c\u3002\u53ea\u6709\u5bf9\u7ed3\u679c\u9700\u8981\u8fdb\u884c\u67d0\u4e9b\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u83b7\u53d6\u5c5e\u6027\uff0c\u624d\u4f1a\u53bb\u8c03\u7528_setup\u8fdb\u884c\u5b9e\u4f8b\u5316\u3002\u800c\u4e14_setup\u5fc5\u987b\u7531\u5b50\u7c7b\u5b9e\u73b0\u3002</li> <li>\u5982\u679c\u60f3\u8981\u8ba9\u67d0\u4e2a\u7c7b\u6709\u5ef6\u8fdf\u5b9e\u4f8b\u5316\u7684\u529f\u80fd\uff0c\u5fc5\u987b\u505a\u4e24\u4ef6\u4e8b\u60c5\uff0c1\uff09\u7ee7\u627fLazyObject\uff1b2\uff09\u5b9e\u73b0_setup\u65b9\u6cd5\u3002</li> </ol>","tags":["Python","Django"]},{"location":"python/django/django_lazyobject_analysis/#demo","title":"Demo\u793a\u4f8b","text":"<p>Python<pre><code># \u6709\u5ef6\u8fdf\u5b9e\u4f8b\u5316\u9700\u6c42\u7684\u7c7bDemoObject\nclass DemoObject(object):  \n    def __init__(self):  \n        self.title = 'just a demo'  \n\n# \u56e0\u4e3a\u7ee7\u627f\u4e86LazyObject\uff0c\u6240\u4ee5DemoLazyObject\u6709\u5ef6\u8fdf\u5b9e\u4f8b\u5316\u7684\u529f\u80fd\nclass DemoLazyObject(LazyObject):\n    # \u5b50\u7c7b\u9700\u8981\u91cd\u65b0\u5b9e\u73b0_setup\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u5b9e\u4f8b\u5316\u7c7bDemoObject\uff0c\u5e76\u628a\u751f\u6210\u7684\u5bf9\u8c61\u8d4b\u7ed9_wrapped\u3002\n    def _setup(self):\n        self._wrapped = DemoObject()  \n\n# \u5b9e\u4f8b\u5316\u7c7bDemoLazyObject\uff0c\u751f\u6210\u5bf9\u8c61a_demo\uff0c\u6b64\u65f6\u5e76\u6ca1\u6709\u5b9e\u9645\u5b9e\u4f8b\u5316\u7c7bDemoObject\u3002\na_demo = DemoLazyObject()\n# \u8c03\u7528a_demo.title\u7684\u65f6\u5019\uff0c\u4f1a\u89e6\u53d1\u7c7bDemoObject\u7684\u5b9e\u4f8b\u5316\nprint(a_demo.title)\n</code></pre> \u4ee3\u7801\u8fd0\u884c\u6d41\u7a0b\uff1a</p> Python<pre><code>\u5f53\u5b9e\u4f8b\u5316\u7c7bDemoLazyObject\u65f6\uff0c\u5e76\u6ca1\u6709\u771f\u6b63\u53bb\u5b9e\u4f8b\u5316\u7c7b DemoObject\uff0c\u5b83\u7684\u5b9e\u4f8b\u5316\u5728_setup\u91cc\u9762\u3002\u53ea\u6709\u6267\u884c\u4e86\u540e\u9762\u90a3\u884cprint(a_demo.title)\uff0c\u624d\u4f1a\u771f\u6b63\u89e6\u53d1\u7c7b DemoObject\u7684\u5b9e\u4f8b\u5316\u3002\n\n\u7b2c\u4e00\u6b21\u7684\u8c03\u7528\u6d41\u7a0b\u662fprint(a_demo.title)-&gt;LazyObject.__getattr__-&gt;new_method_proxy(getattr)-&gt;DemoLazyObject._setup(self)-&gt;DemoObject.__init__(self)-&gt;LazyObject.getattr(self._wrapped, *args)\u3002\n\n\u4ee5\u540e\u518d\u8c03\u7528\u7684\u65f6\u5019\u5c31\u4e0d\u4f1a\u8fdb\u5165DemoLazyObject._setup(self)\u548cDemoObject.__init__(self)\uff0c\u800c\u662f\u76f4\u63a5\u8fd4\u56deLazyObject.getattr(self._wrapped, *args)\u3002\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_lazyobject_analysis/#django","title":"django\u9879\u76ee\u4e2d\u7684\u5e94\u7528","text":"<p>\u60c5\u666f\u9700\u6c42\uff1a\u8c03\u7528oss\u7684api\u53bb\u5b9e\u73b0\u5c06\u538b\u7f29\u5305\u6587\u4ef6\u4e0a\u4f20\u5230oss\u7684private bucket\u4e2d - models: Python<pre><code>file_path = models.FileField(u'\u6587\u4ef6\u8def\u5f84(*.tar.gz)',upload_to=generate_package_filename, max_length=1024,storage=system_package_storage)\n\nFileField:\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u8def\u5f84\u4fdd\u5b58\u5230\u6570\u636e\u5e93\uff0c\u6587\u4ef6\u4e0a\u4f20\u5230\u6307\u5b9a\u76ee\u5f55\nupload_to:\u4e0a\u4f20\u6587\u4ef6\u7684\u4fdd\u5b58\u8def\u5f84\nstorage:\u5b58\u50a8\u7ec4\u4ef6\uff0c\u9ed8\u8ba4\u662fdjango.core.files.storage.FileSystemStorage\n</code></pre> - \u751f\u6210\u4e0a\u4f20\u6587\u4ef6\u7684\u4fdd\u5b58\u8def\u5f84\u7684\u65b9\u6cd5 Python<pre><code>def generate_package_filename(instance, filename):\n    return {'product_key': instance.product.product_key}, 'system_package/%d/%s/%s%s' % (\n        instance.device_type, instance.version, int(time.mktime(datetime.now().timetuple())), file_extension(filename))\n</code></pre> - system_package_storage\u7684\u5b9e\u73b0</p> Python<pre><code>class AliyunBaseStorage(Storage):  # \u7ee7\u627ffrom django.core.files.storage import Storage\n    \"\"\"\n    Aliyun OSS2 Storage\n    \"\"\"\n\n    private = False\n\n    def __init__(self):\n        self.kwargs = {}\n\n    '''\n    ' \u6839\u636emodel\u4e2d\u5b9a\u4e49\u7684upload_to\u51fd\u6570\u8fd4\u56de\u503c\uff0c\u53d6\u51fa\u6587\u4ef6\u5b58\u50a8\u8def\u5f84\n    ' \u9ed8\u8ba4\u76f4\u63a5\u4f20\u4e00\u4e2a\u6587\u4ef6\u540d\uff0c\n    ' \u8ddfproduct\u76f8\u5173\u7684\u4f1a\u4f20product\u76f8\u5173\u5c5e\u6027\u8fc7\u6765\n    '''\n    def get_available_name(self, upload_to):\n        super(AliyunBaseStorage, self).get_available_name(upload_to)\n\n    def get_iot_service(self):\n        kwargs = self.kwargs\n        if not kwargs.has_key('product_name') and not kwargs.has_key('product_key'):\n            kwargs.update({ 'product_name' : 'wastebin' })\n        return AliyunIoTService(**kwargs)\n\n    def get_bucket_read(self):\n        iot_service = self.get_iot_service()\n        if self.private:\n            return iot_service.get_private_bucket(aliyun_sts_type=AliyunSTSType.STSReadOnly)\n        return iot_service.get_media_bucket(aliyun_sts_type=AliyunSTSType.STSReadOnly)\n\n    def get_bucket_write(self):\n        iot_service = self.get_iot_service()\n        if self.private:\n            return iot_service.get_private_bucket(aliyun_sts_type=AliyunSTSType.STSWriteOnly)\n        return iot_service.get_media_bucket(aliyun_sts_type=AliyunSTSType.STSWriteOnly)\n\n    def get_location(self):\n        return ALIYUN_SERVER_TYPE.lower()\n\n    def _clean_name(self, name):\n        clean_name = posixpath.normpath(name).replace('\\\\', '/')\n\n        if name.endswith('/') and not clean_name.endswith('/'):\n            return clean_name + '/'\n        else:\n            return clean_name\n\n    def _normalize_name(self, name):\n        base_path = force_text(self.get_location())\n        base_path = base_path.rstrip('/')\n\n        final_path = urljoin(base_path.rstrip('/') + \"/\", name)\n\n        base_path_len = len(base_path)\n        if (not final_path.startswith(base_path) or\n                final_path[base_path_len:base_path_len + 1] not in ('', '/')):\n            raise SuspiciousOperation(\"Attempted access to '%s' denied.\" %\n                                      name)\n        return final_path.lstrip('/')\n\n    def _get_target_name(self, name):\n        name = self._normalize_name(self._clean_name(name))\n        if six.PY2:\n            name = name.encode('utf-8')\n        return name\n\n    def _open(self, name, mode='rb'):\n        return AliyunFile(name, self, mode)\n\n    def _save(self, name, content):\n        # \u4e3a\u4fdd\u8bc1django\u884c\u4e3a\u7684\u4e00\u81f4\u6027\uff0c\u4fdd\u5b58\u6587\u4ef6\u65f6\uff0c\u5e94\u8be5\u8fd4\u56de\u76f8\u5bf9\u4e8e`media path`\u7684\u76f8\u5bf9\u8def\u5f84\u3002\n        target_name = self._get_target_name(name)\n\n        content.open()\n        content_str = b''.join(chunk for chunk in content.chunks())\n        self.get_bucket_write().put_object(target_name, content_str)\n        content.close()\n\n        return self._clean_name(name)\n\n    def get_file_header(self, name):\n        name = self._get_target_name(name)\n        return self.get_bucket_read().head_object(name)\n\n    def exists(self, name):\n        return self.get_bucket_read().object_exists(name)\n\n    def size(self, name):\n        file_info = self.get_file_header(name)\n        return file_info.content_length\n\n    def modified_time(self, name):\n        file_info = self.get_file_header(name)\n        return datetime.datetime.fromtimestamp(file_info.last_modified)\n\n    def listdir(self, name):\n        name = self._normalize_name(self._clean_name(name))\n        if name and name.endswith('/'):\n            name = name[:-1]\n\n        files = []\n        dirs = set()\n\n        for obj in ObjectIterator(self.get_bucket_read(), prefix=name, delimiter='/'):\n            if obj.is_prefix():\n                dirs.add(obj.key)\n            else:\n                files.append(obj.key)\n\n        return list(dirs), files\n\n    def url(self, name):\n        name = self._normalize_name(self._clean_name(name))\n        # name = filepath_to_uri(name) # \u8fd9\u6bb5\u4f1a\u5bfc\u81f4\u4e8c\u6b21encode\n        name = name.encode('utf8')\n        # \u505a\u8fd9\u4e2a\u8f6c\u5316\uff0c\u662f\u56e0\u4e3a\u4e0b\u9762\u7684_make_url\u4f1a\u7528urllib.quote\u8f6c\u7801\uff0c\u8f6c\u7801\u4e0d\u652f\u6301unicode\uff0c\u4f1a\u62a5\u9519\uff0c\u5728python2\u73af\u5883\u4e0b\u3002\n        return self.get_bucket_read()._make_url(self.get_bucket_read().bucket_name, name)\n\n    def read(self, name):\n        pass\n\n    def delete(self, name):\n        name = self._get_target_name(name)\n        result = self.get_bucket_write().delete_object(name)\n        if result.status &gt;= 400:\n            raise AliyunOperationError(result.resp)\n\n\nclass AliyunSystemPackageStorage(AliyunBaseStorage):\n\n    private = True\n\n    def _save(self, name, content):\n        super(AliyunSystemPackageStorage, self)._save(name, content)\n        return name\n\n    def get_available_name(self, upload_to):\n        kwargs, name = upload_to\n        self.kwargs.update(kwargs)\n\n        dir_name, file_name = os.path.split(name)\n        file_root, file_ext = os.path.splitext(file_name)\n        count = itertools.count(1)\n        while self.exists(name):\n            name = os.path.join(dir_name, \"%s_%s%s\" % (file_root, next(count), file_ext))\n\n        return name\n\nclass OSSSystemPackageStorage(LazyObject):\n    def _setup(self):\n        self._wrapped = AliyunSystemPackageStorage()\n\nsystem_package_storage = OSSSystemPackageStorage()\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_middleware_usage/","title":"django\u4e2d\u95f4\u4ef6\u7684\u4f7f\u7528","text":"","tags":["Python","django"]},{"location":"python/django/django_middleware_usage/#_1","title":"\u4e2d\u95f4\u4ef6","text":"<p>Django\u4e2d\u7684\u4e2d\u95f4\u4ef6\u548cFlask\u4e2d\u7684\u8bf7\u6c42\u94a9\u5b50\u4f5c\u7528\u4e00\u6837</p> <p>\u4f7f\u7528\u4e2d\u95f4\u4ef6\uff0c\u5728Django\u5904\u7406\u89c6\u56fe\u7684\u4e0d\u540c\u9636\u6bb5\u5bf9\u8f93\u5165\u6216\u8f93\u51fa\u8fdb\u884c\u5e72\u9884\u3002</p>","tags":["Python","django"]},{"location":"python/django/django_middleware_usage/#1","title":"1 \u4e2d\u95f4\u4ef6\u7684\u5b9a\u4e49\u65b9\u6cd5","text":"<p>\u65b0\u5efa\u4e00\u4e2amiddleware.py\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u53ef\u4ee5\u5728\u5177\u4f53\u7684\u5e94\u7528\u4e2d\u6dfb\u52a0\uff0c\u4e5f\u53ef\u4ee5\u5728\u5168\u5c40\u9886\u57df\u4e2d\u53bb\u6dfb\u52a0\uff1b - \u5b9a\u4e49\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u5de5\u5382\u51fd\u6570\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u53ef\u4ee5\u8c03\u7528\u7684\u4e2d\u95f4\u4ef6\u3002</p> <ul> <li> <p>\u4e2d\u95f4\u4ef6\u5de5\u5382\u51fd\u6570\u9700\u8981\u63a5\u6536\u4e00\u4e2a\u53ef\u4ee5\u8c03\u7528\u7684get_response\u5bf9\u8c61\u3002</p> </li> <li> <p>\u8fd4\u56de\u7684\u4e2d\u95f4\u4ef6\u4e5f\u662f\u4e00\u4e2a\u53ef\u4ee5\u88ab\u8c03\u7528\u7684\u5bf9\u8c61\uff0c\u5e76\u4e14\u50cf\u89c6\u56fe\u4e00\u6837\u9700\u8981\u63a5\u6536\u4e00\u4e2arequest\u5bf9\u8c61\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2aresponse\u5bf9\u8c61\u3002 Python<pre><code>def simple_middleware(get_response):\n    # \u6b64\u5904\u7f16\u5199\u7684\u4ee3\u7801\u4ec5\u5728Django\u7b2c\u4e00\u6b21\u914d\u7f6e\u548c\u521d\u59cb\u5316\u7684\u65f6\u5019\u6267\u884c\u4e00\u6b21\u3002\n\n    def middleware(request):\n        # \u6b64\u5904\u7f16\u5199\u7684\u4ee3\u7801\u4f1a\u5728\u6bcf\u4e2a\u8bf7\u6c42\u5904\u7406\u89c6\u56fe\u524d\u88ab\u8c03\u7528\u3002\n\n        response = get_response(request)\n\n        # \u6b64\u5904\u7f16\u5199\u7684\u4ee3\u7801\u4f1a\u5728\u6bcf\u4e2a\u8bf7\u6c42\u5904\u7406\u89c6\u56fe\u4e4b\u540e\u88ab\u8c03\u7528\u3002\n\n        return response\n\n    return middleware\n</code></pre></p> </li> </ul>","tags":["Python","django"]},{"location":"python/django/django_middleware_usage/#demo","title":"\u3010Demo\u3011","text":"<p>Python<pre><code># \u4f8b\u5982\uff0c\u5728users\u5e94\u7528\u4e2d\u65b0\u5efa\u4e00\u4e2amiddleware.py\u6587\u4ef6\uff0c\n\ndef my_middleware(get_response):\n    print('init \u88ab\u8c03\u7528')\n    def middleware(request):\n        print('before request \u88ab\u8c03\u7528')\n        response = get_response(request)\n        print('after response \u88ab\u8c03\u7528')\n        return response\n    return middleware\n\n\n# \u5b9a\u4e49\u4e00\u4e2a\u89c6\u56fe\u8fdb\u884c\u6d4b\u8bd5\n\ndef demo_view(request):\n    print('view \u89c6\u56fe\u88ab\u8c03\u7528')\n    return HttpResponse('OK')\n\n# \u6267\u884c\u7ed3\u679c  \n\n# init \u88ab\u8c03\u7528\n# before request\u88ab\u8c03\u7528\n# view \u89c6\u56fe\u88ab\u8c03\u7528\n# after response \u88ab\u8c03\u7528\n\n# \u6ce8\u610f\uff1aDjango\u8fd0\u884c\u5728\u8c03\u8bd5\u6a21\u5f0f\u4e0b\uff0c\u4e2d\u95f4\u4ef6init\u90e8\u5206\u6709\u53ef\u80fd\u88ab\u8c03\u7528\u4e24\u6b21\u3002\n</code></pre> - #### \u5b9a\u4e49\u597d\u4e2d\u95f4\u4ef6\u540e\uff0c\u9700\u8981\u5728settings.py \u6587\u4ef6\u4e2d\u6dfb\u52a0\u6ce8\u518c\u4e2d\u95f4\u4ef6 Python<pre><code># \u5728Django1.9\u7248\u672c\u4e4b\u524d\uff0cMIDDLEWARE\u53eb\u505aMIDDLEWARE_CLASSES\n\n# \u65b0\u7248\u672c\u7684\u540d\u79f0\u5168\u90e8\u6539\u4e3a\u4e0b\u9762\u7684\u540d\u79f0\u4e86\n\n#\uff08\u4ee5\u524d\u5b9a\u4e49\u4e2d\u95f4\u4ef6\u90fd\u662f\u901a\u8fc7\u7c7b\u7684\u65b9\u5f0f\uff0c\u73b0\u5728\u5168\u90e8\u90fd\u6539\u4e3a\u51fd\u6570\u7684\u65b9\u5f0f\u53bb\u5b9a\u4e49\uff09\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    # 'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n\n    'users.middleware.my_middleware',  # \u6dfb\u52a0\u4e2d\u95f4\u4ef6\n]\n</code></pre></p>","tags":["Python","django"]},{"location":"python/django/django_middleware_usage/#2","title":"2 \u591a\u4e2a\u4e2d\u95f4\u4ef6\u7684\u6267\u884c\u987a\u5e8f","text":"<ul> <li> <p>\u5728\u8bf7\u6c42\u89c6\u56fe\u88ab\u5904\u7406\u524d\uff0c\u4e2d\u95f4\u4ef6\u7531\u4e0a\u81f3\u4e0b\u4f9d\u6b21\u6267\u884c</p> </li> <li> <p>\u5728\u8bf7\u6c42\u89c6\u56fe\u88ab\u5904\u7406\u540e\uff0c\u4e2d\u95f4\u4ef6\u7531\u4e0b\u81f3\u4e0a\u4f9d\u6b21\u6267\u884c</p> </li> </ul>","tags":["Python","django"]},{"location":"python/django/django_middleware_usage/#demo_1","title":"\u3010Demo\u3011","text":"<ul> <li>\u5b9a\u4e49\u4e24\u4e2a\u4e2d\u95f4\u4ef6 Python<pre><code>def my_middleware(get_response):\n    print('init \u88ab\u8c03\u7528')\n    def middleware(request):\n        print('before request \u88ab\u8c03\u7528')\n        response = get_response(request)\n        print('after response \u88ab\u8c03\u7528')\n        return response\n    return middleware\n\ndef my_middleware2(get_response):\n    print('init2 \u88ab\u8c03\u7528')\n    def middleware(request):\n        print('before request 2 \u88ab\u8c03\u7528')\n        response = get_response(request)\n        print('after response 2 \u88ab\u8c03\u7528')\n        return response\n    return middleware\n\n\n# \u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a\uff08\u6267\u884c\u4e4b\u524d\u5148\u9700\u8981\u5728MIDDLEWARE\u4e2d\u6dfb\u52a0\u6ce8\u518c\uff09\n\n#init2 \u88ab\u8c03\u7528\n#init \u88ab\u8c03\u7528\n#before request \u88ab\u8c03\u7528\n#before request 2 \u88ab\u8c03\u7528\n#view \u89c6\u56fe\u88ab\u8c03\u7528\n#after response 2 \u88ab\u8c03\u7528\n#after response \u88ab\u8c03\u7528\u00f7\u00f7\n</code></pre></li> <li>\u5728settings.py\u4e2d\u6ce8\u518c\u6dfb\u52a0\u4e24\u4e2a\u4e2d\u95f4\u4ef6</li> </ul> Python<pre><code>MIDDLEWARE = [\n    '\u2026\u2026'\n\n    'users.middleware.my_middleware',  # \u6dfb\u52a0\n    'users.middleware.my_middleware2',  # \u6dfb\u52a0\n]\n</code></pre>","tags":["Python","django"]},{"location":"python/django/django_orm_fields/","title":"django\u4e2dORM\u5b57\u6bb5\u603b\u7ed3","text":"","tags":["Python","Django"]},{"location":"python/django/django_orm_fields/#_1","title":"\u8868\u4e0e\u5b57\u6bb5","text":"<p>\u5bf9\u4e8eORM\u6765\u8bf4,\u8868\u4e0e\u5b57\u6bb5\u5c31\u662f\u7c7b\u4e0e\u7c7b\u5c5e\u6027,\u662fORM\u6a21\u578b\u7684\u57fa\u7840,\u6ca1\u6709\u7c7b\u548c\u7c7b\u5c5e\u6027,\u5c31\u6839\u672c\u65e0\u6cd5\u4f7f\u7528\u6570\u636e\u5e93,\u540c\u65f6\u5728Django\u91cc\u8bbe\u7f6e\u7c7b\u548c\u7c7b\u5c5e\u6027,\u5bf9\u4e8e\u5b9e\u9645\u7684MySQL\u4e2d\u7684\u8868\u6709\u4f55\u5f71\u54cd,\u4e5f\u662f\u5fc5\u987b\u8981\u638c\u63e1\u7684\u5185\u5bb9.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_fields/#_2","title":"\u7c7b=\u8868","text":"<p>\u5728ORM\u4e2d,\u5bf9\u5e94\u4e00\u5f20\u6570\u636e\u8868\u7684,\u662f\u4e00\u4e2a\u7c7b(\u4e00\u822c\u79f0\u4e3a\u4e00\u4e2aModel,\u4e00\u4e2a\u6a21\u578b),\u8fd9\u4e2a\u7c7b\u5fc5\u987b\u5177\u6709\u5982\u4e0b\u7279\u70b9:</p> <ol> <li>\u7ee7\u627f<code>django.db.models.Model</code>\u7c7b,\u6bcf\u4e00\u4e2a\u7c7b\u5c5e\u6027\u8868\u793a\u4e00\u4e2a\u6570\u636e\u8868\u7684\u5b57\u6bb5(database field)</li> <li>\u67d0\u4e2aapp\u8981\u4f7f\u7528\u7684\u7c7b,\u9700\u8981\u5199\u5728\u8be5app\u76ee\u5f55\u4e0b\u7684models.py\u6587\u4ef6\u5185\u90e8,\u8fd8\u8981\u5728settings.py\u6587\u4ef6\u7684INSTALLED_APPS\u5185\u6ce8\u518c\u8be5APP</li> <li>\u6ee1\u8db3\u4e0a\u8fb9\u4e24\u4e2a\u6761\u4ef6\u540e,Django\u4e3a\u8fd9\u4e2a\u7c7b\u81ea\u52a8\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684API\u53ef\u4f9b\u89c6\u56fe\u51fd\u6570\u4f7f\u7528,\u4e5f\u5c31\u662f\u5404\u79cd\u7c7b\u65b9\u6cd5,\u4e3b\u8981\u7528\u4e8e\u589e\u5220\u6539\u67e5\u6570\u636e.</li> </ol> <p>\u8868\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u5185\u5bb9,\u6bd4\u5982META\u7c7b,\u4e00\u4e9b\u9ed8\u8ba4\u7c7b\u65b9\u6cd5,\u8fd8\u6709\u8868\u4e4b\u95f4\u7684\u7ee7\u627f\u5173\u7cfb,\u7b49\u5230\u540e\u8fb9\u518d\u5b66\u4e60,\u5148\u6765\u770b\u6700\u6838\u5fc3\u7684\u5185\u5bb9-\u8868\u7684\u5b57\u6bb5.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_fields/#_3","title":"\u5c5e\u6027=\u5b57\u6bb5","text":"<p>\u8868\u7684\u5185\u5bb9\u76f8\u5bf9\u7b80\u5355,\u5c31\u662f\u5efa\u7acb\u4e00\u4e2a\u7c7b.\u800c\u771f\u6b63\u5bf9\u8868\u6709\u5f71\u54cd\u7684,\u662f\u5176\u4e2d\u7684\u5b57\u6bb5(Field),\u975e\u5e38\u91cd\u8981,\u56e0\u4e3a\u5b57\u6bb5\u4e0d\u4ec5\u4ee3\u8868\u8fd9\u8868\u7684\u5b9e\u9645\u5185\u5bb9,\u5728ORM\u6a21\u578b\u4e0b,\u5b57\u6bb5\u7684\u8bbe\u7f6e\u8fd8\u4f1a\u5bf9MySQL\u91cc\u5b9e\u9645\u5efa\u7acb\u7684\u8868\u4ea7\u751f\u975e\u5e38\u5927\u7684\u5f71\u54cd. \u5728\u4e4b\u524d\u7684\u9879\u76ee\u4e2d,\u4f7f\u7528\u8fc7\u7684\u5b57\u6bb5\u6709AutoField,CharField,ForeignKey,ManyToManyField.\u8fd9\u4e9b\u5bf9\u4e8e\u5f00\u53d1\u7a0b\u5e8f\u6765\u8bf4\u8fdc\u8fdc\u4e0d\u591f,\u73b0\u5728\u8981\u6765\u8be6\u7ec6\u7684\u770b\u4e00\u4e0b\u6240\u6709\u7684\u5b57\u6bb5\u53ca\u5bf9\u5e94\u5173\u7cfb.</p> <p>\u5728Django\u4e2d,\u6240\u6709\u7684\u5b57\u6bb5(Field),\u90fd\u662f\u7531\u4e24\u90e8\u5206\u7ec4\u6210\u7684,\u5373\u5b57\u6bb5\u7c7b\u578b(Field Types)\u548c\u5b57\u6bb5\u9009\u9879(Field Options)\u6784\u6210.\u4f8b\u5982\u6211\u4eec\u4e4b\u524d\u5199\u7684:</p> Python<pre><code>id = models.AutoField(primary_key=True)\n</code></pre> <p>\u5176\u4e2d<code>models.AutoField</code>\u53eb\u505a\u5b57\u6bb5\u7c7b\u578b;<code>primary_key</code>\u53eb\u505a\u5b57\u6bb5\u9009\u9879\u6216\u8005\u8bf4\u5b57\u6bb5\u53c2\u6570,\u5b57\u6bb5\u9009\u9879\u5728\u8bbe\u7f6e\u7684\u65f6\u5019\u901a\u8fc7\u7c7b\u4f3c\u5173\u952e\u5b57\u53c2\u6570\u7684\u65b9\u5f0f\u8bbe\u7f6e.\u4e0b\u8fb9\u5206\u5f00\u4ecb\u7ecd\u8fd9\u4e24\u90e8\u5206.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_fields/#field-types","title":"\u5b57\u6bb5\u7c7b\u578b Field types","text":"\u5b57\u6bb5\u7c7b\u578b \u5c5e\u6027\u540d\u79f0 \u89e3\u91ca AutoField \u81ea\u589e\u5b57\u6bb5,\u662f\u4e00\u4e2aIntegerField(32\u4f4dINT).\u5982\u679c\u624b\u52a8\u8bbe\u7f6e\u4e86AutoField,\u5fc5\u987b\u6307\u5b9a\u5b57\u6bb5\u9009\u9879primary_key=True. \u5982\u679c\u4e00\u4e2a\u8868\u91cc\u8fb9\u6ca1\u6709\u4efb\u4f55AutoField,\u6240\u6709\u7684\u5b57\u6bb5\u4e5f\u90fd\u6ca1\u6709\u88ab\u8bbe\u7f6eprimary_key=True,\u5219\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u5217\u540d\u53eb\u505aid,\u4e3aIntegerField\u7684\u81ea\u589e\u4e3b\u952e\u5217. BigAutoField \u662f\u4e00\u4e2a64\u4f4dINT\u7684AutoField BigIntegerField 64\u4f4dINT\u7684 IntegerField,\u8303\u56f4 -9223372036854775808 \u5230 9223372036854775807. BinaryField \u5b58\u653e\u539f\u59cb\u4e8c\u8fdb\u5236\u6570\u636e,\u529f\u80fd\u6709\u9650,\u8f83\u5c11\u4f7f\u7528,\u5728Model Form\u91cc\u4e5f\u6ca1\u6709\u5bf9\u5e94\u8868\u5355. BooleanField \u5e03\u5c14\u503c.\u5e03\u5c14\u5b57\u6bb5\u7684\u9ed8\u8ba4\u503c\u662fNone,\u9664\u975e\u81ea\u5b9a\u4e49 Field.default.\u9ed8\u8ba4\u5e03\u5c14\u5b57\u6bb5\u4e0d\u80fd\u4e3anull,\u5982\u679c\u8981\u4e3anull,\u9700\u8981\u4f7f\u7528 NullBooleanField CharField \u76f8\u5f53\u4e8eMySQL\u91cc\u7684Vachar,\u5fc5\u987b\u6307\u5b9amax_length\u503c.\u5bf9\u5e94\u7684\u8868\u5355\u5143\u7d20\u662finput-text.\u5982\u679c\u8981\u5b58\u50a8\u5927\u91cf\u6587\u5b57,\u7528TextField\u5b57\u6bb5.ORM\u4e2d\u6ca1\u6709\u5bf9\u5e94MySQL\u4e2d\u7684char\u7c7b\u578b,\u5982\u679c\u9700\u8981\u53ef\u4ee5\u81ea\u5b9a\u4e49 DateField \u65f6\u95f4\u5b57\u6bb5,\u5f88\u91cd\u8981.\u8868\u793a\u4e00\u4e2a\u65e5\u671f,\u5bf9\u5e94\u7684Ptyhon\u4e2d\u7684\u5bf9\u8c61\u662f datetime.date\u5b9e\u4f8b.\u6709\u4e24\u4e2a\u9009\u9879auto_now=True\u8868\u793a\u6bcf\u6b21\u8be5\u884c\u6570\u636e\u88ab.save()\u4fee\u6539\u7684\u65f6\u5019\u8bb0\u5f55\u5f53\u524d\u65f6\u95f4,\u7528\u4e8e\u8bb0\u5f55\u6bcf\u6b21\u4fee\u6539\u7684\u65f6\u95f4,\u9ed8\u8ba4\u4f20\u8fdb\u6765\u7684\u6570\u636e\u6765\u81ea datetime.date.today(). auto_now_add=True\u8868\u793a\u5728\u751f\u6210\u8be5\u5bf9\u8c61\u7684\u65f6\u5019\u8bb0\u5f55\u4e00\u6b21\u5f53\u524d\u65f6\u95f4,\u4e4b\u540e\u4e0d\u518d\u6539\u53d8,\u7528\u4e8e\u8bb0\u5f55\u751f\u6210\u65f6\u95f4\u6233,\u9ed8\u8ba4\u4f20\u8fdb\u6765\u7684\u6570\u636e\u662f django.utils.timezone.now(). DateTimeField \u8fd9\u4e2a\u5bf9\u5e94\u7684\u662f datetime.datetime,\u5373\u5e26\u6709\u65f6\u95f4\u548c\u65e5\u671f\u7684\u5bf9\u8c61.\u5176\u4ed6\u8bbe\u7f6e\u548cDateField\u4e00\u6837. DecimalField \u56fa\u5b9a\u7cbe\u786e\u5ea6\u7684\u5c0f\u6570,\u5bf9\u5e94python\u7684Decimal\u7c7b\u6709\u4e24\u4e2a\u9009\u9879:max_digits\u8868\u793a\u603b\u957f\u5ea6,decimal_places\u8868\u793a\u5c0f\u6570\u70b9\u540e\u7684\u957f\u5ea6. EmailField \u5185\u90e8\u662f\u4e00\u4e2aCharField,\u9ed8\u8ba4\u957f\u5ea6\u4e3a254,Django Admin\u548cModel Form\u4f1a\u81ea\u52a8\u68c0\u67e5Email\u5730\u5740\u7684\u6709\u6548\u6027. DateTimeField \u8fd9\u4e2a\u5bf9\u5e94\u7684\u662f datetime.datetime,\u5373\u5e26\u6709\u65f6\u95f4\u548c\u65e5\u671f\u7684\u5bf9\u8c61.\u5176\u4ed6\u8bbe\u7f6e\u548cDateField\u4e00\u6837. FloatField \u5b58\u653e\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570 IntegerField 32\u4f4dINT,\u6807\u51c6\u7684\u6574\u6570\u7c7b\u578b\u5b57\u6bb5 SmallIntegerField \u5c0f\u6574\u6570\u7c7b\u578b,\u4ece-32768 \u5230 32767 IntegerField 32\u4f4dINT,\u6807\u51c6\u7684\u6574\u6570\u7c7b\u578b\u5b57\u6bb5 PositiveIntegerField 32\u4f4d\u6b63\u6574\u6570\u7c7b\u578b,0 to 2147483647 PositiveSmallIntegerField \u5c0f\u6b63\u6574\u6570\u7c7b\u578b, 0 to 32767 TextField \u5b58\u653e\u957f\u5b57\u7b26 GenericIPAddressField \u5185\u90e8\u662fCharField,\u63d0\u4f9b\u9a8c\u8bc1IPV4\u548cIPV6.\u4e24\u4e2a\u9009\u9879,protocol\u7528\u4e8e\u6307\u5b9a\u534f\u8bae\u662fIPV4\u8fd8\u662fIPV6.unpack_ipv4\u53ef\u4ee5\u63d0\u4f9b\u89e3\u6790,\u9700\u8981protocol\u8bbe\u7f6e\u4e3a\u201dboth\u201d URLField \u5185\u90e8\u662fCharField,Django Admin\u548cModel Form\u4e2d\u63d0\u4f9b\u9a8c\u8bc1URL SlugField \u5185\u90e8\u662fCharField,Django Admin\u548cModel Form\u4e2d\u63d0\u4f9b\u9a8c\u8bc1,\u53ea\u80fd\u4e3a\u5b57\u6bcd,\u6570\u5b57,\u4e0b\u5212\u7ebf\u548c\u8fde\u63a5\u7b26(\u51cf\u53f7) CommaSeparatedIntegerField \u9017\u53f7\u5206\u9694\u7684\u6570\u5b57,\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b UUIDField \u5b57\u7b26\u4e32\u7c7b\u578b,\u7528\u4e8e\u63d0\u4f9b\u5bf9UUID\u7684\u9a8c\u8bc1,\u5bf9\u5e94Python\u4e2d\u7684UUID\u6a21\u5757,Django Admin\u548cModel Form\u4e2d\u63d0\u4f9bUUID\u7684\u9a8c\u8bc1 FilePathField \u7528\u4e8e\u5b58\u653e\u6587\u4ef6\u8def\u5f84,Django Admin \u548cModel Form\u4e2d\u63d0\u4f9b\u8bfb\u53d6\u6587\u4ef6\u5939\u4e0b\u6587\u4ef6\u7684\u529f\u80fd,\u8fd9\u91cc\u53ef\u4ee5\u5b58\u653e\u4e00\u4e2a\u6587\u4ef6,\u4e5f\u53ef\u4ee5\u5b58\u653e\u4e00\u4e2a\u6587\u4ef6\u7684\u8def\u5f84.\u8be6\u7ec6\u770b\u8fd9\u91cc FileField \u5b57\u7b26\u4e32,\u7528\u4e8e\u63a5\u53d7\u6587\u4ef6,\u9009\u9879upload_to\u8868\u793a\u4e0a\u4f20\u6587\u4ef6\u7684\u4fdd\u5b58\u8def\u5f84,storage=None,\u662f\u9009\u62e9\u5b58\u50a8\u7ec4\u4ef6,\u5177\u4f53\u770b\u8fd9\u91cc ImageField \u548cFileField\u4e00\u6837,\u53ea\u4e0d\u8fc7\u9a8c\u8bc1\u4e0a\u4f20\u7684\u6587\u4ef6\u4e00\u5b9a\u662f\u56fe\u50cf. TimeField \u5bf9\u5e94datetime.time\u5b9e\u4f8b,\u5176\u4ed6\u7528\u6cd5\u548c\u53e6\u5916\u4e24\u4e2a\u65f6\u95f4\u6a21\u5757\u4e00\u6837 DurationField \u957f\u6574\u6570\u7c7b\u578b,\u7528\u4e8e\u5b58\u653e\u65f6\u95f4\u95f4\u9694,ORM\u4e2d\u83b7\u53d6\u7684\u503c\u662fdatetime.timedelta\u7c7b\u578b <p>\u9664\u4e86\u4e0a\u8fb9\u5e38\u7528\u7684\u5185\u7f6e\u5b57\u6bb5\u4e4b\u5916,\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5b57\u6bb5,\u5728models.py\u91cc\u65b0\u5efa\u4e00\u4e2a\u7c7b\u7ee7\u627fmodels.Field\u7c7b,\u5177\u4f53\u4ee5\u540e\u5148\u7814\u7a76,\u5148\u628a\u793a\u4f8b\u4ee3\u7801\u8d34\u5728\u8fd9\u91cc:</p> Python<pre><code>class FixedCharField(models.Field):\n    \"\"\"\n    \u81ea\u5b9a\u4e49\u7684char\u7c7b\u578b\u7684\u5b57\u6bb5\u7c7b\n    \"\"\"\n    def __init__(self, max_length, *args, **kwargs):\n        self.max_length = max_length\n        super(FixedCharField, self).__init__(max_length=max_length, *args, **kwargs)\n\n    def db_type(self, connection):\n        \"\"\"\n        \u9650\u5b9a\u751f\u6210\u6570\u636e\u5e93\u8868\u7684\u5b57\u6bb5\u7c7b\u578b\u4e3achar\uff0c\u957f\u5ea6\u4e3amax_length\u6307\u5b9a\u7684\u503c\n        \"\"\"\n        return 'char(%s)' % self.max_length\n\n\nclass Class(models.Model):\n    id = models.AutoField(primary_key=True)\n    title = models.CharField(max_length=25)\n    # \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684char\u7c7b\u578b\u7684\u5b57\u6bb5\n    cname = FixedCharField(max_length=25)\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_orm_fields/#field-options","title":"\u5b57\u6bb5\u9009\u9879 Field options","text":"<p>\u4e0b\u8fb9\u7684\u9009\u9879\u53ef\u4ee5\u7528\u4e8e\u6240\u6709\u7684\u5b57\u6bb5:</p> \u5b57\u6bb5\u9009\u9879(\u5b57\u6bb5\u53c2\u6570) \u9009\u9879\u540d\u79f0 \u89e3\u91ca null \u8868\u793a\u5b57\u6bb5\u662f\u5426\u53ef\u4ee5\u4e3a\u7a7a,\u9ed8\u8ba4\u4e3aFalse\u5373\u4e0d\u80fd\u4e3a\u7a7a.\u5982\u679c\u8bbe\u7f6e\u4e3aTrue,\u4e0d\u4f20\u503c\u7684\u65f6\u5019Django\u4f1a\u5b58\u5165MySQL\u7684Null\u503c.\u5bf9\u4e8e\u57fa\u4e8e\u5b57\u7b26\u4e32\u7684\u5b57\u6bb5\u5982\u679c\u8bbe\u7f6e\u4e3aTrue,\u610f\u5473\u7740\u53ef\u80fd\u5b58\u5728Null\u548c\u7a7a\u5b57\u7b26\u4e32\u4e24\u79cd\u5f62\u5f0f.\u4e00\u822c\u6700\u597d\u9a8c\u8bc1\u4e00\u4e0b\u5b57\u7b26\u4e32\u4e0d\u4e3a\u7a7a. blank \u662f\u5426\u53ef\u4ee5\u4e3a\u7a7a\u503c,\u6ce8\u610f\u7a7a\u503c\u548cNull\u662f\u4e0d\u540c\u7684,Null\u662f\u7eaf\u7cb9\u5bf9\u4e8e\u6570\u636e\u5e93\u6765\u8bf4\u7684\u5c5e\u6027.\u5982\u679c\u8bbe\u7f6e\u4e3aTrue,\u8868\u5355\u53ef\u4ee5\u63d0\u4ea4\u7a7a\u767d\u7684\u6570\u636e,\u5426\u5219\u5c31\u4e0d\u884c.\u5bf9\u4e8e\u67d0\u4e9b\u5b57\u7b26\u4e32,\u6700\u597d\u540c\u65f6\u8bbe\u7f6enull=False\u548cblank=False choices \u7528\u4e8e\u9875\u9762\u4e0a\u7684\u9009\u62e9\u6846\u6807\u7b7e\uff0c\u9700\u8981\u5148\u63d0\u4f9b\u4e00\u4e2a\u4e8c\u7ef4\u7684\u4e8c\u5143\u5143\u7ec4\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u8868\u793a\u5b58\u5728\u6570\u636e\u5e93\u5185\u771f\u5b9e\u7684\u503c\uff0c\u7b2c\u4e8c\u4e2a\u8868\u793a\u9875\u9762\u4e0a\u663e\u793a\u7684\u5177\u4f53\u5185\u5bb9\u3002\u5728\u6d4f\u89c8\u5668\u9875\u9762\u4e0a\u5c06\u663e\u793a\u7b2c\u4e8c\u4e2a\u5143\u7d20\u7684\u503c\u3002 db_column \u8be5\u53c2\u6570\u7528\u4e8e\u5b9a\u4e49\u5f53\u524d\u5b57\u6bb5\u5728\u6570\u636e\u8868\u5185\u7684\u5217\u540d\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0cDjango\u5c06\u4f7f\u7528\u53d8\u91cf\u540d\u4f5c\u4e3a\u5217\u540d. db_index \u8fd9\u4e2a\u53c2\u6570\u63a5\u53d7\u5e03\u5c14\u503c,\u4e3aTrue\u8868\u793a\u4e3a\u5f53\u524d\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15 default \u5b57\u6bb5\u7684\u9ed8\u8ba4\u503c\uff0c\u53ef\u4ee5\u662f\u503c\u6216\u8005\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\u3002\u5982\u679c\u662f\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u90a3\u4e48\u6bcf\u6b21\u521b\u5efa\u65b0\u5bf9\u8c61\u65f6\u90fd\u4f1a\u8c03\u7528\u3002\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u503c\u4e0d\u80fd\u662f\u4e00\u4e2a\u53ef\u53d8\u5bf9\u8c61\uff0c\u6bd4\u5982\u5217\u8868\u3001\u96c6\u5408\u7b49\u7b49\u3002lambda\u533f\u540d\u51fd\u6570\u4e5f\u4e0d\u53ef\u7528\u4e8edefault\u7684\u8c03\u7528\u5bf9\u8c61\uff0c\u56e0\u4e3a\u533f\u540d\u51fd\u6570\u4e0d\u80fd\u88abmigrations\u5e8f\u5217\u5316\u3002 editable \u5982\u679c\u8bbe\u4e3aFalse\uff0c\u90a3\u4e48\u5f53\u524d\u5b57\u6bb5\u5c06\u4e0d\u4f1a\u5728admin\u540e\u53f0\u6216\u8005\u5176\u5b83\u7684ModelForm\u8868\u5355\u4e2d\u663e\u793a\uff0c\u540c\u65f6\u8fd8\u4f1a\u88ab\u6a21\u578b\u9a8c\u8bc1\u529f\u80fd\u8df3\u8fc7\u3002\u53c2\u6570\u9ed8\u8ba4\u503c\u4e3aTrue\u3002 error_messages \u7528\u4e8e\u81ea\u5b9a\u4e49\u9519\u8bef\u4fe1\u606f\u3002\u53c2\u6570\u63a5\u6536\u5b57\u5178\u7c7b\u578b\u7684\u503c\u3002\u5b57\u5178\u7684\u952e\u53ef\u4ee5\u662fnull\u3001 blank\u3001 invalid\u3001 invalid_choice\u3001 unique\u548cunique_for_date\u5176\u4e2d\u7684\u4e00\u4e2a\u3002 help_text \u989d\u5916\u663e\u793a\u5728\u8868\u5355\u90e8\u4ef6\u4e0a\u7684\u5e2e\u52a9\u6587\u672c\u3002\u4f7f\u7528\u65f6\u8bf7\u6ce8\u610f\u8f6c\u4e49\u4e3a\u7eaf\u6587\u672c\uff0c\u9632\u6b62\u811a\u672c\u653b\u51fb\u3002 primary_key \u4e3a\u67d0\u4e2a\u5b57\u6bb5\u8bbe\u7f6e\u4e86primary_key=True\uff0c\u5219\u5f53\u524d\u5b57\u6bb5\u53d8\u4e3a\u4e3b\u952e\uff0c\u5e76\u5173\u95edDjango\u81ea\u52a8\u751f\u6210id\u4e3b\u952e\u7684\u529f\u80fd\u3002primary_key=True\u9690\u542bnull=False\u548cunique=True\u7684\u610f\u601d\u3002\u4e00\u4e2a\u6a21\u578b\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u4e3b\u952e\u5b57\u6bb5\uff01 unique \u8bbe\u4e3aTrue\u65f6\uff0c\u5728\u6574\u4e2a\u6570\u636e\u8868\u5185\u8be5\u5b57\u6bb5\u7684\u6570\u636e\u4e0d\u53ef\u91cd\u590d\u3002\u5f53unique=True\u65f6\uff0cdb_index\u53c2\u6570\u65e0\u987b\u8bbe\u7f6e\uff0c\u56e0\u4e3aunqiue\u9690\u542b\u4e86\u7d22\u5f15\u3002\u5bf9\u4e8eManyToManyField\u548cOneToOneField\u5173\u7cfb\u7c7b\u578b\uff0c\u8be5\u53c2\u6570\u65e0\u6548\u3002 verbose_name \u4e3a\u5b57\u6bb5\u8bbe\u7f6e\u4e00\u4e2a\u4eba\u7c7b\u53ef\u8bfb\uff0c\u66f4\u52a0\u76f4\u89c2\u7684\u522b\u540d\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5b57\u6bb5\u7c7b\u578b\uff0c\u9664\u4e86ForeignKey\u3001ManyToManyField\u548cOneToOneField\u8fd9\u4e09\u4e2a\u7279\u6b8a\u7684\u5173\u7cfb\u7c7b\u578b\uff0c\u5176\u7b2c\u4e00\u53ef\u9009\u4f4d\u7f6e\u53c2\u6570\u90fd\u662fverbose_name\u3002\u5982\u679c\u6ca1\u6307\u5b9a\u8fd9\u4e2a\u53c2\u6570\uff0cDjango\u4f1a\u5229\u7528\u5b57\u6bb5\u7684\u5c5e\u6027\u540d\u81ea\u52a8\u521b\u5efa\u5b83\uff0c\u5e76\u5c06\u4e0b\u5212\u7ebf\u8f6c\u6362\u4e3a\u7a7a\u683c\u3002 validators \u8fd0\u884c\u5728\u8be5\u5b57\u6bb5\u4e0a\u7684\u9a8c\u8bc1\u5668\u7684\u5217\u8868","tags":["Python","Django"]},{"location":"python/django/django_orm_fields/#_4","title":"\u5173\u7cfb\u578b\u5b57\u6bb5","text":"<p>\u4e0a\u8fb9\u4ecb\u7ecd\u4e86\u8868\u7684\u6240\u6709\u6570\u636e\u5b57\u6bb5\u4ee5\u53ca\u5e38\u7528\u7684\u5b57\u6bb5\u9009\u9879.\u5728ORM\u4e2d,\u8fd8\u6709\u4e00\u7c7b\u91cd\u8981\u7684\u5b57\u6bb5\u5c31\u662f\u5173\u7cfb\u578b\u5b57\u6bb5.\u5728MySQL\u4e2d,\u4ec5\u4ec5\u53ea\u6709\u5916\u952e\u4e2d\u4e00\u79cd\u7c7b\u578b,\u5b9e\u73b0\u591a\u5bf9\u591a\u9700\u8981\u81ea\u884c\u5199\u4e00\u5f20\u8868\u6765\u5bf9\u5e94.\u800c\u5728ORM\u6a21\u578b\u4e2d,\u62bd\u8c61\u51fa\u4e86\u4e00\u5bf9\u591a,\u591a\u5bf9\u591a\u5173\u7cfb\u5e76\u5c01\u88c5\u597d,\u4f53\u73b0\u5728\u4e86\u5173\u7cfb\u578b\u5b57\u6bb5\u7684\u8bbe\u7f6e\u4e0a.\u5173\u7cfb\u578b\u7684\u5b57\u6bb5\u6309\u7167\u5173\u7cfb\u6765\u5b66\u4e60:</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_fields/#foreignkey","title":"ForeignKey \u4e00\u5bf9\u591a\u5173\u7cfb","text":"<p>\u5916\u952e\u7c7b\u578b\u5728ORM\u4e2d\u7528\u6765\u8868\u793a\u5916\u952e\u5173\u8054\u5173\u7cfb\uff0c\u4e00\u822c\u628aForeignKey\u5b57\u6bb5\u8bbe\u7f6e\u5728 \u2018\u4e00\u5bf9\u591a\u2019\u4e2d\u2019\u591a\u2019\u7684\u4e00\u65b9\u3002 ForeignKey\u53ef\u4ee5\u548c\u5176\u4ed6\u8868\u505a\u5173\u8054\u5173\u7cfb\u540c\u65f6\u4e5f\u53ef\u4ee5\u548c\u81ea\u8eab\u505a\u5173\u8054\u5173\u7cfb\u3002\u8bbe\u7f6eForeignKey\u7684\u683c\u5f0f\u5982\u4e0b:</p> Python<pre><code>theclass = models.ForeignKey(to=\"Classes\",to_field=\"name\" related_name=\"students\",on_delete=models.CASCADE)\n</code></pre> <p>ForeignKey\u7684\u51e0\u4e2a\u5b57\u6bb5\u53c2\u6570\u4ecb\u7ecd\u5982\u4e0b: to= \u5176\u4e2d\u7684to=\u8868\u793a\u5916\u952e\u5173\u8054\u5230\u54ea\u4e2a\u8868,\u53ef\u4ee5\u76f4\u63a5\u4e3a\u7c7b\u540d,\u5982\u679c\u7c7b\u8fd8\u6ca1\u5efa\u7acb,\u53ef\u4ee5\u7528\u5b57\u7b26\u4e32\u7684\u7c7b\u540d.to_field\u8868\u793a\u5173\u8054\u5230\u54ea\u4e2a\u5b57\u6bb5,\u5982\u679c\u4e0d\u8bbe\u7f6e,Django\u9ed8\u8ba4\u4f1a\u5173\u8054\u5230\u4e3b\u952e.</p> <p>related_name related_name\u8868\u793a\u53cd\u5411\u64cd\u4f5c\u7684\u65f6\u5019\u4ee3\u66ff\u7684\u8868\u540d,\u6bd4\u5982\u5b66\u751f\u8868\u5173\u8054\u5230\u73ed\u7ea7\u8868:</p> Python<pre><code>class Classes(models.Model):\n    name = models.CharField(max_length=32)\n\nclass Student(models.Model):\n    name = models.CharField(max_length=32)\n    theclass = models.ForeignKey(to=\"Classes\")\n</code></pre> <p>\u8fd9\u91cc\u5916\u952e\u8bbe\u7f6e\u5728\u5b66\u751f\u91cc,\u5982\u679c\u8981\u67e5\u4e00\u4e2a\u73ed\u7ea7\u5bf9\u5e94\u7684\u6240\u6709\u5b66\u751f,\u64cd\u4f5c\u7684\u4e3b\u4f53\u662fClasses\u5bf9\u8c61,\u5199\u6210:</p> Text Only<pre><code>models.Classes.objects.first().student_set.all()\n</code></pre> <p>\u8fd9\u91cc\u7684_set\u662f\u56fa\u5b9a\u5199\u6cd5,\u5373\u53bb\u53cd\u67e5\u8bbe\u7f6e\u4e86\u5916\u952e\u7684\u90a3\u4e00\u5f20\u8868.student\u662f\u81ea\u52a8\u5c0f\u5199\u7684\u7c7b\u540d. \u5982\u679cStudent\u8868\u91cc\u7684theclass\u5916\u952e\u8bbe\u7f6e\u4e86related_name\u5982\u4e0b:</p> Python<pre><code>class Student(models.Model):\n    name = models.CharField(max_length=32)\n    theclass = models.ForeignKey(to=\"Classes\", related_name=\"students\")\n</code></pre> <p>\u5219\u4e0a\u8fb9\u901a\u8fc7\u73ed\u7ea7\u8868\u67e5\u5bf9\u5e94\u5b66\u751f\u53ef\u4ee5\u5199\u6210:</p> Python<pre><code>models.Classes.objects.first().students.all()\n</code></pre> <p>related_query_name \u53cd\u5411\u67e5\u8be2\u64cd\u4f5c\u65f6\uff0c\u4f7f\u7528\u7684\u8fde\u63a5\u524d\u7f00\uff0c\u7528\u4e8e\u66ff\u6362\u8868\u540d\u3002\u5373\u5728\u53cd\u5411\u64cd\u4f5c\u7684\u65f6\u5019\u7ed9\u8868\u8d77\u4e2a\u522b\u540d.related_name\u662f\u7ed9\u5916\u952e\u5b57\u6bb5\u8d77\u4e00\u4e2a\u522b\u540d.</p> <p>on_delete \u8fd9\u4e2a\u8868\u793a\u5f53\u5220\u9664\u5b57\u6bb5\u7684\u65f6\u5019,\u5bf9\u5e94\u7684\u884c\u4e3a,\u6709\u5982\u4e0b\u51e0\u79cd.</p> on_delete\u53c2\u6570 \u53c2\u6570\u503c \u89e3\u91ca models.CASCADE \u5220\u9664\u5173\u8054\u6570\u636e\uff0c\u4e0e\u4e4b\u5173\u8054\u4e5f\u5220\u9664.\u4e00\u822c\u5927\u578b\u6570\u636e\u5e93\u91cc\u4e0d\u7528 models.DO_NOTHING \u4ec0\u4e48\u90fd\u4e0d\u505a,\u5982\u679c\u6570\u636e\u5e93\u5f3a\u5236\u68c0\u67e5\u64cd\u4f5c\u7684\u5b8c\u6574\u6027,\u6709\u53ef\u80fd\u5f15\u53d1 IntegrityError \u9519\u8bef models.PROTECT \u5f15\u53d1\u9519\u8befProtectedError,\u4e0d\u4f1a\u5220\u9664\u6570\u636e models.SET_NULL \u5220\u9664\u5173\u8054\u6570\u636e\uff0c\u5c06\u5916\u952e\u8bbe\u7f6e\u4e3a\u7a7a,\u9700\u8981\u5916\u952e\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u7a7a models.SET_DEFAULT \u5c06\u5916\u952e\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u503c,\u524d\u63d0\u662f\u5916\u952e\u8bbe\u7f6e\u8fc7\u9ed8\u8ba4\u503c models.SET \u5220\u9664\u5173\u8054\u6570\u636e\uff0c a. \u4e0e\u4e4b\u5173\u8054\u7684\u503c\u8bbe\u7f6e\u4e3a\u6307\u5b9a\u503c\uff0c\u8bbe\u7f6e\uff1amodels.SET(\u503c) b. \u4e0e\u4e4b\u5173\u8054\u7684\u503c\u8bbe\u7f6e\u4e3a\u53ef\u6267\u884c\u5bf9\u8c61\u7684\u8fd4\u56de\u503c\uff0c\u8bbe\u7f6e\uff1amodels.SET(\u53ef\u6267\u884c\u5bf9\u8c61) <p>db_constraint \u8868\u793a\u662f\u5426\u5efa\u7acb\u7ea6\u675f,\u9ed8\u8ba4\u662fTrue,\u4f46\u4e00\u822c\u5927\u578b\u6570\u636e\u5e93\u662f\u5efa\u7acb\u8f6f\u7ea6\u675f,\u5373\u5efa\u7acb\u5916\u952e\u4f46\u662f\u4e0d\u8bbe\u7f6e\u7ea6\u675f,\u6bcf\u6b21\u901a\u8fc7\u7a0b\u5e8f\u6765\u68c0\u67e5\u6570\u636e\u4e00\u81f4\u6027.\u8bbe\u7f6e\u6210False\u7684\u8bdd\u4f9d\u636eORM\u5173\u7cfb\u5b57\u6bb5\u7684\u67e5\u8be2\u5c06\u65e0\u6cd5\u751f\u6548.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_fields/#onetoonefield","title":"OneToOneField \u4e00\u5bf9\u4e00\u5173\u7cfb","text":"<p>\u4e00\u5bf9\u4e00\u5173\u7cfb\u7ecf\u5e38\u662f\u7528\u6765\u6269\u5c55\u5b58\u50a8\u7684\u5185\u5bb9,\u5b9e\u9645\u4e0a\u7528\u4e00\u5f20\u8868\u4e5f\u80fd\u88c5\u4e0b,\u4e3b\u8981\u7528\u4e8e\u5bf9\u4e8e\u67d0\u4e9b\u5b57\u6bb5\u67e5\u8be2\u7279\u522b\u9891\u7e41\u7684\u60c5\u51b5,\u5c06\u4e00\u5f20\u8868\u4e2d\u7684\u5b57\u6bb5\u5355\u72ec\u5206\u79bb\u51fa\u4e00\u4e2a\u8868. \u4e00\u5bf9\u4e00\u5173\u7cfb\u548cunique=True\u7684\u5916\u952e\u529f\u80fd\u662f\u76f8\u540c\u7684,\u53ea\u4e0d\u8fc7\u5728\u53cd\u67e5\u7684\u65f6\u5019,\u4e0d\u662f\u8fd4\u56de\u4e00\u7ec4\u5bf9\u8c61,\u800c\u662f\u76f4\u63a5\u8fd4\u56de\u5355\u4e2a\u5bf9\u8c61(\u56e0\u4e3a\u662f\u4e00\u5bf9\u4e00) \u5b57\u6bb5\u9009\u9879\u548c\u5916\u952e\u90fd\u76f8\u540c.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_fields/#manytomanyfield","title":"ManyToManyField \u591a\u5bf9\u591a\u5173\u7cfb","text":"<p>\u5728\u4e4b\u524d\u5df2\u7ecf\u4f7f\u7528\u8fc7\u4e00\u6b21\u591a\u5bf9\u591a\u5173\u7cfb,\u5176\u5199\u6cd5\u4e0e\u5916\u952e\u4e5f\u7c7b\u4f3c,\u4f46\u662f\u770b\u5230\u7ed3\u679c\u662f\u5728MySQL\u91cc\u81ea\u52a8\u751f\u6210\u4e86\u7528\u4e8e\u591a\u5bf9\u591a\u5173\u7cfb\u7684\u8868.\u73b0\u5728\u770b\u4e00\u770b\u8be6\u7ec6\u7684\u63a7\u5236\u65b9\u6cd5 \u5b57\u6bb5\u53c2\u6570:</p> \u591a\u5bf9\u591a\u5b57\u6bb5\u53c2\u6570 \u53c2\u6570\u503c \u89e3\u91ca to \u8bbe\u7f6e\u8981\u5173\u8054\u7684\u8868,\u5982\u679c\u8bbe\u7f6e\u6210\u201dself\u201d\u8868\u793a\u5173\u8054\u81ea\u8eab related_name \u548c\u5916\u952e\u4e00\u6837,\u7ed9\u8fd9\u4e2a\u591a\u5bf9\u591a\u5b57\u6bb5\u8d77\u522b\u540d related_query_name \u548c\u5916\u952e\u4e00\u6837,\u7ed9\u67e5\u8be2\u8868\u540d\u8d77\u522b\u540d symmetrical \u4ec5\u7528\u4e8e\u591a\u5bf9\u591a\u5173\u8054\u81ea\u8eab,\u6307\u5b9a\u5185\u90e8\u662f\u5426\u521b\u5efa\u53cd\u5411\u64cd\u4f5c\u7684\u5b57\u6bb5,\u9ed8\u8ba4\u4e3aTrue,\u5373\u53ef\u4ee5\u7528_set\u53cd\u5411\u67e5\u8be2 through \u65e0\u8be5\u53c2\u6570,Django\u81ea\u52a8\u521b\u5efa\u591a\u5bf9\u591a\u5173\u7cfb\u8868.\u8be5\u53c2\u6570\u662f\u624b\u52a8\u521b\u5efa\u591a\u5bf9\u591a\u8868\u7684\u540d\u79f0. through_fields \u8bbe\u7f6e\u5173\u8054\u7684\u5b57\u6bb5\u3002 db_table \u9ed8\u8ba4\u521b\u5efa\u7b2c\u4e09\u5f20\u8868\u65f6\uff0c\u6570\u636e\u5e93\u4e2d\u8868\u7684\u540d\u79f0\u3002 <p>\u4f46\u770b\u5b57\u6bb5\u53c2\u6570\u8fd8\u6709\u70b9\u4e0d\u660e\u767d,\u5728MySQL\u91cc\u591a\u5bf9\u591a\u5173\u7cfb\u662f\u901a\u8fc7\u521b\u5efa\u4e00\u5f20\u8868\u683c\u6765\u5bf9\u5e94\u7684.\u8981\u4e86\u89e3ManyToMany,\u5c31\u8981\u4e86\u89e3ORM\u6a21\u578b\u91cc\u521b\u5efa\u591a\u5bf9\u591a\u5173\u7cfb\u7684\u4e09\u79cd\u65b9\u6cd5:</p> <p>\u7b2c\u4e00\u79cd\u65b9\u6cd5,\u81ea\u884c\u521b\u5efa\u7b2c\u4e09\u5f20\u8868,\u4e0d\u4f7f\u7528ManyToMany:</p> Python<pre><code>class Book(models.Model):\n    title = models.CharField(max_length=32, verbose_name=\"\u4e66\u540d\")\n\n\nclass Author(models.Model):\n    name = models.CharField(max_length=32, verbose_name=\"\u4f5c\u8005\u59d3\u540d\")\n\n\n# \u81ea\u5df1\u521b\u5efa\u7b2c\u4e09\u5f20\u8868\uff0c\u5206\u522b\u901a\u8fc7\u5916\u952e\u5173\u8054\u4e66\u548c\u4f5c\u8005\nclass Author2Book(models.Model):\n    author = models.ForeignKey(to=\"Author\")\n    book = models.ForeignKey(to=\"Book\")\n\n    class Meta:\n        unique_together = (\"author\", \"book\")\n</code></pre> <p>\u8fd9\u79cd\u65b9\u6cd5\u81ea\u7136\u65e0\u6cd5\u901a\u8fc7ManyToMany\u5b57\u6bb5\u6765\u76f4\u63a5\u67e5\u8be2\u53d6\u503c,\u60f3\u8981\u67e5\u8be2\u5173\u7cfb\u5c31\u5fc5\u987b\u901a\u8fc7\u591a\u5bf9\u591a\u8868\u62ff\u5230\u7ed3\u679c\u518d\u8fc7\u6ee4.</p> <p>\u7b2c\u4e8c\u79cd\u65b9\u6cd5,\u901a\u8fc7ManyToManyField\u81ea\u52a8\u521b\u5efa\u591a\u5bf9\u591a\u5173\u7cfb\u8868:</p> Python<pre><code>class Book(models.Model):\n    title = models.CharField(max_length=32, verbose_name=\"\u4e66\u540d\")\n\n\n# \u901a\u8fc7ORM\u81ea\u5e26\u7684ManyToManyField\u81ea\u52a8\u521b\u5efa\u7b2c\u4e09\u5f20\u8868\nclass Author(models.Model):\n    name = models.CharField(max_length=32, verbose_name=\"\u4f5c\u8005\u59d3\u540d\")\n    books = models.ManyToManyField(to=\"Book\", related_name=\"authors\")\n</code></pre> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\u60f3\u8981\u67e5\u8be2\u4f5c\u8005\u5bf9\u5e94\u7684\u4e66,\u662f\u53ef\u4ee5\u4f7f\u7528Django\u63d0\u4f9b\u7684API\u76f4\u63a5\u67e5\u8be2\u7684,\u5c31\u50cf\u4e4b\u524d\u9879\u76ee\u91cc\u5199\u7684<code>author_obj.book.set(books)</code>\u76f4\u63a5\u5728\u591a\u5bf9\u591a\u5173\u7cfb\u91cc\u8bbe\u7f6e\u4e86\u5bf9\u5e94\u5173\u7cfb.</p> <p>\u7b2c\u4e09\u79cd\u65b9\u6cd5,\u8bbe\u7f6eManyTomanyField\u5e76\u6307\u5b9a\u81ea\u884c\u521b\u5efa\u7684\u7b2c\u4e09\u5f20\u8868:</p> Python<pre><code>class Book(models.Model):\n    title = models.CharField(max_length=32, verbose_name=\"\u4e66\u540d\")\n\n\n# \u81ea\u5df1\u521b\u5efa\u7b2c\u4e09\u5f20\u8868\uff0c\u5e76\u901a\u8fc7ManyToManyField\u6307\u5b9a\u5173\u8054\nclass Author(models.Model):\n    name = models.CharField(max_length=32, verbose_name=\"\u4f5c\u8005\u59d3\u540d\")\n    books = models.ManyToManyField(to=\"Book\", through=\"Author2Book\", through_fields=(\"author\", \"book\"))\n    # through_fields\u63a5\u53d7\u4e00\u4e2a2\u5143\u7ec4\uff08'field1'\uff0c'field2'\uff09\uff1a\n    # \u5176\u4e2dfield1\u662f\u5b9a\u4e49ManyToManyField\u7684\u6a21\u578b(ManyToMany\u5b57\u6bb5\u6240\u5728\u7684\u8868)\u5916\u952e\u7684\u540d\uff08author\uff09\uff0cfield2\u662f\u5173\u8054\u76ee\u6807\u6a21\u578b \uff08book\uff09\u7684\u5916\u952e\u540d\u3002\n\n\nclass Author2Book(models.Model):\n    author = models.ForeignKey(to=\"Author\")\n    book = models.ForeignKey(to=\"Book\")\n\n    class Meta:\n        unique_together = (\"author\", \"book\")\n</code></pre> <p>\u867d\u7136\u7b2c\u4e09\u79cd\u65b9\u5f0f\u4e5f\u4f7f\u7528\u4e86ManyToMany\u5b57\u6bb5,\u4f46\u8fd9\u79cd\u65b9\u5f0f\u4e0e\u7b2c\u4e00\u79cd\u7c7b\u4f3c,\u65e0\u6cd5\u4f7f\u7528set\u3001add\u3001remove\u3001clear\u7b49\u5185\u5efaAPI\u6765\u7ba1\u7406\u591a\u5bf9\u591a\u7684\u5173\u7cfb\u4e86\uff0c\u9700\u8981\u901a\u8fc7\u7b2c\u4e09\u5f20\u8868\u81ea\u5df1\u53d6\u67e5\u8be2\u7ed3\u679c\u518d\u64cd\u4f5c.</p> <p>\u5230\u8fd9\u91cc\u57fa\u672c\u4e0a\u5b66\u4e60\u5b8c\u4e86\u5b9a\u4e49\u8868\u65f6\u5019\u7684\u64cd\u4f5c,\u5305\u62ec\u7c7b\u548c\u7c7b\u5c5e\u6027,\u5173\u8054\u5173\u7cfb\u7684\u5404\u79cd\u8bbe\u7f6e. \u6b64\u5916,\u8fd8\u8981\u5bf9\u8868\u518d\u8865\u5145\u4e00\u70b9,\u5c31\u662f\u7c7b\u5185\u53ef\u4ee5\u518d\u5b9a\u4e49\u4e00\u4e2a\u53ebMETA\u7684\u7c7b,\u4fdd\u5b58\u7740\u8fd9\u4e2a\u8868\u7684\u4e00\u4e9b\u5176\u4ed6\u5c5e\u6027. \u5efa\u7acbMETA\u7c7b\u5f88\u7b80\u5355,\u53ea\u8981\u5728\u8868\u7684\u7c7b\u5185\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u5982\u4e0b:</p> Python<pre><code>class Meta:\n    unique_together = (\"author\", \"book\")\n</code></pre> <p>META\u7c7b\u7684\u7c7b\u5c5e\u6027\u90fd\u6709\u7740\u7279\u6b8a\u7684\u610f\u4e49:</p> META\u7c7b\u7684\u7c7b\u5c5e\u6027 \u5c5e\u6027\u540d \u89e3\u91ca abstract \u8bbe\u7f6e\u4e3aTrue\u8868\u793a\u8fd9\u662f\u4e00\u4e2aABC\u7c7b,\u8fd9\u4e2a\u7c7b\u7684\u5b57\u6bb5\u4f1a\u5e94\u7528\u5230\u5b50\u7c7b\u4e2d. app_label \u7c7b\u5bf9\u5e94\u7684app\u540d\u79f0.\u5982\u679c\u5f53\u524d\u8fd9\u4e2a\u7c7b\u662f\u5728app\u4e4b\u5916\u5b9a\u4e49\u7684,\u5c06app_label\u8bbe\u7f6e\u4e3a\u5177\u4f53\u7684app\u540d\u79f0\u53ef\u4ee5\u6307\u5b9a\u8fd9\u4e2a\u7c7b\u662f\u4e3a\u54ea\u4e2aapp\u51c6\u5907\u7684 db_table \u6307\u5b9a\u8868\u540d,\u4e0d\u6307\u5b9a\u5219Django\u81ea\u52a8\u6309\u7167app_\u7c7b\u540d\u751f\u6210\u8868\u540d indexes \u6307\u5b9a\u7f16\u5236\u7d22\u5f15\u7684\u5b57\u6bb5\u548c\u7d22\u5f15\u540d\u79f0,\u5177\u4f53\u770b\u8fd9\u91cc unique_together \u53c2\u6570\u4e3a\u5b57\u6bb5\u5143\u7ec4,\u8868\u793a\u54ea\u4e00\u7ec4\u5b57\u6bb5\u8fdb\u884c\u8054\u5408\u552f\u4e00\u7ea6\u675f,\u5177\u4f53\u770b\u8fd9\u91cc index_together \u53c2\u6570\u4e3a\u5b57\u6bb5\u540d\u7684\u5217\u8868,\u8868\u793a\u8054\u5408\u7d22\u5f15 verbose_name \u7ed9\u8fd9\u4e2a\u8868\u8bbe\u7f6e\u4e00\u4e2a\u522b\u540d. ordering \u53c2\u6570\u4e3a\u4e00\u4e2a\u5b57\u6bb5\u540d\u79f0\u7684\u5217\u8868,\u8868\u793a\u9ed8\u8ba4\u6309\u7167\u54ea\u4e00\u4e2a\u5b57\u6bb5\u6392\u5e8f.\u8bbe\u7f6e\u4e86\u8be5\u5c5e\u6027\u4e4b\u540e,\u67e5\u8be2\u7ed3\u679c\u96c6\u624d\u53ef\u4ee5\u88abreverse(). <p>\u53ef\u89c1ORM\u5bf9\u4e8e\u8868\u7684\u5904\u7406,\u8fd8\u662f\u8fdb\u884c\u4e86\u5c3d\u53ef\u80fd\u8be6\u7ec6\u7684\u533a\u5206,\u8868\u7684\u57fa\u672c\u5c5e\u6027,\u6392\u5e8f\u548c\u7d22\u5f15\u5b57\u6bb5,\u4ee5\u53ca\u5177\u4f53\u5b57\u6bb5\u7684\u8bbe\u7f6e\u90fd\u6709\u5bf9\u5e94\u7684\u65b9\u6cd5.\u4eca\u540e\u5728\u8bbe\u7f6e\u6570\u636e\u5e93\u7684\u65f6\u5019,\u5c3d\u91cf\u4f7f\u7528\u5404\u79cd\u7279\u6027.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/","title":"django\u4e2dORM\u67e5\u8be2\u65b9\u6cd5\u603b\u7ed3","text":"","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#_1","title":"\u67e5\u8be2","text":"<p>\u67e5\u8be2\u662f\u901a\u8fc7ORM\u8bbe\u7f6e\u597d\u7684API,\u4e5f\u5c31\u662f\u5404\u79cd\u65b9\u6cd5\u548c\u5c5e\u6027\u5b9e\u73b0\u7684.\u67e5\u8be2\u5206\u4e3a\u67e5\u8be2\u65b9\u6cd5\u548c\u67e5\u8be2\u6761\u4ef6.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#methods-that-return-new-querysets","title":"\u67e5\u8be2\u65b9\u6cd5 Methods that return new QuerySets","text":"<p>\u67e5\u8be2\u65b9\u6cd5\u8fd4\u56de\u7684\u90fd\u662fQuerySet\u5bf9\u8c61(\u5305\u542b\u4e00\u7ec4\u5bf9\u8c61\u7684\u5217\u8868)\u6216\u8005\u5177\u4f53\u7684\u5bf9\u8c61(\u8868\u793a\u4e00\u884c\u6570\u636e),\u6765\u770b\u4e00\u4e0b\u57fa\u672c\u7684\u67e5\u8be2\u65b9\u6cd5:</p> ORM\u4e00\u822c\u67e5\u8be2 \u65b9\u6cd5 \u89e3\u91ca all() \u67e5\u8be2\u6240\u6709\u7ed3\u679c.objects\u540e\u8fb9\u7684.all()\u53ef\u4ee5\u7701\u7565,\u7701\u7565\u7684\u65f6\u5019\u5c31\u662f\u5bf9\u6240\u6709\u7ed3\u679c\u64cd\u4f5c. get(**kwargs): \u8fd4\u56de\u4e0e\u6240\u7ed9\u7b5b\u9009\u6761\u4ef6\u76f8\u5339\u914d\u7684\u5bf9\u8c61\uff0c\u8fd4\u56de\u7ed3\u679c\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\uff0c\u5982\u679c\u7b26\u5408\u7b5b\u9009\u6761\u4ef6\u7684\u5bf9\u8c61\u8d85\u8fc7\u4e00\u4e2a\u6216\u8005\u6ca1\u67e5\u627e\u5230\u90fd\u4f1a\u629b\u51fa\u9519\u8bef\u3002\u8fd4\u56de\u5177\u4f53\u5bf9\u8c61,\u4e0d\u662fQuerySet filter(**kwargs): \u8fd4\u56de\u4e0e\u6240\u7ed9\u7b5b\u9009\u6761\u4ef6\u76f8\u5339\u914d\u7684\u7ed3\u679c\u96c6(QuerySet\u5bf9\u8c61,\u653e\u6709\u6240\u6709\u67e5\u8be2\u7ed3\u679c\u7684\u5217\u8868),\u5373\u4f7f\u7ed3\u679c\u53ea\u6709\u4e00\u4e2a,\u4e5f\u662f\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c\u96c6,\u9700\u8981\u4ece\u4e2d\u53d6\u51fa\u6bcf\u6761\u6570\u636e\u5904\u7406.\u5982\u679c\u6ca1\u6709\u7ed3\u679c,\u8fd4\u56de\u7a7a\u96c6.\u4ee5\u540e\u591a\u7528filter,\u57fa\u672c\u4e0d\u7528get exclude(**kwargs) \u4e0d\u7b26\u5408\u7b5b\u9009\u6761\u4ef6\u7684\u7ed3\u679c.\u8fd4\u56deQuerySet values(*field) \u8fd4\u56de\u4e00\u4e2aQuerySet,,\u6bcf\u4e00\u4e2a\u5143\u7d20\u662f\u4ee3\u8868\u4e00\u884c\u6570\u636e\u7684\u4e00\u4e2a\u5b57\u5178,\u91cc\u8fb9\u7528\u952e=\u5b57\u6bb5\u540d \u503c= \u6570\u636e \u7684\u65b9\u5f0f\u5b58\u653e\u6240\u6709\u67e5\u8be2\u5230\u7684\u7ed3\u679c.\u53ef\u4ee5\u52a0\u53c2\u6570\u6307\u5b9a\u5177\u4f53\u5b57\u6bb5,\u591a\u4e2a\u5b57\u6bb5\u540d\u7528\u9017\u53f7\u5206\u9694,\u4e0d\u6307\u5b9a\u53c2\u6570\u5219\u53d6\u51fa\u6240\u6709\u5b57\u6bb5.\u53ea\u80fd\u4f5c\u7528\u5728QuerySet\u5bf9\u8c61\u4e0a,\u4e0d\u80fd\u4f5c\u7528\u4e8e\u5355\u72ec\u7684\u5bf9\u8c61. values_list(*field) \u548cvalues\u7c7b\u4f3c,\u53ea\u4e0d\u8fc7QuerySet\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u662f\u4e00\u4e2a\u5143\u7ec4,\u6309\u53c2\u6570\u987a\u5e8f\u653e\u7740\u5b57\u6bb5\u7684\u503c.\u53ea\u80fd\u4f5c\u7528\u5728QuerySet\u5bf9\u8c61\u4e0a,\u4e0d\u80fd\u4f5c\u7528\u4e8e\u5355\u72ec\u7684\u5bf9\u8c61. order_by(*field) \u6309\u7167\u6307\u5b9a\u7684\u5b57\u6bb5\u6392\u5e8f.\u5728\u5b57\u7b26\u4e32\u5f00\u5934\u5199-\u8868\u793a\u5012\u5e8f\u5982\u201d-price\u201d.\u4e0d\u4f7f\u7528order_by\u7684\u8bdd,\u9ed8\u8ba4\u4f1a\u6309\u7167META\u91cc\u8bbe\u7f6e\u7684\u987a\u5e8f\u5bf9\u7ed3\u679c\u6392\u5e8f.\u8fd4\u56deQuerySet reverse() reverse\u53ea\u80fd\u5728\u6307\u5b9a\u987a\u5e8f\u7684QuerySet\u4e0a\u8c03\u7528,\u6bd4\u5982\u7528\u8fc7\u4e86order_by\u65b9\u6cd5\u6216\u8005META\u91cc\u5199\u4e86\u6392\u5e8f\u65b9\u6cd5.\u5f97\u5230\u53cd\u5411\u6392\u5e8f\u7684\u987a\u5e8f.\u8fd4\u56deQuerySet distinct() \u4ece\u8fd4\u56de\u7ed3\u679c\u4e2d\u5254\u9664\u91cd\u590d\u7eaa\u5f55.\u8de8\u8868\u67e5\u8be2\u7684\u65f6\u5019\u7ecf\u5e38\u7528\u6b64\u65b9\u6cd5\u53bb\u91cd. count() \u8fd4\u56de\u6570\u636e\u5e93\u4e2d\u5339\u914d\u67e5\u8be2\u7ed3\u679c\u96c6(QuerySet)\u4e2d\u7684\u5bf9\u8c61\u6570\u91cf.\u662f\u4e00\u4e2aInt\u503c. first() \u8fd4\u56deQuerySet\u4e2d\u7b2c\u4e00\u4e2a\u5bf9\u8c61.\u8fd4\u56de\u7684\u662f\u5177\u4f53\u5bf9\u8c61,\u4e0d\u662fQuerySet last() \u8fd4\u56deQuerySet\u4e2d\u6700\u540e\u4e00\u4e2a\u5bf9\u8c61.\u8fd4\u56de\u7684\u662f\u5177\u4f53\u5bf9\u8c61,\u4e0d\u662fQuerySet exists() \u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c.\u5982\u679cQuerySet\u5305\u542b\u6570\u636e\uff0c\u5c31\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalse.\u7528\u4e8e\u5feb\u901f\u5224\u65ad\u662f\u5426\u67e5\u8be2\u5230\u7ed3\u679c.","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#field-lookups","title":"\u67e5\u8be2\u6761\u4ef6 Field lookups","text":"<p>\u57fa\u672c\u67e5\u8be2\u8bed\u53e5\u7684\u53c2\u6570\u662f**kwargs\u7684\u90fd\u662f\u5404\u79cd\u67e5\u8be2\u6761\u4ef6,\u4e0a\u8fb9\u4f8b\u5b50\u91cc\u662f\u7528\u7684=\u6765\u8868\u793a\u6761\u4ef6,\u8fd9\u662f\u7cbe\u786e\u5339\u914d,\u8fd8\u53ef\u4ee5\u91c7\u7528\u5176\u4ed6\u6761\u4ef6.\u8fd9\u90e8\u5206\u5bf9\u5e94\u7684\u90fd\u662fMySQL\u7684WHERE\u8bed\u53e5\u540e\u8fb9\u7684\u5185\u5bb9.\u5728Django ROM\u91cc\u53eb\u505a Field lookups.\u8fd9\u4e9bField lookups \u5173\u952e\u5b57\u90fd\u7528\u53cc\u4e0b\u5212\u7ebf\u52a0\u5728\u5b57\u6bb5\u540d\u540e\u8fb9.\u6709\u591a\u4e2a\u6761\u4ef6\u7684,\u5c06\u6761\u4ef6\u7528\u9017\u53f7\u9694\u5f00\u653e\u5728\u4e0a\u8fb9\u7684\u57fa\u672c\u67e5\u8be2\u8bed\u53e5\u4e2d,\u6bd4\u5982<code>models.Person.objects.filter(id__gt=2,id__lt=5)</code>.</p> Field lookups \u67e5\u8be2\u6761\u4ef6 \u6761\u4ef6 \u89e3\u91ca = \u8868\u793a\u7cbe\u786e\u5339\u914d,\u53ea\u9009\u62e9\u7b26\u5408\u6761\u4ef6\u7684\u5bf9\u8c61 iexact \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u7684\u7cbe\u786e\u5339\u914d,\u5e38\u7528\u6765\u5339\u914d\u4e00\u6bb5\u5b57\u7b26\u4e32 contains \u5305\u542b\u6709\u67d0\u6bb5\u5b57\u7b26\u4e32\u5185\u5bb9\u7684\u5339\u914d,\u5927\u5c0f\u5199\u654f\u611f icontains \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u7684icontains in \u5728\u4e00\u4e2a\u5217\u8868\u5185.\u548cSQL\u8bed\u53e5\u7684in\u4e00\u6837 gt \u5927\u4e8e gte \u5927\u4e8e\u7b49\u4e8e lt \u5c0f\u4e8e lte \u5c0f\u4e8e\u7b49\u4e8e startswith \u4ee5\u5b57\u7b26\u4e32\u5f00\u59cb,\u5927\u5c0f\u5199\u654f\u611f istartswith \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u7248\u672c\u7684startswith endswith \u4ee5\u5b57\u7b26\u4e32\u7ed3\u5c3e,\u5927\u5c0f\u5199\u654f\u611f iendswith \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u7248\u672c\u7684endswith range \u662f\u5426\u5728\u4e00\u4e2a\u8303\u56f4\u5185,\u5305\u542b\u8303\u56f4\u7684\u4e24\u7aef,=\u53f7\u540e\u8fb9\u662f\u4e00\u4e2a\u4e24\u4e2a\u5143\u7d20\u7684\u5143\u7ec4,\u8868\u793a\u5f00\u59cb\u548c\u7ed3\u675f date \u7528\u5728datetime\u7c7b\u522b\u7684\u5b57\u6bb5\u4e0a,\u5355\u72ec\u53d6\u51fa\u65e5\u671f(datetime\u5bf9\u8c61)\u6765\u6bd4\u8f83,\u8fd8\u53ef\u4ee5\u540e\u7eed\u63a5\u5176\u4ed6Field lookups,\u8be6\u7ec6\u770b\u8fd9\u91cc year \u548cdate\u4e00\u6837,\u53ea\u4e0d\u8fc7\u5355\u72ec\u53d6\u51fa\u6765\u5e74\u4efd\u6bd4\u8f83.\u662f\u4e00\u4e2aINT\u7c7b\u578b month \u548cdate\u4e00\u6837,\u53ea\u4e0d\u8fc7\u5355\u72ec\u53d6\u51fa\u6765\u6708\u4efd\u8fdb\u884c\u6bd4\u8f83,\u662f\u4e00\u4e2aINT\u7c7b\u578b day \u548cdate\u4e00\u6837,\u53ea\u4e0d\u8fc7\u5355\u72ec\u53d6\u51fa\u6765\u65e5\u8fdb\u884c\u6bd4\u8f83,\u662f\u4e00\u4e2aINT\u7c7b\u578b.year,month\u548cday\u7ecf\u5e38\u7528\u5728\u5feb\u901f\u8fc7\u6ee4\u65e5\u671f,\u6bd4\u4f7f\u7528datetime\u5bf9\u8c61\u6bd4\u8f83\u8981\u7b80\u5355\u5f88\u591a. week \u548cdate\u4e00\u6837,\u53ea\u4e0d\u8fc7\u5355\u72ec\u53d6\u51fa\u6765\u7b2c\u51e0\u5468\u8fdb\u884c\u6bd4\u8f83,\u662f\u4e00\u4e2aINT\u7c7b\u578b. week_day \u548cdate\u4e00\u6837,\u53ea\u4e0d\u8fc7\u5355\u72ec\u53d6\u51fa\u6765\u661f\u671f\u51e0\u65e5\u8fdb\u884c\u6bd4\u8f83,\u662f\u4e00\u4e2aINT\u7c7b\u578b.\u661f\u671f\u5929\u662f1,\u661f\u671f\u516d\u662f7.\u6bd4\u8f83\u5e38\u7528. time \u548cdate\u4e00\u6837,\u53ea\u4e0d\u8fc7\u5355\u72ec\u53d6\u51fa\u6765\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83,\u662f\u4e00\u4e2a datetime.time\u5bf9\u8c61. hour \u4ecedatetime\u548ctime fileds\u91cc\u53d6\u5c0f\u65f6,\u8303\u56f4\u662f0-23,\u662f\u4e00\u4e2aINT\u7c7b\u578b. minute \u540chour,\u53d6\u5206\u949f,\u8303\u56f40-59,\u662f\u4e00\u4e2aINT\u7c7b\u578b second \u540chour,\u53d6\u79d2,\u8303\u56f40-59,\u662f\u4e00\u4e2aINT\u7c7b\u578b isnull \u5224\u65ad\u5b57\u6bb5\u662f\u5426\u662fNull regex \u5927\u5c0f\u5199\u654f\u611f\u7684\u6b63\u5219\u5339\u914d\u6a21\u5f0f,\u7b49\u53f7\u540e\u8fb9\u9700\u8981\u662f\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f iregex \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u7684\u6b63\u5219\u8868\u8fbe\u5f0f","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#_2","title":"\u8de8\u8868\u67e5\u8be2","text":"<p>\u8de8\u8868\u67e5\u8be2\u6307\u7684\u662f\u4f9d\u9760\u5173\u7cfb\u8fdb\u884c\u67e5\u8be2\u7684\u65b9\u6cd5.\u5176\u6838\u5fc3\u5c31\u662f\u4f9d\u636e\u5916\u952e\u4ee5\u53ca\u4e00\u5bf9\u4e00,\u591a\u5bf9\u591a\u5b57\u6bb5\u8fdb\u884c\u7684\u67e5\u627e.\u5148\u6765\u770b\u7ecf\u5178\u7684\u5916\u952e\u4e00\u5bf9\u591a\u67e5\u8be2:</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#foreignkey","title":"ForeignKey \u4e00\u5bf9\u591a\u67e5\u8be2","text":"<p>\u5148\u6765\u4e86\u89e3\u4e00\u4e0b\u6b63\u5411\u67e5\u8be2\u548c\u53cd\u5411\u67e5\u8be2 \u6b63\u5411\u67e5\u8be2:\u5916\u952e\u6240\u5728\u7684\u8868\u53bb\u67e5\u5916\u952e\u5173\u8054\u7684\u8868. \u9006\u5411\u67e5\u8be2:\u4e00\u4e2a\u8868\u53bb\u67e5\u53e6\u5916\u4e00\u4e2a\u5916\u952e\u5173\u8054\u5230\u5f53\u524d\u8fd9\u4e2a\u8868\u7684\u8868. \u4f8b\u5b50:</p> Python<pre><code>class Publisher(models.Model):\n    id = models.AutoField(primary_key=True)\n    name = models.CharField(max_length=32, unique=True)\n\n    def __str__(self):\n        return \"\u6211\u662f\u4e00\u4e2a\u51fa\u7248\u793e\u5bf9\u8c61:{}\".format(self.name)\n\n\nclass Book(models.Model):\n    id = models.AutoField(primary_key=True)\n    price = models.DecimalField(max_digits=5, decimal_places=2, default=99.99)\n    # \u5e93\u5b58\u6570\n    kucun = models.IntegerField(default=1000)\n    # \u5356\u51fa\u6570\n    maichu = models.IntegerField(default=0)\n\n    title = models.CharField(max_length=32)\n    # \u5916\u952e\n    # related_name=\"books\" \u53cd\u5411\u67e5\u8be2\u662f\u7528\u6765\u4ee3\u66ff book_set\u7684\n    publisher = models.ForeignKey(\n        to=\"Publisher\",\n        on_delete=models.CASCADE)\n\n    def __str__(self):\n        return self.title\n</code></pre> <p>\u4eceBook\u8868\u53bb\u67e5Publisher\u67e5\u53eb\u505a\u6b63\u5411\u67e5\u8be2,\u4ecePublisher\u8868\u53bb\u67e5Book\u53eb\u505a\u53cd\u5411\u67e5\u8be2.</p> <p>\u6b63\u5411\u67e5\u8be2,\u5728\u5f53\u524d\u8868\u5185\u67e5\u5230\u7ed3\u679c\u4e4b\u540e,\u76f4\u63a5\u8c03\u7528\u5916\u952e\u5bf9\u5e94\u7684\u5c5e\u6027,\u5c31\u53ef\u4ee5\u5f97\u5230\u6307\u5411\u7684\u5916\u952e\u5bf9\u8c61.\u7531\u4e8e\u8fd9\u91cc\u662f\u4e00\u5bf9\u591a\u7684,\u6b63\u5411\u67e5\u8be2\u56de\u53bb\u7684\u7ed3\u679c\u5c31\u662f\u5bf9\u5e94\u7684\u5bf9\u8c61,\u4e0d\u662fQuerySet.\u4f8b\u5b50:</p> Python<pre><code>book_obj = models.Book.objects.all().first()\nret = book_obj.publisher  # \u548c\u6211\u8fd9\u672c\u4e66\u5173\u8054\u7684\u51fa\u7248\u793e\u5bf9\u8c61\nprint(ret, type(ret))\n</code></pre> <p>\u7ed3\u679c\u76f4\u63a5\u5c31\u662f\u4e66\u5bf9\u5e94\u7684\u51fa\u7248\u793e\u5bf9\u8c61.\u5982\u679c\u60f3\u67e5\u5bf9\u5e94\u7684\u51fa\u7248\u793e\u7684\u540d\u79f0,\u7531\u4e8e\u67e5\u5230\u4e86\u5bf9\u8c61,\u53ef\u4ee5\u518d\u53d6\u540d\u79f0,\u4f46\u6709\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u67e5\u5916\u952e\u5bf9\u5e94\u7684\u5177\u4f53\u5b57\u6bb5:</p> Python<pre><code>ret = models.Book.objects.filter(id=1).values_list(\"publisher__name\")\nprint(ret)\n</code></pre> <p>\u53cc\u4e0b\u5212\u7ebf\u5c31\u8868\u793a\u8de8\u4e86\u8868,\u524d\u8fb9\u7684publisher\u662f\u8868\u540d,\u540e\u8fb9\u662f\u8868\u793a\u5b57\u6bb5\u540d.\u7531\u4e8e\u662f\u62ff\u5230\u5177\u4f53\u503c,\u6240\u4ee5\u53ea\u80fd\u5728values\u548cvalues_list\u91cc\u5e94\u7528\u8be5\u65b9\u6cd5.</p> <p>\u53cd\u5411\u67e5\u8be2,\u5982\u679c\u8981\u67e5\u4e00\u4e2a\u51fa\u7248\u793e\u6240\u6709\u7684\u4e66,\u6709\u4e2a\u7279\u6b8a\u7684\u65b9\u6cd5\u662f\u8868\u540d+_set\u6765\u53cd\u7740\u627e\u201d\u4e00\u5bf9\u591a\u201d\u91cc\u7684\u201d\u591a\u201d,\u6765\u770b\u4f8b\u5b50:</p> Python<pre><code>publisher_obj = models.Publisher.objects.first()  # \u627e\u5230\u7b2c\u4e00\u4e2a\u51fa\u7248\u793e\u5bf9\u8c61\nbooks = publisher_obj.book_set.all()  # \u627e\u5230\u7b2c\u4e00\u4e2a\u51fa\u7248\u793e\u51fa\u7248\u7684\u6240\u6709\u4e66\ntitles = books.values_list(\"title\")\n</code></pre> <p>\u8fd9\u91cc\u7684book\u662f\u8868\u540d,\u540e\u8fb9\u52a0\u4e0a_set\u5c31\u8868\u793a\u6765\u53cd\u7740\u627e,\u7ed3\u679c\u662f\u4e00\u4e2aQuerySet,\u53ef\u4ee5\u628abook\u8868\u91cc\u7531\u7b2c\u4e00\u4e2a\u51fa\u7248\u793e\u51fa\u7248\u7684\u6240\u6709\u4e66\u90fd\u627e\u5230. \u5982\u679c\u5728book\u8868\u7684\u5916\u952e\u91cc\u7ed9\u5916\u952e\u6307\u5b9a\u4e86related_name,\u90a3\u4e48\u6b64\u65f6\u5c31\u4e0d\u8981\u7528\u8868\u540d,\u76f4\u63a5\u7528related_name\u7684\u540d\u5b57\u5c31\u53ef\u4ee5\u4e86.\u6bd4\u5982\u6307\u5b9a\u4e86related_name\u4e3aall_books.\u4e0a\u8fb9\u4f8b\u5b50\u7684\u7b2c\u4e8c\u53e5\u8bdd\u5c31\u53ef\u4ee5\u6539\u5199\u6210:</p> Python<pre><code>books = publisher_obj.allbook.all()\n</code></pre> <p>\u6ce8\u610f,\u5982\u679c\u8d77\u4e86\u5916\u952e\u522b\u540d,\u518d\u4f7f\u7528\u539f\u8868\u540d_set\u4f1a\u62a5\u9519.\u5b9e\u9645\u4e0a\u522b\u540d\u4ee3\u66ff\u4e86\u539f\u6765\u5bf9\u8c61\u4e0a\u7684\u8868\u540d_set\u65b9\u6cd5. \u540c\u6837,\u4e5f\u53ef\u4ee5\u76f4\u63a5\u67e5\u5b57\u6bb5,\u4e5f\u662f\u7528\u53cc\u4e0b\u5212\u7ebf\u6765\u8fde\u63a5\u8868\u540d\u548c\u5b57\u6bb5.</p> Python<pre><code>ret = models.Publisher.objects.filter(id=1).values_list(\"book__title\")\nprint(ret)\n</code></pre> <p>book\u662f\u8868\u540d,title\u662f\u5b57\u6bb5\u540d.\u6ce8\u610f,\u8fd9\u91cc\u5982\u679c\u5916\u952e\u6307\u5b9a\u4e86related_name\u7684\u503c\u800c\u6ca1\u6709\u6307\u5b9arelated_query_name\u7684\u503c,\u5219\u9700\u8981\u5c06book\u6362\u6210\u5176related_name\u7684\u503c,\u5982\u679c\u540c\u65f6\u6307\u5b9a\u4e86related_name\u548crelated_query_name\u7684\u503c,\u5219\u9700\u8981\u6362\u6210related_query_name\u7684\u503c,\u5982\u679c\u53ea\u6307\u5b9a\u4e86related_query_name\u7684\u503c,\u4e5f\u9700\u8981\u6362\u6210\u5176\u503c. \u7ed3\u679c\u5f97\u5230\u7684\u662f\u5143\u7d20\u4e3a\u5143\u7ec4\u7684\u5217\u8868,\u6bcf\u4e2a\u5143\u7ec4\u5185\u5c31\u662f\u67e5\u8be2\u5b57\u6bb5\u7684\u7ed3\u679c.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#manytomanyfield","title":"ManyToManyField \u591a\u5bf9\u591a\u67e5\u8be2","text":"<p>\u5728ORM\u4e2d,\u591a\u5bf9\u591a\u4ee5\u53ca\u5916\u952e\u7684\u53cd\u5411\u67e5\u8be2(\u7ed3\u679c\u96c6\u90fd\u662f\u53d6\u5230\u591a\u4e2a\u5bf9\u8c61\u7684\u65f6\u5019),\u5185\u90e8\u90fd\u662f\u901a\u8fc7\u4e00\u4e2a\u53eb\u505a RelatedManager\u7c7b\u7684\u5b9e\u4f8b,\u5373\u5173\u8054\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u6765\u64cd\u4f5c\u7684. \u6bd4\u5982\u5728\u5916\u952e\u7684\u4f8b\u5b50\u4e2d,\u5982\u679c\u6253\u5370<code>publisher_obj.allbook</code>,\u53ef\u4ee5\u770b\u5230\u7ed3\u679c\u662f\u4e00\u4e2a RelatedManager\u7c7b.\u9488\u5bf9\u8fd9\u4e2a\u7c7b,\u50cf.all()\u5c31\u662f\u53d6\u5168\u90e8\u7ed3\u679c,\u9664\u6b64\u4e4b\u5916,\u9488\u5bf9\u8fd9\u4e2a\u7c7b\u8fd8\u6709\u4e00\u4e9b\u7279\u6b8a\u7684\u64cd\u4f5c:</p> <p><code>create()</code> \u7528\u4e8e\u4ece\u521b\u5efa\u4e00\u5bf9\u591a\u5173\u7cfb</p> Python<pre><code>models.Author.objects.first().book_set.create(title=\"\u756a\u8304\u7269\u8bed\", publish_date=datetime.date.today())\n</code></pre> <p>\u901a\u8fc7Author.objects.first()\u53d6\u5230\u4e00\u4e2a\u5177\u4f53\u7684\u4f5c\u8005\u5bf9\u8c61,\u7136\u540e.book_set\u53d6\u5230\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u5bf9\u8c61,\u7136\u540e\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u8fdb\u884c.create\u65b9\u6cd5,\u7ed3\u679c\u662f\u5148\u5728book\u8868\u5185\u5efa\u7acb\u4e00\u672c\u4e66,\u7136\u540e\u5728\u591a\u5bf9\u591a\u7684\u8868\u5185\u5efa\u7acb\u8fd9\u672c\u4e66\u4e0e\u8fd9\u4e2a\u4f5c\u8005\u7684\u5173\u7cfb.</p> <p><code>add()</code> \u64cd\u4f5c\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u5bf9\u8c61,\u5c06\u5bf9\u8c61\u6dfb\u52a0\u5230\u5bf9\u5e94\u5173\u7cfb\u91cc</p> Python<pre><code>new_book = models.book.objects.create(name= '\u65b0\u7684\u4e66').save()  # \u5728book\u8868\u5185\u5efa\u7acb\u4e00\u672c\u65b0\u4e66\nmodels.Author.objects.first().book_set.add(new_book)  # \u5728\u591a\u5bf9\u591a\u8868\u5185\u6dfb\u52a0\u4e00\u884c,\u8bb0\u5f55\u7b2c\u4e00\u4e2a\u4f5c\u8005\u548c\u8fd9\u672c\u65b0\u4e66\u7684\u5bf9\u5e94\u5173\u7cfb.\n</code></pre> <p>add\u7684\u53c2\u6570\u53ef\u4ee5\u662f\u5bf9\u8c61,\u53ef\u4ee5\u662f\u89e3\u5f00\u7684QeurySet\u5bf9\u8c61(ret),\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u6570\u5b57\u8868\u793aid\u6216\u8005\u62c6\u89e3\u5f00\u7684\u5217\u8868id,\u5982add([3,12,19]).</p> <p><code>set()</code> \u4e00\u6b21\u6027\u5728\u591a\u5bf9\u591a\u8868\u91cc\u8bbe\u7f6e\u4e00\u7ec4\u5bf9\u5e94\u5173\u7cfb \u5728\u4e4b\u524d\u7684\u9879\u76ee\u4e2d\u5df2\u7ecf\u4f7f\u7528\u8fc7set\u4e86,\u5176\u7ed3\u679c\u5c31\u662f\u5c06\u5bf9\u5e94\u7684\u4e00\u7ec4id\u6216\u8005\u5bf9\u8c61\u4ee3\u8868\u7684\u5185\u5bb9,\u5728\u591a\u5bf9\u591a\u8868\u91cc\u53bb\u5f53\u524d\u5bf9\u8c61\u8054\u7cfb\u8d77\u6765/</p> Python<pre><code>book_obj = models.Book.objects.first()\nbook_obj.authors.set([2, 3])\n</code></pre> <p>\u8fd9\u4e2a\u4f8b\u5b50\u5c31\u662f\u5c06\u7b2c\u4e00\u672c\u4e66\u4e0eid\u4e3a2,3\u7684\u4f5c\u8005\u5728\u591a\u5bf9\u591a\u8868\u91cc\u8054\u7cfb\u8d77\u6765.</p> <p><code>remove()</code> \u79fb\u9664\u53c2\u6570\u6307\u5b9a\u7684\u5bf9\u8c61\u4e0e\u5f53\u524d\u5bf9\u8c61\u7684\u5bf9\u5e94\u5173\u7cfb</p> Python<pre><code>book_obj = models.Book.objects.first()\nbook_obj.authors.remove(3)\n</code></pre> <p>remove\u63a5\u53d7\u7684\u53c2\u6570\u548cadd\u4e00\u6837.</p> <p><code>clear()</code> \u8868\u793a\u6e05\u9664\u5f53\u524d\u5bf9\u8c61\u5728\u591a\u5bf9\u591a\u8868\u91cc\u5bf9\u5e94\u67d0\u4e2a\u8868\u7684\u5168\u90e8\u5bf9\u5e94\u5173\u7cfb.</p> Python<pre><code>book_obj = models.Book.objects.first()\nbook_obj.authors.clear()\n</code></pre> <p>\u8fd9\u4e2a\u64cd\u4f5c\u7684\u610f\u601d\u8868\u793a\u79fb\u9664\u7b2c\u4e00\u672c\u4e66\u548c\u6240\u6709\u4f5c\u8005\u7684\u5173\u8054\u5173\u7cfb.\u4e5f\u5c31\u662f\u5728\u591a\u5bf9\u591a\u8868\u91cc\u5220\u9664\u6240\u6709book_id = 1\u7684\u6570\u636e\u884c.</p> <p>\u7531\u4e8e\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u5728\u5916\u952e\u7684\u53cd\u5411\u67e5\u8be2\u7684\u8fc7\u7a0b\u4e2d\u4e5f\u5b58\u5728,\u56e0\u6b64\u4e5f\u662f\u53ef\u4ee5\u7528\u4e0a\u8fb9\u4e94\u79cd\u65b9\u6cd5\u6765\u64cd\u4f5c\u7684,\u53ea\u4e0d\u8fc7\u5728\u5916\u952e\u53cd\u5411\u67e5\u8be2\u4e2d,\u4e0d\u5b58\u5728\u591a\u5bf9\u591a\u7684\u8868\u683c.\u6240\u4ee5clear()\u548cremove()\u64cd\u4f5c\u5b9e\u9645\u4e0a\u662f\u5c06\u5916\u952e\u90a3\u4e00\u5217\u4fee\u6539\u6210Null,\u56e0\u6b64\u5fc5\u987b\u8981\u6c42\u5916\u952e\u8bbe\u7f6e\u6210Null=True,\u5426\u5219\u4f1a\u62a5\u9519.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#_3","title":"\u4e00\u5bf9\u4e00\u67e5\u8be2","text":"<p>\u4e00\u5bf9\u4e00\u7684\u5173\u7cfb\u5b57\u6bb5\u662fmodels.OneToOneField(to=).\u5b9e\u9645\u4e0a\u6b63\u67e5\u53cd\u67e5\u90fd\u662f\u53ea\u80fd\u51fa\u6765\u4e00\u6761\u5b57\u6bb5.\u4e0d\u518d\u8d58\u8ff0.\u5176\u5b9e\u7528id\u4e5f\u53ef\u4ee5\u53d6\u5f97\u76f8\u540c\u7684\u6570\u636e. \u8fd9\u91cc\u6709\u4e00\u7bc7\u6587\u7ae0\u8bb2\u4e86Django\u4e2d\u5173\u7cfb\u7684\u603b\u7ed3.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#_4","title":"\u4f7f\u7528\u805a\u5408\u51fd\u6570\u4e0e\u5206\u7ec4\u67e5\u8be2","text":"<p>\u5728ORM\u4e2d,\u4e00\u6837\u53ef\u4ee5\u4f7f\u7528\u4fbf\u5229\u7684\u805a\u5408\u51fd\u6570\u4ee5\u53ca\u975e\u5e38\u5e38\u89c1\u7684\u5206\u7ec4\u67e5\u8be2.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#_5","title":"\u805a\u5408\u51fd\u6570","text":"<p>\u805a\u5408\u51fd\u6570\u7684\u65b9\u6cd5\u662f<code>aggregate()</code>,\u5728\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u4e4b\u540e,\u67e5\u8be2\u8bed\u53e5\u5c31\u7ed3\u675f\u4e86,\u8fd9\u4e2a\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5b57\u5178,\u91cc\u8fb9\u5305\u542b\u7740\u4f7f\u7528\u805a\u5408\u51fd\u6570\u7684\u7ed3\u679c. \u5728\u4f7f\u7528\u805a\u5408\u51fd\u6570\u4e4b\u524d,\u5fc5\u987b\u5bfc\u5165\u5bf9\u5e94\u7684\u805a\u5408\u51fd\u6570\u6a21\u5757:</p> Text Only<pre><code>from django.db.models import Avg, Sum, Max, Min, Count\n</code></pre> <p>\u8fd9\u4e9b\u51fd\u6570\u7684\u53c2\u6570\u90fd\u662f\u5b57\u6bb5\u540d\u79f0.\u5bf9\u4e8e\u751f\u6210\u7684\u7ed3\u679c\u5b57\u5178,\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u540d\u79f0,\u5219Django\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u4e00\u4e2a\u540d\u79f0.\u5982\u679c\u6307\u5b9a\u4e86\u540d\u79f0,\u5c31\u4f1a\u4f7f\u7528\u6307\u5b9a\u7684\u540d\u79f0,\u7136\u540e\u518d\u4ece\u5b57\u5178\u91cc\u53d6\u6570\u5373\u53ef:</p> Python<pre><code>models.Book.objects.all().aggregate(Avg(\"price\"))\n# \u7ed3\u679c\u662f{'price__avg': 13.233333},\u5176\u4e2d\u7684\"price__avg\"\u7531Django\u81ea\u52a8\u751f\u6210\n\nmodels.Book.objects.aggregate(average_price=Avg('price'))\n# \u7ed3\u679c\u662f{'average_price': 13.233333}, \u5176\u4e2d\u7684\"average_price\"\u662f\u81ea\u5b9a\u4e49\u7684\u540d\u79f0.\n\nmodels.Book.objects.all().aggregate(Avg(\"price\"), Max(\"price\"), Min(\"price\"))\n# \u540c\u65f6\u4f7f\u7528\u591a\u4e2a\u805a\u5408\u51fd\u6570,\u53ef\u4ee5\u7528\u9017\u53f7\u5206\u5272,\u7ed3\u679c\u5b57\u5178\u4e2d\u4f1a\u5305\u62ec\u5168\u90e8\u7ed3\u679c.\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#_6","title":"\u5206\u7ec4","text":"<p>\u5206\u7ec4\u7684\u65b9\u6cd5\u662f<code>.annotate()</code>.\u8fd9\u91cc\u53ef\u80fd\u6709\u70b9\u62bd\u8c61,\u5176\u5b9eannotate\u7684\u4f5c\u7528\u5c31\u662f\u5148\u6309\u7167\u4e4b\u524d\u7684\u67e5\u627e\u65b9\u5f0f\u8fd4\u56de\u6570\u636e,\u518d\u5c06\u8fd4\u56de\u7684\u591a\u884c\u6570\u636e\u6309\u7167\u67d0\u4e2a\u6307\u5b9a\u7684\u5b57\u6bb5\u8fdb\u884c\u5206\u7ec4\u64cd\u4f5c,\u7136\u540e\u5c06\u5206\u7ec4\u8fc7\u7684\u6bcf\u4e00\u884c\u7ed3\u679c\u90fd\u5305\u5728\u4e00\u4e2aQuerySet\u4e2d\u8fd4\u56de.\u5176\u4e2d.annotate\u4e4b\u524d\u7684\u90e8\u5206\u5982\u679c\u662f\u901a\u8fc7\u5916\u952e\u67e5\u8be2,\u5176\u672c\u8eab\u5c31\u76f8\u5f53\u4e8e\u8fde\u8868\u64cd\u4f5c,\u518d\u5206\u7ec4\u4e4b\u540e\u5c31\u662f\u5206\u7ec4\u540e\u7684QuerySet\u4e86. \u6bd4\u5982\u5728\u81ea\u5df1\u7f16\u5199\u7684\u884c\u653f\u7269\u54c1\u7ba1\u7406\u7cfb\u7edf\u5185,\u9700\u8981\u5217\u51fa\u6bcf\u4e00\u79cd\u7269\u54c1\u7684\u7ed3\u4f59,\u5373\u901a\u8fc7\u7269\u54c1\u5217\u8868\u67e5\u5230\u6bcf\u4e00\u79cd\u7269\u54c1\u5bf9\u5e94\u7684\u6240\u6709\u51fa\u5165\u5e93\u8bb0\u5f55,\u518d\u5c06\u51fa\u5e93\u548c\u5165\u5e93\u8bb0\u5f55\u6c42\u548c\u5206\u522b\u6c42\u548c\u5e76\u76f8\u51cf. \u7528SQL\u8bed\u53e5\u662f\u5148\u901a\u8fc7move\u7684item_id\u8fde\u8868,\u7136\u540e\u6309\u7167item_id\u5206\u7ec4\u5e76\u5bf9in_num\u548cout_num\u5b57\u6bb5\u8fdb\u884c\u6c42\u548c\u518d\u76f8\u51cf. \u5728ORM\u91cc,\u901a\u8fc7\u7269\u54c1\u5217\u8868\u7684\u8fd9\u4e00\u6bb5\u5199\u5728\u524d\u8fb9,\u5230\u5916\u952e\u6240\u5728\u7684\u8868\u53bb\u67e5\u8be2,\u5219\u5c06\u5916\u952e\u6240\u5728\u7684\u8868\u53ca\u5b57\u6bb5\u540d\u79f0\u5199\u5728annotate\u5185\u90e8\u7684\u805a\u5408\u51fd\u6570\u5185,\u5373\u50cf\u8fd9\u6837:</p> Python<pre><code>ret = models.Items.objects.all().annotate(num_balance=Sum(\"moves__in_num\") - Sum(\"moves__out_num\"))\n</code></pre> <p>\u524d\u8fb9\u7684<code>ret = models.Items.objects.all()</code>\u8868\u793a\u6309\u7167\u6240\u6709\u7684\u7269\u54c1\u5206\u7ec4.\u7531\u4e8e\u662f\u6b63\u5411\u67e5\u8be2\u5373\u901a\u8fc7\u7269\u54c1\u67e5\u4f59\u989d,\u6240\u4ee5<code>moves__in_num</code>\u548c<code>moves__out_num</code>\u5176\u4e2d\u91c7\u53d6\u8868\u540d__\u5b57\u6bb5\u540d\u7684\u5199\u6cd5.<code>.annotate</code>\u5c31\u8868\u793a\u6309\u7167\u4e4b\u524d\u7684\u5bf9\u8c61\u5206\u7ec4\u5e76\u4e14\u6309\u7167\u53c2\u6570\u4e2d\u7684\u67d0\u4e2a\u5b57\u6bb5\u8fdb\u884c\u5904\u7406,\u8fd9\u91cc\u662f\u5206\u7ec4\u4ee5\u540e\u5bf9\u5206\u7ec4\u7684in_num\u6c42\u548c\u518d\u51cf\u53bbout_num\u7684\u6c42\u548c,\u5c31\u5f97\u5230\u4e86\u6309\u7167\u7269\u54c1\u5206\u7ec4\u7684\u4f59\u989d.\u8fd9\u91cc\u662f\u53cd\u5411\u64cd\u4f5c,\u76f4\u63a5\u4f7f\u7528\u5c0f\u5199\u7684\u7c7b\u540d\u5373\u53ef,\u4e0d\u7528\u52a0__set,\u5982\u679c\u662f\u6b63\u5411,\u7528\u5916\u952e\u4e5f\u53ef\u4ee5.(\u5f53\u7136\u4e00\u822c\u5206\u7ec4\u4e0d\u4f1a\u7528\u6b63\u5411\u67e5\u8be2) ret\u662f\u4e00\u4e2aQuerySet,\u5176\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61,\u8868\u793a\u4e00\u884c\u7ecf\u8fc7\u5206\u7ec4\u8fc7\u540e\u7684\u6570\u636e,\u8fd9\u4e00\u884c\u91cc\u7684\u5c5e\u6027\u5305\u62ecItems\u8868\u91cc\u7684\u5168\u90e8\u5c5e\u6027,\u4ee5\u53ca\u81ea\u5b9a\u4e49\u7684num_balance\u5c5e\u6027.</p> <p>\u8fd9\u91cc\u76f4\u63a5\u5c31\u4f7f\u7528\u4e86\u8de8\u8868\u67e5\u8be2,\u5982\u679c\u60f3\u5728\u540c\u4e00\u4e2a\u8868\u5185,\u6309\u7167\u67d0\u4e00\u4e2a\u5b57\u6bb5\u8fdb\u884c\u5206\u7ec4,\u50cf\u4e0a\u8fb9\u4f8b\u5b50\u91cc\u7684<code>models.Items.objects.all()</code>\u7684\u90e8\u5206,\u5c31\u9700\u8981\u6539\u6210\u5f53\u524d\u8868\u91cc\u5b57\u6bb5\u7684\u7528values\u7684\u67e5\u8be2\u7ed3\u679c,\u4e5f\u5c31\u662f\u544a\u8bc9ORM\u6309\u7167\u54ea\u4e2a\u5b57\u6bb5\u6765\u5206\u7ec4. \u5728\u81ea\u5df1\u7f16\u5199\u7684\u8fdb\u9500\u5b58\u7cfb\u7edf\u4e2d,\u67e5\u8be2moves\u8868\u6309\u7167item_id\u5206\u7c7b\u7684in_sum\u5b57\u6bb5\u7684\u548c:</p> Python<pre><code>ret = models.Moves.objects.values(\"item_id\").annotate(insum = Sum(\"in_num\"))\n</code></pre> <p>\u8fd9\u4e2a\u5c31\u662f\u5148\u7528\u4e86item_id\u8fc7\u6ee4\u51fa\u5185\u5bb9,\u7ed3\u679c\u7684QuerySet\u91cc\u53ea\u5305\u62ecitem_id\u5b57\u6bb5\u7684\u503c,\u7136\u540e\u5728\u5bf9\u5176\u8fdb\u884c\u5206\u7ec4\u5e76\u5bf9\u5bf9\u5e94\u7684in_num\u5b57\u6bb5\u6c42\u548c,\u6c42\u548c\u7684\u7ed3\u679c\u653e\u5230\u6bcf\u4e00\u4e2a\u7ed3\u679c\u91cc\u7684insum\u5b57\u6bb5\u540d\u4e2d. ret\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a\u5206\u7ec4\u5e76\u4e14\u8ba1\u7b97\u8fc7\u7684\u8868\u7684\u6bcf\u4e00\u884c\u5185\u5bb9\u7684QuerySet,\u518d\u4ece\u91cc\u8fb9\u53d6\u51fa\u6bcf\u4e00\u884c\u8fdb\u884c\u64cd\u4f5c\u548c\u5c55\u793a\u5373\u53ef.</p> <p>\u5206\u7ec4\u7684\u64cd\u4f5c\u4e0d\u662f\u592a\u76f4\u89c2,\u7528\u8fd9\u91cc\u5206\u7ec4\u7684\u4f8b\u5b50\u4e3e\u4e00\u4e2a\u4f8b\u5b50: \u5728\u4e00\u5f20\u8868\u5185\u8fdb\u884c\u5206\u7ec4,\u7528SQL\u8bed\u53e5\u6bd4\u8f83\u76f4\u89c2:</p> Python<pre><code>select dept,AVG(salary) from employee group by dept;\n</code></pre> <p>\u5982\u679c\u6362\u6210ORM,\u9996\u5148\u660e\u786e\u662f\u8981\u67e5\u90a3\u5f20\u8868.\u8fd9\u4e2a\u67e5\u8be2\u53ea\u5728\u4e00\u4e2a\u8868\u5185\u67e5\u8be2,\u67e5\u8be2\u7684\u7ed3\u679c\u5305\u62ecdept\u548cAVG(salary),group by \u540e\u8fb9\u662fdept. \u8fd9\u8bf4\u660e\u6309\u7167dept\u5148\u5206\u7ec4,\u7136\u540e\u5bf9\u4e8e\u805a\u5408\u540e\u7684\u7ed3\u679c,\u7528avg\u5bf9salary\u6c42\u5e73\u5747\u6570,\u6700\u540e\u8fd4\u56de\u5206\u7ec4\u540e\u7684\u90e8\u95e8\u548c\u7ed3\u679c.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#sqlorm","title":"SQL\u8bed\u53e5\u4e0eORM\u7684\u5bf9\u5e94\u5173\u7cfb:","text":"<p>\u7b2c\u4e00\u6b65:\u57fa\u7840\u5bf9\u5e94\u5173\u7cfb: models.Employee \u8868\u793a\u4ece\u90a3\u5f20\u8868\u8fdb\u884c\u67e5\u8be2,\u5373from. objects\u662f\u4e2d\u95f4\u4ef6\u7684\u540d\u79f0,\u4e0d\u7528\u7ba1 .all\u8868\u793aSELECT * \u5982\u679c\u662f\u8981\u53d6\u5177\u4f53\u7684\u5b57\u6bb5,\u5c31\u7528values(\u201c\u5b57\u6bb5\u540d\u201d),\u6bd4\u5982values(\u201cdept\u201d)\u5c31\u76f8\u5f53\u4e8e SELECT dept. \u53ef\u89c1,\u5982\u679c\u60f3\u8981\u8fbe\u5230select dept,AVG(salary) from employee\u7684\u6548\u679c,\u6211\u7684ORM\u8bed\u53e5\u5bf9\u5e94\u7684\u90e8\u5206\u662f:</p> Python<pre><code>models.Employee.objects.values(\"dept,\"\u5e73\u5747\u6570\u7684\u522b\u540d\")\n</code></pre> <p>\u73b0\u5728\u5e73\u5747\u6570\u7684\u522b\u540d\u8fd8\u4e0d\u77e5\u9053,\u7ee7\u7eed\u5f80\u4e0b\u770b\u5206\u7ec4:</p> <p>\u7b2c\u4e8c\u6b65:\u5206\u7ec4\u4e0e\u805a\u5408\u5904\u7406</p> Text Only<pre><code>models.Employee.objects.values(\"dept,\"\u5e73\u5747\u6570\u7684\u522b\u540d\").annotate()\n</code></pre> <p>\u8fd9\u91cc\u7684annotate()\u5982\u679c\u4e0d\u4f20\u53c2\u6570,\u8868\u793a\u6309\u7167.all()\u5168\u90e8\u5206\u7ec4,\u4e00\u822c\u4e0d\u8fd9\u6837\u4f7f\u7528..annotate\u4e4b\u524d\u7684value\u8868\u793aGROUP BY\u4e4b\u540e\u7684\u5185\u5bb9,\u6240\u4ee5<code>values(\"dept\").annotate(my_avg=Avg(\"salary\"))</code>\u5c31\u8868\u793a\u6309\u7167dept\u8fdb\u884c\u5206\u7ec4,\u7136\u540e\u5bf9salary\u8fdb\u884c\u6c42\u548c,\u5f97\u5230\u5206\u7ec4\u7684\u7ed3\u679c.</p> <p>\u7b2c\u4e09\u6b65:\u53d6\u5206\u7ec4\u540e\u7ed3\u679c \u7531\u4e8e\u5206\u7ec4\u7ed3\u679c\u7b97\u51fa\u6765\u4e86,\u662f\u4e00\u4e2aQuerySet,\u6309\u7167\u6211\u4eec\u7684\u9700\u6c42,\u6700\u524d\u8fb9\u662fSELECT dept, Avg(salary),\u73b0\u5728Avg(salary)\u7684\u522b\u540d\u6709\u4e86,\u6240\u4ee5\u8981\u5728\u6700\u540e\u518d\u52a0\u4e0a.values(\u201cdept\u201d,\u201dmy_avg\u201d). \u6700\u7ec8\u7ed3\u679c\u548c\u539f\u6765SQL\u8bed\u53e5\u7528\u989c\u8272\u6807\u8bc6\u7684\u5bf9\u5e94\u5173\u7cfb\u662f: <code>models.Employee.objects.values(\"dept\").annotate(my_avg=Avg(\"salary\").values(dept, \"my_avg\")</code> <code>select dept,AVG(salary) from employee group by dept;</code> ORM\u8bed\u53e5\u6a59\u8272\u7684\u90e8\u5206\u5176\u5b9e\u4e5f\u6db5\u76d6\u4e86SQL\u8bed\u53e5\u4e2d\u7684Avg(salary),\u8fd9\u662f\u56e0\u4e3aORM\u91cc\u4f7f\u7528\u4e86\u522b\u540d.\u5b9e\u9645\u5bf9\u5e94\u5173\u7cfb\u8fd8\u662f\u53ef\u4ee5\u5f88\u6e05\u695a\u7684\u770b\u51fa\u6765.</p> <p>\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u662f\u8fde\u8868\u67e5\u8be2,dept_id\u5916\u952e\u5173\u8054\u5230dept\u8868. \u5982\u679c\u60f3\u5f97\u5230\u548c\u4e0a\u8fb9\u4f8b\u5b50\u4e00\u6837\u7684\u7ed3\u679c,\u5728SQL\u4e2d\u5c31\u662f\u5148\u8fde\u8868\u518d\u67e5\u8be2,\u5230\u4e86ORM\u91cc,\u5176\u5b9e\u5c31\u662f\u901a\u8fc7\u5916\u952e\u8fdb\u884c\u7684\u53cc\u4e0b\u5212\u7ebf\u67e5\u8be2\u53bb\u8de8\u8868: <code>select dept.name,AVG(salary) from employee inner join dept on (employee.dept_id=dept.id) group by dept_id</code>;</p> Python<pre><code>models.Dept.objects.annotate(avg=Avg(\"employee__salary\")).values(\"name\", \"avg\")\n</code></pre> <p>ORM\u91cc\u4eceDept\u8868\u53d1\u8d77\u67e5\u8be2\u5e76\u4e14\u5206\u7ec4,\u7531\u4e8edept_id\u548cdept.name\u662f\u4e00\u4e00\u5bf9\u5e94\u7684,\u6240\u4ee5\u4eceDept\u53d1\u8d77\u67e5\u8be2\u540e\u76f4\u63a5\u63a5.annotate\u5c31\u53ef\u4ee5.\u540e\u8fb9\u7684\u5bf9\u5e94\u5173\u7cfb\u4e2d\u4ecedept\u8de8\u8868\u5230employee\u5c31\u76f8\u5f53\u4e8e\u8fde\u8868,\u7136\u540e\u5bf9salary\u8fdb\u884cAvg\u64cd\u4f5c,\u5176\u4ed6\u7684\u5bf9\u5e94\u5173\u7cfb\u548c\u4e0a\u8fb9\u7c7b\u4f3c.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#fq","title":"F\u67e5\u8be2\u548cQ\u67e5\u8be2","text":"<p>F\u548cQ\u5176\u5b9e\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u4ee5\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u5f0f\u4e66\u5199SQL\u64cd\u4f5c\u7684\u65f6\u5019,\u5bf9\u4e8e\u8bed\u53e5\u4e2d\u7684and or \u7b49\u903b\u8f91\u63a7\u5236\u7b26\u4e0d\u65b9\u4fbf\u4e66\u5199\u7684\u95ee\u9898.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#f","title":"F\u67e5\u8be2","text":"<p>\u5728\u4e4b\u524d\u7684\u67e5\u8be2\u6761\u4ef6\u4e2d,\u4f7f\u7528\u7684\u90fd\u662f\u8bf8\u5982<code>.filter(id__gt=3)</code>\u8fd9\u79cd\u5c06\u5b57\u6bb5\u503c\u4e0e\u5e38\u91cf\u8fdb\u884c\u6bd4\u8f83\u7684\u6761\u4ef6,\u5982\u679c\u9700\u8981\u5bf9\u4e24\u4e2a\u5b57\u6bb5\u505a\u6bd4\u8f83,\u663e\u7136\u5728Python\u4e2d\u4e0d\u80fd\u5199\u6210<code>.filter(id__gt=item_id)</code>,\u56e0\u4e3aitem_id\u5e76\u6ca1\u6709\u5728python\u7a0b\u5e8f\u4e2d\u5b9a\u4e49.\u8fd9\u4e2a\u65f6\u5019\u5c31\u8981\u4f7f\u7528F\u67e5\u8be2\u6765\u66ff\u4ee3\u5bf9\u5e94\u7684\u5b57\u6bb5,,\u53ea\u8981\u7ed9F\u7684\u53c2\u6570\u4f20\u5165\u5b57\u6bb5\u540d\u79f0\u5373\u53ef. \u6bd4\u5982\u5728\u81ea\u884c\u7f16\u5199\u7684\u884c\u653f\u7269\u54c1\u67e5\u8be2\u7cfb\u7edf\u4e2d,\u5982\u679c\u8981\u67e5\u8be2\u6240\u6709\u5165\u5e93 \u5927\u4e8e \u51fa\u5e93\u7684\u5355\u636e,\u5c31\u5199\u6210:</p> Python<pre><code>ret = ret_temp = models.Moves.objects.filter(in_num__gte=F(\"out_num\"))\n</code></pre> <p>\u5728\u4e00\u5f20\u8868\u7528\u81ea\u8eab\u6570\u636e\u505a\u63a7\u5236\u7684\u65f6\u5019,\u5c31\u8981\u7528\u5230F\u67e5\u8be2,\u7ecf\u5e38\u5728\u5404\u79cd\u5185\u5bb9\u7ba1\u7406\u7cfb\u7edf\u4e2d\u4f7f\u7528,\u6bd4\u5982\u5217\u51fa\u70b9\u8d5e\u6570\u9ad8\u4e8e\u8e29\u6570\u7684\u6761\u76ee\u7b49\u7b49. \u9664\u4e86\u8fdb\u884c\u6bd4\u8f83\u4e4b\u5916,F\u67e5\u8be2\u5728\u6839\u636e\u81ea\u5df1\u7684\u5b57\u6bb5\u503c\u66f4\u65b0\u503c\u7684\u65f6\u5019\u6bd4\u8f83\u5e38\u7528,\u6bd4\u5982\u8981\u5728\u51fa\u5165\u5e93\u8868\u4e0a\u7684\u51fa\u5e93\u6570\u5b57\u589e\u52a010:</p> Python<pre><code>models.Moves.objects.update(in_num = F(\"in_num\") + 10)\n</code></pre> <p>\u8fd9\u91cc\u8981\u6ce8\u610f\u7684\u5c31\u662fupdate\u65b9\u6cd5,\u4ec5\u53ef\u4ee5\u4f7f\u7528\u5728QuerySet\u4e0a,\u5355\u4e2a\u5bf9\u8c61(\u884c\u6570\u636e)\u6ca1\u6709\u8be5\u65b9\u6cd5.\u8be5\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u53d7\u5f71\u54cd\u7684\u884c\u6570.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#q","title":"Q\u67e5\u8be2","text":"<p>Q\u67e5\u8be2\u662f\u4e3a\u4e86\u89e3\u51b3\u6761\u4ef6\u67e5\u8be2\u7684\u65f6\u5019\u65b9\u4fbf\u4f7f\u7528or \u7b49\u903b\u8f91\u7b26\u7684\u95ee\u9898,\u5c06\u6761\u4ef6\u72ec\u7acb\u51fa\u6765,\u7136\u540e\u7528\u903b\u8f91\u8fd0\u7b97\u7b26\u8fde\u7ed3\u6765\u5f97\u5230\u6700\u7ec8\u6761\u4ef6. \u9ed8\u8ba4\u60c5\u51b5\u4e0b,filter\u7b49\u6761\u4ef6\u67e5\u8be2\u5185\u90e8\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u6761\u4ef6\u8bed\u53e5,\u7528\u9017\u53f7\u5206\u5272,\u8fd9\u4e9b\u6761\u4ef6\u4e4b\u95f4\u662fand\u7684\u5173\u7cfb,\u6bd4\u5982\u67e5\u8be2\u6bcf\u4e00\u5f20\u51fa\u5165\u5e93\u5355,\u8981\u6c42\u51fa\u5e93\u5927\u4e8e\u5165\u5e93\u800c\u4e14\u5165\u5e93\u5927\u4e8e50,\u5c31\u53ef\u4ee5\u5199\u6210:</p> Python<pre><code>ret_temp = models.Moves.objects.filter(in_num__gte=F(\"out_num\"), in_num__gt=50)\n</code></pre> <p>\u5176\u4e2d\u7684<code>in_num__gte=F(\"out_num\")</code>\u548c<code>in_num__gt=50</code>\u662fand\u5173\u7cfb.\u5982\u679c\u8981\u6539\u6210or\u5173\u7cfb,\u5c31\u8981\u4f7f\u7528Q\u5bf9\u8c61\u5c06\u6761\u4ef6\u72ec\u7acb\u51fa\u6765,\u7136\u540e\u7528&amp;(\u8868\u793aand)\u548c|(\u8868\u793aor)\u8fd8\u6709~(\u8868\u793a\u53d6\u53cd)\u6765\u8fde\u7ed3\u5404\u4e2aQ\u5bf9\u8c61. \u5982\u679c\u8981\u67e5\u8be2\u5165\u5e93\u5c0f\u4e8e\u51fa\u5e93\u6216\u8005\u51fa\u5e93\u5927\u4e8e20\u7684\u5355\u636e:</p> Python<pre><code>from django.db.models import F,Q\nret_temp = models.Moves.objects.filter(Q(in_num__lte=F(\"out_num\")) | Q(out_num__gt=20))\n</code></pre> <p>\u81f3\u6b64,\u5df2\u7ecf\u5b66\u4e60\u5b8c\u4e86DJango 1.11 QuerySet API reference \u91cc\u7684Methods that return new QuerySets,\u4e5f\u5c31\u662f\u8fd4\u56de\u67e5\u8be2\u7ed3\u679c\u7684\u90e8\u5206.\u8fd8\u6709\u4e00\u90e8\u5206API\u6ca1\u6709\u63a5\u89e6\u5230,\u5217\u5728\u4e0b\u8fb9:</p> \u8fd4\u56deQuerySet\u7684\u65b9\u6cd5\u8865\u5145 \u65b9\u6cd5\u540d \u89e3\u91ca dates(field, kind, order=\u2019ASC\u2019) \u9488\u5bf9DateField\u548cDateTimeField\u7c7b\u578b\u7684\u5b57\u6bb5,\u53d6\u51fa\u5176\u4e2d\u548c\u65e5\u671f\u76f8\u5173\u7684\u90e8\u5206,\u53bb\u91cd,\u7136\u540e\u6392\u5e8f.\u8fd4\u56de\u7684\u662f\u4e00\u4e2aQuerySet\u5bf9\u8c61,\u5176\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u662fdatetime.date()\u5bf9\u8c61.kind\u8868\u793a\u7cbe\u786e\u5ea6,\u53ea\u80fd\u53d6\u201dyear\u201d,\u201dmonth\u201d\u548c\u201dday\u201d\u4e09\u4e2a\u5b57\u7b26\u4e32\u503c.order\u7684ASC\u8868\u793a\u6b63\u5411\u6392\u5e8f,DESC\u8868\u793a\u9006\u5411\u6392\u5e8f datetimes(field_name, kind, order=\u2019ASC\u2019, tzinfo=None) \u529f\u80fd\u4e0edates\u7c7b\u4f3c.\u533a\u522b\u662f\u9488\u5bf9DateTimeField\u7c7b\u578b\u7684\u5b57\u6bb5, kind \u53ea\u80fd\u662f \u201cyear\u201d, \u201cmonth\u201d, \u201cday\u201d, \u201chour\u201d, \u201cminute\u201d \u6216 \u201csecond\u201d.tiinfo\u7684\u53c2\u6570\u5fc5\u987b\u662f\u4e00\u4e2a datetime.tzinfo \u5bf9\u8c61,\u5982\u679c\u8bbe\u7f6e\u4e3aNone,Django\u4f1a\u4f7f\u7528\u5f53\u524d\u65f6\u533a. none() \u4e0d\u7ba1\u524d\u8fb9\u67e5\u8be2\u6761\u4ef6\u5982\u4f55,\u5e26\u4e0a\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u4e00\u5b9a\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684QuerySet\u5bf9\u8c61 union(*other_qs, all=False) \u5de6\u53f3\u8fde\u4e24\u4e2a\u67e5\u8be2\u7ed3\u679c,\u4f7f\u7528\u65b9\u6cd5\u662f queryset1.union(queryset2).\u5982\u679call=True,\u5219\u5141\u8bb8\u91cd\u590d\u9879. intersection(*other_qs) \u83b7\u53d6\u591a\u4e2aQuerySet\u4e2d\u76f8\u540c\u7684\u67e5\u8be2\u7ed3\u679c.\u4f7f\u7528\u65b9\u6cd5\u662fqs1.intersection(qs2, qs3) difference(*other_qs) \u83b7\u53d6\u53ea\u5728\u8c03\u7528\u65b9\u6cd5\u7684QuerySet\u4e2d\u5b58\u5728,\u4e0d\u5728\u53c2\u6570\u7684QuerySet\u4e2d\u5b58\u5728\u7684\u7ed3\u679c,\u4f7f\u7528\u65b9\u6cd5\u662fqs1.difference(qs2, qs3) select_related(*fields) \u76f8\u5f53\u4e8e\u901a\u8fc7\u5916\u952e\u8fdb\u884c\u8fde\u8868\u67e5\u8be2.\u4f7f\u7528\u65b9\u6cd5e = Entry.objects.select_related(\u2018blog\u2019).get(id=5),\u8868\u793a\u9009\u4e2did\u4e3a5\u7684Entry\u8bb0\u5f55\u901a\u8fc7\u5916\u952e\u5173\u8054\u7684blog\u91cc\u7684\u5bf9\u8c61. prefetch_related(*lookups) \u8fd9\u4e2a\u4e0eselect\u7c7b\u4f3c,\u4e3b\u8981\u662f\u6027\u80fd\u76f8\u5173,\u4f1a\u9884\u5148\u901a\u8fc7\u5916\u952e\u8fdb\u884c\u67e5\u627e,\u518d\u6b21\u4f7f\u7528\u67e5\u8be2\u7684\u65f6\u5019\u4f1a\u5230\u4e34\u65f6\u8868\u91cc\u67e5\u8be2.\u8be6\u7ec6\u770b\u8fd9\u91cc extra(select=None, where=None, params=None, tables=None, order_by=None, select_params=None) \u5f53ORM\u6709\u65f6\u5019\u96be\u4ee5\u63cf\u8ff0\u4e00\u4e2a\u590d\u6742\u7684WHERE\u67e5\u8be2\u7684\u65f6\u5019,\u7528extra\u6784\u9020\u989d\u5916\u7684\u67e5\u8be2\u6761\u4ef6,\u6bd4\u5982\u5b50\u67e5\u8be2.\u8be6\u7ec6\u770b\u8fd9\u91cc defer(*fields) \u53c2\u6570\u4e3a\u5b57\u6bb5\u540d,\u7528\u4e8e\u5728\u7ed3\u679c\u96c6\u4e2d\u6392\u51fa\u67d0\u4e9b\u5217,\u6392\u51fa\u4e4b\u540e,\u5217\u5c31\u6ca1\u6709\u4e86\u5bf9\u5e94\u7684\u5b57\u6bb5\u540d\u7684\u5c5e\u6027 only(*fields) \u4ec5\u53d6\u6307\u5b9a\u7684\u67d0\u4e9b\u5b57\u6bb5\u7684\u4fe1\u606f. using(alias) \u5982\u679cDjango\u4e2d\u8bbe\u7f6e\u4e86\u8d85\u8fc7\u4e00\u4e2a\u6570\u636e\u5e93,\u5728\u67e5\u8be2\u7684\u65f6\u5019\u7528\u6b64\u65b9\u6cd5\u6307\u5b9a\u4f7f\u7528\u54ea\u4e2a\u6570\u636e\u5e93,alias\u662f\u6570\u636e\u5e93\u7684\u522b\u540d,\u4e0d\u52a0\u5219\u8868\u793a\u4f7f\u7528\u201ddefault\u201d\u6570\u636e\u5e93.\u6570\u636e\u5e93\u7684\u522b\u540d\u662f\u6307\u7684settings.py\u91ccDATABASES\u53c2\u6570\u7684\u952e\u540d. select_for_update(nowait=False, skip_locked=False) \u8868\u793a\u6240\u6709\u67e5\u8be2\u7ed3\u679c\u5728\u5b8c\u6210\u4e8b\u52a1\u4e4b\u524d\u90fd\u4e0d\u80fd\u88ab\u6539\u52a8,\u5177\u4f53\u770b\u8fd9\u91cc raw(raw_query, params=None, translations=None) \u6267\u884c\u539f\u751f\u7684SQL\u8bed\u53e5,\u8fd4\u56de\u4e00\u4e2a django.db.models.query.RawQuerySet\u5bf9\u8c61,\u53ef\u4ee5\u50cfQuerySet\u4e00\u6837\u904d\u5386\u53d6\u51fa\u5404\u884c\u6570\u636e. <p>\u4e0a\u8fb9\u7684\u6240\u6709\u65b9\u6cd5\u90fd\u662f\u7528\u6765\u67e5\u8be2,\u4e5f\u5c31\u662f\u8fd4\u56deQuerySet\u5bf9\u8c61,\u6216\u8005\u662fQuerySet\u5c01\u88c5\u7684\u5b57\u5178\u6216\u8005\u5176\u4ed6\u5bf9\u8c61(\u6bd4\u5982values, values_list, date\u7b49\u65b9\u6cd5),\u76f8\u5f53\u4e8e\u5728MySQL\u4e2d\u67e5\u627e\u7684\u7ed3\u679c.\u5bf9\u4e8e\u67e5\u8be2\u4ee5\u5916\u7684\u65b9\u6cd5,\u4e3b\u8981\u662f\u6d89\u53ca\u5230\u589e\u5220\u6539\u67e5,\u5c06\u5728\u4e0b\u4e00\u90e8\u5206\u5b66\u4e60.</p>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#methods-that-do-not-return-querysets","title":"\u5176\u4ed6\u65b9\u6cd5 Methods that do not return QuerySets","text":"<p>\u6240\u8c13\u5176\u4ed6\u65b9\u6cd5,\u4e5f\u5c31\u662f\u4e0d\u8fd4\u56deQuerySet\u7684\u65b9\u6cd5.</p> \u4e0d\u8fd4\u56deQuerySet\u7684\u65b9\u6cd5 \u6761\u4ef6 \u89e3\u91ca get(**kwargs) \u53c2\u6570\u4e3a\u5173\u952e\u5b57\u7684\u67e5\u8be2\u6761\u4ef6,\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c,\u5982\u679c\u627e\u4e0d\u5230,\u4f1a\u62a5 DoesNotExist \u5f02\u5e38.\u5982\u679c\u627e\u5230\u591a\u4e2a,\u4f1a\u62a5 MultipleObjectsReturned \u5f02\u5e38.\u5bf9\u4e00\u4e2aQuerySet\u5bf9\u8c61\u4f7f\u7528\u4e0d\u5e26\u53c2\u6570\u7684get(),\u53ef\u4ee5\u8ba9\u5176\u53ea\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5bf9\u8c61.\u4eca\u540e\u9047\u5230\u67e5\u8be2,\u8fd8\u662f\u4f18\u5148\u4f7f\u7528filter\u65b9\u6cd5\u6bd4\u8f83\u597d create(**kwargs) \u63a5\u53d7\u53c2\u6570\u6765\u5efa\u7acb\u4e00\u4e2a\u5bf9\u8c61,\u4f7f\u7528.create()\u65b9\u6cd5\u5c31\u5305\u542b\u4e86.save()\u7684\u8fc7\u7a0b,\u8be6\u7ec6\u770b\u8fd9\u91cc get_or_create(defaults=None, **kwargs) \u7528\u7ed9\u5b9a\u7684\u67e5\u8be2\u6761\u4ef6\u5bfb\u627e\u5bf9\u8c61,\u5982\u679c\u627e\u4e0d\u5230,\u5c31\u5efa\u7acb\u4e00\u4e2a.\u8fd9\u4e2a\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5143\u7ec4(object,created),\u5143\u7ec4\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f\u67e5\u8be2\u7ed3\u679c\u6216\u8005\u65b0\u5efa\u7684\u6570\u636e,\u7b2c\u4e8c\u4e2a\u662f\u4e00\u4e2a\u5e03\u5c14\u503c,\u5982\u679c\u65b0\u5efa\u4e86\u5c31\u662fTrue,\u5426\u5219\u662fFalse.\u8fd9\u4e2a\u65b9\u6cd5\u5b9e\u9645\u8fc7\u7a0b\u76f8\u5f53\u4e8e\u5148\u53bb\u8c03\u7528get(),\u5982\u679c\u4ea7\u751f\u4e86DoesNotExist\u5f02\u5e38,\u5219\u4f1a\u65b0\u5efa\u4e00\u4e2a\u540c\u6837\u53c2\u6570\u7684\u5bf9\u8c61.\u6ce8\u610f\u5173\u952e\u5b57\u53c2\u6570\u91cc\u540d\u79f0\u53eb\u505adefaults\u7684\u5173\u952e\u5b57\u662f\u4e0d\u4f1a\u6210\u4e3a\u5185\u542b\u7684get()\u8c03\u7528\u4e2d\u7684\u53c2\u6570,\u53ea\u4f1a\u5728\u65b0\u5efa\u7684\u65f6\u5019\u53d1\u751f\u4f5c\u7528.\u5177\u4f53\u770b\u8fd9\u91cc update_or_create(defaults=None, **kwargs) \u548cget_or_create\u7c7b\u4f3c,\u5982\u679c\u5b57\u6bb5\u5b58\u5728\u5219\u66f4\u65b0,\u5426\u5219\u521b\u5efa.defautls\u4e5f\u662f\u8868\u793a\u521b\u5efa\u65f6\u5019\u7684\u5176\u4ed6\u5b57\u6bb5. bulk_create(objs, batch_size=None) \u6279\u91cf\u63d2\u5165(\u65b0\u589e)\u6570\u636e,objs\u662f\u4e00\u4e2a\u5217\u8868,batch_size\u8868\u793a\u4e00\u6b21\u63d2\u5165\u7684\u4e2a\u6570.\u5177\u4f53\u770b\u8fd9\u91cc in_bulk(id_list=None) id_list\u662f\u4e00\u4e2a\u4e3b\u952e\u5217\u8868,\u6839\u636e\u5176\u4e2d\u7684\u4e3b\u952e,\u8fd4\u56de\u4e00\u4e2a\u5b57\u5178,\u952e\u662f\u4e3b\u952e,\u503c\u662f\u5bf9\u5e94\u7684\u6570\u636e\u884c\u5bf9\u8c61.\u5982\u679c\u4e0d\u4f20\u53c2\u6570,\u5219\u8fd4\u56de\u6240\u6709\u4e3b\u952e\u548c\u5bf9\u5e94\u6570\u636e\u884c\u6784\u6210\u7684\u5b57\u5178.\u5728\u6309\u7167\u4e3b\u952e\u67e5\u8be2\u7684\u65f6\u5019\u7ecf\u5e38\u7528\u6b64\u65b9\u6cd5. iterator() QuerySet\u7684\u65b9\u6cd5,\u4f7f\u7528\u4e4b\u540e\u53d8\u6210\u4e00\u4e2a\u8fed\u4ee3\u5668. latest(field_name=None) \u9700\u8981\u6307\u5b9a\u5b57\u6bb5\u540d,\u5b57\u6bb5\u5fc5\u987b\u662f\u65f6\u95f4\u7c7b\u578b\u7684\u5b57\u6bb5,\u76f4\u63a5\u8fd4\u56de\u65f6\u95f4\u6700\u665a\u7684\u90a3\u4e00\u884c\u8bb0\u5f55. earliest(field_name=None) \u548clatest\u7528\u6cd5\u76f8\u540c,\u8fd4\u56de\u65f6\u95f4\u6700\u65e9\u7684\u90a3\u4e00\u6761\u8bb0\u5f55,\u548clatest\u7ecf\u5e38\u4f7f\u7528\u5728\u4e00\u4e9b\u5185\u5bb9\u7ba1\u7406\u7684\u67e5\u627e\u4e0a update(**kwargs) \u7528\u5728QuerySet\u4e0a,\u66f4\u65b0QuerySet\u91cc\u6240\u6709\u5bf9\u8c61\u7684\u5b57\u6bb5,\u9690\u542b\u4e86save\u64cd\u4f5c,\u8fd4\u56de\u53d7\u5f71\u54cd\u7684\u884c\u6570.update\u4e0d\u80fd\u591f\u7528\u5728\u5173\u8054\u5173\u7cfb\u7684\u64cd\u4f5c\u4e0a,\u4e0d\u80fd\u76f4\u63a5\u901a\u8fc7\u5916\u952e\u540d__\u5b57\u6bb5\u540d\u53bb\u66f4\u65b0\u5176\u4ed6\u8868.\u4e4b\u524d\u8bf4\u8fc7\u67e5\u8be2\u7684\u65f6\u5019\u591a\u7528filter,\u56e0\u6b64\u4eca\u540e\u5c31\u7528update\u4e0efilter\u642d\u914d\u4f7f\u7528. delete() \u7528\u5728\u5355\u4e2a\u5bf9\u8c61\u6216\u8005QuerySet\u4e0a,\u8868\u793a\u5c06\u9009\u62e9\u7684\u884c\u4ece\u8868\u91cc\u5220\u9664,\u8fd4\u56de\u53d7\u5f71\u54cd\u7684\u884c\u6570. as_manager() \u5728\u6bcf\u6b21\u5199\u67e5\u8be2\u7684<code>models.Book.objects</code>\u4e2d\u7684objects\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61\u7ba1\u7406\u5668,\u5bf9\u8c61\u7ba1\u7406\u5668\u7684\u9ed8\u8ba4\u540d\u79f0\u5c31\u662fobjects.\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u662f\u4ea7\u751f\u4e00\u4e2a\u5e26\u6709QuerySet\u6240\u6709\u65b9\u6cd5\u7684\u7ba1\u7406\u5668,\u66ff\u4ee3\u4e86objects\u8fd9\u4e2a\u540d\u5b57,\u5177\u4f53\u770b\u8fd9\u91cc","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#_7","title":"\u8865\u5145\u90e8\u5206","text":"","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#sql","title":"\u67e5\u770b\u5b9e\u9645\u751f\u6210\u7684SQL\u8bed\u53e5","text":"<p>\u5728\u4f7f\u7528ORM\u7684\u65f6\u5019,\u6709\u7684\u65f6\u5019\u9700\u8981\u77e5\u9053\u5b9e\u9645\u751f\u6210\u7684SQL\u8bed\u53e5,\u5c06\u5982\u4e0b\u90e8\u5206\u590d\u5236\u5230settings.py\u4e2d,\u8bbe\u7f6eDEBUG=True,\u6bcf\u6b21\u6267\u884cORM\u64cd\u4f5c\u7684\u65f6\u5019,\u5c31\u53ef\u4ee5\u5728python console\u4e2d\u770b\u5230\u5b9e\u9645\u7684SQL\u8bed\u53e5.</p> Python<pre><code>LOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'handlers': {\n        'console':{\n            'level':'DEBUG',\n            'class':'logging.StreamHandler',\n        },\n    },\n    'loggers': {\n        'django.db.backends': {\n            'handlers': ['console'],\n            'propagate': True,\n            'level':'DEBUG',\n        },\n    }\n}\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_orm_query/#pythondjango","title":"\u5728python\u7a0b\u5e8f\u4e2d\u8c03\u7528Django\u73af\u5883","text":"<p>\u4e00\u822c\u6765\u8bf4\u6211\u4eec\u5728\u542f\u52a8Django\u7a0b\u5e8f\u7684\u65f6\u5019\u624d\u8fd0\u884c\u5728Django\u73af\u5883\u4e2d,\u5355\u72ec\u5199\u4e00\u4e2apy\u6587\u4ef6,\u5bfc\u5165Django\u7684\u5e93\u662f\u65e0\u6cd5\u8fdb\u884c\u64cd\u4f5c\u7684. \u5b9e\u9645\u4e0aDjango\u73af\u5883\u662f\u5199\u5728Django_admin\u7b49\u5185\u5bb9\u4e2d\u7684,\u76f4\u63a5\u4f7f\u7528\u4f1a\u63d0\u793a\u5bfc\u5165\u73af\u5883\u914d\u7f6e\u6587\u4ef6,\u53ea\u8981\u6839\u636e\u63d0\u793a\u64cd\u4f5c\u5373\u53ef,\u8fd9\u91cc\u63d0\u4f9b\u76f4\u63a5\u53ef\u4f9b\u7c98\u8d34\u7684\u4ee3\u7801:</p> Python<pre><code>import os\n\nif __name__ == '__main__':\n    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"BMS.settings\")\n    import django\n    django.setup()\n#  \u5728\u4ee5\u4e0a\u8bed\u53e5\u7ed3\u675f\u4e4b\u540e,\u5c31\u53ef\u4ee5\u50cf\u7f16\u5199views,models\u7b49\u6587\u4ef6\u4e2d\u6765\u5bfc\u5165Django\u7684\u5404\u79cd\u6a21\u5757\u6765\u8fdb\u884c\u64cd\u4f5c,\u7ed3\u679c\u4e5f\u4e0e\u50cf\u5728\u5b9e\u9645\u7684Django\u73af\u5883\u4e2d\u5f97\u5230\u7684\u7ed3\u679c\u4e00\u6837\n    from app01 import models\n    books = models.Book.objects.all()\n    print(books)\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/","title":"django\u4e2d\u4f7f\u7528websocket","text":"","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#_1","title":"\u5b89\u88c5","text":"Bash<pre><code>pip install -U channels\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#channelsinstalled_apps","title":"\u628achannels\u52a0\u5165\u5230INSTALLED_APPS","text":"Python<pre><code>INSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    ...\n    'channels',\n)\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#settingspyroutingpy","title":"\u5728settings.py\u6587\u4ef6\u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\u521b\u5efarouting.py\u6587\u4ef6","text":"Python<pre><code>from channels.auth import AuthMiddlewareStack\nfrom channels.routing import ProtocolTypeRouter, URLRouter, ChannelNameRouter\nimport public.routing\nfrom public import consumers\n\napplication = ProtocolTypeRouter({\n    # (http-&gt;django views is added by default)\n    'websocket': AuthMiddlewareStack(\n        URLRouter(\n            public.routing.websocket_urlpatterns\n        )\n    ),\n    \"channel\": ChannelNameRouter({\n        \"service-detection\": consumers.ServiceConsumer,\n    }),\n})\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#settingspy","title":"\u5728settings.py\u6587\u4ef6\u4e2d\u6dfb\u52a0\uff1a","text":"Python<pre><code>ASGI_APPLICATION = \"total_system.routing.application\"\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#settingpyredis","title":"\u5728setting.py\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4f7f\u7528redis\u76f8\u5173\u914d\u7f6e","text":"<p>\u5b89\u88c5channels_redis</p> Bash<pre><code>pip install channels_redis\n</code></pre> Python<pre><code>CHANNEL_LAYERS = {\n    'default': {\n        'BACKEND': 'channels_redis.core.RedisChannelLayer',  # \u4f7f\u7528redis\u7f13\u5b58\n        'CONFIG': {\"hosts\": [\"redis://10.102.100.28:6379/0\"], },\n    },\n}\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#appconsumerspy","title":"app\u91cc\u6dfb\u52a0consumers.py\u6587\u4ef6","text":"Python<pre><code>from channels.generic.websocket import AsyncWebsocketConsumer\nimport json\nimport logging\n\nlogger = logging.getLogger(\"django\")\n\n\nclass ServiceConsumer(AsyncWebsocketConsumer):\n\n    async def connect(self):\n        self.project_pk = self.scope['url_route']['kwargs']['project_pk']\n        self.room_group_name = '%s' % self.project_pk\n        print('***********open************')\n        print(\"channel_name\", self.channel_name)\n\n        await self.channel_layer.group_add(\n            self.room_group_name,\n            self.channel_name\n        )\n\n        await self.accept()\n        # await self.send(text_data=json.dumps({\n        #     'text': \"success\"\n        # }))\n\n    async def disconnect(self, close_code):\n        print(\"room_group_name\", self.room_group_name)\n        print('websocket\u65ad\u5f00')\n\n        await self.channel_layer.group_discard(\n            self.room_group_name,\n            self.channel_name\n        )\n\n    # Receive message from WebSocket\n    async def receive(self, text_data):\n        print(text_data)\n        text_data_json = json.loads(text_data)\n\n        message = text_data_json['text']\n        print(message)\n        # Send message to room group\n        await self.channel_layer.group_send(\n            self.room_group_name,\n            {\n                'type': 'user_message',\n                'text': message\n            }\n        )\n\n    # Receive message from room group\n    async def user_message(self, event):\n        # todo: get real user from service detection api\n\n        message = event['text']\n        # Send message to WebSocket\n        # await self.send(text_data=json.dumps(message))\n        await self.send(text_data=json.dumps({\n            'text': message\n        }))\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#approutingpy","title":"app\u91cc\u6dfb\u52a0routing.py\u6587\u4ef6","text":"Python<pre><code>from django.conf.urls import url\nfrom public import consumers\n\nwebsocket_urlpatterns = [\n    url(r'^project/(?P&lt;project_pk&gt;[^/]+)/$', consumers.ServiceConsumer),\n    # url(r'^pro/(?P&lt;project_pk&gt;[^/]+)/$', consumers.ProjectConsumer),\n]\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#utilschannels_msgpy","title":"\u5728utils\u91cc\u521b\u5efachannels_msg.py","text":"Python<pre><code>import time\nimport os\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"total_system.settings\")\n\nfrom channels.layers import get_channel_layer\nfrom asgiref.sync import async_to_sync\n\nchannel_layer = get_channel_layer()\n\n\n# channel_name \u662f\u4fdd\u5b58\u65f6 self.room_group_name \u7684\u540d\u5b57\n\n\ndef send_channel_msg(channel_name, msg):\n    async_to_sync(channel_layer.group_send)(channel_name, {'type': 'user_message', 'text': msg})\n\n\nif __name__ == '__main__':\n    while True:\n        send_channel_msg(\"ct_01\", {\"sum\": 9.9, \"name\": \"\u59d3\u540d\", \"num\": 4, \"all_money\": 4412})\n        print(time.time())\n        time.sleep(5)\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#websocket","title":"\u4f7f\u7528websocket\u5411\u524d\u7aef\u63a8\u9001\u6d88\u606f","text":"Python<pre><code>from utils.channels_msg import send_channel_msg\n\nsend_channel_msg(\"ct_01\", {\"is_stop\": 1})\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#settingspyasgipy","title":"\u5728settings.py\u6587\u4ef6\u540c\u7ea7\u76ee\u5f55\u65b0\u5efaasgi.py","text":"Python<pre><code>import os\nimport django\nfrom channels.routing import get_default_application\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"total_system.settings\")\ndjango.setup()\napplication = get_default_application()\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#_2","title":"\u524d\u7aef\u4ee3\u7801\u53c2\u8003","text":"Python<pre><code>&lt;!-- chat/templates/chat/room.html --&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"/&gt;\n    &lt;title&gt;Chat Room&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;textarea id=\"chat-log\" cols=\"100\" rows=\"20\"&gt;&lt;/textarea&gt;&lt;br/&gt;\n    &lt;input id=\"chat-message-input\" type=\"text\" size=\"100\"/&gt;&lt;br/&gt;\n    &lt;input id=\"chat-message-submit\" type=\"button\" value=\"Send\"/&gt;\n&lt;/body&gt;\n&lt;script&gt;\n    var roomName = {{ room_name_json }};\n\n    var chatSocket = new WebSocket(\n        'ws://' + window.location.host +\n        '/ws/chat/' + roomName + '/');\n\n    chatSocket.onmessage = function(e) {\n        var data = JSON.parse(e.data);\n        var message = data['message'];\n        document.querySelector('#chat-log').value += (message + '\\n');\n    };\n\n    chatSocket.onclose = function(e) {\n        console.error('Chat socket closed unexpectedly');\n    };\n\n    document.querySelector('#chat-message-input').focus();\n    document.querySelector('#chat-message-input').onkeyup = function(e) {\n        if (e.keyCode === 13) {  // enter, return\n            document.querySelector('#chat-message-submit').click();\n        }\n    };\n\n    document.querySelector('#chat-message-submit').onclick = function(e) {\n        var messageInputDom = document.querySelector('#chat-message-input');\n        var message = messageInputDom.value;\n        chatSocket.send(JSON.stringify({\n            'message': message\n        }));\n\n        messageInputDom.value = '';\n    };\n&lt;/script&gt;\n&lt;/html&gt;\n</code></pre>","tags":["Python","Django"]},{"location":"python/django/django_websocket_usage/#websocket_1","title":"\u540e\u7aefwebsocket\u6d4b\u8bd5\u5ba2\u6237\u7aef","text":"Python<pre><code>import asyncio\nimport websockets\nimport json\nimport time\n\n\nasync def test_ws_quote():\n    async with websockets.connect('ws://10.10.10.10:8005/project/plc_01/') as websocket:\n        req = {'text': {\"protocol\": \"history_req\", 'code': 'XAGODS', 'type': 'MINUTE', 'start_pos': '0', 'pos_num': '10'}}\n        await websocket.send(json.dumps(req))\n\n        while True:\n            try:\n                quote = await websocket.recv()\n            except:\n                print(\"\u670d\u52a1\u5668\u5df2\u5173\u95ed\u00b7\u00b7\u00b7\")\n                break\n            else:\n                # time.sleep(5)\n                quote = json.loads(quote)\n                print(quote)\n\n\nasyncio.get_event_loop().run_until_complete(test_ws_quote())\n</code></pre> <p>\u90e8\u7f72\u65f6\u542f\u52a8websocket</p> Bash<pre><code>daphne -b 10.10.100.10 -p 8005 total_system.asgi:application -v2\n</code></pre>","tags":["Python","Django"]},{"location":"python/pybestpractices/coding_standard/","title":"Python\u7f16\u7801\u89c4\u8303","text":"<p>\u6211\u6709\u4e00\u4e2a\u68a6\u60f3\uff0c\u6211\u5199\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u50cf\u8bd7\u6b4c\u4e00\u6837\u4f18\u7f8e\u3002\u6211\u6709\u4e00\u4e2a\u68a6\u60f3\uff0c\u6211\u505a\u7684\u8bbe\u8ba1\uff0c\u80fd\u6070\u5230\u597d\u5904\uff0c\u65e2\u4e0d\u8fc7\u5ea6\uff0c\u4e5f\u65e0\u4e0d\u8db3\u3002\u8fd9\u79cd\u5e26\u6709\u4e00\u70b9\u6d01\u7656\u7684\u5b8c\u7f8e\u4e3b\u4e49\u5c31\u50cf\u4e00\u628a\u8fbe\u6469\u514b\u5229\u65af\u4e4b\u5251\uff0c\u65f6\u523b\u63d0\u9192\u6211\uff0c\u4e0d\u80fd\u5c06\u5c31\u3001\u4e0d\u80fd\u59a5\u534f\u3002   ---\u6458\u81ea\u300a\u4ee3\u7801\u7cbe\u8fdb\u4e4b\u8def\uff1a\u4ece\u7801\u519c\u5230\u5de5\u5320\u300b</p>","tags":["Python"]},{"location":"python/pybestpractices/coding_standard/#python","title":"Python\u4e4b\u7985","text":"Python<pre><code>In [1]: import this\nThe Zen of Python, by Tim Peters\n\nBeautiful is better than ugly.\nExplicit is better than implicit.\nSimple is better than complex.\nComplex is better than complicated.\nFlat is better than nested.\nSparse is better than dense.\nReadability counts.\nSpecial cases aren't special enough to break the rules.\nAlthough practicality beats purity.\nErrors should never pass silently.\nUnless explicitly silenced.\nIn the face of ambiguity, refuse the temptation to guess.\nThere should be one-- and preferably only one --obvious way to do it.\nAlthough that way may not be obvious at first unless you're Dutch.\nNow is better than never.\nAlthough never is often better than *right* now.\nIf the implementation is hard to explain, it's a bad idea.\nIf the implementation is easy to explain, it may be a good idea.\nNamespaces are one honking great idea -- let's do more of those!\n</code></pre> <p>\u6211\u4eec\u4e5f\u8bb8\u90fd\u77e5\u9053\uff0c\u597d\u7684\u53d8\u91cf\u547d\u540d\u548c\u6ce8\u91ca\u5e76\u4e0d\u662f\u4e3a\u8ba1\u7b97\u673a\u800c\u5199\uff0c\u800c\u662f\u4e3a\u9605\u8bfb\u8005\u6216\u7ef4\u62a4\u8005\u800c\u5199\u3002\u90a3\u4e48\u6bcf\u79cd\u7f16\u7a0b\u8bed\u8a00\u90fd\u6709\u5176\u7279\u5b9a\u7684\u7f16\u7a0b\u89c4\u8303\u548c\u6700\u4f73\u5b9e\u8df5\uff0c\u90a3\u4e48\u4e0b\u9762\u5f00\u59cb\u4ecb\u7ecd\u4e00\u4e0b\u518dPython\u7f16\u7a0b\u5e94\u7528\u4e2d\u4e2a\u4eba\u8ba4\u4e3a\u6bd4\u8f83\u597d\u7684\u5b9e\u8df5\u89c4\u8303\uff1a</p>","tags":["Python"]},{"location":"python/pybestpractices/coding_standard/#_1","title":"\u53d8\u91cf\u547d\u540d\uff1a","text":"<p>\u5173\u4e8e\u53d8\u91cf\u7684\u547d\u540d\uff0c\u5728\u70ed\u95e8\u7684\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u4e3b\u8981\u5206\u4e3a\u9a7c\u5cf0\u547d\u540d\u6d3e\uff08CameCase\uff09\u548c\u86c7\u5f62\u547d\u540d\u6d3e\uff08snake_case\uff09\uff0c\u800c\u5728Python\u4e2d\uff0c\u8fd9\u4e24\u79cd\u65b9\u5f0f\u5176\u5b9e\u5728\u4e0d\u540c\u7684\u573a\u666f\u4e2d\u5e94\u7528\u90fd\u6bd4\u8f83\u9891\u7e41\uff0c\u9a7c\u5cf0\u547d\u540d\u4e3b\u8981\u5e94\u7528\u5728\u7c7b\u540d\u7684\u5b9a\u4e49\u4e0a\uff0c\u5176\u4ed6\u573a\u666f\u7edd\u5927\u90e8\u5206\u90fd\u662f\u4f7f\u7528\u86c7\u5f62\u547d\u540d\uff0c\u5982\uff1a</p> <ul> <li>\u666e\u901a\u53d8\u91cf\u540d\uff1a\u53d8\u91cf\u540d\uff0c\u8981\u5168\u90e8\u5c0f\u5199\uff0c\u591a\u4e2a\u8bcd\u901a\u8fc7\u4e0b\u5212\u7ebf\u8fde\u63a5,\u5373\u86c7\u5f62\u547d\u540d\uff1b</li> <li>\u5e38\u91cf\u540d\uff1a\u8981\u5168\u90e8\u5927\u5199\uff0c\u591a\u4e2a\u8bcd\u901a\u8fc7\u4e0b\u5212\u7ebf\u8fde\u63a5\uff1b</li> <li>\u51fd\u6570(\u6216\u65b9\u6cd5)\u540d\uff1a\u8981\u5168\u90e8\u5c0f\u5199\uff0c\u591a\u4e2a\u8bcd\u901a\u8fc7\u4e0b\u5212\u7ebf\u8fde\u63a5\uff1b</li> <li>\u7c7b\u540d\uff1a\u8981\u4ee5\u9a7c\u5cf0\u5f62\u5f0f\u547d\u540d\uff0c\u5373\u5355\u8bcd\u9996\u5b57\u6bcd\u5927\u5199\uff0c\u591a\u4e2a\u8bcd\u7684\u8bdd\uff0c\u6bcf\u4e2a\u8bcd\u9996\u5b57\u6bcd\u5927\u5199\u7136\u540e\u76f4\u63a5\u62fc\u63a5;</li> <li>\u7c7b\u7684\u79c1\u6709\u53d8\u91cf\u540d: \u53d8\u91cf\u540d\u524d\u9700\u8981\u52a02\u4e2a\u4e0b\u5212\u7ebf\uff1b</li> </ul> <p>\u6700\u4f73\u5b9e\u8df5\uff1a</p> <ul> <li>\u547d\u540d\u9700\u8981\u505a\u5230\u540d\u5982\u5176\u610f\uff0c\u4e0d\u8981\u541d\u556c\u540d\u5b57\u7684\u957f\u5ea6;</li> <li>\u5f53\u547d\u540d\u4e0e\u5173\u952e\u5b57\u51b2\u7a81\u65f6\uff0c\u5728\u53d8\u91cf\u672b\u5c3e\u52a0\u4e0b\u5212\u7ebf\uff0c\u6bd4\u5982\uff1aclass_;</li> <li>\u9075\u5faaPEP 8\u539f\u5219\uff08Python\u5b98\u65b9\u5236\u5b9a\u7684\u7f16\u7801\u98ce\u683c\u6307\u5357\u548c\u5efa\u8bae\uff09\uff1b</li> <li>\u53d8\u91cf\u7684\u63cf\u8ff0\u6027\u8981\u5f3a\uff0c\u6bd4\u5982\uff1a\u51ac\u5929\u7684\u6885\u82b1\u6bd4\u82b1\u7684\u63cf\u8ff0\u6027\u66f4\u5f3a\uff1b</li> <li>\u53d8\u91cf\u540d\u8981\u5c3d\u91cf\u77ed\uff0c\u6700\u597d\u4e0d\u8981\u8d85\u8fc74\u4e2a\u5355\u8bcd\uff1b</li> <li>\u547d\u540d\u65f6\u5efa\u8bae\u8981\u8003\u8651\u5339\u914d\u7c7b\u578b\uff1b </li> </ul> Type Public Internal Modules lower_with_under _lower_with_under Packages lower_with_under Classes CapWords _CapWords Exceptions CapWords Functions lower_with_under() _lower_with_under() Global/Class Constants CAPS_WITH_UNDER _CAPS_WITH_UNDER Global/Class Variables lower_with_under _lower_with_under Instance Variables lower_with_under _lower_with_under (protected) or __lower_with_under (private) Method Names lower_with_under() _lower_with_under() (protected) or __lower_with_under() (private) Function/Method Parameters lower_with_under Local Variables lower_with_under <ul> <li>\u5b9e\u8df5</li> </ul> Python<pre><code># bad\n# \u63cf\u8ff0\u6027\u5f31\u7684\u540d\u5b57\uff0c\u770b\u4e0d\u61c2\u5728\u505a\u4ec0\u4e48\nvalue = process(s.strip())\n\n# good\n# \u63cf\u8ff0\u6027\u5f3a\u7684\u540d\u5b57\uff0c\u5c1d\u8bd5\u4ece\u7528\u6237\u8f93\u5165\u91cc\u89e3\u6790\u4e00\u4e2a\u7528\u6237\u540d\nusername = extract_username(input_string.strip())\n\n\n# \u7531\u4e8e\u63cf\u8ff0\u6027\u5f3a\u7684\u5efa\u8bae\uff0c\u5f80\u5f80\u4f1a\u8ba9\u5f00\u53d1\u8005\u8ba4\u4e3a\u53ea\u6709\u53d8\u91cf\u540d\u8d8a\u957f\uff0c\u63cf\u8ff0\u6027\u624d\u4f1a\u66f4\u5f3a\uff0c\u5176\u5b9e\u4e0d\u7136\n# bad \ndef upgrade_to_level3(user):\n    \"\"\u201c\u5982\u679c\u79ef\u5206\u6ee1\u8db3\u8981\u6c42\uff0c\u5c06\u7528\u6237\u5347\u7ea7\u5230\u7ea7\u522b3\"\"\"\n    how_many_points_needed_for_user_level3 = get_level_points(3)\n    if user.points &gt;= how_many_points_needed_for_user_level3:\n        upgrade(user)\n    else:\n        raise Error(f\"\u79ef\u5206\u4e0d\u591f\uff0c\u5fc5\u987b\u8981{how_xxxxxxx}\u5206\")\n\n# good\ndef upgrade_to_level3(user):\n    \"\"\u201c\u5982\u679c\u79ef\u5206\u6ee1\u8db3\u8981\u6c42\uff0c\u5c06\u7528\u6237\u5347\u7ea7\u5230\u7ea7\u522b3\"\"\"\n    level3_points = get_level_points(3)\n    if user.points &gt;= level3_points:\n        upgrade(user)\nelse:\n    raise Error(f\"\u79ef\u5206\u4e0d\u591f\uff0c\u5fc5\u987b\u8981{level3_points}\u5206\")\n\n\n# \u8bf4\u660e\uff1a\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570\u540d\u548c\u6587\u6863\u5df2\u7ecf\u77e5\u9053\u51fd\u6570\u7684\u4f5c\u7528\u548c\u529f\u80fd\uff1b\n#     \u6587\u6863\u8868\u660e\u4e86\u5176\u76ee\u7684\uff0c\u90a3\u4e48\u5728\u51fd\u6570\u5185\u90e8\uff0c\u5b8c\u5168\u53ef\u4ee5\u5c06\u53d8\u91cf\u6539\u4e3alevel3_points\n# \u8bc0\u7a8d\uff1a\u7ed3\u5408\u4ee3\u7801\u60c5\u666f\u548c\u4e0a\u4e0b\u6587\u4e3a\u53d8\u91cf\u8fdb\u884c\u547d\u540d\uff1b\n\n\n# \u914d\u5408\u5e03\u5c14\u503c\u7c7b\u578b\u7684\u53d8\u91cf\u540d\nis_superuser\nhas_errors\nallow_enmpy\n\n# \u5339\u914dint/float\u7c7b\u578b\u7684\u53d8\u91cf\u540d\n## \u91ca\u4e49\u4e3a\u6570\u5b57\u7684\u6240\u6709\u5355\u8bcd\uff1aport(\u7aef\u53e3\u53f7)\u3001age(\u5e74\u9f84)\n## \u4f7f\u7528_id\u7ed3\u5c3e\u7684\u5355\u8bcd\uff1auser_id, host_id,\n## \u4f7f\u7528\u4ee5length/count\u5f00\u5934\u6216\u7ed3\u5c3e\u7684\u5355\u8bcd\uff1alength_of_usernmae\u3001max_length\u3001users_count\n\n## \u4e0d\u5efa\u8bae\u62ff\u4e00\u4e2a\u540d\u8bcd\u7684\u590d\u6570\u5f62\u5f0f\u4f5c\u4e3aint\u7c7b\u578b\u7684\u53d8\u91cf\u540d\uff1b\n### apples\u3001trips,\u56e0\u4e3a\u8fd9\u7c7b\u540d\u5b57\u5bb9\u6613\u88c5\u7740\u666e\u901a\u5bb9\u5668\u5bf9\u8c61List[Apple]\u3001List[Trip],\u5efa\u8bae\u4f7f\u7528number_of_apples\u6216 trips_count\u8fdb\u884c\u8868\u793a\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/coding_standard/#_2","title":"\u5bfc\u5305\u89c4\u8303","text":"<p>\u5728\u5bfc\u5305\u65f6\uff0c\u5bfc\u5165\u7684\u5185\u5bb9\u603b\u5e94\u8be5\u653e\u5728\u6587\u4ef6\u9876\u90e8, \u4f4d\u4e8e\u6a21\u5757\u6ce8\u91ca\u548c\u6587\u6863\u5b57\u7b26\u4e32\u4e4b\u540e,\u6a21\u5757\u5168\u5c40\u53d8\u91cf\u548c\u5e38\u91cf\u4e4b\u524d. \u5bfc\u5165\u5e94\u8be5\u6309\u7167\u4ece\u6700\u901a\u7528\u5230\u6700\u4e0d\u901a\u7528\u7684\u987a\u5e8f\u5206\u7ec4: </p> <ol> <li>\u6807\u51c6\u5e93\u5bfc\u5165</li> <li>\u7b2c\u4e09\u65b9\u5e93\u5bfc\u5165</li> <li>\u5e94\u7528\u7a0b\u5e8f\u6307\u5b9a\u5bfc\u5165</li> </ol> <p>\u6700\u4f73\u5b9e\u8df5\uff1a</p> <ul> <li>\u5f53\u4f7f\u7528 import xxx\u65f6\uff0c \u901a\u5e38\u5efa\u8bae\u6bcf\u884cimport\u53ea\u5bfc\u5165\u4e00\u4e2a\u5bf9\u8c61\uff1b</li> <li>\u5f53\u4f7f\u7528from xxx import xxx\u65f6\uff0cimport\u540e\u9762\u8ddf\u7740\u7684\u5bf9\u8c61\u8981\u662f\u4e00\u4e2apackage(\u5305\u5bf9\u5e94\u4ee3\u7801\u76ee\u5f55)\u6216\u8005module(\u6a21\u5757\u5bf9\u5e94\u4ee3\u7801\u6587\u4ef6)\uff0c\u4e0d\u8981\u662f\u4e00\u4e2a\u7c7b\u6216\u8005\u4e00\u4e2a\u51fd\u6570\uff0c</li> <li>\u5f53\u4f7f\u7528from xxx import xxx\u65f6\uff0c\u539f\u5219\u4e0a\u5efa\u8bae\u4e00\u884c\u5bfc\u5165\u4e00\u4e2a\u5305\uff0c\u82e5\u5b9e\u5728\u60f3\u8981\u5728\u4e00\u884c\u5bfc\u5165\u591a\u4e2a\u5305\uff0c\u5efa\u8bae\u4f7f\u7528\uff08\uff09\u62ec\u53f7\u62ec\u8d77\u6765\uff1b</li> <li>\u5f53\u5bfc\u5165\u7684\u5305\u540d\u8f83\u957f\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528as \u8fdb\u884c\u5c40\u90e8\u91cd\u547d\u540d\uff1b</li> <li>\u5728\u5de5\u7a0b\u5f00\u53d1\u4e0a\uff0c\u5efa\u8bae\u5f15\u5165\u683c\u5f0f\u5316\u5de5\u5177\u8fdb\u884c\u4f18\u5316\uff0c\u5982isort\u3001black;</li> </ul> Python<pre><code>import foo\n\nfrom foo import bar\nfrom foo.bar import baz\nfrom foo.bar import Quux\n\nfrom foo.bar import (baz,Quux)\nfrom Foob import ar\n\nimport pandas as pd\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/coding_standard/#_3","title":"\u6ce8\u91ca\u89c4\u8303\uff1a","text":"<p>\u5728Python\u4e2d,\u5355\u884c\u6ce8\u91ca\u4e3b\u8981\u4ee5#\u5f00\u5934\uff0c\u591a\u884c\u6ce8\u91ca\u6216\u6587\u6863\u6ce8\u91ca\u901a\u5e38\u4f7f\u7528\u4e09\u8fde\u5b57\u7b26\u4e32\u8fdb\u884c\u6ce8\u91ca\uff0c</p> <ul> <li>\u4ee3\u7801\u5757\u6ce8\u91ca\uff0c\u5728\u4ee3\u7801\u5757\u4e0a\u4e00\u884c\u7684\u76f8\u540c\u7f29\u8fdb\u5904\u4ee5 # \u5f00\u59cb\u4e66\u5199\u6ce8\u91ca\uff1b\u4ee3\u7801\u5757\u6ce8\u91ca\u6700\u9700\u8981\u5199\u6ce8\u91ca\u7684\u5730\u65b9\u662f\u4ee3\u7801\u4e2d\u90a3\u4e9b\u6280\u5de7\u6027\u7684\u90e8\u5206\uff1b\u5bf9\u4e8e\u590d\u6742\u7684\u64cd\u4f5c\uff0c\u5e94\u8be5\u5728\u5176\u64cd\u4f5c\u5f00\u59cb\u4e4b\u524d\u5199\u4e0a\u82e5\u5e72\u884c\u6ce8\u91ca\uff0c\u5bf9\u4e8e\u4e0d\u662f\u4e00\u76ee\u4e86\u7136\u7684\u4ee3\u7801\uff0c\u5e94\u8be5\u5728\u5176\u884c\u5c3e\u6dfb\u52a0\u6ce8\u91ca\uff1b</li> <li>\u4ee3\u7801\u884c\u6ce8\u91ca\uff0c\u5728\u4ee3\u7801\u884c\u7684\u5c3e\u90e8\u8ddf2\u4e2a\u7a7a\u683c\uff0c\u7136\u540e\u4ee5 # \u5f00\u59cb\u4e66\u5199\u6ce8\u91ca\uff0c\u884c\u6ce8\u91ca\u5c3d\u91cf\u5c11\u5199\uff1b</li> <li>TODO\u6ce8\u91ca\u5e94\u8be5\u5728\u6240\u6709\u5f00\u5934\u5904\u5305\u542b\u201cTODO\u201d\u5b57\u7b26\u4e32\uff0c\u7d27\u8ddf\u7740\u7528\u62ec\u53f7\u62ec\u8d77\u6765\u4f60\u7684\u540d\u5b57\uff0cemail\u5730\u5740\u6216\u5176\u4ed6\u6807\u8bc6\u7b26\uff0c\u7136\u540e\u662f\u4e00\u4e2a\u53ef\u9009\u7684\u5192\u53f7\uff1b</li> <li>\u5bf9\u4e8eTODO\u6ce8\u91ca\u7684\u76ee\u7684\u662f\u7528\u6765\u8868\u793a\u201c\u5c06\u6765\u505a\u67d0\u4ef6\u4e8b\u201d\uff0c\u5efa\u8bae\u6dfb\u52a0\u6307\u5b9a\u7684\u65e5\u671f\uff1b</li> <li>\u82f1\u6587\u6ce8\u91ca\u5f00\u5934\u8981\u5927\u5199\uff0c\u7ed3\u5c3e\u8981\u5199\u6807\u70b9\u7b26\u53f7\uff0c\u907f\u514d\u8bed\u6cd5\u9519\u8bef\u548c\u903b\u8f91\u9519\u8bef\uff0c\u4e2d\u6587\u6ce8\u91ca\u4e5f\u662f\u76f8\u540c\u8981\u6c42\uff1b</li> <li>\u6539\u52a8\u4ee3\u7801\u903b\u8f91\u65f6\uff0c\u4e00\u5b9a\u8981\u53ca\u65f6\u66f4\u65b0\u76f8\u5173\u7684\u6ce8\u91ca\uff1b</li> </ul> <p>\u5b9e\u8df5\uff1a</p> Python<pre><code># TODO(ssw@gmail.com): Use a \"*\" here for string repetition.\n# TODO(Luke) Change this to use relations.\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/coding_standard/#_4","title":"\u7f29\u8fdb\u89c4\u8303\uff1a","text":"<p>\u5728python\u4e2d\uff0c\u901a\u5e38\u4f7f\u7528\u56db\u4e2a\u7a7a\u683c\u3001\u62161\u4e2atab\u952e\u5b9e\u73b0\u7f29\u8fdb\u3002\u4f46\u975e\u5e38\u4e0d\u5efa\u8baeTab\u548c\u7a7a\u683c\u6df7\u5408\u4f7f\u7528\uff1b</p>","tags":["Python"]},{"location":"python/pybestpractices/coding_standard/#_5","title":"\u7a7a\u884c\u89c4\u8303\uff1a","text":"<ol> <li>\u5168\u5c40\u7684(\u6587\u4ef6\u7ea7\u522b\u7684)\u7c7b\u548c\u5168\u5c40\u7684\u51fd\u6570\u4e0a\u65b9\u8981\u6709\u4e24\u4e2a\u7a7a\u884c</li> <li>\u7c7b\u4e2d\u7684\u51fd\u6570\u4e0a\u65b9\u8981\u6709\u4e00\u4e2a\u7a7a\u884c</li> <li>\u51fd\u6570\u5185\u90e8\u4e0d\u540c\u610f\u7fa4\u7684\u4ee3\u7801\u5757\u4e4b\u524d\u8981\u6709\u4e00\u4e2a\u7a7a\u884c</li> <li>\u4e0d\u8981\u628a\u591a\u884c\u8bed\u53e5\u5408\u5e76\u4e3a\u4e00\u884c(\u5373\u4e0d\u8981\u4f7f\u7528\u5206\u53f7\u5206\u9694\u591a\u6761\u8bed\u53e5)</li> <li>\u5f53\u4f7f\u7528\u63a7\u5236\u8bed\u53e5if/while/for\u65f6\uff0c\u5373\u4f7f\u6267\u884c\u8bed\u53e5\u53ea\u6709\u4e00\u884c\u547d\u4ee4\uff0c\u4e5f\u9700\u8981\u53e6\u8d77\u4e00\u884c</li> <li>\u4ee3\u7801\u6587\u4ef6\u5c3e\u90e8\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u7a7a\u884c</li> </ol>","tags":["Python"]},{"location":"python/pybestpractices/coding_standard/#_6","title":"\u7a7a\u683c\u89c4\u8303\uff1a","text":"<ol> <li>\u51fd\u6570\u7684\u53c2\u6570\u4e4b\u95f4\u8981\u6709\u4e00\u4e2a\u7a7a\u683c</li> <li>\u5217\u8868\u3001\u5143\u7ec4\u3001\u5b57\u5178\u7684\u5143\u7d20\u4e4b\u95f4\u8981\u6709\u4e00\u4e2a\u7a7a\u683c</li> <li>\u5b57\u5178\u7684\u5192\u53f7\u4e4b\u540e\u8981\u6709\u4e00\u4e2a\u7a7a\u683c</li> <li>\u4f7f\u7528#\u6ce8\u91ca\u7684\u8bdd\uff0c#\u540e\u8981\u6709\u4e00\u4e2a\u7a7a\u683c</li> <li>\u64cd\u4f5c\u7b26(\u4f8b\u5982+\uff0c-\uff0c*\uff0c/\uff0c&amp;\uff0c|\uff0c=\uff0c==\uff0c!=)\u4e24\u8fb9\u90fd\u8981\u6709\u4e00\u4e2a\u7a7a\u683c\uff0c\u4e0d\u8fc7\u62ec\u53f7(\u5305\u62ec\u5c0f\u62ec\u53f7\u3001\u4e2d\u62ec\u53f7\u548c\u5927\u62ec\u53f7)\u5185\u7684\u4e24\u7aef\u4e0d\u9700\u8981\u7a7a\u683c</li> </ol>","tags":["Python"]},{"location":"python/pybestpractices/coding_standard/#_7","title":"\u6362\u884c\u89c4\u8303\uff1a","text":"<ol> <li>\u4e00\u822c\u901a\u8fc7\u4ee3\u7801\u903b\u8f91\u62c6\u5206\u7b49\u624b\u6bb5\u6765\u63a7\u5236\u6bcf\u884c\u7684\u6700\u5927\u957f\u5ea6\u4e0d\u8d85\u8fc779\u4e2a\u5b57\u7b26\uff0c\u4f46\u6709\u4e9b\u65f6\u5019\u5355\u884c\u4ee3\u7801\u8fd8\u662f\u4e0d\u53ef\u907f\u514d\u7684\u4f1a\u8d85\u8fc7\u8fd9\u4e2a\u9650\u5236\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u901a\u8fc7\u6362\u884c\u6765\u89e3\u51b3\u95ee\u9898\u4e86\u3002</li> <li>\u4e24\u79cd\u5b9e\u73b0\u6362\u884c\u7684\u65b9\u6cd5\uff1a    \u7b2c\u4e00\u79cd\uff0c\u901a\u8fc7\u5c0f\u62ec\u53f7\u8fdb\u884c\u5c01\u88c5\uff0c\u6b64\u65f6\u867d\u7136\u8de8\u884c\uff0c\u4f46\u662f\u4ecd\u5904\u4e8e\u4e00\u4e2a\u903b\u8f91\u5f15\u7528\u4e4b\u4e0b\u3002\u6bd4\u5982\u51fd\u6570\u53c2\u6570\u5217\u8868\u7684\u573a\u666f\u3001\u8fc7\u957f\u7684\u8fd0\u7b97\u8bed\u53e5\u573a\u666f    \u7b2c\u4e8c\u79cd\uff0c\u76f4\u63a5\u901a\u8fc7\u6362\u884c\u7b26()\u5b9e\u73b0</li> </ol>","tags":["Python"]},{"location":"python/pybestpractices/coding_standard/#_8","title":"\u6587\u6863\u63cf\u8ff0\u89c4\u8303","text":"<p>\u901a\u5e38\u4f7f\u7528\u4e09\u4e2a\u53cc\u5f15\u53f7\u5f00\u59cb\uff0c\u4e09\u4e2a\u53cc\u5f15\u53f7\u7ed3\u5c3e\u6765\u5b9e\u73b0\u6587\u6863\u6ce8\u91ca\uff1b</p> <ol> <li>\u9996\u5148\u7528\u4e00\u53e5\u8bdd\u7b80\u5355\u8bf4\u660e\u8fd9\u4e2a\u51fd\u6570\u662f\u505a\u4ec0\u4e48\uff0c\u7136\u540e\u8ddf\u4e00\u6bb5\u8bdd\u6765\u8be6\u7ec6\u89e3\u91ca\uff1b</li> <li>\u518d\u5f80\u540e\u5c31\u662f\u53c2\u6570\u5217\u8868\u3001\u53c2\u6570\u683c\u5f0f\u3001\u8fd4\u56de\u503c\u683c\u5f0f\u7684\u63cf\u8ff0\uff1b</li> </ol> <p>\u793a\u4f8b\uff1a</p> Python<pre><code>class SampleClass(object):\n    \"\"\"Summary of class here.\n\n    Longer class information....\n    Longer class information....\n\n    Attributes:\n        likes_spam: A boolean indicating if we like SPAM or not.\n        eggs: An integer count of the eggs we have laid.\n    \"\"\"\n\n    def __init__(self, likes_spam=False):\n        \"\"\"Inits SampleClass with blah.\"\"\"\n        self.likes_spam = likes_spam\n        self.eggs = 0\n\n    def public_method(self):\n        \"\"\"Performs operation blah.\"\"\"\n        if i &amp; (i-1) == 0:        # true iff i is a power of 2\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/conda_usage/","title":"Conda\u7684\u5b9e\u8df5\u5e94\u7528","text":"","tags":["Python"]},{"location":"python/pybestpractices/conda_usage/#1linuxcentos8conda","title":"\u5b9e\u8df51\uff1aLinux\uff08Centos8\uff09\u73af\u5883\u4fee\u6539conda\u73af\u5883\u7684\u5b89\u88c5\u76ee\u5f55","text":"<p>\u9700\u6c42\uff1a</p> <ul> <li>\u7531\u4e8e\u5f53\u524dhome\u76ee\u5f55\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u76ee\u524d\u6709\u6ca1\u6709\u6269\u5bb9\u7684\u8ba1\u5212\uff0c\u6545\u9700\u8981\u5c06conda\u73af\u5883\u8fc1\u79fb\u5230\u5176\u4ed6\u78c1\u76d8\u7a7a\u95f4\u5145\u8db3\u7684\u76ee\u5f55\u4e0b\uff1b</li> </ul> <p>\u5b9e\u65bd\u6d41\u7a0b</p> <ol> <li> <p>\u79fb\u52a8conda\uff08anaconda\uff09\u6587\u4ef6\u81f3\u65b0\u8def\u5f84\u4e0b Bash<pre><code>mv /home/workflow/conda  /data/conda\n</code></pre></p> </li> <li> <p>\u4fee\u6539conda\u7684\u73af\u5883\u53d8\u91cf</p> </li> <li> <p>\u4fee\u6539 ~/.bashrc \u4e2d\u7684conda\u73af\u5883\u53d8\u91cf Bash<pre><code># \u4fee\u6539 ~/.bashrc \u4e2d\u7684conda\u73af\u5883\u53d8\u91cf\n\nvim root/.bashrc  \u6216 vim ~/.bashrc\n\n# \u4fee\u6539\u524d\uff1a\n## ----------------------------------------------\n __conda_setup=\"$('/home/workflow/conda/bin/conda' 'shell.bash' 'hook' 2&gt; /dev/null)\"\nif [ $? -eq 0 ]; then\n     eval \"$__conda_setup\"\n else\n     if [ -f \"/home/workflow/conda/etc/profile.d/conda.sh\" ]; then\n         . \"/home/workflow/conda/etc/profile.d/conda.sh\"\n     else\n         export PATH=\"/home/workflow/conda/bin:$PATH\"\n     fi\n fi\n## ----------------------------------------------\n\n\n# \u4fee\u6539\u540e\n## ----------------------------------------------\n __conda_setup=\"$('/data/conda/bin/conda' 'shell.bash' 'hook' 2&gt; /dev/null)\"\nif [ $? -eq 0 ]; then\n     eval \"$__conda_setup\"\n else\n    if [ -f \"/data/conda/etc/profile.d/conda.sh\" ]; then\n        . \"/data/conda/etc/profile.d/conda.sh\"\n    else\n        export PATH=\"/data/conda/bin:/usr/local/gcc/bin$PATH\"\n     fi\n fi\n## ----------------------------------------------\n\n# \u4fdd\u5b58\u9000\u51fa\uff0c\u6267\u884csource\nsource ~/.bashrc \u6216 source root/.bashrc\n</code></pre></p> </li> <li> <p>\u4fee\u6539conda Bash<pre><code># \u6253\u5f00conda\u914d\u7f6e\u6587\u4ef6\nvim /data/conda/bin/conda\n\n# \u4fee\u6539conda\u6587\u4ef6\uff0c\u628aconda\u7684\u7b2c\u4e00\u884c\u7684\u8def\u5f84\u4fee\u6539\u4e3a\uff1a\n## \u4fee\u6539\u524d\n#!/home/workflow/conda/bin/python\n\n## \u4fee\u6539\u540e\n#!/data/conda/bin/python\n\n# \u6d4b\u8bd5\u662f\u5426\u4fee\u6539\u6210\u529f(\u663e\u793a\u7248\u672c\u53f7\u5373\u4e3a\u4fee\u6539\u6210\u529f)\nconda --version\n</code></pre></p> </li> <li> <p>\u4fee\u6539conda.sh Bash<pre><code># \u7f16\u8f91conda.sh\u6587\u4ef6\nvim /data/conda/etc/profile.d/conda.sh\n\n## \u4fee\u6539\u524dconda.sh \n_CONDA_EXE=\"/home/workflow/conda/bin/conda\"\n_CONDA_ROOT=\"/home/workflow/conda\" \n\n## \u4fee\u6539\u540econda.sh \n_CONDA_EXE=\"/data/conda/bin/conda\" \n_CONDA_ROOT=\"/data/conda\"\n</code></pre></p> </li> <li> <p>\u4fee\u6539activate\u548cdeactivate Bash<pre><code># \u4fee\u6539activate\nvim /data/conda/bin/activate\n\n_CONDA_ROOT=\"/data/conda\"\n\n\n# \u4fee\u6539deactivate\nvim /data/conda/bin/deactivate\n\n_CONDA_ROOT=\"/data/conda\"\n</code></pre></p> </li> <li> <p>\u4fee\u6539\u865a\u62df\u73af\u5883\u4e2d\u7684pip Bash<pre><code># \u5df2\u5b58\u5728\u7684\u73af\u5883\u4e2d\nvim /data/conda/envs/automl/bin/pip\n\n## \u4fee\u6539\u524d\uff1a\n/home/workflow/conda/envs/automl/bin/python\n\n## \u5c06\u6b64\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u8def\u5f84\u4fee\u6539\u4e3a\uff1a\ndata/conda/envs/automl/bin/python\n\n# \u6d4b\u8bd5\u662f\u5426\u6210\u529f\nconda info -e\n# logger&gt;&gt;&gt;-------------------------------------------\n# conda environments:\nbase                  *  /data/conda\nautoml                   /data/conda/envs/automl\ncf                       /data/conda/envs/cf\ndemoenv                  /data/conda/envs/demoenv\ndz2                      /data/conda/envs/dz2\ngraph_inductive          /data/conda/envs/graph_inductive\njupyter                  /data/conda/envs/jupyter\nkeras                    /data/conda/envs/keras\nkeras_spark3_rossmann     /data/conda/envs/keras_spark3_rossmann\nonly-keras               /data/conda/envs/only-keras\nonly-torch               /data/conda/envs/only-torch\ntorch                    /data/conda/envs/torch\nzjp                      /data/conda/envs/zjp\n</code></pre></p> </li> </ol>","tags":["Python"]},{"location":"python/pybestpractices/conda_usage/#2linux-centos7","title":"\u5b9e\u8df52\uff1a\u5c06\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u73af\u5883\u8fc1\u79fb\u5230\u4e00\u4e2a\u65e0\u5916\u7f51\uff08\u5185\u7f51\uff09\u73af\u5883\u4e2d\uff08Linux-centos7\uff09\u7684\u5177\u4f53\u6d41\u7a0b","text":"<ul> <li> <p>step1: \u5b89\u88c5\u6253\u5305\u5de5\u5177conda-pack Bash<pre><code>conda install -c conda-forge conda-pack\n\u6216\npip install conda-pack\n</code></pre></p> </li> <li> <p>step2: \u6267\u884c\u6253\u5305\u64cd\u4f5c Bash<pre><code># Pack environment my_env into my_env.tar.gz\nconda pack -n my_env\n\n# Pack environment my_env into out_name.tar.gz\nconda pack -n my_env -o out_name.tar.gz\n\n# Pack environment located at an explicit path into my_env.tar.gz\nconda pack -p /explicit/path/to/my_env\n</code></pre></p> </li> <li> <p>step3: \u5c06\u6253\u5305\u597d\u7684\u73af\u5883\u5305\uff0c\u8fc1\u79fb\u5230\u9884\u5b89\u88c5\u7684\u7cfb\u7edf\u4e2d Bash<pre><code># \u67e5\u770b\u5230\u5f53\u524d\u7cfb\u7edf\u7684conda\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\uff08\u4e3b\u8981\u770bbase\u8def\u5f84\u5c31\u597d\uff09\nconda info -e\n\n# \u5728base\u7684\u540c\u7ea7\u76ee\u5f55\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff08\u6587\u4ef6\u5939\u540d\u5373\u4e3a\u73af\u5883\u540d\uff09\nmkdir -p /data/software/anaconda/envs/demoenv\ntar -xzf my_env.tar.gz -C /data/software/anaconda/envs/demoenv\n\n# \u67e5\u770b\u662f\u5426\u6210\u529f\nconda env list\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/conda_usage/#3-condaarm","title":"\u5b9e\u8df53\uff1a conda\u5728ARM\u73af\u5883\u4e2d\u7684\u5b89\u88c5","text":"<p>\u53c2\u8003\u5730\u5740\uff1ahttps://bbs.huaweicloud.com/forum/thread-40622-1-1.html</p> <p>\u5728\u534e\u4e3a\u4e91\u4e0a\u4f7f\u7528\u5e38\u89c4conda install xxx\u6216 pip install xxx,\u4f1a\u51fa\u73b0\u65e0\u6cd5\u5b89\u88c5\u5bf9\u5e94\u5305 \u6240\u4ee5\u4f7f\u7528conda-forge\u89e3\u51b3\u65e0\u6cd5install\u7684\u95ee\u9898</p> <ul> <li>\u4e3e\u4f8bconda\u547d\u4ee4\u5b89\u88c5numpy</li> <li> <p>\u641c\u7d22\u534e\u4e3a\u4e91\u652f\u6301\u7684\u5bf9\u5e94\u7248\u672c Bash<pre><code>conda search numpy -c conda-forge\n</code></pre></p> </li> <li> <p>\u5f97\u5230\u534e\u4e3a\u4e91\u6240\u6709\u652f\u6301\u7684numpy\u7248\u672c </p> </li> <li>\u9009\u62e9\u60f3\u8981\u5b89\u88c5\u7684\u7248\u672c\u5b89\u88c5 Bash<pre><code>conda install numpy=1.19.5 -c conda-forge\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/docker_build_python_image/","title":"Docker\u6784\u5efaPython\u955c\u50cf\u5b9e\u8df5\u6307\u5357","text":"","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#_1","title":"\u5b9e\u8df5\u6307\u5357","text":"","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#_2","title":"\u63a8\u8350\u8bbe\u7f6e\u7684\u73af\u5883\u53d8\u91cf","text":"Docker<pre><code># \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf \n\n# \u5efa\u8bae\u6784\u5efa Docker \u955c\u50cf\u65f6\u4e00\u76f4\u4e3a\u00a0`1`, \u9632\u6b62 python \u5c06 pyc \u6587\u4ef6\u5199\u5165\u786c\u76d8\nENV PYTHONDONTWRITEBYTECODE 1\n# \u5efa\u8bae\u6784\u5efa Docker \u955c\u50cf\u65f6\u4e00\u76f4\u4e3a\u00a0`1`, \u9632\u6b62 python \u7f13\u51b2 (buffering) stdout \u548c stderr, \u4ee5\u4fbf\u66f4\u5bb9\u6613\u5730\u8fdb\u884c\u5bb9\u5668\u65e5\u5fd7\u8bb0\u5f55\nENV PYTHONUNBUFFERED 1\n</code></pre> <ul> <li>\u4e0d\u5efa\u8bae\u4f7f\u7528 ENV DEBUG 0 \u73af\u5883\u53d8\u91cf\uff0c\u6ca1\u5fc5\u8981\u3002</li> </ul>","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#root","title":"\u4f7f\u7528\u975eroot\u7528\u6237\u8fd0\u884c\u5bb9\u5668\u8fdb\u7a0b","text":"<ul> <li>\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u63a8\u8350\u8fd0\u884c Python \u7a0b\u5e8f\u524d\uff0c\u521b\u5efa \u975e root \u7528\u6237\u5e76\u5207\u6362\u5230\u8be5\u7528\u6237\u3002 Docker<pre><code># \u521b\u5efa\u4e00\u4e2a\u5177\u6709\u660e\u786e UID \u7684\u975e root \u7528\u6237\uff0c\u5e76\u589e\u52a0\u8bbf\u95ee /app \u6587\u4ef6\u5939\u7684\u6743\u9650\u3002\nRUN adduser -u 5678 --disabled-password --gecos \"\" appuser &amp;&amp; chown -R appuser /appUSER appuser\n</code></pre></li> </ul>","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#dockerignore","title":"\u4f7f\u7528\u00a0<code>.dockerignore</code>\u00a0\u6392\u9664\u65e0\u5173\u6587\u4ef6","text":"Docker<pre><code>**/__pycache__\n**/*venv\n**/.classpath\n**/.dockerignore\n**/.env\n**/.git\n**/.gitignore\n**/.project\n**/.settings\n**/.toolstarget\n**/.vs\n**/.vscode\n**/*.*proj.user\n**/*.dbmdl\n**/*.jfm\n**/bin\n**/charts\n**/docker-compose*\n**/compose*\n**/Dockerfile*\n**/node_modules\n**/npm-debug.log\n**/obj\n**/secrets.dev.yaml\n**/values.dev.yaml\n*.db\n.python-version\nLICENSE\nREADME.md\n</code></pre>","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#alpine-python","title":"\u4e0d\u5efa\u8bae\u4f7f\u7528 Alpine \u4f5c\u4e3a Python \u7684\u57fa\u7840\u955c\u50cf","text":"<ul> <li>\u5927\u591a\u6570 Linux \u53d1\u884c\u7248\u4f7f\u7528 GNU \u7248\u672c\uff08glibc\uff09\u7684\u6807\u51c6 C \u5e93\uff0c\u51e0\u4e4e\u6bcf\u4e2a C \u7a0b\u5e8f\u90fd\u9700\u8981\u8fd9\u4e2a\u5e93\uff0c\u5305\u62ec Python\u3002\u4f46\u662f Alpine Linux \u4f7f\u7528 musl, Alpine \u7981\u7528\u4e86 Linux wheel \u652f\u6301\u3002</li> <li>\u7f3a\u5c11\u5927\u91cf\u4f9d\u8d56</li> <li>CPython \u8bed\u8a00\u8fd0\u884c\u65f6\u7684\u76f8\u5173\u4f9d\u8d56</li> <li>openssl \u76f8\u5173\u4f9d\u8d56</li> <li>libffi \u76f8\u5173\u4f9d\u8d56</li> <li>gcc \u76f8\u5173\u4f9d\u8d56</li> <li>\u6570\u636e\u5e93\u9a71\u52a8\u76f8\u5173\u4f9d\u8d56</li> <li>pip \u76f8\u5173\u4f9d\u8d56</li> <li>\u6784\u5efa\u53ef\u80fd\u66f4\u8017\u65f6</li> <li>Alpine Linux \u4f7f\u7528 musl\uff0c\u4e00\u4e9b\u4e8c\u8fdb\u5236 wheel \u662f\u9488\u5bf9 glibc \u7f16\u8bd1\u7684\uff0c\u4f46\u662f Alpine \u7981\u7528\u4e86 Linux wheel \u652f\u6301\u3002\u73b0\u5728\u5927\u591a\u6570 Python \u5305\u90fd\u5305\u62ec PyPI \u4e0a\u7684\u4e8c\u8fdb\u5236 wheel\uff0c\u5927\u5927\u52a0\u5feb\u4e86\u5b89\u88c5\u65f6\u95f4\u3002\u4f46\u662f\u5982\u679c\u4f60\u4f7f\u7528 Alpine Linux\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u7f16\u8bd1\u4f60\u4f7f\u7528\u7684\u6bcf\u4e2a Python \u5305\u4e2d\u7684\u6240\u6709 C \u4ee3\u7801\u3002</li> <li>\u57fa\u4e8e Alpine \u6784\u5efa\u7684 Python \u955c\u50cf\u53cd\u800c\u53ef\u80fd\u66f4\u5927 Docker<pre><code># \u56e0\u4e3a\u7f3a\u5c11\u4f9d\u8d56\uff0c\u6240\u4ee5\u5728pip\u5b89\u88c5\u524d\u9700\u8981\u5b89\u88c5\u5168\u4f9d\u8d56\u3002\nRUN set -eux \\    \n&amp;&amp; apk add --no-cache --virtual .build-deps build-base \\    openssl-dev libffi-dev gcc musl-dev python3-dev \\    \n&amp;&amp; pip install --upgrade pip setuptools wheel \\    \n&amp;&amp; pip install --upgrade -r /app/requirements.txt \\    \n&amp;&amp; rm -rf /root/.cache/pip\n</code></pre></li> </ul>","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#python-slim","title":"\u5efa\u8bae\u4f7f\u7528\u5b98\u65b9\u7684 python slim \u955c\u50cf\u4f5c\u4e3a\u57fa\u7840\u955c\u50cf","text":"<ul> <li>\u955c\u50cf\u5e93\u662f\u8fd9\u4e2a\uff1ahttps://hub.docker.com/_/python\uff0c \u5e76\u4e14\u4f7f\u7528 python:-slim \u4f5c\u4e3a\u57fa\u7840\u955c\u50cf\uff0c\u80fd\u7528 python:-slim-bullseye \u4f5c\u4e3a\u57fa\u7840\u955c\u50cf\u66f4\u597d\uff08\u56e0\u4e3a\u66f4\u65b0\uff0c\u76f8\u5bf9\u5c31\u66f4\u5b89\u5168\u4e00\u4e9b\uff09. <li>\u8fd9\u4e2a\u955c\u50cf\u4e0d\u5305\u542b\u9ed8\u8ba4\u6807\u7b7e\u4e2d\u7684\u5e38\u7528\u5305\uff0c\u53ea\u5305\u542b\u8fd0\u884c python \u6240\u9700\u7684\u6700\u5c0f\u5305\u3002\u8fd9\u4e2a\u955c\u50cf\u662f\u57fa\u4e8e Debian \u7684\u3002</li> <li>\u4f7f\u7528\u5b98\u65b9 python slim \u7684\u7406\u7531\u8fd8\u5305\u62ec\uff1a</li> <li>\u7a33\u5b9a\u6027</li> <li>\u5b89\u5168\u5347\u7ea7\u66f4\u53ca\u65f6</li> <li>\u4f9d\u8d56\u66f4\u65b0\u66f4\u53ca\u65f6</li> <li>\u4f9d\u8d56\u66f4\u5168</li> <li>Python \u7248\u672c\u5347\u7ea7\u66f4\u53ca\u65f6</li> <li>\u955c\u50cf\u66f4\u5c0f</li>","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#python","title":"\u4e00\u822c\u60c5\u51b5\u4e0b\uff0cPython \u955c\u50cf\u6784\u5efa\u4e0d\u9700\u8981\u4f7f\u7528\"\u591a\u9636\u6bb5\u6784\u5efa\"","text":"<ul> <li>Python \u6ca1\u6709\u50cf Golang \u4e00\u6837\uff0c\u53ef\u4ee5\u628a\u6240\u6709\u4f9d\u8d56\u6253\u6210\u4e00\u4e2a\u5355\u4e00\u7684\u4e8c\u8fdb\u5236\u5305</li> <li>Python \u4e5f\u6ca1\u6709\u50cf Java \u4e00\u6837\uff0c\u53ef\u4ee5\u5728 JDK \u4e0a\u6784\u5efa\uff0c\u5728 JRE \u4e0a\u8fd0\u884c</li> <li>Python \u590d\u6742\u800c\u6563\u843d\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5728\"\u591a\u9636\u6bb5\u6784\u5efa\"\u65f6\u4f1a\u589e\u52a0\u590d\u6742\u5ea6</li> </ul> <p>\u5982\u679c\u6709\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\"\u591a\u9636\u6bb5\u6784\u5efa\"\u538b\u7f29\u955c\u50cf\u4f53\u79ef\uff1a</p> <ul> <li>\u6784\u5efa\u9636\u6bb5\u9700\u8981\u5b89\u88c5\u7f16\u8bd1\u5668</li> <li>Python \u9879\u76ee\u590d\u6742\uff0c\u7528\u5230\u4e86\u5176\u4ed6\u8bed\u8a00\u4ee3\u7801\uff08\u5982 C/C++/Rust)</li> </ul>","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#dockerfile-pip","title":"Dockerfile \u4e2d pip \u7f16\u5199\u5efa\u8bae","text":"<ul> <li>\u4f7f\u7528 pip \u5b89\u88c5\u4f9d\u8d56\u65f6\uff0c\u53ef\u4ee5\u6dfb\u52a0\u00a0<code>--no-cache-dir</code>\u00a0\u51cf\u5c11\u955c\u50cf\u4f53\u79ef\uff1a Docker<pre><code># \u5b89\u88c5 pip \u4f9d\u8d56\nCOPY requirements.txt .\nRUN python -m pip install --no-cache-dir --upgrade -r requirements.txt\n</code></pre></li> </ul>","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#dockerfile","title":"Dockerfile \u7f16\u5199\u53c2\u8003","text":"","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#slim","title":"slim\u7248\u672c","text":"Docker<pre><code>FROM python:3.10-slim\n\nLABEL maintainer=\"ssw\"\n\nEXPOSE 8000\n\n# Keeps Python from generating .pyc files in the container\nENV PYTHONDONTWRITEBYTECODE=1\n\n# Turns off buffering for easier container logging\nENV PYTHONUNBUFFERED=1\n\n# Install pip requirements\nCOPY requirements.txt .\nRUN python -m pip install --no-cache-dir --upgrade -r requirements.txt\n\nWORKDIR /app\nCOPY . /app\n\n# Creates a non-root user with an explicit UID and adds permission to access the /app folder\n# For more info, please refer to https://aka.ms/vscode-docker-python-configure-containers\nRUN adduser -u 5678 --disabled-password --gecos \"\" appuser &amp;&amp; chown -R appuser /app\nUSER appuser\n\n# During debugging, this entry point will be overridden. For more information, please refer to https://aka.ms/vscode-docker-python-debug\nCMD [\"uvicorn\", \"shortener_app.main:app\", \"--host\", \"0.0.0.0\"]\n</code></pre>","tags":["Python","Docker"]},{"location":"python/pybestpractices/docker_build_python_image/#alpine","title":"Alpine\u7248\u672c(\u4e0d\u5efa\u8bae)","text":"Docker<pre><code>FROM python:3.10-alpine\n\nLABEL maintainer=\"ssw\"\n\nEXPOSE 8000\n\n# Keeps Python from generating .pyc files in the container\nENV PYTHONDONTWRITEBYTECODE=1\n\n# Turns off buffering for easier container logging\nENV PYTHONUNBUFFERED=1\n\n# Install pip requirements\nCOPY requirements.txt .\nRUN set -eux \\\n    &amp;&amp; apk add --no-cache --virtual .build-deps build-base \\\n    openssl-dev libffi-dev gcc musl-dev python3-dev \\\n    &amp;&amp; pip install --upgrade pip setuptools wheel \\\n    &amp;&amp; pip install --upgrade -r requirements.txt \\\n    &amp;&amp; rm -rf /root/.cache/pip\n\nWORKDIR /app\nCOPY . /app\n\n# Creates a non-root user with an explicit UID and adds permission to access the /app folder\n# For more info, please refer to https://aka.ms/vscode-docker-python-configure-containers\nRUN adduser -u 5678 --disabled-password --gecos \"\" appuser &amp;&amp; chown -R appuser /app\nUSER appuser\n\n# During debugging, this entry point will be overridden. For more information, please refer to https://aka.ms/vscode-docker-python-debug\nCMD [\"uvicorn\", \"shortener_app.main:app\", \"--host\", \"0.0.0.0\"]\n</code></pre>","tags":["Python","Docker"]},{"location":"python/pybestpractices/env_package_selection/","title":"Python\u7248\u672c\u53ca\u5305\u7ba1\u7406\u5de5\u5177\u9009\u578b","text":"","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#python","title":"Python\u591a\u7248\u672c\u7ba1\u7406\u65b9\u6848","text":"<p>\u5728\u65e5\u5e38\u5f00\u53d1\u8fc7\u7a0b\uff0c\u53ef\u80fd\u4f1a\u6709\u591a\u4e2a\u4e0d\u540cPython\u7248\u672c\u7684\u5171\u5b58\u7684\u9700\u6c42\uff0c\u4ee5\u4e0b\u4ecb\u7ecd\u51e0\u79cd\u5173\u4e8epython\u591a\u7248\u672c\u5171\u5b58\u7684\u89e3\u51b3\u65b9\u6848:</p>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#_1","title":"\u65b9\u6848\u4e00\uff1a\u539f\u751f\u5b89\u88c5\u65b9\u6cd5","text":"<ul> <li>\u4ecePython\u5b98\u7f51\u4e0b\u8f7d\u9700\u8981\u5b89\u88c5\u7684Python\u7248\u672c\uff0c\u5728\u4e0d\u540c\u7684\u76ee\u5f55\uff08\u5efa\u8bae\uff1a\u76ee\u5f55\u540d\u4f7f\u7528\u548c\u7248\u672c\u5bf9\u5e94\u7684\u540d\u79f0\uff09\u4e2d\u5b89\u88c5\u4e0b\u8f7d\u597d\u7684\u5b89\u88c5\u5305\uff0c\u5b89\u88c5\u540e\uff0c\u5728\u73af\u5883\u53d8\u91cf\u4e2d\u8bbe\u7f6e\u4e00\u4e2a\u5e38\u7528\u7684Python\u7248\u672c\u4f5c\u4e3a\u9ed8\u8ba4\u7248\u672c\uff0c\u540e\u7eed\u5982\u679c\u9700\u8981\u4fee\u6539python\u7248\u672c\uff0c\u53ea\u9700\u8981\u4fee\u6539\u73af\u5883\u53d8\u91cf\u4e2dpython\u89e3\u91ca\u5668\u8def\u5f84\u5373\u53ef\u3002</li> <li>\u8be6\u7ec6\u7684\u4ecb\u7ecd\u548c\u5b89\u88c5\u9605\u8bfb\uff1a\u5b98\u65b9\u6587\u6863</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#conda","title":"\u65b9\u6848\u4e8c\uff1a\u4f7f\u7528 conda","text":"<ul> <li>\u5b89\u88c5\u597dconda\u540e\uff0c\u901a\u8fc7\u521b\u5efa\u4e0d\u540cpython\u7248\u672c\u7684\u865a\u62df\u73af\u5883\u8fdb\u884c\u591a\u7248\u672c\u7684\u7ba1\u7406\uff0c\u5176\u4e2dconda\u5206\u4e3a\u5b8c\u6574\u7248\uff08Anaconda\uff09\u548c\u7cbe\u7b80\u7248\uff08Miniconda\uff09\uff0c\u6839\u636e\u9700\u8981\u9009\u62e9\u5408\u9002\u7684\u7248\u672c\u3002</li> <li>Anaconda:\u3010\u91cd\u3011\u5927\u800c\u5168\uff0c\u9664\u4e86\u5b89\u88c5 Conda \u5185\u6838\uff0c\u8fd8\u5b89\u88c5\u4e86\u5b8c\u6574\u7684 Anaconda \u7684\u53d1\u884c\u5305\uff0c\u5373\u5185\u7f6e\u96c6\u6210\u4e86\u5f88\u591a\u5de5\u5177\u5305\uff0c\u5305\u62ecpython\u7684\u591a\u4e2a\u7248\u672c\uff0c\u5e38\u7528\u673a\u5668\u5b66\u4e60\u7b49\u79d1\u5b66\u5de5\u5177\u5305\uff1b\u5b98\u65b9\u4e0b\u8f7d\uff0c\u6e05\u534e\u6e90\u4e0b\u8f7d\uff1b</li> <li>Miniconda:\u3010\u8f7b\u3011\u5c0f\u800c\u7f8e\uff0c\u53ea\u5b89\u88c5\u4e86 Conda \u5185\u6838\uff0c\u5373\u5185\u7f6e\u4e86\u591a\u4e2apython\u7248\u672c\u548c\u5fc5\u8981\u7684\u5de5\u5177\u5305\uff1b\u5b98\u65b9\u4e0b\u8f7d\u3001\u6e05\u534e\u6e90\u4e0b\u8f7d\uff1b</li> </ul> <p>\u9009\u578b\u5efa\u8bae\uff1a</p> <ul> <li> <p>\u5bf9\u4e8e\u65e5\u5e38\u5728\u4e00\u4e2a\u73af\u5883\u6709\u591aPython\u7248\u672c\u7684\u5f00\u53d1\u9700\u6c42\u7684\uff0c\u4e14\u4e0d\u60f3\u5728\u5f00\u53d1\u73af\u5883\u4e2d\u5b89\u88c5\u591a\u4e2a\u539f\u751fPython,Anaconda\u548cMiniconda\u90fd\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u9009\u62e9\uff1b</p> </li> <li> <p>\u5bf9\u4e8e\u4f7f\u7528Python\u8fdb\u884c\u6570\u636e\u5206\u6790\u3001\u673a\u5668\u5b66\u4e60\u53caAI\u65b9\u5411\u7684\u5f00\u53d1\u8005\uff0cAnaconda\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u9009\u62e9\uff1b</p> </li> <li> <p>\u5bf9\u4e8ePython web\u5f00\u53d1\u6765\u8bf4\uff0cMiniconda\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u9002\u5408web\u5f00\u53d1\u7684\u73af\u5883\u5305\u7ba1\u7406\u5de5\u5177\u7684\u9009\u62e9\u662f\u5f88\u591a\u7684\u3002</p> </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#pyenv","title":"\u65b9\u6848\u4e09\uff1a\u4f7f\u7528 pyenv","text":"<ul> <li>\u5b89\u88c5pyenv\u540e\uff0c\u901a\u8fc7<code>pyenv install 3.x.x</code> \u7684\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5\uff0c\u901a\u8fc7<code>pyenv global 3.x.x</code>\u8bbe\u7f6e\u5168\u5c40python\u7248\u672c\u65b9\u5f0f\uff0c\u8be6\u7ec6\u4f7f\u7528\u6d41\u7a0b\u53c2\u8003\u6587\u6863</li> <li>\u5728UNIX/MacO\u7cfb\u7edf\u4e2d,\u4f7f\u7528pyenv, \u5728window\u7cfb\u7edf\u4e2d\uff0c\u4f7f\u7528<code>pyenv-win</code></li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#pdm","title":"\u65b9\u6848\u56db\uff1a\u4f7f\u7528 PDM","text":"<ul> <li>\u5b89\u88c5pdm\u540e\uff0c\u901a\u8fc7<code>pdm python install 3.x.x</code>\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5\uff0c\u901a\u8fc7<code>pdm python install --list</code>\u67e5\u770b\u53ef\u5b89\u88c5\u7684\u7248\u672c\u6e05\u5355</li> <li>\u5982\u679c\u53ea\u9700\u8981python\u89e3\u91ca\u5668\uff0c\u4e14\u5df2\u7ecf\u5b89\u88c5\u4e86pdm\u5de5\u5177\uff0c\u63a8\u8350\u4f7f\u7528\u6b64\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#pythonz","title":"\u65b9\u6848\u4e94\uff1a\u4f7f\u7528 pythonz","text":"<ul> <li>\u5b89\u88c5\u597dpythonz\u540e\uff0c\u8be6\u7ec6\u4f7f\u7528\u53c2\u8003\u5b98\u65b9\u6587\u6863</li> <li>\u6b64\u5de5\u5177\u5bf9\u4e8e\u6709\u5b89\u88c5 CPython, Stackless, PyPy and Jython\u7684\u9700\u6c42\u65f6\u6bd4\u8f83\u65b9\u4fbf\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#_2","title":"\u4f9d\u8d56\u5305\u7ba1\u7406\u65b9\u6848","text":"","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#pdm_1","title":"\u65b9\u6848\u4e00\uff1aPDM\uff1a\u2606\u2606\u2606\u2606\u2606","text":"<p>\u7b80\u8ff0\uff1a</p> <ul> <li>\u6b64\u5de5\u5177\u662f\u4e00\u6b3e\u8de8\u5e73\u53f0\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u8981\u6c42python3.7+,\u4e3b\u8981\u7684\u529f\u80fd\u548c\u4e0a\u8ff0\u7684Poetry\u7c7b\u4f3c\uff0c\u4f46\u5b83\u6448\u5f03\u4e86\u865a\u62df\u73af\u5883\uff0c\u76f4\u63a5\u5c06\u5305\u6587\u4ef6\u5939\u653e\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u6216\u653e\u5230\u7edf\u4e00\u7684\u5730\u65b9\u8fdb\u884c\u96c6\u4e2d\u7ba1\u7406\uff0c\u53e6\u5916\u5176\u7531\u4e00\u4f4d\u56fd\u5185\u7684\u5f00\u53d1\u8005\u5728\u4e1a\u4f59\u65f6\u95f4\u5f00\u53d1\u800c\u6210\uff0c\u4e3b\u8981\u7279\u70b9\u6709\uff1a</li> <li>\u652f\u6301\u6700\u65b0PEP\u6807\u51c6\uff08\u517c\u5bb9 PEP 517 \u7684\u6784\u5efa\u540e\u7aef\uff0c\u7528\u4e8e\u6784\u5efa\u53d1\u5e03\u5305\u3001PEP 621 \u5143\u6570\u636e\u683c\u5f0f\uff09</li> <li>\u50cfpnpm\u91c7\u7528\u4e86\u53bb\u4e2d\u5fc3\u5316\u5b89\u88c5\u7f13\u5b58\uff0c\u8282\u7701\u78c1\u76d8\u7a7a\u95f4</li> <li>\u7528\u6237\u811a\u672c\u529f\u80fd\u6bd4\u8f83\u5f3a\u5927\uff1b</li> <li>\u4f7f\u7528pyproject.toml\u548clockfile\u7ba1\u7406\u5305\u7684\u7248\u672c\u3002</li> </ul> <p>\u9009\u578b\u8bf4\u660e\uff1a</p> <ul> <li>\u5728\u77e5\u9053\u6b64\u5de5\u5177\u540e\uff0c\u9010\u6e10\u653e\u5f03\u4e86poetry\uff0c\u867d\u7136\u5f53\u524dstar\u6570\u521a\u8fbe\u52305k,\u4f46\u4e2a\u4eba\u770b\u597d\u6b64\u5de5\u5177\u7684\u540e\u7eed\u53d1\u5c55\u3002</li> <li>\u81ea\u5b9a\u4e49\u811a\u672c\u4f7f\u7528\u4f53\u9a8c\u975e\u5e38\u597d\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#poetry","title":"\u65b9\u6cd5\u4e8c\uff1aPoetry\uff1a\u2606\u2606\u2606\u2606","text":"<p>\u7b80\u8ff0\uff1a</p> <ul> <li>\u6b64\u5de5\u5177\u662f\u4e00\u4e2a\u8de8\u5e73\u53f0\uff08Windows, macOS, and Linux\uff09\u3001\u5f00\u6e90\u7684\u7b2c\u5305\u7ba1\u7406\u5de5\u5177\u5e73\u53f0\uff0c\u672c\u8d28\u8fd8\u662f\u9700\u8981\u521b\u5efa\u865a\u62df\u73af\u5883\u8fdb\u884c\u5305\u7ba1\u7406\uff0c\u5b98\u65b9\u63cf\u8ff0\uff1aPython packaging and dependency management made easy\uff1b\u6700\u65b0\u7248\u672c\u9700\u8981\u5f00\u53d1\u73af\u5883\u7684python3.8+\uff0c\u5176\u4e3b\u8981\u7279\u70b9\u6709\uff1a</li> <li>\u652f\u6301\u591a\u79cd\u5b89\u88c5\u65b9\u5f0f\u5982\uff1a\u5b98\u65b9\u5305\u5b89\u88c5\u3001pipx\u5b89\u88c5\u3001pip\u5b89\u88c5\u7b49</li> <li>\u53d6\u4ee3\u4e86 setup.py\u3001requirements.txt\u3001setup.cfg\u7b49\uff0c\u4ec5\u901a\u8fc7pyproject.toml\u6587\u4ef6\u5c31\u80fd\u8f7b\u677e\u673a\u8fdb\u884c\u5305\u7684\u7248\u672c\u7248\u672c\u548c\u8fc1\u79fb\u5de5\u4f5c</li> <li>\u53ef\u4ee5\u5bf9\u5305\u7684\u5b89\u88c5\u573a\u666f\u8fdb\u884c\u5206\u7c7b\u7ba1\u7406\u5982\u5f00\u53d1\uff08\u9759\u6001\u68c0\u67e5\u76f8\u5173\u5305\uff09\u3001\u6d4b\u8bd5\uff08pytest\uff09\u3001\u751f\u4ea7\u73af\u5883\u5305\u7684\u5206\u7ec4</li> <li>\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u652f\u6301\u81ea\u5b9a\u4e49Scripts,\u5982\uff1apoetry run python xxx;</li> </ul> <p>\u9009\u578b\u8bf4\u660e\uff1a</p> <ul> <li>\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u6b64\u5de5\u5177\u88ab\u8d8a\u6765\u8d8a\u591a\u7684\u9879\u76ee\u5f15\u5165\u4f7f\u7528\uff0c\u76ee\u524dstar\u8d8526k;</li> <li>\u4e2a\u4eba\u5728\u8fd1\u4e24\u5e74\uff08PDM\u53d1\u73b0\u4e4b\u524d\uff09\u7684web\u5f00\u53d1\u4e2d\u5747\u7531\u5728\u4f7f\u7528\uff0c\u5728\u4f53\u9a8c\u4e0a\u76f8\u5f53\u4e0d\u9519\uff0c\u7f3a\u70b9\u662f\u5982\u679c\u4e0d\u914d\u7f6e\u56fd\u5185\u6e90\uff0c\u73b0\u5728\u5b89\u88c5\u6548\u7387\u662f\u6781\u4f4e\u7684\uff0c\u4e14\u5bb9\u6613\u5b89\u88c5\u51fa\u9519\u3002</li> <li>\u7528\u597d\u81ea\u5b9a\u4e49\u811a\u672c\u7684\u529f\u80fd\u53ef\u5927\u5927\u63d0\u5347\u6548\u7387\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#conda_1","title":"\u65b9\u6848\u4e09\uff1aConda\uff1a\u2606\u2606\u2606","text":"<ul> <li>Conda\u662f\u4e00\u4e2a\u8de8\u5e73\u53f0\uff08Windows, macOS, and Linux\uff09\u7684\u5f00\u6e90\u7684\u73af\u5883\u53ca\u5305\u7ba1\u7406\u5e73\u53f0\uff0c\u5b98\u65b9\u79f0\u4e0d\u4ec5\u9650\u4e8e\u7ba1\u7406Python\u7248\u672c\u548c\u73af\u5883\u5305\u7684\u7ba1\u7406\uff0c\u8fd8\u53ef\u4ee5\u7ba1\u7406 R, Ruby, Lua, Scala, Java, JavaScript, C/ C++, Fortran\u7b49\u4e3b\u6d41\u8bed\u8a00\uff0c\u4f46\u636e\u7b14\u8005\u4e86\u89e3\u5230\uff0c\u9664\u4e86python\u5f00\u53d1\u8005\u5708\u5e94\u7528\u5e7f\u6cdb\u5916\uff0c\u5176\u4ed6\u8bed\u8a00\u7684\u5f00\u53d1\u8005\u51e0\u4e4e\u5f88\u96be\u770b\u5230\u4f7f\u7528\u7684\u3002</li> <li>\u7279\u70b9\u662f\uff1a\u53ef\u5373\u65f6\u6309\u9700\u521b\u5efa\u5bf9\u5e94python\u7248\u672c\u7684\u865a\u62df\u73af\u5883\uff1bConda\u5206\u4e3a\u4e24\u4e2a\u7248\u672c\uff1aAnaconda\u3001Miniconda;\u8fd9\u4e24\u4e2a\u5de5\u5177\u7684\u5b89\u88c5\u65b9\u5f0f\u90fd\u662f\u6bd4\u8f83\u5bb9\u6613\uff0c\u4e14\u6613\u4e8e\u8fc1\u79fb\uff1b</li> <li>\u76f8\u6bd4\u8f83\u4e8e\u540e\u9762\u7684\u5de5\u5177\u800c\u8a00\uff0c\u5360\u7528\u7a7a\u95f4\u6bd4\u8f83\u5927\uff0c\u76f8\u5bf9\u6bd4\u8f83\u91cd\u3002</li> <li>\u5728conda\u73af\u5883\u4e2d\uff0c\u65e2\u652f\u6301<code>conda add &lt;package&gt;</code>\u4e5f\u652f\u6301 <code>pip install &lt;package&gt;</code>\u65b9\u5f0f\u8fdb\u884c\u4f9d\u8d56\u5305\u5b89\u88c5</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#pipenv","title":"\u65b9\u6848\u56db\uff1aPipenv\uff1a\u2606\u2606\u2606","text":"<p>\u7b80\u8ff0\uff1a</p> <ul> <li>\u6b64\u5de5\u5177\u662f\u4e00\u4e2a\u8de8\u5e73\u53f0\uff08Windows, macOS, and Linux\uff09\u7684\u5f00\u6e90\u7684python\u865a\u62df\u73af\u5883\u7ba1\u7406\u5de5\u5177\uff0c\u4f9d\u8d56\u4e8e\u5f00\u53d1\u73af\u5883\u4e2d\u539f\u751f\u5b89\u88c5\u7684Python\u7248\u672c\uff08\u76ee\u524d\u5b98\u65b9\u4ec5\u652f\u6301Python3.7+\uff09\u5176\u4e3b\u8981\u7279\u70b9\u6709\uff1a</li> <li>\u4f7f\u7528Pipfile\u548cPipflile.lock\u6587\u4ef6\u6765\u7ef4\u62a4\u73af\u5883\u4e2d\u7684\u5305\u7248\u672c</li> <li>\u652f\u6301pipenv CLI\u64cd\u4f5c</li> </ul> <p>\u9009\u578b\u8bf4\u660e\uff1a</p> <ul> <li>\u4e2a\u4eba\u5b89\u88c5\u5b98\u65b9\u6587\u6863\u5b9e\u64cd\u8fc7\u4e00\u904d\uff0c\u5e76\u672a\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u5c06\u5176\u5f15\u5165\u3002</li> <li>\u5728\u5b9e\u64cd\u8fc7\u7a0b\u4e2d\u7ed9\u4eba\u7684\u4f53\u9a8c\u8fd8\u662f\u4e0d\u9519\u7684\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#venv","title":"\u65b9\u6848\u4e94\uff1avenv\uff1a\u2606\u2606\u2606","text":"<p>\u7b80\u8ff0\uff1a</p> <ul> <li>Python\u539f\u751f\u5b89\u88c5\u5305\u4e2d\u5185\u7f6e\u7684\u865a\u62df\u73af\u5883\uff0c\u6bcf\u4e2a\u865a\u62df\u73af\u5883\u5c06\u62e5\u6709\u5b83\u4eec\u81ea\u5df1\u72ec\u7acb\u7684\u5b89\u88c5\u5728\u5176 site,</li> <li>\u4f7f\u7528\u8d77\u6765\u6bd4\u8f83\u7b80\u5355</li> </ul> <p>\u9009\u578b\u8bf4\u660e\uff1a</p> <ul> <li>\u4e2a\u4eba\u8ba4\u4e3a\u5728\u4f7f\u7528docker\u6784\u5efa\u9879\u76ee\u662f\u91c7\u7528\u6539\u5de5\u5177\u8fdb\u884c\u5305\u7ba1\u7406\u4f53\u9a8c\u6bd4\u8f83\u597d\uff0c\u8f7b\u91cf\u7b80\u5355\u6613\u7528\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#virtualenv","title":"\u65b9\u6848\u516d\uff1aVirtualenv\uff1a\u2606\u2606","text":"<p>\u7b80\u8ff0\uff1a</p> <ul> <li>\u4f9d\u8d56\u4e8e\u5f00\u53d1\u73af\u5883\u4e2d\u7684\u539f\u751fPython\uff0c\u4ec5\u80fd\u521b\u5efa\u76f8\u540cPython\u7248\u672c\u7684\u4e0d\u540c\u865a\u62df\u73af\u5883\uff0c\u5728\u65e9\u671f\u7684web\u5f00\u53d1\u4e2d\u4f7f\u7528\u6bd4\u8f83\u591a\u3002</li> <li>\u8ddf\u8be6\u7ec6\u7684\u4ecb\u7ecd\u8bf7\u9605\u8bfb\u5b98\u65b9\u6587\u6863</li> </ul> <p>\u9009\u578b\u8bf4\u660e\uff1a</p> <ul> <li>\u5728\u521a\u4ece\u4e8bPython\u76f8\u5173\u5b66\u4e60\u548c\u5de5\u4f5c\u4f7f\u7528\u7684\u6bd4\u8f83\u591a\uff0c\u8fd1\u4e9b\u5e74\u51e0\u4e4e\u4e0d\u5728\u4f7f\u7528\uff0c\u56e0\u4e3a\u53c8\u4e0a\u8ff0\u66f4\u597d\u7684\u5de5\u5177\u53d6\u4ee3\u4e86\u5b83\uff0c\u4e0d\u8fc7\u6709\u5174\u8da3\u7684\u5c0f\u4f19\u4f34\u53ef\u4ee5\u4f53\u9a8c\u4f53\u9a8c\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#virtualenvwrapper","title":"\u65b9\u6848\u4e03\uff1avirtualenvwrapper\uff1a\u2606\u2606","text":"<p>\u7b80\u8ff0\uff1a</p> <ul> <li>\u4f9d\u8d56\u4e8e\u4e0a\u8ff0\u7684Virtualenv,\u5176\u672c\u8d28\u662f\u4e00\u4e2avirtualenv\u7684\u811a\u672c\u5de5\u5177\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u521b\u5efa\u548c\u5220\u9664\u865a\u62df\u73af\u5883\u3002</li> </ul> <p>\u9009\u578b\u8bf4\u660e\uff1a</p> <ul> <li>\u5728\u4e2a\u4eba\u65e9\u8d77\u4f7f\u7528virtualenv,\u57fa\u672c\u90fd\u662f\u642d\u8f7d\u4e86virtualenvwrapper\u5de5\u5177\u6765\u8fdb\u884c\u76f8\u5173\u5f00\u53d1\u5de5\u4f5c\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#hatch","title":"\u65b9\u6848\u516b\uff1aHatch\uff1a\u2606","text":"<p>\u7b80\u8ff0\uff1a</p> <ul> <li>Hatch \u4e5f\u662f\u4e00\u6b3e\u865a\u62df\u73af\u5883\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u7ba1\u7406\u73af\u5883\uff08\u5b83\u5141\u8bb8\u6bcf\u4e2a\u9879\u76ee\u6709\u591a\u4e2a\u73af\u5883\uff0c\u4f46\u4e0d\u5141\u8bb8\u628a\u5b83\u4eec\u653e\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\uff09\uff0c\u5e76\u4e14\u53ef\u4ee5\u7ba1\u7406\u5305\uff08\u4f46\u4e0d\u652f\u6301 lockfile\uff09\u3002Hatch \u4e5f\u53ef\u4ee5\u7528\u6765\u6253\u5305\u4e00\u4e2a\u9879\u76ee\uff08\u7528\u7b26\u5408 PEP 621 \u6807\u51c6\u7684 pyproject.toml \u6587\u4ef6\uff09\u5e76\u4e0a\u4f20\u5230 PyPI\u3002</li> </ul> <p>\u9009\u578b\u8bf4\u660e\uff1a</p> <ul> <li>\u4ec5\u77e5\u9053\u6b64\u5de5\u5177\uff0c\u4ece\u672a\u5b9e\u64cd\u4f53\u9a8c\u8fc7\uff0c\u662f\u5426\u63a8\u8350\u9700\u8981\u540e\u7eed\u5b9e\u64cd\u4f53\u9a8c\u540e\u624d\u80fd\u51b3\u5b9a\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#rye","title":"\u65b9\u6848\u4e5d\uff1aRye","text":"<ul> <li>\u4f7f\u7528Rust\u5f00\u53d1\uff0c\u6682\u672a\u7814\u7a76\uff0c\u503c\u5f97\u5173\u6ce8</li> </ul> <p>\u65b9\u6848\u5341\uff1aPyflow </p> <ul> <li>An installation and dependency system for Python,\u6b64\u9879\u76ee\u8fd1\u4e24\u5e74\u672a\u66f4\u65b0\u4e86\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#_3","title":"\u5e38\u7528\u5de5\u5177\u5b89\u88c5\u6b65\u9aa4","text":"","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#pip","title":"\u3010pip\u3011\u5b89\u88c5\u53ca\u5e38\u7528\u547d\u4ee4","text":"<ul> <li>\u5728python3\u4ee5\u540e\uff0c\u5b89\u88c5\u539f\u751fpython\u540e\uff0c\u9ed8\u8ba4\u4f1a\u5b89\u88c5pip\u3002\u6545\u6b64\u5904\u5b89\u88c5\u7565</li> </ul> Bash<pre><code># \u5e38\u7528\u547d\u4ee4\n\n# \u5b89\u88c5 pkgname1\u548c pkgname2\npip install  &lt;pkgname1&gt;  &lt;pkgname2&gt;\n\n# \u67e5\u770b\u5df2\u7ecf\u5b89\u88c5\u7684\u5305\npip list\n\n# \u67e5\u770b\u5f53\u524d\u6e90\u4e2d\u80fd\u591f\u5b89\u88c5\u7684\u5305\u53ca\u7248\u672c\npip search keyword \u6216\u8005 pypi\n\n# \u5b89\u88c5\u5e2e\u52a9\npip help install\n\n# \u67e5\u770bpip\u7248\u672c\npip -V\n\n# \u5c06\u5df2\u5b89\u88c5\u7684\u5305\u53ca\u7248\u672c\u8f93\u51fa\u5230requirements.txt\u6587\u4ef6\u4e2d\npip freeze &gt; requirement.txt\n\n# \u5b89\u88c5requirements.txt\u4e2d\u5168\u90e8\u5305\uff08\u9664#\u6ce8\u91ca\u5916\uff09\npip install -r requirement.txt\n\n# \u66f4\u65b0pip\u7248\u672c\npip install -U pip  \n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#conda_2","title":"\u3010conda\u3011\u5b89\u88c5\u53ca\u5e38\u7528\u547d\u4ee4","text":"","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#anaconda","title":"Anaconda\u5b89\u88c5","text":"<ul> <li>Linux/MacOS\u7cfb\u7edf</li> </ul> <p>\u6e05\u534e\u955c\u50cf\u6e90\uff1a</p> Bash<pre><code># step1: \u6267\u884c\u5b89\u88c5\nbash Anaconda3-2021.11-Linux-x86_64.sh\n\n-----------------------------------------------------------------------------\nlogger:\n\nDo you accept the license terms? [yes|no]\n[no] &gt;&gt;&gt;\nPlease answer 'yes' or 'no':'\n&gt;&gt;&gt; yes\n\nAnaconda3 will now be installed into this location:\n/root/anaconda3\n\n  - Press ENTER to confirm the location\n  - Press CTRL-C to abort the installation\n  - Or specify a different location below\n\n[/root/anaconda3] &gt;&gt;&gt; /data/bluewhale/software/anaconda3\nPREFIX=/data/bluewhale/\n\ninstallation finished.\nDo you wish the installer to initialize Anaconda3\nby running conda init? [yes|no]\n[no] &gt;&gt;&gt; yes\n\n--------------------------------------------------------------------\n\n# step2:\u914d\u7f6e\u73af\u5883\u53d8\u91cf\nvim /etc/profile\n\nexport PATH=$PATH:/data/bluewhale/software/anaconda3/bin\n\nsource /etc/profile\n\nconda init\n</code></pre> <ul> <li>Win\u7cfb\u7edf</li> </ul> <p>\u5b89\u88c5\u5305\u4e0b\u8f7d\u5730\u5740</p> <ul> <li>\u9009\u62e9\u81ea\u5df1\u7684\u5e73\u53f0\u5bf9\u5e94\u7684\u5b89\u88c5\u5305\uff0c\u53cc\u51fb\u5b89\u88c5\u5305\u4f7f\u7528\u56fe\u5f62\u5316\u754c\u9762\u8fdb\u884c\u5b89\u88c5\uff0c\u6ca1\u6709\u7279\u6b8a\u7684\u914d\u7f6e\uff0c\u4e00\u822c\u4f7f\u7528\u9ed8\u8ba4\u9879\u6309\u7167\u63d0\u793a\u8fdb\u884c\u5b89\u88c5\u5373\u53ef</li> <li>\u7531\u4e8e\u7b14\u8005\u6ca1\u6709win\u7cfb\u7edf\uff0c\u6545\u6ca1\u6709\u573a\u666f\u8fdb\u884c\u5b89\u88c5\u9a8c\u8bc1\uff0c\u5728\u6b64\u8d34\u4e0a\u4e00\u4e2a\u3010\u5b89\u88c5\u6559\u7a0b\u3011\u94fe\u63a5\uff0c\u4ec5\u4f9b\u53c2\u8003</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#miniconda","title":"Miniconda\u5b89\u88c5","text":"<p>\u5b89\u88c5\u5305\u4e0b\u8f7d\u5730\u5740</p> <ul> <li>\u5b89\u88c5\u6d41\u7a0b\u548c\u914d\u7f6e\u4e0e\u5b89\u88c5Anaconda\u7c7b\u4f3c\uff0c\u53ea\u662f\u5b89\u88c5\u5305\u4e0d\u4e00\u6837\uff0c\u518d\u6b21\u4e0d\u5728\u8d58\u8ff0\u8be6\u7ec6\u6b65\u9aa4</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#_4","title":"\u5e38\u7528\u547d\u4ee4","text":"<ul> <li>\u521b\u5efa\u3001\u8fdb\u5165\u3001\u9000\u51fa\u3001\u5220\u9664</li> </ul> Bash<pre><code># \u521b\u5efa\u73af\u5883\nconda create -n &lt;env_name&gt; python=3.8\n\n# \u67e5\u770b\u6240\u6709\u73af\u5883\nconda env list \nconda info -e\n\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nconda activate &lt;env_name&gt;\n\n# \u9000\u51fa\u865a\u62df\u73af\u5883\nconda deactivate \n\n# \u5220\u9664\u865a\u62df\u73af\u5883\nconda remove -n &lt;env_name&gt; --all\n</code></pre> <ul> <li>\u67e5\u770b\u3001\u5b89\u88c5\u3001\u5378\u8f7d\u4f9d\u8d56</li> </ul> Bash<pre><code># \u67e5\u770b\u7248\u672c\nconda -V\n\n# \u67e5\u770b\u5f53\u524d\u73af\u5883\u6240\u6709\u7684\u4f9d\u8d56\u5305(\u5df2\u6fc0\u6d3b\u7684\u73af\u5883\u7684\u65f6)\nconda list\n\n# \u67e5\u770b\u5f53\u524d\u73af\u5883\u6240\u6709\u7684\u4f9d\u8d56\u5305\uff08\u672a\u6fc0\u6d3b\u73af\u5883\u65f6\uff09\nconda list -n &lt;env_name&gt;\n\n# \u67e5\u770b\u6307\u5b9a\u4f9d\u8d56\u5305\nconda list | grep &lt;pkg_name&gt;\n\n# \u5b89\u88c5\u4f9d\u8d56\u5305\nconda install &lt;pkg_name&gt;\n\n# \u5728\u6307\u5b9a\u73af\u5883\u4e2d\u5b89\u88c5\u4f9d\u8d56\u5305\nconda install -n &lt;env_name&gt; &lt;pkg_name&gt;\n#\u6216\npip install numpy -i https://pypi.douban.com/simple  # \u4e34\u65f6\u4f7f\u7528\u56fd\u5185\u6e90\u8fdb\u884c\u5b89\u88c5\n</code></pre> <ul> <li>\u5347\u7ea7\u76f8\u5173\u547d\u4ee4</li> </ul> Bash<pre><code># \u5347\u7ea7conda\nconda update conda\n\n# \u5347\u7ea7python\nconda update python\n\n# \u5347\u7ea7\u6307\u5b9a\u4f9d\u8d56\u5305\nconda update &lt;pkg_name&gt;\n</code></pre> <ul> <li>\u5206\u4eab\u3001\u5bfc\u51fa\u3001\u8fc1\u79fb</li> </ul> Bash<pre><code># \u5bfc\u51fa\u5f53\u524d\u73af\u5883\u5df2\u5b89\u88c5\u5305\u5217\u8868\u5230yaml\u6587\u4ef6\u4e2d\nconda env export &gt; environment.yaml\n\n# \u4ece\u6587\u4ef6\u4e2d\u521b\u5efa\u73af\u5883\nconda env create -f environment.yaml\n\n# \u514b\u9686\u865a\u62df\u73af\u5883\nconda create -n &lt;env_name1&gt; --clone &lt;env_name&gt;\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#pyenv_1","title":"\u3010pyenv\u3011\u5b89\u88c5\u53ca\u5e38\u7528\u547d\u4ee4","text":"<ul> <li>\u5b98\u7f51\u5b89\u88c5\u8bf4\u660e</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#_5","title":"\u5e38\u7528\u547d\u4ee4","text":"Bash<pre><code>pyenv help install\n\n# \u5217\u51fa\u6240\u6709\u53ef\u7528\u7248\u672c\npyenv install --list\n\n# \u5728\u7ebf\u5b89\u88c5\u6307\u5b9a\u7248\u672c\npyenv install 3.8.13\npyenv versions\n\n# \u4f7f\u7528\u7f13\u5b58\u65b9\u5f0f\u5b89\u88c5\n## \u5728~/.pyenv \u76ee\u5f55\u4e0b\u65b0\u5efacache\u76ee\u5f55\uff0c\u653e\u5165\u4e0b\u8f7d\u597d\u7684\u5f85\u4e0b\u8f7d\u5b89\u88c5\u7248\u672c\u7684\u6587\u4ef6\n## \u4e0d\u786e\u5b9a\u8981\u54ea\u4e00\u4e2a\u6587\u4ef6\u65f6\uff0c\u628a\u4e0b\u8f7d\u7684\u4e09\u4e2a\u6587\u4ef6\u90fd\u653e\u8fdb\u53bb\npyenv install 3.8.13 -v\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#_6","title":"\u7248\u672c\u63a7\u5236","text":"Bash<pre><code># \u663e\u793a\u5f53\u524d\u7684python\u7248\u672c\npyenv version \n\n# \u663e\u793a\u6240\u6709\u53ef\u7528\u7684python\u7248\u672c\uff0c\u548c\u5f53\u524d\u7248\u672c\npyenv versions \n\n# global\u5168\u5c40\u8bbe\u7f6e\npyenv global 3.8.13\n\n# \u63d0\u793a\uff1a\u5982\u679c\u662froot\u7528\u6237\u5b89\u88c5\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528global\uff0c\u5426\u5219\u5f71\u54cd\u592a\u5927\n\n# shell\u4f1a\u8bdd\npyenv shell 3.8.13\n\n# local\u672c\u5730\u8bbe\u7f6e\n## \u4f7f\u7528pyenv local \u8bbe\u7f6e\npyenv local 3.8.13\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/env_package_selection/#virturalenv","title":"virturalenv\u865a\u62df\u73af\u5883\u8bbe\u7f6e","text":"Bash<pre><code># \u4f7f\u7528\u63d2\u4ef6 \u5728plugins/pyenv-virtualenv\u4e2d\npyenv virtualenv 3.8.13 py38env\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/","title":"Jupyter\u7cfb\u5217\u5de5\u5177\u7684\u4f7f\u7528\u603b\u7ed3","text":"","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#jupyter-notebook","title":"\u4e00\u3001Jupyter Notebook","text":"","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#jupyter_1","title":"Jupyter\u6982\u8ff0","text":"<ul> <li> <p>\u521b\u59cb\u4eba\uff08Fernando P\u00e9rez\uff09\u6240\u8a00\uff1a\u6700\u521d\u7684\u68a6\u60f3\u662f\u505a\u4e00\u4e2a\u7efc\u5408Ju(Julia)\u3001Py(Python)\u548cR\u4e09\u79cd\u79d1\u5b66\u8fd0\u7b97\u8bed\u8a00\u7684\u8ba1\u7b97\u5de5\u5177\u5e73\u53f0\uff0c\u6240\u4ee5\u5c06\u5176\u547d\u540d\u4e3aJu-Py-te-R.\u53d1\u5c55\u5230\u73b0\u5728\uff0cJupyter\u5df2\u7ecf\u6210\u4e3a\u4e86\u4e00\u4e2a\u51e0\u4e4e\u652f\u6301\u6240\u6709\u8bed\u8a00\uff0c\u80fd\u591f\u628a\u8f6f\u4ef6\u4ee3\u7801\u3001\u8ba1\u7b97\u8f93\u51fa\u3001\u89e3\u91ca\u6587\u6863\u3001\u591a\u5a92\u4f53\u8d44\u6e90\u6574\u5408\u5728\u4e00\u8d77\u7684\u591a\u529f\u80fd\u79d1\u5b66\u8fd0\u7b97\u5e73\u53f0\uff1b</p> </li> <li> <p>Jupyter\u4f18\u70b9\uff1a</p> </li> <li> <p>\u6574\u5408\u6240\u6709\u7684\u8d44\u6e90\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387</p> <ul> <li>Jupyter \u901a\u8fc7\u628a\u6240\u6709\u548c\u8f6f\u4ef6\u7f16\u5199\u6709\u5173\u7684\u8d44\u6e90\u5168\u90e8\u653e\u5728\u4e00\u4e2a\u5730\u65b9</li> <li>\u5f53\u4f60\u6253\u5f00\u4e00\u4e2a Jupyter Notebook \u65f6\uff0c\u5c31\u5df2\u7ecf\u53ef\u4ee5\u770b\u5230\u76f8\u5e94\u7684\u6587\u6863\u3001\u56fe\u8868\u3001\u89c6\u9891\u548c\u76f8\u5e94\u7684\u4ee3\u7801\u3002\u8fd9\u6837\uff0c\u4f60\u5c31\u4e0d\u9700\u8981\u5207\u6362\u7a97\u53e3\u53bb\u627e\u8d44\u6599\uff0c\u53ea\u8981\u770b\u4e00\u4e2a\u6587\u4ef6\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97\u9879\u76ee\u7684\u6240\u6709\u4fe1\u606f\u3002</li> </ul> </li> <li>\u4ea4\u4e92\u6027\u7f16\u7a0b\u4f53\u9a8c<ul> <li>\u4e3a\u4e86\u89e3\u51b3\u5728\u4f20\u7edf\u5f00\u53d1\u73af\u5883\u4e2d\uff0c\u6bcf\u4e00\u6b21\u5b9e\u9a8c\u90fd\u9700\u8981\u628a\u6240\u6709\u7684\u4ee3\u7801\u91cd\u65b0\u8dd1\u4e00\u904d\uff0c\u53ca\u5176\u6d6a\u8d39\u65f6\u95f4\uff1b</li> <li>\u5f15\u5165\u4e86Cell\u7684\u6982\u5ff5\uff0c\u6bcf\u6b21\u5c0f\u5b9e\u9a8c\u53ef\u4ee5\u53ea\u8dd1\u5728\u4e00\u4e2a\u5c0f\u7684Cell\u91cc\uff0c\u5b9e\u73b0\u4e86\u6240\u89c1\u5373\u6240\u5f97\uff0c\u8fd9\u6837\u5f3a\u7684\u4e92\u52a8\u6027\uff0c\u8ba9 Python \u7814\u7a76\u5458\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u95ee\u9898\u672c\u8eab\uff0c\u4e0d\u88ab\u7e41\u6742\u7684\u5de5\u5177\u94fe\u6240\u7d2f\uff0c\u4e0d\u7528\u5728\u547d\u4ee4\u884c\u76f4\u63a5\u5207\u6362\uff0c\u6240\u6709\u79d1\u7814\u5de5\u4f5c\u90fd\u80fd\u5728 Jupyter \u4e0a\u5b8c\u6210\u3002</li> </ul> </li> <li> <p>\u96f6\u6210\u672c\u91cd\u73b0\u7ed3\u679c</p> </li> <li> <p>Jupyter\u89e3\u51b3\u7684\u95ee\u9898\u57df\uff1a</p> </li> <li> <p>\u5e2e\u52a9\u7528\u6237\u89e3\u51b3\u7e41\u7410\u7684\u73af\u5883\u5b89\u88c5\u95ee\u9898\uff0c\u7ed9\u7528\u6237\u63d0\u4f9b\u4e86\u4e91\u7aef\u7684\u8fd0\u884c\u73af\u5883\uff0c\u81f4\u529b\u63d0\u9ad8\u7528\u6237\u771f\u6b63\u751f\u4ea7\u529b</p> <ul> <li>\u5e38\u89c1\u7684\u573a\u666f\u662f\uff0c\u6211\u5728\u8bba\u6587\u91cc\u770b\u5230\u522b\u4eba\u7684\u65b9\u6cd5\u6548\u679c\u5f88\u597d\uff0c\u53ef\u662f\u5f53\u6211\u53bb\u91cd\u73b0\u65f6\uff0c\u5374\u53d1\u73b0\u9700\u8981 pip \u91cd\u65b0\u5b89\u88c5\u4e00\u5806\u4f9d\u8d56\u8f6f\u4ef6\u3002\u8fd9\u4e9b\u51c6\u5907\u5de5\u4f5c\u53ef\u80fd\u4f1a\u6d88\u8017\u4f60 80% \u7684\u65f6\u95f4\uff0c\u5374\u5e76\u4e0d\u662f\u771f\u6b63\u7684\u751f\u4ea7\u529b</li> </ul> </li> <li> <p>\u4e91\u7aef\u73af\u5883\u73af\u5883\u5730\u5740\uff1a   </p> <ul> <li>Jupyter\u5b98\u65b9\u7684binder\u5e73\u53f0</li> <li> <p>\u5f53\u4f60\u7528 Binder \u6253\u5f00\u4e00\u4efd GitHub \u4e0a\u7684 Jupyter Notebook \u65f6\uff0c\u4f60\u4e0d\u9700\u8981\u5b89\u88c5\u4efb\u4f55\u8f6f\u4ef6\uff0c\u76f4\u63a5\u5728\u6d4f\u89c8\u5668\u6253\u5f00\u4e00\u4efd\u4ee3\u7801\uff0c\u5c31\u80fd\u5728\u4e91\u7aef\u8fd0\u884c\u3002</p> </li> <li> <p>Google Colab\u5e73\u53f0</p> </li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#_1","title":"\u73af\u5883\u5b89\u88c5\uff1a","text":"<p>\u4f7f\u7528\u4e91\u7aef\u73af\u5883\uff1a</p> <ul> <li>\u7b2c\u4e00\u4e2a\u662f Jupyter \u5b98\u65b9\uff1a\u5728\u7ebfbinder\u5e73\u53f0</li> <li>\u7b2c\u4e8c\u4e2a\u662f Google Research \u63d0\u4f9b\u7684 Colab \u73af\u5883\uff0c\u5c24\u5176\u9002\u5408\u673a\u5668\u5b66\u4e60\u7684\u5b9e\u8df5\u5e94\u7528\uff1a\u5728\u7ebfColab\u5e73\u53f0</li> </ul> <p>\u4f7f\u7528\u672c\u5730\u73af\u5883\uff1a</p> <ul> <li>\u5b89\u88c5\uff1aJupyter\u5b89\u88c5</li> <li>\u8fd0\u884c\uff1aJupyter\u8fd0\u884c Bash<pre><code># install\npip install notebook\n\n# run\njupyter notebook\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#_2","title":"\u4f7f\u7528\u603b\u7ed3","text":"","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#_3","title":"\u652f\u6301\u4e24\u79cd\u6a21\u5f0f\uff1a","text":"<ul> <li>\u7f16\u8f91\u6a21\u5f0f\uff08Enter\uff09</li> <li>\u547d\u4ee4\u6a21\u5f0f\u4e0b<code>\u56de\u8f66Enter</code>\u6216<code>\u9f20\u6807\u53cc\u51fb</code>cell\u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f</li> <li>\u53ef\u4ee5\u64cd\u4f5ccell\u5185\u6587\u672c\u6216\u4ee3\u7801\uff0c\u526a\u5207\uff0f\u590d\u5236\uff0f\u7c98\u8d34\u79fb\u52a8\u7b49\u64cd\u4f5c</li> <li>\u547d\u4ee4\u6a21\u5f0f\uff08Esc\uff09</li> <li>\u6309<code>Esc</code>\u9000\u51fa\u7f16\u8f91\uff0c\u8fdb\u5165\u547d\u4ee4\u6a21\u5f0f</li> <li>\u53ef\u4ee5\u64cd\u4f5ccell\u5355\u5143\u672c\u8eab\u8fdb\u884c\u526a\u5207\uff0f\u590d\u5236\uff0f\u7c98\u8d34\uff0f\u79fb\u52a8\u7b49\u64cd\u4f5c</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#_4","title":"\u5e38\u7528\u5feb\u6377\u952e","text":"<p>notebook\u7684\u6587\u6863\u683c\u5f0f\u662f<code>.ipynb</code></p> <p>cell\u884c\u53f7\u524d\u7684 * \uff0c\u8868\u793a\u4ee3\u7801\u6b63\u5728\u8fd0\u884c</p> <ul> <li> <p>\u4e24\u79cd\u6a21\u5f0f\u901a\u7528\u5feb\u6377\u952e</p> </li> <li> <p><code>Shift+Enter</code>\uff0c\u6267\u884c\u672c\u5355\u5143\u4ee3\u7801\uff0c\u5e76\u8df3\u8f6c\u5230\u4e0b\u4e00\u5355\u5143</p> </li> <li> <p><code>Ctrl+Enter</code>\uff0c\u6267\u884c\u672c\u5355\u5143\u4ee3\u7801\uff0c\u7559\u5728\u672c\u5355\u5143</p> </li> <li> <p>\u547d\u4ee4\u6a21\u5f0f</p> </li> </ul> <p>\uff1a\u6309ESC\u8fdb\u5165</p> <ul> <li><code>Y</code>\uff0ccell\u5207\u6362\u5230Code\u6a21\u5f0f</li> <li><code>M</code>\uff0ccell\u5207\u6362\u5230Markdown\u6a21\u5f0f</li> <li><code>A</code>\uff0c\u5728\u5f53\u524dcell\u7684\u4e0a\u9762\u6dfb\u52a0cell</li> <li><code>B</code>\uff0c\u5728\u5f53\u524dcell\u7684\u4e0b\u9762\u6dfb\u52a0cell</li> <li><code>\u53cc\u51fbD</code>\uff1a\u5220\u9664\u5f53\u524dcell</li> <li><code>Z</code>\uff0c\u56de\u9000</li> <li><code>L</code>\uff0c\u4e3a\u5f53\u524dcell\u52a0\u4e0a\u884c\u53f7 &lt;!--</li> <li><code>Ctrl+Shift+P</code>\uff0c\u5bf9\u8bdd\u6846\u8f93\u5165\u547d\u4ee4\u76f4\u63a5\u8fd0\u884c</li> <li>\u5feb\u901f\u8df3\u8f6c\u5230\u9996\u4e2acell\uff0c<code>Crtl+Home</code></li> <li> <p>\u5feb\u901f\u8df3\u8f6c\u5230\u6700\u540e\u4e00\u4e2acell\uff0c<code>Crtl+End</code> </p> </li> <li> <p>\u7f16\u8f91\u6a21\u5f0f</p> </li> </ul> <p>\uff1a\u6309Enter\u8fdb\u5165</p> <ul> <li>\u591a\u5149\u6807\u64cd\u4f5c\uff1a<code>Ctrl\u952e\u70b9\u51fb\u9f20\u6807</code>\uff08Mac:CMD+\u70b9\u51fb\u9f20\u6807\uff09</li> <li>\u56de\u9000\uff1a<code>Ctrl+Z</code>\uff08Mac:CMD+Z\uff09</li> <li>\u91cd\u505a\uff1a<code>Ctrl+Y</code>\uff08Mac:CMD+Y)</li> <li>\u8865\u5168\u4ee3\u7801\uff1a\u53d8\u91cf\u3001\u65b9\u6cd5\u540e\u8ddf<code>Tab\u952e</code></li> <li>\u4e3a\u4e00\u884c\u6216\u591a\u884c\u4ee3\u7801\u6dfb\u52a0/\u53d6\u6d88\u6ce8\u91ca\uff1a<code>Ctrl+/</code>\uff08Mac:CMD+/\uff09</li> <li>\u5c4f\u853d\u81ea\u52a8\u8f93\u51fa\u4fe1\u606f\uff1a\u53ef\u5728\u6700\u540e\u4e00\u6761\u8bed\u53e5\u4e4b\u540e\u52a0\u4e00\u4e2a\u5206\u53f7</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#_5","title":"\u63d2\u4ef6\u5b89\u88c5","text":"<ul> <li>\u81ea\u52a8\u8865\u5168\u63d2\u4ef6\u7684\u5b89\u88c5</li> </ul> Bash<pre><code>python -m pip install jupyter_contrib_nbextensions\n\njupyter contrib nbextension install --user --skip-running-check\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#jupyterlab","title":"\u4e8c\u3001JupyterLab","text":"<ul> <li> <p>\u5b98\u65b9\u94fe\u63a5</p> </li> <li> <p>jupyterlab\u662fjupyter notebook\u7684\u5347\u7ea7\u7248</p> </li> </ul> Bash<pre><code># install\npip install jupyterlab\n\n# run\njupyter-lab\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#jupyterhub","title":"\u4e09\u3001JupyterHub","text":"<ul> <li>jupyterhub\u662fjuypter notebook\u7684\u591a\u7528\u6237\u7248\uff0c\u5185\u7f6ejupyterlab\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#_6","title":"\u5b89\u88c5\u90e8\u7f72\u6982\u8ff0","text":"<ol> <li>conda\u5b89\u88c5\u4e0e\u914d\u7f6e</li> <li>Nodejs\u5b89\u88c5\u4e0e\u914d\u7f6e</li> <li>Jupyterhub\u5b89\u88c5\u914d\u7f6e</li> <li>\u6dfb\u52a0Linux\u7cfb\u7edf\u7528\u6237\u767b\u5f55</li> <li>\u542f\u52a8\u8fd0\u884c</li> </ol>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#_7","title":"\u5b89\u88c5\u90e8\u7f72\u6307\u5357","text":"<p>\u57fa\u4e8epython3.8\u73af\u5883\u5b89\u88c5</p>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step1conda","title":"step1\uff1aConda\u5b89\u88c5\u4e0e\u914d\u7f6e","text":"Bash<pre><code># step1: \u4e0b\u8f7d\u5b89\u88c5\u5305(\u6709\u7f51\uff1a\u4f7f\u7528wget\u4e0b\u8f7d\uff0c\u65e0\u7f51\u65f6\uff1a\u4e0b\u8f7d\u79bb\u7ebf\u5b89\u88c5\u5305\u4e0a\u4f20\u81f3\u5b89\u88c5\u670d\u52a1\u5668)\nwget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2021.05-Linux-x86_64.sh\n\n# step2: \u6309\u63d0\u9192\u8f93\u5165\u5b89\u88c5\u6307\u4ee4\nbash Anaconda3-2021.05-Linux-x86_64.sh\n\n# step3:\u521d\u59cb\u5316conda\nsource ~/.bashrc\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step2-nodejs","title":"Step2\uff1a Nodejs\u5b89\u88c5\u4e0e\u914d\u7f6e","text":"<p>Note: \u82e5\u5f53\u524d\u670d\u52a1\u5668\u662fArch\u67b6\u6784\u7684\uff0c\u5219\u5efa\u8bae\u4f7f\u7528\u534e\u4e3a\u5b98\u65b9\u6587\u6863\u7ed9\u51fa\u7684\u7248\u672c\u8fdb\u884c\u5b89\u88c5\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u672a\u77e5\u5f02\u5e38\uff0c</p> Bash<pre><code># step1: \u4e0b\u8f7d\nwget https://nodejs.org/dist/v16.15.1/node-v16.15.1-linux-x64.tar.xz\n\n# step2: \u89e3\u538b\ntar -xvf node-v16.15.1-linux-x64.tar.xz\n\n# step3: \u91cd\u547d\u540d\nmv node-v16.15.1-linux-x64 nodejs\n\n# step4: \u521b\u5efa\u8f6f\u8fde\u63a5\uff08\u6216\u8005\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\uff09\nln -s /data/bluewhale/software/nodejs/bin/node  /usr/local/bin/node\nln -s /data/bluewhale/software/nodejs/bin/npm  /usr/local/bin/npm\n\n# step5: \u9a8c\u8bc1\n(jupyterhub_py38env) [root@2-123 jupyterhub]# node -v\nv16.15.1\n\n# step6: \u5b89\u88c5configurable-http-proxy\nnpm install -g configurable-http-proxy\n\n# step7: \u73af\u5883\u53d8\u91cf\u4e2d\u5982\u679c\u914d\u7f6e\u4e86node\u7684\u8def\u5f84,\u8fd9\u8fb9\u53ef\u4ee5\u5ffd\u7565\nc.JupyterHub.proxy_cmd = ['/opt/nodejs/bin/configurable-http-proxy',]\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step3-jupyterhub","title":"Step3: Jupyterhub\u5b89\u88c5\u914d\u7f6e","text":"<p>Note\uff1a\u82e5\u5728\u5185\u7f51\u6761\u4ef6\u4e0b\u5b89\u88c5\uff0c\u5219\u9700\u8981\u5728\u5728\u6709\u5916\u7f51\u4e0b\u6784\u5efa\u597d\u73af\u5883\u5305\uff0c\u7136\u540e\u4f7f\u7528conda-pack\u8fdb\u884c\u6253\u5305\u8fc1\u79fb</p> <ul> <li> <p>\u5b89\u88c5 Bash<pre><code># step1: \u521b\u5efa\u865a\u62df\u73af\u5883\nconda create -n jupyterhub_py38env python=3.8 -y\n\n# step2:\u6fc0\u6d3b\u73af\u5883\nconda activate jupyterhub_py38env\n\n# step3: \u5b89\u88c5jupyterhub\u53ca\u5176\u4f9d\u8d56\npip install ipykernel notebook jupyterlab jupyterhub jupyterhub-dummyauthenticator mysql-connector -i https://pypi.tuna.tsinghua.edu.cn/simple\n\n# step4: \u5b89\u88c5kernal\nconda install nb_conda_kernels ipykernel \n\n# \u67e5\u770b\u5185\u6838\u6e05\u5355\njupyter kernelspec list\n\n# step5\uff1a\u5b89\u88c5\u5e38\u7528\u63d2\u4ef6\njupyter labextension install @jupyterlab/hub-extension\n</code></pre></p> </li> <li> <p>\u751f\u6210\u914d\u7f6e Bash<pre><code># \u751f\u6210\u914d\u7f6e\u6587\u4ef6\njupyterhub --generate-config -f /etc/jupyterhub/jupyterhub_config.py\n\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u7684\u6743\u9650\uff0c\u672c\u8d28\u53ea\u6388\u6743\u53ef\u6267\u884c\u6587\u4ef6\u5373\u53ef\nchmod 777 jupyterhub_config.py\n</code></pre></p> </li> <li> <p>\u4fee\u6539\u914d\u7f6e Bash<pre><code>c.JupyterHub.ip = '172.x.x.x'\nc.JupyterHub.port = 30020\nc.Spawner.ip = '172.x.x.x'\nc.JupyterHub.base_url = '/jupyterhub'\nc.PAMAuthenticator.encoding = 'utf8'\nc.LocalAuthenticator.create_system_users = True\nc.Authenticator.admin_users = {\"demouser\"}\nc.Authenticator.whitelist = {'demouser'}\nc.Spawner.notebook_dir = '/data/bluewhale/jupyterhubuser/' \n#c.JupyterHub.authenticator_class = 'remote_user_authenticator.RemoteUserAuthenticator'\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step4-linux","title":"Step4: \u6dfb\u52a0Linux\u7cfb\u7edf\u7528\u6237","text":"<ol> <li> <p>\u5728Linux Shell\u4e2d\u6267\u884c Bash<pre><code># \u6dfb\u52a0\u7528\u6237\nuseradd demouser\n\n# \u4fee\u6539\u5bc6\u7801\npasswd demouer\n# \u6309\u7167\u63d0\u793a\u8f93\u5165\u65b0\u5bc6\u7801\uff082\u6b21\uff09\n</code></pre></p> </li> <li> <p>\u4fee\u6539jupyterhub\u914d\u7f6e\u6587\u4ef6 Bash<pre><code>vim /etc/jupyterhub_config.py\n\n#\u914d\u7f6e\nc.Authenticator.whitelist = {\"root\", \"demouser\"}\n</code></pre></p> </li> </ol>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step5","title":"Step5: \u542f\u52a8\u8fd0\u884c","text":"Bash<pre><code># \u524d\u53f0\u542f\u52a8\uff08\u5728\u865a\u62df\u73af\u5883\u4e2d\uff09\njupyterhub --config=/etc/jupyterhub/jupyterhub_config.py --no-ssl\n\n# \u540e\u53f0\u542f\u52a8\nnohup jupyterhub --config=/etc/jupyterhub/jupyterhub_config.py --no-ssl &gt; /dev/null 2&gt;&amp;1 &amp;\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step6","title":"Step6: \u73af\u5883\u5bfc\u51fa(\u975e\u5fc5\u987b)","text":"<p>\u82e5\u9700\u8981\u5c06\u8be5jupyterhub\u73af\u5883\u5305\u5bfc\u5165\u5230\u5176\u4ed6\u73af\u5883\uff0c\u53ef\u6267\u884c\u4e0b\u5217\u64cd\u4f5c</p> Bash<pre><code>conda install -c conda-forge conda-pack\n\nconda pack -n jupyterhub_py38env -o jupyterhub_py38env.tar.gz\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#arch","title":"\u6848\u4f8b\uff1aArch\u7cfb\u7edf\u4e0b\u7684\u8be6\u7ec6\u5b89\u88c5\u6d41\u7a0b","text":"","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step1conda_1","title":"step1:\u5b89\u88c5conda","text":"<p>\u955c\u50cf\u94fe\u63a5</p> Bash<pre><code>cd /opt/\nwget http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-armv7l.sh\nbash Miniconda3-latest-Linux-armv7l.sh\n\n# \u6267\u884c\u8fc7\u7a0b\u4e2d\u7559\u610f\uff1a\nWhen asked, change the install location: /home/pi/miniconda3  # \u8f93\u5165\uff1a/opt/miniconda\nDo you wish the installer to prepend the Miniconda3 install location to PATH in your /root/.bashrc ? yes\n\n# \u6fc0\u6d3bconda\nsource /root/.bashrc\n\n# \u786e\u8ba4\u662f\u5426\u5b89\u88c5\u6210\u529f\nconda\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step2","title":"step2 \u521b\u5efa\u865a\u62df\u73af\u5883","text":"Bash<pre><code>conda create -n jupyter python=3.7 -y\n\n# \u8865\u5145\uff1a\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\uff1a \nconda activate jupyter\n# \u9000\u51fa\u865a\u62df\u73af\u5883\nconda deactivate \n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step3-nodejs","title":"step3: \u5b89\u88c5nodejs","text":"<p>\u6b64\u5904\u5efa\u8bae\u4f7f\u7528\u534e\u4e3a\u5b98\u65b9\u6587\u6863\u7ed9\u51fa\u7684\u7248\u672c\u8fdb\u884c\u5b89\u88c5\uff1a https://support.huaweicloud.com/prtg-kunpengweb/nodejs_01_0001.html</p> Bash<pre><code># \u4e0b\u8f7d\u5e76\u5b89\u88c5\nwget https://nodejs.org/dist/v10.16.0/node-v10.16.0-linux-arm64.tar.xz\ntar -xvf node-v10.16.0-linux-arm64.tar.xz\nln -s /opt/nodejs/bin/node /usr/local/bin/node\nln -s /root/nodejs/bin/npm /usr/local/bin/npm\n\n# \u9a8c\u8bc1\n./opt/nodejs/bin/node -v\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step4-configurable-http-proxy","title":"step4: \u5b89\u88c5configurable-http-proxy","text":"Bash<pre><code>npm install -g configurable-http-proxy # \u5b89\u88c5\u4ee3\u7406\u5de5\u5177\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step5-jupyterhub","title":"step5: \u6fc0\u6d3b\u865a\u62df\u73af\u5883\u5b89\u88c5jupyterhub\u76f8\u5173\u4f9d\u8d56\u5305","text":"Bash<pre><code>source activate jupyter\npip install ipykernel notebook jupyterlab jupyterhub jupyterhub-dummyauthenticator mysql-connector\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step6-python","title":"step6\uff1a \u5b89\u88c5python\u5f00\u53d1\u4f9d\u8d56\u5305","text":"Bash<pre><code>pip install -U scikit-learn pyspark \n</code></pre> <ul> <li> <p>\u5907\u6ce8\uff1a\u5b89\u88c5\u8fc7\u7a0b\u8fdb\u884cstep4\u65f6\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898</p> <ul> <li> <p>\u9519\u8bef1\uff1a\u5982\u679c\u5b89\u88c5\u5305\u4e0b\u8f7d\u901f\u5ea6\u592a\u6162\uff0c\u4e14\u662f\u975earch\u67b6\u6784\u7684\u7cfb\u7edf\u73af\u5883\uff0c\u5219\u53ef\u4ee5\u5c06conda\u7684\u4e0b\u8f7d\u6e90\u4fee\u6539\u4e3a\u56fd\u5185\u7684\u955c\u50cf\u6e90\uff0c\u8bbe\u7f6e\u65b9\u6cd5\u5982\u4e0b Bash<pre><code>conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/\nconda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/\nconda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/conda-forge/\nconda config --set show_channel_urls: yes\n</code></pre></p> </li> <li> <p>\u9519\u8bef\u4e8c\uff1a</p> <ul> <li>\u62a5\u9519\u4fe1\u606f\u5982\u4e0b\uff1a Bash<pre><code>Could not find a version that satisfies the requirement cffi&gt;=1.0 (from versions: )\nNo matching distribution found for cffi&gt;=1.0\nYou are using pip version 10.0.1, however version 21.0.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n</code></pre></li> </ul> </li> </ul> </li> </ul> Bash<pre><code> - \u89e3\u51b3\u529e\u6cd5\uff1a\u5347\u7ea7pip\u7248\u672cpython -m pip install --upgrade pip\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#setp7","title":"setp7:\u751f\u6210\u914d\u7f6e\u6587\u4ef6\u5e76\u6dfb\u52a0\u5185\u5bb9\u5982\u4e0b\uff1a","text":"<p>Bash<pre><code>mkdir -p /data/jupyter &amp;&amp; cd /data/jupyter\n\njupyterhub --generate-config\n\nchmod 777 jupyterhub_config.py\n\nvim jupyterhub_config.py\n</code></pre> Bash<pre><code>c.JupyterHub.base_url = '/jupyterhub'\nc.JupyterHub.ip = \"0.0.0.0\"\nc.Spawner.default_url = '/lab'\nc.PAMAuthenticator.open_sessions = False\nc.LocalAuthenticator.create_system_users = True\nc.Authenticator.admin_users = {'hcdsj'}  # #\u7ba1\u7406\u5458\u7528\u6237\nc.JupyterHub.admin_access = True\nc.JupyterHub.port = 8888\nc.Spawner.cmd = ['jupyterhub-singleuser']\nc.JupyterHub.proxy_cmd = ['/opt/nodejs/bin/configurable-http-proxy',]\nc.PAMAuthenticator.encoding = 'utf8'\nc.Authenticator.whitelist = {'hcdsj1','hcdsj2','hcdsj3'}  # \u767d\u540d\u5355\nc.JupyterHub.statsd_prefix = 'jupyterhub'\nc.Authenticator.delete_invalid_users = True\n\n# \u89e3\u51b3iframe\u6743\u9650\u95ee\u9898\nc.JupyterHub.statsd_prefix = 'jupyterhub'\n#c.Spawner.cmd=['jupyterhub-singleuser']\nc.Spawner.cmd=['jupyter-labhub']\nc.JupyterHub.tornado_settings = {\n     \"headers\": {\n        \"Content-Security-Policy\": \"frame-ancestors http://192.168.0.111:7080 http://192.168.0.111:9999/ http://192.168.0.111:9529 http://124.71.144.188:7080 http://124.71.144.188:9999/ http://124.71.144.188:9529; report-uri /api/security/csp-report\"\n    }\n}\n</code></pre></p>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step8-jupyterhub","title":"step8: \u4f7f\u7528\u7cfb\u7edf\u7528\u6237\u767b\u5f55jupyterhub","text":"<ul> <li>\u6dfb\u52a0\u7528\u6237\u5e76\u4fee\u6539\u5bc6\u7801 Bash<pre><code># \u67e5\u770b\u7528\u6237\ncat /etc/passwd\n\nadduser hcdsj hcdsj1 hcdsj2 hcdsj3\n\nuseradd hcdsj -G test01  # \u8be5\u7528\u6237\u5728jupyterhub_config.py\u6587\u4ef6\u4e2d\u6dfb\u52a0\n\n# \u67e5\u770b\u662f\u5426\u6dfb\u52a0\u6210\u529f\ncat /etc/group\n\n# \u6ce8\u610f\u4f7f\u7528\u4e0b\u5217\u547d\u4ee4\u4fee\u6539\npasswd hcdsj  # \u6b64\u5904\u5bc6\u7801\u8bbe\u7f6e\u4e3a\u7528\u6237\u540d(\u9996\u5b57\u6bcd\u5927\u5199)\u52a0123\uff0c \u5982\uff1aHcdsj123\n# \u8f93\u51fa\u65b0\u5bc6\u7801\u5373\u53ef\n\"\"\"\n(jupyter) [root@ecs-c589-0002 jupyter]# sudo passwd wss\n\u66f4\u6539\u7528\u6237 wss \u7684\u5bc6\u7801 \u3002\n\u65b0\u7684 \u5bc6\u7801\uff1a\n\u91cd\u65b0\u8f93\u5165\u65b0\u7684 \u5bc6\u7801\uff1a\npasswd\uff1a\u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0\u3002\n\"\"\"\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#step9","title":"step9 \u542f\u52a8","text":"<p>\u5728\u865a\u62df\u73af\u5883\u4e2d\u6267\u884c\u4e0b\u5217\u547d\u4ee4</p> Bash<pre><code># \u524d\u53f0\u542f\u52a8\njupyterhub -f /data/jupyter/jupyterhub_config.py\n\n# \u540e\u53f0\u542f\u52a8\nnohup jupyterhub -f /data/jupyter/jupyterhub_config.py --no-ssl &amp;\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#_8","title":"\u6269\u5c55\uff08\u975e\u5fc5\u987b\uff09","text":"","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#_9","title":"\u5b89\u88c5\u4e3b\u9898\u6269\u5c55","text":"Bash<pre><code>pip install jupyterthemes \n\n#\u5217\u51fa\u4e3b\u9898\njt -l \n\n#\u5e94\u7528monokai\u4e3b\u9898\njt -t monokai -T -N -altp -fs 13 -nfs 13 -tfs 13 -ofs 13\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#sklearn","title":"\u5b89\u88c5sklearn\u73af\u5883","text":"Bash<pre><code> pip install -U scikit-learn  -i https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#scala-kernel","title":"\u5b89\u88c5scala kernel","text":"Bash<pre><code># \u4e0b\u8f7d\nwget https://oss.sonatype.org/content/repositories/snapshots/com/github/alexarchambault/jupyter/jupyter-scala-cli_2.10.5/0.2.0-SNAPSHOT/jupyter-scala_2.10.5-0.2.0-SNAPSHOT.tar.xz\n\n# \u5b89\u88c5jupyter-scala\ntar -xvf jupyter-scala_2.10.5-0.2.0-SNAPSHOT.tar.xz -C /usr/local/\nbash /usr/local/jupyter-scala_2.10.5-0.2.0-SNAPSHOT/bin/jupyter-scala\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#pyspark-kernel","title":"\u5b89\u88c5pyspark kernel","text":"Bash<pre><code># \u5b89\u88c5findspark\uff0c\u5b9e\u73b0\u5728jupyter\u4e2d\u53ef\u4ee5\u83b7\u53d6Spark Context\u73af\u5883\npip install pyspark  findspark -i https://pypi.tuna.tsinghua.edu.cn/simple\n\nmkdir ~/.ipython/kernels/pyspark\nvim ~/.ipython/kernels/pyspark/kernel.json\n\n# kernel.json\u4e2d\u5199\u5165\n{\n \"display_name\": \"pySpark\",\n \"language\": \"python\",\n \"argv\": [\n  \"/usr/local/anacond/bin/python3\",\n  \"-m\",\n  \"IPython.kernel\",\n  \"-f\",\n  \"{connection_file}\"\n ],\n \"env\": {\n  \"SPARK_HOME\": \"/usr/local/spark\",\n  \"PYTHONPATH\": \"/usr/local/spark/python:/usr/local/spark/python/lib/py4j-0.10.4-src.zip\",\n  \"PYTHONSTARTUP\": \"/usr/local/spark/python/pyspark/shell.py \",\n  \"PYSPARK_SUBMIT_ARGS\": \"pyspark-shell\"\n }\n}\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/jupyter_tool_usage/#r-kernel","title":"\u5b89\u88c5R kernel","text":"Bash<pre><code># \u4f7f\u7528conda\u521b\u5efa\u4e00\u4e2aR\u8bed\u8a00\u7684\u73af\u5883\uff0c\u547d\u540d\u4e3aR\nconda create -n R r-essentials\n\n# \u6fc0\u6d3b\u73af\u5883\nconda activate R\n\n# \u8fdb\u5165\u5230R\u7684Session\u4e2d\nR\n\n# \u4f9d\u6b21\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5R kernekl\n&gt; install.packages(c('pbdZMQ', 'repr', 'devtools')) \n&gt; devtools::install_github('IRkernel/IRkernel') \n&gt; IRkernel::installspec()\n\n# \u5b89\u88c5\u5b8c\u6210\u540e\u4f1a\u5728\u76ee\u5f55/root/.local/share/jupyter/kernels/ir\u751f\u6210\u4e00\u4efd\u914d\u7f6e\u4fe1\u606f\u3002\u624b\u5de5\u62f7\u8d1d\u5230jupyterlab\u9ed8\u8ba4\u8bfb\u53d6\u7684\u4f4d\u7f6e/usr/local/share/jupyter/kernels\n# \u5237\u65b0\u9875\u9762\u5c31\u53ef\u4ee5\u770b\u5230R\u7684kernel\u4e86\uff01\n\ncp -r /root/.local/share/jupyter/kernels/ir /usr/local/share/jupyter/kernels\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py2_py3_update/","title":"python2\u5230python3\u7684\u53d8\u5316","text":"","tags":["Python"]},{"location":"python/pybestpractices/py2_py3_update/#_1","title":"\u6838\u5fc3\u7c7b\u53d8\u66f4","text":"<ul> <li>Python3 \u5bf9 Unicode \u5b57\u7b26\u7684\u539f\u751f\u652f\u6301\u3002</li> <li>Python2 \u4e2d\u4f7f\u7528 ASCII \u7801\u4f5c\u4e3a\u9ed8\u8ba4\u7f16\u7801\u65b9\u5f0f\u5bfc\u81f4 string \u6709\u4e24\u79cd\u7c7b\u578b str \u548c unicode\uff0cPython3 \u53ea \u652f\u6301 unicode \u7684 string\u3002</li> <li>Python3 \u91c7\u7528\u7684\u662f\u7edd\u5bf9\u8def\u5f84\u7684\u65b9\u5f0f\u8fdb\u884c import\u3002</li> <li>Python2 \u4e2d\u76f8\u5bf9\u8def\u5f84\u7684 import \u4f1a\u5bfc\u81f4\u6807\u51c6\u5e93\u5bfc\u5165\u53d8\u5f97\u56f0\u96be\uff08\u60f3\u8c61\u4e00\u4e0b\uff0c\u540c\u4e00\u76ee\u5f55\u4e0b\u6709 file.py\uff0c\u5982 \u4f55\u540c\u65f6\u5bfc\u5165\u8fd9\u4e2a\u6587\u4ef6\u548c\u6807\u51c6\u5e93 file\uff09\u3002</li> <li>Python3 \u7edf\u4e00\u91c7\u7528\u65b0\u5f0f\u7c7b\u3002\u65b0\u5f0f\u7c7b\u58f0\u660e\u8981\u6c42\u7ee7\u627f object\uff0c \u5fc5\u987b\u7528\u65b0\u5f0f\u7c7b\u5e94\u7528\u591a\u91cd\u7ee7\u627f\u3002</li> <li> <p>Python2 \u4e2d\u5b58\u5728\u8001\u5f0f\u7c7b\u548c\u65b0\u5f0f\u7c7b\u7684\u533a\u522b</p> </li> <li> <p>Python3 \u4f7f\u7528\u66f4\u52a0\u4e25\u683c\u7684\u7f29\u8fdb\uff0c 1 \u4e2a tab \u53ea\u80fd\u627e\u53e6\u5916\u4e00\u4e2a tab \u66ff\u4ee3\uff0c\u56e0\u6b64 tab \u548c space \u5171\u5b58\u4f1a\u5bfc\u81f4\u62a5\u9519</p> </li> <li>Python2 \u7684\u7f29\u8fdb\u673a\u5236\u4e2d\uff0c1 \u4e2a tab \u548c 8 \u4e2a space \u662f\u7b49\u4ef7\u7684\uff0c\u6240 \u4ee5\u5728\u7f29\u8fdb\u4e2d\u53ef\u4ee5\u540c\u65f6\u5141\u8bb8 tab \u548c space \u5728\u4ee3\u7801\u4e2d\u5171\u5b58\u3002\u8fd9\u79cd\u7b49\u4ef7\u673a\u5236\u4f1a\u5bfc\u81f4\u90e8\u5206 IDE \u4f7f\u7528\u5b58\u5728\u95ee\u9898\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py2_py3_update/#_2","title":"\u5e9f\u5f03\u7c7b\u53d8\u66f4","text":"<ol> <li>print \u8bed\u53e5\u88ab Python3 \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528 print \u51fd\u6570</li> <li>exec \u8bed\u53e5\u88ab python3 \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528 exec \u51fd\u6570</li> <li>execfile \u8bed\u53e5\u88ab Python3 \u5e9f\u5f03\uff0c\u63a8\u8350\u4f7f\u7528 exec(open(\"./filename\").read())</li> <li>\u4e0d\u76f8\u7b49\u64cd\u4f5c\u7b26\"&lt;&gt;\"\u88ab Python3 \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528\"!=\"</li> <li>long \u6574\u6570\u7c7b\u578b\u88ab Python3 \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528 int</li> <li>xrange \u51fd\u6570\u88ab Python3 \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528 range\uff0cPython3 \u4e2d range \u7684\u673a\u5236\u4e5f\u8fdb\u884c\u4fee\u6539\u5e76\u63d0\u9ad8 \u4e86\u5927\u6570\u636e\u96c6\u751f\u6210\u6548\u7387</li> <li>Python3 \u4e2d\u8fd9\u4e9b\u65b9\u6cd5\u518d\u4e0d\u518d\u8fd4\u56de list \u5bf9\u8c61\uff1adictionary \u5173\u8054\u7684 keys()\u3001values()\u3001items()\uff0czip()\uff0c map()\uff0cfilter()\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7 list \u5f3a\u884c\u8f6c\u6362\uff1a</li> <li>\u8fed\u4ee3\u5668 iterator \u7684 next()\u51fd\u6570\u88ab Python3 \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528 next(iterator)</li> <li>raw_input \u51fd\u6570\u88ab Python3 \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528 input \u51fd\u6570</li> <li>\u5b57\u5178\u53d8\u91cf\u7684 has_key \u51fd\u6570\u88ab Python \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528 in \u5173\u952e\u8bcd</li> <li>file \u51fd\u6570\u88ab Python3 \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528 open \u6765\u5904\u7406\u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7 io.IOBase \u68c0\u67e5\u6587\u4ef6\u7c7b\u578b</li> <li>apply \u51fd\u6570\u88ab Python3 \u5e9f\u5f03</li> <li>\u5f02\u5e38 StandardError \u88ab Python3 \u5e9f\u5f03\uff0c\u7edf\u4e00\u4f7f\u7528 Exception</li> </ol>","tags":["Python"]},{"location":"python/pybestpractices/py2_py3_update/#_3","title":"\u4fee\u6539\u7c7b\u53d8\u66f4","text":"<ol> <li>\u6d6e\u70b9\u6570\u9664\u6cd5\u64cd\u4f5c\u7b26\u201c/\u201d\u548c\u201c//\u201d\u7684\u533a\u522b <ul> <li>\u201c / \u201d\uff1a        Python2\uff1a\u82e5\u4e3a\u4e24\u4e2a\u6574\u5f62\u6570\u8fdb\u884c\u8fd0\u7b97\uff0c\u7ed3\u679c\u4e3a\u6574\u5f62\uff0c\u4f46\u82e5\u4e24\u4e2a\u6570\u4e2d\u6709\u4e00\u4e2a\u4e3a\u6d6e\u70b9\u6570\uff0c\u5219\u7ed3\u679c\u4e3a \u6d6e\u70b9\u6570\uff1b        Python3:\u4e3a\u771f\u9664\u6cd5\uff0c\u8fd0\u7b97\u7ed3\u679c\u4e0d\u518d\u6839\u636e\u53c2\u52a0\u8fd0\u7b97\u7684\u6570\u7684\u7c7b\u578b\u3002 </li> <li>\u201c//\u201d\uff1a        Python2\uff1a\u8fd4\u56de\u5c0f\u4e8e\u9664\u6cd5\u8fd0\u7b97\u7ed3\u679c\u7684\u6700\u5927\u6574\u6570\uff1b\u4ece\u7c7b\u578b\u4e0a\u8bb2\uff0c\u4e0e\"/\"\u8fd0\u7b97\u7b26\u8fd4\u56de\u7c7b\u578b\u903b\u8f91\u4e00\u81f4\u3002        Python3\uff1a\u548c Python2 \u8fd0\u7b97\u7ed3\u679c\u4e00\u6837</li> </ul> </li> <li>\u5f02\u5e38\u629b\u51fa\u548c\u6355\u6349\u673a\u5236\u533a\u522b<ul> <li>py2:       raise IOError, \"file error\" # \u629b\u51fa\u5f02\u5e38       except NameError, err. # \u6355\u6349\u5f02\u5e38</li> <li>py3:       raise IOError(\"file error\")  # \u629b\u51fa\u5f02\u5e38       except IOError(\"file error\")  # \u6355\u6349\u5f02\u5e38</li> </ul> </li> <li>for \u5faa\u73af\u4e2d\u53d8\u91cf\u503c\u533a\u522b<ul> <li>Python2\uff0cfor \u5faa\u73af\u4f1a\u4fee\u6539\u5916\u90e8\u76f8\u540c\u540d\u79f0\u53d8\u91cf\u7684\u503c</li> <li>Python3\uff0cfor \u5faa\u73af\u4e0d\u4f1a\u4fee\u6539\u5916\u90e8\u76f8\u540c\u540d\u79f0\u53d8\u91cf\u7684\u503c</li> </ul> </li> <li>round \u51fd\u6570\u8fd4\u56de\u503c\u533a\u522b<ul> <li>Python2\uff0cround \u51fd\u6570\u8fd4\u56de float \u7c7b\u578b\u503c</li> <li>Python3\uff0cround \u51fd\u6570\u8fd4\u56de int \u7c7b\u578b\u503c</li> </ul> </li> <li>\u6bd4\u8f83\u64cd\u4f5c\u7b26\u533a\u522b<ul> <li>Python2 \u4e2d\u4efb\u610f\u4e24\u4e2a\u5bf9\u8c61\u90fd\u53ef\u4ee5\u6bd4\u8f83</li> <li>Python3\u4e2d\u53ea\u6709\u540c\u4e00\u6570\u636e\u7c7b\u578b\u7684\u5bf9\u8c61\u624d\u80fd\u6bd4\u8f83</li> </ul> </li> </ol>","tags":["Python"]},{"location":"python/pybestpractices/py2_py3_update/#_4","title":"\u7b2c\u4e09\u65b9\u5de5\u5177\u5305\u5dee\u5f02","text":"<ul> <li>\u5728 pip \u5b98\u65b9\u4e0b\u8f7d\u6e90 pypi \u641c\u7d22 Python2.7 \u548c Python3.5 \u7684\u7b2c\u4e09\u65b9\u5de5\u5177\u5305\u6570\u53ef\u4ee5\u53d1\u73b0\uff0c       Python2.7 \u7248\u672c\u5bf9\u5e94\u7684\u7b2c\u4e09\u65b9\u5de5\u5177\u7c7b\u76ee\u6570\u91cf\u662f 28523,Python3.5 \u7248\u672c\u7684\u6570\u91cf\u662f 12457\uff0c\u8fd9\u4e24\u4e2a\u7248\u672c\u5728\u7b2c\u4e09\u65b9\u5de5\u5177 \u5305\u652f\u6301\u6570\u91cf\u5dee\u8ddd\u76f8\u5f53\u5927\u3002  </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py2_py3_update/#_5","title":"\u5de5\u5177\u5b89\u88c5\u95ee\u9898","text":"<ul> <li>windows \u73af\u5883 Python2 \u65e0\u6cd5\u5b89\u88c5 mysqlclient\u3002Python3 \u65e0\u6cd5\u5b89\u88c5 MySQL-python\u3001 flup\u3001functools32\u3001 Gooey\u3001Pywin32\u3001 webencodings\u3002</li> <li>matplotlib \u5728 python3 \u73af\u5883\u4e2d\u5b89\u88c5\u62a5\u9519\uff1aThe following required packages can not be built:freetype, png\u3002\u9700\u8981\u624b\u52a8\u4e0b\u8f7d\u5b89\u88c5\u6e90\u7801\u5305\u5b89\u88c5\u89e3\u51b3\u3002 </li> <li>scipy \u5728 Python3 \u73af\u5883\u4e2d\u5b89\u88c5\u62a5\u9519\uff0cnumpy.distutils.system_info.NotFoundError\uff0c\u9700\u8981\u81ea\u5df1\u624b \u5de5\u4e0b\u8f7d\u5bf9\u5e94\u7684\u5b89\u88c5\u5305\uff0c\u4f9d\u8d56 numpy,pandas \u5fc5\u987b\u4e25\u683c\u6839\u636e python \u7248\u672c\u3001\u64cd\u4f5c\u7cfb\u7edf\u300164 \u4f4d\u4e0e\u5426\u3002\u8fd0\u884c matplotlib \u540e\u53d1\u73b0\u57fa\u7840\u5305 numpy+mkl \u5b89\u88c5\u5931\u8d25\uff0c\u9700\u8981\u81ea\u5df1\u4e0b\u8f7d\uff0c\u56fd\u5185\u6682\u65e0\u4e0b\u8f7d\u6e90 </li> <li>centos \u73af\u5883\u4e0b Python2 \u65e0\u6cd5\u5b89\u88c5 mysql-python \u548c mysqlclient \u5305\uff0c\u62a5\u9519\uff1aEnvironmentError: mysql_config not found\uff0c\u89e3\u51b3\u65b9\u6848\u662f\u5b89\u88c5 mysql-devel \u5305\u89e3\u51b3\u3002\u4f7f\u7528 matplotlib \u62a5\u9519\uff1ano module named _tkinter\uff0c \u5b89\u88c5 Tkinter\u3001tk-devel\u3001tc-devel \u89e3\u51b3\u3002 pywin32 \u4e5f\u65e0\u6cd5\u5728 centos \u73af\u5883\u4e0b\u5b89\u88c5\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/","title":"Python\u4e2d\u7684\u6570\u636e\u7c7b\u578b\u7528\u6cd5\u5256\u6790\u603b\u7ed3","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#_1","title":"\u6982\u5ff5\u540d\u8bcd\u5206\u6790","text":"<p>\u76f8\u4fe1\u5927\u5bb6\u5728Python\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u6216\u591a\u6216\u5c11\u90fd\u542c\u8fc7\u5e8f\u5217\u7c7b\u578b\u3001\u53ef\u53d8\u5e8f\u5217\u7c7b\u578b\u3001\u4e0d\u53ef\u53d8\u5e8f\u5217\u7c7b\u578b\u3001\u5bb9\u5668\u7c7b\u578b\u3001\u6570\u503c\u7c7b\u578b \u7b49\u7b49\u8fd9\u4e9b\u540d\u79f0\u6982\u5ff5\uff0c\u5173\u4e8e\u8fd9\u4e9b\u6982\u5ff5\u540d\u8bcd\u7684\u7406\u89e3\uff0c\u5176\u5b9e\u5728\u7b14\u8005\u4e4b\u524d\u7684\u65e5\u5e38\u4f7f\u7528\u4e2d\u5e76\u6ca1\u6709\u592a\u8fc7\u7ea0\u7ed3\u548c\u523b\u610f\u533a\u5206\uff0c\u4e00\u6b21\u5076\u7136\u7684\u5fc3\u8840\u6765\u6f6e\uff0c\u51b3\u5fc3\u597d\u597d\u76d8\u4e00\u76d8\u8fd9\u4e9b\u5728\u65e5\u5e38\u4f7f\u7528\u4e2d\u88ab\u63d0\u53ca\u591a\u6b21\u7684\u540d\u8bcd\uff0c\u4e0b\u9762\u804a\u4e00\u804a\u7684\u4e2a\u4eba\u7684\u7406\u89e3\u3002</p>","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#_2","title":"\u4e0d\u540c\u89c6\u89d2\u4e0b\u7684\u6570\u636e\u7c7b\u578b","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#sequence","title":"\u5e8f\u5217\u7c7b\u578b\uff08Sequence\uff09\uff1a","text":"<p>\u60f3\u8981\u5f04\u6e05\u695a\u5e8f\u5217\u7c7b\u578b\uff0c\u9996\u5148\u5f97\u7406\u89e3\u6570\u636e\u7ed3\u6784\u4e2d\u5e8f\u5217\u7684\u542b\u4e49</p> <ul> <li>\u4ec0\u4e48\u662f\u5e8f\u5217\uff1f\uff1a</li> <li>\u6982\u5ff5\uff1a\u5e7f\u4e49\u7684\u7406\u89e3\uff0c\u5e8f\u5217\u662f\u4e00\u79cd\u6570\u636e\u5b58\u50a8\u683c\u5f0f\uff0c\u7528\u6765\u5b58\u50a8\u4e00\u7cfb\u5217\u7684\u6570\u636e\u3002</li> <li>\u7279\u70b9\uff1a\u6570\u636e\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u662f\u8fde\u7eed\u7684\u3002</li> <li>\u4ec0\u4e48\u662f\u5e8f\u5217\u7c7b\u578b\uff1f</li> <li>\u6982\u5ff5\uff1a\u5e8f\u5217\u901a\u5e38\u662f\u8ba1\u7b97\u673a\u7f16\u7a0b\u9886\u57df\u5bf9\u6570\u636e\u7ed3\u6784\u57fa\u672c\u7684\u62bd\u8c61\uff0c\u4e0d\u540c\u8bed\u8a00\u57fa\u4e8e\u5e8f\u5217\u90fd\u6709\u7740\u4e0d\u540c\u5b9e\u73b0\u7684\u66f4\u4e0a\u4e00\u5c42\u7684\u5c01\u88c5\u548c\u62bd\u8c61\uff0c\u5728Python\u4e2d\u5bf9\u5176\u62bd\u8c61\u7684\u7c7b\u578b\u5c31\u662f\u5e8f\u5217\u7c7b\u578b\u3002</li> <li>\u7279\u6027\uff1a\u6cdb\u6307\u90a3\u4e9b\u6570\u636e\u7ed3\u6784\u5177\u6709\u7d22\u5f15\u3001\u5207\u7247\u3001\u52a0\u3001\u4e58\u3001\u6210\u5458\u8fd0\u7b97\u7b49\u64cd\u4f5c\u3002\u6bd4\u5982\u8bf4\uff1aList\u3001Tuple\u3001String\u3001Bytes\u3001Array</li> <li>\u5e8f\u5217\u7c7b\u578b\u5206\u7c7b\uff1a</li> <li>\u6839\u636e\u5e8f\u5217\u662f\u5426\u53ef\u4ee5\u88ab\u4fee\u6539\uff1a<ul> <li>\u53ef\u53d8\u5e8f\u5217\uff08MutableSequence\uff09\uff1aList\u3001Array</li> <li>\u4e0d\u53ef\u53d8\u5e8f\u5217\uff08Sequence\uff09\uff1aTuple\u3001String</li> </ul> </li> <li>\u6839\u636e\u5e8f\u5217\u4e2d\u5b58\u50a8\u7684\u662f\u503c\u8fd8\u662f\u5f15\u7528\uff1a<ul> <li>\u6241\u5e73\u5e8f\u5217\uff1a\u5185\u90e8\u5b58\u50a8\u7684\u662f\u503c\uff0c\u901a\u5e38\u6709\uff1aString\u3001Bytes</li> <li>\u5bb9\u5668\u5e8f\u5217\uff1a\u5185\u90e8\u5b58\u50a8\u7684\u662f\u5f15\u7528\uff0c\u901a\u5e38\u6709\uff1aList\u3001Tuple</li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#number","title":"\u6570\u503c\u7c7b\u578b\uff08Number\uff09\uff1a","text":"<ul> <li>\u6570\u503c\u7c7b\u578b\u901a\u5e38\u6307\u7684\u662f\uff1a</li> <li>\u6570\u5b57\u7c7b\u578b\uff1aInt\u3001Bool</li> <li>\u6d6e\u70b9\u7c7b\u578b\uff1aFloat</li> <li>\u590d\u5408\u7c7b\u578b\uff1aComplex</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#container","title":"\u5bb9\u5668\u7c7b\u578b(Container)\uff1a","text":"<p>\u6b64\u5904\u7684\u5bb9\u5668\u7c7b\u578b\u548c\u4e0a\u8ff0\u8bf4\u5230\u7684\u5bb9\u5668\u5e8f\u5217\u5176\u5b9e\u662f\u4e0d\u4e00\u6837\u7684\uff0c \u8fd9\u91cc\u7684\u5bb9\u5668\u7c7b\u578b\u66f4\u591a\u662f\u4ece\u6570\u636e\u7ed3\u6784\u7684\u529f\u80fd\u7279\u6027\u8fdb\u884c\u5206\u7c7b\uff0c\u6cdb\u6307\u90a3\u4e9b\u4e13\u95e8\u7528\u6765\u88c5\u5176\u4ed6\u5bf9\u8c61\u7684\u7279\u6b8a\u6570\u636e\u7c7b\u578b\uff0c\u6bd4\u5982\uff1a</p> <ul> <li>List\uff08\u5217\u8868\uff09\u3001Tuple\uff08\u5143\u7ec4\uff09\u3001Dict\uff08\u5b57\u5178\uff09\u3001Set\uff08\u96c6\u5408\uff09</li> </ul> <p>\u8fd9\u4e5f\u662f\u540e\u6587\u4e3b\u8981\u4ecb\u7ecd\u548c\u5206\u6790\u7684\u51e0\u79cd\u6570\u636e\u7c7b\u578b\u3002</p>","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#_3","title":"\u5bb9\u5668\u7c7b\u578b\u5206\u6790\u4e0e\u5b9e\u8df5","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#list-vs-tuple","title":"List VS Tuple","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#_4","title":"\u57fa\u672c\u77e5\u8bc6\uff1a","text":"<ul> <li> <p>\u8bed\u6cd5 Python<pre><code># list \nl = ['AA', 'BB', 3, 5.5, True]  # list_obj = [\u6570\u636e1, \u6570\u636e2, \u6570\u636e3, \u6570\u636e4......]\n\n# list\u521b\u5efa\u65b9\u5f0f\nl1 = []\nl2 = list()\n\n# ------------------------\n\n# tuple\nt0 = tuple() # \u7a7a\u5143\u7ec4\nt1 =(1,) # \u5355\u4e2a\u6570\u636e\u5143\u7ec4, \u9700\u8981\u6709\u9017\u53f7\nt2 = (1,2.0, \"a\") # \u591a\u4e2a\u6570\u636e\u5143\u7ec4\n</code></pre></p> </li> <li> <p>\u5171\u6027</p> </li> <li>\u5217\u8868\u548c\u5143\u7ec4\u90fd\u662f\u4e00\u4e2a\u53ef\u4ee5\u653e\u7f6e\u4efb\u610f\u6570\u636e\u7c7b\u578b\uff08\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5bf9\u8c61\u3001\u5217\u8868\u7b49\uff09\u7684\u6709\u5e8f\u96c6\u5408\u3002</li> <li>\u7c7b\u6bd4\uff1a\u5728\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\uff0c\u96c6\u5408\u91cc\u5143\u7d20\u7684\u6570\u636e\u4e86\u7c7b\u578b\u901a\u5e38\u90fd\u662f\u4e00\u81f4\u7684\u3002</li> <li>\u533a\u522b\uff1a</li> <li>\u5217\u8868\u662f\u52a8\u6001\u7684\uff0c\u957f\u5ea6\u5927\u5c0f\u4e0d\u56fa\u5b9a\uff0c\u53ef\u4ee5\u5bf9\u5143\u7d20\u8fdb\u884c\u589e\u52a0\u3001\u5220\u9664\u3001\u4fee\u6539</li> <li> <p>\u5143\u7ec4\u662f\u9759\u6001\u7684\uff0c\u957f\u5ea6\u5927\u5c0f\u56fa\u5b9a\uff0c\u65e0\u6cd5\u5bf9\u5143\u7d20\u589e\u52a0\u3001\u5220\u9664\u3001\u4fee\u6539\uff0c\u5982\u679c\u60f3\u8981\u6dfb\u52a0\u5143\u7d20\u9700\u8981\u91cd\u65b0\u7533\u8bf7\u5185\u5b58\u65b0\u5efa\u5143\u7ec4 Python<pre><code># \u5143\u7ec4\u7684\u65b0\u589e\u65b9\u5f0f\nIn [5]: t = (1,2.0,\"a\")\nIn [6]: new_t = t + (True, )\nIn [7]: new_t\nOut[7]: (1, 2.0, 'a', True)\n</code></pre></p> </li> <li> <p>\u529f\u80fd\uff1a</p> </li> <li>\u90fd\u652f\u6301\u7d22\u5f15\u3001\u8d1f\u6570\u7d22\u5f15</li> <li>\u90fd\u652f\u6301\u5207\u7247\u64cd\u4f5c\u3001\u652f\u6301\u591a\u5c42\u5d4c\u5957</li> <li>\u53ef\u4ee5\u901a\u8fc7\u5185\u7f6e\u51fd\u6570list()\u548ctuple()\u76f8\u4e92\u8f6c\u6362</li> <li>\u5217\u8868\uff1a\u652f\u6301\u67e5\u627e\u3001\u904d\u5386\u3001\u589e\u52a0\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u7edf\u8ba1\u3001\u6392\u5e8f\u3001\u53cd\u8f6c\u3001\u62f7\u8d1d\u7b49\u64cd\u4f5c</li> <li>\u5143\u7ec4\uff1a\u652f\u6301\u67e5\u8be2\uff08\u4e0b\u6807\u67e5\u8be2\uff09\u3001\u904d\u5386\u3001\u7edf\u8ba1</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#_5","title":"\u5b9e\u73b0\u539f\u7406","text":"<p>\u80cc\u666f\u62d3\u5c55\uff1a - \u5728\u7a0b\u5e8f\u4e2d\uff0c\u7ecf\u5e38\u9700\u8981\u5c06\u4e00\u7ec4\uff08\u901a\u5e38\u662f\u540c\u4e3a\u67d0\u4e2a\u7c7b\u578b\u7684\uff09\u6570\u636e\u5143\u7d20\u4f5c\u4e3a\u6574\u4f53\u7ba1\u7406\u548c\u4f7f\u7528\uff0c\u9700\u8981\u521b\u5efa\u8fd9\u79cd\u5143\u7d20\u7ec4\uff0c\u7528\u53d8\u91cf\u8bb0\u5f55\u5b83\u4eec\uff0c\u4f20\u8fdb\u4f20\u51fa\u51fd\u6570\u7b49\u3002\u4e00\u7ec4\u6570\u636e\u4e2d\u5305\u542b\u7684\u5143\u7d20\u4e2a\u6570\u53ef\u80fd\u53d1\u751f\u53d8\u5316\uff08\u53ef\u4ee5\u589e\u52a0\u6216\u5220\u9664\u5143\u7d20\uff09\u3002\u5bf9\u4e8e\u8fd9\u79cd\u9700\u6c42\uff0c\u6700\u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6848\u4fbf\u662f\u5c06\u8fd9\u6837\u4e00\u7ec4\u5143\u7d20\u770b\u6210\u4e00\u4e2a\u5e8f\u5217\uff0c\u7528\u5143\u7d20\u5728\u5e8f\u5217\u91cc\u7684\u4f4d\u7f6e\u548c\u987a\u5e8f\uff0c\u8868\u793a\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u67d0\u79cd\u6709\u610f\u4e49\u7684\u4fe1\u606f\uff0c\u6216\u8005\u8868\u793a\u6570\u636e\u4e4b\u95f4\u7684\u67d0\u79cd\u5173\u7cfb\u3002 - \u4e00\u7ec4\u5e8f\u5217\u5143\u7d20\u7684\u7ec4\u7ec7\u5f62\u5f0f\uff0c\u53ef\u4ee5\u5c06\u5176\u62bd\u8c61\u4e3a\u7ebf\u6027\u8868</p> <ul> <li>\u7ebf\u6027\u8868\u4ecb\u7ecd\uff1a</li> <li>\u6839\u636e\u7ebf\u6027\u8868\u7684\u5b9e\u73b0\u5b58\u50a8\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5206\u4e3a\u4e24\u79cd\u5b9e\u73b0\u6a21\u578b\uff1a<ul> <li>\u987a\u5e8f\u8868\uff1a\u5c06\u5143\u7d20\u987a\u5e8f\u7684\u5b58\u653e\u5728\u4e00\u5757\u8fde\u7eed\u7684\u5b58\u50a8\u5757\u4e2d\uff0c\u5143\u7d20\u95f4\u7684\u987a\u5e8f\u5173\u7cfb\u7531\u5b58\u50a8\u5b58\u50a8\u987a\u5e8f\u81ea\u7136\u8868\u793a\u3002</li> <li>\u94fe\u8868\uff1a\u5c06\u5143\u7d20\u5b58\u653e\u5728\u901a\u8fc7\u94fe\u63a5\u6784\u9020\u8d77\u6765\u7684\u4e00\u7cfb\u5217\u5b58\u50a8\u5757\u4e2d\u3002</li> </ul> </li> <li>\u987a\u5e8f\u8868\u4ecb\u7ecd\uff1a</li> <li>\u987a\u5e8f\u8868\u6709\u4e24\u79cd\u5b9e\u73b0\u65b9\u5f0f:<ul> <li>\u4e00\u4f53\u5f0f\u7ed3\u6784\u5b9e\u73b0 \uff1a\u4e00\u4f53\u5f0f\u7ed3\u6784\u7531\u4e8e\u987a\u5e8f\u8868\u4fe1\u606f\u533a\u57df\u6570\u636e\u533a\u8fde\u7eed\u5b58\u50a8\u5728\u4e00\u8d77\uff0c\u60f3\u8981\u66f4\u6362\u6570\u636e\u533a\uff0c\u53ea\u80fd\u6574\u4f53\u642c\u8fc1\uff0c\u8be5\u987a\u5e8f\u8868\u5bf9\u8c61\u6539\u53d8\u4e86\u3002</li> <li>\u5206\u79bb\u5f0f\u7ed3\u6784\u5b9e\u73b0\uff1a\u5206\u79bb\u5f0f\u7ed3\u6784\u60f3\u8981\u66f4\u6362\u6570\u636e\u533a\uff0c\u53ea\u9700\u8981\u5c06\u8868\u4fe1\u606f\u533a\u4e2d\u7684\u6570\u636e\u533a\u94fe\u63a5\u5730\u5740\u66f4\u65b0\u5373\u53ef\uff0c\u8be5\u987a\u5e8f\u8868\u5bf9\u8c61\u4e0d\u53d8\u3002</li> </ul> </li> <li>\u793a\u610f\u56fe\uff1a<ul> <li></li> </ul> </li> <li>list\u5b9e\u73b0\u539f\u7406\uff1a</li> <li>list\u91c7\u7528\u7684\u662f\u4e00\u79cd\u5206\u79bb\u5f0f\u6280\u672f\u5b9e\u73b0\u7684\u52a8\u6001\u987a\u5e8f\u8868\u3002\u5177\u4f53\u7b56\u7565\u662f\uff0c\u5728\u5efa\u7acb\u7a7a\u8868\uff08\u6216\u8005\u5f88\u5c0f\u7684\u8868\uff09\u65f6\uff0c\u7cfb\u7edf\u5206\u914d\u4e00\u5757\u80fd\u5bb9\u7eb38\u4e2a\u5143\u7d20\uff08\u5b57\u8282\uff09\u7684\u5b58\u50a8\u533a\uff0c\u5728\u6267\u884c\u63d2\u5165\u64cd\u4f5c\uff08append\u3001insert\uff09\u65f6,\u5982\u679c\u5143\u7d20\u5b58\u50a8\u533a\u6ee1\u4e86\u5c31\u6362\u4e00\u57574\u500d\u5927\u7684\u5b58\u50a8\u533a\uff0c\u4f46\u5982\u679c\u6b64\u65f6\u7684\u8868\u5f88\u5927\u4e86\uff08\u9600\u503c\uff1a50000\uff09\uff0c\u5219\u7b56\u7565\u8c03\u6574\u4e3a\u91c7\u7528\u52a0\u4e00\u500d\u7684\u65b9\u6cd5\uff0c\u907f\u514d\u51fa\u73b0\u8fc7\u591a\u7a7a\u95f2\u5b58\u50a8\u4f4d\u7f6e\u3002</li> <li>\u4e0a\u8ff0\u7b56\u7565\u5b9e\u73b0\u4e86\u52a8\u6001\u6269\u5bb9\u673a\u5236\uff08over-allocating\uff09\uff0c\u4fdd\u8bc1\u4e86\u5bf9\u8c61\u64cd\u4f5c\u7684\u9ad8\u6548\u6027</li> <li>\u589e\u52a0\u3001\u5220\u9664\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3aO(1)</li> <li>tuple\u5b9e\u73b0\u539f\u7406:</li> <li>\u91c7\u7528\u7684\u4e00\u4f53\u5f0f\u7ed3\u6784\u5b9e\u73b0\u7684\u987a\u5e8f\u8868\u3002</li> <li>\u5b9e\u8df5\uff1a <p>\u4f7f\u7528obj.sizeof()\u8fdb\u884c\u67e5\u770b\u7a7a\u95f4\u5206\u914d\u7684\u5927\u5c0f</p> </li> </ul> Python<pre><code>In [1]: l = []\n\nIn [2]: l.__sizeof__()\nOut[2]: 40      # \u7a7a\u5217\u8868\u7684\u5b58\u50a8\u7a7a\u95f4\u4e3a40\u5b57\u8282\n\nIn [3]: l.append(1)\n\nIn [4]: l.__sizeof__()\nOut[4]: 72     # \u52a0\u5165\u4e86\u5143\u7d201\u4e4b\u540e\uff0c\u5217\u8868\u4e3a\u5176\u5206\u914d\u4e86\u53ef\u4ee5\u5b58\u50a84\u4e2a\u5143\u7d20\u7684\u7a7a\u95f4 (72 - 40)/8 = 4\n\nIn [5]: l.append(2)\n\nIn [6]: l.__sizeof__()\nOut[6]: 72    \n\nIn [7]: l.append(3)\n\nIn [8]: l.__sizeof__()\nOut[8]: 72   # \u7531\u4e8e\u4e4b\u524d\u5206\u914d\u4e86\u7a7a\u95f4\uff0c\u6240\u4ee5\u52a0\u5165\u5143\u7d202\uff0c\u5217\u8868\u7a7a\u95f4\u4e0d\u53d8\n\nIn [9]: l.append(4)\n\nIn [10]: l.__sizeof__()\nOut[10]: 72\n\nIn [11]: l.append(5)\n\nIn [12]: l.__sizeof__()\nOut[12]: 104   # \u539f\u7a7a\u95f4\u4e0d\u8db3\uff0c\u5b9e\u73b0\u52a8\u6269\u5bb9\uff0c\u53c8\u989d\u5916\u5206\u914d\u4e864\u4e2a\u5143\u7d20\u7684\u7a7a\u95f4\n</code></pre> <ul> <li> <p>\u6027\u80fdPK</p> <p>\u4f7f\u7528\uff1apython3 -m timeit \"xxx\" \u6d4b\u8bd5\u6267\u884c\u65f6\u95f4</p> </li> <li> <p>\u5143\u7ec4\u6bd4\u5217\u8868\u66f4\u52a0\u8f7b\u91cf\u7ea7\uff0c\u5bb9\u5668\u5143\u7d20\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u5143\u7ec4\u6027\u80fd\u901f\u5ea6\u8981\u7565\u4f18\u4e8e\u5217\u8868</p> </li> <li>\u5143\u7d20\u5c5e\u4e8e\u9759\u6001\u53d8\u91cf\uff0cPython\u9ed8\u8ba4\u4f1a\u5728\u540e\u53f0\u5bf9\u9759\u6001\u8d44\u6e90\u8fdb\u884c\u7f13\u5b58\uff0c\u5728\u4e0b\u6b21\u521b\u5efa\u76f8\u540c\u5927\u5c0f\u7684\u5143\u7ec4\u65f6\uff0cPython\u4e0d\u4f1a\u5411\u64cd\u4f5c\u7cfb\u7edf\u53d1\u51fa\u8bf7\u6c42\u53bb\u5bfb\u627e\u5185\u5b58\uff0c\u800c\u662f\u76f4\u63a5\u5206\u914d\u4e4b\u95f4\u5df2\u7ecf\u7f13\u5b58\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u56e0\u6b64\u7a0b\u5e8f\u8fd0\u884c\u7684\u6548\u7387\u4f1a\u5927\u5927\u63d0\u9ad8\u3002</li> <li>\u5b9e\u8df5\uff1a Python<pre><code>python3 -m timeit 'x=(1,2,3,4,5,6)'\n20000000 loops, best of 5: 9.97 nsec per loop\npython3 -m timeit 'x=[1,2,3,4,5,6]'\n5000000 loops, best of 5: 50.1 nsec per loop\n\npython3 -m timeit -s 'x=[1,2,3,4,5,6]' 'y=x[3]'\n10000000 loops, best of 5: 22.2 nsec per loop\npython3 -m timeit -s 'x=(1,2,3,4,5,6)' 'y=x[3]'\n10000000 loops, best of 5: 21.9 nsec per loop\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#_6","title":"\u5e94\u7528\u573a\u666f","text":"<ul> <li> <p>\u5bf9\u4e8e\u5b58\u50a8\u7684\u6570\u636e\u548c\u6570\u91cf\u4e0d\u53d8\u7684\u573a\u666f\uff0c\u9009\u62e9\u5143\u7ec4\u66f4\u52a0\u5408\u9002\u3002 Python<pre><code># \u6bd4\u5982\u6709\u4e00\u4e2a\u51fd\u6570\uff0c\u9700\u8981\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5730\u70b9\u7684\u7ecf\u7eac\u5ea6\uff0c\ndef get_location():\n    ..... \n    return (longitude, latitude)\n</code></pre></p> </li> <li> <p>\u5bf9\u4e8e\u5b58\u50a8\u7684\u6570\u636e\u548c\u6570\u91cf\u662f\u53ef\u53d8\u7684\uff0c\u9009\u62e9\u5217\u8868\u66f4\u5408\u9002 Python<pre><code># \u4f8b\u5982\u793e\u4ea4\u5e73\u53f0\u4e0a\u7684\u4e00\u4e2a\u65e5\u5fd7\u529f\u80fd\uff0c\u662f\u7edf\u8ba1\u4e00\u4e2a\u7528\u6237\u5728\u4e00\u5468\u4e4b\u5185\u770b\u4e86\u54ea\u4e9b\u7528\u6237\u7684\u5e16\u5b50\n\nviewer_owner_id_list = [] # \u91cc\u9762\u7684\u6bcf\u4e2a\u5143\u7d20\u8bb0\u5f55\u4e86\u8fd9\u4e2aviewer\u4e00\u5468\u5185\u770b\u8fc7\u7684\u6240\u6709owner\u7684id\nrecords = queryDB(viewer_id) # \u7d22\u5f15\u6570\u636e\u5e93\uff0c\u62ff\u5230\u67d0\u4e2aviewer\u4e00\u5468\u5185\u7684\u65e5\u5fd7\nfor record in records:\n    viewer_owner_id_list.append(record.id)\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_data_struct_summary/#_7","title":"\u5e38\u7528\u51fd\u6570","text":"<ul> <li>list:</li> <li>index()\uff1a\u8fd4\u56de\u6307\u5b9a\u6570\u636e\u6240\u5728\u4f4d\u7f6e\u7684\u4e0b\u6807 \u3002</li> <li>count()\uff1a\u7edf\u8ba1\u6307\u5b9a\u6570\u636e\u5728\u5f53\u524d\u5217\u8868\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u3002</li> <li>len()\uff1a\u8bbf\u95ee\u5217\u8868\u957f\u5ea6\uff0c\u5373\u5217\u8868\u4e2d\u6570\u636e\u7684\u4e2a\u6570\u3002</li> <li>in\uff1a\u5224\u65ad\u6307\u5b9a\u6570\u636e\u5728\u67d0\u4e2a\u5217\u8868\u5e8f\u5217\uff0c\u5982\u679c\u5728\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalse</li> <li>not in\uff1a\u5224\u65ad\u6307\u5b9a\u6570\u636e\u4e0d\u5728\u67d0\u4e2a\u5217\u8868\u5e8f\u5217\uff0c\u5982\u679c\u4e0d\u5728\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalse</li> <li>append()\uff1a\u5217\u8868\u7ed3\u5c3e\u8ffd\u52a0\u6570\u636e;\u5982\u679cappend()\u8ffd\u52a0\u7684\u6570\u636e\u662f\u4e00\u4e2a\u5e8f\u5217\uff0c\u5219\u8ffd\u52a0\u6574\u4e2a\u5e8f\u5217\u5230\u5217\u8868</li> <li>extend()\uff1a\u5217\u8868\u7ed3\u5c3e\u8ffd\u52a0\u6570\u636e\uff0c\u5982\u679c\u6570\u636e\u662f\u4e00\u4e2a\u5e8f\u5217\uff0c\u5219\u5c06\u8fd9\u4e2a\u5e8f\u5217\u7684\u6570\u636e\u9010\u4e00\u6dfb\u52a0\u5230\u5217\u8868\u3002</li> <li>insert()\uff1a\u6307\u5b9a\u4f4d\u7f6e\u65b0\u589e\u6570\u636e\u3002</li> <li>pop()\uff1a\u5220\u9664\u6307\u5b9a\u4e0b\u6807\u7684\u6570\u636e(\u9ed8\u8ba4\u4e3a\u6700\u540e\u4e00\u4e2a)\uff0c\u5e76\u8fd4\u56de\u8be5\u6570\u636e\u3002</li> <li>remove()\uff1a\u79fb\u9664\u5217\u8868\u4e2d\u67d0\u4e2a\u6570\u636e\u7684\u7b2c\u4e00\u4e2a\u5339\u914d\u9879\u3002</li> <li>clear()\uff1a\u6e05\u7a7a\u5217\u8868</li> <li>list.reverse()\u548clist.sort()\u5206\u522b\u8868\u793a\u539f\u5730\u5012\u8f6c\u5217\u8868\u548c\u6392\u5e8f\u3002<ul> <li>\u5143\u7ec4\u6ca1\u6709\u5185\u7f6e\u7684\u8fd9\u4e24\u4e2a\u51fd\u6570</li> </ul> </li> <li>reversed()\u548csorted()\u540c\u6837\u8868\u793a\u5bf9\u5217\u8868/\u5143\u7ec4\u8fdb\u884c\u5012\u8f6c\u548c\u6392\u5e8f<ul> <li>reversed()\u8fd4\u56de\u4e00\u4e2a\u5012\u8f6c\u540e\u7aef\u7684\u8fed\u4ee3\u5668</li> <li>sorted()\u8fd4\u56de\u6392\u597d\u5e8f\u7684\u65b0\u5217\u8868</li> </ul> </li> <li>tuple:</li> <li>index()\uff1a\u67e5\u627e\u67d0\u4e2a\u6570\u636e\uff0c\u5982\u679c\u6570\u636e\u5b58\u5728\u8fd4\u56de\u5bf9\u5e94\u7684\u4e0b\u6807\uff0c\u5426\u5219\u62a5\u9519\uff0c\u8bed\u6cd5\u548c\u5217\u8868\u3001\u5b57\u7b26\u4e32\u7684index\u65b9\u6cd5\u76f8\u540c\u3002</li> <li>count()\uff1a\u7edf\u8ba1\u67d0\u4e2a\u6570\u636e\u5728\u5f53\u524d\u5143\u7ec4\u51fa\u73b0\u7684\u6b21\u6570\u3002</li> <li>len()\uff1a\u7edf\u8ba1\u5143\u7ec4\u4e2d\u6570\u636e\u7684\u4e2a\u6570\u3002    ### </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_dev_tool_selection/","title":"Python\u5e38\u7528\u5f00\u53d1\u5de5\u5177","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_dev_tool_selection/#1-pycharm","title":"\u5de5\u51771: Pycharm","text":"<ul> <li>Pycharm\u4e0b\u8f7d\u94fe\u63a5</li> <li>\u662f\u4e00\u6b3epython \u96c6\u6210\u5f00\u53d1\u73af\u5883\uff08IDE\uff09</li> <li>\u5206\u4e3a\u4e13\u4e1a\u7248\uff08professional-\u9700\u7834\u89e3\uff09\u548c\u793e\u533a\u7248\uff08community-\u514d\u8d39)</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_dev_tool_selection/#pycharmpy","title":"Pycharm\u8bbe\u7f6epy\u6587\u4ef6\u9ed8\u8ba4\u6a21\u7248","text":"<ul> <li>\u8bbe\u7f6e\u65b9\u6cd5</li> <li> <p>Preferences -&gt; Editor -&gt; File and Code Template -&gt; Python Script</p> </li> <li> <p>\u53d8\u91cf\u542b\u4e49\uff1a</p> </li> </ul> Bash<pre><code>${PROJECT_NAME} - \u5f53\u524dProject\u540d\u79f0;\n${NAME} - \u5728\u521b\u5efa\u6587\u4ef6\u7684\u5bf9\u8bdd\u6846\u4e2d\u6307\u5b9a\u7684\u6587\u4ef6\u540d;\n${USER} - \u5f53\u524d\u7528\u6237\u540d;\n${DATE} - \u5f53\u524d\u7cfb\u7edf\u65e5\u671f;\n${TIME} - \u5f53\u524d\u7cfb\u7edf\u65f6\u95f4;\n${YEAR} - \u5e74;\n${MONTH} - \u6708;\n${DAY} - \u65e5;\n${HOUR} - \u5c0f\u65f6;\n${MINUTE} - \u5206\u949f\uff1b\n${PRODUCT_NAME} - \u521b\u5efa\u6587\u4ef6\u7684IDE\u540d\u79f0;\n${MONTH_NAME_SHORT} - \u82f1\u6587\u6708\u4efd\u7f29\u5199, \u5982: Jan, Feb, etc;\n${MONTH_NAME_FULL} - \u82f1\u6587\u6708\u4efd\u5168\u79f0, \u5982: January, February, etc\uff1b\n</code></pre> <ul> <li>\u6a21\u677f</li> </ul> Python<pre><code># -*- coding: utf-8 -*-\n\"\"\"\nAuthor: ssw\nFile: ${NAME}.py\nTime: ${DATE} ${TIME}\n--------------------------------\nChange Activity: ${DATE} ${TIME}\n--------------------------------\nDesc: \n\"\"\"\n\ndef main():\n    pass\n\nif __name__ == '__main__':\n    main()\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_dev_tool_selection/#2-vscode","title":"\u5de5\u51772: vscode","text":"<ul> <li>vscode\u4e0b\u8f7d\u94fe\u63a5</li> <li>\u9700\u8981\u5b89\u88c5Python Plugin</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_dev_tool_selection/#3jupyter-notebok","title":"\u5de5\u51773\uff1aJupyter notebok","text":"<ul> <li>Jupyter\u5b89\u88c5\u8bf4\u660e</li> <li>\u901a\u5e38\u673a\u5668\u5b66\u4e60\u5de5\u7a0b\u5e08\u4f7f\u7528\u8f83\u591a</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_dev_tool_selection/#4ipython","title":"\u5de5\u51774\uff1aIpython","text":"<ul> <li>Ipython\u5b89\u88c5\u8bf4\u660e</li> <li> <p>\u5728\u4ea4\u4e92\u573a\u666f\u4e0b\u4f7f\u7528\uff0c\u53ef\u4ee5\u5feb\u901f\u7f16\u5199demo\u548c\u9a8c\u8bc1</p> </li> <li> <p>\u5e38\u7528\u547d\u4ee4</p> </li> </ul> <p>Python<pre><code>In [2]: ?  # ipython\u7684\u6982\u8ff0\u548c\u7b80\u4ecb\n\nIn [3]: help(name)   # \u67e5\u8be2\u6307\u5b9a\u540d\u79f0\u7684\u5e2e\u52a9   \n\nIn [4]: obj?  # \u5217\u51faobj\u5bf9\u8c61\u7684\u8be6\u7ec6\u4fe1\u606f\n\nIn [5]: obj??  # \u5217\u51fa\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\n</code></pre> - \u7279\u6b8a\u53d8\u91cf</p> <ul> <li>_\u8868\u793a\u524d\u4e00\u6b21\u8f93\u51fa</li> <li>__\u8868\u793a\u5012\u6570\u7b2c\u4e8c\u6b21\u8f93\u51fa</li> <li>___\u8868\u793a\u5230\u5904\u7b2c\u4e09\u6b21\u8f93\u51fa</li> <li>_dh \u76ee\u5f55\u5386\u53f2</li> <li>_oh \u8f93\u51fa\u5386\u53f2</li> </ul> Python<pre><code>In [18]: name = \"ssw\"\n\nIn [19]: name\nOut[19]: 'ssw'\n\nIn [20]: age = 18\n\nIn [21]: age\nOut[21]: 18\n\nIn [22]: gender = \"male\"\n\nIn [23]: gender\nOut[23]: 'male'\n\nIn [24]: _   # \u8868\u793a\u524d\u4e00\u6b21\u8f93\u51fa\nOut[24]: 'male'\n\nIn [25]: __  \nOut[25]: 'male'\n\nIn [26]: ___\nOut[26]: 'male'\n\nIn [27]: _\nOut[27]: 'male'\n\nIn [28]: _dh\nOut[28]: [PosixPath('/Users/roninsswang/Codehub/ronincode/hub-python')]\n\nIn [29]: _oh\nOut[29]:\n{6: '',\n 8: '',\n 9: 'sss',\n 10: 'sss',\n 12: 'sss',\n 13: 14,\n 14: 'sss',\n 15: 'sss',\n 16: [PosixPath('/Users/roninsswang/Codehub/ronincode/hub-python')],\n 19: 'ssw',\n 21: 18,\n 23: 'male',\n 24: 'male',\n 25: 'male',\n 26: 'male',\n 27: 'male',\n 28: [PosixPath('/Users/roninsswang/Codehub/ronincode/hub-python')]}\n\nIn [30]:\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_dev_tool_selection/#shell","title":"shell\u547d\u4ee4","text":"<ul> <li>!ls -l</li> <li>!touch test.txt</li> <li>files= !ls -l | grep py Python<pre><code>In [42]: !ls -l\ntotal 8\n-rw-r--r--   1 roninsswang  staff   33  7 27 06:17 README.md\ndrwxr-xr-x   3 roninsswang  staff   96  7 27 21:10 case_demo\ndrwxr-xr-x  22 roninsswang  staff  704  7 27 06:17 common_utils\ndrwxr-xr-x   4 roninsswang  staff  128  7 27 06:17 db\ndrwxr-xr-x   8 roninsswang  staff  256  7 27 06:17 fastapi_cores\ndrwxr-xr-x   4 roninsswang  staff  128  7 27 06:34 jupyter-practice\ndrwxr-xr-x   3 roninsswang  staff   96  7 27 21:19 python\u5de5\u5320\ndrwxr-xr-x   5 roninsswang  staff  160  7 27 06:17 thirdlibs\n\nIn [43]: !touch test.txt\n\nIn [44]: !ls -l\ntotal 8\n-rw-r--r--   1 roninsswang  staff   33  7 27 06:17 README.md\ndrwxr-xr-x   3 roninsswang  staff   96  7 27 21:10 case_demo\ndrwxr-xr-x  22 roninsswang  staff  704  7 27 06:17 common_utils\ndrwxr-xr-x   4 roninsswang  staff  128  7 27 06:17 db\ndrwxr-xr-x   8 roninsswang  staff  256  7 27 06:17 fastapi_cores\ndrwxr-xr-x   4 roninsswang  staff  128  7 27 06:34 jupyter-practice\ndrwxr-xr-x   3 roninsswang  staff   96  7 27 21:19 python\u5de5\u5320\n-rw-r--r--   1 roninsswang  staff    0  7 28 06:35 test.txt\ndrwxr-xr-x   5 roninsswang  staff  160  7 27 06:17 thirdlibs\n\nIn [45]: files = !ls -l| grep md\n\nIn [46]: files = !ls -l| grep py\n\nIn [47]: files\nOut[47]:\n['drwxr-xr-x   4 roninsswang  staff  128  7 27 06:34 jupyter-practice',\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_dev_tool_selection/#_1","title":"\u9b54\u6cd5\u65b9\u6cd5","text":"<ul> <li>%cd \u6539\u53d8\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\uff0ccd\u53ef\u4ee5\u8ba4\u4e3a\u662f%cd\u7684\u94fe\u63a5\u3002\u8def\u5f84\u5386\u53f2\u5728_dh\u4e2d\u67e5\u770b</li> <li>%pwd\u3001pwd \u663e\u793a\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55</li> <li>%ls \u3001ls \u8fd4\u56de\u6587\u4ef6\u5217\u8868</li> <li>\u6ce8\u610f:%pwd\u8fd9\u79cd\u662f\u9b54\u672f\u65b9\u6cd5\uff0c\u662fIPython\u7684\u5185\u90e8\u5b9e\u73b0\uff0c\u548c\u64cd\u4f5c\u7cfb\u7edf\u65e0\u5173\u3002\u800c!pwd \u5c31\u8981\u4f9d\u8d56\u5f53\u524d\u64cd</li> </ul> <p>\u4f5c\u7cfb\u7edf\u7684shell\u63d0\u4f9b\u7684\u547d\u4ee4\u6267\u884c\uff0c\u9ed8\u8ba4windows\u4e0d\u652f\u6301pwd\u547d\u4ee4</p> <ul> <li>%%js\u3001%%javascript \u5728cell\u4e2d\u8fd0\u884cjs\u811a\u672c</li> </ul> Python<pre><code>In [48]: %cd Desktop\n[Errno 2] No such file or directory: 'Desktop'\n/Users/roninsswang/Codehub/ronincode/hub-python\n\nIn [49]: %pwd\nOut[49]: '/Users/roninsswang/Codehub/ronincode/hub-python'\n\nIn [50]: %ls\nREADME.md         common_utils/     fastapi_cores/       thirdlibs/\ncase_demo/        db/               jupyter-practice/ test.txt\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_logger_usage/","title":"Python\u4e2d\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u65e5\u5fd7\u7684\u65b9\u5f0f","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_logger_usage/#_1","title":"\u65e5\u5fd7\u4e13\u9898\u624b\u518c","text":"<ul> <li> <p>\u65e5\u5fd7\u64cd\u4f5c\u624b\u518c</p> <ul> <li>\u5728\u591a\u4e2a\u6a21\u5757\u4e2d\u4f7f\u7528\u65e5\u5fd7</li> <li>\u5728\u591a\u7ebf\u7a0b\u4e2d\u4f7f\u7528\u65e5\u5fd7</li> <li>\u4f7f\u7528\u591a\u4e2a\u65e5\u5fd7\u5904\u7406\u5668\u548c\u591a\u79cd\u683c\u5f0f\u5316</li> <li>\u5728\u591a\u4e2a\u5730\u65b9\u8bb0\u5f55\u65e5\u5fd7</li> <li>\u65e5\u5fd7\u670d\u52a1\u5668\u914d\u7f6e\u793a\u4f8b</li> <li>\u5904\u7406\u65e5\u5fd7\u5904\u7406\u5668\u7684\u963b\u585e</li> <li>\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u548c\u63a5\u6536\u65e5\u5fd7</li> </ul> </li> <li> <p>\u5728\u65e5\u5fd7\u8bb0\u5f55\u4e2d\u6dfb\u52a0\u4e0a\u4e0b\u6587\u4fe1\u606f</p> <ul> <li>\u4f7f\u7528\u65e5\u5fd7\u9002\u914d\u5668\u4f20\u9012\u4e0a\u4e0b\u6587\u4fe1\u606f</li> <li>\u4f7f\u7528\u9664\u5b57\u5178\u4e4b\u5916\u7684\u5176\u5b83\u5bf9\u8c61\u4f20\u9012\u4e0a\u4e0b\u6587\u4fe1\u606f</li> <li>\u4f7f\u7528\u8fc7\u6ee4\u5668\u4f20\u9012\u4e0a\u4e0b\u6587\u4fe1\u606f</li> </ul> </li> <li> <p>\u4ece\u591a\u4e2a\u8fdb\u7a0b\u8bb0\u5f55\u81f3\u5355\u4e2a\u6587\u4ef6</p> <ul> <li>Using concurrent.futures.ProcessPoolExecutor</li> </ul> </li> <li>\u8f6e\u6362\u65e5\u5fd7\u6587\u4ef6</li> <li>\u4f7f\u7528\u5176\u4ed6\u65e5\u5fd7\u683c\u5f0f\u5316\u65b9\u5f0f</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/","title":"Python\u5b89\u5168\u6307\u5357[\u6458\u5f55]","text":"<p>\u672c\u6587\u5185\u5bb9 Cover: Tencent</p> <p>https://github.com/Tencent/secguide/tree/main</p>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#_1","title":"\u901a\u7528\u7c7b","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#i","title":"I. \u4ee3\u7801\u5b9e\u73b0","text":"<ul> <li> <p>1.1 \u52a0\u5bc6\u7b97\u6cd5</p> </li> <li> <p>\u3010\u5fc5\u987b\u3011\u907f\u514d\u4f7f\u7528\u4e0d\u5b89\u5168\u7684\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5</p> </li> <li> <p>DES\u548c3DES\u5df2\u7ecf\u4e0d\u518d\u9002\u7528\u4e8e\u73b0\u4ee3\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e94\u6539\u4e3a\u4f7f\u7528AES\u3002</p> </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#12","title":"1.2 \u7a0b\u5e8f\u65e5\u5fd7","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#121","title":"1.2.1 \u3010\u5efa\u8bae\u3011\u5bf9\u6bcf\u4e2a\u91cd\u8981\u884c\u4e3a\u90fd\u8bb0\u5f55\u65e5\u5fd7","text":"<ul> <li>\u786e\u4fdd\u91cd\u8981\u884c\u4e3a\u90fd\u8bb0\u5f55\u65e5\u5fd7\uff0c\u4e14\u53ef\u9760\u4fdd\u5b586\u4e2a\u6708\u4ee5\u4e0a\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#122","title":"1.2.2 \u3010\u5efa\u8bae\u3011\u7981\u6b62\u5c06\u672a\u7ecf\u9a8c\u8bc1\u7684\u7528\u6237\u8f93\u5165\u76f4\u63a5\u8bb0\u5f55\u65e5\u5fd7","text":"<ul> <li>\u5f53\u65e5\u5fd7\u6761\u76ee\u5305\u542b\u672a\u7ecf\u51c0\u5316\u7684\u7528\u6237\u8f93\u5165\u65f6\u4f1a\u5f15\u53d1\u8bb0\u5f55\u6ce8\u5165\u6f0f\u6d1e\u3002\u6076\u610f\u7528\u6237\u4f1a\u63d2\u5165\u4f2a\u9020\u7684\u65e5\u5fd7\u6570\u636e\uff0c\u4ece\u800c\u8ba9\u7cfb\u7edf\u7ba1\u7406\u5458\u4ee5\u4e3a\u662f\u7cfb\u7edf\u884c\u4e3a\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#123","title":"1.2.3 \u3010\u5efa\u8bae\u3011\u907f\u514d\u5728\u65e5\u5fd7\u4e2d\u4fdd\u5b58\u654f\u611f\u4fe1\u606f","text":"<ul> <li>\u4e0d\u80fd\u5728\u65e5\u5fd7\u4fdd\u5b58\u5bc6\u7801\uff08\u5305\u62ec\u660e\u6587\u5bc6\u7801\u548c\u5bc6\u6587\u5bc6\u7801\uff09\u3001\u5bc6\u94a5\u548c\u5176\u5b83\u654f\u611f\u4fe1\u606f</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#13","title":"1.3 \u7cfb\u7edf\u53e3\u4ee4","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#131","title":"1.3.1 \u3010\u5fc5\u987b\u3011\u7981\u6b62\u4f7f\u7528\u7a7a\u53e3\u4ee4\u3001\u5f31\u53e3\u4ee4\u3001\u5df2\u6cc4\u9732\u53e3\u4ee4","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#132","title":"1.3.2 \u3010\u5fc5\u987b\u3011\u53e3\u4ee4\u5f3a\u5ea6\u8981\u6c42","text":"<p>\u53e3\u4ee4\u5f3a\u5ea6\u987b\u540c\u65f6\u6ee1\u8db3\uff1a  1. \u5bc6\u7801\u957f\u5ea6\u5927\u4e8e14\u4f4d  2. \u5fc5\u987b\u5305\u542b\u4e0b\u5217\u5143\u7d20\uff1a\u5927\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7279\u6b8a\u5b57\u7b26  3. \u4e0d\u5f97\u4f7f\u7528\u5404\u7cfb\u7edf\u3001\u7a0b\u5e8f\u7684\u9ed8\u8ba4\u521d\u59cb\u5bc6\u7801  4. \u4e0d\u80fd\u4e0e\u6700\u8fd16\u6b21\u4f7f\u7528\u8fc7\u7684\u5bc6\u7801\u91cd\u590d  5. \u4e0d\u5f97\u4e0e\u5176\u4ed6\u5916\u90e8\u7cfb\u7edf\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u7801</p>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#133","title":"1.3.3 \u3010\u5fc5\u987b\u3011\u53e3\u4ee4\u5b58\u50a8\u5b89\u5168","text":"<ul> <li>\u7981\u6b62\u660e\u6587\u5b58\u50a8\u53e3\u4ee4</li> <li>\u7981\u6b62\u4f7f\u7528\u5f31\u5bc6\u7801\u5b66\u7b97\u6cd5\uff08\u5982DES\u548c3DES\uff09\u52a0\u5bc6\u5b58\u50a8\u53e3\u4ee4</li> <li>\u4f7f\u7528\u4e0d\u53ef\u9006\u7b97\u6cd5\u548c\u968f\u673asalt\u5bf9\u53e3\u4ee4\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#134","title":"1.3.4 \u3010\u5fc5\u987b\u3011\u7981\u6b62\u4f20\u9012\u660e\u6587\u53e3\u4ee4","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#135","title":"1.3.5 \u3010\u5fc5\u987b\u3011\u7981\u6b62\u5728\u4e0d\u5b89\u5168\u7684\u4fe1\u9053\u4e2d\u4f20\u8f93\u53e3\u4ee4","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#ii","title":"II. \u914d\u7f6e&amp;\u73af\u5883","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#21-python","title":"2.1 Python\u7248\u672c\u9009\u62e9","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#211-python-36","title":"2.1.1 \u3010\u5efa\u8bae\u3011\u4f7f\u7528Python 3.6+\u7684\u7248\u672c","text":"<ul> <li>\u65b0\u589e\u7684\u9879\u76ee\u5e94\u4f7f\u7528 Python 3.6+</li> </ul> <p>\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u505a\uff1f \u7531\u4e8e Python 2 \u5728 2020 \u5e74\u505c\u6b62\u7ef4\u62a4\uff0c\u76f8\u5173\u7ec4\u4ef6\u7684\u6f0f\u6d1e\u4e0d\u80fd\u5f97\u5230\u53ca\u65f6\u4fee\u590d\u4e0e\u7ef4\u62a4</p>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#22","title":"2.2 \u7b2c\u4e09\u65b9\u5305\u5b89\u5168","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#222","title":"2.2.2 \u3010\u5fc5\u987b\u3011\u7981\u6b62\u4f7f\u7528\u4e0d\u5b89\u5168\u7684\u7ec4\u4ef6","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#23","title":"2.3 \u914d\u7f6e\u4fe1\u606f","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#231","title":"2.3.1 \u3010\u5fc5\u987b\u3011\u5bc6\u94a5\u5b58\u50a8\u5b89\u5168","text":"<ul> <li>\u5728\u4f7f\u7528\u5bf9\u79f0\u5bc6\u7801\u7b97\u6cd5\u65f6\uff0c\u9700\u8981\u4fdd\u62a4\u597d\u52a0\u5bc6\u5bc6\u94a5\u3002\u5f53\u7b97\u6cd5\u6d89\u53ca\u654f\u611f\u3001\u4e1a\u52a1\u6570\u636e\u65f6\uff0c\u53ef\u901a\u8fc7\u975e\u5bf9\u79f0\u7b97\u6cd5\u534f\u5546\u52a0\u5bc6\u5bc6\u94a5\u3002\u5176\u4ed6\u8f83\u4e3a\u4e0d\u654f\u611f\u7684\u6570\u636e\u52a0\u5bc6\uff0c\u53ef\u4ee5\u901a\u8fc7\u53d8\u6362\u7b97\u6cd5\u7b49\u65b9\u5f0f\u4fdd\u62a4\u5bc6\u94a5\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#232","title":"2.3.2 \u3010\u5fc5\u987b\u3011\u7981\u6b62\u786c\u7f16\u7801\u654f\u611f\u914d\u7f6e","text":"<ul> <li>\u7981\u6b62\u5728\u6e90\u7801\u4e2d\u786c\u7f16\u7801AK/SK\u3001IP\u3001\u6570\u636e\u5e93\u8d26\u5bc6\u7b49\u914d\u7f6e\u4fe1\u606f</li> <li>\u5e94\u4f7f\u7528\u914d\u7f6e\u7cfb\u7edf\u6216KMS\u5bc6\u94a5\u7ba1\u7406\u7cfb\u7edf\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#_2","title":"\u540e\u53f0\u7c7b","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#i_1","title":"I. \u4ee3\u7801\u5b9e\u73b0","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#11","title":"1.1 \u8f93\u5165\u9a8c\u8bc1","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#111","title":"1.1.1 \u3010\u5fc5\u987b\u3011\u6309\u7c7b\u578b\u8fdb\u884c\u6570\u636e\u6821\u9a8c","text":"<ul> <li> <p>\u6240\u6709\u7a0b\u5e8f\u5916\u90e8\u8f93\u5165\u7684\u53c2\u6570\u503c\uff0c\u5e94\u8fdb\u884c\u6570\u636e\u6821\u9a8c\u3002\u6821\u9a8c\u5185\u5bb9\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a\u6570\u636e\u957f\u5ea6\u3001\u6570\u636e\u8303\u56f4\u3001\u6570\u636e\u7c7b\u578b\u4e0e\u683c\u5f0f\u3002\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5e94\u62d2\u7edd\u3002</p> </li> <li> <p>\u63a8\u8350\u4f7f\u7528\u7ec4\u4ef6\uff1aCerberus\u3001jsonschema\u3001Django-Validators</p> </li> </ul> Python<pre><code># Cerberus\u793a\u4f8b\nv = Validator({'name': {'type': 'string'}})\nv.validate({'name': 'john doe'})\n\n# jsonschema\u793a\u4f8b\nschema = {\n     \"type\" : \"object\",\n     \"properties\" : {\n         \"price\" : {\"type\" : \"number\"},\n         \"name\" : {\"type\" : \"string\"},\n     },\n}\n\nvalidate(instance={\"name\" : \"Eggs\", \"price\" : 34.99}, schema=schema)\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#12-sql","title":"1.2 SQL\u64cd\u4f5c","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#121_1","title":"1.2.1 \u3010\u5fc5\u987b\u3011\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2","text":"<ul> <li>\u4f7f\u7528\u53c2\u6570\u5316SQL\u8bed\u53e5\uff0c\u5f3a\u5236\u533a\u5206\u6570\u636e\u548c\u547d\u4ee4\uff0c\u907f\u514d\u4ea7\u751fSQL\u6ce8\u5165\u6f0f\u6d1e\u3002</li> </ul> Python<pre><code># \u9519\u8bef\u793a\u4f8b\nimport mysql.connector\n\nmydb = mysql.connector.connect(\n... ...\n)\n\ncur = mydb.cursor()\nuserid = get_id_from_user()\n# \u4f7f\u7528%\u76f4\u63a5\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u62fc\u63a5SQL\u8bed\u53e5\ncur.execute(\"SELECT `id`, `password` FROM `auth_user` WHERE `id`=%s \" % (userid,)) \nmyresult = cur.fetchall()\n</code></pre> Python<pre><code># \u5b89\u5168\u793a\u4f8b\nimport mysql.connector\n\nmydb = mysql.connector.connect(\n... ...\n)\ncur = mydb.cursor()\nuserid = get_id_from_user()\n# \u5c06\u5143\u7ec4\u4ee5\u53c2\u6570\u7684\u5f62\u5f0f\u4f20\u5165\ncur.execute(\"SELECT `id`, `password` FROM `auth_user` WHERE `id`=%s \" , (userid,))\nmyresult = cur.fetchall()\n</code></pre> <ul> <li>\u63a8\u8350\u4f7f\u7528ORM\u6846\u67b6\u6765\u64cd\u4f5c\u6570\u636e\u5e93\uff0c\u5982\uff1a\u4f7f\u7528<code>SQLAlchemy</code>\u3002</li> </ul> Python<pre><code># \u5b89\u88c5sqlalchemy\u5e76\u521d\u59cb\u5316\u6570\u636e\u5e93\u8fde\u63a5\n# pip install sqlalchemy\nfrom sqlalchemy import create_engine\n# \u521d\u59cb\u5316\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u4fee\u6539\u4e3a\u4f60\u7684\u6570\u636e\u5e93\u7528\u6237\u540d\u548c\u5bc6\u7801\nengine = create_engine('mysql+mysqlconnector://user:password@host:port/DATABASE')\n</code></pre> Python<pre><code># \u5f15\u7528\u6570\u636e\u7c7b\u578b\nfrom sqlalchemy import Column, String, Integer, Float\nfrom sqlalchemy.ext.declarative import declarative_base\n\nBase = declarative_base()\n# \u5b9a\u4e49 Player \u5bf9\u8c61:\nclass Player(Base):\n    # \u8868\u7684\u540d\u5b57:\n    __tablename__ = 'player'\n\n    # \u8868\u7684\u7ed3\u6784:\n    player_id = Column(Integer, primary_key=True, autoincrement=True)\n    team_id = Column(Integer)\n    player_name = Column(String(255))\n    height = Column(Float(3, 2))\n</code></pre> Python<pre><code># \u589e\u5220\u6539\u67e5\nfrom sqlalchemy.orm import sessionmaker\n# \u521b\u5efa DBSession \u7c7b\u578b:\nDBSession = sessionmaker(bind=engine)\n# \u521b\u5efa session \u5bf9\u8c61:\nsession = DBSession()\n\n# \u589e:\nnew_player = Player(team_id=101, player_name=\"Tom\", height=1.98)\nsession.add(new_player)\n# \u5220:\nrow = session.query(Player).filter(Player.player_name==\"Tom\").first()\nsession.delete(row)\n# \u6539:\nrow = session.query(Player).filter(Player.player_name==\"Tom\").first()\nrow.height = 1.99\n# \u67e5:\nrows = session.query(Player).filter(Player.height &gt;= 1.88).all()\n\n# \u63d0\u4ea4\u5373\u4fdd\u5b58\u5230\u6570\u636e\u5e93:\nsession.commit()\n# \u5173\u95ed session:\nsession.close()\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#122_1","title":"1.2.2 \u3010\u5fc5\u987b\u3011\u5bf9\u53c2\u6570\u8fdb\u884c\u8fc7\u6ee4","text":"<ul> <li>\u5c06\u63a5\u53d7\u5230\u7684\u5916\u90e8\u53c2\u6570\u52a8\u6001\u62fc\u63a5\u5230SQL\u8bed\u53e5\u65f6\uff0c\u5fc5\u987b\u5bf9\u53c2\u6570\u8fdb\u884c\u5b89\u5168\u8fc7\u6ee4\u3002</li> </ul> Python<pre><code>def sql_filter(sql, max_length=20):\n    dirty_stuff = [\"\\\"\", \"\\\\\", \"/\", \"*\", \"'\", \"=\", \"-\", \"#\", \";\", \"&lt;\", \"&gt;\", \"+\", \n                   \"&amp;\", \"$\", \"(\", \")\", \"%\", \"@\", \",\"]\n    for stuff in dirty_stuff:\n        sql = sql.replace(stuff, \"x\")\n    return sql[:max_length]\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#13_1","title":"1.3 \u6267\u884c\u547d\u4ee4","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#131_1","title":"1.3.1 \u3010\u5efa\u8bae\u3011\u907f\u514d\u76f4\u63a5\u8c03\u7528\u51fd\u6570\u6267\u884c\u7cfb\u7edf\u547d\u4ee4","text":"<ul> <li>\u76f8\u5173\u529f\u80fd\u7684\u5b9e\u73b0\u5e94\u907f\u514d\u76f4\u63a5\u8c03\u7528\u7cfb\u7edf\u547d\u4ee4\uff08\u5982<code>os.system()</code>\u3001<code>os.popen()</code>\u3001<code>subprocess.call()</code>\u7b49\uff09\uff0c\u4f18\u5148\u4f7f\u7528\u5176\u4ed6\u540c\u7c7b\u64cd\u4f5c\u8fdb\u884c\u4ee3\u66ff\uff0c\u6bd4\u5982\uff1a\u901a\u8fc7\u6587\u4ef6\u7cfb\u7edfAPI\u8fdb\u884c\u6587\u4ef6\u64cd\u4f5c\u800c\u975e\u76f4\u63a5\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4</li> <li>\u5982\u8bc4\u4f30\u65e0\u6cd5\u907f\u514d\uff0c\u6267\u884c\u547d\u4ee4\u5e94\u907f\u514d\u62fc\u63a5\u5916\u90e8\u6570\u636e\uff0c\u540c\u65f6\u8fdb\u884c\u6267\u884c\u547d\u4ee4\u7684\u767d\u540d\u5355\u9650\u5236\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#132_1","title":"1.3.2 \u3010\u5fc5\u987b\u3011\u8fc7\u6ee4\u4f20\u5165\u547d\u4ee4\u6267\u884c\u51fd\u6570\u7684\u5b57\u7b26","text":"<ul> <li>\u7a0b\u5e8f\u8c03\u7528\u5404\u7c7b\u51fd\u6570\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u65f6\uff0c\u5982\u679c\u6d89\u53ca\u7684\u547d\u4ee4\u7531\u5916\u90e8\u4f20\u5165\uff0c\u8fc7\u6ee4\u4f20\u5165\u547d\u4ee4\u6267\u884c\u51fd\u6570\u7684\u5b57\u7b26\u3002</li> </ul> Python<pre><code>import os\nimport sys\nimport shlex\n\ndomain = sys.argv[1]\n# \u66ff\u6362\u53ef\u4ee5\u7528\u6765\u6ce8\u5165\u547d\u4ee4\u7684\u5b57\u7b26\u4e3a\u7a7a\nbadchars = \"\\n&amp;;|'\\\"$()`-\"\nfor char in badchars:\n    domain = domain.replace(char, \" \")\n\nresult = os.system(\"nslookup \" + shlex.quote(domain))\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#133_1","title":"1.3.3 \u3010\u5fc5\u987b\u3011\u7981\u6b62\u4e0d\u5b89\u5168\u7684\u4ee3\u7801\u6267\u884c","text":"<ul> <li>\u7981\u6b62\u4f7f\u7528 <code>eval</code> \u51fd\u6570\u5904\u7406\u5b58\u5728\u5916\u90e8\u8f93\u5165\u7684\u6570\u636e\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#14","title":"1.4 \u6587\u4ef6\u64cd\u4f5c","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#141","title":"1.4.1 \u3010\u5fc5\u987b\u3011\u6587\u4ef6\u7c7b\u578b\u9650\u5236","text":"<ul> <li>\u901a\u8fc7\u767d\u540d\u5355\u5bf9\u4e0a\u4f20\u6216\u8005\u4e0b\u8f7d\u7684\u6587\u4ef6\u7c7b\u578b\u3001\u5927\u5c0f\u8fdb\u884c\u4e25\u683c\u6821\u9a8c\u3002\u4ec5\u5141\u8bb8\u4e1a\u52a1\u6240\u9700\u6587\u4ef6\u7c7b\u578b\u4e0a\u4f20\uff0c\u907f\u514d\u4e0a\u4f20\u6728\u9a6c\u3001WebShell\u7b49\u6587\u4ef6\u3002</li> </ul> Python<pre><code>import os\n\nALLOWED_EXTENSIONS = ['txt','jpg','png']\n\ndef allowed_file(filename):\n    if ('.' in filename and \n        '..' not in filename and \n        os.path.splitext(filename)[1].lower() in ALLOWED_EXTENSIONS):\n\n        return filename\n    return None\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#142","title":"1.4.2 \u3010\u5fc5\u987b\u3011\u7981\u6b62\u5916\u90e8\u6587\u4ef6\u5b58\u50a8\u4e8e\u53ef\u6267\u884c\u76ee\u5f55","text":"<ul> <li>\u7981\u6b62\u5916\u90e8\u6587\u4ef6\u5b58\u50a8\u4e8eWEB\u5bb9\u5668\u7684\u53ef\u6267\u884c\u76ee\u5f55\uff08appBase\uff09\u3002\u5efa\u8bae\u4f7f\u7528 tempfile \u5e93\u5904\u7406\u4e34\u65f6\u6587\u4ef6\u548c\u4e34\u65f6\u76ee\u5f55\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#143","title":"1.4.3 \u3010\u5fc5\u987b\u3011\u907f\u514d\u8def\u5f84\u7a7f\u8d8a","text":"<ul> <li>\u4fdd\u5b58\u5728\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u65f6\uff0c\u5fc5\u987b\u5bf9\u8def\u5f84\u8fdb\u884c\u5408\u6cd5\u6821\u9a8c\uff0c\u907f\u514d\u76ee\u5f55\u7a7f\u8d8a\u6f0f\u6d1e</li> </ul> Python<pre><code>import os\n\nupload_dir = '/tmp/upload/' # \u9884\u671f\u7684\u4e0a\u4f20\u76ee\u5f55\nfile_name = '../../etc/hosts' # \u7528\u6237\u4f20\u5165\u7684\u6587\u4ef6\u540d\nabsolute_path = os.path.join(upload_dir, file_name) # /tmp/upload/../../etc/hosts\nnormalized_path = os.path.normpath(absolute_path) # /etc/hosts\nif not normalized_path.startswith(upload_dir): # \u68c0\u67e5\u6700\u7ec8\u8def\u5f84\u662f\u5426\u5728\u9884\u671f\u7684\u4e0a\u4f20\u76ee\u5f55\u4e2d\n    raise IOError()\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#144-xml","title":"1.4.4 \u3010\u5fc5\u987b\u3011\u7981\u7528XML\u5916\u90e8\u5b9e\u4f53\u7684\u65b9\u6cd5","text":"<ul> <li> <p>\u7981\u7528XML\u5916\u90e8\u5b9e\u4f53\u7684\u65b9\u6cd5\uff0c\u6765\u9884\u9632XXE\u653b\u51fb\u3002</p> Python<pre><code>from lxml import etree\n\nxmlData = etree.parse(xmlSource,etree.XMLParser(resolve_entities=False))\n</code></pre> </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#145","title":"1.4.5 \u3010\u5fc5\u987b\u3011\u7981\u7528\u4e0d\u5b89\u5168\u7684\u53cd\u5e8f\u5217\u5316\u51fd\u6570","text":"<ul> <li>\u7981\u7528<code>yaml.unsafe_load()</code>\u51fd\u6570\u53cd\u5e8f\u5217\u5316YAML\u6570\u636e\uff0c\u6765\u907f\u514d\u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e\u6267\u884c\u6f0f\u6d1e\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#146","title":"1.4.6 \u3010\u5efa\u8bae\u3011\u907f\u514d\u8def\u5f84\u62fc\u63a5","text":"<ul> <li>\u6587\u4ef6\u76ee\u5f55\u907f\u514d\u5916\u90e8\u53c2\u6570\u62fc\u63a5\u3002\u4fdd\u5b58\u6587\u4ef6\u76ee\u5f55\u5efa\u8bae\u540e\u53f0\u5199\u6b7b\u5e76\u5bf9\u6587\u4ef6\u540d\u8fdb\u884c\u6821\u9a8c\uff08\u5b57\u7b26\u7c7b\u578b\u3001\u957f\u5ea6\uff09\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#147-hash","title":"1.4.7 \u3010\u5efa\u8bae\u3011\u6587\u4ef6\u540dhash\u5316\u5904\u7406","text":"<ul> <li>\u5efa\u8bae\u6587\u4ef6\u4fdd\u5b58\u65f6\uff0c\u5c06\u6587\u4ef6\u540d\u66ff\u6362\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\u3002</li> </ul> Python<pre><code>import uuid\n\ndef random_filename(filename):\n    ext = os.path.splitext(filename)[1]\n    new_filename = uuid.uuid4().hex + ext\n    return new_filename\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#15","title":"1.5 \u7f51\u7edc\u8bf7\u6c42","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#151","title":"1.5.1 \u3010\u5fc5\u987b\u3011\u9650\u5b9a\u8bbf\u95ee\u7f51\u7edc\u8d44\u6e90\u5730\u5740\u8303\u56f4","text":"<p>\u5f53\u7a0b\u5e8f\u9700\u8981\u4ece\u7528\u6237\u6307\u5b9a\u7684<code>URL\u5730\u5740\u83b7\u53d6\u7f51\u9875\u6587\u672c\u5185\u5bb9</code>\u3001<code>\u52a0\u8f7d\u6307\u5b9a\u5730\u5740\u7684\u56fe\u7247</code>\u3001<code>\u8fdb\u884c\u4e0b\u8f7d</code>\u7b49\u64cd\u4f5c\u65f6\uff0c\u9700\u8981\u5bf9URL\u5730\u5740\u8fdb\u884c\u5b89\u5168\u6821\u9a8c\uff1a</p> <ol> <li> <p>\u53ea\u5141\u8bb8HTTP\u6216HTTPS\u534f\u8bae</p> </li> <li> <p>\u89e3\u6790\u76ee\u6807URL\uff0c\u83b7\u53d6\u5176host</p> </li> <li> <p>\u89e3\u6790host\uff0c\u83b7\u53d6host\u6307\u5411\u7684IP\u5730\u5740\u8f6c\u6362\u6210long\u578b</p> </li> <li> <p>\u68c0\u67e5IP\u5730\u5740\u662f\u5426\u4e3a\u5185\u7f51IP</p> </li> </ol> Python<pre><code># \u4ee5RFC\u5b9a\u4e49\u7684\u4e13\u6709\u7f51\u7edc\u4e3a\u4f8b\uff0c\u5982\u6709\u81ea\u5b9a\u4e49\u79c1\u6709\u7f51\u6bb5\u4ea6\u5e94\u52a0\u5165\u7981\u6b62\u8bbf\u95ee\u5217\u8868\u3002\n10.0.0.0/8\n172.16.0.0/12\n192.168.0.0/16\n127.0.0.0/8\n</code></pre> <ol> <li> <p>\u8bf7\u6c42URL</p> </li> <li> <p>\u5982\u679c\u6709\u8df3\u8f6c\uff0c\u8df3\u8f6c\u540e\u6267\u884c1\uff0c\u5426\u5219\u5bf9URL\u53d1\u8d77\u8bf7\u6c42</p> </li> </ol>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#16","title":"1.6 \u54cd\u5e94\u8f93\u51fa","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#161-http","title":"1.6.1 \u3010\u5fc5\u987b\u3011\u8bbe\u7f6e\u6b63\u786e\u7684HTTP\u54cd\u5e94\u5305\u7c7b\u578b","text":"<p>\u54cd\u5e94\u5305\u7684HTTP\u5934\u201cContent-Type\u201d\u5fc5\u987b\u6b63\u786e\u914d\u7f6e\u54cd\u5e94\u5305\u7684\u7c7b\u578b\uff0c\u7981\u6b62\u975eHTML\u7c7b\u578b\u7684\u54cd\u5e94\u5305\u8bbe\u7f6e\u4e3a\u201ctext/html\u201d\u3002</p>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#162-http","title":"1.6.2 \u3010\u5fc5\u987b\u3011\u8bbe\u7f6e\u5b89\u5168\u7684HTTP\u54cd\u5e94\u5934","text":"<ul> <li>X-Content-Type-Options</li> </ul> <p>\u6dfb\u52a0\u201cX-Content-Type-Options\u201d\u54cd\u5e94\u5934\u5e76\u5c06\u5176\u503c\u8bbe\u7f6e\u4e3a\u201cnosniff \u201d</p> <ul> <li> <p>HttpOnly    \u63a7\u5236\u7528\u6237\u767b\u9274\u6743\u7684Cookie\u5b57\u6bb5 \u5e94\u5f53\u8bbe\u7f6eHttpOnly\u5c5e\u6027\u4ee5\u9632\u6b62\u88abXSS\u6f0f\u6d1e/JavaScript\u64cd\u7eb5\u6cc4\u6f0f\u3002</p> </li> <li> <p>X-Frame-Options</p> </li> </ul> <p>\u8bbe\u7f6eX-Frame-Options\u54cd\u5e94\u5934\uff0c\u5e76\u6839\u636e\u9700\u6c42\u5408\u7406\u8bbe\u7f6e\u5176\u5141\u8bb8\u8303\u56f4\u3002\u8be5\u5934\u7528\u4e8e\u6307\u793a\u6d4f\u89c8\u5668\u7981\u6b62\u5f53\u524d\u9875\u9762\u5728frame\u3001 iframe\u3001embed\u7b49\u6807\u7b7e\u4e2d\u5c55\u73b0\u3002\u4ece\u800c\u907f\u514d\u70b9\u51fb\u52ab\u6301\u95ee\u9898\u3002\u5b83\u6709\u4e09\u4e2a\u53ef\u9009\u7684\u503c: DENY: \u6d4f\u89c8\u5668\u4f1a\u62d2\u7edd\u5f53\u524d\u9875\u9762\u52a0 \u8f7d\u4efb\u4f55frame\u9875\u9762; SAMEORIGIN:\u5219frame\u9875\u9762\u7684\u5730\u5740\u53ea\u80fd\u4e3a\u540c\u6e90\u57df\u540d\u4e0b\u7684\u9875\u9762 ALLOW-FROM origin:\u53ef\u4ee5\u5b9a \u4e49\u5141\u8bb8frame\u52a0\u8f7d\u7684\u9875\u9762\u5730\u5740\u3002</p>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#163","title":"1.6.3 \u3010\u5fc5\u987b\u3011\u5bf9\u5916\u8f93\u51fa\u9875\u9762\u5305\u542b\u7b2c\u4e09\u65b9\u6570\u636e\u65f6\u987b\u8fdb\u884c\u7f16\u7801\u5904\u7406","text":"<ul> <li>\u5f53\u54cd\u5e94\u201cContent-Type\u201d\u4e3a\u201ctext/html\u201d\u7c7b\u578b\u65f6\uff0c\u9700\u8981\u5bf9\u54cd\u5e94\u4f53\u8fdb\u884c\u7f16\u7801\u5904\u7406</li> </ul> Python<pre><code># \u63a8\u8350\u4f7f\u7528mozilla\u7ef4\u62a4\u7684bleach\u5e93\u6765\u8fdb\u884c\u8fc7\u6ee4\nimport bleach\nbleach.clean('an &lt;script&gt;evil()&lt;/script&gt; example')\n# u'an &amp;lt;script&amp;gt;evil()&amp;lt;/script&amp;gt; example'\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#17","title":"1.7 \u6570\u636e\u8f93\u51fa","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#171","title":"1.7.1 \u3010\u5fc5\u987b\u3011\u654f\u611f\u6570\u636e\u52a0\u5bc6\u5b58\u50a8","text":"<ul> <li>\u654f\u611f\u6570\u636e\u5e94\u4f7f\u7528SHA2\u3001RSA\u7b49\u7b97\u6cd5\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8</li> <li>\u654f\u611f\u6570\u636e\u5e94\u4f7f\u7528\u72ec\u7acb\u7684\u5b58\u50a8\u5c42\uff0c\u5e76\u5728\u8bbf\u95ee\u5c42\u5f00\u542f\u8bbf\u95ee\u63a7\u5236</li> <li>\u5305\u542b\u654f\u611f\u4fe1\u606f\u7684\u4e34\u65f6\u6587\u4ef6\u6216\u7f13\u5b58\u4e00\u65e6\u4e0d\u518d\u9700\u8981\u5e94\u7acb\u523b\u5220\u9664</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#172","title":"1.7.2 \u3010\u5fc5\u987b\u3011\u654f\u611f\u4fe1\u606f\u5fc5\u987b\u7531\u540e\u53f0\u8fdb\u884c\u8131\u654f\u5904\u7406","text":"<ul> <li>\u654f\u611f\u4fe1\u606f\u987b\u518d\u540e\u53f0\u8fdb\u884c\u8131\u654f\u540e\u8fd4\u56de\uff0c\u7981\u6b62\u63a5\u53e3\u8fd4\u56de\u654f\u611f\u4fe1\u606f\u4ea4\u7531\u524d\u7aef/\u5ba2\u6237\u7aef\u8fdb\u884c\u8131\u654f\u5904\u7406\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#173","title":"1.7.3 \u3010\u5fc5\u987b\u3011\u9ad8\u654f\u611f\u4fe1\u606f\u7981\u6b62\u5b58\u50a8\u3001\u5c55\u793a","text":"<ul> <li>\u53e3\u4ee4\u3001\u5bc6\u4fdd\u7b54\u6848\u3001\u751f\u7406\u6807\u8bc6\u7b49\u9274\u6743\u4fe1\u606f\u7981\u6b62\u5c55\u793a</li> <li>\u975e\u91d1\u878d\u7c7b\u4e1a\u52a1\uff0c\u4fe1\u7528\u5361cvv\u7801\u53ca\u65e5\u5fd7\u7981\u6b62\u5b58\u50a8</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#174","title":"1.7.4 \u3010\u5fc5\u987b\u3011\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u8131\u654f\u5c55\u793a","text":"<p>\u5728\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\u7684\u60c5\u51b5\u4e0b\uff0c\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u9700\u8131\u654f\u5c55\u793a\u3002</p> <ul> <li>\u8eab\u4efd\u8bc1\u53ea\u663e\u793a\u7b2c\u4e00\u4f4d\u548c\u6700\u540e\u4e00\u4f4d\u5b57\u7b26\uff0c\u59823****1\u3002</li> <li>\u79fb\u52a8\u7535\u8bdd\u53f7\u7801\u9690\u85cf\u4e2d\u95f46\u4f4d\u5b57\u7b26\uff0c\u5982134**48\u3002</li> <li>\u5de5\u4f5c\u5730\u5740/\u5bb6\u5ead\u5730\u5740\u6700\u591a\u663e\u793a\u5230\u201c\u533a\u201d\u4e00\u7ea7\u3002</li> <li>\u94f6\u884c\u5361\u53f7\u4ec5\u663e\u793a\u6700\u540e4\u4f4d\u5b57\u7b26\uff0c\u5982****8639</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#175","title":"1.7.5 \u3010\u5fc5\u987b\u3011\u9690\u85cf\u540e\u53f0\u5730\u5740","text":"<ul> <li>\u82e5\u7a0b\u5e8f\u5bf9\u5916\u63d0\u4f9b\u4e86\u767b\u5f55\u540e\u53f0\u5730\u5740\uff0c\u5e94\u4f7f\u7528\u968f\u673a\u5b57\u7b26\u4e32\u9690\u85cf\u5730\u5740\u3002</li> </ul> Python<pre><code># \u4e0d\u8981\u91c7\u53d6\u8fd9\u79cd\u65b9\u5f0f\nadmin_login_url = \"xxxx/login\"\n</code></pre> Python<pre><code># \u5b89\u5168\u793a\u4f8b\nadmin_login_url = \"xxxx/ranD0Str\"\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#18","title":"1.8 \u6743\u9650\u7ba1\u7406","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#181","title":"1.8.1 \u3010\u5fc5\u987b\u3011\u9ed8\u8ba4\u9274\u6743","text":"<ul> <li>\u9664\u975e\u8d44\u6e90\u5b8c\u5168\u53ef\u5bf9\u5916\u5f00\u653e\uff0c\u5426\u5219\u7cfb\u7edf\u9ed8\u8ba4\u8fdb\u884c\u8eab\u4efd\u8ba4\u8bc1\uff08\u4f7f\u7528\u767d\u540d\u5355\u7684\u65b9\u5f0f\u653e\u5f00\u4e0d\u9700\u8981\u8ba4\u8bc1\u7684\u63a5\u53e3\u6216\u9875\u9762\uff09\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#182","title":"1.8.2 \u3010\u5fc5\u987b\u3011\u6388\u6743\u9075\u5faa\u6700\u5c0f\u6743\u9650\u539f\u5219","text":"<ul> <li>\u7a0b\u5e8f\u9ed8\u8ba4\u7528\u6237\u5e94\u4e0d\u5177\u5907\u4efb\u4f55\u64cd\u4f5c\u6743\u9650\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#183","title":"1.8.3 \u3010\u5fc5\u987b\u3011\u907f\u514d\u8d8a\u6743\u8bbf\u95ee","text":"<ul> <li> <p>\u5bf9\u4e8e\u975e\u516c\u5171\u64cd\u4f5c\uff0c\u5e94\u5f53\u6821\u9a8c\u5f53\u524d\u8bbf\u95ee\u8d26\u53f7\u8fdb\u884c\u64cd\u4f5c\u6743\u9650\uff08\u5e38\u89c1\u4e8eCMS\uff09\u548c\u6570\u636e\u6743\u9650\u6821\u9a8c\u3002</p> </li> <li> <p>\u9a8c\u8bc1\u5f53\u524d\u7528\u6237\u7684\u767b\u5f55\u6001\uff1b</p> </li> <li>\u4ece\u53ef\u4fe1\u7ed3\u6784\u4e2d\u83b7\u53d6\u7ecf\u8fc7\u6821\u9a8c\u7684\u5f53\u524d\u8bf7\u6c42\u8d26\u53f7\u7684\u8eab\u4efd\u4fe1\u606f\uff08\u5982\uff1asession\uff09\uff0c\u7981\u6b62\u4ece\u7528\u6237\u8bf7\u6c42\u53c2\u6570\u6216Cookie\u4e2d\u83b7\u53d6\u5916\u90e8\u4f20\u5165\u4e0d\u53ef\u4fe1\u7528\u6237\u8eab\u4efd\u76f4\u63a5\u8fdb\u884c\u67e5\u8be2\uff1b</li> <li>\u6821\u9a8c\u5f53\u524d\u7528\u6237\u662f\u5426\u5177\u5907\u8be5\u64cd\u4f5c\u6743\u9650\uff1b</li> <li>\u6821\u9a8c\u5f53\u524d\u7528\u6237\u662f\u5426\u5177\u5907\u6240\u64cd\u4f5c\u6570\u636e\u7684\u6743\u9650\uff1b</li> <li>\u6821\u9a8c\u5f53\u524d\u64cd\u4f5c\u662f\u5426\u8d26\u6237\u662f\u5426\u9884\u671f\u8d26\u6237\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#184","title":"1.8.4 \u3010\u5efa\u8bae\u3011\u53ca\u65f6\u6e05\u7406\u4e0d\u9700\u8981\u7684\u6743\u9650","text":"<ul> <li>\u7a0b\u5e8f\u5e94\u5b9a\u671f\u6e05\u7406\u975e\u5fc5\u9700\u7528\u6237\u7684\u6743\u9650\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#19","title":"1.9 \u5f02\u5e38\u5904\u7406","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#191","title":"1.9.1 \u3010\u5fc5\u987b\u3011\u4e0d\u5411\u5bf9\u5916\u9519\u8bef\u63d0\u793a","text":"<ul> <li>\u5e94\u5408\u7406\u4f7f\u7528<code>try/except/finally</code> \u5904\u7406\u7cfb\u7edf\u5f02\u5e38\uff0c\u907f\u514d\u51fa\u9519\u4fe1\u606f\u8f93\u51fa\u5230\u524d\u7aef\u3002</li> <li>\u5bf9\u5916\u73af\u5883\u7981\u6b62\u5f00\u542fdebug\u6a21\u5f0f\uff0c\u6216\u5c06\u7a0b\u5e8f\u8fd0\u884c\u65e5\u5fd7\u8f93\u51fa\u5230\u524d\u7aef\u3002</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#192","title":"1.9.2 \u3010\u5fc5\u987b\u3011\u7981\u6b62\u5f02\u5e38\u629b\u51fa\u654f\u611f\u4fe1\u606f","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#110-flask","title":"1.10 Flask\u5b89\u5168","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#1101","title":"1.10.1 \u3010\u5fc5\u987b\u3011\u751f\u4ea7\u73af\u5883\u5173\u95ed\u8c03\u8bd5\u6a21\u5f0f","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#1102-flask","title":"1.10.2 \u3010\u5efa\u8bae\u3011\u9075\u5faaFlask\u5b89\u5168\u89c4\u8303","text":"<ul> <li>\u53c2\u8003Flask\u6587\u6863\u4e2d\u7684\u5b89\u5168\u6ce8\u610f\u4e8b\u9879 https://flask.palletsprojects.com/en/latest/security/</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#111-django","title":"1.11 Django\u5b89\u5168","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#1111","title":"1.11.1 \u3010\u5fc5\u987b\u3011\u751f\u4ea7\u73af\u5883\u5173\u95ed\u8c03\u8bd5\u6a21\u5f0f","text":"","tags":["Python"]},{"location":"python/pybestpractices/py_security_guide/#1112-django","title":"1.11.2 \u3010\u5efa\u8bae\u3011\u4fdd\u6301Django\u81ea\u5e26\u7684\u5b89\u5168\u7279\u6027\u5f00\u542f","text":"<ul> <li> <p>\u4fdd\u6301Django\u81ea\u5e26\u7684\u5b89\u5168\u7279\u6027\u5f00\u542f https://docs.djangoproject.com/en/3.0/topics/security/</p> </li> <li> <p>\u5728\u9ed8\u8ba4\u914d\u7f6e\u4e0b\uff0cDjango\u81ea\u5e26\u7684\u5b89\u5168\u7279\u6027\u5bf9XSS\u3001CSRF\u3001SQL\u6ce8\u5165\u3001\u70b9\u51fb\u52ab\u6301\u7b49\u7c7b\u578b\u6f0f\u6d1e\u53ef\u4ee5\u8d77\u5230\u8f83\u597d\u9632\u62a4\u6548\u679c\u3002\u5e94\u5c3d\u91cf\u907f\u514d\u5173\u95ed\u8fd9\u4e9b\u5b89\u5168\u7279\u6027\u3002</p> </li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/","title":"\u4f7f\u7528pypi\u8fdb\u884cpython\u5305\u7684\u53d1\u5e03","text":"<p>\u53d1\u5e03pypi python\u5305\uff0c\u6253\u5305\u8f6f\u4ef6\u5305\u65f6\uff0c\u4e3b\u8981\u4f9d\u8d56setuptools\u3002 Bash<pre><code>pip install setuptools\n</code></pre></p>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#pypi","title":"\u4e00\u3001\u6ce8\u518cpypi\u8d26\u53f7","text":"<p>pypi register</p> <p>1\u3001\u70b9\u51fbregister 2\u3001\u586b\u5199\u540d\u5b57\uff0c\u5bc6\u7801\uff0c\u90ae\u4ef6</p> <p>\u8bb0\u4f4f\u81ea\u5df1\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u540e\u9762\u4e0a\u4f20\u7684\u65f6\u5019\u9700\u8981\u8f93\u5165</p>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#python","title":"\u4e8c\u3001\u51c6\u5907\u81ea\u5df1\u7684python\u6e90\u7801","text":"<p>\u7565</p>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#setup","title":"\u4e09\u3001\u51c6\u5907setup\u6587\u4ef6\uff08\u5168\u90e8\u653e\u5728\u6e90\u7801\u6839\u76ee\u5f55\uff09","text":"","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#1setupcfg","title":"1\u3001\u51c6\u5907setup.cfg","text":"Bash<pre><code>[bdist_wheel]\nuniversal = 1\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#2readmerst","title":"2\u3001\u51c6\u5907README.rst\uff0c","text":"<p>\u5177\u4f53\u8bed\u6cd5\u53ef\u4ee5\u53c2\u8003http://rest-sphinx-memo.readthedocs.io/en/latest/ReST.html Bash<pre><code>========\nautopep8\n========\n\n.. image:: https://img.shields.io/pypi/v/autopep8.svg\n    :target: https://pypi.org/project/autopep8/\n    :alt: PyPI Version\n\n.. image:: https://travis-ci.org/hhatto/autopep8.svg?branch=master\n    :target: https://travis-ci.org/hhatto/autopep8\n    :alt: Build status\n.. contents::\n\n\nInstallation\n============\n\nFrom pip::\n\n    $ pip install --upgrade autopep8\n\nConsider using the ``--user`` option_.\n\n.. _option: https://pip.pypa.io/en/latest/user_guide/#user-installs\n\n\nRequirements\n============\n\nautopep8 requires pycodestyle_.\n\n.. _pycodestyle: https://github.com/PyCQA/pycodestyle\n</code></pre></p>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#3setuppy","title":"3\u3001\u51c6\u5907setup.py","text":"<ul> <li>version\uff1a\u5305\u7248\u672c\uff0c\u66f4\u65b0\u5305\u65f6\u66f4\u65b0\u7248\u672c\u53f7</li> <li>name\uff1a\u5305\u540d\u79f0</li> <li>long_description\uff1a\u5fc5\u987b\u662frst\uff08reStructuredText\uff09\u683c\u5f0f\uff0c\u8fd9\u4e2a\u5185\u5bb9\u4f1a\u663e\u793a\u5728pypi\u5305\u9996\u9875\uff0c\u5177\u4f53\u8bed\u6cd5\u53ef\u4ee5\u53c2\u8003http://restsphinxmemo.readthedocs.io/en/latest/ReST.html</li> <li>install_requires\uff1a\u7533\u660e\u4f9d\u8d56\u5305\u3002\u5b89\u88c5\u5305\u662fpip\u4f1a\u81ea\u52a8\u5b89\u88c5</li> <li>packages = findpackages()\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f\u5bfc\u5165\u76ee\u5f55\u4e0b\u7684\u6240\u6709_init.py\u5305 Bash<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n\"\"\"Setup for autopep8.\"\"\"\n\nimport ast\nimport io\n\nfrom setuptools import setup\n\n\nINSTALL_REQUIRES = (\n    ['pycodestyle &gt;= 2.5.0']\n)\n\n\ndef version():\n    \"\"\"Return version string.\"\"\"\n    with io.open('autopep8.py') as input_file:\n        for line in input_file:\n            if line.startswith('__version__'):\n                return ast.parse(line).body[0].value.s\n\n\nwith io.open('README.rst') as readme:\n    setup(\n        name='hlautopep8',\n        version=version(),\n        description='A tool that automatically formats Python code to conform '\n                    'to the PEP 8 style guide',\n        long_description=readme.read(),\n        license='Expat License',\n        author='tmp',\n        author_email='tmp@gmail.com',\n        url='https://tmp/autopep8',\n        classifiers=[\n            'Development Status :: 5 - Production/Stable',\n            'Environment :: Console',\n            'Intended Audience :: Developers',\n            'License :: OSI Approved :: MIT License',\n            'Operating System :: OS Independent',\n            'Programming Language :: Python',\n            'Programming Language :: Python :: 2',\n            'Programming Language :: Python :: 2.7',\n            'Programming Language :: Python :: 3',\n            'Programming Language :: Python :: 3.4',\n            'Programming Language :: Python :: 3.5',\n            'Programming Language :: Python :: 3.6',\n            'Programming Language :: Python :: 3.7',\n            'Topic :: Software Development :: Libraries :: Python Modules',\n            'Topic :: Software Development :: Quality Assurance',\n        ],\n        keywords='automation, pep8, format, pycodestyle',\n        install_requires=INSTALL_REQUIRES,\n        test_suite='test.test_autopep8',\n        py_modules=['autopep8'],\n        zip_safe=False,\n        entry_points={'console_scripts': ['autopep8 = autopep8:main']},\n    )\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#_1","title":"\u56db\u3001\u5f00\u59cb\u6253\u5305","text":"<p>\uff08\u5230\u6e90\u7801\u6839\u76ee\u5f55\u6253\u5305\uff0c\u6210\u529f\u6267\u884c\u6253\u5305\u547d\u4ee4\u4f1a\u751f\u6210\u4e00\u4e2adist\u6587\u4ef6\u5939\uff09</p>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#1wheelswhl","title":"1\u3001\u5c06\u6e90\u7801\u6253\u5305\u4e3awheels(whl)\u683c\u5f0f","text":"Bash<pre><code>python setup.py bdist_wheel --universal\n\n# \u53ef\u4ee5\u4f7f\u7528pip\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\npip install xx.whl\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#2targz","title":"2\u3001\u5c06\u6e90\u7801\u6253\u5305\u4e3atar.gz\u683c\u5f0f","text":"<p>Bash<pre><code>python setup.py sdist build\n</code></pre> 3\u3001\u5c06\u6e90\u7801\u6253\u5305\u4e3aegg\u683c\u5f0f Bash<pre><code>python setup.py bdist_egg\n</code></pre></p>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#_2","title":"\u4e94\u3001\u4e0a\u4f20\u751f\u6210\u7684\u5305","text":"","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#1twinetwine","title":"1\u3001\u4f7f\u7528twine\u4e0a\u4f20\uff0c\u5148\u5b89\u88c5twine","text":"Bash<pre><code>pip install twine\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#2","title":"2\u3001\u4e0a\u4f20\uff0c\u4f1a\u63d0\u793a\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801","text":"Bash<pre><code>twine upload dist/*\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#3pypi","title":"3\u3001\u4e0a\u4f20\u6210\u529f\u53ef\u4ee5\u5230\u81ea\u5df1\u7684pypi\u4ed3\u5e93\u67e5\u770b","text":"","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#_3","title":"\u516d\u3001\u4f7f\u7528","text":"Bash<pre><code>pip search xx\n\npip install xx\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_python_pkg_publish/#_4","title":"\u4e03\u3001\u5176\u4ed6","text":"Bash<pre><code>#!/usr/bin/env python\n# coding: utf-8\n\nfrom setuptools import setup\n\nsetup(\n    name='jujube_pill',\n    version='0.0.1',\n    author='xlzd',\n    author_email='what@the.f*ck',\n    url='https://zhuanlan.zhihu.com/p/26159930',\n    description=u'\u5403\u67a3\u836f\u4e38',\n    packages=['jujube_pill'],\n    install_requires=[],\n    entry_points={\n        'console_scripts': [\n            'jujube=jujube_pill:jujube',\n            'pill=jujube_pill:pill'\n        ]\n    }\n)\n</code></pre> <p>install_requires \u662f\u8fd9\u4e2a\u5e93\u6240\u4f9d\u8d56\u7684\u5176\u5b83\u5e93\uff0c\u5f53\u522b\u4eba\u4f7f\u7528 pip \u7b49\u5de5\u5177\u5b89\u88c5\u4f60\u7684\u5305\u65f6\uff0c\u4f1a\u81ea\u52a8\u5b89\u88c5\u4f60\u6240\u4f9d\u8d56\u7684\u5305\u3002console_scripts \u662f\u8fd9\u4e2a\u5305\u6240\u63d0\u4f9b\u7684\u7ec8\u7aef\u547d\u4ee4\uff0c\u6bd4\u5982\u6211\u5e0c\u671b\u5728\u5b89\u88c5\u8fd9\u4e2a\u5305\u540e\u53ef\u4ee5\u4f7f\u7528\u300c jujube \u300d\u548c\u300c pill \u300d\u4e24\u4e2a\u547d\u4ee4\uff0c\u5219\u6309\u7167 setup \u6587\u4ef6\u7684\u5199\u6cd5\uff0c\u5f53\u6211\u5728\u7ec8\u7aef\u8f93\u5165\u300c jujube \u300d\u7684\u65f6\u5019\uff0c\u5c06\u4f1a\u6267\u884c jujubepill \u5305\u4e0b\uff08__init_ \u4e2d\uff09\u7684 jujube \u51fd\u6570\u3002 init.py \u6587\u4ef6\u5982\u4e0b\uff1a</p> Bash<pre><code>#!/usr/bin/env python\n# encoding=utf-8\n\n\ndef jujube():\n    print u'\u5403\u67a3'\n\n\ndef pill():\n    print u'\u836f\u4e38'\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/","title":"\u5e38\u7528Pypi\u6e90\u6c47\u603b\u53ca\u4f7f\u7528","text":"","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/#_1","title":"\u5e38\u7528\u56fd\u5916\u6e90","text":"<ul> <li>\u5b98\u65b9\u6e90</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/#_2","title":"\u5e38\u7528\u56fd\u5185\u6e90","text":"<ul> <li>\u6e05\u534e\u6e90</li> </ul> Bash<pre><code>\u2003# \u6e05\u534e\u5927\u5b66 \n https://pypi.tuna.tsinghua.edu.cn/simple/ \n\n # \u963f\u91cc\u4e91 \n http://mirrors.aliyun.com/pypi/simple/ \n\n\u2003# \u4e2d\u56fd\u79d1\u6280\u5927\u5b66 \n https://pypi.mirrors.ustc.edu.cn/simple/ \n\n\u2003# \u8c46\u74e3(douban) \n http://pypi.douban.com/simple/ \n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/#pip","title":"pip \u56fd\u5185\u6e90\u914d\u7f6e","text":"<ul> <li>https://mirrors.tuna.tsinghua.edu.cn/help/pypi/</li> </ul>","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/#_3","title":"\u4e34\u65f6\u6307\u5b9a\u56fd\u5185\u6e90\u5b89\u88c5","text":"<ul> <li>\u5728python3.6\u540e\uff0c\u5b98\u65b9\u63a8\u8350\u4f7f\u7528 <code>python -m pip</code>\u7684\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5\u76f8\u5173\u5305x</li> </ul> Bash<pre><code>python -m pip install -i https://mirrors.aliyun.com/pypi/simple &lt;pkgname&gt;\n# pip install -i https://mirrors.aliyun.com/pypi/simple &lt;pkgname&gt;\n\npython -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple &lt;pkgname&gt;\n\npython -m pip install -i https://mirrors.ustc.edu.cn/pypi/web/simple &lt;pkgname&gt;\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/#_4","title":"\u6c38\u4e45\u8bbe\u7f6e\u56fd\u5185\u6e90\u5b89\u88c5","text":"<ul> <li>\u4e0b\u5217\u4ee5\u6e05\u534e\u6e90\u8bbe\u7f6e\u4e3a\u4f8b\uff0c\u5176\u4ed6\u6e90\u8bbe\u7f6e\u7c7b\u4f3c</li> </ul> Bash<pre><code>mkdir -p ~/.pip/\ntee &gt; ~/.pip/pip.conf &lt;&lt;EOF\n{\u6e90\u540d\u79f0\u4e0b\u9762\u7684\u914d\u7f6e}\nEOF\n\n----\n\n# \u6e05\u534e\u6e90\n[global]\ntimeout = 6000 \nindex-url = https://pypi.tuna.tsinghua.edu.cn/simple\n[install] \ntrusted-host = pypi.tuna.tsinghua.edu.cn\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/#_5","title":"\u547d\u4ee4\u884c\u8bbe\u7f6e\u9ed8\u8ba4\u6e90","text":"Bash<pre><code>pip install pip -U -i https://pypi.tuna.tsinghua.edu.cn/simple\npip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/#conda","title":"conda \u56fd\u5185\u6e90\u914d\u7f6e","text":"Bash<pre><code># \u4e2d\u79d1\u5927\u6e90\nconda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/\nconda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/\nconda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/conda-forge/\nconda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/msys2/\nconda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/bioconda/\nconda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/menpo/\nconda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/\n\n# \u963f\u91cc\u6e90\nconda config --add channels https://mirrors.aliyun.com/pypi/simple/\n\n# \u8c46\u74e3\u6e90\nconda config --add channels http://pypi.douban.com/simple/\n\n# \u5176\u4ed6\u914d\u7f6e\n## \u663e\u793a\u68c0\u7d22\u8def\u5f84\uff0c\u6bcf\u6b21\u5b89\u88c5\u5305\u65f6\u4f1a\u5c06\u5305\u6e90\u8def\u5f84\u663e\u793a\u51fa\u6765\nconda config --set show_channel_urls yes\nconda config --set always_yes True\n\n## \u663e\u793a\u6240\u6709\u955c\u50cf\u901a\u9053\u8def\u5f84\u547d\u4ee4\nconda config --show channels\n\n# \u6062\u590d\u9ed8\u8ba4\u6e90\nconda config --remove-key channels\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/#pdm","title":"PDM \u56fd\u5185\u6e90\u914d\u7f6e","text":"<p>\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u8bbe\u7f6e\u9ed8\u8ba4\u955c\u50cf\uff1a</p> Bash<pre><code>pdm config pypi.url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre>","tags":["Python"]},{"location":"python/pybestpractices/pypi_source_usage/#poetry","title":"Poetry \u56fd\u5185\u6e90\u914d\u7f6e","text":"<p>\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u8bbe\u7f6e\u9996\u9009\u955c\u50cf\uff1a</p> Bash<pre><code>poetry source add --priority=primary mirrors https://pypi.tuna.tsinghua.edu.cn/simple/\n</code></pre> <p>\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u8bbe\u7f6e\u8865\u5145\u955c\u50cf\uff1a</p> Bash<pre><code>poetry source add --priority=supplemental mirrors https://pypi.tuna.tsinghua.edu.cn/simple/\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/","title":"APScheduler\u4e4b\u5b9a\u65f6\u4efb\u52a1\u5de5\u5177","text":"","tags":["Python"]},{"location":"python/pylibs/apscheduler/#apscheduler_1","title":"APScheduler\u6982\u8ff0","text":"<ul> <li> <p>APScheduler \uff08advanceded python scheduler\uff09\u662f\u4e00\u6b3ePython\u5f00\u53d1\u7684\u5b9a\u65f6\u4efb\u52a1\u5de5\u5177\u3002</p> </li> <li> <p>\u6587\u6863\u5730\u5740 https://apscheduler.readthedocs.io/en/latest/userguide.html#starting-the-scheduler</p> </li> <li> <p>\u7279\u70b9\uff1a</p> <ul> <li> <p>\u4e0d\u4f9d\u8d56\u4e8eLinux\u7cfb\u7edf\u7684crontab\u7cfb\u7edf\u5b9a\u65f6\uff0c\u72ec\u7acb\u8fd0\u884c</p> </li> <li> <p>\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0\u65b0\u7684\u5b9a\u65f6\u4efb\u52a1\uff0c\u5982</p> </li> <li> <p>\u4e0b\u5355\u540e30\u5206\u949f\u5185\u5fc5\u987b\u652f\u4ed8\uff0c\u5426\u5219\u53d6\u6d88\u8ba2\u5355\uff0c\u5c31\u53ef\u4ee5\u501f\u52a9\u6b64\u5de5\u5177\uff08\u6bcf\u4e0b\u4e00\u5355\u5c31\u8981\u6dfb\u52a0\u6b64\u8ba2\u5355\u7684\u5b9a\u65f6\u4efb\u52a1\uff09</p> </li> <li> <p>\u5bf9\u6dfb\u52a0\u7684\u5b9a\u65f6\u4efb\u52a1\u53ef\u4ee5\u505a\u6301\u4e45\u4fdd\u5b58</p> </li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#1","title":"1.\u5b89\u88c5","text":"Text Only<pre><code>pip install apscheduler\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#2","title":"2.\u4f7f\u7528\u65b9\u5f0f","text":"Python<pre><code>from apscheduler.schedulers.background import BackgroundScheduler\n\n# \u521b\u5efa\u5b9a\u65f6\u4efb\u52a1\u7684\u8c03\u5ea6\u5668\u5bf9\u8c61\nscheduler = BackgroundScheduler()\n\n# \u5b9a\u4e49\u5b9a\u65f6\u4efb\u52a1\ndef my_job(param1, param2):\n    pass\n\n# \u5411\u8c03\u5ea6\u5668\u4e2d\u6dfb\u52a0\u5b9a\u65f6\u4efb\u52a1\nscheduler.add_job(my_job, 'date', args=[100, 'python'])\n\n# \u542f\u52a8\u5b9a\u65f6\u4efb\u52a1\u8c03\u5ea6\u5668\u5de5\u4f5c\nscheduler.start()\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#3scheduler","title":"3.\u8c03\u5ea6\u5668Scheduler","text":"<p>\u8d1f\u8d23\u7ba1\u7406\u5b9a\u65f6\u4efb\u52a1</p> <ul> <li>BlockingScheduler: \u4f5c\u4e3a\u72ec\u7acb\u8fdb\u7a0b\u65f6\u4f7f\u7528</li> </ul> Python<pre><code>from apscheduler.schedulers.blocking import BlockingScheduler\n\nscheduler = BlockingScheduler()\nscheduler.start()  # \u6b64\u5904\u7a0b\u5e8f\u4f1a\u53d1\u751f\u963b\u585e\n</code></pre> <ul> <li>BackgroundScheduler: \u5728\u6846\u67b6\u7a0b\u5e8f\uff08\u5982Django\u3001Flask\uff09\u4e2d\u4f7f\u7528</li> </ul> Python<pre><code>from apscheduler.schedulers.background import BackgroundScheduler\n\nscheduler = BackgroundScheduler()\nscheduler.start()  # \u6b64\u5904\u7a0b\u5e8f\u4e0d\u4f1a\u53d1\u751f\u963b\u585e\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#4-executors","title":"4.\u6267\u884c\u5668 executors","text":"<p>\u5728\u5b9a\u65f6\u4efb\u52a1\u8be5\u6267\u884c\u65f6\uff0c\u4ee5\u8fdb\u7a0b\u6216\u7ebf\u7a0b\u65b9\u5f0f\u6267\u884c\u4efb\u52a1</p> <ul> <li>ThreadPoolExecutor</li> </ul> Python<pre><code>from apscheduler.executors.pool import ThreadPoolExecutor\n\nThreadPoolExecutor(max_workers)  \nThreadPoolExecutor(20) # \u6700\u591a20\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6267\u884c\n</code></pre> <p>\u4f7f\u7528\u65b9\u6cd5</p> Python<pre><code>executors = {\n    'default': ThreadPoolExecutor(20)\n}\nscheduler = BackgroundScheduler(executors=executors)\n</code></pre> <ul> <li>ProcessPoolExecutor</li> </ul> Python<pre><code>from apscheduler.executors.pool import ProcessPoolExecutor\n\nProcessPoolExecutor(max_workers)\nProcessPoolExecutor(5) # \u6700\u591a5\u4e2a\u8fdb\u7a0b\u540c\u65f6\u6267\u884c\n</code></pre> <p>\u4f7f\u7528\u65b9\u6cd5</p> Python<pre><code>executors = {\n    'default': ProcessPoolExecutor(3)\n}\nscheduler = BackgroundScheduler(executors=executors)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#5-trigger","title":"5.\u89e6\u53d1\u5668 Trigger","text":"<p>\u6307\u5b9a\u5b9a\u65f6\u4efb\u52a1\u6267\u884c\u7684\u65f6\u673a</p> <p>1\uff09 date \u5728\u7279\u5b9a\u7684\u65f6\u95f4\u65e5\u671f\u6267\u884c</p> <p>Python<pre><code>from datetime import date\n\n# \u57282019\u5e7411\u67086\u65e500:00:00\u6267\u884c\nsched.add_job(my_job, 'date', run_date=date(2009, 11, 6))\n\n# \u57282019\u5e7411\u67086\u65e516:30:05\nsched.add_job(my_job, 'date', run_date=datetime(2009, 11, 6, 16, 30, 5))\nsched.add_job(my_job, 'date', run_date='2009-11-06 16:30:05')\n\n# \u7acb\u5373\u6267\u884c\nsched.add_job(my_job, 'date')  \nsched.start()\n</code></pre> 2\uff09 interval \u7ecf\u8fc7\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u6267\u884c</p> <ul> <li>weeks (int) \u2013 number of weeks to wait</li> <li>days (int) \u2013 number of days to wait</li> <li>hours (int) \u2013 number of hours to wait</li> <li>minutes (int) \u2013 number of minutes to wait</li> <li>seconds (int) \u2013 number of seconds to wait</li> <li>start_date (datetime|str) \u2013 starting point for the interval calculation</li> <li>end_date (datetime|str) \u2013 latest possible date/time to trigger on</li> <li>timezone (datetime.tzinfo|str) \u2013 time zone to use for the date/time calculations</li> </ul> Python<pre><code>from datetime import datetime\n\n# \u6bcf\u4e24\u5c0f\u65f6\u6267\u884c\u4e00\u6b21\nsched.add_job(job_function, 'interval', hours=2)\n\n# \u57282010\u5e7410\u670810\u65e509:30:00 \u52302014\u5e746\u670815\u65e5\u7684\u65f6\u95f4\u5185\uff0c\u6bcf\u4e24\u5c0f\u65f6\u6267\u884c\u4e00\u6b21\nsched.add_job(job_function, 'interval', hours=2, start_date='2010-10-10 09:30:00', end_date='2014-06-15 11:00:00')\n</code></pre> <p>3\uff09 cron \u6309\u6307\u5b9a\u7684\u5468\u671f\u6267\u884c</p> <ul> <li>year (int|str) \u2013 4-digit year</li> <li>month (int|str) \u2013 month (1-12)</li> <li>day (int|str) \u2013 day of the (1-31)</li> <li>week (int|str) \u2013 ISO week (1-53)</li> <li>day_of_week (int|str) \u2013 number or name of weekday (0-6 or mon,tue,wed,thu,fri,sat,sun)</li> <li>hour (int|str) \u2013 hour (0-23)</li> <li>minute (int|str) \u2013 minute (0-59)</li> <li>second (int|str) \u2013 second (0-59)</li> <li>start_date (datetime|str) \u2013 earliest possible date/time to trigger on (inclusive)</li> <li>end_date (datetime|str) \u2013 latest possible date/time to trigger on (inclusive)</li> <li>timezone (datetime.tzinfo|str) \u2013 time zone to use for the date/time calculations (defaults to scheduler timezone)</li> </ul> Python<pre><code># \u57286\u30017\u30018\u300111\u300112\u6708\u7684\u7b2c\u4e09\u4e2a\u5468\u4e94\u768400:00, 01:00, 02:00\u548c03:00 \u6267\u884c\nsched.add_job(job_function, 'cron', month='6-8,11-12', day='3rd fri', hour='0-3')\n\n# \u57282014\u5e745\u670830\u65e5\u524d\u7684\u5468\u4e00\u5230\u5468\u4e94\u76845:30\u6267\u884c\nsched.add_job(job_function, 'cron', day_of_week='mon-fri', hour=5, minute=30, end_date='2014-05-30')\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#6","title":"6. \u914d\u7f6e\u65b9\u6cd5","text":"","tags":["Python"]},{"location":"python/pylibs/apscheduler/#1_1","title":"\u65b9\u6cd51","text":"Python<pre><code>from apscheduler.schedulers.background import BackgroundScheduler\nfrom apscheduler.executors.pool import ThreadPoolExecutor\n\nexecutors = {\n    'default': ThreadPoolExecutor(20),\n}\nscheduler = BackgroundScheduler(executors=executors)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#2_1","title":"\u65b9\u6cd52","text":"Python<pre><code>from pytz import utc\n\nfrom apscheduler.schedulers.background import BackgroundScheduler\nfrom apscheduler.jobstores.sqlalchemy import SQLAlchemyJobStore\nfrom apscheduler.executors.pool import ProcessPoolExecutor\n\nexecutors = {\n    'default': {'type': 'threadpool', 'max_workers': 20},\n    'processpool': ProcessPoolExecutor(max_workers=5)\n}\n\nscheduler = BackgroundScheduler()\n\n# .. \u6b64\u5904\u53ef\u4ee5\u7f16\u5199\u5176\u4ed6\u4ee3\u7801\n\n# \u4f7f\u7528configure\u65b9\u6cd5\u8fdb\u884c\u914d\u7f6e\nscheduler.configure(executors=executors)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#7","title":"7. \u542f\u52a8","text":"<p>Python<pre><code>scheduler.start()\n</code></pre> - \u5bf9\u4e8eBlockingScheduler \uff0c\u7a0b\u5e8f\u4f1a\u963b\u585e\u5728\u8fd9\uff0c\u9632\u6b62\u9000\u51fa - \u5bf9\u4e8eBackgroundScheduler\uff0c\u7a0b\u5e8f\u4f1a\u7acb\u5373\u8fd4\u56de\uff0c\u540e\u53f0\u8fd0\u884c</p>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#8","title":"8.\u6269\u5c55","text":"","tags":["Python"]},{"location":"python/pylibs/apscheduler/#_1","title":"\u4efb\u52a1\u7ba1\u7406","text":"","tags":["Python"]},{"location":"python/pylibs/apscheduler/#_2","title":"\u65b9\u5f0f\u4e00","text":"Python<pre><code>job = scheduler.add_job(myfunc, 'interval', minutes=2)  # \u6dfb\u52a0\u4efb\u52a1\njob.remove()  # \u5220\u9664\u4efb\u52a1\njob.pause() # \u6682\u5b9a\u4efb\u52a1\njob.resume()  # \u6062\u590d\u4efb\u52a1\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#_3","title":"\u65b9\u5f0f\u4e8c","text":"Python<pre><code>scheduler.add_job(myfunc, 'interval', minutes=2, id='my_job_id')  # \u6dfb\u52a0\u4efb\u52a1    \nscheduler.remove_job('my_job_id')  # \u5220\u9664\u4efb\u52a1\nscheduler.pause_job('my_job_id')  # \u6682\u5b9a\u4efb\u52a1\nscheduler.resume_job('my_job_id')  # \u6062\u590d\u4efb\u52a1\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#_4","title":"\u8c03\u6574\u4efb\u52a1\u8c03\u5ea6\u5468\u671f","text":"Python<pre><code>job.modify(max_instances=6, name='Alternate name')\n\nscheduler.reschedule_job('my_job_id', trigger='cron', minute='*/5')\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/apscheduler/#apscheduler_2","title":"\u505c\u6b62APScheduler\u8fd0\u884c","text":"Python<pre><code>scheduler.shutdown()\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/","title":"Python\u5e38\u7528\u5e93\u6c47\u603b[awesome]","text":"","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#web","title":"Web\u5f00\u53d1\u5e93","text":"<ul> <li>Django: \u4e00\u6b3e\u5168\u9762\u4e14\u91cd\u91cf\uff08\u5927\u800c\u5168\uff09\u7684Web\u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a 75.1k</li> <li>FastAPI: \u4e00\u6b3e\u9ad8\u6027\u80fd\u3001\u5f02\u6b65\u7684\u8f7b\u91cf\u7ea7Web\u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a67.2k</li> <li>Flask: \u4e00\u6b3e\u8f7b\u91cf\u7ea7\u7528\u4e8e\u6784\u5efaWeb\u5e94\u7528\u7a0b\u5e8f\u7684Python\u5fae\u6846\u67b6\uff0c \u5f53\u524dstar\u6570\uff1a65.5k</li> <li>streamlit: \u4e00\u6b3e\u5feb\u901f\u642d\u5efa\u6570\u636e\u5171\u4eab\u4e0e\u53ef\u89c6\u5316\u7684Web\u5e94\u7528\u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a29.7k</li> <li>django-rest-framework: \u4e00\u6b3e\u57fa\u4e8eDjango\uff0c\u7528\u4e8e\u5feb\u901f\u5f00\u53d1Web API\u7a0b\u5e8f\u7684\u6269\u5c55\u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a27k</li> <li>gradio: \u00a0\u4e00\u6b3e\u7528\u4e8e\u5feb\u901f\u6784\u5efaAI\u7b97\u6cd5\u53ef\u89c6\u5316\u90e8\u7f72\u7684\u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a25.7k</li> <li>Tornado: \u4e00\u6b3e\u5f02\u6b65\u7684\u7f51\u7edc\u5e93\uff0c\u53ef\u7528\u4e8e\u5feb\u901f\u5f00\u53d1Web\u5e94\u7528\u7684\u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a21.4k</li> <li>sanic: \u4e00\u6b3e\u5feb\u901f\u6784\u5efa\u3001\u5feb\u901f\u5f00\u53d1\u7684\u5f02\u6b65Web\u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a17.6k</li> <li>Falcon\uff1a\u9762\u5411python\u5f00\u53d1\u4eba\u5458\u7684\u7b80\u5355Web\u6570\u636e\u5e73\u9762API\u548c\u5fae\u670d\u52a1\u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a 9.3k</li> <li>nicegui: \u4e00\u6b3e\u4f7f\u7528python\u5f00\u53d1\u7684Web\u7528\u6237\u754c\u9762\uff0c\u5f53\u524dstar\u6570\uff1a 6.4k</li> <li>nameko:\u4e00\u6b3e\u7528\u4e8e\u6784\u5efa\u5fae\u670d\u52a1\u7684Python\u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a4.6k</li> <li>cherrypy: \u4e00\u4e2a\u8f7b\u91cf\u7ea7\u3001Pythonic\u3001\u9762\u5411\u5bf9\u8c61\u7684HTTP \u6846\u67b6\uff0c\u5f53\u524dstar\u6570\uff1a1.8k</li> <li>Microdot: \u9002\u7528\u4e8ePython\u548cMicrodot\u7684\u8d85\u5c0f\u578bWeb\u6846\u67b6\uff1b\u5f53\u524dstar\u6570\uff1a1.2k</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#python","title":"Python \u673a\u5668\u5b66\u4e60\u5e93","text":"<ul> <li>lightautoml\uff1a\u4e00\u6b3e\u5168\u81ea\u52a8\u673a\u5668\u5b66\u4e60\u6846\u67b6\uff0c \u5f53\u524d star \u6570\uff1a720</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#python_1","title":"Python \u6570\u636e\u5904\u7406\u5e93","text":"<ul> <li>voluptuous: \u4e00\u4e2a Python \u6570\u636e\u9a8c\u8bc1\u5e93,\u5f53\u524d star \u6570\uff1a1.8k</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#orm","title":"ORM \u5e93","text":"<ul> <li>sqlalchemy: Python \u6570\u636e\u5e93\u5de5\u5177\u5305</li> <li>databases: Python\u7684\u5f02\u6b65\u6570\u636e\u5e93\u652f\u6301</li> <li>django-orm:</li> <li>peewee</li> <li>tortoise-orm</li> <li>alembic: \u6570\u636e\u5e93\u8fc1\u79fb\u5de5\u5177</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_1","title":"\u73af\u5883\u5305\u7ba1\u7406\u5e93","text":"<ul> <li>conda: \u5305\u7ba1\u7406\u5de5\u5177</li> <li>poetry: \u4f9d\u8d56\u7ba1\u7406\u5de5\u5177</li> <li>pdm: \u4f9d\u8d56\u7ba1\u7406\u5de5\u5177</li> <li>pipx: \u7ba1\u7406Python\u5305\u7684\u5de5\u5177,\u5728\u9694\u79bb\u73af\u5883\u4e2d\u5b89\u88c5\u548c\u8fd0\u884c Python \u5e94\u7528\u7a0b\u5e8f</li> <li>pipenv: \u7ba1\u7406Python\u5305\u7684\u5de5\u5177</li> <li>virtualenv: \u865a\u62df\u73af\u5883\u7ba1\u7406\u5de5\u5177</li> <li>venv: \u865a\u62df\u73af\u5883\u7ba1\u7406\u5de5\u5177</li> <li>virtualenvwrapper: \u865a\u62df\u73af\u5883\u7ba1\u7406\u5de5\u5177</li> <li>pyenv: Python\u7248\u672c\u7ba1\u7406\u5de5\u5177</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_2","title":"\u4efb\u52a1\u5e93","text":"<ul> <li>celery: \u5206\u5e03\u5f0f\u4efb\u52a1\u8c03\u5ea6\u6846\u67b6</li> <li>apscheduler: \u5b9a\u65f6\u4efb\u52a1\u8c03\u5ea6\u6846\u67b6</li> <li>funboost: \u5f02\u6b65\u4efb\u52a1\u8c03\u5ea6\u6846\u67b6</li> <li>rq: \u8f7b\u91cf\u7ea7\u4efb\u52a1\u8c03\u5ea6\u6846\u67b6</li> <li>sched: \u8f7b\u91cf\u7ea7\u4efb\u52a1\u8c03\u5ea6\u6846\u67b6</li> <li>schedule: \u8f7b\u91cf\u7ea7\u4efb\u52a1\u8c03\u5ea6\u6846\u67b6</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_3","title":"\u6027\u80fd\u5206\u6790\u5e93","text":"<ul> <li>cProfile: \u6807\u51c6\u5e93\u81ea\u5e26\u7684\u6027\u80fd\u5206\u6790</li> <li>memory_profiler: \u5185\u5b58\u5206\u6790\u5de5\u5177\uff0c\u76d1\u63a7Python\u4ee3\u7801\u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5</li> <li>line_profiler: \u884c\u7ea7\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_4","title":"\u4ee3\u7801\u7f16\u8bd1\u52a0\u5bc6\u5e93","text":"<ul> <li>Nuitka: \u4ee3\u7801\u52a0\u5bc6\u5de5\u5177,\u4e00\u4e2a\u7528 Python \u7f16\u5199\u7684 Python \u7f16\u8bd1\u5668</li> <li>pyarmor: \u4ee3\u7801\u52a0\u5bc6\u5de5\u5177</li> <li>py2sec: \u4e00\u4e2a\u8de8\u5e73\u53f0\u3001\u5feb\u901f\u4e14\u7075\u6d3b\u7684\u5de5\u5177\uff0c\u53ef\u5c06 .py \u66f4\u6539\u4e3a .so\uff08Linux \u548c Mac\uff09\u6216 .pyd\uff08Win\uff09</li> <li>pyinstaller: \u4ee3\u7801\u6253\u5305\u5de5\u5177,\u5c06 Python \u7a0b\u5e8f\u51bb\u7ed3\uff08\u6253\u5305\uff09\u4e3a\u72ec\u7acb\u7684\u53ef\u6267\u884c\u6587\u4ef6</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_5","title":"\u6d4b\u8bd5\u5e93","text":"<ul> <li>pytest: \u6d4b\u8bd5\u6846\u67b6</li> <li>unittest: \u5355\u5143\u6d4b\u8bd5\u6846\u67b6</li> <li>pytest-html: \u6d4b\u8bd5\u62a5\u544a\u751f\u6210\u5de5\u5177</li> <li>mock: \u6a21\u62df\u5bf9\u8c61\u5e93</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_6","title":"\u4f9d\u8d56\u6ce8\u5165\u6846\u67b6","text":"<ul> <li>dependency-injector: \u4f9d\u8d56\u6ce8\u5165\u6846\u67b6</li> <li>bevy: \u4f9d\u8d56\u6ce8\u5165\u6846\u67b6</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_7","title":"\u91cd\u8bd5\u5e93\uff1a","text":"<ul> <li>retry: \u91cd\u8bd5\u5e93</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_8","title":"\u8fdb\u7a0b\u7ba1\u7406\u5e93","text":"<ul> <li>supervisor: \u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177</li> <li>gunicorn: \u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177</li> <li>uwsgi: \u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_9","title":"\u64cd\u4f5c\u65e5\u671f\u65f6\u95f4\u5e93","text":"<ul> <li>time: \u5b98\u65b9\u5185\u7f6e\u5e93</li> <li>datetime: \u5b98\u65b9\u5185\u7f6e\u5e93</li> <li>arrow: \u65e5\u671f\u65f6\u95f4\u5e93</li> <li>dateutil</li> <li>arrow</li> <li>delorean</li> <li>Freezegun</li> <li>moment</li> <li>maya</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#json","title":"\u64cd\u4f5cJson\u6587\u4ef6","text":"<ul> <li>Json:\u5b98\u65b9\u5185\u7f6e\u5e93 </li> <li>\u3010\u2606\u3011Jmespath: \u662f\u4e00\u4e2ajson\u67e5\u8be2\u5e93\uff0c\u53ef\u4ee5\u4f7f\u7528\u58f0\u660e\u7684\u65b9\u5f0f\u4eceJson\u4e2d\u63d0\u53d6\u5143\u7d20 </li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#yaml","title":"\u64cd\u4f5cYAML\u6587\u4ef6","text":"<ul> <li>PyYAML</li> </ul>","tags":["Python"]},{"location":"python/pylibs/awesome_libs/#_10","title":"\u672a\u5206\u7c7b","text":"<ul> <li>Faker: \u4e00\u4e2a\u7528\u4e8e\u751f\u6210\u865a\u62df\u6570\u636e\u7684python\u5e93</li> </ul>","tags":["Python"]},{"location":"python/pylibs/collections/","title":"Python\u4e4bcollections\u7684\u7528\u6cd5","text":"","tags":["Python"]},{"location":"python/pylibs/collections/#_1","title":"\u5199\u5728\u524d\u9762","text":"<ul> <li> <p>collections\u6a21\u5757\u662f\u5728python\u5185\u7f6e\u6570\u636e\u7c7b\u578b\uff08list, dict, set, tuple\uff09\u7684\u57fa\u7840\u4e0a\uff0c\u63d0\u4f9b\u4e86\u6027\u80fd\u66f4\u9ad8\u7684\u4e00\u4e9b\u5bb9\u5668\u96c6\uff0c\u5373\u989d\u5916\u7684\u51e0\u79cd\u6570\u636e\u7c7b\u578b\uff1a</p> <ul> <li>namedtuple(): \u751f\u6210\u53ef\u4ee5\u4f7f\u7528\u540d\u5b57\u6765\u8bbf\u95ee\u5143\u7d20\u5185\u5bb9\u7684tuple\u5b50\u7c7b</li> <li>defaultdict(): \u5e26\u6709\u9ed8\u8ba4\u503c\u7684\u5b57\u5178</li> <li>deque(): \u53cc\u7aef\u961f\u5217\uff0c\u53ef\u4ee5\u5feb\u901f\u7684\u4ece\u961f\u5217\u7684\u4e24\u7aef\u8ffd\u52a0\u548c\u63a8\u51fa\u5143\u7d20</li> <li>Counter(): \u8ba1\u6570\u5668\uff0c\u4e3b\u8981\u7528\u6765\u8ba1\u6570</li> <li>OrderedDict(): \u6709\u5e8f\u5b57\u5178</li> <li>ChainMap(): \u7528\u6765\u5408\u5e76\u4e24\u4e2a\u6216\u591a\u4e2a\u5b57\u5178\uff0c\u5f53\u67e5\u8be2\u65f6\uff0c\u6309\u987a\u5e8f\u65b9\u5f0f\u67e5\u8be2</li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/collections/#_2","title":"\u5e38\u7528\u65b9\u6cd5\uff1a","text":"<ul> <li>tuple(): <p>\u4e3a\u540e\u9762\u7684namedtuple\u505a\u94fa\u57ab</p> </li> </ul> Python<pre><code>tuple(iterable)  # \u5c06\u53ef\u8fed\u4ee3\u5e8f\u5217\u8f6c\u5316\u4e3a\u5143\u7ec4\n</code></pre> Python<pre><code>In [6]: tuple([1,2,3,4])\nOut[6]: (1, 2, 3, 4)\n\nIn [7]: tuple({\"a\":1, \"b\":2})\nOut[7]: ('a', 'b')\n\nIn [8]: tuple((1,2,3,4))\nOut[8]: (1, 2, 3, 4)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/collections/#namedtuple","title":"namedtuple()","text":"<ul> <li>namedtuple\u4e3b\u8981\u7528\u6765\u4ea7\u751f\u53ef\u4ee5\u4f7f\u7528\u540d\u79f0\u6765\u8bbf\u95ee\u5143\u7d20\u7684\u6570\u636e\u5bf9\u8c61\uff0c\u5728\u8bbf\u95ee\u4e00\u4e9btuple\u7c7b\u578b\u7684\u6570\u636e\u6548\u679c\u66f4\u660e\u663e</li> </ul> Python<pre><code>from collections import namedtuple\n\n# \u9762\u5bf9\u5bf9\u8c61\u7684\u65b9\u5f0f\nclass User:\n    def __init__(self, name, age, height):\n        pass\n\n# \u65b0\u7684\u65b9\u5f0f\uff08\u5728\u521b\u5efa\u7b80\u5355\u7684\u5bf9\u8c61\u65f6\uff0c\u6bd4\u9762\u5bf9\u5bf9\u8c61\u7684\u65b9\u5f0f\u66f4\u8282\u7701\u7a7a\u95f4\uff09\n# \u6848\u4f8b\u4e00\uff1a\u4f20\u5143\u7ec4\nUser = namedtuple(\"User\", [\"name\", \"age\",\"like\"])\ntmptup = ('wss',25)\nuser = User(*tmptup, 'readbook')\nprint(user)\nprint(\"*\"*15)\nUser = namedtuple(\"User\", (\"name\", \"age\"))\n# \u5143\u7ec4\ntmptuple = ('wss',25)\nuser = User._make(tmptuple)\nprint(user)\nprint(\"*\"*15)\n# \u5217\u8868\ntmplist = ['wss',25]\nuser = User._make(tmplist)\nprint(user)\nprint(\"*\"*15)\n# \u8f6c\u6362\u4e3a\u5b57\u5178\nuser_dict=user._asdict()\nprint(user_dict)\n\n\n# \u6848\u4f8b\u4e8c\nwebsites = [\n    ('Sohu', 'http://www.google.com/', u'\u5f20\u671d\u9633'),\n    ('Sina', 'http://www.sina.com.cn/', u'\u738b\u5fd7\u4e1c'),\n    ('163', 'http://www.163.com/', u'\u4e01\u78ca')\n]\n\nWebsite = namedtuple('Website', ['name', 'url', 'founder'])\n\nfor website in websites:\n    website = Website._make(website)\n    print(website)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/collections/#defaultdict","title":"defaultdict()","text":"<ul> <li>\u5728dict\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u539f\u751f\u7684dict\uff0c\u7528d[key]\u7684\u65b9\u5f0f\u8bbf\u95ee\u5f53key,\u4e0d\u5b58\u5728\u65f6\uff0c\u4f1a\u629b\u51faKeyError</li> <li>\u4f7f\u7528defaultdict,\u53ea\u8981\u4f20\u5165\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5de5\u5382\u65b9\u6cd5\uff0c\u5f53\u8bf7\u6c42\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684key\u65f6\uff0c\u4f1a\u81ea\u52a8\u8c03\u7528\u5de5\u5382\u65b9\u6cd5\u4f7f\u5176\u7ed3\u679c\u4f5c\u4e3akey\u7684\u9ed8\u8ba4\u503c\uff0c\u4ece\u800c\u907f\u514d\u5f02\u5e38\u629b\u51fa</li> <li>\u901a\u4fd7\u7684\u8bf4\uff1akey\u5b58\u5728\u8fd4\u56de\u5bf9\u5e94\u7684value\uff0ckey \u4e0d\u5b58\u5728\uff0c\u5c31\u8fd4\u56de\u4f20\u5165\u7684\u9ed8\u8ba4\u503c</li> </ul> Python<pre><code>from collections import defaultdict\n\nd = defaultdict(int)  # \u9ed8\u8ba4\u503c0\nstr = 'wfdsfewfeswfs'\nfor s in str:\n    d[s] += 1\nprint(d)\nprint(d['w'])\nprint(d['f'])\nprint(d['u'])  \n\nd2 = defaultdict(list)  # \u9ed8\u8ba4\u503c[]\nprint(d2['z'])\nd3 = defaultdict(lambda : 5) # \u81ea\u5b9a\u4e49\u9ed8\u8ba4\u503c\nprint(d3['z'])\n</code></pre> Python<pre><code>def generate_default():\n    return {\n        \"a\":1, \n        \"b\":3\n        }\ntempd = defaultdict(generate_default)\nprint(tempd['z'])\n</code></pre> Python<pre><code>members = [\n    # Age, name\n    ['male', 'John'],\n    ['male', 'Jack'],\n    ['female', 'Lily'],\n    ['male', 'Pony'],\n    ['female', 'Lucy'],\n]\n\nresult = defaultdict(list)\nfor sex, name in members:\n    result[sex].append(name)\n\nprint(result) \n</code></pre>","tags":["Python"]},{"location":"python/pylibs/collections/#deque","title":"deque()","text":"<ul> <li>deque\u662f double-ended queue\u7684\u7f29\u5199\uff0c\u53cc\u7aef\u961f\u5217\uff0c\u5b83\u6700\u5927\u7684\u597d\u5904\u5c31\u662f\u5b9e\u73b0\u4e86\u4ece\u961f\u5217 \u5934\u90e8\u5feb\u901f\u589e\u52a0\u548c\u53d6\u51fa\u5bf9\u8c61: .popleft(), .appendleft() \u3002</li> <li>\u4f7f\u7528list\u5b58\u50a8\u6570\u636e\u65f6\uff0c\u6309\u7d22\u5f15\u8bbf\u95ee\u5143\u7d20\u5f88\u5feb\uff0c\u4f46\u662f\u63d2\u5165\u548c\u5220\u9664\u5143\u7d20\u5c31\u5f88\u6162\u4e86\uff0c\u56e0\u4e3alist\u662f\u7ebf\u6027\u5b58\u50a8\uff0c\u6570\u636e\u91cf\u5927\u7684\u65f6\u5019\uff0c\u63d2\u5165\u548c\u5220\u9664\u6548\u7387\u5f88\u4f4e\u3002</li> <li>que\u662f\u4e3a\u4e86\u9ad8\u6548\u5b9e\u73b0\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u53cc\u5411\u5217\u8868\uff0c\u9002\u5408\u7528\u4e8e\u961f\u5217\u548c\u6808\uff1a</li> </ul> Text Only<pre><code>from collections import deque\n\n\nq = deque(['a','b','c'])\nq.append('w')\nq.appendleft('x')\nprint(q)\n# output: deque(['x', 'a', 'b', 'c', 'w'])\n</code></pre> Python<pre><code># -*- coding: utf-8 -*-\n\"\"\"\n\u4e0b\u9762\u8fd9\u4e2a\u662f\u4e00\u4e2a\u6709\u8da3\u7684\u4f8b\u5b50\uff0c\u4e3b\u8981\u4f7f\u7528\u4e86deque\u7684rotate\u65b9\u6cd5\u6765\u5b9e\u73b0\u4e86\u4e00\u4e2a\u65e0\u9650\u5faa\u73af\n\u7684\u52a0\u8f7d\u52a8\u753b\n\"\"\"\nimport sys\nimport time\nfrom collections import deque\n\n# \u6848\u4f8b\nfancy_loading = deque('&gt;--------------------')\n\nwhile True:\n    print('\\r%s' % ''.join(fancy_loading))\n    fancy_loading.rotate(1)  # rotate\u65b9\u6cd5\u7528\u4e8e\u65cb\u8f6c\uff0c\u5982\u679c\u53c2\u6570\u5927\u4e8e0\uff0c\u8868\u793a\u5c06\u961f\u5217\u53f3\u7aef\u7684n\u4e2a\u5143\u7d20\u79fb\u52a8\u5230\u5de6\u7aef\uff0c\u5426\u5219\u76f8\u53cd\n    sys.stdout.flush()\n    time.sleep(0.08)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/collections/#ordereddict","title":"OrderedDict()","text":"<ul> <li> <p>python2\uff0cdict\u662f\u65e0\u5e8f\u7684</p> </li> <li> <p>python3\u4e2d\uff0cdict\u548cOrderedDict\u90fd\u662f\u6709\u5e8f\u7684\uff0c</p> </li> <li> <p>\u4f7f\u7528dict\u65f6\uff0cKey\u662f\u65e0\u5e8f\u7684\u3002\u5728\u5bf9dict\u505a\u8fed\u4ee3\u65f6\uff0c\u6211\u4eec\u65e0\u6cd5\u786e\u5b9aKey\u7684\u987a\u5e8f\u3002\u5982\u679c\u8981\u4fdd\u6301Key\u7684\u987a\u5e8f\uff0c\u53ef\u4ee5\u7528OrderedDict\uff1a</p> </li> <li> <p>OrderedDict\u7684Key\u4f1a\u6309\u7167\u63d2\u5165\u7684\u987a\u5e8f\u6392\u5217\uff0c\u4e0d\u662fKey\u672c\u8eab\u6392\u5e8f\uff1a</p> </li> <li> <p>OrderedDict\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2aFIFO\uff08\u5148\u8fdb\u5148\u51fa\uff09\u7684dict\uff0c\u5f53\u5bb9\u91cf\u8d85\u51fa\u9650\u5236\u65f6\uff0c\u5148\u5220\u9664\u6700\u65e9\u6dfb\u52a0\u7684Key\uff1a</p> </li> </ul> Python<pre><code>from collections import OrderedDict\nd = dict([('a', 1), ('b', 2), ('c', 3)])\nprint(d) # dict\u7684Key\u662f\u65e0\u5e8f\u7684\n{'a': 1, 'c': 3, 'b': 2}\nod = OrderedDict([('a', 1), ('b', 2), ('c', 3)])\nprint(od) # OrderedDict\u7684Key\u662f\u6709\u5e8f\u7684\n\n\nod2 = OrderedDict()\nod2['z'] = 1\nod2['y'] = 2\nod2['x'] = 3\nprint(od2.keys())\nod2.move_to_end('z')  # \u5c06\u6307\u5b9a\u7684key\u79fb\u52a8\u5230\u6700\u540e\u9762\nprint(od2)\n</code></pre> <ul> <li>\u53c2\u8003\u6848\u4f8b</li> </ul> Python<pre><code>from collections import OrderedDict\n\nclass LastUpdatedOrderedDict(OrderedDict):\n    #\u5b9e\u73b0\u4e00\u4e2aFIFO\uff08\u5148\u8fdb\u5148\u51fa\uff09\u7684dict\uff0c\u5f53\u5bb9\u91cf\u8d85\u51fa\u9650\u5236\u65f6\uff0c\u5148\u5220\u9664\u6700\u65e9\u6dfb\u52a0\u7684Key\uff1a\n    def __init__(self, capacity):\n        super(LastUpdatedOrderedDict, self).__init__()\n        self._capacity = capacity\n\n    def __setitem__(self, key, value):\n        containsKey = 1 if key in self else 0\n        if len(self) - containsKey &gt;= self._capacity:\n            last = self.popitem(last=False)\n            print 'remove:', last\n        if containsKey:\n            del self[key]\n            print 'set:', (key, value)\n        else:\n            print 'add:', (key, value)\n        OrderedDict.__setitem__(self, key, value)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/collections/#counter","title":"Counter()","text":"<ul> <li>\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8ba1\u6570\u5668\uff0c\u53ef\u7528\u4e8e\u7edf\u8ba1\u5b57\u7b26\u4e32\u3001\u5217\u8868\u7b49\u7684\u5143\u7d20\u4e2a\u6570\u3002</li> </ul> Python<pre><code>from collections import Counter\n\nstr1 = \"sdfwetsfswfwef\"\nc1 = Counter(str1)\nprint(c1)\n# print(c1.most_common(3))\n# print(isinstance(c1, dict))\nstr2 = 'dfewafsfes'\nc2 = Counter(str2)\nprint(c2)\nc = c1 + c2\nprint(c)\nc = c1 - c2\nprint(c)\nc = c1 &amp; c2\nprint(c)\nc = c1 | c2\nprint(c)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/collections/#chainmap","title":"ChainMap()","text":"<ul> <li>\u53ef\u4ee5\u7528\u6765\u5408\u5e76\u4e24\u4e2a\u6216\u8005\u66f4\u591a\u4e2a\u5b57\u5178\uff0c\u5f53\u67e5\u8be2\u7684\u65f6\u5019\uff0c\u4ece\u524d\u5f80\u540e\u4f9d\u6b21\u67e5\u8be2\u3002</li> <li>\u6ce8\u610f\u70b9\u5c31\u662f\u5f53\u5bf9 ChainMap \u8fdb\u884c\u4fee\u6539\u7684\u65f6\u5019\u603b\u662f\u53ea\u4f1a\u5bf9\u7b2c\u4e00\u4e2a\u5b57\u5178\u8fdb\u884c\u4fee\u6539</li> </ul> <p>\u4ece\u539f\u7406\u4e0a\u9762\u8bb2\uff0cChainMap \u5b9e\u9645\u4e0a\u662f\u628a\u653e\u5165\u7684\u5b57\u5178\u5b58\u50a8\u5728\u4e00\u4e2a\u5217\u8868\u4e2d\uff0c\u5f53\u8fdb\u884c\u5b57\u5178\u7684\u589e\u52a0\u5220\u9664\u7b49\u64cd\u4f5c\u53ea\u4f1a\u5728\u7b2c\u4e00\u4e2a\u5b57\u5178\u4e0a\u8fdb\u884c\uff0c\u5f53\u8fdb\u884c\u67e5\u627e\u7684\u65f6\u5019\u4f1a\u4f9d\u6b21\u67e5\u627e\uff0cnew_child()\u65b9\u6cd5\u5b9e\u8d28\u4e0a\u662f\u5728\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u524d\u653e\u5165\u4e00\u4e2a\u5b57\u5178\u5e76\u8fd4\u56de\u8fd9\u4e2a\u7c7b\u4f3c\u5217\u8868\u7684\u5bf9\u8c61\uff0c\u9ed8\u8ba4\u662f {}\uff0c\u800c parents \u662f\u53bb\u6389\u4e86\u5217\u8868\u5f00\u5934\u7684\u5143\u7d20\u3002</p> Python<pre><code>from collections import ChainMap\na = {\"x\":1, \"z\":3}\nb = {\"y\":2, \"z\":4}\nc = ChainMap(a,b)\nprint(c)\nprint(\"x: {}, y: {}, z: {}\".format(c[\"x\"], c[\"y\"], c[\"z\"]))\nprint(\"*\"*20)\ntemp1 = c.maps\nprint(temp1, type(temp1))\nprint(\"*\"*20)\ntemp2 = c.parents\nprint(temp2, type(temp2))\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/daily_libs/","title":"Python\u6bcf\u65e5\u4e00\u5e93\u6982\u89c8[usage]","text":"","tags":["Python"]},{"location":"python/pylibs/daily_libs/#_1","title":"\u6587\u4ef6\u5904\u7406","text":"<ul> <li>pathlib: \u4e00\u6b3e\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u5f0f\u64cd\u4f5c\u8def\u5f84\u7684\u5185\u7f6e\u5e93</li> </ul>","tags":["Python"]},{"location":"python/pylibs/daily_libs/#_2","title":"\u6570\u636e\u5904\u7406","text":"<ul> <li>PyFlink: \u4e00\u6b3e\u57fa\u4e8ePython\u7684Flink\u5e93,\u7528\u4e8e\u5206\u5e03\u5f0f\u5b9e\u65f6\u8ba1\u7b97</li> <li>Numpy: \u4e00\u4e2a\u5728Python\u4e2d\u505a\u79d1\u5b66\u8ba1\u7b97\u7684\u57fa\u7840\u5e93</li> <li>Pandas: \u4e00\u6b3e\u57fa\u4e8eNumpy\u6784\u5efa\u7684\u5206\u6790\u7ed3\u6784\u5316\u6570\u636e\u7684\u5de5\u5177\u96c6</li> </ul>","tags":["Python"]},{"location":"python/pylibs/daily_libs/#_3","title":"\u8fdb\u7a0b\u7ba1\u7406","text":"<ul> <li>subprocess: \u4e00\u6b3e\u53ef\u4ee5\u5728Python\u7a0b\u5e8f\u5185\u6267\u884c\u5916\u90e8\u547d\u4ee4\u7684\u5185\u7f6e\u5e93</li> <li>supervisor: \u4e00\u6b3e\u7528\u4e8eLinux\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177</li> </ul>","tags":["Python"]},{"location":"python/pylibs/daily_libs/#_4","title":"\u4efb\u52a1\u5904\u7406","text":"<ul> <li>APScheduler: \u4e00\u6b3ePython\u5f00\u53d1\u7684\u5b9a\u65f6\u4efb\u52a1\u5de5\u5177\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/daily_libs/#modelops","title":"ModelOps","text":"<ul> <li>MLFlow: \u4e00\u6b3e\u7528\u4e8e\u673a\u5668\u5b66\u4e60\u6a21\u578b\u7684\u5168\u751f\u547d\u5468\u671f\u7ba1\u7406\u7684\u5e93</li> </ul>","tags":["Python"]},{"location":"python/pylibs/mlflow/","title":"MLflow\u4e4b\u6a21\u578b\u751f\u547d\u5468\u671f\u7ba1\u7406","text":"","tags":["Python"]},{"location":"python/pylibs/mlflow/#mlflow_1","title":"MLFlow\u6982\u8ff0","text":"","tags":["Python"]},{"location":"python/pylibs/mlflow/#_1","title":"\u9002\u7528\u573a\u666f","text":"<ul> <li>\u4ea7\u751f\u80cc\u666f</li> </ul> <p>\u6bcf\u4e2a\u505a\u8fc7\u673a\u5668\u5b66\u4e60\u5f00\u53d1\u7684\u4eba\u90fd\u77e5\u9053\u673a\u5668\u5b66\u7684\u590d\u6742\u6027\uff0c\u9664\u4e86\u8f6f\u4ef6\u4e2d\u5e38\u89c1\u7684\u95ee\u9898\u4e4b\u5916\uff0c\u673a\u5668\u5b66\u4e60\u8fd8\u5b58\u5728\u5f88\u591a\u65b0\u7684\u6311\u6218\u3002\u4f5c\u4e3a\u4e00\u5bb6\u5927\u6570\u636e\u89e3\u51b3\u65b9\u6848\u516c\u53f8\uff0cDatabricks\u4e0e\u6570\u767e\u5bb6\u4f7f\u7528\u673a\u5668\u5b66\u4e60\u7684\u516c\u53f8\u5408\u4f5c\uff0c\u6240\u4ee5\u80fd\u591f\u6e05\u695a\u5730\u4e86\u89e3\u4ed6\u4eec\u7684\u75db\u70b9\uff0c\u6bd4\u5982\u5de5\u5177\u592a\u8fc7\u590d\u6742\u3001\u96be\u4ee5\u8ddf\u8e2a\u5b9e\u9a8c\u3001\u96be\u4ee5\u91cd\u73b0\u7ed3\u679c\u3001\u96be\u4ee5\u90e8\u7f72\u6a21\u578b\u3002\u7531\u4e8e\u8fd9\u4e9b\u6311\u6218\u7684\u5b58\u5728\uff0c\u673a\u5668\u5b66\u4e60\u5f00\u53d1\u5fc5\u987b\u53d8\u5f97\u4e0e\u4f20\u7edf\u8f6f\u4ef6\u5f00\u53d1\u4e00\u6837\u5f3a\u5927\u3001\u53ef\u9884\u6d4b\u548c\u666e\u53ca\u3002\u4e3a\u6b64\uff0c\u5f88\u591a\u4f01\u4e1a\u5df2\u7ecf\u5f00\u59cb\u6784\u5efa\u5185\u90e8\u673a\u5668\u5b66\u4e60\u5e73\u53f0\u6765\u7ba1\u7406\u673a\u5668\u5b66\u4e60\u751f\u547d\u5468\u671f\u3002\u4f8b\u5982\uff0cFacebook\u3001\u8c37\u6b4c\u548c\u4f18\u6b65\u5206\u522b\u6784\u5efa\u4e86 FBLearner Flow\u3001TFX \u548c Michelangelo \u6765\u8fdb\u884c\u6570\u636e\u51c6\u5907\u3001\u6a21\u578b\u8bad\u7ec3\u548c\u90e8\u7f72\u3002\u4f46\u8fd9\u4e9b\u5185\u90e8\u5e73\u53f0\u5b58\u5728\u4e00\u5b9a\u7684\u5c40\u9650\u6027\uff1a\u5178\u578b\u7684\u673a\u5668\u5b66\u4e60\u5e73\u53f0\u53ea\u652f\u6301\u4e00\u5c0f\u90e8\u5206\u5185\u7f6e\u7b97\u6cd5\u6216\u5355\u4e2a\u673a\u5668\u5b66\u4e60\u5e93\uff0c\u5e76\u4e14\u88ab\u7ed1\u5b9a\u5728\u516c\u53f8\u5185\u90e8\u7684\u57fa\u7840\u8bbe\u65bd\u4e0a\u3002\u7528\u6237\u65e0\u6cd5\u8f7b\u6613\u5730\u4f7f\u7528\u65b0\u7684\u673a\u5668\u5b66\u4e60\u5e93\uff0c\u6216\u4e0e\u793e\u533a\u5206\u4eab\u4ed6\u4eec\u7684\u5de5\u4f5c\u6210\u679c\u3002Databricks\u8ba4\u4e3a\u5e94\u8be5\u4f7f\u7528\u4e00\u79cd\u66f4\u597d\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u673a\u5668\u5b66\u4e60\u751f\u547d\u5468\u671f\uff0c\u4e8e\u662f\u4ed6\u4eec\u63a8\u51fa\u4e86ML flow\uff0c\u4e00\u4e2a\u5f00\u6e90\u7684\u673a\u5668\u5b66\u4e60\u5e73\u53f0\u3002</p> <ul> <li>\u57fa\u672c\u60c5\u51b5</li> </ul> <p>MLflow\u7684\u7075\u611f\u6765\u6e90\u4e8e\u73b0\u6709\u7684\u673a\u5668\u5b66\u4e60\u5e73\u53f0\uff0c\u4f46\u4ee5\u5f00\u653e\u6027\u4f5c\u4e3a\u4e3b\u8981\u8bbe\u8ba1\u76ee\u6807\uff1a</p> <ul> <li>\u5f00\u653e\u63a5\u53e3\uff1aMLflow\u53ef\u4e0e\u4efb\u4f55\u673a\u5668\u5b66\u4e60\u5e93\u3001\u7b97\u6cd5\u3001\u90e8\u7f72\u5de5\u5177\u6216\u7f16\u7a0b\u8bed\u8a00\u4e00\u8d77\u4f7f\u7528\u3002\u5b83\u57fa\u4e8eREST API\u548c\u7b80\u5355\u7684\u6570\u636e\u683c\u5f0f\uff08\u4f8b\u5982\uff0c\u53ef\u5c06\u6a21\u578b\u89c6\u4e3alambda\u51fd\u6570\uff09\u800c\u6784\u5efa\uff0c\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u5de5\u5177\uff0c\u800c\u4e0d\u53ea\u662f\u63d0\u4f9b\u4e00\u4e2a\u5c0f\u90e8\u5206\u5185\u7f6e\u529f\u80fd\u3002\u7528\u6237\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u5c06MLflow\u6dfb\u52a0\u5230\u73b0\u6709\u5730\u673a\u5668\u5b66\u4e60\u4ee3\u7801\u4e2d\uff0c\u5e76\u5728\u7ec4\u7ec7\u4e2d\u5171\u4eab\u4ee3\u7801\uff0c\u8ba9\u5176\u4ed6\u4eba\u4e5f\u80fd\u8fd0\u884c\u8fd9\u4e9b\u4ee3\u7801\u3002</li> <li> <p>\u5f00\u6e90\uff1aMLflow\u662f\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u7528\u6237\u548c\u673a\u5668\u5b66\u4e60\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u6269\u5c55\u3002\u6b64\u5916\uff0c\u5229\u7528MLflow\u5730\u5f00\u653e\u683c\u5f0f\uff0c\u53ef\u4ee5\u8f7b\u677e\u5730\u8de8\u7ec4\u7ec7\u5171\u4eab\u5de5\u4f5c\u6d41\u6b65\u9aa4\u548c\u6a21\u578b\u3002</p> </li> <li> <p>\u5e94\u7528\u573a\u666f</p> </li> </ul> <p>MLflow\u4e0e\u5e93\u65e0\u5173\u3002 \u60a8\u53ef\u4ee5\u5c06\u5176\u4e0e\u4efb\u4f55\u673a\u5668\u5b66\u4e60\u5e93\u4ee5\u53ca\u4efb\u4f55\u7f16\u7a0b\u8bed\u8a00\u4e00\u8d77\u4f7f\u7528\uff0c\u56e0\u4e3a\u6240\u6709\u529f\u80fd\u90fd\u53ef\u4ee5\u901a\u8fc7REST API\u548cCLI\u8fdb\u884c\u8bbf\u95ee\u3002 \u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u8be5\u9879\u76ee\u8fd8\u5305\u62ecPython API\uff0cR API\u548cJava API\u3002</p>","tags":["Python"]},{"location":"python/pylibs/mlflow/#_2","title":"\u529f\u80fd\u7279\u70b9","text":"<ul> <li>MLflow \u662f\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406\u7aef\u5230\u7aef\u673a\u5668\u5b66\u4e60\u751f\u547d\u5468\u671f\u7684\u5f00\u6e90\u5e73\u53f0\u3002\u5b83\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u56db\u4e2a\u4e3b\u8981\u529f\u80fd\uff1a</li> <li>MLflow Tracking\uff1a\u8ddf\u8e2a\u3001\u8bb0\u5f55\u5b9e\u9a8c\u8fc7\u7a0b\uff0c\u4ea4\u53c9\u6bd4\u8f83\u5b9e\u9a8c\u53c2\u6570\u548c\u5bf9\u5e94\u7684\u7ed3\u679c\u3002</li> <li>MLflow Project\uff1a\u628a\u4ee3\u7801\u6253\u5305\u6210\u53ef\u590d\u7528\u3001\u53ef\u590d\u73b0\u7684\u683c\u5f0f\uff0c\u53ef\u7528\u4e8e\u6210\u5458\u5206\u4eab\u548c\u9488\u5bf9\u7ebf\u4e0a\u90e8\u7f72\u3002</li> <li>MLflow Models\uff1a\u7ba1\u7406\u3001\u90e8\u7f72\u6765\u81ea\u591a\u4e2a\u4e0d\u540c\u673a\u5668\u5b66\u4e60\u6846\u67b6\u7684\u6a21\u578b\u5230\u5927\u90e8\u5206\u6a21\u578b\u90e8\u7f72\u548c\u63a8\u7406\u5e73\u53f0\u3002</li> <li>MLflow Model Registry\uff1a\u9488\u5bf9\u6a21\u578b\u7684\u5168\u751f\u547d\u5468\u671f\u7ba1\u7406\u7684\u9700\u6c42\uff0c\u63d0\u4f9b\u96c6\u4e2d\u5f0f\u534f\u540c\u7ba1\u7406\uff0c\u5305\u62ec\u6a21\u578b\u7248\u672c\u7ba1\u7406\u3001\u6a21\u578b\u72b6\u6001\u8f6c\u6362\u3001\u6570\u636e\u6807\u6ce8\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/mlflow/#_3","title":"\u5b89\u88c5\u90e8\u7f72","text":"<ul> <li>\u5b89\u88c5python\u73af\u5883\u548cpip\uff0c\u5e76\u5229\u7528pip\u5b89\u88c5MLflow\uff1a</li> </ul> Bash<pre><code>pip install mlflow\n</code></pre> <ul> <li>\u5728MacOS\u4e0a\u4f7f\u7528MLflow</li> <li>\u5982\u679c\u4f7f\u7528MacOS\u9ed8\u8ba4\u7684\u7cfb\u7edfPython\u9047\u5230\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7Homebrew\u5305\u7ba1\u7406\u5668\u5b89\u88c5Python3\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</li> </ul> Bash<pre><code>brew install python\n</code></pre> <ul> <li>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b89\u88c5MLflow\u7684\u547d\u4ee4\u4e3a\uff1a</li> </ul> Bash<pre><code>pip3 install mlflow\n</code></pre> <ul> <li>\u5907\u6ce8</li> <li>\u4e3a\u4e86\u4f7f\u7528\u7279\u5b9a\u7684MLflow\u6a21\u5757\u548c\u529f\u80fd\uff08\u5982ML\u6a21\u578b\u6301\u4e45\u5316/\u63a5\u53e3\uff0c\u5de5\u4ef6\u5b58\u50a8\u9009\u9879\u7b49\uff09\uff0c\u9700\u8981\u5b89\u88c5\u989d\u5916\u7684\u5e93\u4f9d\u8d56\u3002\u4f8b\u5982\uff0cmlflow.tensorflow\u6a21\u5757\u9700\u8981\u5b89\u88c5TensorFlow\u3002\u8be6\u7ec6\u60c5\u51b5\u89c1\uff1ahttps://github.com/mlflow/mlflow/blob/master/EXTRA_DEPENDENCIES.rst</li> </ul>","tags":["Python"]},{"location":"python/pylibs/mlflow/#api","title":"API\u6e05\u5355","text":"<ul> <li>MLflow Python API</li> </ul> module Description mlflow \u8be5\u6a21\u5757\u4e3a\u5f00\u542f\u548c\u7ba1\u7406\u4e00\u4e2aMLflow run\u63d0\u4f9b\u9ad8\u5c42\u7ea7\u7684API mlflow.tracking \u8be5\u6a21\u5757\u4e3aMLflow\u7684experiments\u548cruns\u63d0\u4f9b\u57fa\u4e8epython\u7684CRUD\u63a5\u53e3\u3002\u8fd9\u662f\u6bd4mlflow\u6a21\u5757\u5c01\u88c5\u5c42\u7ea7\u66f4\u4f4e\u7684API\uff0c\u80fd\u76f4\u63a5\u8f6c\u5230REST API\u7684\u8c03\u7528\u3002\u82e5\u9700\u8981\u7ba1\u7406\u4e00\u4e2a\u7ba1\u7406\u201cactive run\u201d\u7684\u9ad8\u5c42\u7ea7API\uff0c\u8bf7\u4f7f\u7528mlflow\u6a21\u5757\u3002 mlflow.projects \u8be5\u6a21\u5757\u4e3a\u8fd0\u884c\u672c\u5730\u6216\u8005\u8fdc\u7a0b\u7684MLflow project\u63d0\u4f9bAPI mlflow.models \u4e3a\u673a\u5668\u5b66\u4e60\u6a21\u578b\u7684\u4fdd\u5b58\u63d0\u4f9b\u63a5\u53e3\uff0c\u8fd9\u4e9b\u6a21\u578b\u7528\u4e00\u79cd\u4e0b\u6e38\u5de5\u5177\u53ef\u4ee5\u7406\u89e3\u7684\u201dflavors\u201c\u65b9\u5f0f\u4fdd\u5b58\u3002 mlflow.statsmodels \u8be5\u6a21\u5757\u4e3a\u8bb0\u5f55\u548c\u52a0\u8f7dstatsmodels models\u63d0\u4f9bAPI\u3002 mlflow.pyfunc python_function\u6a21\u5757flavor\u5145\u5f53MLflow Python\u6a21\u578b\u7684\u9ed8\u8ba4\u6a21\u578b\u63a5\u53e3\u3002\u4efb\u4f55MLflow Python\u6a21\u578b\u90fd\u4f1a\u88ab\u52a0\u8f7d\u4e3apython_function\u6a21\u578b\u3002 mlflow.keras \u8be5\u6a21\u5757\u4e3a\u8bb0\u5f55\u548c\u52a0\u8f7dKeras\u6a21\u578b\u63d0\u4f9bAPI mlflow.pytorch \u8be5\u6a21\u5757\u4e3a\u8bb0\u5f55\u548c\u52a0\u8f7dPyTorch\u6a21\u578b\u63d0\u4f9bAPI mlflow.sklearn \u8be5\u6a21\u5757\u4e3a\u8bb0\u5f55\u548c\u52a0\u8f7dscikit-learn\u6a21\u578b\u63d0\u4f9bAPI mlflow.tensorflow \u8be5\u6a21\u5757\u4e3a\u8bb0\u5f55\u548c\u52a0\u8f7dTensorFlow\u6a21\u578b\u63d0\u4f9bAPI","tags":["Python"]},{"location":"python/pylibs/mlflow/#mlflow_2","title":"mlflow\u6a21\u5757","text":"<ul> <li>\u5e38\u7528\u51fd\u6570</li> </ul> \u51fd\u6570 \u63cf\u8ff0 active_run \u83b7\u53d6\u5f53\u524d\u6d3b\u8dc3\u7684Run\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u82e5\u6ca1\u6709\u5219\u8fd4\u56deNone create_experiment(name, artifact_location=None) \u521b\u5efa\u4e00\u4e2aMLflow\u5b9e\u9a8c delete_experiment(experiment_id) \u4ece\u540e\u53f0\u4e2d\u5220\u9664\u4e00\u4e2a\u5b9e\u9a8c delete_run(run_id) \u5220\u9664\u4e00\u4e2arun\u5bf9\u8c61\u5b9e\u4f8b delete_tag(key) \u5220\u9664\u4e00\u4e2arun\u5bf9\u8c61\u7684tag end_run(status='FINISHED') \u7ed3\u675f\u4e00\u4e2a\u6d3b\u8dc3\u7684MLflow run\u5bf9\u8c61 get_artifact_uri(artifact_path=None) \u83b7\u53d6\u5f53\u524d\u8fd0\u884c\u7684run\u5bf9\u8c61\u4e2dartifact_path\u6307\u5b9a\u7684artifact\u7684\u7edd\u5bf9URI\uff0c\u82e5artifact_path\u4e3aNone\uff0c\u5219\u8fd4\u56deartifact\u7684\u6839URI get_experiment(experiment_id) \u4ece\u540e\u53f0\u5b58\u50a8\u4e2d\u83b7\u53d6experiment_id\u6307\u5b9a\u7684experiment\u5bf9\u8c61 get_experiment_by_name(name) \u4ece\u540e\u53f0\u5b58\u50a8\u4e2d\u83b7\u53d6name\u6307\u5b9a\u7684experiment\u5bf9\u8c61 get_registry_uri \u83b7\u53d6\u5f53\u524d\u6ce8\u518c\u8868\u7684URI\uff0c\u9ed8\u8ba4\u8fd4\u56detracking URI get_run(run_id) \u540e\u53f0\u5b58\u50a8\u4e2d\u83b7\u53d6run\u5bf9\u8c61\u5b9e\u4f8b get_tracking_uri \u83b7\u53d6\u5f53\u524d\u7684tracking URI list_run_infos(experiment_id, run_view_type=1, max_results=1000, order_by=None) \u8fd4\u56deexperiment_id\u6307\u5b9a\u5b9e\u9a8c\u4e0b\u7684\u6240\u6709run\u5b9e\u4f8b\u7684\u4fe1\u606f log_artifact(local_path, artifact_path=None) \u5c06\u672c\u5730\u6587\u4ef6\u6216\u76ee\u5f55\u8bb0\u5f55\u4e3a\u5f53\u524d\u6d3b\u8dc3run\u5bf9\u8c61\u7684artifact log_artifacts(local_dir, artifact_path=None) \u8bb0\u5f55\u672c\u5730\u76ee\u5f55\u7684\u6240\u6709\u7684\u5185\u5bb9\u4f5c\u4e3arun\u5bf9\u8c61\u7684artifacts log_metric(key, value, step=None) \u8bb0\u5f55\u5f53\u524drun\u5bf9\u8c61\u7684\u4e00\u4e2ametric log_metrics(metrics, step=None) \u8bb0\u5f55\u5f53\u524drun\u5bf9\u8c61\u7684\u591a\u4e2ametric log_param(key, value) \u8bb0\u5f55\u5f53\u524drun\u5bf9\u8c61\u7684\u4e00\u4e2aparameter log_params(params) \u8bb0\u5f55\u5f53\u524drun\u5bf9\u8c61\u7684\u4e00\u7ec4parameters log_text(text, artifact_file) \u8bb0\u5f55text\u5185\u5bb9\u4f5c\u4e3a\u4e00\u4e2aartifact register_model(model_uri, name, await_registration_for=300) \u5728\u6a21\u578b\u6ce8\u518c\u8868\u4e2d\u4e3amodel_uri\u6307\u5b9a\u7684\u6a21\u578b\u6587\u4ef6\u521b\u5efa\u65b0\u7684\u6a21\u578b\u7248\u672c run(uri, entry_point='main', version=None, parameters=None, docker_args=None, experiment_name=None, experiment_id=None, backend='local', backend_config=None, use_conda=True, storage_dir=None, synchronous=True, run_id=None) \u8fd0\u884c\u4e00\u4e2aMLflow\u9879\u76ee\uff0c\u8fd9\u4e2a\u9879\u76ee\u53ef\u4ee5\u5728\u672c\u5730\u6216\u8005\u5728GitHub\u4e0a\u3002 search_runs(experiment_ids=None, filter_string='', run_view_type=1, max_results=100000, order_by=None, output_format='pandas') \u4ee5pandas\u6570\u636e\u6846\u67b6\u7c7b\u578b\u83b7\u53d6\u6ee1\u8db3\u67e5\u8be2\u6761\u4ef6\u7684\u6240\u6709run\u5bf9\u8c61 set_experiment(experiment_name) \u8bbe\u7f6e\u6307\u5b9a\u540d\u79f0\u7684experiment\u5bf9\u8c61 set_registry_uri(uri) \u8bbe\u7f6e\u6ce8\u518c\u8868\u670d\u52a1\u5668\u7684URI set_tag(key, value) \u4e3a\u5f53\u524drun\u5bf9\u8c61\u8bbe\u7f6e\u6807\u7b7e set_tags(tags) \u4e3a\u5f53\u524drun\u5bf9\u8c61\u8bbe\u7f6e\u4e00\u7ec4\u6807\u7b7e set_tracking_uri(uri) \u8bbe\u7f6etracking\u670d\u52a1\u5668\u7684URI start_run(run_id=None, experiment_id=None, run_name=None, nested=False, tags=None) \u5f00\u542f\u4e00\u4e2a\u65b0\u7684MLflow run\u5bf9\u8c61\u5b9e\u4f8b","tags":["Python"]},{"location":"python/pylibs/mlflow/#mlflowtracking","title":"mlflow.tracking\u6a21\u5757","text":"<p>\u8be5\u6a21\u5757\u4e3aMLflow\u7684experiments\u548cruns\u63d0\u4f9b\u57fa\u4e8epython\u7684CRUD\u63a5\u53e3\u3002\u8fd9\u662f\u6bd4mlflow\u6a21\u5757\u5c01\u88c5\u5c42\u7ea7\u66f4\u4f4e\u7684API\uff0c\u80fd\u76f4\u63a5\u8f6c\u5230REST API\u7684\u8c03\u7528\u3002</p> <ul> <li>class mlflow.tracking.MLflowClient(tracking_uri=None, registry_uri=None)</li> </ul> <p>MLflow Tracking\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u521b\u5efa\u548c\u7ba1\u7406experiments\u548crun\uff0c\u4e5f\u662fMLflow Registry\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u521b\u5efa\u548c\u7ba1\u7406\u5df2\u6ce8\u518c\u7684\u6a21\u578b\u548c\u6a21\u578b\u7248\u672c\u3002</p> <ul> <li>MLflowClient\u7684\u4e00\u4e9b\u65b9\u6cd5/\u51fd\u6570</li> </ul> Functions Description experiment\u76f8\u5173\uff1a create_experiment(name, artifact_location=None) \u521b\u5efa\u4e00\u4e2a\u5b9e\u9a8c delete_experiment(experiment_id) \u5728\u540e\u53f0\u5220\u9664\u4e00\u4e2a\u5b9e\u9a8c get_experiment(experiment_id) \u901a\u8fc7ID\u83b7\u53d6\u5b9e\u9a8c get_experiment_by_name(name) \u901a\u8fc7\u540d\u5b57\u83b7\u53d6\u5b9e\u9a8c rename_experiment(experiment_id, new_name) \u66f4\u65b0\u5b9e\u9a8c\u540d\u5b57 restore_experiment(experiment_id) \u5b58\u50a8\u4e00\u4e2a\u5df2\u5220\u9664\u5b9e\u9a8c\uff0c\u9664\u975e\u6c38\u4e45\u6027\u5220\u9664 set_experiment_tag(experiment_id, key, value) \u7ed9\u5b9e\u9a8c\u8bbe\u7f6e\u6807\u7b7e(\u5b57\u5178\u7c7b\u578b) model_version\u76f8\u5173\uff1a create_model_version(name, source, run_id=None, tags=None, run_link=None, description=None, await_creation_for=300) \u4ece\u7ed9\u5b9a\u8d44\u6e90\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6a21\u578b\u7248\u672c delete_model_version(name, version) \u5220\u9664\u6a21\u578b\u7248\u672c delete_model_version_tag(name, version, key) \u5220\u9664\u6a21\u578b\u7248\u672c\u7684tag get_model_version(name, version) \u8fd4\u56de\u6a21\u578b\u7248\u672c\u5bf9\u8c61 get_model_version_download_uri(name, version) \u83b7\u53d6\u8be5\u6a21\u578b\u7248\u672c\u5b58\u50a8\u4ed3\u5e93\u7684\u4e0b\u8f7d\u5730\u5740 get_model_version_stages(name, version) \u8fd4\u56de\u4e00\u4e2a\u5408\u6cd5\u9636\u6bb5\u96c6\u5408 search_model_versions(filter_string) \u67e5\u627e\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\u7684\u6a21\u578b\u7248\u672c set_model_version_tag(name, version, key, value) \u7ed9\u6a21\u578b\u7248\u672c\u8bbe\u7f6e\u6807\u7b7e transition_model_version_stage(name, version, stage, archive_existing_versions=False) \u66f4\u65b0\u6a21\u578b\u7248\u672c\u9636\u6bb5 update_model_version(name, version, description=None) \u66f4\u65b0\u6a21\u578b\u7248\u672c\u7684\u5143\u6570\u636e registered_model\u76f8\u5173\uff1a create_registered_model(name, tags=None, description=None) \u5728\u540e\u53f0\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5df2\u6ce8\u518c\u6a21\u578b delete_registered_model(name) \u5220\u9664\u5df2\u6ce8\u518c\u6a21\u578b delete_registered_model_tag(name, key) \u5220\u9664\u5df2\u6ce8\u518c\u6a21\u578b\u7684tag get_registered_model(name) \u8fd4\u56de\u6ce8\u518c\u6a21\u578b\u5bf9\u8c61 rename_registered_model(name, new_name) \u66f4\u65b0\u5df2\u6ce8\u518c\u6a21\u578b\u540d\u5b57 search_registered_models(filter_string=None, max_results=100, order_by=None, page_token=None) \u67e5\u627e\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\u7684\u5df2\u6ce8\u518c\u6a21\u578b set_registered_model_tag(name, key, value) \u7ed9\u5df2\u6ce8\u518c\u6a21\u578b\u8bbe\u7f6e\u6807\u7b7e(\u5b57\u5178\u7c7b\u578b) update_registered_model(name, description=None) \u66f4\u65b0RegisteredModel\u5b9e\u4f53\u7684\u5143\u6570\u636e run\u76f8\u5173\uff1a create_run(experiment_id, start_time=None, tags=None) \u521b\u5efa\u4e00\u4e2arun\u5bf9\u8c61 delete_run(run_id) \u5220\u9664\u4e00\u4e2arun\u5bf9\u8c61 delete_tag(run_id, key) \u5220\u9664run\u5bf9\u8c61\u7684\u6807\u7b7e get_run(run_id) \u83b7\u53d6\u540e\u53f0\u5b58\u50a8\u7684run\u5bf9\u8c61 restore_run(run_id) \u5b58\u50a8\u4e00\u4e2a\u7ed9\u5b9aID\u7684\u5df2\u5220\u9664\u7684run search_runs(experiment_ids, filter_string='', run_view_type=1, max_results=1000, order_by=None, page_token=None) \u67e5\u627e\u6ee1\u8db3\u6761\u4ef6\u7684run\u5bf9\u8c61 set_tag(run_id, key, value) \u7ed9\u6307\u5b9aid\u7684run\u8bbe\u7f6e\u6807\u7b7e set_terminated(run_id, status=None, end_time=None) \u5c06\u4e00\u4e2arun\u7684\u72b6\u6001\u8bbe\u7f6e\u5df2\u4e2d\u6b62 \u5176\u4ed6\u51fd\u6570\uff1a download_artifacts(run_id, path, dst_path=None) \u5c06run\u5bf9\u8c61\u7684\u5de5\u4ef6\u6216\u8005\u76ee\u5f55\u4e0b\u8f7d\u5230\u672c\u5730 get_latest_versions(name, stages=None) \u83b7\u53d6\u6a21\u578b\u6bcf\u4e2a\u8bf7\u6c42\u9636\u6bb5\u7684\u6700\u65b0\u7248\u672c get_metric_history(run_id, key) \u8fd4\u56de\u7ed9\u5b9ametric\u8bb0\u5f55\u7684\u6240\u6709\u503c list_artifacts(run_id, path=None) run\u5bf9\u8c61\u7684artifacts\u96c6\u5408 list_experiments(view_type=None) Experiment\u5bf9\u8c61\u96c6\u5408 list_registered_models(max_results=100, page_token=None) \u6240\u4ee5\u5df2\u6ce8\u518c\u6a21\u578b\u7684\u96c6\u5408 list_run_infos(experiment_id, run_view_type=1, max_results=1000, order_by=None, page_token=None) RunInfo\u5bf9\u8c61\u96c6\u5408 log_artifact(run_id, local_path, artifact_path=None) \u5728\u8fdc\u7a0bartifact_uri\u4e2d\u5199\u5165\u672c\u5730\u6587\u4ef6\u6216\u76ee\u5f55 log_artifacts(run_id, local_dir, artifact_path=None) \u5728\u8fdc\u7a0bartifact_uri\u4e2d\u5199\u5165\u6587\u4ef6\u76ee\u5f55 log_batch(run_id, metrics=(), params=(), tags=()) \u8bb0\u5f55\u591a\u4e2ametrecs\u3001params\u3001tags log_metric(run_id, key, value, timestamp=None, step=None) \u5728\u7ed9\u5b9aid\u7684run\u5bf9\u8c61\u4e2d\u8bb0\u5f55\u4e00\u4e2ametric log_param(run_id, key, value) \u5728\u7ed9\u5b9aid\u7684run\u5bf9\u8c61\u4e2d\u8bb0\u5f55\u4e00\u4e2aparam log_text(run_id, text, artifact_file) \u5c06text\u6587\u4ef6\u8bb0\u5f55\u4e3a\u4e00\u4e2aartifact","tags":["Python"]},{"location":"python/pylibs/mlflow/#moflowprojects","title":"moflow.projects\u6a21\u5757","text":"<p>\u8be5\u6a21\u5757\u4e3a\u8fd0\u884c\u672c\u5730\u6216\u8005\u8fdc\u7a0b\u7684MLflow project\u63d0\u4f9bAPI\u3002\u4e3b\u8981\u51fd\u6570\u5982\u4e0b\uff1a</p> Python<pre><code>mlflow.projects.run(uri, entry_point='main', version=None, parameters=None, docker_args=None, experiment_name=None, experiment_id=None, backend='local', backend_config=None, use_conda=True, storage_dir=None, synchronous=True, run_id=None)\n</code></pre> <ul> <li> <p>\u8fd0\u884c\u4e00\u4e2aMLflow project\u3002\u8fd9\u4e2a\u9879\u76ee\u53ef\u4ee5\u5728\u672c\u5730\u4e5f\u53ef\u4ee5\u5b58\u50a8\u5728\u4e00\u4e2aGit URI\u4e2d\u3002</p> </li> <li> <p>\u53c2\u6570\uff1a</p> </li> </ul> Parameters Description uri \u6240\u8981\u8fd0\u884c\u9879\u76ee\u7684uri\u3002\u53ef\u4ee5\u662f\u672c\u5730\u6216\u8005Git\u4ed3\u5e93 entry_point \u9879\u76ee\u8fd0\u884c\u7684\u5165\u53e3\u70b9 version \u57fa\u4e8eGit\u9879\u76ee\u7684\u7248\u672c parameters \u5165\u53e3\u70b9\u547d\u4ee4\u7684\u53c2\u6570\uff08\u5b57\u5178\u7c7b\u578b\uff09 docker_args docker\u547d\u4ee4\u7684\u53c2\u6570\uff08\u5b57\u5178\u7c7b\u578b\uff09 experiment_name \u8fd0\u884c\u9879\u76ee\u7684\u5b9e\u9a8c\u540d\u5b57 experiment_id \u8fd0\u884c\u9879\u76ee\u7684\u5b9e\u9a8cID backend \u8fd0\u884c\u540e\u53f0\uff0cMLflow\u63d0\u4f9b\u5185\u7f6e\u652f\u6301\u7684\u540e\u53f0\u6709\u201clocal\"\uff0c\u201ddatabricks\u201c\uff0c\u201dkubernetes\u201c backend_config JSON\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u8fd9\u4e2aJSON\u6587\u4ef6\u5c06\u7528\u4e8e\u914d\u7f6e\u540e\u53f0 use_conda \u82e5\u4e3aTrue\uff0c\u5219\u521b\u5efa\u65b0\u7684conda\u73af\u5883\uff0c\u82e5\u4e3aFalse\uff0c\u5219\u4f7f\u7528\u5f53\u524dconda\u73af\u5883\u3002\u9ed8\u8ba4\u4e3aTrue storage_dir \u4ec5\u5f53\u540e\u53f0\u4e3a\u201dlocal\u201c\u65f6\u53ef\u7528\u3002artifacts\u5b58\u50a8\u4f4d\u7f6e synchronous \u5176\u4ed6\u9879\u76ee\u8fd0\u884c\u5b8c\u6210\u4e4b\u524d\u662f\u5426\u963b\u585e\u3002 \u9ed8\u8ba4\u4e3aTrue run_id \u82e5\u6307\u5b9a\uff0c\u5219MLflow\u4f1a\u5728\u6307\u5b9aID\u7684run\u4e0b\u8fd0\u884c\u9879\u76ee\uff0c\u800c\u4e0d\u662f\u521b\u5efa\u65b0\u7684run\u5bf9\u8c61\u3002 <ul> <li>\u8fd4\u56de\u503c\uff1a</li> </ul> <p>\u5305\u542b\u6240\u8fd0\u884c\u9879\u76ee\u76f8\u5173\u4fe1\u606f\uff08\u4f8b\u5982run id\uff09\u7684mlflow.projects.SubmittedRun\u5bf9\u8c61\u3002</p>","tags":["Python"]},{"location":"python/pylibs/mlflow/#moflowmodels","title":"moflow.models\u6a21\u5757","text":"<p>\u200b   \u4e3a\u673a\u5668\u5b66\u4e60\u6a21\u578b\u7684\u4fdd\u5b58\u63d0\u4f9b\u63a5\u53e3\uff0c\u8fd9\u4e9b\u6a21\u578b\u7528\u4e00\u79cd\u4e0b\u6e38\u5de5\u5177\u53ef\u4ee5\u7406\u89e3\u7684\u201dflavors\u201c\u65b9\u5f0f\u4fdd\u5b58\u3002</p> <ul> <li>\u5185\u7f6e\u201dflavors\u201c\uff1a</li> </ul> built-in flavors mlflow.pyfunc mlflow.keras mlflow.lightgbm mlflow.pytorch mlflow.sklearn mlflow.spark mlflow.statsmodels mlflow.tensorflow mlflow.xgboost mlflow.spacy mlflow.fastai <ul> <li>\u5177\u4f53\u7684\u8c03\u7528\u51fd\u6570\u5728\u76f8\u5173\u4f9d\u8d56\u4e2d\uff0c\u4f8b\u5982\uff0c\u4fdd\u5b58\u4e00\u4e2asklearn\u6a21\u578b\uff0c\u9996\u5148\u5f15\u5165mlflow.sklearn\u4f9d\u8d56\u5305\uff0c\u518d\u8c03\u7528mlflow.sklearn.autolog()\u51fd\u6570\u6216\u8005mlflow.sklearn.load_model()\u51fd\u6570\u3002\u5177\u4f53\u9700\u53c2\u89c1\u5bf9\u5e94\u7684\u4f9d\u8d56\u5305\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/numpy/","title":"Numpy\u4e4b\u6570\u636e\u8ba1\u7b97\u5de5\u5177","text":"","tags":["Python"]},{"location":"python/pylibs/numpy/#_1","title":"\u603b\u7ed3\uff1a","text":"","tags":["Python"]},{"location":"python/pylibs/numpy/#numpy","title":"numpy\u6982\u8ff0","text":"<ul> <li>\u662f\u4e00\u4e2a\u5728Python\u4e2d\u505a\u79d1\u5b66\u8ba1\u7b97\u7684\u57fa\u7840\u5e93\uff0c\u4e5f\u662f\u5927\u90e8\u5206Python\u79d1\u5b66\u8ba1\u7b97\u5e93\u7684\u57fa\u7840\u5e93</li> <li>\u91cd\u5728\u6570\u503c\u8ba1\u7b97</li> <li>\u591a\u7528\u4e8e\u5728\u5927\u578b\u3001\u591a\u7ef4\u6570\u7ec4\uff08\u77e9\u9635\uff09\u4e0a\u6267\u884c\u6570\u503c\u8ba1\u7b97\u3002</li> <li>\u7528\u6765\u5b58\u50a8\u548c\u5904\u7406\u5927\u578b\u77e9\u9635</li> </ul>","tags":["Python"]},{"location":"python/pylibs/numpy/#_2","title":"\u5e38\u7528\u65b9\u6cd5","text":"","tags":["Python"]},{"location":"python/pylibs/numpy/#_3","title":"\u521b\u5efa\u6570\u7ec4","text":"Python<pre><code>list_1 = [1,2,3,4,5]\nlist_2 = [6,7,8,9,10]\na = np.array(list_1) # \u521b\u5efa\u4e00\u7ef4\u6570\u7ec4\uff08\u65b9\u6cd5\u4e00\uff09\nb = np.arange(temp1,temp2,temp3) # \u521b\u5efa\u4e00\u7ef4\u6570\u7ec4\uff08\u65b9\u6cd5\u4e8c\uff09 temp1:\u8d77\u59cb\uff0ctemp2:\u7ec8\u6b62\uff0ctemp3:\u6b65\u957f\nc = np.array([list_1,list_2]) # \u521b\u5efa\u4e8c\u7ef4\u6570\u7ec4\nd = np.zeros(5) # \u521b\u5efa\u51680\u4e00\u7ef4\u77e9\u9635\uff08\u6570\u7ec4\uff09 \u6570\u636e\u7c7b\u578b\u662ffloat64\ne = np.zeros([2,3]) # \u521b\u5efa\u51680\u4e8c\u7ef4\u77e9\u9635\uff08\u6570\u7ec4\uff09 \u6570\u636e\u7c7b\u578b\u662ffloat64\nf = np.eye(5) # 5*5\u7684\u5355\u4f4d\u77e9\u9635\uff08\u6570\u7ec4\uff09 \u6570\u636e\u7c7b\u578b\u662ffloat64\nnp.arange(12).reshape(3, 4)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#_4","title":"\u6570\u7ec4\u7684\u5c5e\u6027","text":"Python<pre><code># \u67e5\u770b\u6570\u7ec4\u7684\u7c7b\u578b\ntype(a)\n\n# \u67e5\u770b\u6570\u636e\u7684\u7c7b\u578b\na.dtype\n\n# \u67e5\u770b\u6570\u7ec4\u7684\u5f62\u72b6\na.shape\n\n# \u67e5\u770b\u6570\u7ec4\u7684\u5143\u7d20\u4e2a\u6570\na.size\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#_5","title":"\u6570\u7ec4\u7684\u8bbf\u95ee","text":"Python<pre><code># \u4e00\u7ef4\u6570\u7ec4\na = np.arange(1,10) # out:array([1,2,3,4,5,6,7,8,9])\na[1] # out:2\na[1:5] # out:array([2,3,4,5])\n\n# \u4e8c\u7ef4\u6570\u7ec4\nb = np.array([[1,2,3],\n              [4,5,6]])  # [1,2,3]\u662f\u7b2c0\u884c\uff0c[4\uff0c5\uff0c6]\u662f\u7b2c\u4e00\u884c\nb[1][0] # out:4  \u8868\u793a\u8bbf\u95ee\u7b2c\u4e00\u884c\u7b2c0\u4e2a\u5143\u7d20\uff08\u8bbf\u95ee\u65b9\u5f0f\u4e00\uff09\nb[1, 0] # out:4 \uff08\u8bbf\u95ee\u65b9\u5f0f\u4e8c\uff09\n\nc = np.array([[1,2,3],\n             [4,5,6],\n             [7,8,9]])\nc[:2,1:] # \u8868\u793a \uff1a2\u884c\u6570\uff0c1\uff1a \u5217\u6570\n# out: \narray([[2,3],\n       [5,6]])\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#_6","title":"\u6307\u5b9a\u521b\u5efa\u6570\u7ec4\u7684\u6570\u636e\u7c7b\u578b","text":"Python<pre><code>a = np.array([1,0,1,0], dtype=np.bool)  # \u6216\u8005\u4f7f\u7528dtype='?'\n\n# \u4fee\u6539\u6570\u7ec4\u7684\u6570\u636e\u7c7b\u578b\na.astype(\"i1\") # \u6216\u8005\u4f7f\u7528a.astype(np.int8)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#_7","title":"\u4fee\u6539\u6d6e\u70b9\u578b\u7684\u5c0f\u6570\u4f4d\u6570","text":"Python<pre><code>np.round(b, 2)  # b\u662f\u6d6e\u70b9\u578b\u6570\u7ec4\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#_8","title":"\u6570\u7ec4\u7684\u5f62\u72b6","text":"Python<pre><code># \u67e5\u770b\u6570\u7ec4\u7684\u5f62\u72b6,\u5f97\u5230\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\na.shape  # fg:(2,4)\u8868\u793a2\uff08\u884c\uff09*4\uff08\u5217\uff09\u7684\u6570\u7ec4\n\n# \u83b7\u53d6\u6570\u7ec4\u7684\u884c\u6570\na.shape[0]\n# \u83b7\u53d6\u6570\u7ec4\u7684\u5217\u6570\na.shape[1]\n\n# \u4fee\u6539\u6570\u7ec4\u7684\u5f62\u72b6\nb = a.reshape(2, 6)\n\n# \u628a\u6570\u7ec4\u8f6c\u5316\u4e3a\u4e00\u7ef4\u6570\u7ec4\na.flatten()\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#_9","title":"\u6570\u7ec4\u548c\u6570\u7ec4\u7684\u8ba1\u7b97","text":"Python<pre><code># \u5e7f\u64ad\u673a\u5236\na + 1\na * 3\n</code></pre> <p>\u5982\u679c\u4e24\u4e2a\u6570\u7ec4\u7684\u540e\u7f18\u7ef4\u5ea6\uff08\u5373\u4ece\u672b\u5c3e\u5f00\u59cb\u7b97\u8d77\u7684\u7ef4\u5ea6\uff09\u7684\u8f74\u957f\u5ea6\u76f8\u7b26\u6216\u5176\u4e2d\u4e00\u65b9\u7684\u957f\u5ea6\u4e3a1\uff0c\u5219\u8ba4\u4e3a\u5b83\u4eec\u662f\u5e7f\u64ad\u517c\u5bb9\u7684\u3002\u5e7f\u64ad\u4f1a\u5728\u7f3a\u5931\u548c\uff08\u6216\uff09\u957f\u5ea6\u4e3a1\u7684\u7ef4\u5ea6\u4e0a\u8fdb\u884c\u3002 \u53ef\u4ee5\u628a\u7ef4\u5ea6\u6307\u7684\u662fshape\u6240\u5bf9\u5e94\u7684\u6570\u5b57\u3002 \u4e5f\u5c31\u662f\u8bf4\u4e24\u4e2a\u6570\u7ec4shape\u5f97\u5230\u7684\u5143\u7ec4\u7684\u540e2\u4f4d\u8981\u76f8\u540c\uff0c\u6216\u8005\u540e2\u4f4d\u4e2d\u4e00\u4e2a\u76f8\u540c\uff0c\u53e6\u5916\u4e00\u4e2a\u6570\u5b57\u6709\u4e00\u4e2a\u6570\u7ec4\u4e3a1</p>","tags":["Python"]},{"location":"python/pylibs/numpy/#numpy_1","title":"numpy\u8bfb\u53d6\u6570\u636e","text":"<p>Python<pre><code>np.loadtxt(fname,dtype=np.float,delimiter=None,skiprows=0,usecols=None,unpack=False)\n# \u4f8b\u5982\uff1a\nnp.loadtxt(US_video_data_numbers_path, delimiter=\",\", dtype=int,unpack=1)\n</code></pre> | \u53c2\u6570 | \u89e3\u91ca | | --- | --- | | frame | \u6587\u4ef6\u3001\u5b57\u7b26\u4e32\u6216\u4ea7\u751f\u5668\uff0c\u53ef\u4ee5\u662f.gz\u6216bz2\u538b\u7f29\u6587\u4ef6 | | dtype | \u6570\u636e\u7c7b\u578b\uff0c\u53ef\u9009\uff0ccsv\u7684\u5b57\u7b26\u4e32\u4ee5\u4ec0\u4e48\u6570\u636e\u7c7b\u578b\u8bfb\u5165\u6570\u7ec4\u4e2d\uff0c\u9ed8\u8ba4np.float | | delimiter | \u5206\u5272\u5b57\u7b26\u4e32\uff0c\u9ed8\u8ba4\u662f\u4efb\u4f55\u7a7a\u683c\uff0c\u6539\u4e3a\u9017\u53f7 | | skiprows | \u8df3\u8fc7\u524dX\u884c\uff0c\u4e00\u822c\u8df3\u8fc7\u7b2c\u4e00\u884c\u8868\u5934 | | usecols | \u8bfb\u53d6\u6307\u5b9a\u7684\u5217\uff0c\u7d22\u5f15\uff0c\u5143\u7ec4\u7c7b\u578b | | unpack | \u5982\u679cTrue\uff0c\u8bfb\u5165\u5c5e\u6027\u5c06\u5206\u522b\u5199\u5165\u4e0d\u540c\u6570\u7ec4\u53d8\u91cf\uff0cFalse\u8bfb\u5165\u6570\u636e\u53ea\u5199\u5165\u4e00\u4e2a\u6570\u7ec4\u53d8\u91cf\uff0c\u9ed8\u8ba4False\u3002\u76f8\u5f53\u4e8e\u8f6c\u7f6e\u7684\u6548\u679c |</p>","tags":["Python"]},{"location":"python/pylibs/numpy/#numpy_2","title":"numpy\u4e2d\u7684\u8f6c\u7f6e","text":"<p>\u8f6c\u7f6e\u662f\u4e00\u79cd\u53d8\u6362\uff0c\u5bf9\u4e8enumpy\u4e2d\u7684\u6570\u7ec4\u6765\u8bf4\uff0c\u5c31\u662f\u5728\u5bf9\u89d2\u7ebf\u65b9\u5411\u4ea4\u6362\u6570\u636e\uff0c\u76ee\u7684\u4e5f\u662f\u4e3a\u4e86\u66f4\u65b9\u4fbf\u7684\u53bb\u5904\u7406\u6570\u636e\u3002 Python<pre><code># \u8f6c\u7f6e\u76843\u79cd\u65b9\u6cd5\nt.transpose()\nt.swapaxes(1,0)\nt.T\n</code></pre></p>","tags":["Python"]},{"location":"python/pylibs/numpy/#numpy_3","title":"numpy\u7684\u7d22\u5f15\u548c\u5207\u7247","text":"Python<pre><code>a[1]  # \u53d6\u7b2c2\u884c\na[1:3]  # \u53d6\u7b2c2\u5230\u7b2c3\u884c\na[:, 2]  # \u53d6\u7b2c3\u5217\na[:, 2:4]  # \u53d6\u7b2c3\u5230\u7b2c4\u5217\na[[1,3], :]  # \u5206\u522b\u53d6\u7b2c2\u884c\u548c\u7b2c3\u884c\na[:[2,4]]  # \u5206\u522b\u53d6\u7b2c3\u5217\u548c\u7b2c4\u5217\na[[1:3],[2,4]]  # \u53d6\u7b2c2\u884c\u7b2c3\u884c\u548c\u7b2c3\u5217\u7b2c4\u5217\u7684\u4ea4\u96c6\na[:,2:8:2]  # \u53d6\u7b2c3\u5217\u5230\u7b2c8\u5217\uff0c\u6b65\u957f\u4e3a2\na[:,2:4] = 0  # \u628a\u7b2c3\u5217\u5230\u7b2c4\u5217\u7684\u503c\u8bbe\u7f6e\u4e3a0\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#numpy_4","title":"numpy\u4e2d\u5e03\u5c14\u7d22\u5f15","text":"Python<pre><code>t = np.arange(24).reshape(4,6)\nprint(t &lt; 10)\n&gt;&gt;&gt;\narray([[ True,  True,  True,  True,  True,  True],\n       [ True,  True,  True,  True, False, False],\n       [False, False, False, False, False, False],\n       [False, False, False, False, False, False]])\n# \u4ee5\u4e0a\u662ft&lt;10\u7684\u8f93\u51fa\u7ed3\u679c\n\nt[t&lt;10]=0\nprint(t)\n&gt;&gt;&gt;\n[[ 0  0  0  0  0  0]\n [ 0  0  0  0 10 11]\n [12 13 14 15 16 17]\n [18 19 20 21 22 23]]\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#numpy_5","title":"numpy\u4e2d\u7684\u4e09\u5143\u8fd0\u7b97\u7b26","text":"<p>\u628at\u4e2d\u5c0f\u4e8e10\u7684\u6570\u5b57\u66ff\u6362\u4e3a0\uff0c\u628a\u5927\u4e8e10\u7684\u66ff\u6362\u4e3a10 Python<pre><code>t = np.where(t&lt;10,0,10)\nprint(t)\n&gt;&gt;&gt;\n[[ 0  0  0  0  0  0]\n [ 0  0  0  0 10 10]\n [10 10 10 10 10 10]\n [10 10 10 10 10 10]]\n</code></pre></p>","tags":["Python"]},{"location":"python/pylibs/numpy/#numpyclip","title":"numpy\u4e2d\u7684clip\uff08\u88c1\u526a\uff09","text":"<p>\u628at\u4e2d\u5c0f\u4e8e10\u7684\u6570\u5b57\u66ff\u6362\u4e3a0\uff0c\u5927\u4e8e20\u7684\u6570\u5b57\u66ff\u6362\u4e3a20\uff0c\u5176\u4ed6\u6570\u5b57\u4e0d\u53d8 Python<pre><code>t = t.clip(10, 20)\nprint(t)\n&gt;&gt;&gt;\n[[10 10 10 10 10 10]\n [10 10 10 10 10 11]\n [12 13 14 15 16 17]\n [18 19 20 20 20 20]]\n</code></pre></p>","tags":["Python"]},{"location":"python/pylibs/numpy/#numpynaninf","title":"numpy\u4e2d\u7684nan\u548cinf","text":"<p>nan(NAN,Nan):not a number\u8868\u793a\u4e0d\u662f\u4e00\u4e2a\u6570\u5b57</p> <p>\u4ec0\u4e48\u65f6\u5019\u4f1a\u51fa\u73b0numpy\u4e2d\u7684nan\uff1a</p> <ul> <li>\u5f53\u6211\u4eec\u8bfb\u53d6\u672c\u5730\u7684\u6587\u4ef6\u4e3afloat\u7684\u65f6\u5019\uff0c\u5982\u679c\u6709\u7f3a\u5931\uff0c\u5c31\u4f1a\u51fa\u73b0nan</li> <li>\u5f53\u505a\u4e86\u4e00\u4e2a\u4e0d\u5408\u9002\u7684\u8ba1\u7b97\u7684\u65f6\u5019\uff08\u6bd4\u5982\u65e0\u7a77\u5927\uff08inf\uff09\u51cf\u53bb\u65e0\u7a77\u5927\uff09</li> </ul> <p>inf(-inf,inf):infinity\uff0cinf\u8868\u793a\u6b63\u65e0\u7a77\uff0c-inf\u8868\u793a\u8d1f\u65e0\u7a77</p>","tags":["Python"]},{"location":"python/pylibs/numpy/#inf-infinf","title":"\u4ec0\u4e48\u65f6\u5019\u4f1a\u51fa\u73b0inf(-inf,inf):","text":"<ul> <li>\u6bd4\u5982\u4e00\u4e2a\u6570\u5b57\u9664\u4ee50\uff0c\uff08python\u4e2d\u76f4\u63a5\u56de\u62a5\u9519\uff0cnumpy\u4e2d\u662f\u4e00\u4e2ainf\u6216\u8005-inf\uff09</li> </ul>","tags":["Python"]},{"location":"python/pylibs/numpy/#infnantypefloat","title":"inf\u548cnan\u7684type\u7c7b\u578b\u90fd\u662ffloat","text":"","tags":["Python"]},{"location":"python/pylibs/numpy/#nan","title":"nan\u4e2d\u7684\u6ce8\u610f\u70b9\uff1a","text":"<ul> <li>\u4e24\u4e2anan\u662f\u4e0d\u76f8\u7b49\u7684\uff0c\u5373np.nan != np.nan</li> <li>\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0a\u7684\u7279\u6027\uff0c\u5224\u65ad\u6570\u7ec4\u4e2dnan\u7684\u4e2a\u6570 </li> <li>np.count_nonzero(t != t)</li> <li>\u5982\u679c\u5224\u65ad\u4e00\u4e2a\u6570\u5b57\u662f\u5426\u4e3anan\u5462\uff1f\u901a\u8fc7np.isnan(a)\u6765\u5224\u65ad\uff0c\u8fd4\u56debool\u7c7b\u578b\uff0c\u6bd4\u8f83\u628anan\u66ff\u6362\u4e3a0 </li> <li>t[np.isnan(t)] = 0</li> <li>nan\u548c\u4efb\u4f55\u503c\u8ba1\u7b97\u90fd\u4e3anan</li> </ul>","tags":["Python"]},{"location":"python/pylibs/numpy/#numpy_6","title":"numpy\u4e2d\u5e38\u7528\u7edf\u8ba1\u51fd\u6570","text":"<ul> <li>\u6c42\u548c\uff1at.sum(axis=None)</li> <li>\u5747\u503c\uff1at.mean(a,axis=None) \u53d7\u79bb\u7fa4\u70b9\u7684\u5f71\u54cd\u8f83\u5927</li> <li>\u4e2d\u503c\uff1anp.median(t,axis=None)</li> <li>\u6700\u5927\u503c\uff1at.max(axis=None)</li> <li>\u6700\u5c0f\u503c\uff1at.min(axis=None)</li> <li>\u6781\u503c\uff1anp.ptp(t,axis=None) \u5373\u6700\u5927\u503c\u548c\u6700\u5c0f\u503c\u53ea\u5dee</li> <li>\u6807\u51c6\u5dee\uff1a t.std(axis=None)</li> </ul> <p>\u9ed8\u8ba4\u8fd4\u56de\u591a\u7ef4\u6570\u7ec4\u7684\u5168\u90e8\u7684\u7edf\u8ba1\u7ed3\u679c\uff0c\u5982\u679c\u6307\u5b9aaxis\u5219\u8fd4\u56de\u4e00\u4e2a\u5f53\u524d\u8f74\u4e0a\u7684\u7ed3\u679c</p> <p>\u6807\u51c6\u5dee\uff1a\u662f\u4e00\u7ec4\u6570\u636e\u5e73\u5747\u503c\u5206\u6563\u7a0b\u5ea6\u7684\u4e00\u79cd\u5ea6\u91cf\u3002\u4e00\u4e2a\u8f83\u5927\u7684\u6807\u51c6\u5dee\uff0c\u4ee3\u8868\u5927\u90e8\u5206\u6570\u503c\u548c\u5176\u5e73\u5747\u503c\u4e4b\u95f4\u5dee\u5f02\u8f83\u5927\uff1b\u4e00\u4e2a\u8f83\u5c0f\u7684\u6807\u51c6\u5dee\uff0c\u4ee3\u8868\u8fd9\u4e9b\u6570\u503c\u8f83\u63a5\u8fd1\u5e73\u5747\u503c\u53cd\u6620\u51fa\u6570\u636e\u7684\u6ce2\u52a8\u7a33\u5b9a\u60c5\u51b5\uff0c\u8d8a\u5927\u8868\u793a\u6ce2\u52a8\u8d8a\u5927\uff0c\u8d8a\u4e0d\u7a33\u5b9a\u3002</p>","tags":["Python"]},{"location":"python/pylibs/numpy/#ndarry","title":"ndarry\u7f3a\u5931\u503c\u586b\u5145\u5747\u503c","text":"Python<pre><code>t = np.array([[  0.,   1.,   2.,   3.,   4.,   5.],\n       [  6.,   7.,  np.nan,   9.,  10.,  11.],\n       [ 12.,  13.,  14.,  np.nan,  16.,  17.],\n       [ 18.,  19.,  20.,  21.,  22.,  23.]])\n\ndef fill_nan_by_column_mean(t):\n  for i in range(t.shape[1]):\n    nan_num = np.count_nonzero(t[:, i][t[:, i] != t[:, i]])  # \u8ba1\u7b97\u975enan\u7684\u4e2a\u6570\n    if nan_num &gt; 0:  # \u5b58\u5728\u7684nan\u503c\n      now_col = t[:, i]\n      now_col_not_nan = now_col[np.isnan(now_col) == False].sum()  # \u6c42\u548c\n      now_col_mean = now_col_not_nan / (t.shape[0] - nan_num)  # \u548c/\u4e2a\u6570\n      now_col[np.isnan(now_col)] = now_col_mean  # \u8d4b\u503c\u7ed9now_col\n      t[:, i] = now_col  # \u8d4b\u503c\u7ed9t\uff0c\u5373\u66f4\u65b0t\u7684\u5f53\u524d\u5217\n\nfill_nan_by_column_mean(t)\nprint(t)\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#_10","title":"\u6570\u7ec4\u7684\u62fc\u63a5","text":"Python<pre><code>np.vstack((t1,t2))  # \u7ad6\u76f4\u62fc\u63a5\nnp.hstack((t1,t2))  # \u6c34\u5e73\u62fc\u63a5\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#_11","title":"\u6570\u7ec4\u7684\u884c\u5217\u4ea4\u6362","text":"Python<pre><code>t[[1,2],:] = t[[2,1],:]  # \u884c\u4ea4\u6362\nt[:,[0,2]] = t[:,[2,0]]  # \u5217\u4ea4\u6362\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/numpy/#numpy_7","title":"numpy\u66f4\u591a\u597d\u7528\u7684\u65b9\u6cd5","text":"<ol> <li>\u83b7\u53d6\u6700\u5927\u503c\u6700\u5c0f\u503c\u7684\u4f4d\u7f6e </li> <li>np.argmax(t,axis=0)</li> <li> <p>np.argmin(t,axis=1)</p> </li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u51680\u7684\u6570\u7ec4\uff1anp.zeros((3,4))</p> </li> <li>\u521b\u5efa\u4e00\u4e2a\u51681\u7684\u6570\u7ec4\uff1anp.ones((3,4))</li> <li>\u521b\u5efa\u4e00\u4e2a\u5bf9\u89d2\u7ebf\u4e3a1\u7684\u6b63\u65b9\u5f62\u6570\u7ec4\uff08\u65b9\u9635\uff09\uff1anp,eye(3)</li> </ol>","tags":["Python"]},{"location":"python/pylibs/numpy/#_12","title":"\u751f\u6210\u968f\u673a\u6570","text":"","tags":["Python"]},{"location":"python/pylibs/numpy/#numpycopyview","title":"numpy\u7684\u6ce8\u610f\u70b9copy\u548cview","text":"<ol> <li>a=b\u5b8c\u5168\u4e0d\u590d\u5236\uff0ca\u548cb\u76f8\u4e92\u5f71\u54cd</li> <li>a=b[:]\uff0c\u89c6\u56fe\u7684\u64cd\u4f5c\uff0c\u4e00\u79cd\u5207\u7247\uff0c\u4f1a\u521b\u5efa\u65b0\u7684\u5bf9\u8c61a\uff0c\u4f46\u662fa\u7684\u6570\u636e\u5b8c\u5168\u7531b\u4fdd\u7ba1\uff0c\u4ed6\u4eec\u4e24\u4e2a\u7684\u6570\u636e\u53d8\u5316\u662f\u4e00\u81f4\u7684\u3002</li> <li>a=b.copy()\uff0c\u590d\u5236\uff0ca\u548cb\u4e92\u4e0d\u5f71\u54cd\u3002</li> </ol>","tags":["Python"]},{"location":"python/pylibs/numpy/#_13","title":"Numpy\u4e4b\u6570\u636e\u8ba1\u7b97\u5de5\u5177","text":"","tags":["Python"]},{"location":"python/pylibs/pandas/","title":"Pandas\u4e4b\u6570\u636e\u5206\u6790\u5de5\u5177","text":"","tags":["Python"]},{"location":"python/pylibs/pandas/#_1","title":"\u5199\u5728\u524d\u9762","text":"<ul> <li>\u5b98\u7f51\uff1ahttp://pandas.pydata.org</li> <li>github\u5730\u5740\uff1ahttps://github.com/pandas-dev/pandas</li> <li>\u5b9e\u73b0\u8bed\u8a00\uff1aPython</li> <li>\u5f53\u524d\u7248\u672c\uff1aversion 1.5.1</li> <li>\u5f53\u524dstar\u6570\uff1a35.7k</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#pandas_1","title":"\u4ec0\u4e48\u662fPandas\uff1f","text":"<p>\u5b98\u7f51\u4ecb\u7ecd: pandas is open source, BSD-licensed library providing high-performance, easy-to-use data structures and data analysis tools for the Python programming language.</p>","tags":["Python"]},{"location":"python/pylibs/pandas/#_2","title":"\u540d\u79f0\u7531\u6765","text":"<ul> <li>\u6765\u81eapanel data(\u9762\u677f\u6570\u636e) \u548c data analysis(\u6570\u636e\u5206\u6790)\u7684\u5408\u6210</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_3","title":"\u6982\u8ff0","text":"<ul> <li>\u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u5206\u6790\u7ed3\u6784\u5316\u6570\u636e\u7684\u5de5\u5177\u96c6\uff0c\u57fa\u4e8eNumpy\u6784\u5efa\uff0c\u63d0\u4f9b\u4e86\u9ad8\u7ea7\u6570\u636e\u7ed3\u6784\u548c\u6570\u636e\u64cd\u4f5c\u5de5\u5177</li> <li>\u662fPython\u6210\u4e3a\u5f3a\u5927\u800c\u9ad8\u6548\u7684\u6570\u636e\u5206\u6790\u73af\u5883\u7684\u91cd\u8981\u56e0\u7d20\u4e4b\u4e00</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_4","title":"\u529f\u80fd\u7279\u6027","text":"<ul> <li>\u4e00\u4e2a\u5f3a\u5927\u7684\u5206\u6790\u548c\u64cd\u4f5c\u5927\u578b\u7ed3\u6784\u5316\u6570\u636e\u96c6\u6240\u9700\u8981\u7684\u5de5\u5177\u96c6</li> <li>\u57fa\u4e8eNumpy\uff0c\u63d0\u4f9b\u4e86\u9ad8\u6027\u80fd\u77e9\u9635\u8fd0\u7b97</li> <li>\u63d0\u4f9b\u4e86\u5927\u91cf\u80fd\u591f\u5feb\u901f\u4fbf\u6377\u5730\u5904\u7406\u6570\u636e\u7684\u51fd\u6570\u548c\u65b9\u6cd5</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_5","title":"\u76ee\u6807\u95ee\u9898\u57df","text":"<ul> <li>Numpy\u901a\u5e38\u7528\u4e8e\u5904\u7406\u6570\u503c\uff0cPandas\u65e2\u80fd\u5904\u7406\u6570\u503c\uff0c\u8fd8\u80fd\u5904\u7406\u5176\u4ed6\u7c7b\u578b\u7684\u6570\u636e\uff0c\u5982\u5b57\u7b26\u4e32\u3001\u65f6\u95f4\u5e8f\u5217\u7b49</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_6","title":"\u5e94\u7528\u573a\u666f","text":"<ul> <li>\u5e94\u7528\u4e8e\u6570\u636e\u6316\u6398\u3001\u6570\u636e\u5206\u6790\u573a\u666f</li> <li>\u63d0\u4f9b\u6570\u636e\u6e05\u6d17\u529f\u80fd</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#pandas_2","title":"Pandas\u7684\u5b89\u88c5","text":"<ul> <li> <p>\u5b89\u88c5 Bash<pre><code>pip install pandas -i https://pypi.tuna.tsinghua.edu.cn/simple\n\u6216\nconda install pandas\n</code></pre></p> </li> <li> <p>\u4f7f\u7528 Python<pre><code>import pandas as pd\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#pandas_3","title":"Pandas\u7684\u5e38\u7528\u7ed3\u6784","text":"<ol> <li>Series: \u4e00\u7ef4\uff0c\u5e26\u6807\u7b7e\u6570\u7ec4</li> <li>DataFrame: \u4e8c\u7ef4\uff0c Series\u5bb9\u5668</li> </ol>","tags":["Python"]},{"location":"python/pylibs/pandas/#series","title":"Series | \u4ecb\u7ecd","text":"<p>\u6982\u8ff0</p> <ul> <li>\u6982\u5ff5\uff1a</li> <li>\u662f\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u4e00\u7ef4\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u7531\u4e00\u7ec4\u6570\u636e\uff08\u5404\u79cdNumpy\u6570\u636e\u7c7b\u578b\uff09\u4ee5\u53ca\u4e00\u7ec4\u4e0e\u4e4b\u5bf9\u5e94\u7684\u7d22\u5f15\uff08\u6570\u636e\u6807\u7b7e\uff09\u7ec4\u6210</li> <li>\u6982\u5ff5\u7406\u89e3\uff1a</li> <li>Series\u5bf9\u8c61\u672c\u8d28\u662f\u7531\u4e24\u4e2a\u6570\u7ec4\u7ec4\u6210\uff0c\u4e00\u4e2a\u6570\u7ec4\u6784\u6210\u5bf9\u8c61\u7684\u5efa\uff08index\uff0c\u7d22\u5f15\uff09,\u4e00\u4e2a\u6570\u7ec4\u6784\u6210\u5bf9\u8c61\u7684\u503c\uff08values\uff09, \u952e-&gt;\u503c</li> <li>\u56fe\u4f8b\uff1a    </li> <li>\u7c7b\u6bd4\uff1a</li> <li>numpy\u4e2d\u7684ndarray\u7684\u5f88\u591a\u65b9\u6cd5\u90fd\u53ef\u4ee5\u7528\u4e8e\u4e0eseries\u7c7b\u578b\uff0c\u6bd4\u5982argmax\uff0cclip\uff0c</li> <li>series\u5177\u6709where\u65b9\u6cd5\uff0c\u4f46\u662f\u7ed3\u679c\u548cndarray\u4e0d\u540c</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#dataframe","title":"DataFrame | \u4ecb\u7ecd","text":"<p>\u6982\u8ff0</p> <ul> <li>\u6982\u5ff5\uff1a</li> <li>\u662f\u4e00\u4e2a\u8868\u683c\u578b\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u6709\u4e00\u7ec4\u6709\u5e8f\u7684\u5217\uff0c\u6bcf\u5217\u53ef\u4ee5\u662f\u4e0d\u540c\u7c7b\u578b\u7684\u503c\uff0cDataFrame\u65e2\u6709\u884c\u7d22\u5f15\u53c8\u6709\u5217\u7d22\u5f15\uff0c\u901a\u5e38\u88ab\u770b\u505a\u7531Series\u7ec4\u6210\u7684\u5b57\u5178\uff08\u540c\u4e00\u4e2a\u7d22\u5f15\uff09\uff0c\u6570\u636e\u662f\u4ee5\u4e8c\u7ef4\u7ed3\u6784\u5b58\u653e\u7684\u3002</li> <li>\u6982\u5ff5\u7406\u89e3\uff1a</li> <li>\u7c7b\u4f3c\u591a\u7ef4\u6570\u7ec4/\u8868\u683c\u6570\u636e\uff08excel\uff09</li> <li>\u6bcf\u5217\u6570\u636e\u90fd\u53ef\u4ee5\u662f\u4e0d\u540c\u7c7b\u578b\u7684</li> <li>\u7d22\u5f15\u5305\u62ec\u884c\u7d22\u5f15\u3001\u5217\u7d22\u5f15</li> <li>\u56fe\u4f8b\uff1a    </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#pandas_4","title":"Pandas\u7684\u57fa\u672c\u7528\u6cd5","text":"","tags":["Python"]},{"location":"python/pylibs/pandas/#series_1","title":"Series\u7684\u57fa\u672c\u7528\u6cd5","text":"","tags":["Python"]},{"location":"python/pylibs/pandas/#_7","title":"\u521b\u5efa","text":"Python<pre><code>import pandas as pd\n\n# \u65b9\u5f0f\u4e00\uff1a\u901a\u8fc7list\u521b\u5efaSeries\nser1 = pd.Series(range(10, 20))\n# ---------------\u65b9\u5f0f\u4e00--------------------------\nIn [1]: import pandas as pd\nIn [2]: ser1 = pd.Series(range(10, 20))\nIn [3]: ser1\nOut[3]:\n0    10\n1    11\n...  ...\n8    18\n9    19\ndtype: int64\n\nIn [4]: print(type(ser1))\n&lt;class 'pandas.core.series.Series'&gt;\n\n# \u65b9\u5f0f\u4e8c\uff1a\u901a\u8fc7dict\u521b\u5efaSeries\nyear_data = {2021: 18.8, 2022: 28.8, 2023: 8.8}\nser2 = pd.Series(year_data)\n# ---------------\u65b9\u5f0f\u4e8c--------------------------\nIn [2]: year_data = {2021: 18.8, 2022: 28.8, 2023: 8.8}\n   ...: ser2 = pd.Series(year_data)\n\nIn [3]: ser2\nOut[3]:\n2021    18.8\n2022    28.8\n2023     8.8\ndtype: float64\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#_8","title":"\u7d22\u5f15","text":"<ul> <li>\u7d22\u5f15\uff1a</li> <li>Series\u5bf9\u8c61\u672c\u8d28\u4e0a\u6709\u4e24\u4e2a\u6570\u7ec4\u6784\u6210\uff0c\u4e00\u4e2a\u6570\u7ec4\u6784\u6210\u5bf9\u8c61\u7684\u952e\uff08index, \u7d22\u5f15\uff09\uff0c\u4e00\u4e2a\u6570\u636e\u6784\u6210\u5bf9\u8c61\u7684\u503c\uff08values\uff09</li> <li>\u7d22\u5f15\u64cd\u4f5c\u65f6\uff0c \u4e00\u4e2a\u7684\u65f6\u5019\u76f4\u63a5\u4f20\u5165\u5e8f\u53f7\u6216index, \u591a\u4e2a\u7684\u65f6\u5019\u4f20\u5165\u5e8f\u53f7\u6216index\u7684\u5217\u8868</li> <li>\u7d22\u5f15\u5bf9\u8c61\u4e0d\u53ef\u53d8\uff0c\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u5b89\u5168\u6027</li> <li>\u5e38\u89c1\u7684Index\u79cd\u7c7b</li> <li>Index\uff1a\u7d22\u5f15</li> <li>Int64Index\uff1a \u6574\u6570\u7d22\u5f15</li> <li>MutiIndex: \u5c42\u7ea7\u7d22\u5f15</li> <li>DatatimeIndex: \u65f6\u95f4\u6233\u7d22\u5f15</li> <li> <p>\u5e38\u89c1\u7d22\u5f15\u64cd\u4f5c\uff1a Python<pre><code>ser[\u2018label\u2019], ser[pos]  # \u884c\u7d22\u5f15\n\nser[2:4], ser[\u2018label1\u2019: \u2019label3\u2019]  # \u5207\u7247\u7d22\u5f15\uff0c\uff08\u6309\u7d22\u5f15\u540d\u5207\u7247\u64cd\u4f5c\u65f6\uff0c\u662f\u5305\u542b\u7ec8\u6b62\u7d22\u5f15\u7684\uff09\n\nser[[\u2018label1\u2019, \u2019label2\u2019, \u2018label3\u2019]]  # \u4e0d\u8fde\u7eed\u7d22\u5f15\n\nser_bool = ser_bool &gt; 2  # \u5e03\u5c14\u7d22\u5f15\nser_obj[ser_bool]\nser_obj[ser_obj &gt; 2]\n</code></pre></p> </li> <li> <p>\u5b9e\u64cd\uff1a Python<pre><code>In [15]: import numpy as np\nIn [16]: ser3 = pd.Series(np.arange(5), index=list(\"ABCDE\"))\n\nIn [17]: ser3\nOut[17]:\nA    0\nB    1\nC    2\nD    3\nE    4\ndtype: int64\n\nIn [18]: ser3[1:4:2]  # \u5207\u7247\uff0c\u6b65\u957f\u4e3a2 \nOut[18]:\nB    1\nD    3\ndtype: int64\n\nIn [19]: ser3[2]  # \u53d6\u7d22\u5f15\nOut[19]: 2\n\nIn [20]: ser3[1:4]  # \u5207\u7247\uff0c\u6b65\u957f\u4e3a\u9ed8\u8ba4\u503c1\nOut[20]:\nB    1\nC    2\nD    3\ndtype: int64\n\nIn [21]: ser3[ser3&gt;3]  # \u503c\u5927\u4e8e3\u7684\u6240\u6709\u6570\u636e\nOut[21]:\nE    4\ndtype: int64\n\nIn [22]: ser3[\"B\"]  # \u7d22\u5f15\u4e3aB\u7684\u6570\u636e\nOut[22]: 1\n\nIn [24]: ser3[[\"A\", \"E\"]]  # \u7d22\u5f15\u4e3aA\u3001B\u7684\u6570\u636e\nOut[24]:\nA    0\nE    4\ndtype: int64\n\nIn [25]: ser3[[0,1,2]]  # \u53d6\u7d22\u5f15\u4e3a0\u30011\u30012\u7684\u6570\u636e\uff08\u4e0d\u8fde\u7eed\u7d22\u5f15\uff09\nOut[25]:\nA    0\nB    1\nC    2\ndtype: int64\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_9","title":"\u7d22\u5f15\u548c\u503c","text":"Python<pre><code>In [26]: ser2\nOut[26]:\nABC\n2021    18.8\n2022    28.8\n2023     8.8\nName: AAA, dtype: float64\n\nIn [27]: ser2.index  # \u53d6\u7d22\u5f15\u503c\nOut[27]: Int64Index([2021, 2022, 2023], dtype='int64', name='ABC')\n\nIn [28]: ser2.values  # \u53d6\u503c\nOut[28]: array([18.8, 28.8,  8.8])\n\nIn [29]: type(ser2.index)  \nOut[29]: pandas.core.indexes.numeric.Int64Index\n\nIn [30]: type(ser2.values)\nOut[30]: numpy.ndarray\n\nIn [31]: ser2.name = \"Bobo\"  # \u8bbe\u7f6eSeries\u5bf9\u8c61\u540d\uff0c\u6ca1\u6709\u5c31\u65b0\u589e\uff0c\u6709\u5c31\u4fee\u6539\n\nIn [32]: ser2.index.name = \"YEAR\"  # \u8bbe\u7f6eSeries\u5bf9\u8c61\u7d22\u5f15\u540d\uff0c\u6ca1\u6709\u5c31\u65b0\u589e\uff0c\u6709\u5c31\u4fee\u6539\n\nIn [33]: ser2\nOut[33]:\nYEAR\n2021    18.8\n2022    28.8\n2023     8.8\nName: Bobo, dtype: float64\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#loc","title":"loc\u6807\u7b7e\u7d22\u5f15","text":"Python<pre><code>n [8]: ser4 = pd.Series(np.arange(5), index=list(\"abcde\"))\n\nIn [9]: ser4['a':'e']\nOut[9]:\na    0\nb    1\nc    2\nd    3\ne    4\ndtype: int64\n\nIn [10]: ser4.loc['a':'e']\nOut[10]:\na    0\nb    1\nc    2\nd    3\ne    4\ndtype: int64\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#iloc","title":"iloc\u4f4d\u7f6e\u7d22\u5f15","text":"<ul> <li>\u57fa\u4e8e\u7d22\u5f15\u7f16\u53f7\u7d22\u5f15 Python<pre><code>In [15]: ser5 = pd.Series(np.arange(5), index=list(\"abcde\"))\n\nIn [16]: ser5\nOut[16]:\na    0\nb    1\nc    2\nd    3\ne    4\ndtype: int64\n\nIn [17]: ser5[1:4]\nOut[17]:\nb    1\nc    2\nd    3\ndtype: int64\n\nIn [18]: ser5.iloc[1:4]\nOut[18]:\nb    1\nc    2\nd    3\ndtype: int64\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#ix","title":"ix\u6807\u7b7e\u4e0e\u4f4d\u7f6e\u6df7\u5408\u7d22\u5f15(\u65b0\u7248\u672c\u4e2d\u79fb\u9664\u6b64\u5c5e\u6027)","text":"<ul> <li>ix\u662f\u4ee5\u4e0a\u4e8c\u8005\u7684\u7efc\u5408\uff0c\u65e2\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15\u7f16\u53f7\uff0c\u53c8\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7d22\u5f15\uff0c\u8981\u89c6\u60c5\u51b5\u4e0d\u540c\u6765\u4f7f\u7528\uff0c</li> <li>\u5982\u679c\u7d22\u5f15\u65e2\u6709\u6570\u5b57\u53c8\u6709\u82f1\u6587\uff0c\u90a3\u4e48\u8fd9\u79cd\u65b9\u5f0f\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528\u7684\uff0c\u5bb9\u6613\u5bfc\u81f4\u5b9a\u4f4d\u7684\u6df7\u4e71\u3002 Python<pre><code>In [28]: ser5.ix['a':'c']\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\nInput In [28], in &lt;cell line: 1&gt;()\n----&gt; 1 ser5.ix['a':'c']\n\nFile /usr/local/Caskroom/miniforge/base/lib/python3.9/site-packages/pandas/core/generic.py:5907, in NDFrame.__getattr__(self, name)\n   5900 if (\n   5901     name not in self._internal_names_set\n   5902     and name not in self._metadata\n   5903     and name not in self._accessors\n   5904     and self._info_axis._can_hold_identifiers_and_holds_name(name)\n   5905 ):\n   5906     return self[name]\n-&gt; 5907 return object.__getattribute__(self, name)\n\nAttributeError: 'Series' object has no attribute 'ix'\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_10","title":"\u5bf9\u9f50\u8fd0\u7b97","text":"<p>\u662f\u6570\u636e\u6e05\u6d17\u7684\u91cd\u8981\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u6309\u7d22\u5f15\u5bf9\u9f50\u8fdb\u884c\u8fd0\u7b97\uff0c\u5982\u679c\u6ca1\u6709\u5bf9\u9f50\u4f4d\u7f6e\u5219\u8865NaN</p> <ul> <li> <p>Series \u6309\u884c\u3001\u7d22\u5f15\u5bf9\u9f50 Python<pre><code>In [3]: s1 = pd.Series(range(10,20), index=range(10))\n\nIn [5]: s1\nOut[5]:\n0    10\n1    11\n2    12\n3    13\n4    14\n5    15\n6    16\n7    17\n8    18\n9    19\ndtype: int64\n\nIn [6]: s2 = pd.Series(range(20,25), index=range(5))\n\nIn [7]: s2\nOut[7]:\n0    20\n1    21\n2    22\n3    23\n4    24\ndtype: int64\n\nIn [8]: s1 + s2\nOut[8]:\n0    30.0\n1    32.0\n2    34.0\n3    36.0\n4    38.0\n5     NaN\n6     NaN\n7     NaN\n8     NaN\n9     NaN\ndtype: float64\n</code></pre></p> </li> <li> <p>\u586b\u5145\u672a\u5bf9\u9f50\u7684\u6570\u636e\u8fdb\u884c\u8fd0\u7b97</p> </li> <li>fill_value<ul> <li>\u4f7f\u7528add\u3001sub\u3001div\u3001mul \u7684\u540c\u65f6\uff0c\u901a\u8fc7fill_value\u6307\u5b9a\u586b\u5145\u503c\uff0c\u672a\u5bf9\u9f50\u7684\u6570\u636e\u5c06\u548c\u586b\u5145\u503c\u505a\u8fd0\u7b97 Python<pre><code>In [27]: s1.add(s2, fill_value=5)\nOut[27]:\n0    30.0\n1    32.0\n2    34.0\n3    36.0\n4    38.0\n5    20.0\n6    21.0\n7    22.0\n8    23.0\n9    24.0\ndtype: float64\n\nIn [28]: s1.add(s2, fill_value=-2)\nOut[28]:\n0    30.0\n1    32.0\n2    34.0\n3    36.0\n4    38.0\n5    13.0\n6    14.0\n7    15.0\n8    16.0\n9    17.0\ndtype: float64\n</code></pre></li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#tolist","title":"tolist()\u65b9\u6cd5","text":"Python<pre><code>In [35]: ser4 = pd.Series([1,2,4,1,4,3,2])\n\nIn [36]: ser4.tolist()\nOut[36]: [1, 2, 4, 1, 4, 3, 2]\n\nIn [37]: ser4.to_list()\nOut[37]: [1, 2, 4, 1, 4, 3, 2]\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#unique","title":"unique()\u65b9\u6cd5","text":"Python<pre><code>In [38]: ser4.unique()\nOut[38]: array([1, 2, 4, 3])\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#_11","title":"\u5176\u4ed6\u65b9\u6cd5","text":"Python<pre><code>n [39]: ser4.unique()\n  abs()                   convert_dtypes()        first()                 last()\n  add()                   copy()                  first_valid_index()     last_valid_index()\n  add_prefix()            corr()                  flags                   le()\n  add_suffix()            count()                 floordiv()              loc\n  agg()                   cov()                   ge()                    lt()\n  aggregate()             cummax()                get()                   mad()\n  align()                 cummin()                groupby()               map()\n  all()                   cumprod()               gt()                    mask()\n  any()                   cumsum()                hasnans                 max()\n  append()                describe()              head()                  mean()\n  apply()                 diff()                  hist()                  median()\n  argmax()                div()                   iat                     memory_usage()\n  argmin()                divide()                idxmax()                min()\n  argsort()               divmod()                idxmin()                mod()\n  array                   dot()                   iloc                    mode()\n  asfreq()                drop()                  index                   mul()\n  asof()                  drop_duplicates()       infer_objects()         multiply()              &gt;\n  astype()                droplevel()             info()                  name\n  at                      dropna()                interpolate()           nbytes\n  at_time()               dtype                   is_monotonic            ndim\n  attrs                   dtypes                  is_monotonic_decreasing ne()\n  autocorr()              duplicated()            is_monotonic_increasing nlargest()\n  axes                    empty                   is_unique               notna()\n  backfill()              eq()                    isin()                  notnull()\n  between()               equals()                isna()                  nsmallest()\n  between_time()          ewm()                   isnull()                nunique()\n  bfill()                 expanding()             item()                  pad()\n  bool()                  explode()               items()                 pct_change()\n  clip()                  factorize()             iteritems()             pipe()\n  combine()               ffill()                 keys()                  plot\n  combine_first()         fillna()                kurt()                  pop()\n  compare()               filter()                kurtosis()              pow()\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#dataframe_1","title":"DataFrame\u7684\u57fa\u672c\u7528\u6cd5","text":"Python<pre><code>import pandas as pd\nimport numpy as np\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#_12","title":"\u521b\u5efa","text":"Python<pre><code># \u65b9\u5f0f\u4e00\uff1a\u901a\u8fc7ndarray\u521b\u5efa\nIn [3]: array = np.random.randn(5, 4)\n\nIn [4]: array\nOut[4]:\narray([[ 0.92360777, -0.40278525, -0.66873708,  1.80493655],\n       [-2.35582906,  0.18222298, -0.54358948,  0.10477355],\n       [-0.01014204, -0.29127566,  0.53816636, -0.39215923],\n       [ 2.02733253, -0.79347232, -0.39637719,  0.98461896],\n       [ 0.61317253, -1.95664987,  0.99766931, -0.43095178]])\n\nIn [5]: df1 = pd.DataFrame(array)\n\nIn [6]: df1\nOut[6]:\n          0         1         2         3\n0  0.923608 -0.402785 -0.668737  1.804937\n1 -2.355829  0.182223 -0.543589  0.104774\n2 -0.010142 -0.291276  0.538166 -0.392159\n3  2.027333 -0.793472 -0.396377  0.984619\n4  0.613173 -1.956650  0.997669 -0.430952\n\n\n# \u65b9\u5f0f\u4e8c\uff1a\u901a\u8fc7dict\u521b\u5efa\nIn [7]: dict_data = {'A': 1,\n   ...:              'B': pd.Timestamp('20221109'),\n   ...:              'C': pd.Series(1, index=list(range(4)),dtype='float32'),\n   ...:              'D': np.array([3] * 4,dtype='int32'),\n   ...:              'E': [\"Python\",\"Go\",\"C++\",\"C\"],\n   ...:              'F': 'sswang' }\n\nIn [8]: dict_data\nOut[8]:\n{'A': 1,\n 'B': Timestamp('2022-11-09 00:00:00'),\n 'C': 0    1.0\n 1    1.0\n 2    1.0\n 3    1.0\n dtype: float32,\n 'D': array([3, 3, 3, 3], dtype=int32),\n 'E': ['Python', 'Go', 'C++', 'C'],\n 'F': 'sswang'}\n\nIn [9]: df2 = pd.DataFrame(dict_data)\n\nIn [10]: df2\nOut[10]:\n   A          B    C  D       E       F\n0  1 2022-11-09  1.0  3  Python  sswang\n1  1 2022-11-09  1.0  3      Go  sswang\n2  1 2022-11-09  1.0  3     C++  sswang\n3  1 2022-11-09  1.0  3       C  sswang\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#_13","title":"\u901a\u8fc7\u7d22\u5f15\u83b7\u53d6\u5217\u6570\u636e","text":"<p>Series\u7c7b\u578b</p> <ul> <li>df[col_idx] \u6216 df.col_idx Python<pre><code>In [10]: df2\nOut[10]:\n   A          B    C  D       E       F\n0  1 2022-11-09  1.0  3  Python  sswang\n1  1 2022-11-09  1.0  3      Go  sswang\n2  1 2022-11-09  1.0  3     C++  sswang\n3  1 2022-11-09  1.0  3       C  sswang\n\nIn [11]: df2['A']\nOut[11]:\n0    1\n1    1\n2    1\n3    1\nName: A, dtype: int64\n\nIn [12]: df2['E']\nOut[12]:\n0    Python\n1        Go\n2       C++\n3         C\nName: E, dtype: object\n\nIn [13]: df2.B\nOut[13]:\n0   2022-11-09\n1   2022-11-09\n2   2022-11-09\n3   2022-11-09\nName: B, dtype: datetime64[ns]\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_14","title":"\u589e\u52a0\u5217\u6570\u636e","text":"<ul> <li>df[new_col_idx] = data</li> <li>\u7c7b\u4f3c\u4e8edict\u7684\u589e\u52a0key-value Python<pre><code>In [14]: df2['H'] = df2['D'] + 5\n\nIn [15]: df2\nOut[15]:\n   A          B    C  D       E       F  H\n0  1 2022-11-09  1.0  3  Python  sswang  8\n1  1 2022-11-09  1.0  3      Go  sswang  8\n2  1 2022-11-09  1.0  3     C++  sswang  8\n3  1 2022-11-09  1.0  3       C  sswang  8\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_15","title":"\u5220\u9664\u5217","text":"<ul> <li>del df[col_idx] Python<pre><code>In [15]: df2\nOut[15]:\n   A          B    C  D       E       F  H\n0  1 2022-11-09  1.0  3  Python  sswang  8\n1  1 2022-11-09  1.0  3      Go  sswang  8\n2  1 2022-11-09  1.0  3     C++  sswang  8\n3  1 2022-11-09  1.0  3       C  sswang  8\n\nIn [16]: del(df2['H'])\n\nIn [17]: df2\nOut[17]:\n   A          B    C  D       E       F\n0  1 2022-11-09  1.0  3  Python  sswang\n1  1 2022-11-09  1.0  3      Go  sswang\n2  1 2022-11-09  1.0  3     C++  sswang\n3  1 2022-11-09  1.0  3       C  sswang\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_16","title":"\u7d22\u5f15\u64cd\u4f5c","text":"<ul> <li> <p>columns\u6307\u5b9a\u5217\u7d22\u5f15\u540d Python<pre><code>In [19]: pd.DataFrame(np.random.randn(5,4), columns=['A','B','C','D'])\nOut[19]:\n          A         B         C         D\n0  0.901589 -0.973230  0.257040 -0.518793\n1  0.247386  1.722486  0.227000 -0.233353\n2  1.219715 -1.395651  0.899632  1.013356\n3 -0.083246  1.924391 -0.251804 -0.995503\n4  0.782573 -1.076885 -0.014058 -0.197052\n</code></pre></p> </li> <li> <p>\u5217\u7d22\u5f15</p> </li> <li> <p>df[['label']] Python<pre><code>In [24]: df3\nOut[24]:\n          A         B         C         D\n0  1.123462  1.105408  0.039270 -0.424612\n1 -1.451999  0.002271 -0.449790 -0.840314\n2 -1.323392 -1.312659 -0.477671 -0.475040\n3  0.852456 -0.725810  0.343415 -0.888764\n4 -0.634588  0.214208 -0.363505 -0.890744\n\nIn [25]: df3['A']\nOut[25]:\n0    1.123462\n1   -1.451999\n2   -1.323392\n3    0.852456\n4   -0.634588\nName: A, dtype: float64\n\nIn [28]: df3[['A']]\nOut[28]:\n          A\n0  1.123462\n1 -1.451999\n2 -1.323392\n3  0.852456\n4 -0.634588\n</code></pre></p> </li> <li> <p>\u4e0d\u8fde\u7eed\u7d22\u5f15</p> </li> <li>df[['label1','label2']] Python<pre><code>In [32]: df3 = pd.DataFrame(np.random.randn(5,4), columns=['A','B','C','D'])\n\nIn [33]: df3\nOut[33]:\n          A         B         C         D\n0  0.467779 -0.447015 -0.610554  0.718384\n1  0.680987  1.542523  0.828433  1.221965\n2  0.154291 -0.015539  0.234407 -1.376114\n3  2.084046  0.200158 -0.136955  1.275513\n4  0.779262 -0.220597 -2.309179  0.470001\n\nIn [34]: df3[['A','C']]\nOut[34]:\n          A         C\n0  0.467779 -0.610554\n1  0.680987  0.828433\n2  0.154291  0.234407\n3  2.084046 -0.136955\n4  0.779262 -2.309179\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_17","title":"\u9ad8\u7ea7\u7d22\u5f15","text":"","tags":["Python"]},{"location":"python/pylibs/pandas/#loc_1","title":"loc\u6807\u7b7e\u7d22\u5f15","text":"<ul> <li>DataFrame\u4e0d\u80fd\u76f4\u63a5\u5207\u7247\uff0c\u53ef\u4ee5\u901a\u8fc7loc\u6765\u505a\u5207\u7247</li> <li>loc\u662f\u57fa\u4e8e\u6807\u7b7e\u540d\u7d22\u5f15 Python<pre><code>In [11]: df3 = pd.DataFrame(np.random.randn(5,4), columns=['A','B','C','D'])\n\nIn [12]: df3\nOut[12]:\n          A         B         C         D\n0 -0.705794  0.491632  0.460443 -0.217467\n1 -2.118379  0.839388  2.345748 -0.287588\n2 -2.052069 -0.389537 -0.531405 -0.580226\n3  1.368354 -0.104560  0.416091  2.155097\n4  1.499490 -0.189129  1.554696 -0.544609\n\nIn [13]: df3['A']\nOut[13]:\n0   -0.705794\n1   -2.118379\n2   -2.052069\n3    1.368354\n4    1.499490\nName: A, dtype: float64\n\nIn [14]: df3.loc[0:2, 'A']\nOut[14]:\n0   -0.705794\n1   -2.118379\n2   -2.052069\nName: A, dtype: float64\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#iloc_1","title":"iloc\u4f4d\u7f6e\u7d22\u5f15","text":"<ul> <li>\u57fa\u4e8e\u7d22\u5f15\u7f16\u53f7\u6765\u7d22\u5f15 Python<pre><code>In [19]: df4 = pd.DataFrame(np.random.randn(5,4), columns=['A','B','C','D'])\n\nIn [20]: df4\nOut[20]:\n          A         B         C         D\n0  0.663622  0.157452 -0.789668  0.024412\n1 -0.468456  0.078273 -0.440615 -0.604088\n2  1.269526  0.430453  0.524557 -1.735621\n3 -0.242327  1.308116 -0.266340  0.795823\n4  1.806010 -0.328351 -0.622317  0.736839\n\nIn [21]: df4.iloc[0:3, 0]\nOut[21]:\n0    0.663622\n1   -0.468456\n2    1.269526\nName: A, dtype: float64\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#ix_1","title":"ix\u6807\u7b7e\u4e0e\u4f4d\u7f6e\u6df7\u5408\u7d22\u5f15(\u65b0\u7248\u672c\u4e2d\u79fb\u9664\u6b64\u5c5e\u6027)","text":"<ul> <li>ix\u662f\u4ee5\u4e0a\u4e8c\u8005\u7684\u7efc\u5408\uff0c\u65e2\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15\u7f16\u53f7\uff0c\u53c8\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7d22\u5f15\uff0c\u8981\u89c6\u60c5\u51b5\u4e0d\u540c\u6765\u4f7f\u7528\uff0c</li> <li>\u5982\u679c\u7d22\u5f15\u65e2\u6709\u6570\u5b57\u53c8\u6709\u82f1\u6587\uff0c\u90a3\u4e48\u8fd9\u79cd\u65b9\u5f0f\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528\u7684\uff0c\u5bb9\u6613\u5bfc\u81f4\u5b9a\u4f4d\u7684\u6df7\u4e71\u3002 Python<pre><code>In [29]: df4\nOut[29]:\n          A         B         C         D\n0  0.663622  0.157452 -0.789668  0.024412\n1 -0.468456  0.078273 -0.440615 -0.604088\n2  1.269526  0.430453  0.524557 -1.735621\n3 -0.242327  1.308116 -0.266340  0.795823\n4  1.806010 -0.328351 -0.622317  0.736839\n\nIn [30]: df4.ix[0:3, 'A']\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\nInput In [30], in &lt;cell line: 1&gt;()\n----&gt; 1 df4.ix[0:3, 'A']\n\nFile /usr/local/Caskroom/miniforge/base/lib/python3.9/site-packages/pandas/core/generic.py:5907, in NDFrame.__getattr__(self, name)\n   5900 if (\n   5901     name not in self._internal_names_set\n   5902     and name not in self._metadata\n   5903     and name not in self._accessors\n   5904     and self._info_axis._can_hold_identifiers_and_holds_name(name)\n   5905 ):\n   5906     return self[name]\n-&gt; 5907 return object.__getattribute__(self, name)\n\nAttributeError: 'DataFrame' object has no attribute 'ix'\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_18","title":"\u5bf9\u9f50\u8fd0\u7b97","text":"<p>\u662f\u6570\u636e\u6e05\u6d17\u7684\u91cd\u8981\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u6309\u7d22\u5f15\u5bf9\u9f50\u8fdb\u884c\u8fd0\u7b97\uff0c\u5982\u679c\u6ca1\u6709\u5bf9\u9f50\u4f4d\u7f6e\u5219\u8865NaN</p> <ul> <li> <p>DataFrame\u6309\u884c\u3001\u5217\u7d22\u5f15\u5bf9\u9f50 Python<pre><code>In [9]: df1 = pd.DataFrame(np.ones((2,2)), columns=['a', 'b'])\n\nIn [10]: df1\nOut[10]:\n     a    b\n0  1.0  1.0\n1  1.0  1.0\n\nIn [11]: df2 = pd.DataFrame(np.ones((3,3)), columns=['a', 'b','c'])\n\nIn [12]: df2\nOut[12]:\n     a    b    c\n0  1.0  1.0  1.0\n1  1.0  1.0  1.0\n2  1.0  1.0  1.0\n\nIn [13]: df1 + df2\nOut[13]:\n     a    b   c\n0  2.0  2.0 NaN\n1  2.0  2.0 NaN\n2  NaN  NaN NaN\n</code></pre></p> </li> <li> <p>\u586b\u5145\u672a\u5bf9\u9f50\u7684\u6570\u636e\u8fdb\u884c\u8fd0\u7b97</p> </li> <li>fill_value<ul> <li>\u4f7f\u7528add\u3001sub\u3001div\u3001mul \u7684\u540c\u65f6\uff0c\u901a\u8fc7fill_value\u6307\u5b9a\u586b\u5145\u503c\uff0c\u672a\u5bf9\u9f50\u7684\u6570\u636e\u5c06\u548c\u586b\u5145\u503c\u505a\u8fd0\u7b97 Python<pre><code>In [19]: df1.sub(df2, fill_value=5.)\nOut[19]:\n     a    b    c\n0  0.0  0.0  4.0\n1  0.0  0.0  4.0\n2  4.0  4.0  4.0\n\nIn [21]: df1.sub(df2, fill_value=3)\nOut[21]:\n     a    b    c\n0  0.0  0.0  2.0\n1  0.0  0.0  2.0\n2  2.0  2.0  2.0\n\nIn [22]: df1.add(df2, fill_value=5)\nOut[22]:\n     a    b    c\n0  2.0  2.0  6.0\n1  2.0  2.0  6.0\n2  6.0  6.0  6.0\n</code></pre></li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#pandas_5","title":"Pandas\u7684\u51fd\u6570\u5e94\u7528","text":"","tags":["Python"]},{"location":"python/pylibs/pandas/#numpy","title":"\u4f7f\u7528numpy\u51fd\u6570","text":"Python<pre><code>In [3]: df = pd.DataFrame(np.random.randn(5,4) -1)\n\nIn [4]: df\nOut[4]:\n          0         1         2         3\n0  0.190219 -0.548120 -1.059652  0.480065\n1 -1.514674 -1.404162  0.373566 -0.930732\n2 -1.277141 -1.426694 -1.560795 -0.486730\n3 -0.868642 -1.076728 -1.100897 -0.389249\n4 -0.712614 -2.140464 -2.005097 -0.588321\n\nIn [5]: np.abs(df)\nOut[5]:\n          0         1         2         3\n0  0.190219  0.548120  1.059652  0.480065\n1  1.514674  1.404162  0.373566  0.930732\n2  1.277141  1.426694  1.560795  0.486730\n3  0.868642  1.076728  1.100897  0.389249\n4  0.712614  2.140464  2.005097  0.588321\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#apply","title":"apply()","text":"<ul> <li>apply\u5c06\u51fd\u6570\u5e94\u7528\u5230\u5217\u6216\u8005\u884c\u4e0a</li> <li>\u9ed8\u8ba4axis=0, \u5217\u65b9\u5411 Python<pre><code>In [6]: f = lambda x: x.max()\n\nIn [7]: df.apply(f)\nOut[7]:\n0    0.190219\n1   -0.548120\n2    0.373566\n3    0.480065\ndtype: float64\n\nIn [8]: df.apply(f, axis=1)\nOut[8]:\n0    0.480065\n1    0.373566\n2   -0.486730\n3   -0.389249\n4   -0.588321\ndtype: float64\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#applymap","title":"applymap()","text":"<ul> <li>applymap\u5c06\u51fd\u6570\u5e94\u7528\u5230\u6bcf\u4e2a\u6570\u636e\u4e0a Python<pre><code>In [9]: f2 = lambda x: '%.2f' % x\n\nIn [10]: df.applymap(f2)\nOut[10]:\n       0      1      2      3\n0   0.19  -0.55  -1.06   0.48\n1  -1.51  -1.40   0.37  -0.93\n2  -1.28  -1.43  -1.56  -0.49\n3  -0.87  -1.08  -1.10  -0.39\n4  -0.71  -2.14  -2.01  -0.59\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_19","title":"\u6392\u5e8f","text":"","tags":["Python"]},{"location":"python/pylibs/pandas/#_20","title":"\u7d22\u5f15\u6392\u5e8f","text":"<ul> <li>sort_index()</li> <li>axis=0,\u6309\u884c\uff0caxis=1\u6309\u5217</li> <li> <p>\u6392\u5e8f\u9ed8\u8ba4\u4f7f\u7528\u5347\u5e8f\u6392\u5e8f\uff0cascending=False \u4e3a\u964d\u5e8f\u6392\u5e8f Python<pre><code>In [11]: s1 = pd.Series(range(10,15), index=np.random.randint(5, size=5))\n\nIn [12]: s1\nOut[12]:\n3    10\n4    11\n2    12\n4    13\n1    14\ndtype: int64\n\nIn [13]: s1.sort_index()\nOut[13]:\n1    14\n2    12\n3    10\n4    11\n4    13\ndtype: int64\n</code></pre></p> </li> <li> <p>DataFrame Python<pre><code># DataFrame\u6392\u5e8f\u6ce8\u610f\u8f74\u5411\nIn [16]: df1 = pd.DataFrame(np.random.randn(3,5),index=np.random.randint(3, size=3),columns=np.random\n    ...: .randint(5, size=5))\n\nIn [17]: df1\nOut[17]:\n          2         2         0         4         4\n0  0.891979 -0.640110 -0.402756 -0.377881  0.080344\n1  0.617798  0.574241 -0.026625 -0.547804  0.191055\n1 -0.227055  0.225085 -0.064116 -0.649598 -0.209348\n\nIn [18]: df1_isort = df1.sort_index(axis=1, ascending=False)\n\nIn [19]: df1_isort\nOut[19]:\n          4         4         2         2         0\n0 -0.377881  0.080344  0.891979 -0.640110 -0.402756\n1 -0.547804  0.191055  0.617798  0.574241 -0.026625\n1 -0.649598 -0.209348 -0.227055  0.225085 -0.064116\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_21","title":"\u6309\u503c\u6392\u5e8f","text":"<ul> <li>sort_values(by=\"columns name\")</li> <li>\u6839\u636e\u67d0\u4e2a\u552f\u4e00\u7684\u5217\u540d\u8fdb\u884c\u6392\u5e8f\uff0c\u5982\u679c\u51fa\u73b0\u91cd\u590d\u7684\u5217\u540d\u5219\u62a5\u9519 Python<pre><code>In [21]: df1_vsort = df1.sort_values(by=0, ascending=False)\n\nIn [22]: df1_vsort\nOut[22]:\n          2         2         0         4         4\n1  0.617798  0.574241 -0.026625 -0.547804  0.191055\n1 -0.227055  0.225085 -0.064116 -0.649598 -0.209348\n0  0.891979 -0.640110 -0.402756 -0.377881  0.080344\n\nIn [23]: df2_vsort = df1.sort_values(by=4, ascending=False)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\nInput In [23], in &lt;cell line: 1&gt;()\n----&gt; 1 df2_vsort = df1.sort_values(by=4, ascending=False)\nValueError: The column label '4' is not unique.\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_22","title":"\u5904\u7406\u7f3a\u5931\u6570\u636e","text":"Python<pre><code>In [25]: df3 = pd.DataFrame([np.random.randn(3), [1., 2., np.nan], [np.nan, 4., np.nan], [1.,2.,3.]])\n    ...:\n\nIn [26]: df3\nOut[26]:\n          0         1         2\n0  0.722605  0.537739  0.340062\n1  1.000000  2.000000       NaN\n2       NaN  4.000000       NaN\n3  1.000000  2.000000  3.000000\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#isnull","title":"\u5224\u65ad\u662f\u5426\u5b58\u5728\u7f3a\u5931\u503cisnull()","text":"Python<pre><code>In [27]: df3.isnull()\nOut[27]:\n       0      1      2\n0  False  False  False\n1  False  False   True\n2   True  False   True\n3  False  False  False\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#dropna","title":"\u4e22\u5f03\u7f3a\u5931\u503cdropna()","text":"Python<pre><code>In [28]: df3.dropna()\nOut[28]:\n          0         1         2\n0  0.722605  0.537739  0.340062\n3  1.000000  2.000000  3.000000\n\nIn [29]: df3.dropna(axis=1)\nOut[29]:\n          1\n0  0.537739\n1  2.000000\n2  4.000000\n3  2.000000\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#fillna","title":"\u586b\u5145\u7f3a\u5931\u503c fillna()","text":"Python<pre><code>In [32]: df3.fillna(-100.)\nOut[32]:\n            0         1           2\n0   -0.735379  0.985099   -0.733799\n1    1.000000  2.000000 -100.000000\n2 -100.000000  4.000000 -100.000000\n3    1.000000  2.000000    3.000000\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#_23","title":"\u7edf\u8ba1\u8ba1\u7b97","text":"<ul> <li>sum</li> <li>mean</li> <li>max</li> <li>min</li> <li>describe \u4ea7\u751f\u591a\u4e2a\u7edf\u8ba1\u6570\u636e <p>skipna \u6392\u9664\u7f3a\u5931\u503c\uff0c\u9ed8\u8ba4\u4e3aTrue\uff0c axis=0,\u6309\u5217\u7edf\u8ba1\uff0caxis=1\u6309\u884c\u7edf\u8ba1</p> </li> </ul> <p> Python<pre><code>In [12]: df1 = pd.DataFrame(np.random.randn(5,4), columns=['a','b','c','d'])\n\nIn [13]: df1\nOut[13]:\n          a         b         c         d\n0 -1.052080 -0.307690 -0.359616 -0.412333\n1  0.501699 -1.184435 -1.156710 -0.496644\n2 -0.591768  0.922715  0.600647 -0.838571\n3  0.863097 -0.048983  1.110432 -0.059342\n4 -0.353466  1.057952  0.093335  0.528852\n\nIn [14]: df1.sum()\nOut[14]:\na   -0.632518\nb    0.439558\nc    0.288090\nd   -1.278038\ndtype: float64\n\nIn [15]: df1.sum(axis=1)\nOut[15]:\n0   -2.131719\n1   -2.336090\n2    0.093023\n3    1.865204\n4    1.326673\ndtype: float64\n\nIn [16]: df1.max(axis=1)\nOut[16]:\n0   -0.307690\n1    0.501699\n2    0.922715\n3    1.110432\n4    1.057952\ndtype: float64\n\nIn [17]: df1.max()\nOut[17]:\na    0.863097\nb    1.057952\nc    1.110432\nd    0.528852\ndtype: float64\n\nIn [18]: df1.describe()\nOut[18]:\n              a         b         c         d\ncount  5.000000  5.000000  5.000000  5.000000\nmean  -0.126504  0.087912  0.057618 -0.255608\nstd    0.790352  0.926280  0.873678  0.518750\nmin   -1.052080 -1.184435 -1.156710 -0.838571\n25%   -0.591768 -0.307690 -0.359616 -0.496644\n50%   -0.353466 -0.048983  0.093335 -0.412333\n75%    0.501699  0.922715  0.600647 -0.059342\nmax    0.863097  1.057952  1.110432  0.528852\n\nIn [19]: df1.var()\nOut[19]:\na    0.624656\nb    0.857995\nc    0.763313\nd    0.269101\ndtype: float64\n</code></pre></p>","tags":["Python"]},{"location":"python/pylibs/pandas/#_24","title":"\u5206\u7ec4\u4e0e\u805a\u5408","text":"<ul> <li>groupby:\u5206\u7ec4</li> <li>\u5bf9\u6570\u636e\u96c6\u8fdb\u884c\u5206\u7ec4\uff0c\u7136\u540e\u5bf9\u6bcf\u7ec4\u8fdb\u884c\u7edf\u8ba1\u5206\u6790</li> <li>SQL\u80fd\u591f\u5bf9\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4\uff0c\u5206\u7ec4\u805a\u5408</li> <li>pandas\u80fd\u5229\u7528groupby\u8fdb\u884c\u66f4\u590d\u6742\u7684\u5206\u7ec4\u8fd0\u7b97<ul> <li>\u5206\u7ec4\u8fd0\u7b97\u8fc7\u7a0b\uff1asplit-&gt;apply-combine<ul> <li>\u62c6\u5206\uff1a\u8fdb\u884c\u5206\u7ec4\u7684\u6839\u636e</li> <li>\u5e94\u7528\uff1a\u6bcf\u4e2a\u5206\u7ec4\u8fd0\u884c\u7684\u8ba1\u7b97\u89c4\u5219</li> <li>\u5408\u5e76\uff0c\u628a\u6bcf\u4e2a\u5206\u7ec4\u7684\u8ba1\u7b97\u5408\u5e76\u8d77\u6765</li> </ul> </li> </ul> </li> </ul> Python<pre><code>In [1]: import pandas as pd\n\nIn [2]: import numpy as np\n\nIn [3]: dict_obj = {'key1' : ['a', 'b', 'a', 'b',\n   ...:                       'a', 'b', 'a', 'a'],\n   ...:             'key2' : ['one', 'one', 'two', 'three',\n   ...:                       'two', 'two', 'one', 'three'],\n   ...:             'data1': np.random.randn(8),\n   ...:             'data2': np.random.randn(8)}\n\nIn [4]: pd.DataFrame(dict_obj)\nOut[4]:\n  key1   key2     data1     data2\n0    a    one  0.584048  0.659140\n1    b    one  0.560518  0.694774\n2    a    two  1.278102 -0.698619\n3    b  three  0.507953 -1.096678\n4    a    two -0.425591 -1.575006\n5    b    two  1.125378  0.239921\n6    a    one  1.399763 -0.357698\n7    a  three -0.505960  0.850917\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#groupby","title":"GroupBy\u5bf9\u8c61","text":"<p>groupby()\u8fdb\u884c\u5206\u7ec4\uff0cGroupBy\u5bf9\u8c61\u6ca1\u6709\u8fdb\u884c\u5b9e\u9645\u8fd0\u7b97\uff0c\u53ea\u662f\u5305\u542b\u5206\u7ec4\u7684\u4e2d\u95f4\u6570\u636e \u6309\u5217\u540d\u5206\u7ec4\uff1aobj.groupby('label')</p> <ul> <li>DataFrameGroupBy</li> <li>SeriesGroupBy Python<pre><code>In [5]: df = pd.DataFrame(dict_obj)\n\nIn [6]: df\nOut[6]:\n  key1   key2     data1     data2\n0    a    one  0.584048  0.659140\n1    b    one  0.560518  0.694774\n2    a    two  1.278102 -0.698619\n3    b  three  0.507953 -1.096678\n4    a    two -0.425591 -1.575006\n5    b    two  1.125378  0.239921\n6    a    one  1.399763 -0.357698\n7    a  three -0.505960  0.850917\n\nIn [7]: g1 = df.groupby('key1')\n\nIn [8]: g1\nOut[8]: &lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x10bc33c40&gt;\n\nIn [9]: g2 = df['data1'].groupby(df['key1'])\n\nIn [10]: g2\nOut[10]: &lt;pandas.core.groupby.generic.SeriesGroupBy object at 0x10ba21880&gt;\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_25","title":"\u5206\u7ec4\u8fd0\u7b97","text":"<ul> <li>\u5bf9GroupBy\u5bf9\u8c61\u8fdb\u884c\u5206\u7ec4\u8fd0\u7b97\u3001\u591a\u91cd\u5206\u7ec4\u8fd0\u7b97\uff0c\u5982mean()</li> <li>\u975e\u6570\u503c\u4e0d\u8fdb\u884c\u5206\u7ec4\u8fd0\u7b97</li> <li>size()\u8fd4\u56de\u6bcf\u4e2a\u5206\u7ec4\u5143\u7d20\u7684\u4e2a\u6570 Python<pre><code>In [11]: g1.mean()\n&lt;ipython-input-11-71b5d8821406&gt;:1: FutureWarning: The default value of numeric_only in DataFrameGroupBy.mean is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.\n  g1.mean()\nOut[11]:\n         data1     data2\nkey1\na     0.466072 -0.224253\nb     0.731283 -0.053994\n\nIn [12]: g2.mean()\nOut[12]:\nkey1\na    0.466072\nb    0.731283\nName: data1, dtype: float64\n\nIn [13]: g1.size()\nOut[13]:\nkey1\na    5\nb    3\ndtype: int64\n\nIn [14]: g2.size()\nOut[14]:\nkey1\na    5\nb    3\nName: data1, dtype: int64\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#key","title":"\u6309\u81ea\u5b9a\u4e49\u7684key\u5206\u7ec4","text":"<ul> <li>\u81ea\u5b9a\u4e49\u7684key\u53ef\u4ee5\u662f\u5217\u8868\u6216\u591a\u5c42\u5217\u8868</li> <li>obj.groupby(self_def_key)</li> <li>obj.groupby(['label1', 'label2'])  -&gt;\u591a\u5c42DataFrame Python<pre><code>In [15]: self_def_key = [0, 1, 2, 3, 3, 4, 5, 7]  # \u81ea\u5b9a\u4e49key\u5217\u8868\n\nIn [16]: df.groupby(self_def_key)\nOut[16]: &lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x10bc57e50&gt;\n\nIn [17]: custome_group = df.groupby(self_def_key)\n\nIn [18]: custome_group.size()\nOut[18]:\n0    1\n1    1\n2    1\n3    2\n4    1\n5    1\n7    1\ndtype: int64\n\nIn [19]: custome_group\nOut[19]: &lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x10bc33b50&gt;\n\nIn [20]: custom_gourp2 = df.groupby([df['key1'],df['key2']])  # \u6309\u81ea\u5b9a\u4e49key\u5206\u7ec4\uff0c\u591a\u5c42\u5217\u8868\n\nIn [21]: custom_gourp2.size()\nOut[21]:\nkey1  key2\na     one      2\n      three    1\n      two      2\nb     one      1\n      three    1\n      two      1\ndtype: int64\n\nIn [22]: custom_gourp3 = df.groupby(['key1', 'key2'])  # \u6309\u591a\u4e2a\u5217\u591a\u5c42\u5206\u7ec4\n\nIn [23]: custom_gourp3.size()\nOut[23]:\nkey1  key2\na     one      2\n      three    1\n      two      2\nb     one      1\n      three    1\n      two      1\ndtype: int64\n\nIn [24]: custom_gourp3.mean()  # \u591a\u5c42\u5206\u7ec4\u6309key\u7684\u987a\u5e8f\u8fdb\u884c\nOut[24]:\n               data1     data2\nkey1 key2\na    one    0.991905  0.150721\n     three -0.505960  0.850917\n     two    0.426256 -1.136813\nb    one    0.560518  0.694774\n     three  0.507953 -1.096678\n     two    1.125378  0.239921\n\nIn [25]: custom_gourp3.mean().unstack()  # unstack\u53ef\u4ee5\u5c06\u591a\u5c42\u7d22\u5f15\u7684\u7ed3\u679c\u8f6c\u6362\u6210\u5355\u5c42\u7684DataFrame\nOut[25]:\n         data1                         data2\nkey2       one     three       two       one     three       two\nkey1\na     0.991905 -0.505960  0.426256  0.150721  0.850917 -1.136813\nb     0.560518  0.507953  1.125378  0.694774 -1.096678  0.239921\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#groupby_1","title":"GroupBy\u5bf9\u8c61\u7684\u8fed\u4ee3\u64cd\u4f5c","text":"<ul> <li>\u6bcf\u6b21\u8fed\u4ee3\u8fd4\u56de\u4e00\u4e2a\u5143\u7ec4\uff08group_name, group_data\uff09</li> <li> <p>\u53ef\u7528\u4e8e\u5206\u7ec4\u6570\u636e\u7684\u5177\u4f53\u8ba1\u7b97</p> </li> <li> <p>\u5355\u5c42\u5206\u7ec4 Python<pre><code># \u5355\u5c42\u5206\u7ec4\uff0c\u6839\u636ekey1\nfor group_name, group_data in groupd1:\n    print(group_name)\n    print(group_data)\n</code></pre></p> </li> <li> <p>\u591a\u5c42\u5206\u7ec4 Python<pre><code># \u591a\u5c42\u5206\u7ec4\uff0c\u6839\u636ekey1 \u548c key2\nfor group_name, group_data in groupd2:\n    print(group_name)\n    print(group_data)\n</code></pre> Python<pre><code>In [27]: dict_obj = {'key1' : ['a', 'b', 'a', 'b',\n    ...:                       'a', 'b', 'a', 'a'],\n    ...:             'key2' : ['one', 'one', 'two', 'three',\n    ...:                       'two', 'two', 'one', 'three'],\n    ...:             'data1': np.random.randn(8),\n    ...:             'data2': np.random.randn(8)}\n\nIn [28]: df = pd.DataFrame(dict_obj)\n\nIn [29]: df\nOut[29]:\n  key1   key2     data1     data2\n0    a    one -0.547337  0.723809\n1    b    one  0.143368 -1.455575\n2    a    two  1.400180  0.091538\n3    b  three -0.827495 -1.104382\n4    a    two  0.991163  0.135557\n5    b    two -0.003753 -0.834571\n6    a    one -0.719334 -1.852736\n7    a  three  0.107079 -0.110314\n\nIn [30]: gd1 = df.groupby('key1')\n\nIn [31]: for gname, gdata in gd1:\n    ...:     print(gname)\n    ...:     print(gdata)\n    ...:\na\n  key1   key2     data1     data2\n0    a    one -0.547337  0.723809\n2    a    two  1.400180  0.091538\n4    a    two  0.991163  0.135557\n6    a    one -0.719334 -1.852736\n7    a  three  0.107079 -0.110314\nb\n  key1   key2     data1     data2\n1    b    one  0.143368 -1.455575\n3    b  three -0.827495 -1.104382\n5    b    two -0.003753 -0.834571\n\nIn [36]: gd2 = df.groupby(['key1','key2'])\n\nIn [37]: gd2\nOut[37]: &lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x1222883a0&gt;\n\nIn [38]: for gname, gdata in gd2:\n    ...:     print(gname)\n    ...:     print(gdata)\n    ...:\n('a', 'one')\n  key1 key2     data1     data2\n0    a  one -0.547337  0.723809\n6    a  one -0.719334 -1.852736\n('a', 'three')\n  key1   key2     data1     data2\n7    a  three  0.107079 -0.110314\n('a', 'two')\n  key1 key2     data1     data2\n2    a  two  1.400180  0.091538\n4    a  two  0.991163  0.135557\n('b', 'one')\n  key1 key2     data1     data2\n1    b  one  0.143368 -1.455575\n('b', 'three')\n  key1   key2     data1     data2\n3    b  three -0.827495 -1.104382\n('b', 'two')\n  key1 key2     data1     data2\n5    b  two -0.003753 -0.834571\n</code></pre> GroupBy\u5bf9\u8c61\u8f6c\u6362\u6210\u5217\u8868\u6216\u5b57\u5178 Python<pre><code># GroupBy\u5bf9\u8c61\u8f6c\u6362list\nlist(groupd1)\n\n# GroupBy\u5bf9\u8c61\u8f6c\u6362dict\ndict(list(groupd1))\n</code></pre> Python<pre><code>In [39]: list(gd1)\nOut[39]:\n[('a',\n    key1   key2     data1     data2\n  0    a    one -0.547337  0.723809\n  2    a    two  1.400180  0.091538\n  4    a    two  0.991163  0.135557\n  6    a    one -0.719334 -1.852736\n  7    a  three  0.107079 -0.110314),\n ('b',\n    key1   key2     data1     data2\n  1    b    one  0.143368 -1.455575\n  3    b  three -0.827495 -1.104382\n  5    b    two -0.003753 -0.834571)]\n\n\nIn [41]: dict(list(gd1))\nOut[41]:\n{'a':   key1   key2     data1     data2\n 0    a    one -0.547337  0.723809\n 2    a    two  1.400180  0.091538\n 4    a    two  0.991163  0.135557\n 6    a    one -0.719334 -1.852736\n 7    a  three  0.107079 -0.110314,\n 'b':   key1   key2     data1     data2\n 1    b    one  0.143368 -1.455575\n 3    b  three -0.827495 -1.104382\n 5    b    two -0.003753 -0.834571}\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_26","title":"\u6309\u5217\u5206\u7ec4\u3001\u6309\u6570\u636e\u7c7b\u578b\u5206\u7ec4","text":"Python<pre><code>In [42]: df.dtypes   # \u6309\u5217\u5206\u7ec4\nOut[42]:\nkey1      object\nkey2      object\ndata1    float64\ndata2    float64\ndtype: object\n\nIn [43]: df.groupby(df.dtypes, axis=1).size()  # \u6309\u6570\u636e\u7c7b\u578b\u5206\u7ec4\nOut[43]:\n   float64  object\n0        2       2\n1        2       2\n2        2       2\n3        2       2\n4        2       2\n5        2       2\n6        2       2\n7        2       2\n\nIn [44]: df.groupby(df.dtypes, axis=1).sum()  # \u6309\u6570\u636e\u7c7b\u578b\u5206\u7ec4\nOut[44]:\n    float64  object\n0  0.176472    aone\n1 -1.312207    bone\n2  1.491718    atwo\n3 -1.931876  bthree\n4  1.126720    atwo\n5 -0.838324    btwo\n6 -2.572070    aone\n7 -0.003235  athree\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#_27","title":"\u901a\u8fc7\u5b57\u5178\u5206\u7ec4","text":"Python<pre><code>In [52]: dict1 = {'a':'Python', 'b':'Python', 'c':'Go', 'd':'C', 'e':'Java'}\n\nIn [53]: df1.groupby(dict1, axis=1).size()\nOut[53]:\n   C  Go  Java  Python\nA  1   1     1       2\nB  1   1     1       2\nC  1   1     1       2\nD  1   1     1       2\nE  1   1     1       2\n\nIn [54]: df.groupby(dict1, axis=1).count()\nOut[54]:\nEmpty DataFrame\nColumns: []\nIndex: [0, 1, 2, 3, 4, 5, 6, 7]\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#_28","title":"\u901a\u8fc7\u51fd\u6570\u5206\u7ec4\uff0c\u51fd\u6570\u4f20\u5165\u7684\u53c2\u6570\u4e3a\u884c\u7d22\u5f15\u6216\u5217\u7d22\u5f15","text":"Python<pre><code>In [57]: df3 = pd.DataFrame(np.random.randint(1, 10, (5,5)),\n    ...:                        columns=['a', 'b', 'c', 'd', 'e'],\n    ...:                        index=['AA', 'BBB', 'CC', 'D', 'EE'])\n\nIn [58]: df3\nOut[58]:\n     a  b  c  d  e\nAA   8  4  1  4  5\nBBB  2  5  6  9  1\nCC   1  2  1  4  1\nD    2  1  6  5  7\nEE   7  8  4  8  5\n\nIn [59]: def group_key(idx):  # idx\u672a\u5217 \u7d22\u5f15\u6216\u884c\u7d22\u5f15\n    ...:     return len(idx)\n    ...:\n\nIn [60]: df3.groupby(group_key).size()\nOut[60]:\n1    1\n2    3\n3    1\ndtype: int64\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#_29","title":"\u901a\u8fc7\u7d22\u5f15\u7ea7\u522b\u5206\u7ec4","text":"Python<pre><code>In [61]: columns = pd.MultiIndex.from_arrays([['Python', 'Java', 'Python', 'Java', 'Python'],\n    ...:                                      ['A', 'A', 'B', 'C', 'B']], names=['language', 'index'])\n    ...: df_obj4 = pd.DataFrame(np.random.randint(1, 10, (5, 5)), columns=columns)\n\nIn [62]: df_obj4\nOut[62]:\nlanguage Python Java Python Java Python\nindex         A    A      B    C      B\n0             3    2      8    6      7\n1             2    3      7    8      3\n2             2    6      5    6      2\n3             6    8      3    2      3\n4             7    1      4    1      6\n\nIn [63]: df_obj4.groupby(level='language', axis=1).sum()\nOut[63]:\nlanguage  Java  Python\n0            8      18\n1           11      12\n2           12       9\n3           10      12\n4            2      17\n\nIn [64]: df_obj4.groupby(level='index', axis=1).sum()\nOut[64]:\nindex   A   B  C\n0       5  15  6\n1       5  10  8\n2       8   7  6\n3      14   6  2\n4       8  10  1\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#aggregation","title":"\u805a\u5408\uff08aggregation\uff09","text":"<ul> <li>\u6570\u636e\u4ea7\u751f\u6807\u91cf\u7684\u8fc7\u7a0b\uff0c\u5982mean(),count()</li> <li> <p>\u5e38\u7528\u4e8e\u5bf9\u5206\u7ec4\u540e\u7684\u6570\u636e\u8fdb\u884c\u8ba1\u7b97 Python<pre><code>In [66]: dict1 = {'key1' : ['a', 'b', 'a', 'b',\n    ...:                       'a', 'b', 'a', 'a'],\n    ...:             'key2' : ['one', 'one', 'two', 'three',\n    ...:                       'two', 'two', 'one', 'three'],\n    ...:             'data1': np.random.randint(1,10, 8),\n    ...:             'data2': np.random.randint(1,10, 8)}\n\nIn [68]: df1 = pd.DataFrame(dict1)\n\nIn [69]: df1\nOut[69]:\n  key1   key2  data1  data2\n0    a    one      9      8\n1    b    one      7      2\n2    a    two      1      6\n3    b  three      2      5\n4    a    two      4      9\n5    b    two      5      7\n6    a    one      5      7\n7    a  three      2      2\n</code></pre> \u5185\u7f6e\u805a\u5408\u51fd\u6570</p> </li> <li> <p>sum()</p> </li> <li>mean()</li> <li>max()</li> <li>min()</li> <li>count()</li> <li>size()</li> <li>describe() Python<pre><code>In [69]: df1\nOut[69]:\n  key1   key2  data1  data2\n0    a    one      9      8\n1    b    one      7      2\n2    a    two      1      6\n3    b  three      2      5\n4    a    two      4      9\n5    b    two      5      7\n6    a    one      5      7\n7    a  three      2      2\n\nIn [70]: df1.groupby('key1').sum()\n&lt;ipython-input-70-5b0424c20cbd&gt;:1: FutureWarning: The default value of numeric_only in DataFrameGroupBy.sum is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.\n  df1.groupby('key1').sum()\nOut[70]:\n      data1  data2\nkey1\na        21     32\nb        14     14\n\nIn [71]: df1.groupby('key1').max()\nOut[71]:\n     key2  data1  data2\nkey1\na     two      9      9\nb     two      7      7\n\nIn [72]: df1.groupby('key1').min()\nOut[72]:\n     key2  data1  data2\nkey1\na     one      1      2\nb     one      2      2\n\nIn [73]: df1.groupby('key1').mean()\n&lt;ipython-input-73-061796447ee4&gt;:1: FutureWarning: The default value of numeric_only in DataFrameGroupBy.mean is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.\n  df1.groupby('key1').mean()\nOut[73]:\n         data1     data2\nkey1\na     4.200000  6.400000\nb     4.666667  4.666667\n\nIn [74]: df1.groupby('key1').size()\nOut[74]:\nkey1\na    5\nb    3\ndtype: int64\n\nIn [75]: df1.groupby('key1').count()\nOut[75]:\n      key2  data1  data2\nkey1\na        5      5      5\nb        3      3      3\n\nIn [76]: df1.groupby('key1').describe()\nOut[76]:\n     data1                                     ...     data2\n     count      mean       std  min  25%  50%  ...       std  min  25%  50%  75%  max\nkey1                                           ...\na      5.0  4.200000  3.114482  1.0  2.0  4.0  ...  2.701851  2.0  6.0  7.0  8.0  9.0\nb      3.0  4.666667  2.516611  2.0  3.5  5.0  ...  2.516611  2.0  3.5  5.0  6.0  7.0\n\n[2 rows x 16 columns]\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#agg","title":"\u5b9a\u4e49\u51fd\u6570\uff0c\u4f20\u5165agg\u65b9\u6cd5\u4e2d","text":"<ul> <li>groupd.agg(func)</li> <li>func\u7684\u53c2\u6570\u4e3agroupby\u7d22\u5f15\u5bf9\u5e94\u7684\u8bb0\u5f55 Python<pre><code>In [78]: def peak_range(df):\n    ...:     return df.max() - df.min()\n    ...:\n\nIn [79]: df1.groupby('key1').agg(peak_range)\n&lt;ipython-input-79-06de1b0dad4b&gt;:1: FutureWarning: ['key2'] did not aggregate successfully. If any error is raised this will raise in a future version of pandas. Drop these columns/ops to avoid this warning.\n  df1.groupby('key1').agg(peak_range)\nOut[79]:\n      data1  data2\nkey1\na         8      7\nb         5      5\n\nIn [80]: df1.groupby('key1').agg(lambda df: df.max() - df.min())\n&lt;ipython-input-80-1c659816d76c&gt;:1: FutureWarning: ['key2'] did not aggregate successfully. If any error is raised this will raise in a future version of pandas. Drop these columns/ops to avoid this warning.\n  df1.groupby('key1').agg(lambda df: df.max() - df.min())\nOut[80]:\n      data1  data2\nkey1\na         8      7\nb         5      5\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_30","title":"\u5e94\u7528\u591a\u4e2a\u805a\u5408\u51fd\u6570","text":"<ul> <li>\u540c\u65f6\u5e94\u7528\u591a\u4e2a\u51fd\u6570\u8fdb\u884c\u805a\u5408\u64cd\u4f5c\uff0c\u4f7f\u7528\u51fd\u6570\u5217\u8868 Python<pre><code># \u9ed8\u8ba4\u5217\u540d\u4e3a\u51fd\u6570\u540d\nIn [81]: df1.groupby('key1').agg(['mean', 'std','count', peak_range])\n&lt;ipython-input-81-1cb38207e095&gt;:1: FutureWarning: ['key2'] did not aggregate successfully. If any error is raised this will raise in a future version of pandas. Drop these columns/ops to avoid this warning.\n  df1.groupby('key1').agg(['mean', 'std','count', peak_range])\nOut[81]:\n         data1                                data2\n          mean       std count peak_range      mean       std count peak_range\nkey1\na     4.200000  3.114482     5          8  6.400000  2.701851     5          7\nb     4.666667  2.516611     3          5  4.666667  2.516611     3          5\n\n# \u901a\u8fc7\u5143\u7ec4\u63d0\u4f9b\u65b0\u7684\u5217\u540d\nIn [83]: df1.groupby('key1').agg(['mean', 'std', 'count', ('range', peak_range)])\n&lt;ipython-input-83-987a71c7f6d8&gt;:1: FutureWarning: ['key2'] did not aggregate successfully. If any error is raised this will raise in a future version of pandas. Drop these columns/ops to avoid this warning.\n  df1.groupby('key1').agg(['mean', 'std', 'count', ('range', peak_range)])\nOut[83]:\n         data1                           data2\n          mean       std count range      mean       std count range\nkey1\na     4.200000  3.114482     5     8  6.400000  2.701851     5     7\nb     4.666667  2.516611     3     5  4.666667  2.516611     3     5\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#dict","title":"\u4f7f\u7528dict\u5bf9\u4e0d\u540c\u7684\u5217\u5206\u522b\u4f5c\u7528\u4e0d\u540c\u7684\u805a\u5408\u51fd\u6570","text":"Python<pre><code># \u6bcf\u5217\u4f5c\u7528\u4e0d\u540c\u7684\u805a\u5408\u51fd\u6570\nIn [85]: dict_mapping = {'data1':'mean',\n    ...:                 'data2':'sum'}\n\nIn [86]: df1.groupby('key1').agg(dict_mapping)\nOut[86]:\n         data1  data2\nkey1\na     4.200000     32\nb     4.666667     14\n\nIn [87]: dict_mapping = {'data1':['mean','max'],\n    ...:                 'data2':'sum'}\n\nIn [88]: df1.groupby('key1').agg(dict_mapping)\nOut[88]:\n         data1     data2\n          mean max   sum\nkey1\na     4.200000   9    32\nb     4.666667   7    14\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pandas/#_31","title":"\u5e38\u7528\u7684\u5185\u7f6e\u805a\u5408\u51fd\u6570","text":"","tags":["Python"]},{"location":"python/pylibs/pandas/#_32","title":"\u6570\u636e\u7684\u5206\u7ec4\u8fd0\u7b97","text":"<ul> <li>sum()</li> <li>\u7edf\u8ba1</li> <li>merge()</li> <li>\u5916\u8fde\u63a5</li> <li>transform</li> <li>transform\u7684\u8ba1\u7b97\u7ed3\u679c\u548c\u539f\u59cb\u6570\u636e\u7684\u5f62\u72b6\u4fdd\u6301\u4e00\u81f4\uff0c</li> <li>grouped.transform(np.sum)</li> <li>groupby.apply(func)</li> <li>func\u51fd\u6570\u4e5f\u53ef\u4ee5\u5728\u5404\u5206\u7ec4\u4e0a\u5206\u522b\u8c03\u7528\uff0c\u6700\u540e\u7ed3\u679c\u901a\u8fc7pd.concat\u7ec4\u88c5\u5230\u4e00\u8d77\uff08\u6570\u636e\u5408\u5e76\uff09</li> <li>apply\u53ef\u4ee5\u7528\u6765\u5904\u7406\u4e0d\u540c\u5206\u7ec4\u5185\u7684\u7f3a\u5931\u6570\u636e\u586b\u5145\uff0c\u586b\u5145\u8be5\u5206\u7ec4\u7684\u5747\u503c\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_33","title":"\u6570\u636e\u6e05\u6d17","text":"","tags":["Python"]},{"location":"python/pylibs/pandas/#merge","title":"merge | \u6570\u636e\u8fde\u63a5","text":"<ul> <li> <p>pd.merge\uff1a \u6839\u636e\u5355\u4e2a\u6216\u591a\u4e2a\u952e\u5c06\u4e0d\u540c\u7684DataFrame\u7684\u884c\u8fde\u63a5\u8d77\u6765 Python<pre><code>In [1]: import numpy as np\n\nIn [2]: import pandas as pd\n\nIn [3]: df1 = pd.DataFrame({'key': ['b', 'b', 'a', 'c', 'a', 'a', 'b'], 'data1' : np.random.randint(0,1\n   ...: 0,7)})\n\nIn [4]: df1\nOut[4]:\n  key  data1\n0   b      4\n1   b      3\n2   a      3\n3   c      4\n4   a      8\n5   a      3\n6   b      2\n\nIn [5]: df2 = pd.DataFrame({'key': ['a', 'b', 'd'],  'data2' : np.random.randint(0,10,3)})\n\nIn [6]: df2\nOut[6]:\n  key  data2\n0   a      1\n1   b      3\n2   d      2\n</code></pre></p> </li> <li> <p>\u9ed8\u8ba4\u5c06\u91cd\u53e0\u7684\u5217\u540d\u4f5c\u4e3a\u5916\u952e\u8fdb\u884c\u8fde\u63a5 Python<pre><code>In [7]: pd.merge(df1, df2)\nOut[7]:\n  key  data1  data2\n0   b      4      3\n1   b      3      3\n2   b      2      3\n3   a      3      1\n4   a      8      1\n5   a      3      1\n</code></pre></p> </li> <li> <p>on:\u663e\u793a\u6307\u5b9a\u5916\u952e</p> </li> <li>left_on: \u5de6\u4fa7\u6570\u636e\u7684\u5916\u952e\uff0c</li> <li> <p>right_on\uff1a\u53f3\u4fa7\u6570\u636e\u7684\u5916\u952e Python<pre><code>In [8]: pd.merge(df1, df2, on='key')  # \u663e\u793a\u6307\u5b9a\u5916\u952e\nOut[8]:\n  key  data1  data2\n0   b      4      3\n1   b      3      3\n2   b      2      3\n3   a      3      1\n4   a      8      1\n5   a      3      1\n\nIn [9]: df1 = df1.rename(columns={'key':'key1'})\n\nIn [10]: df1\nOut[10]:\n  key1  data1\n0    b      4\n1    b      3\n2    a      3\n3    c      4\n4    a      8\n5    a      3\n6    b      2\n\nIn [11]: df2 = df2.rename(columns={'key':'key2'})\n\nIn [12]: df2\nOut[12]:\n  key2  data2\n0    a      1\n1    b      3\n2    d      2\n\nIn [13]: pd.merge(df1,df2, left_on='key1', right_on='key2')\nOut[13]:\n  key1  data1 key2  data2\n0    b      4    b      3\n1    b      3    b      3\n2    b      2    b      3\n3    a      3    a      1\n4    a      8    a      1\n5    a      3    a      1\n</code></pre></p> </li> <li> <p>\u8fde\u63a5\uff1a\u9ed8\u8ba4\u662f\u5185\u8fde\u63a5\uff0c\u7ed3\u679c\u4e2d\u7684\u952e\u662f\u4ea4\u96c6</p> </li> <li>how\uff1a \u6307\u5b9a\u8fde\u63a5\u65b9\u5f0f</li> <li>outer: \u5916\u8fde\u63a5</li> <li>left\uff1a \u5de6\u8fde\u63a5</li> <li> <p>right: \u53f3\u8fde\u63a5 Python<pre><code>In [14]: pd.merge(df1, df2,left_on='key1', right_on='key2', how='outer')\nOut[14]:\n  key1  data1 key2  data2\n0    b    4.0    b    3.0\n1    b    3.0    b    3.0\n2    b    2.0    b    3.0\n3    a    3.0    a    1.0\n4    a    8.0    a    1.0\n5    a    3.0    a    1.0\n6    c    4.0  NaN    NaN\n7  NaN    NaN    d    2.0\n\nIn [15]: pd.merge(df1, df2,left_on='key1', right_on='key2', how='left')\nOut[15]:\n  key1  data1 key2  data2\n0    b      4    b    3.0\n1    b      3    b    3.0\n2    a      3    a    1.0\n3    c      4  NaN    NaN\n4    a      8    a    1.0\n5    a      3    a    1.0\n6    b      2    b    3.0\n\nIn [16]: pd.merge(df1, df2,left_on='key1', right_on='key2', how='right')\nOut[16]:\n  key1  data1 key2  data2\n0    a    3.0    a      1\n1    a    8.0    a      1\n2    a    3.0    a      1\n3    b    4.0    b      3\n4    b    3.0    b      3\n5    b    2.0    b      3\n6  NaN    NaN    d      2\n</code></pre></p> </li> <li> <p>\u5904\u7406\u91cd\u590d\u5217\u540d</p> </li> <li> <p>suffixes:  \u9ed8\u8ba4\u662f_x, _y Python<pre><code>In [17]: df1 = pd.DataFrame({'key': ['b', 'b', 'a', 'c', 'a', 'a', 'b'], 'data' : np.random.randint(0,1, 0,7)})\n\nIn [18]: df2 = pd.DataFrame({'key': ['a', 'b', 'd'],  'data' : np.random.randint(0,10,3)})\n\nIn [19]: pd.merge(df1, df2, on='key', suffixes=('_left', '_right'))\nOut[19]:\n  key  data_left  data_right\n0   b          1           3\n1   b          0           3\n2   b          2           3\n3   a          2           4\n4   a          9           4\n5   a          2           4\n</code></pre></p> </li> <li> <p>\u6309\u7d22\u5f15\u8fde\u63a5</p> </li> <li>left_index=True</li> <li>right_index=True Python<pre><code>In [20]: df3 = pd.DataFrame({'key': ['b', 'b', 'a', 'c', 'a', 'a', 'b'], 'data1' : np.random.randint(0,10,7)})\n\nIn [21]: df4 = pd.DataFrame({'key': ['a', 'b', 'd'],  'data2' : np.random.randint(0,10,3)},index=['a',' b','d'])\n\nIn [24]: pd.merge(df3,df4,left_on='key', right_index=True)\nOut[24]:\n  key key_x  data1 key_y  data2\n0   b     b      7     b      8\n1   b     b      7     b      8\n6   b     b      0     b      8\n2   a     a      1     a      5\n4   a     a      3     a      5\n5   a     a      1     a      5\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#concat","title":"concat | \u6570\u636e\u5408\u5e76","text":"<ul> <li> <p>\u6cbf\u8f74\u65b9\u5411\u5c06\u591a\u4e2a\u5bf9\u8c61\u5408\u5e76\u5230\u4e00\u8d77</p> </li> <li> <p>numpy\u7684concat</p> <ul> <li>np.concatenate Python<pre><code>In [3]: arr1 = np.random.randint(0, 10, (3,4))\n\nIn [4]: arr2 = np.random.randint(0, 10, (3,4))\n\nIn [5]: arr1\nOut[5]:\narray([[2, 4, 2, 7],\n       [1, 0, 8, 5],\n       [0, 9, 6, 5]])\n\nIn [6]: arr2\nOut[6]:\narray([[4, 2, 9, 1],\n       [7, 7, 6, 1],\n       [2, 9, 1, 9]])\n\nIn [7]: np.concatenate([arr1, arr2])\nOut[7]:\narray([[2, 4, 2, 7],\n       [1, 0, 8, 5],\n       [0, 9, 6, 5],\n       [4, 2, 9, 1],\n       [7, 7, 6, 1],\n       [2, 9, 1, 9]])\n\nIn [8]: np.concatenate([arr1, arr2], axis=1)\nOut[8]:\narray([[2, 4, 2, 7, 4, 2, 9, 1],\n       [1, 0, 8, 5, 7, 7, 6, 1],\n       [0, 9, 6, 5, 2, 9, 1, 9]])\n</code></pre></li> </ul> </li> <li> <p>pd.concat</p> </li> <li>\u9ed8\u8ba4\u8f74\u5411axis=0, \u5217</li> <li>join\u6307\u5b9a\u5408\u5e76\u65b9\u5411\uff0c\u9ed8\u8ba4outer</li> <li> <p>Series\u5408\u5e76\u65f6\u67e5\u770b\u884c\u7d22\u5f15\u6709\u65e0\u91cd\u590d Python<pre><code># index \u4e0d\u91cd\u590d\u65f6\nIn [12]: ser1= pd.Series(np.random.randint(0, 10, 5),index=range(0,5))\n\nIn [13]: ser2= pd.Series(np.random.randint(0, 10, 4),index=range(5,9))\n\nIn [14]: ser3= pd.Series(np.random.randint(0, 10, 3),index=range(9,12))\n\nIn [15]: ser1\nOut[15]:\n0    9\n1    7\n2    4\n3    0\n4    3\ndtype: int64\n\nIn [16]: ser2\nOut[16]:\n5    0\n6    6\n7    7\n8    0\ndtype: int64\n\nIn [17]: ser3\nOut[17]:\n9     4\n10    3\n11    4\ndtype: int64\n\nIn [18]: pd.concat([ser1, ser2, ser3])\nOut[18]:\n0     9\n1     7\n2     4\n3     0\n4     3\n5     0\n6     6\n7     7\n8     0\n9     4\n10    3\n11    4\ndtype: int64\n\nIn [19]: pd.concat([ser1, ser2, ser3], axis=1)\nOut[19]:\n      0    1    2\n0   9.0  NaN  NaN\n1   7.0  NaN  NaN\n2   4.0  NaN  NaN\n3   0.0  NaN  NaN\n4   3.0  NaN  NaN\n5   NaN  0.0  NaN\n6   NaN  6.0  NaN\n7   NaN  7.0  NaN\n8   NaN  0.0  NaN\n9   NaN  NaN  4.0\n10  NaN  NaN  3.0\n11  NaN  NaN  4.0\n</code></pre></p> </li> <li> <p>index\u91cd\u590d\u65f6 Python<pre><code>In [22]: ser5 = pd.Series(np.random.randint(0, 10,4), index=range(4))\n\nIn [23]: ser6 = pd.Series(np.random.randint(0, 10,3), index=range(3))\n\nIn [24]: ser4\nOut[24]:\n0    3\n1    4\n2    8\n3    7\n4    1\ndtype: int64\n\nIn [25]: ser5\nOut[25]:\n0    7\n1    0\n2    6\n3    9\ndtype: int64\n\nIn [26]: ser6\nOut[26]:\n0    3\n1    3\n2    1\ndtype: int64\n\nIn [27]: pd.concat([ser4, ser5,ser6])\nOut[27]:\n0    3\n1    4\n2    8\n3    7\n4    1\n0    7\n1    0\n2    6\n3    9\n0    3\n1    3\n2    1\ndtype: int64\n\nIn [28]: pd.concat([ser4, ser5,ser6], axis=1)\nOut[28]:\n   0    1    2\n0  3  7.0  3.0\n1  4  0.0  3.0\n2  8  6.0  1.0\n3  7  9.0  NaN\n4  1  NaN  NaN\n\nIn [29]: pd.concat([ser4, ser5,ser6], axis=1, join='inner')\nOut[29]:\n   0  1  2\n0  3  7  3\n1  4  0  3\n2  8  6  1\n</code></pre></p> </li> <li> <p>DataFrame\u5408\u5e76\u65f6\u540c\u65f6\u67e5\u770b\u884c\u7d22\u5f15\u548c\u5217\u7d22\u5f15\u6709\u65e0\u91cd\u590d Python<pre><code>In [30]: df5 = pd.DataFrame(np.random.randint(0, 10, (3,2)), index=['a','b','c'], columns=['A','B'])\n\nIn [31]: df6 = pd.DataFrame(np.random.randint(0, 10, (2, 2)), index=['a','b'], columns=['C','D'])\n\nIn [32]: df5\nOut[32]:\n   A  B\na  3  3\nb  9  9\nc  7  8\n\nIn [33]: df6\nOut[33]:\n   C  D\na  1  4\nb  0  8\n\nIn [34]: pd.concat([df5, df6])\nOut[34]:\n     A    B    C    D\na  3.0  3.0  NaN  NaN\nb  9.0  9.0  NaN  NaN\nc  7.0  8.0  NaN  NaN\na  NaN  NaN  1.0  4.0\nb  NaN  NaN  0.0  8.0\n\nIn [35]: pd.concat([df5, df6], axis=1, join='inner')\nOut[35]:\n   A  B  C  D\na  3  3  1  4\nb  9  9  0  8\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#stack","title":"stack | \u6570\u636e\u91cd\u6784","text":"<ul> <li>\u5c06\u5217\u7d22\u5f15\u65cb\u8f6c\u4e3a\u884c\u7d22\u5f15\uff0c\u5b8c\u6210\u5c42\u7ea7\u7d22\u5f15</li> <li> <p>DataFrame -&gt; Series Python<pre><code>In [36]: df6 = pd.DataFrame(np.random.randint(0, 10, (5, 2)), columns=['data1','data2'])\n\nIn [37]: df6\nOut[37]:\n   data1  data2\n0      5      9\n1      2      5\n2      2      0\n3      9      6\n4      2      4\n\nIn [38]: stacked = df6.stack()\n\nIn [39]: stacked\nOut[39]:\n0  data1    5\n   data2    9\n1  data1    2\n   data2    5\n2  data1    2\n   data2    0\n3  data1    9\n   data2    6\n4  data1    2\n   data2    4\ndtype: int64\n</code></pre></p> </li> <li> <p>unstack | \u5c06\u5c42\u7ea7\u7d22\u5f15\u5c55\u5f00</p> </li> <li>Series -&gt; DataFrame</li> <li>\u9ed8\u8ba4\u64cd\u4f5c\u5185\u5c42\u7d22\u5f15\uff0c\u5373level=1 Python<pre><code>In [39]: stacked\nOut[39]:\n0  data1    5\n   data2    9\n1  data1    2\n   data2    5\n2  data1    2\n   data2    0\n3  data1    9\n   data2    6\n4  data1    2\n   data2    4\ndtype: int64\n\nIn [40]: stacked.unstack()\nOut[40]:\n   data1  data2\n0      5      9\n1      2      5\n2      2      0\n3      9      6\n4      2      4\n\nIn [41]: stacked.unstack(level=0)\nOut[41]:\n       0  1  2  3  4\ndata1  5  2  2  9  2\ndata2  9  5  0  6  4\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_34","title":"\u6570\u636e\u8f6c\u6362","text":"<ul> <li>\u5904\u7406\u91cd\u590d\u6570\u636e</li> <li>duplicated()\uff1a \u8fd4\u56de\u5e03\u5c14\u578bSeries\u8868\u793a\u6bcf\u884c\u662f\u5426\u4e3a\u91cd\u590d\u884c</li> <li>drop_duplicates(): \u8fc7\u6ee4\u91cd\u590d\u884c</li> <li> <p>\u9ed8\u8ba4\u662f\u5168\u90e8\u5217\uff0c \u53ef\u6307\u5b9a\u6309\u67d0\u4e2a\u5217\u5224\u65ad Python<pre><code>In [4]: df1 = pd.DataFrame({'data1': ['a'] * 4 + ['b'] * 4, 'data2': np.random.randint(0,4,8)})\n\nIn [5]: df1\nOut[5]:\n  data1  data2\n0     a      3\n1     a      1\n2     a      3\n3     a      2\n4     b      2\n5     b      0\n6     b      3\n7     b      0\n\nIn [6]: df1.duplicated()\nOut[6]:\n0    False\n1    False\n2     True\n3    False\n4    False\n5    False\n6    False\n7     True\ndtype: bool\n\nIn [8]: df1.drop_duplicates()\nOut[8]:\n  data1  data2\n0     a      3\n1     a      1\n3     a      2\n4     b      2\n5     b      0\n6     b      3\n\nIn [10]: df1.drop_duplicates('data2')\nOut[10]:\n  data1  data2\n0     a      2\n1     a      1\n4     b      0\n</code></pre></p> </li> <li> <p>map</p> </li> <li>\u6839\u636emap\u4f20\u5165\u7684\u51fd\u6570\u5bf9\u6bcf\u884c\u6216\u6bcf\u5217\u8fdb\u884c\u8f6c\u6362</li> <li>Series\u6839\u636emap\u4f20\u5165\u7684\u51fd\u6570\u5bf9\u6bcf\u884c\u6216\u6bcf\u5217\u8fdb\u884c\u8f6c\u6362 Python<pre><code>In [11]: ser1 = pd.Series(np.random.randint(0, 10, 10))\n\nIn [12]: ser1\nOut[12]:\n0    9\n1    7\n2    2\n3    2\n4    2\n5    5\n6    1\n7    6\n8    5\n9    1\ndtype: int64\n\nIn [13]: ser1.map(lambda x: x ** 2)\nOut[13]:\n0    81\n1    49\n2     4\n3     4\n4     4\n5    25\n6     1\n7    36\n8    25\n9     1\ndtype: int64\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pandas/#_35","title":"\u6570\u636e\u66ff\u6362","text":"<ul> <li>replace \uff1a \u6839\u636e\u503c\u7684\u5185\u5bb9\u8fdb\u884c\u66ff\u6362 Python<pre><code>In [3]: ser_obj = pd.Series(np.random.randint(0,10,10))\n\nIn [4]: ser_obj\nOut[4]:\n0    6\n1    5\n2    2\n3    2\n4    6\n5    4\n6    3\n7    1\n8    8\n9    8\ndtype: int64\n\nIn [5]: ser_obj.replace(1, -100)\nOut[5]:\n0      6\n1      5\n2      2\n3      2\n4      6\n5      4\n6      3\n7   -100\n8      8\n9      8\ndtype: int64\n\nIn [6]: ser_obj.replace([6,8], -100)\nOut[6]:\n0   -100\n1      5\n2      2\n3      2\n4   -100\n5      4\n6      3\n7      1\n8   -100\n9   -100\ndtype: int64\n\nIn [10]: ser_obj.replace([4, 2], [-100, -200])\nOut[10]:\n0      6\n1      5\n2   -200\n3   -200\n4      6\n5   -100\n6      3\n7      1\n8      8\n9      8\ndtype: int64\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/","title":"pathlib\u4e4b\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u5f0f\u64cd\u4f5c\u8def\u5f84","text":"<p>Reference\uff1a  </p> <ul> <li> <p>\u5b98\u65b9\u6587\u6863 </p> </li> <li> <p>pep-0428</p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_1","title":"\u6a21\u5757\u6982\u8ff0","text":"","tags":["Python"]},{"location":"python/pylibs/pathlib/#_2","title":"\u5e94\u7528\u573a\u666f\uff1a","text":"<p>\u5982\u679c\u4f60\u538c\u5026\u4e86\u4f7f\u7528os\u5305\u63d0\u4f9b\u7684\u63a5\u53e3\u53bb\u64cd\u4f5c\u6587\u4ef6\u8def\u5f84\u2026\u2026</p> <p>\u5982\u679c\u4f60\u66f4\u559c\u6b22\u4ee5\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u5f0f\u53bb\u64cd\u4f5c\u6587\u4ef6\u8def\u5f84\u2026\u2026</p> <p>\u90a3\u4e48\uff0cpathlib\u5305\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\uff01\uff01\uff01 </p>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_3","title":"\u6a21\u5757\u4ecb\u7ecd","text":"<p>pathlib\uff08Object-oriented filesystem paths\uff09\u662fpython\u5b98\u65b9\u5c01\u88c5\u63d0\u4f9b\u7684\u4e00\u79cd\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u5f0f\u64cd\u4f5c\u6587\u4ef6\u8def\u5f84\u7684\u5de5\u5177\u5305\uff0c\u5728python3.4\u4e2d\u53d1\u5e03\uff0c\u53ef\u4ee5\u652f\u6301\u8de8\u5e73\u53f0\uff08Unix\u548cWindows\uff09\uff0cpathlib\u57fa\u4e8e\u662f\u5426\u6709I/O\u64cd\u4f5c\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u5f0f\u6765\u64cd\u4f5c\u6587\u4ef6\u8def\u5f84,\u4e00\u79cd\u662f\u63d0\u4f9b\u7eaf\u8ba1\u7b97\u64cd\u4f5c\u800c\u6ca1\u6709I/O\u7684\u7eaf\u8def\u5f84\uff0c\u53e6\u4e00\u79cd\u662f\u63d0\u4f9bI/O\u64cd\u4f5c\u7684\u5177\u4f53\u8def\u5f84\u3002 Python<pre><code>         +----------+\n                |          |\n       ---------| PurePath |--------\n       |        |          |       |\n       |        +----------+       |\n       |             |             |\n       |             |             |\n       v             |             v\n+---------------+    |    +-----------------+\n|               |    |    |                 |\n| PurePosixPath |    |    | PureWindowsPath |\n|               |    |    |                 |\n+---------------+    |    +-----------------+\n       |             v             |\n       |          +------+         |\n       |          |      |         |\n       |   -------| Path |------   |\n       |   |      |      |     |   |\n       |   |      +------+     |   |\n       |   |                   |   |\n       |   |                   |   |\n       v   v                   v   v\n  +-----------+           +-------------+\n  |           |           |             |\n  | PosixPath |           | WindowsPath |\n  |           |           |             |\n  +-----------+           +-------------+\n</code></pre></p>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_4","title":"\u5b9e\u73b0\u539f\u7406\uff1a","text":"<p>  pathlib\u5305\u4e3b\u8981\u7ec4\u6210\u7ed3\u6784\uff1a</p> <ul> <li>PurePath(object): \u8be5\u7c7b\u63d0\u4f9b\u4e00\u5957\u57fa\u4e8e\u975eI/O\u64cd\u4f5c\u7684\u6587\u4ef6\u8def\u5f84\u7684\u63a5\u53e3\u3002</li> <li>PurePosixPath(PurePath): \u8be5\u63d0\u4f9b\u4e00\u5957\u5728Unix\u73af\u5883\u4e2d\u57fa\u4e8e\u975eI/O\u64cd\u4f5c\u7684\u6587\u4ef6\u8def\u5f84\u63a5\u53e3\u3002</li> <li>PureWindowsPath(PurePath): \u8be5\u63d0\u4f9b\u4e00\u5957\u5728Windows\u73af\u5883\u4e2d\u57fa\u4e8e\u975eI/O\u64cd\u4f5c\u7684\u6587\u4ef6\u8def\u5f84\u63a5\u53e3\u3002</li> <li>Path(PurePath): \u8be5\u7c7b\u63d0\u4f9b\u4e00\u5957\u57fa\u4e8eI/O\u64cd\u4f5c\u7684\u6587\u4ef6\u8def\u5f84\u63a5\u53e3\u3002</li> <li>PosixPath(Path, PurePosixPath): \u8be5\u7c7b\u63d0\u4f9b\u4e00\u5957\u5728Unix\u73af\u5883\u4e2d\u57fa\u4e8eI/O\u64cd\u4f5c\u7684\u6587\u4ef6\u8def\u5f84\u63a5\u53e3\u3002</li> <li>WindowsPath(Path, PureWindowsPath): \u8be5\u7c7b\u63d0\u4f9b\u4e00\u5957\u5728windows\u73af\u5883\u4e2d\u57fa\u4e8eI/O\u64cd\u4f5c\u7684\u6587\u4ef6\u8def\u5f84\u63a5\u53e3\u3002</li> </ul> <p>\u901a\u5e38\uff0cPath\u662f\u5728\u65e5\u5e38\u5f00\u53d1\u4e2d\u4f7f\u7528\u9891\u7387\u6700\u9ad8\u7684\u7c7b\uff0c\u53ef\u4ee5\u7c7b\u6bd4os.path\u3002</p>","tags":["Python"]},{"location":"python/pylibs/pathlib/#path","title":"Path\u7c7b\u7684\u5e38\u7528\u63a5\u53e3","text":"<p>\u5907\u6ce8\uff1a\u4e0b\u5217\u4ec5\u5217\u51fa\u4e86\u65e5\u5e38\u5f00\u53d1\u4e2d\u5e38\u7528\u7684\u63a5\u53e3\uff0c\u66f4\u5168\u7684\u63a5\u53e3\u6e05\u5355\u8bf7\u89c1\u5b98\u65b9\u6587\u6863</p>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_5","title":"\u8def\u5f84\uff08\u67e5\u627e\uff09\u63a5\u53e3\uff1a","text":"","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathcwd","title":"Path.cwd()\uff1a","text":"<ul> <li>\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u8868\u793a\u5f53\u524d\u76ee\u5f55\u7684\u8def\u5f84\u5bf9\u8c61\uff08\u548c os.getcwd() \u8fd4\u56de\u7684\u76f8\u540c\uff09</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathhome","title":"Path.home()","text":"<ul> <li>\u8fd4\u56de\u4e00\u4e2a\u8868\u793a\u7528\u6237\u5bb6\u76ee\u5f55\u7684\u65b0\u8def\u5f84\u5bf9\u8c61\uff08\u4e0e\u5e26 ~ \u6784\u9020\u7684 os.path.expanduser() \u6240\u8fd4\u56de\u7684\u76f8\u540c\uff09\u3002 \u5982\u679c\u65e0\u6cd5\u89e3\u6790\u5bb6\u76ee\u5f55\uff0c\u5219\u4f1a\u5f15\u53d1 RuntimeError</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathexists-follow_symlinkstrue","title":"Path.exists(*, follow_symlinks=True)","text":"<ul> <li>\u5982\u679c\u8def\u5f84\u6307\u5411\u73b0\u6709\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u5219\u8fd4\u56de True</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathglobpattern-case_sensitivenone","title":"Path.glob(pattern, *, case_sensitive=None)","text":"<ul> <li>\u89e3\u6790\u76f8\u5bf9\u4e8e\u6b64\u8def\u5f84\u7684\u901a\u914d\u7b26 pattern\uff0c\u4ea7\u751f\u6240\u6709\u5339\u914d\u7684\u6587\u4ef6\uff0cpattern \u7684\u5f62\u5f0f\u4e0e fnmatch --- Unix \u6587\u4ef6\u540d\u6a21\u5f0f\u5339\u914d \u7684\u76f8\u540c\uff0c\u8fd8\u589e\u52a0\u4e86 \"**\" \u8868\u793a \"\u6b64\u76ee\u5f55\u4ee5\u53ca\u6240\u6709\u5b50\u76ee\u5f55\uff0c\u9012\u5f52\"\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u5b83\u542f\u7528\u9012\u5f52\u901a\u914d</li> <li>\u5728\u4e00\u4e2a\u8f83\u5927\u7684\u76ee\u5f55\u6811\u4e2d\u4f7f\u7528 \"**\" \u6a21\u5f0f\u53ef\u80fd\u4f1a\u6d88\u8017\u975e\u5e38\u591a\u7684\u65f6\u95f4\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathrglobpattern-case_sensitivenone","title":"Path.rglob(pattern, *, case_sensitive=None)","text":"<ul> <li>\u9012\u5f52\u5730\u5bf9\u7ed9\u5b9a\u7684\u76f8\u5bf9 pattern \u6267\u884c glob \u901a\u914d\u3002 \u8fd9\u7c7b\u4f3c\u4e8e\u5f53\u8c03\u7528 Path.glob() \u65f6\u5728 pattern \u4e4b\u524d\u52a0\u4e0a \"**/\"\uff0c\u5176\u4e2d patterns \u4e0e fnmatch \u4e2d\u7684\u76f8\u540c:</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathiterdir","title":"Path.iterdir()","text":"<ul> <li>\u5f53\u8def\u5f84\u6307\u5411\u4e00\u4e2a\u76ee\u5f55\u65f6\uff0c\u4ea7\u751f\u8be5\u8def\u5f84\u4e0b\u7684\u5bf9\u8c61\u7684\u8def\u5f84\uff0c \u5b50\u6761\u76ee\u4f1a\u4ee5\u4efb\u610f\u987a\u5e8f\u751f\u6210\uff0c\u5e76\u4e14\u4e0d\u5305\u62ec\u7279\u6b8a\u6761\u76ee '.' \u548c '..'\u3002 \u5982\u679c\u8fed\u4ee3\u5668\u521b\u5efa\u4e4b\u540e\u6709\u6587\u4ef6\u5728\u76ee\u5f55\u4e2d\u88ab\u79fb\u9664\u6216\u6dfb\u52a0\uff0c\u662f\u5426\u8981\u5305\u62ec\u8be5\u6587\u4ef6\u6240\u5bf9\u5e94\u7684\u8def\u5f84\u5bf9\u8c61\u5e76\u6ca1\u6709\u660e\u786e\u89c4\u5b9a\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathwalktop_downtrue-on_errornone-follow_symlinksfalse","title":"Path.walk(top_down=True, on_error=None, follow_symlinks=False)","text":"<ul> <li>\u901a\u8fc7\u5bf9\u76ee\u5f55\u6811\u81ea\u4e0a\u800c\u4e0b\u6216\u81ea\u4e0b\u800c\u4e0a\u7684\u904d\u5386\u6765\u751f\u6210\u5176\u4e2d\u7684\u6587\u4ef6\u540d\u3002\u5bf9\u4e8e\u6839\u4f4d\u7f6e\u4e3a self \u7684\u76ee\u5f55\u6811\u4e2d\u7684\u6bcf\u4e2a\u76ee\u5f55\uff08\u5305\u62ec self \u4f46\u4e0d\u5305\u62ec '.' \u548c '..'\uff09\uff0c\u8be5\u65b9\u6cd5\u4f1a\u4ea7\u751f\u4e00\u4e2a 3 \u5143\u7ec4 (dirpath, dirnames, filenames)\u3002</li> <li>dirpath \u662f\u6307\u5411\u5f53\u524d\u6b63\u88ab\u904d\u5386\u5230\u7684\u76ee\u5f55\u7684 Path\uff0cdirnames \u662f\u7531\u8868\u793a dirpath \u4e2d\u5b50\u76ee\u5f55\u540d\u79f0\u7684\u5b57\u7b26\u4e32\u7ec4\u6210\u7684\u5217\u8868 (\u4e0d\u5305\u62ec '.' \u548c '..')\uff0cfilenames \u662f\u7531\u8868\u793a dirpath \u4e2d\u975e\u76ee\u5f55\u6587\u4ef6\u540d\u79f0\u7684\u5b57\u7b26\u4e32\u7ec4\u6210\u7684\u5217\u8868\u3002 \u8981\u83b7\u53d6 dirpath \u4e2d\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u5b8c\u6574\u8def\u5f84 (\u4ee5 self \u5f00\u5934)\uff0c\u53ef\u4f7f\u7528 dirpath / name\u3002 \u8fd9\u4e9b\u5217\u8868\u662f\u5426\u6392\u5e8f\u53d6\u51b3\u4e8e\u5177\u4f53\u7684\u6587\u4ef6\u7cfb\u7edf\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathabsolute","title":"Path.absolute()","text":"<ul> <li>\u6539\u4e3a\u7edd\u5bf9\u8def\u5f84</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathresolvestrictfalse","title":"Path.resolve(strict=False)","text":"<ul> <li>\u5c06\u8def\u5f84\u7edd\u5bf9\u5316</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_6","title":"\u8def\u5f84\uff08\u5224\u65ad\uff09\u63a5\u53e3","text":"","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathis_dir","title":"Path.is_dir()","text":"<ul> <li>\u5982\u679c\u8def\u5f84\u6307\u5411\u4e00\u4e2a\u76ee\u5f55\uff08\u6216\u8005\u4e00\u4e2a\u6307\u5411\u76ee\u5f55\u7684\u7b26\u53f7\u94fe\u63a5\uff09\u5219\u8fd4\u56de True\uff0c\u5982\u679c\u6307\u5411\u5176\u4ed6\u7c7b\u578b\u7684\u6587\u4ef6\u5219\u8fd4\u56de False\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathis_file","title":"Path.is_file()","text":"<ul> <li>\u5982\u679c\u8def\u5f84\u6307\u5411\u4e00\u4e2a\u6b63\u5e38\u7684\u6587\u4ef6\uff08\u6216\u8005\u4e00\u4e2a\u6307\u5411\u6b63\u5e38\u6587\u4ef6\u7684\u7b26\u53f7\u94fe\u63a5\uff09\u5219\u8fd4\u56de True\uff0c\u5982\u679c\u6307\u5411\u5176\u4ed6\u7c7b\u578b\u7684\u6587\u4ef6\u5219\u8fd4\u56de False\u3002</li> </ul> <p>Path.samefile(other_path) \u8fd4\u56de\u6b64\u76ee\u5f55\u662f\u5426\u6307\u5411\u4e0e\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u8005\u53e6\u4e00\u4e2a\u8def\u5f84\u5bf9\u8c61\u7684 other_path \u76f8\u540c\u7684\u6587\u4ef6\u3002\u8bed\u4e49\u7c7b\u4f3c\u4e8e os.path.samefile() \u4e0e os.path.samestat()\u3002</p>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_7","title":"\u8def\u5f84\uff08\u8bfb\u5199\uff09\u63a5\u53e3","text":"","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathmkdirmode0o777-parentsfalse-exist_okfalse","title":"Path.mkdir(mode=0o777, parents=False, exist_ok=False)","text":"<ul> <li>\u65b0\u5efa\u7ed9\u5b9a\u8def\u5f84\u7684\u76ee\u5f55\u3002\u5982\u679c\u7ed9\u51fa\u4e86 mode \uff0c\u5b83\u5c06\u4e0e\u5f53\u524d\u8fdb\u7a0b\u7684 umask \u503c\u5408\u5e76\u6765\u51b3\u5b9a\u6587\u4ef6\u6a21\u5f0f\u548c\u8bbf\u95ee\u6807\u5fd7\u3002\u5982\u679c\u8def\u5f84\u5df2\u7ecf\u5b58\u5728\uff0c\u5219\u629b\u51fa FileExistsError\u3002</li> <li>parents -&gt;True: \u4efb\u4f55\u627e\u4e0d\u5230\u7684\u7236\u76ee\u5f55\u90fd\u4f1a\u4f34\u968f\u7740\u6b64\u8def\u5f84\u88ab\u521b\u5efa\uff1b\u5b83\u4eec\u4f1a\u4ee5\u9ed8\u8ba4\u6743\u9650\u88ab\u521b\u5efa\uff0c\u800c\u4e0d\u8003\u8651 mode \u8bbe\u7f6e</li> <li>parents -&gt;False\uff0c\u5219\u627e\u4e0d\u5230\u7684\u7236\u7ea7\u76ee\u5f55\u4f1a\u5f15\u53d1 FileNotFoundError\u3002</li> <li>exist_ok \u4e3a false\uff08\u9ed8\u8ba4\uff09\uff0c\u5219\u5728\u76ee\u6807\u5df2\u5b58\u5728\u7684\u60c5\u51b5\u4e0b\u629b\u51fa FileExistsError.</li> <li>exist_ok \u4e3a true\uff0c \u5219 FileExistsError \u5f02\u5e38\u5c06\u88ab\u5ffd\u7565\uff08\u548c POSIX mkdir -p \u547d\u4ee4\u884c\u4e3a\u76f8\u540c\uff09\uff0c\u4f46\u662f\u53ea\u6709\u5728\u6700\u540e\u4e00\u4e2a\u8def\u5f84\u7ec4\u4ef6\u4e0d\u662f\u73b0\u5b58\u7684\u975e\u76ee\u5f55\u6587\u4ef6\u65f6\u624d\u751f\u6548\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathrmdir","title":"Path.rmdir()","text":"<ul> <li>\u79fb\u9664\u6b64\u76ee\u5f55\u3002\u6b64\u76ee\u5f55\u5fc5\u987b\u4e3a\u7a7a\u7684\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathtouchmode0o666-exist_oktrue","title":"Path.touch(mode=0o666, exist_ok=True)","text":"<ul> <li>\u5c06\u7ed9\u5b9a\u7684\u8def\u5f84\u521b\u5efa\u4e3a\u6587\u4ef6\u3002\u5982\u679c\u7ed9\u51fa\u4e86 mode \u5b83\u5c06\u4e0e\u5f53\u524d\u8fdb\u7a0b\u7684 umask \u503c\u5408\u5e76\u4ee5\u786e\u5b9a\u6587\u4ef6\u7684\u6a21\u5f0f\u548c\u8bbf\u95ee\u6807\u5fd7\u3002\u5982\u679c\u6587\u4ef6\u5df2\u7ecf\u5b58\u5728\uff0c\u5219\u5f53 exist_ok \u4e3a true \u5219\u51fd\u6570\u4ecd\u4f1a\u6210\u529f\uff08\u5e76\u4e14\u5c06\u5b83\u7684\u4fee\u6539\u4e8b\u4ef6\u66f4\u65b0\u4e3a\u5f53\u524d\u4e8b\u4ef6\uff09\uff0c\u5426\u5219\u629b\u51fa FileExistsError\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathrenametarget","title":"Path.rename(target)","text":"<ul> <li>\u5c06\u6587\u4ef6\u540d\u76ee\u5f55\u91cd\u547d\u540d\u4e3a\u7ed9\u5b9a\u7684 target\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u6307\u5411 target \u7684 Path \u5b9e\u4f8b\u3002 \u5728 Unix \u4e0a\uff0c\u5982\u679c target \u5b58\u5728\u4e14\u4e3a\u4e00\u4e2a\u6587\u4ef6\uff0c\u5982\u679c\u7528\u6237\u6709\u8db3\u591f\u6743\u9650\u5219\u5b83\u5c06\u88ab\u9759\u9ed8\u5730\u66ff\u6362\u3002 \u5728 Windows \u4e0a\uff0c\u5982\u679c target \u5b58\u5728\uff0c\u5219\u5c06\u4f1a\u5f15\u53d1 FileExistsError\u3002 target \u53ef\u4ee5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216\u8005\u53e6\u4e00\u4e2a\u8def\u5f84\u5bf9\u8c61:</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathopenmoder-buffering-1-encodingnone-errorsnone-newlinenone","title":"Path.open(mode='r', buffering=- 1, encoding=None, errors=None, newline=None)","text":"<ul> <li>\u6253\u5f00\u8def\u5f84\u6307\u5411\u7684\u6587\u4ef6\uff0c\u5c31\u50cf\u5185\u7f6e\u7684 open() \u51fd\u6570\u6240\u505a\u7684\u4e00\u6837</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathread_bytes","title":"Path.read_bytes()","text":"<ul> <li>\u4ee5\u5b57\u8282\u5bf9\u8c61\u7684\u5f62\u5f0f\u8fd4\u56de\u8def\u5f84\u6307\u5411\u7684\u6587\u4ef6\u7684\u4e8c\u8fdb\u5236\u5185\u5bb9,</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathread_textencodingnone-errorsnone","title":"Path.read_text(encoding=None, errors=None)","text":"<ul> <li>\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u8fd4\u56de\u8def\u5f84\u6307\u5411\u7684\u6587\u4ef6\u7684\u89e3\u7801\u540e\u6587\u672c\u5185\u5bb9\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathwrite_bytesdata","title":"Path.write_bytes(data)","text":"<ul> <li>\u5c06\u6587\u4ef6\u4ee5\u4e8c\u8fdb\u5236\u6a21\u5f0f\u6253\u5f00\uff0c\u5199\u5165 data \u5e76\u5173\u95ed,\u4e00\u4e2a\u540c\u540d\u7684\u73b0\u5b58\u6587\u4ef6\u5c06\u88ab\u8986\u76d6\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathwrite_textdata-encodingnone-errorsnone-newlinenone","title":"Path.write_text(data, encoding=None, errors=None, newline=None)","text":"<ul> <li>\u5c06\u6587\u4ef6\u4ee5\u6587\u672c\u6a21\u5f0f\u6253\u5f00\uff0c\u5199\u5165 data \u5e76\u5173\u95ed,\u540c\u540d\u7684\u73b0\u6709\u6587\u4ef6\u4f1a\u88ab\u8986\u76d6\u3002 \u53ef\u9009\u5f62\u53c2\u7684\u542b\u4e49\u4e0e open() \u7684\u76f8\u540c\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathstat-follow_symlinkstrue","title":"Path.stat(*, follow_symlinks=True)","text":"<ul> <li>\u8fd4\u56de\u4e00\u4e2a os.stat_result \u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u6709\u5173\u6b64\u8def\u5f84\u7684\u4fe1\u606f\uff0c\u4f8b\u5982 os.stat()\u3002 \u7ed3\u679c\u4f1a\u5728\u6bcf\u6b21\u8c03\u7528\u6b64\u65b9\u6cd5\u65f6\u91cd\u65b0\u641c\u7d22\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_8","title":"\u8def\u5f84\uff08\u6743\u9650\uff09\u63a5\u53e3","text":"","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathchmodmode-follow_symlinkstrue","title":"Path.chmod(mode, *, follow_symlinks=True)","text":"<ul> <li>\u6539\u53d8\u6587\u4ef6\u6a21\u5f0f\u548c\u6743\u9650\uff0c\u548c os.chmod() \u4e00\u6837\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathowner","title":"Path.owner()","text":"<ul> <li>\u8fd4\u56de\u62e5\u6709\u6b64\u6587\u4ef6\u7684\u7528\u6237\u540d\u3002\u5982\u679c\u6587\u4ef6\u7684 UID \u65e0\u6cd5\u5728\u7cfb\u7edf\u6570\u636e\u5e93\u4e2d\u627e\u5230\uff0c\u5219\u629b\u51fa KeyError\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathgroup","title":"Path.group()","text":"<ul> <li>\u8fd4\u56de\u62e5\u6709\u6b64\u6587\u4ef6\u7684\u7528\u6237\u7ec4\u3002\u5982\u679c\u6587\u4ef6\u7684 GID \u65e0\u6cd5\u5728\u7cfb\u7edf\u6570\u636e\u5e93\u4e2d\u627e\u5230\uff0c\u5c06\u629b\u51fa KeyError \u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#pathlibos","title":"pathlib\u548cos\u63a5\u53e3\u5bf9\u7167","text":"pathlib os \u548c os.path Path.absolute() 1 \u6539\u4e3a\u7edd\u5bf9\u8def\u5f84\uff0c\u8fd4\u56de\u65b0\u7684\u8def\u5f84\u5bf9\u8c61 os.path.abspath() Path.resolve() \u5c06\u8def\u5f84\u7edd\u5bf9\u5316\uff0c\u8fd4\u56de\u65b0\u7684\u8def\u5f84\u5bf9\u8c61 os.path.realpath() Path.chmod() \u6539\u53d8\u6587\u4ef6\u6a21\u5f0f\u548c\u6743\u9650 os.chmod() Path.mkdir() \u65b0\u5efa\u7ed9\u5b9a\u7684\u8def\u5f84 os.mkdir() Path.mkdir() \u540c\u4e0a os.makedirs() Path.rename() \u5c06\u6587\u4ef6\u540d\u76ee\u5f55\u91cd\u547d\u540d\u4e3a\u7ed9\u5b9a\u7684 target\uff0c\u9700\u8981\u6743\u9650 os.rename() Path.replace() \u5c06\u6587\u4ef6\u6216\u76ee\u5f55\u91cd\u547d\u540d\u4e3a\u7ed9\u5b9a\u7684 target\uff0c\u5f3a\u5236\u66ff\u6362 os.replace() Path.rmdir() \u79fb\u9664\u4e00\u4e2a\u7a7a\u76ee\u5f55 os.rmdir() Path.unlink() \u79fb\u9664\u4e00\u4e2a\u6587\u4ef6 os.remove(), os.unlink() Path.cwd() \u653e\u56de\u5f53\u524d\u8def\u5f84\u7684\u8def\u5f84\u5bf9\u8c61 os.getcwd() Path.exists() \u5224\u65ad\u6587\u4ef6\u6216\u76ee\u5f55\u662f\u5426\u5b58\u5728 os.path.exists() Path.expanduser() \u548c Path.home() \u83b7\u53d6\u8868\u793a\u7528\u6237\u5bb6\u76ee\u5f55\u7684\u65b0\u8def\u5f84\u5bf9\u8c61 os.path.expanduser() Path.iterdir() \u904d\u5386\u5f53\u524d\u8def\u5f84 os.listdir() Path.walk() \u901a\u8fc7\u5bf9\u76ee\u5f55\u6811\u81ea\u4e0a\u800c\u4e0b\u6216\u81ea\u4e0b\u800c\u4e0a\u7684\u904d\u5386\u6765\u751f\u6210\u5176\u4e2d\u7684\u6587\u4ef6\u540d os.walk() Path.is_dir() \u662f\u5426\u662f\u76ee\u5f55 os.path.isdir() Path.is_file() \u662f\u5426\u6587\u4ef6 os.path.isfile() Path.is_symlink() - os.path.islink() Path.hardlink_to() - os.link() Path.symlink_to() - os.symlink() Path.readlink() - os.readlink() PurePath.relative_to() 2 - os.path.relpath() Path.stat(), Path.owner(), Path.group() \u83b7\u53d6\u6587\u4ef6\u548c\u8def\u5f84\u4fe1\u606f\u3001\u6743\u9650 os.stat() PurePath.is_absolute() \u662f\u5426\u662f\u89c9\u5f97\u8def\u5f84 os.path.isabs() PurePath.joinpath() \u8def\u5f84\u62fc\u63a5 os.path.join() PurePath.name \u83b7\u53d6\u6587\u4ef6\u6216\u76ee\u5f55\u540d os.path.basename() PurePath.parent \u83b7\u53d6\u4e0a\u7ea7\u76ee\u5f55 os.path.dirname() Path.samefile() \u5224\u65ad\u662f\u76f8\u540c\u6587\u4ef6 os.path.samefile() PurePath.stem \u548c PurePath.suffix \u83b7\u53d6\u6587\u4ef6\u540d\u79f0\uff0c\u83b7\u53d6\u6587\u4ef6\u540e\u7f00 os.path.splitext()","tags":["Python"]},{"location":"python/pylibs/pathlib/#_9","title":"\u5b9e\u8df5\u5e94\u7528","text":"<p>\u524d\u7f6e\u8bf4\u660e\uff1a</p> <ul> <li>\u65b9\u4fbf\u8d77\u89c1\uff0c\u5bfc\u5305\u8def\u5f84\u4e0d\u5728\u4e0b\u5217\u6848\u4f8b\u4e2d\u91cd\u590d\u6dfb\u52a0 Python<pre><code>from pathlib import *\n\nimport os\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_10","title":"\u83b7\u53d6\u6587\u4ef6\u7684\u7236\u7ea7\u76ee\u5f55","text":"Python<pre><code># pathlib\u5199\u6cd5\npathlib.Path.cwd().parent\n\n# os\u5199\u6cd5\nos.path.dirname(os.path.dirname(os.getcwd()))\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_11","title":"\u8def\u5f84\u62fc\u63a5","text":"Python<pre><code># pathlib\u5199\u6cd5\npaths = ('ssw', 'test')\npathlib.Path.cwd().parent.joinpath(*paths) \n# \u6216\npathlib.Path.cwd().parent / 'ssw' / 'test'\n# \u6216\npathlib.Path.cwd().parent / 'ssw/test'\n\n# os\u5199\u6cd5\nos.path.join(os.path.dirname(os.getcwd()), 'ssw', 'test')\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_12","title":"\u5224\u65ad\u6587\u4ef6\u7c7b\u522b","text":"Python<pre><code>In [5]: path_tmp = Path('/data/sswang/projects/test/opserver/manage.py')\n\nIn [6]: Path(path_tmp).parent\nOut[6]: PosixPath('/data/sswang/projects/test/opserver')\n\nIn [7]: Path(path_tmp).parents\nOut[7]: &lt;PosixPath.parents&gt;\n\nIn [10]: list(Path(path_tmp).parents)\nOut[10]: \n[PosixPath('/data/sswang/projects/test/opserver'),\n PosixPath('/data/sswang/projects/test'),\n PosixPath('/data/sswang/projects'),\n PosixPath('/data/sswang'),\n PosixPath('/data'),\n PosixPath('/')]\n\nIn [11]: Path(path_tmp).name\nOut[11]: 'manage.py'\n\nIn [12]: Path(path_tmp).stem\nOut[12]: 'manage'\n\nIn [13]: Path(path_tmp).suffix\nOut[13]: '.py'\n\nIn [14]: Path(path_tmp).suffixes\nOut[14]: ['.py']\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_13","title":"\u6253\u5f00\u6587\u4ef6","text":"Python<pre><code>In [39]: with p.open() as f:\n    ...:     f.readline()\n    ...: \n\nIn [40]: p.read_text()\nOut[40]: '#!/usr/bin/env python\\n\"\"\"Django\\'s command-line utility for administrative tasks.\"\"\"\\nimport os\\nimport sys\\n\\n\\ndef main():\\n    \"\"\"Run administrative tasks.\"\"\"\\n    os.environ.setdefault(\\'DJANGO_SETTINGS_MODULE\\', \\'main.settings\\')\\n    try:\\n        from django.core.management import execute_from_command_line\\n    except ImportError as exc:\\n        raise ImportError(\\n            \"Couldn\\'t import Django. Are you sure it\\'s installed and \"\\n            \"available on your PYTHONPATH environment variable? Did you \"\\n            \"forget to activate a virtual environment?\"\\n        ) from exc\\n    execute_from_command_line(sys.argv)\\n\\n\\nif __name__ == \\'__main__\\':\\n    main()\\n'\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_14","title":"\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f","text":"Python<pre><code>In [1]: from pathlib import *\n\nIn [2]: p1= Path.cwd()\n\nIn [3]: p1\nOut[3]: PosixPath('/data/sswang/projects/test/opserver')\n\nIn [6]: p2 = Path('/data/sswang/projects/test/opserver/manage.py')\n\nIn [7]: p2.stat()\nOut[7]: os.stat_result(st_mode=33188, st_ino=219153651, st_dev=2081, st_nlink=1, st_uid=0, st_gid=0, st_size=682, st_atime=1619528866, st_mtime=1619528322, st_ctime=1619528322)\n\nIn [9]: p2.stat().st_size\nOut[9]: 682\n\nIn [10]: p2.stat().st_atime\nOut[10]: 1619528866.8391194\n\nIn [11]: p2.stat().st_mode\nOut[11]: 33188\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pathlib/#_15","title":"\u67e5\u627e\u6587\u4ef6","text":"Python<pre><code>In [12]: p3= Path('.').glob(\"*.py\")\n\nIn [13]: p\nOut[13]: &lt;generator object Path.glob at 0x7f7baf232810&gt;\n\nIn [15]: p= Path('.').glob(\"*.py\")\n\nIn [16]: list(p)\nOut[16]: \n[PosixPath('config_local.py'),\n PosixPath('config_public.py'),\n PosixPath('config.py'),\n PosixPath('manage.py')]\n\nIn [17]: p1= Path('.').glob(\"**/*.py\")\n\nIn [18]: list(p1)\nOut[18]: \n[PosixPath('config_local.py'),\n PosixPath('config_public.py'),\n PosixPath('config.py'),\n PosixPath('manage.py'),  \n PosixPath('opserver/apps.py'),\n ......\n]\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/pickle/","title":"Pickle\u4e4b\u6570\u636e\u5e8f\u5217\u5316\u5de5\u5177\u7684\u4f7f\u7528","text":"","tags":["Python"]},{"location":"python/pylibs/pickle/#pickle_1","title":"pickle\u7b80\u4ecb\uff1a","text":"<ul> <li>pickle\u662fpython\u8bed\u8a00\u7684\u4e00\u4e2a\u6807\u51c6\u6a21\u5757\uff0c\u5b89\u88c5python\u540e\u5df2\u5305\u542bpickle\u5e93\uff0c\u4e0d\u9700\u8981\u5355\u72ec\u518d\u5b89\u88c5\u3002</li> <li>pickle\u6a21\u5757\u5b9e\u73b0\u4e86\u57fa\u672c\u7684\u6570\u636e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3002<ul> <li>\u901a\u8fc7pickle\u6a21\u5757\u7684\u5e8f\u5217\u5316\u64cd\u4f5c\u6211\u4eec\u80fd\u591f\u5c06\u7a0b\u5e8f\u4e2d\u8fd0\u884c\u7684\u5bf9\u8c61\u4fe1\u606f\u4fdd\u5b58\u5230\u6587\u4ef6\u4e2d\u53bb\uff0c\u6c38\u4e45\u5b58\u50a8\uff1b</li> <li>\u901a\u8fc7pickle\u6a21\u5757\u7684\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\uff0c\u6211\u4eec\u80fd\u591f\u4ece\u6587\u4ef6\u4e2d\u521b\u5efa\u4e0a\u4e00\u6b21\u7a0b\u5e8f\u4fdd\u5b58\u7684\u5bf9\u8c61\u3002 </li> </ul> </li> </ul> <p>\u5e8f\u5217\u5316\u8fc7\u7a0b\u5c06\u6587\u672c\u4fe1\u606f\u8f6c\u53d8\u4e3a\u4e8c\u8fdb\u5236\u6570\u636e\u6d41\u3002\u8fd9\u6837\u5c31\u4fe1\u606f\u5c31\u5bb9\u6613\u5b58\u50a8\u5728\u786c\u76d8\u4e4b\u4e2d\uff0c\u5f53\u9700\u8981\u8bfb\u53d6\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u4ece\u786c\u76d8\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u518d\u5c06\u5176\u53cd\u5e8f\u5217\u5316\u4fbf\u53ef\u4ee5\u5f97\u5230\u539f\u59cb\u7684\u6570\u636e\u3002</p>","tags":["Python"]},{"location":"python/pylibs/pickle/#pickle-json","title":"pickle \u548c json \u7684\u533a\u522b","text":"<ul> <li>pickle \u548c json \u90fd\u63d0\u4f9b\u4e86\u5e8f\u5217\u5316\uff08dump, dumps\uff09,\u53cd\u5e8f\u5217\u5316\uff08load, loads\uff09\u56db\u4e2a\u65b9\u6cd5</li> <li>json\uff1a\u7528\u4e8e\u5b57\u7b26\u4e32\u548cPython\u6570\u636e\u7c7b\u578b\u95f4\u8fdb\u884c\u8f6c\u6362,\u53ea\u80fd\u652f\u6301int\\str\\list\\tuple\\dict</li> <li>pickle: \u7528\u4e8epython\u7684\u6570\u636e\u7c7b\u578b\u95f4\u8fdb\u884c\u8f6c\u6362</li> <li>json\u662f\u53ef\u4ee5\u5728\u4e0d\u540c\u8bed\u8a00\u4e4b\u95f4\u4ea4\u6362\u6570\u636e\u7684\uff0c\u800cpickle\u53ea\u5728python\u4e4b\u95f4\u4f7f\u7528\u3002</li> <li>json\u53ea\u80fd\u5e8f\u5217\u5316\u6700\u57fa\u672c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u800cpickle\u53ef\u4ee5\u5e8f\u5217\u5316\u6240\u6709\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5305\u62ec\u7c7b\uff0c\u51fd\u6570\u90fd\u53ef\u4ee5\u5e8f\u5217\u5316\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pickle/#pickledumpload","title":"pickle\u4e2ddump\u548cload\u7684\u4f7f\u7528","text":"<ul> <li> <p>dump() Python<pre><code># \u5e8f\u5217\u5316\u5bf9\u8c61\uff0c\u5e76\u5c06\u7ed3\u679c\u6570\u636e\u6d41\u5199\u5165\u5230\u6587\u4ef6\u5bf9\u8c61\u4e2d\u3002\npickle.dump(obj, file, protocol=None,*,fix_imports=True) \n\n# \u53c2\u6570\u8bf4\u660e\uff1a\n    \u53c2\u6570obj\u8868\u793a\u5c06\u8981\u5c01\u88c5\u7684\u5bf9\u8c61\n    \u53c2\u6570file\u8868\u793aobj\u8981\u5199\u5165\u7684\u6587\u4ef6\u5bf9\u8c61\uff0cfile\u5fc5\u987b\u4ee5\u4e8c\u8fdb\u5236\u53ef\u5199\u6a21\u5f0f\u6253\u5f00\uff0c\u5373\u201cwb\u201d\n    \u53c2\u6570protocol\u662f\u5e8f\u5217\u5316\u6a21\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a0\uff0c\u8868\u793a\u4ee5\u6587\u672c\u7684\u5f62\u5f0f\u5e8f\u5217\u5316\u3002\n\n# demo\n# dump \u5c06\u6570\u636e\u901a\u8fc7\u7279\u6b8a\u7684\u5f62\u5f0f\u8f6c\u6362\u4e3a\u53ea\u6709python\u8bed\u8a00\u8ba4\u8bc6\u7684\u5b57\u7b26\u4e32\uff0c\u5e76\u5199\u5165\u6587\u4ef6\nwith open('D:/tmp.pk', 'w') as f:\n    pickle.dump(data, f)\n</code></pre></p> </li> <li> <p>load() Python<pre><code> # \u53cd\u5e8f\u5217\u5316\u5bf9\u8c61\u3002\u5c06\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u89e3\u6790\u4e3a\u4e00\u4e2aPython\u5bf9\u8c61\u3002\npickle.load(file, *,fix_imports=True, encoding=\u201dASCII\u201d. errors=\u201dstrict\u201d)\n\n# \u53c2\u6570\u8bf4\u660e\uff1a\n    \u53c2\u6570file\u8868\u793aobj\u8981\u5199\u5165\u7684\u6587\u4ef6\u5bf9\u8c61\uff0cfile\u5fc5\u987b\u4ee5\u4e8c\u8fdb\u5236\u53ef\u5199\u6a21\u5f0f\u6253\u5f00\uff0c\u5373\u201cwb\u201d\n\n# demo    \nwith open('D:/tmp.pk', 'r') as f:\n    data = pickle.load(f)\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pickle/#pickledumpsloads","title":"pickle\u4e2ddumps\u548cloads\u7684\u4f7f\u7528","text":"<ul> <li> <p>dumps() Python<pre><code># \u6b64\u65b9\u6cd5\u4e0d\u9700\u8981\u5199\u5165\u6587\u4ef6\u4e2d\uff0c\u5b83\u662f\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u5e8f\u5217\u5316\u7684bytes\u5bf9\u8c61\u3002\npickle.dumps(obj, protocol=None,*,fix_imports=True)\n\n# demo\nimport pickle\ndata = ['aa', 'bb', 'cc']  \n# dumps \u5c06\u6570\u636e\u901a\u8fc7\u7279\u6b8a\u7684\u5f62\u5f0f\u8f6c\u6362\u4e3a\u53ea\u6709python\u8bed\u8a00\u8ba4\u8bc6\u7684\u5b57\u7b26\u4e32\np_str = pickle.dumps(data)\nprint(p_str)            \nb'\\x80\\x03]q\\x00(X\\x02\\x00\\x00\\x00aaq\\x01X\\x02\\x00\\x00\\x00bbq\\x02X\\x02\\x00\\x00\\x00ccq\\x03e.\n</code></pre></p> </li> <li> <p>loads() Python<pre><code># \u6b64\u65b9\u6cd5\u662f\u76f4\u63a5\u4ecebytes\u5bf9\u8c61\u4e2d\u8bfb\u53d6\u5e8f\u5217\u5316\u7684\u4fe1\u606f\uff0c\u800c\u975e\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u3002\npickle.loads(bytes_object, *,fix_imports=True, encoding=\u201dASCII\u201d. errors=\u201dstrict\u201d)\n\n# demo\nmes = pickle.loads(p_str)\nprint(mes)\n['aa', 'bb', 'cc']\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pickle/#dumpsloadsdumpload","title":"dumps/loads\u548cdump/load\u7684\u533a\u522b","text":"<ul> <li>dumps/loads\u4e0d\u9700\u8981\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\uff0c</li> <li>dump/load\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pickle/#pickle_2","title":"pickle\u5f02\u5e38\u6a21\u5757","text":"<p>pickle\u6a21\u5757\u53ef\u80fd\u51fa\u73b0\u4e09\u79cd\u5f02\u5e38\uff1a 1. PickleError\uff1a\u5c01\u88c5\u548c\u62c6\u5c01\u65f6\u51fa\u73b0\u7684\u5f02\u5e38\u7c7b\uff0c\u7ee7\u627f\u81eaException 2. PicklingError: \u9047\u5230\u4e0d\u53ef\u5c01\u88c5\u7684\u5bf9\u8c61\u65f6\u51fa\u73b0\u7684\u5f02\u5e38\uff0c\u7ee7\u627f\u81eaPickleError 3. UnPicklingError: \u62c6\u5c01\u5bf9\u8c61\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u5f02\u5e38\uff0c\u7ee7\u627f\u81eaPickleError</p>","tags":["Python"]},{"location":"python/pylibs/pickle/#_1","title":"\u6ce8\u610f\uff1a","text":"<ul> <li>pickle \u53ea\u80fd\u5728python\u4e2d\u7528python\u6587\u4ef6\u95f4\u5e8f\u5217\u5316\uff0c\u5b9e\u73b0\u4e86\u4e24\u4e2apython \u5185\u5b58\u6570\u636e\u7684\u4ea4\u4e92\uff08\u53ef\u5e8f\u5217\u5316\u4efb\u4f55\u5bf9\u8c61\uff08\u7c7b\uff0c\u5217\u8868\uff09\uff09 </li> <li>json \u5728\u4efb\u4f55\u8f6f\u4ef6\u95f4\u53ef\u4ee5\u5728\u5185\u5b58\u6570\u636e\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u53ea\u80fd\u5e8f\u5217\u5316\u5e38\u89c4\u7684\u5bf9\u8c61\uff08\u5217\u8868 \uff0c\u5b57\u5178\u7b49\uff09</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/","title":"PyFlink\u4e4b\u5206\u5e03\u5f0f\u8ba1\u7b97","text":"<p>\u6b64\u6587\u5185\u5bb9\u57fa\u4e8eapache-flink-1.17.1\u7248\u672c\uff0c\u5982\u6709\u504f\u5dee\u8be6\u89c1\u5b98\u65b9\u6587\u6863</p>","tags":["Python"]},{"location":"python/pylibs/pyflink/#_1","title":"\u6587\u6863\u8bf4\u660e\uff1a","text":"<p>\u5b98\u65b9\u6587\u6863\uff1a</p> <ul> <li>Flink\u5b98\u65b9\u6587\u6863</li> <li>Python API \u6587\u6863</li> </ul> <p>\u5f00\u53d1\u6587\u6863\uff1a</p> <ul> <li>pyflink\u5b98\u65b9\u6587\u6863</li> </ul> <p>\u90e8\u7f72\u6587\u6863\uff1a</p> <ul> <li>\u547d\u4ee4\u884c\u90e8\u7f72</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#pyflink_1","title":"\u5b89\u88c5pyflink","text":"<ul> <li>\u73af\u5883\u51c6\u5907\uff1a</li> <li>Java\u73af\u5883\uff1aJava8+</li> <li>python\u73af\u5883\uff1a python3.7+\uff0c conda(miniconda)\u6216\u5176\u4ed6,</li> <li>\u57fa\u7840\u73af\u5883\u5b89\u88c5\uff1a</li> <li>java\u73af\u5883\u5b89\u88c5\u6b65\u9aa4\u7565</li> <li>conda\u73af\u5883\u5b89\u88c5\u6b65\u9aa4\u7565</li> <li> <p>pyflink\u5b89\u88c5 Bash<pre><code># \u521b\u5efa\u865a\u62df\u73af\u5883\nconda create -n pyflink-py38env python=3.8 -y\n\nconda activate pyflink-py38env\n\npip install apache-flink==1.17.1  -i https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre></p> </li> <li> <p>\u73af\u5883\u9a8c\u8bc1 Bash<pre><code>conda activate pyflink-py38env\n\ncd -/pyflink-py38env/lib/python3.8/site-packages/pyflink/ \n\npython examples/table/word_count.py \n-----------&lt;log&gt;----------------\n(pyflink-py38env) [root@node80 pyflink]# python examples/table/word_count.py \nUsing Any for unsupported type: typing.Sequence[~T]\nNo module named google.cloud.bigquery_storage_v1. As a result, the ReadFromBigQuery transform *CANNOT* be used with `method=DIRECT_READ`.\nExecuting word_count example with default input data set.\nUse --input to specify file input.\nPrinting result to stdout. Use --output to specify output path.\n+I[To, 1]\n+I[be,, 1]\n+I[or, 1]\n+I[not, 1]\n+I[to, 1]\n+I[be,--that, 1]\n+I[is, 1]\n+I[the, 1]\n+I[question:--, 1]\n+I[Whether, 1]\n...\n\n# pyflink\u5b89\u88c5\u6210\u529f\n</code></pre></p> </li> <li> <p>\u91cd\u8981\u63d0\u793a\uff1a</p> </li> <li>\u5982\u679c\u9700\u8981\u5c06pyflink\u7a0b\u5e8f\u63d0\u4ea4\u5230\u8fdc\u7a0b\u7684YARN\u96c6\u7fa4\uff0c\u9700\u8981\u4ece\u96c6\u7fa4\u62f7\u8d1d\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\uff0c\u5e76\u5230\u5230\u8be5\u865a\u62df\u73af\u5883\u7684pyflink/conf\u76ee\u5f55\u4e0b<ul> <li>core-site.xml</li> <li>hdfs-site.xml</li> <li>flink-conf.yaml</li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#pyflink_2","title":"\u5f00\u53d1pyflink\u7a0b\u5e8f","text":"","tags":["Python"]},{"location":"python/pylibs/pyflink/#kafka","title":"Kafka\u6e90\u7684\u4f7f\u7528","text":"<ul> <li>\u5b98\u65b9\u4f7f\u7528\u8bf4\u660e</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#_2","title":"\u7b2c\u4e09\u65b9\u4f9d\u8d56\u7684\u4f7f\u7528","text":"<p>\u5728\u4f7f\u7528pyflink\u8fdb\u884c\u7a0b\u5e8f\u5f00\u53d1\u65f6\uff0c\u7528\u6237\u5728\u5f00\u53d1UDF\u7b97\u5b50\u65f6\u5e38\u5e38\u4f1a\u5f15\u5165\u7b2c\u4e09\u65b9\u4f9d\u8d56\u5e93,\u6b64\u65f6\u5bf9\u4f9d\u8d56\u5305\u5f15\u5165\u548c\u8fd0\u884c\u7684\u7ba1\u7406\u5c31\u4f1a\u6210\u4e3a\u521a\u9700\uff1b\u5f53\u5728\u672c\u5730\u6267\u884cpyflink\u65f6\uff0c\u7528\u6237\u53ef\u4ee5\u5c06\u7b2c\u4e09\u65b9python\u5e93\u4e0b\u8f7d\u5b89\u88c5\u5230\u672c\u5730\u540e\u5728\u8fdb\u884c\u6267\u884c\uff0c\u4f46\u5f53pyflink\u7a0b\u5e8f\u9700\u8981\u63d0\u4ea4\u5230\u8fdc\u7a0b\u6267\u884c\u65f6\uff0c\u6b64\u65b9\u6cd5\u5c31\u884c\u4e0d\u901a\u3002\u4e8e\u662fpyflink\u5b98\u65b9\u63d0\u4f9b\u4e86\u5bf9\u4f9d\u8d56\u5305\u7684\u7ba1\u7406\u65b9\u6cd5\uff0c\u5176\u4e2d\u5728DataStream API \u548c Table API\u5b9e\u73b0\u65b9\u5f0f\u662f\u4e0d\u540c\u7684\u3002</p> <ul> <li>\u76ee\u524d\u5b98\u65b9\u63d0\u4f9b\u4e86\u5bf9Jar\u4f9d\u8d56\u548cPython\u4f9d\u8d56\u7ba1\u7406\u7684\u8bf4\u660e\u548c\u793a\u4f8b\uff0c\u8be6\u89c1\u5b98\u65b9\u94fe\u63a5\uff0c</li> <li>\u9700\u8981\u6ce8\u610f\u662f\uff0c\u5728pyflink\u4ee3\u7801\u4e2d\u6dfb\u52a0\u4f9d\u8d56\u65f6\uff0c\u76ee\u524d\u53ea\u652f\u6301\u672c\u5730\u6587\u4ef6\u7684\u5f15\u5165\uff08\u5373\uff1afile:///)\uff0c\u4e0d\u652f\u6301\u8fdc\u7a0b\uff08\u5982 hdfs:///\uff09\u65b9\u5f0f\u7684\u5f15\u5165\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#pyflink_3","title":"\u63d0\u4ea4pyflink\u7a0b\u5e8f\uff08\u90e8\u7f72\uff09","text":"","tags":["Python"]},{"location":"python/pylibs/pyflink/#_3","title":"\u63d0\u4ea4\u6a21\u5f0f\u6982\u8ff0","text":"<p>\u5f53\u901a\u8fc7flink run \u63d0\u4ea4pyflink\u7a0b\u5e8f\u65f6\uff0cflink\u5c06\u6267\u884cpython\u547d\u4ee4\uff0c\u89e3\u6790\u7f16\u8bd1pyflink\u7a0b\u5e8f\uff0c\u751f\u6210\u4e00\u4e2ajar\u7a0b\u5e8f\uff0c\u6b64\u8fc7\u7a0b\u4e5f\u88ab\u79f0\u4e3aJobGraph\u5bf9\u8c61\u751f\u6210\uff0c\u5176\u672c\u8d28\u662fpython vm \u4e0ejava vm \u901a\u8fc7RPC\u7684\u65b9\u5f0f\u8fdb\u884c\u901a\u4fe1\uff0c\u5f53\u7136\uff0c\u4e0d\u540c\u7684\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5176\u5b9e\u73b0\u903b\u8f91\u4f1a\u4e0d\u540c\uff1b\u76ee\u524d\uff0c\u63d0\u4ea4\u6a21\u5f0f\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ul> <li>Session\u6a21\u5f0f</li> <li>Standalone\u6a21\u5f0f</li> <li>Application\u6a21\u5f0f\uff08\u6b64\u6a21\u5f0f\u76ee\u524d\u652f\u6301YARN \u6216 K8S\uff0c\u4e5f\u662f\u5b98\u65b9\u63a8\u8350\u7684\u6a21\u5f0f\uff09</li> <li>Per-job \u6a21\u5f0f\uff08\u57281.17\u7248\u672c\u4e2d\u5df2\u88ab\u5f03\u7528\uff09</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#_4","title":"\u63d0\u4ea4\u53c2\u6570\u8bf4\u660e","text":"<ul> <li> <p>\u5b98\u65b9\u53c2\u6570\u4f7f\u7528\u8bf4\u660e</p> </li> <li> \u9009\u9879** \u63cf\u8ff0 -py\u3001--python \u5e26\u6709\u7a0b\u5e8f\u5165\u53e3\u70b9\u7684 Python \u811a\u672c\u3002\u53ef\u4ee5\u7528 --pyFiles \u9009\u9879\u914d\u7f6e\u4f9d\u8d56\u8d44\u6e90\u3002 -pym\u3001--pyModule \u5e26\u6709\u7a0b\u5e8f\u5165\u53e3\u70b9\u7684 Python \u6a21\u5757\u3002\u8be5\u9009\u9879\u5fc5\u987b\u4e0e --pyFiles \u4e00\u8d77\u4f7f\u7528\u3002 -pyfs\u3001--pyFiles \u4e3a\u4f5c\u4e1a\u9644\u52a0\u81ea\u5b9a\u4e49\u6587\u4ef6\u3002\u652f\u6301 .py/.egg/.zip/.whl \u4e4b\u7c7b\u7684\u6807\u51c6\u8d44\u6e90\u6587\u4ef6\u540e\u7f00\u6216\u76ee\u5f55\u3002\u8fd9\u4e9b\u6587\u4ef6\u5c06\u88ab\u6dfb\u52a0\u5230\u672c\u5730\u5ba2\u6237\u7aef\u548c\u8fdc\u7a0b Python UDF Worker \u7684 PYTHONPATH \u4e2d\u3002\u4ee5 .zip \u4e3a\u540e\u7f00\u7684\u6587\u4ef6\u5c06\u88ab\u89e3\u538b\u7f29\uff0c\u5e76\u4e14\u88ab\u6dfb\u52a0\u5230 PYTHONPATH\u3002\u9017\u53f7\uff08\u201c,\u201d\uff09\u53ef\u4ee5\u7528\u4f5c\u6307\u5b9a\u591a\u4e2a\u6587\u4ef6\u7684\u5206\u9694\u7b26\uff08\u6bd4\u5982\uff0c--pyFiles file:///tmp/myresource.zip,hdfs:///$namenode_address/myresource2.zip\uff09\u3002 -pyarch\u3001--pyArchives \u4e3a\u4f5c\u4e1a\u6dfb\u52a0 Python \u5f52\u6863\u6587\u4ef6\u3002\u5f52\u6863\u6587\u4ef6\u5c06\u88ab\u89e3\u538b\u7f29\u5230 Python UDF Worker \u7684\u5de5\u4f5c\u76ee\u5f55\u3002\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u5f52\u6863\u6587\u4ef6\u6307\u5b9a\u76ee\u6807\u76ee\u5f55\u3002\u5982\u679c\u6307\u5b9a\u76ee\u6807\u76ee\u5f55\u540d\u79f0\uff0c\u90a3\u4e48\u5f52\u6863\u6587\u4ef6\u5c06\u88ab\u89e3\u538b\u7f29\u5230\u5177\u6709\u6307\u5b9a\u540d\u79f0\u7684\u76ee\u5f55\u3002\u5426\u5219\uff0c\u5f52\u6863\u6587\u4ef6\u5c06\u88ab\u89e3\u538b\u7f29\u5230\u4e0e\u5f52\u6863\u6587\u4ef6\u540c\u540d\u7684\u76ee\u5f55\u4e2d\u3002\u901a\u8fc7\u8be5\u9009\u9879\u4e0a\u4f20\u7684\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7\u76f8\u5bf9\u8def\u5f84\u8bbf\u95ee\u3002\u53ef\u4ee5\u4f7f\u7528 \u201c#\u201d \u4f5c\u4e3a\u5f52\u6863\u6587\u4ef6\u8def\u5f84\u548c\u76ee\u6807\u76ee\u5f55\u540d\u79f0\u7684\u5206\u9694\u7b26\u3002\u53ef\u4ee5\u4f7f\u7528 \u201c,\u201d \u4f5c\u4e3a\u6307\u5b9a\u591a\u4e2a\u5f52\u6863\u6587\u4ef6\u7684\u5206\u9694\u7b26\u3002\u53ef\u4ee5\u4f7f\u7528\u8be5\u9009\u9879\u4e0a\u4f20 Python UDF \u4e2d\u4f7f\u7528\u7684\u865a\u62df\u73af\u5883\u548c\u6570\u636e\u6587\u4ef6\uff08\u6bd4\u5982\uff0c--pyArchives file:///tmp/py37.zip,file:///tmp/data.zip#data --pyExecutable py37.zip/py37/bin/python\uff09\u3002\u5728 Python UDF \u4e2d\u53ef\u4ee5\u8bbf\u95ee\u6570\u636e\u6587\u4ef6\uff0c\u6bd4\u5982\uff1af = open('data/data.txt', 'r')\u3002 -pyclientexec\u3001--pyClientExecutable \u5f53\u901a\u8fc7 \u201cflink run\u201d \u63d0\u4ea4 Python \u4f5c\u4e1a\u6216\u7f16\u8bd1\u5305\u542b Python UDF \u7684 Java/Scala \u4f5c\u4e1a\u65f6\uff0c\u7528\u4e8e\u53d1\u8d77 Python \u8fdb\u7a0b\u7684 Python \u89e3\u91ca\u5668\u7684\u8def\u5f84\uff08\u6bd4\u5982\uff0c--pyArchives file:///tmp/py37.zip --pyClientExecutable py37.zip/py37/python\uff09\u3002 -pyexec\u3001--pyExecutable \u6307\u5b9a\u7528\u4e8e\u6267\u884c Python UDF Worker \u7684 Python \u89e3\u91ca\u5668\u7684\u8def\u5f84\uff08\u6bd4\u5982\uff0c--pyExecutable /usr/local/bin/python3\uff09\u3002Python UDF Worker \u4f9d\u8d56 Python 3.7+\u3001Apache Beam\uff08\u7248\u672c == 2.43.0\uff09\u3001Pip\uff08\u7248\u672c &gt;= 20.3\uff09\u548c SetupTools\uff08\u7248\u672c &gt;= 37.0.0\uff09\u3002\u8bf7\u786e\u4fdd\u6307\u5b9a\u7684\u73af\u5883\u6ee1\u8db3\u4e0a\u8ff0\u8981\u6c42\u3002 -pyreq\u3001--pyRequirements \u6307\u5b9a\u5b9a\u4e49\u7b2c\u4e09\u65b9\u4f9d\u8d56\u7684 requirements.txt \u6587\u4ef6\u3002\u8fd9\u4e9b\u4f9d\u8d56\u5c06\u88ab\u5b89\u88c5\uff0c\u5e76\u4e14\u88ab\u6dfb\u52a0\u5230 Python UDF Worker \u7684 PYTHONPATH\u3002\u53ef\u9009\u5730\u6307\u5b9a\u5305\u542b\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5b89\u88c5\u5305\u7684\u76ee\u5f55\u3002\u5982\u679c\u53ef\u9009\u53c2\u6570\u5b58\u5728\uff0c\u90a3\u4e48\u4f7f\u7528\u201c#\u201d\u4f5c\u4e3a\u5206\u9694\u7b26\uff08--pyRequirements file:///tmp/requirements.txt#file:///tmp/cached_dir\uff09\u3002 </li> <li> <p>Note: \u901a\u8fc7 -pyarch \u6307\u5b9a\u7684\u5f52\u6863\u6587\u4ef6\u5c06\u901a\u8fc7 Blob \u670d\u52a1\u88ab\u5206\u53d1\u5230 TaskManager\uff0c\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u662f 2GB\u3002\u5982\u679c\u5f52\u6863\u6587\u4ef6\u7684\u5927\u5c0f\u8d85\u8fc7 2GB\uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06\u5b83\u4e0a\u4f20\u5230\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff0c\u7136\u540e\u5728\u547d\u4ee4\u884c\u9009\u9879 -pyarch \u4e2d\u4f7f\u7528\u8def\u5f84</p> </li> <li> <p>\u6253\u5305pyflink\u8fd0\u884c\u73af\u5883 Bash<pre><code># \u627e\u5230 minconda(\u5b89\u88c5\u8def\u5f84 envs\u76ee\u5f55\u4e0b) \u6216\u8005\u5bf9\u5e94\u865a\u62df\u73af\u5883\u5b89\u88c5\u76ee\u5f55\n# \u6253\u5305 pyflink-py38env \u865a\u62df\u73af\u5883\ncd -/conda/envs/pyflink-py38env\nzip -r pyflink-py38env.zip pyflink-py38env  #\n</code></pre></p> </li> <li> <p>Note\uff1a \u9700\u8981\u6ce8\u610f\u6253\u5305\u540e\u7684zip\u662f\u5355\u5c42\uff08pyflink-py38env.zip/bin/python\uff09\u7684\u8fd8\u662f\u53cc\u5c42\u7684(pyflink-py38env.zip/pyflink-py38env/bin/python)</p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#_5","title":"\u672c\u5730\u8fd0\u884c","text":"<ul> <li> <p>\u65e0\u4f9d\u8d56\u7684\u8fd0\u884c Bash<pre><code>./bin/flink run --python examples/python/table/word_count.py   # pyflink/bin/flink\n</code></pre></p> </li> <li> <p>\u5f15\u5165\u5916\u90e8\u8d44\u6e90\u65f6\u8fd0\u884c Bash<pre><code>./bin/flink run \\\n      --python examples/python/table/word_count.py \\\n      --pyFiles file:///user.txt,hdfs:///$namenode_address/username.txt\n</code></pre></p> </li> <li> <p>\u8fd0\u884c\u5f15\u7528 Java UDF \u6216\u5916\u90e8\u8fde\u63a5\u5668\u7684 PyFlink \u4f5c\u4e1a\u3002\u5728 --jarfile \u6307\u5b9a\u7684\u6587\u4ef6\u5c06\u88ab\u4e0a\u4f20\u5230\u96c6\u7fa4\u3002 Bash<pre><code>./bin/flink run \\\n      --python examples/python/table/word_count.py \\\n      --jarfile &lt;jarFile&gt;\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#jobmanager","title":"\u63d0\u4ea4\u5230JobManager","text":"<ul> <li>Tips\uff1a</li> <li>\u5982\u679c\u63d0\u4ea4\u7684pyflink\u7a0b\u5e8f\u53ca\u5176\u4f9d\u8d56\u5728\u672c\u5730\uff1a\u8def\u5f84\u53c2\u6570\u91c7\u7528\uff1afile:///</li> <li>\u5982\u679c\u63d0\u4ea4\u7684pyflink\u7a0b\u5e8f\u5728\u6587\u4ef6\u7cfb\u7edf\uff08\u5982hdfs\uff09,\u8def\u5f84\u53c2\u6570\u91c7\u7528\uff1ahdfs:///</li> <li> <p>\u5355\u6587\u4ef6\u63d0\u4ea4 Bash<pre><code>./flink run \\\n--jobmanager localhost:8081 \\\n-pyarch file:///path/pyflink-py38env.zip \\\n-pyexec pyflink-py38env.zip/bin/python3 \\\n-pyclientexec pyflink-py38env.zip/bin/python3 \\\n-py /pyflink-py38env/lib/python3.8/site-packages/pyflink/examples/table/word_count.py\n</code></pre></p> </li> <li> <p>\u4ee5\u5de5\u7a0b\uff08\u6587\u4ef6\u5939\uff09\u7684\u65b9\u5f0f\u63d0\u4ea4 Bash<pre><code>./flink run \\\n--jobmanager localhost:8081 \\\n-pyarch file:///path/pyflink-py38env.zip \\\n-pyexec pyflink-py38env.zip/bin/python3 \\\n-pyfs /pyflink-py38env/lib/python3.8/site-packages/pyflink/examples/table \\\n-pym word_count  # \u5165\u53e3\u7a0b\u5e8f\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#yarnflink-on-yarn","title":"\u63d0\u4ea4\u5230YARN\uff08Flink On YARN\uff09","text":"<p>\u6b64\u5904\u4f7f\u7528\u7684run-application\u6a21\u5f0f\uff0c\u5176\u4ed6\u6a21\u5f0f\u7c7b\u4f3c</p> <ul> <li> <p>\u63d0\u4ea4\u7a0b\u5e8f\u5728\u672c\u5730 Bash<pre><code>./bin/flink run-application \\\n-t yarn-application \\\n-Dyarn.ship-files=/data/bluewhale/modelhub/model-pyflink-stream \\\n-Dyarn.application.name=pyflink-battery-calculate01 \\\n-pyarch model-pyflink-stream/pyflink-py38env.zip \\\n-pyclientexec pyflink-py38env/bin/python \\\n-pyexec pyflink-py38env/bin/python \\\n-pyfs model-pyflink-stream \\\n-pym evcrrc_calculate_code_by_kafka \\\n--jarfile /data/workspace/flink-1.17.1/lib/flink-sql-connector-kafka-1.17.1.jar\n</code></pre></p> </li> <li> <p>\u63d0\u4ea4\u7a0b\u5e8f\u5728hdfs</p> </li> <li>\u5728\u63d0\u4ea4\u7a0b\u5e8f\u524d\uff0c\u5148\u5c06\u7a0b\u5e8f\u548c\u76f8\u5173\u4f9d\u8d56\u4e0a\u4f20\u5230hdfs Bash<pre><code>./bin/flink run-application \n-t yarn-application \\\n-pyarch hdfs:///data/mmodelhub/model-pyflink-stream/pyflink-py38env.zip \\\n-Dyarn.application.name=pyflink-stream-model-1 \\\n-pyclientexec pyflink-py38env.zip/bin/python \\\n-pyexec pyflink-py38env.zip/bin/python \\\n-py hdfs:///data/mmodelhub/model-pyflink-stream/pyflink-stream-kafka.py \\\n--jarfile /data/workspace/flink-1.17.1/lib/flink-sql-connector-kafka-1.17.1.jar\n</code></pre></li> </ul> <p>\u63d0\u4ea4\u7684\u662fpyflink-datastream\u6a21\u578b\uff0c\u9700\u8981\u6ce8\u610f\u4e00\u4e0b\u53c2\u6570</p> <ul> <li>Dyarn.ship-files\uff1a \u8be5\u53c2\u6570\u9700\u8981\u6307\u5b9a\u4e86pyflink\u6d41\u6a21\u578b\u7684\u7edd\u5bf9\u8def\u5f84 \uff0c\u8def\u5f84\u6307\u5230\u6a21\u578b\u6587\u4ef6\u5939  (\u672c\u5730\u63d0\u4ea4\u65f6\u624d\u4f1a\u6307\u5b9a)</li> <li>-pyfs\u548c-pym\u9700\u8981\u4e00\u8d77\u4f7f\u7528</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#_6","title":"\u5b9e\u8df5\u603b\u7ed3","text":"<ul> <li>\u4f7f\u7528Application\u6a21\u5f0f\u63d0\u4ea4pyflink\u7a0b\u5e8f\u65f6\uff0c\u5efa\u8bae\u4f18\u5148\u5c06pyflink\u7a0b\u5e8f\u4f7f\u7528\u5230\u7684\u4f9d\u8d56\u5305\uff0c\u6267\u884c\u73af\u5883\u63d0\u524d\u4e0a\u4f20\u5230HDFS\u6587\u4ef6\u7cfb\u7edf\uff08\u6216\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\uff09\u4e0a\uff0c\u518d\u5728Shell \u547d\u4ee4\u4e2d\u4ee5hdfs:///\u7684\u65b9\u5f0f\u6307\u5b9a\u9700\u8981\u7528\u5230\u7684\u8d44\u6e90\u8def\u5f84\uff0c\u4ee5\u63d0\u9ad8\u4f5c\u4e1a\u63d0\u4ea4\u7684\u6548\u7387\u3002</li> <li>\u5728\u5f00\u53d1pyflink\u7a0b\u5e8f\u65f6\uff0c\u82e5\u9700\u8981\u5f15\u5165\u7b2c\u4e09\u65b9Jar\uff0c\u5efa\u8bae\u5728\u63d0\u4ea4\u4efb\u52a1\u65f6\u901a\u8fc7--jarfile \u6307\u5b9aJar\u5305\uff0c\u4e0d\u5efa\u8bae\u5728\u4ee3\u7801\u4e2d\u901a\u8fc7add_jar\u65b9\u5f0f\uff0c\u56e0\u4e3a\u6b64\u65b9\u5f0f\u76ee\u524d\u4ec5\u652f\u6301\u6307\u5b9a\u672c\u5730Jar\u8def\u5f84\uff0c\u4e0d\u652f\u6301\u6307\u5b9ahdfs\u8def\u5f84\u3002</li> <li>\u5728Flink On Yarn\u9ad8\u53ef\u7528\u67b6\u6784\u4e0b\uff0c\u76ee\u524d\u9047\u5230\u63d0\u4ea4\u591a\u4e2a\u4efb\u52a1\uff0c\u5728\u96c6\u7fa4\u4e2d\u53ea\u6709\u4e00\u4e2a\u4efb\u52a1\u6b63\u5e38\u6267\u884c\uff0c\u5176\u4ed6\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\u4f46\u672a\u6267\u884c\u7684\u95ee\u9898\uff0c\u76ee\u524d\u89e3\u51b3\u65b9\u6848\u662f\uff1a\u5728flink-conf.yaml\u914d\u7f6e\u4e2d\uff0c\u5c06cluster.id\u914d\u7f6e\u5185\u5bb9\u6ce8\u91ca\u6389\uff0c\u6b64\u914d\u7f6e\u4e3b\u8981\u7528\u4e8ezookeeper\u7ba1\u7406\u591a\u4e2aflink\u96c6\u7fa4\uff0c\u81f3\u4e8e\u9ad8\u53ef\u7528\u90e8\u7f72\u573a\u666f\u8be5\u914d\u7f6e\u662f\u5426\u4e3a\u5fc5\u914d\u7f6e\u9879\uff0c\u6682\u672a\u6df1\u5165\u5206\u6790\uff1b\u53c2\u8003</li> </ul>","tags":["Python"]},{"location":"python/pylibs/pyflink/#_7","title":"\u62d3\u5c55\uff1a","text":"","tags":["Python"]},{"location":"python/pylibs/pyflink/#pyflink_4","title":"pyflink\u76f8\u5173\u5f00\u6e90\u9879\u76ee\uff1a","text":"<ul> <li>Provide docker environment and examples for PyFlink</li> <li>\u5feb\u901f\u5165\u95e8pyflink</li> <li>Gathers Python deployment, infrastructure and practices.</li> </ul> <p>\u53c2\u8003\u535a\u6587\uff1a</p> <ul> <li>https://devpress.csdn.net/big-data/647a9c5d762a09416a07f59b.html</li> <li>https://developer.aliyun.com/article/743088</li> <li>https://www.modb.pro/db/128620\uff1aPyFlink\u6838\u5fc3\u6280\u672f\u63ed\u79d8</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/","title":"subprocess\u4e4b\u5b50\u8fdb\u7a0b\u7ba1\u7406","text":"<p>Reference\uff1a\u5b98\u65b9\u6587\u6863</p>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_1","title":"\u6a21\u5757\u6982\u8ff0","text":"","tags":["Python"]},{"location":"python/pylibs/subprocess/#_2","title":"\u4ecb\u7ecd\uff1a","text":"<p>subprocess\u662fPython\u5185\u7f6e\u5e93\u4e2d\u7528\u4e8e\u7ba1\u7406\u5b50\u8fdb\u7a0b\u7684\u6a21\u5757\uff0c\u652f\u6301\u5728Windows\u3001Linux\u3001MacOS\u5e73\u53f0\u4e2d\u4f7f\u7528\uff1b </p> <p>\u8be5\u6a21\u5757\u901a\u8fc7\u521b\u5efa\u542f\u52a8\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u6267\u884c\u7cfb\u7edf\u7ea7\u547d\u4ee4\u3001\u8c03\u7528\u5176\u4ed6\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6216\u811a\u672c\u3001\u4e0e\u5176\u4ed6\u8fdb\u7a0b\u8fdb\u884c\u4ea4\u4e92\u7b49\u7b49\uff1b\u5176\u4e3b\u8981\u901a\u8fc7\u7ba1\u9053\u6280\u672f\u8fde\u63a5\u8fdb\u7a0b\u95f4\u7684\u8f93\u5165/\u8f93\u51fa/\u9519\u8bef\u7ba1\u9053\uff0c\u4ece\u800c\u83b7\u5f97\u8fd4\u56de\u503c\u3002</p> <p>\u5728subprocess\u6a21\u5757\u53d1\u5e03\u540e\uff0c\u5b98\u65b9\u5efa\u8bae\u4f7f\u7528\u8be5\u6a21\u5757\u53bb\u66ff\u6362\u6807\u51c6\u5e93\u4e2d\u7684os.system()\u3001os.spawn*()\u7b49\u65b9\u6cd5\u53bb\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\uff1b</p>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_3","title":"\u7248\u672c\u66f4\u65b0","text":"<ol> <li>subprocess\u662fpython2.4\u4e2d\u65b0\u589e\u7684\u6a21\u5757\uff1b</li> <li>\u5728python3.5\u4e4b\u524d\uff0c\u53ef\u4ee5\u901a\u8fc7subprocess.call()\uff0csubprocess.getoutput()\u3001subprocess.check_output()\u7b49\u7b49\u65b9\u6cd5\u5b9e\u73b0\u6a21\u5757\u529f\u80fd\uff1b</li> <li>\u5728python3.5\u4e4b\u540e\uff0c\u65b0\u589esubprocess.run()\u65b9\u6cd5\uff0c\u5e76\u4e14\u5b98\u65b9\u6587\u6863\u5efa\u8bae\u901a\u8fc7subprocess.run()\u6216\u8005subprocess.Popen()\u6765\u66ff\u6362\u539f\u6709\u7684\u8001\u7248\u672c\u7684\u529f\u80fd\u51fd\u6570\uff1b</li> </ol>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_4","title":"\u5e94\u7528\u573a\u666f","text":"","tags":["Python"]},{"location":"python/pylibs/subprocess/#_5","title":"\u6267\u884c\u7cfb\u7edf\u547d\u4ee4","text":"<ul> <li>\u5728\u7a0b\u5e8f\u5185\u90e8\u6267\u884c\u7cfb\u7edf\u7ea7\u547d\u4ee4\uff0c\u5982ls\u3001kill\u3001mkdir\u3001awk\u7b49\uff0c\u53ef\u4ee5\u4f7f\u7528subprocess\u5b9e\u73b0\uff1b</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_6","title":"\u8c03\u7528\u5176\u4ed6\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6216\u811a\u672c","text":"<ul> <li>\u5728\u7a0b\u5e8f\u5185\u90e8\u6267\u884c\u5176\u4ed6\u7684\u6267\u884c\u6587\u4ef6\u6216\u811a\u672c\uff0c\u53ef\u4ee5\u4f7f\u7528subprocess\u5b9e\u73b0\uff1b</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_7","title":"\u4e0e\u5176\u4ed6\u7684\u8fdb\u7a0b\u4ea4\u4e92","text":"<ul> <li>\u5728\u9700\u8981\u4e0e\u5176\u4ed6\u8fdb\u7a0b\u8fdb\u884c\u4ea4\u4e92\uff0c\u6bd4\u5982\u5411\u67d0\u4e2a\u8fdb\u7a0b\u53d1\u9001\u6570\u636e\u3001\u4ece\u67d0\u4e2a\u8fdb\u7a0b\u8bfb\u53d6\u6570\u636e\u7b49\uff0c\u53ef\u4ee5\u4f7f\u7528subprocess\u5b9e\u73b0\uff1b</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_8","title":"\u5b9e\u73b0\u5f02\u6b65\u4efb\u52a1","text":"<ul> <li>\u5728\u7a0b\u5e8f\u5185\u90e8\u4e2d\u9700\u8981\u5b9e\u73b0\u5f02\u6b65\u4efb\u52a1\uff0c\u53ef\u4ee5\u4f7f\u7528subprocess\u5b9e\u73b0\uff1b</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#ossystem","title":"\u66ff\u4ee3os.system()","text":"<ul> <li>\u4e0d\u60f3\u4f7f\u7528os.system()\u6216os.system()\u65e0\u6cd5\u5b9e\u73b0\u9700\u6c42\u65f6\uff0c\u53ef\u4ee5subprocess\u5b9e\u73b0\uff1b  </li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_9","title":"\u5e38\u7528\u63a5\u53e3","text":"","tags":["Python"]},{"location":"python/pylibs/subprocess/#_10","title":"\u91cd\u8981\u63a5\u53e3","text":"\u63a5\u53e3\u7c7b\u522b \u63a5\u53e3\u65b9\u6cd5\u540d \u529f\u80fd\u63cf\u8ff0 \u8fd4\u56de\u7ed3\u679c \u9ad8\u9636\u63a5\u53e3 subprocess.run() \u6267\u884c\u547d\u4ee4\u5e76\u7b49\u5f85\u547d\u4ee4\u5b8c\u6210\uff0c\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5305\u542b\u4e86\u547d\u4ee4\u7684\u8f93\u51fa\u4fe1\u606f \u963b\u585e\u7b49\u5f85\uff1b\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5305\u542b\u72b6\u6001\u7801\u3001\u8f93\u51fa\u4fe1\u606f\uff08stdin/stdout/stderr\uff09 \u7b49\u5c42\u63a5\u53e3 subprocess.Popen() \u6267\u884c\u547d\u4ee4\u4e0d\u7b49\u5f85\u5b8c\u6210\uff0c\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61 \u975e\u963b\u585e\u7b49\u5f85\uff1b\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5305\u542b\u72b6\u6001\u7801\u3001\u8f93\u51fa\u4fe1\u606f\uff08stdin/stdout/stderr\uff09 \u4f4e\u7248\u672c\u63a5\u53e3\uff08\u57fa\u672c\u5df2\u88ab\u9ad8\u9636\u7684run()\u65b9\u6cd5\u66ff\u4ee3\u4e86\uff09 subprocess.call() \u6267\u884c\u547d\u4ee4\uff0c\u8fd4\u56de\u547d\u4ee4\u7684\u7ed3\u679c\u548c\u6267\u884c\u72b6\u6001 \u963b\u585e\u7b49\u5f85\uff1b0\u6216\u8005\u975e0 subprocess.check_call() \u6267\u884c\u547d\u4ee4\uff0c\u8fd4\u56de\u7ed3\u679c\u548c\u72b6\u6001 \u963b\u585e\u7b49\u5f85\uff1b\u6b63\u5e38\u4e3a0 \uff0c\u6267\u884c\u9519\u8bef\u5219\u629b\u51fa\u5f02\u5e38 subprocess.getstatusoutput() \u63a5\u53d7\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u547d\u4ee4\uff0c\u8fd4\u56de \u4e00\u4e2a\u5143\u7ec4\u5f62\u5f0f\u7684\u7ed3\u679c\uff0c \u963b\u585e\u7b49\u5f85\uff1b\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f\u547d\u4ee4\u6267\u884c\u72b6\u6001\uff0c\u7b2c\u4e8c\u4e2a\u4e3a\u6267\u884c\u7ed3\u679c\u3002 subprocess.getoutput() \u63a5\u6536\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u547d\u4ee4\uff0c\u8fd4\u56de\u7ed3\u679c \u963b\u585e\u7b49\u5f85\uff1b\u8fd4\u56de\u6267\u884c\u7ed3\u679c subprocess.check_output() \u6267\u884c\u547d\u4ee4\uff0c\u5982\u4f55\u6267\u884c\u72b6\u6001\u7801\u4e3a0\u5219\u8fd4\u56de\u547d\u4ee4\u7684\u7ed3\u679c\uff0c\u5426\u5219\u629b\u51fa\u5f02\u5e38 \u963b\u585e\u7b49\u5f85\uff1b0\u6216\u629b\u51fa\u5f02\u5e38","tags":["Python"]},{"location":"python/pylibs/subprocess/#subprocessrun","title":"\u6838\u5fc3\u63a5\u53e3\u5206\u6790\u4e4bsubprocess.run()","text":"","tags":["Python"]},{"location":"python/pylibs/subprocess/#_11","title":"\u51fd\u6570\u7279\u70b9\uff1a","text":"<ul> <li>\u8f93\u5165\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b50\u8fdb\u7a0b\u4f1a\u7ee7\u627f\u7236\u8fdb\u7a0b\u7684\u8bbe\u7f6e\uff0c\u4f1a\u5c06\u8f93\u51fa\u663e\u793a\u5728\u7ec8\u7aef\u4e0a</li> <li>\u8f93\u51fa\uff1a\u963b\u585e\u7b49\u5f85\uff0c\u6267\u884c\u6210\u529freturncode\u4e3a0\uff0c \u975e0\uff0c\u8868\u793a\u6267\u884c\u5f02\u5e38 Python<pre><code>subprocess.run(\n    args,   # \u8981\u6267\u884c\u7684shell\u547d\u4ee4\uff0c\u9ed8\u8ba4\u5e94\u8be5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5e8f\u5217\uff0c\u5982[\u2018df\u2019, \u2018-Th\u2019]\u6216(\u2018df\u2019, \u2018-Th\u2019)\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\u2019df -Th\u2019\uff0c\u4f46\u662f\u6b64\u65f6\u9700\u8981\u628ashell\u53c2\u6570\u7684\u503c\u7f6e\u4e3aTrue\uff1b\n    *, \n    stdin=None, # \u5b50\u8fdb\u7a0b\u7684\u6807\u51c6\u8f93\u5165\u3002\u6709\u4e09\u4e2a\u53c2\u6570\u53ef\u9009\uff1asubprocess.PIPE \u521b\u5efa\u4e00\u4e2a\u7ba1\u9053\uff0c\u5141\u8bb8\u4e0e\u5b50\u8fdb\u7a0b\u8fdb\u884c\u901a\u4fe1\uff1bsubprocess.DEVNULL \u7279\u6b8a\u7684\u6587\u4ef6\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e\u4e22\u5f03\u5b50\u8fdb\u7a0b\u7684\u8f93\u51fa\uff1b\u4e00\u4e2a\u6253\u5f00\u7684\u6587\u4ef6\u5bf9\u8c61\uff0c\u5c06\u5185\u5bb9\u5199\u5165\u6587\u4ef6\n    input=None, # \u5c06\u53c2\u6570\u4f20\u9012\u7ed9 Popen.communicate() \u4ee5\u53ca\u5b50\u8fdb\u7a0b\u7684 stdin,\u5141\u8bb8\u5c06\u5b57\u8282\u6216\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u5b50\u8fdb\u7a0b\u7684\u6807\u51c6\u8f93\u5165(stdin);\n    stdout=None, # \u5b50\u8fdb\u7a0b\u7684\u6807\u51c6\u8f93\u51fa(stdout);\n    stderr=None, # \u5b50\u8fdb\u7a0b\u7684\u6807\u51c6\u9519\u8bef(stderr);\n    capture_output=False, #\u53c2\u6570\u63a7\u5236\u662f\u5426\u6355\u83b7\u5916\u90e8\u547d\u4ee4\u7684\u6807\u51c6\u8f93\u51fa(stdout)\u548c\u6807\u51c6\u9519\u8bef(stderr)\u3002\u5982\u679c\u5c06\u5176\u8bbe\u7f6e\u4e3aTrue\uff0crun()\u51fd\u6570\u5c06\u8fd4\u56de\u4e00\u4e2aCompletedProcess\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u5177\u6709stdout\u548cstderr\u5c5e\u6027\uff0c\u5206\u522b\u5b58\u50a8\u4e86\u547d\u4ee4\u7684\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002\u5982\u679c\u8bbe\u7f6e\u4e3aFalse\uff0c\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u5c06\u88ab\u53d1\u9001\u5230\u63a7\u5236\u53f0\u3002\u9ed8\u8ba4\u4e3aFalse\n    shell=False,  # \u6307\u5b9a\u662f\u5426\u901a\u8fc7shell\u6765\u6267\u884c\u547d\u4ee4\u3002\u5982\u679c\u4e3aTrue\uff0c\u547d\u4ee4\u5c06\u5728shell\u4e2d\u6267\u884c\uff1b\u5982\u679c\u4e3aFalse\uff0c\u5219\u76f4\u63a5\u8c03\u7528\u53ef\u6267\u884c\u6587\u4ef6\uff1b\n    cwd=None,  # \u8bbe\u7f6e\u5b50\u8fdb\u7a0b\u7684\u5de5\u4f5c\u76ee\u5f55\u3002\u9ed8\u8ba4\u4e3aNone\uff0c\u8868\u793a\u4f7f\u7528\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\uff1b\n    timeout=None, #\u8bbe\u7f6e\u5b50\u8fdb\u7a0b\u7684\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\u3002\u5982\u679c\u5b50\u8fdb\u7a0b\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5185\u6ca1\u6709\u8fd0\u884c\u5b8c\u6210\uff0c\u5219\u4f1a\u5f15\u53d1TimeoutExpired\u5f02\u5e38\uff1b\n    check=False, # \u8bbe\u7f6e\u662f\u5426\u68c0\u67e5\u5b50\u8fdb\u7a0b\u7684\u8fd4\u56de\u7801\u3002\u5982\u679c\u4e3aTrue\uff0c\u5e76\u4e14\u5b50\u8fdb\u7a0b\u7684\u8fd4\u56de\u7801\u4e0d\u4e3a\u96f6\uff0c\u5219\u4f1a\u5f15\u53d1CalledProcessError\u5f02\u5e38\uff1b\n    encoding=None, # \u9ed8\u8ba4\u662f\u5b57\u8282\u6570\u636e\uff0c\u5982\u679c\u6307\u5b9a\u4e86\u7f16\u7801\u683c\u5f0f\uff0c\u5219\u8f93\u51fa\u4e3a\u5b57\u7b26\u4e32\uff1b\n    errors=None, # \u8be5\u53c2\u6570\u5b9a\u4e49\u5728\u89e3\u7801\u8f93\u51fa\u65f6\u5982\u4f55\u5904\u7406\u7f16\u7801\u9519\u8bef\uff0c\u5e38\u7528\u7684\u503c\u5305\u62ec\"strict\" (\u9ed8\u8ba4\u503c\uff0c\u629b\u51fa\u5f02\u5e38)\u3001\"ignore\" (\u5ffd\u7565\u9519\u8bef\u5b57\u7b26) \u548c \"replace\" (\u7528\u66ff\u4ee3\u5b57\u7b26\u4ee3\u66ff\u9519\u8bef\u5b57\u7b26);\n    text=None,  # \u6307\u5b9a\u662f\u5426\u5c06\u8f93\u51fa\u7ed3\u679c\u4ee5\u6587\u672c\u5f62\u5f0f\u8fd4\u56de\u3002\u5982\u679c\u4e3aTrue\uff0c\u5219\u7ed3\u679c\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u8fd4\u56de\uff0c\u540c\u65f6input\u6216\u8005stdin\u53c2\u6570\u4e5f\u9700\u8981\u8f93\u5165String\uff1b\u5982\u679c\u4e3aFalse\uff0c\u5219\u8fd4\u56de\u5b57\u8282\u6d41\u3002\u9ed8\u8ba4\u4e3aFalse\u3002\n    env=None, # \u8be5\u53c2\u6570\u5141\u8bb8\u60a8\u4e3a\u5b50\u8fdb\u7a0b\u6307\u5b9a\u73af\u5883\u53d8\u91cf\u3002\u5b83\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u5b57\u5178\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u5176\u4e2d\u952e\u662f\u73af\u5883\u53d8\u91cf\u7684\u540d\u79f0\uff0c\u503c\u662f\u73af\u5883\u53d8\u91cf\u7684\u503c\u3002\u901a\u8fc7\u8bbe\u7f6eenv\u53c2\u6570\uff0c\u53ef\u4ee5\u5728\u5b50\u8fdb\u7a0b\u4e2d\u4f7f\u7528\u7279\u5b9a\u7684\u73af\u5883\u53d8\u91cf\u3002\n    universal_newlines=None, # \u8be5\u53c2\u6570\u5f71\u54cd\u7684\u662f\u8f93\u5165\u4e0e\u8f93\u51fa\u7684\u6570\u636e\u683c\u5f0f\uff0c\u6bd4\u5982\u5b83\u7684\u503c\u9ed8\u8ba4\u4e3aFalse\uff0c\u6b64\u65f6stdout\u548cstderr\u7684\u8f93\u51fa\u662f\u5b57\u8282\u5e8f\u5217\uff1b\u5f53\u8be5\u53c2\u6570\u7684\u503c\u8bbe\u7f6e\u4e3aTrue\u65f6\uff0cstdout\u548cstderr\u7684\u8f93\u51fa\u662f\u5b57\u7b26\u4e32\u3002\n    **other_popen_kwargs\n)\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#args","title":"\u91cd\u8981\u53c2\u6570\uff1aargs","text":"<ul> <li>\u53ef\u4ee5\u63a5\u6536\u4e24\u79cd\u65b9\u6cd5\uff1a\u5b57\u7b26\u4e32\u6216\u5217\u8868\u3002</li> <li>\u4f7f\u7528\u5217\u8868\u5f62\u5f0fsubprocess.run([\"ls\", \"-al\"])</li> <li>\u4f7f\u7528\u5b57\u7b26\u4e32\u5f62\u5f0f subprocess.run(\"ls -al\", shell=True)\u3002\u4f7f\u7528\u5b57\u7b26\u4e32\u5f62\u5f0f\u5fc5\u987b\u8bbe\u7f6e\u53c2\u6570shell=True</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#stdinstdoutsterr","title":"\u91cd\u8981\u53c2\u6570\uff1astdin\u3001stdout\u3001sterr","text":"<ul> <li>\u7528\u6765\u8bbe\u7f6e\u6807\u51c6\u8f93\u5165\uff0c\u6807\u51c6\u8f93\u51fa\uff0c\u6807\u51c6\u9519\u8bef\u7684\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b50\u8fdb\u7a0b\u4f1a\u7ee7\u627f\u7236\u8fdb\u7a0b\u7684\u8bbe\u7f6e\uff0c\u4f1a\u5c06\u8f93\u51fa\u663e\u793a\u5728\u63a7\u5236\u53f0\uff1b</li> <li>subprocess.PIPE \u521b\u5efa\u4e00\u4e2a\u7ba1\u9053\uff0c\u5141\u8bb8\u4e0e\u5b50\u8fdb\u7a0b\u8fdb\u884c\u901a\u4fe1\uff1b</li> <li>subprocess.DEVNULL \u7279\u6b8a\u7684\u6587\u4ef6\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e\u4e22\u5f03\u5b50\u8fdb\u7a0b\u7684\u8f93\u51fa</li> <li>\u4e00\u4e2a\u6253\u5f00\u7684\u6587\u4ef6\u5bf9\u8c61\uff0c\u5c06\u5185\u5bb9\u5199\u5165\u6587\u4ef6</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_12","title":"\u4f7f\u7528\u793a\u4f8b","text":"Python<pre><code>In [1]: import subprocess\n\nIn [3]: subprocess.run(\"ls -al\", shell=True)\ntotal 16\ndrwxr-xr-x   3 root root 4096 2024-01-12 16:18:55 .\ndrwxr-xr-x. 14 root root 4096 2024-01-12 16:17:37 ..\n-rw-r--r--   1 root root    0 2024-01-12 16:18:08 find_big_file.log\n-rwxr-xr-x   1 root root 1453 2024-01-12 16:18:00 find_big_file.sh\ndrwxr-xr-x   2 root root 4096 2024-01-12 16:18:56 shell_demo\nOut[3]: CompletedProcess(args='ls -al', returncode=0)\n\nIn [4]: subprocess.run([\"ls\",\"-al\"])\ntotal 16\ndrwxr-xr-x   3 root root 4096 2024-01-12 16:18:55 .\ndrwxr-xr-x. 14 root root 4096 2024-01-12 16:17:37 ..\n-rw-r--r--   1 root root    0 2024-01-12 16:18:08 find_big_file.log\n-rwxr-xr-x   1 root root 1453 2024-01-12 16:18:00 find_big_file.sh\ndrwxr-xr-x   2 root root 4096 2024-01-12 16:18:56 shell_demo\nOut[4]: CompletedProcess(args=['ls', '-al'], returncode=0)\n\nIn [5]: subprocess.run([\"ls\", \"-l\", \"/dev/null\"], capture_output=True)\nOut[5]: CompletedProcess(args=['ls', '-l', '/dev/null'], returncode=0, stdout=b'crw-rw-rw- 1 experiment root 1, 3 2023-07-19 15:53:04 /dev/null\\n', stderr=b'')\n\nIn [6]: res = subprocess.run([\"ls\",\"-al\"])\ntotal 16\ndrwxr-xr-x   3 root root 4096 2024-01-12 16:18:55 .\ndrwxr-xr-x. 14 root root 4096 2024-01-12 16:17:37 ..\n-rw-r--r--   1 root root    0 2024-01-12 16:18:08 find_big_file.log\n-rwxr-xr-x   1 root root 1453 2024-01-12 16:18:00 find_big_file.sh\ndrwxr-xr-x   2 root root 4096 2024-01-12 16:18:56 shell_demo\n\nIn [7]: res.returncode\nOut[7]: 0\n\nIn [8]: res = subprocess.run([\"ls\",\"-al\",\"./cmd_output\"], stdout=subprocess.PIPE)\nls: cannot access ./cmd_output: No such file or directory\n\nIn [9]: res = subprocess.run([\"ls\",\"-al\",\"./\"], stdout=subprocess.PIPE)\n\nIn [10]: res.stdout\nOut[10]: b'total 16\\ndrwxr-xr-x   3 root root 4096 2024-01-12 16:18:55 .\\ndrwxr-xr-x. 14 root root 4096 2024-01-12 16:17:37 ..\\n-rw-r--r--   1 root root    0 2024-01-12 16:18:08 find_big_file.log\\n-rwxr-xr-x   1 root root 1453 2024-01-12 16:18:00 find_big_file.sh\\ndrwxr-xr-x   2 root root 4096 2024-01-12 16:18:56 shell_demo\\n'\n\nIn [11]: res = subprocess.run([\"ls\",\"-al\",\"./\"], stdout=subprocess.PIPE, text=True)\n\nIn [12]: res.stdout\nOut[12]: 'total 16\\ndrwxr-xr-x   3 root root 4096 2024-01-12 16:18:55 .\\ndrwxr-xr-x. 14 root root 4096 2024-01-12 16:17:37 ..\\n-rw-r--r--   1 root root    0 2024-01-12 16:18:08 find_big_file.log\\n-rwxr-xr-x   1 root root 1453 2024-01-12 16:18:00 find_big_file.sh\\ndrwxr-xr-x   2 root root 4096 2024-01-12 16:18:56 shell_demo\\n'\n\nIn [14]: with open(\"cmd_output.txt\", \"a+\") as f:\n    ...:     res = subprocess.run([\"ls\",\"-al\",\"./\"], stdout=f, text=True)\n    ...:     print(f\"code:{res.returncode}\")\n    ...:     print(f\"stdout: {res.stdout}\")\n    ...: \ncode:0\nstdout: None\n\nIn [15]: ls\ncmd_output.txt  find_big_file.log  find_big_file.sh*  shell_demo/\n\nIn [16]: res = subprocess.run([\"cat\",\"cmd_output.txt\"])\ntotal 16\ndrwxr-xr-x   3 root root 4096 2024-01-12 16:27:11 .\ndrwxr-xr-x. 14 root root 4096 2024-01-12 16:17:37 ..\n-rw-r--r--   1 root root    0 2024-01-12 16:27:11 cmd_output.txt\n-rw-r--r--   1 root root    0 2024-01-12 16:18:08 find_big_file.log\n-rwxr-xr-x   1 root root 1453 2024-01-12 16:18:00 find_big_file.sh\ndrwxr-xr-x   2 root root 4096 2024-01-12 16:18:56 shell_demo\ntotal 20\ndrwxr-xr-x   3 root root 4096 2024-01-12 16:27:11 .\ndrwxr-xr-x. 14 root root 4096 2024-01-12 16:17:37 ..\n-rw-r--r--   1 root root  375 2024-01-12 16:27:11 cmd_output.txt\n-rw-r--r--   1 root root    0 2024-01-12 16:18:08 find_big_file.log\n-rwxr-xr-x   1 root root 1453 2024-01-12 16:18:00 find_big_file.sh\ndrwxr-xr-x   2 root root 4096 2024-01-12 16:18:56 shell_demo\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/subprocess/#subprocesspopen","title":"\u6838\u5fc3\u63a5\u53e3\u5206\u6790\u4e4bsubprocess.Popen()","text":"","tags":["Python"]},{"location":"python/pylibs/subprocess/#_13","title":"\u51fd\u6570\u7279\u70b9\uff1a","text":"<ul> <li>run()\u65b9\u6cd5\u5e95\u5c42\u8c03\u7528\u7684\u662fPopen()\u65b9\u6cd5\uff0c\u5f53run\u65b9\u6cd5\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\u662f\uff0c\u4f7f\u7528Popen()\u65b9\u6cd5\u53bb\u5b9e\u73b0\uff1b</li> <li>\u8f93\u5165\uff1a\u6267\u884c\u7684\u547d\u4ee4</li> <li>\u8f93\u51fa\uff1a\u975e\u963b\u585e\u8f93\u51fa\uff0c\u6267\u884c\u540e\u7acb\u5373\u8fd4\u56de\uff0c\u6267\u884c\u7ed3\u679c\u901a\u8fc7\u8fd4\u56de\u5bf9\u8c61\u83b7\u53d6 Python<pre><code>subprocess.Popen(\n    args,  #\u540crun()\u65b9\u6cd5\n    bufsize=- 1, # \u5b9a\u4e49\u5b50\u8fdb\u7a0b\u7684\u7f13\u51b2\u5927\u5c0f\uff0c\u9ed8\u8ba4\u503c-1\u8868\u793a\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u7684\u7f13\u51b2\u5927\u5c0f\uff1b\n    executable=None, # \u6307\u5b9a\u8981\u6267\u884c\u7684\u7a0b\u5e8f\u8def\u5f84\uff0c\u82e5\u672a\u6307\u5b9a\uff0c\u5219\u901a\u8fc7PATH\u73af\u5883\u53d8\u91cf\u6765\u786e\u5b9a\u53ef\u6267\u884c\u6587\u4ef6\u4f4d\u7f6e\uff1b\n    stdin=None, # \u540crun()\u65b9\u6cd5\n    stdout=None, # \u540crun()\u65b9\u6cd5\n    stderr=None, # \u540crun()\u65b9\u6cd5\n    preexec_fn=None, # \u6307\u5b9a\u5728\u5b50\u8fdb\u7a0b\u542f\u52a8\u4e4b\u524d\u8981\u6267\u884c\u7684\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u5728fork()\u8c03\u7528\u6210\u529f\uff0c\u5728exec()\u8c03\u7528\u4e4b\u524d\u88ab\u8c03\u7528\uff1b\n    close_fds=True, # \u6307\u5b9a\u662f\u5426\u5173\u95ed\u6240\u6709\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\n    shell=False, # # \u540crun()\u65b9\u6cd5\n    cwd=None, # \u540crun()\u65b9\u6cd5\n    env=None, # \u540crun()\u65b9\u6cd5\n    universal_newlines=None, # \u540crun()\u65b9\u6cd5\n    startupinfo=None, # \u4e00\u4e2a\u53ef\u9009\u7684subprocess.STARTUPINFO\u5bf9\u8c61\uff0c\u7528\u4e8e\u6307\u5b9a\u5b50\u8fdb\u7a0b\u7684\u542f\u52a8\u4fe1\u606f\uff0c\u5982\u7a97\u53e3\u5927\u5c0f\u3001\u7a97\u53e3\u6807\u9898\u7b49\n    creationflags=0, # \u7528\u4e8e\u6307\u5b9a\u5b50\u8fdb\u7a0b\u7684\u521b\u5efa\u6807\u5fd7\uff0c\u63a7\u5236\u5b50\u8fdb\u7a0b\u7684\u5404\u79cd\u884c\u4e3a\u3002\u53ef\u4ee5\u4f7f\u7528subprocess.CREATE_NEW_CONSOLE\u3001subprocess.CREATE_NEW_PROCESS_GROUP\u7b49\u5e38\u91cf\u8fdb\u884c\u8bbe\u7f6e\n    restore_signals=True, # \u7528\u4e8e\u786e\u5b9a\u662f\u5426\u5728\u5b50\u8fdb\u7a0b\u4e2d\u6062\u590d\u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u7684\u9ed8\u8ba4\u884c\u4e3a\n    start_new_session=False, # \u7528\u4e8e\u4ee3\u66ff\u4f7f\u7528 preexec_fn \u7684\u4ee3\u7801\u6765\u5728\u5b50\u8fdb\u7a0b\u4e2d\u8c03\u7528 os.setsid() \u6216 os.setpgid()\uff1b\u5982\u679c start_new_session \u4e3a\u771f\u503c\u5219 setsid() \u7cfb\u7edf\u8c03\u7528\u5c06\u5728\u6267\u884c\u5b50\u8fdb\u7a0b\u4e4b\u524d\u5728\u5b50\u8fdb\u7a0b\u4e2d\u6267\u884c\n    pass_fds=(), # \u662f\u4e00\u4e2a\u53ef\u9009\u7684\u5728\u7236\u5b50\u8fdb\u7a0b\u95f4\u4fdd\u6301\u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u5e8f\u5217\u3002\u63d0\u4f9b\u4efb\u4f55 pass_fds \u5c06\u5f3a\u5236 close_fds \u4e3a True\n    *, \n    group=None, #\uff08\u4ec5 POSIX\uff09: \u5982\u679c group \u4e0d\u4e3a None\uff0c\u5219 setregid() \u7cfb\u7edf\u8c03\u7528\u5c06\u4e8e\u5b50\u8fdb\u7a0b\u6267\u884c\u4e4b\u524d\u5728\u4e0b\u7ea7\u8fdb\u7a0b\u4e2d\u8fdb\u884c\u3002 \u5982\u679c\u6240\u63d0\u4f9b\u7684\u503c\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c06\u901a\u8fc7 grp.getgrnam() \u6765\u67e5\u627e\u5b83\uff0c\u5e76\u5c06\u4f7f\u7528 gr_gid \u4e2d\u7684\u503c\u3002 \u5982\u679c\u8be5\u503c\u4e3a\u4e00\u4e2a\u6574\u6570\uff0c\u5b83\u5c06\u88ab\u539f\u6837\u4f20\u9012\n    extra_groups=None, # \uff08\u4ec5 POSIX\uff09: \u5982\u679c extra_groups \u4e0d\u4e3a None\uff0c\u5219 setgroups() \u7cfb\u7edf\u8c03\u7528\u5c06\u4e8e\u5b50\u8fdb\u7a0b\u4e4b\u524d\u5728\u4e0b\u7ea7\u8fdb\u7a0b\u4e2d\u8fdb\u884c\u3002 \u5728 extra_groups \u4e2d\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\u5c06\u901a\u8fc7 grp.getgrnam() \u6765\u67e5\u627e\uff0c\u5e76\u5c06\u4f7f\u7528 gr_gid \u4e2d\u7684\u503c\u3002 \u6574\u6570\u503c\u5c06\u88ab\u539f\u6837\u4f20\u9012\n    user=None, # \u4ec5 POSIX\uff09: \u5982\u679c user \u4e0d\u4e3a None\uff0c\u5219 setreuid() \u7cfb\u7edf\u8c03\u7528\u5c06\u4e8e\u5b50\u8fdb\u7a0b\u6267\u884c\u4e4b\u524d\u5728\u4e0b\u7ea7\u8fdb\u7a0b\u4e2d\u8fdb\u884c\u3002 \u5982\u679c\u6240\u63d0\u4f9b\u7684\u503c\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c06\u901a\u8fc7 pwd.getpwnam() \u6765\u67e5\u627e\u5b83\uff0c\u5e76\u5c06\u4f7f\u7528 pw_uid \u4e2d\u7684\u503c\u3002 \u5982\u679c\u8be5\u503c\u4e3a\u4e00\u4e2a\u6574\u6570\uff0c\u5b83\u5c06\u88ab\u539f\u6837\u4f20\u9012\n    umask=- 1, # \u5982\u679c umask \u4e0d\u4e3a\u8d1f\u503c\uff0c\u5219 umask() \u7cfb\u7edf\u8c03\u7528\u5c06\u5728\u5b50\u8fdb\u7a0b\u6267\u884c\u4e4b\u524d\u5728\u4e0b\u7ea7\u8fdb\u7a0b\u4e2d\u8fdb\u884c\n    encoding=None,  # \u540crun()\u65b9\u6cd5\n    errors=None,  # \u540crun()\u65b9\u6cd5\n    text=None,  # \u540crun()\u65b9\u6cd5\n    pipesize=- 1, # \u5f53 PIPE \u88ab\u7528\u4f5c stdin, stdout \u6216 stderr \u65f6 pipesize \u53ef\u88ab\u7528\u4e8e\u6539\u53d8\u7ba1\u9053\u7684\u5927\u5c0f\u3002 \u7ba1\u9053\u7684\u5927\u5c0f\u4ec5\u4f1a\u5728\u53d7\u652f\u6301\u7684\u5e73\u53f0\u4e0a\u88ab\u6539\u53d8\uff08\u5f53\u64b0\u5199\u672c\u6587\u6863\u65f6\u53ea\u6709 Linux \u652f\u6301\uff09\n    process_group=None # \u7528\u4e8e\u4ee3\u66ff\u4f7f\u7528 preexec_fn \u7684\u4ee3\u7801\u6765\u5728\u5b50\u8fdb\u7a0b\u4e2d\u8c03\u7528 os.setsid() \u6216 os.setpgid()\uff1b\u5982\u679c start_new_session \u4e3a\u771f\u503c\u5219 setsid() \u7cfb\u7edf\u8c03\u7528\u5c06\u5728\u6267\u884c\u5b50\u8fdb\u7a0b\u4e4b\u524d\u5728\u5b50\u8fdb\u7a0b\u4e2d\u6267\u884c\n)\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#-popen","title":"\u91cd\u8981\u5c5e\u6027-Popen\u5bf9\u8c61","text":"<ul> <li>Popen.communicate(input=None, timeout=None)</li> <li>\u4e0e\u8fdb\u7a0b\u4ea4\u4e92\uff1a\u5c06\u6570\u636e\u53d1\u9001\u5230 stdin\u3002 \u4ece stdout \u548c stderr \u8bfb\u53d6\u6570\u636e\uff0c\u76f4\u5230\u62b5\u8fbe\u6587\u4ef6\u7ed3\u5c3e\u3002 \u7b49\u5f85\u8fdb\u7a0b\u7ec8\u6b62\u5e76\u8bbe\u7f6e returncode \u5c5e\u6027\uff0c\u53ef\u9009\u7684 input \u53c2\u6570\u5e94\u4e3a\u8981\u53d1\u9001\u5230\u4e0b\u7ea7\u8fdb\u7a0b\u7684\u6570\u636e\uff0c\u6216\u8005\u5982\u679c\u6ca1\u6709\u8981\u53d1\u9001\u5230\u4e0b\u7ea7\u8fdb\u7a0b\u7684\u6570\u636e\u5219\u4e3a None\u3002 \u5982\u679c\u6d41\u662f\u4ee5\u6587\u672c\u6a21\u5f0f\u6253\u5f00\u7684\uff0c\u5219 input \u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\u3002 \u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u5b83\u5fc5\u987b\u4e3a\u5b57\u8282\u4e32\u3002</li> <li>communicate() \u8fd4\u56de\u4e00\u4e2a (stdout_data, stderr_data) \u5143\u7ec4\u3002\u5982\u679c\u6587\u4ef6\u4ee5\u6587\u672c\u6a21\u5f0f\u6253\u5f00\u5219\u4e3a\u5b57\u7b26\u4e32\uff1b\u5426\u5219\u5b57\u8282\u3002</li> <li>Popen.poll()</li> <li>\u68c0\u67e5\u5b50\u8fdb\u7a0b\u662f\u5426\u5df2\u88ab\u7ec8\u6b62\u3002\u8bbe\u7f6e\u5e76\u8fd4\u56de returncode \u5c5e\u6027\u3002\u5426\u5219\u8fd4\u56de None\u3002</li> <li>Popen.wait(timeout=None)</li> <li>\u7b49\u5f85\u5b50\u8fdb\u7a0b\u88ab\u7ec8\u6b62\u3002\u8bbe\u7f6e\u5e76\u8fd4\u56de returncode \u5c5e\u6027\u3002</li> <li>Popen.send_signal(signal)</li> <li>\u5c06\u4fe1\u53f7 signal \u53d1\u9001\u7ed9\u5b50\u8fdb\u7a0b\uff0c\u5982SIGINT\u3001SIGTERM\u7b49</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_14","title":"\u4f7f\u7528\u793a\u4f8b","text":"<ul> <li> <p>\u57fa\u672c\u64cd\u4f5c Python<pre><code>In [1]: import subprocess\n\nIn [2]: res = subprocess.Popen(\"sleep 10 &amp;&amp; pwd\", shell=True)\n\nIn [3]: res\nOut[3]: &lt;Popen: returncode: None args: 'sleep 10 &amp;&amp; pwd'&gt;\n\nIn [4]: res.stdout\n\nIn [5]: res.stdout\n\nIn [7]: /data/sswang/subprocess_demo\nIn [7]: \n</code></pre></p> </li> <li> <p>\u6848\u4f8b Python<pre><code>'''\n\u4f7f\u7528subprocess\u7684Popen\u6765\u6267\u884cshell\u547d\u4ee4\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u6765\u6267\u884cshell\n\u4f7f\u7528\u8981\u653e\u5728\u540e\u53f0\u4e00\u76f4\u6267\u884c\u7684shell\u8fdb\u7a0b\uff0c\u6bd4\u5982\u901a\u8fc7shell\u542f\u52a8\u67d0\u79cd\u670d\u52a1\uff0c\u5982\u679c\u901a\u8fc7\u4e0a\u9762\n\u7684\u65b9\u5f0f\uff0c\u5c31\u4f1a\u9047\u5230\u5f53python\u88ab\u5173\u95ed\u65f6\uff0cshell\u542f\u52a8\u7684\u7a0b\u5e8f\u4e5f\u88ab\u5173\u95ed\n\u9700\u8981\u6ce8\u610f\u7684\u662fclose_fds\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3afalse\uff0c\u8868\u793a\u7ee7\u627ffb\uff0c\u5373\u6587\u4ef6\u8d44\u6e90\u7b26\uff0c\u5982\u679c\u7ee7\u627ffb\uff0c\u90a3\u4e48\u5f53\u7236\u8fdb\u7a0b\u5173\u95ed\u65f6\nshell\u542f\u52a8\u7684\u5b50\u8fdb\u7a0b\u4f1a\u53bb\u7ee7\u627f\u7236\u8fdb\u7a0b\u76f8\u5e94\u7684\u8d44\u6e90\uff0c\u5982Flask web\u670d\u52a1\u4e2d\u901a\u8fc7shell\u542f\u52a8\u4e86\u67d0\u4e2a\u670d\u52a1\uff0c\u6b64\u65f6Flask\u5173\u95ed\u4e86\n\u4f46\u539f\u672cFlask\u76d1\u542c\u7684\u7aef\u53e3\u4f9d\u65e7\u4f1a\u88abshell\u5b50\u8fdb\u7a0b\u5360\u7528\uff0c\u8fd9\u6837\u5c31\u5bfc\u81f4Flask\u65e0\u6cd5\u518d\u6b21\u542f\u52a8\u3002\n\u5c06close_fds\u8bbe\u7f6e\u4e3afalse\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\n'''\ndef execshell2(self,shell):\n    try:\n        p = subprocess.Popen(shell, shell=True,stdout=subprocess.PIPE ,stderr=subprocess.STDOUT, close_fds=True)\n        output = p.stdout.read()\n        # p.terminate()\n        code = 0\n        print('%s execute success!' % shell)\n    except subprocess.CalledProcessError as e:\n        code = e.returncode\n        output = e.output\n        print('%s execute error: exit_status [%s] err [%s]' % (shell, str(code), output))\n        exit()\n    return code, output\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#subprocess_1","title":"subprocess\u5e38\u7528\u5f02\u5e38\u7c7b","text":"","tags":["Python"]},{"location":"python/pylibs/subprocess/#subprocesserror","title":"SubprocessError","text":"<ul> <li>\u6b64\u6a21\u5757\u7684\u5176\u4ed6\u5f02\u5e38</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#timeoutexpired","title":"TimeoutExpired","text":"<ul> <li>SubprocessError \u7684\u5b50\u7c7b\uff0c\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7684\u8fc7\u7a0b\u4e2d\u53d1\u751f\u8d85\u65f6\u65f6\u88ab\u629b\u51fa</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#calledprocesserror","title":"CalledProcessError","text":"<ul> <li>SubprocessError \u7684\u5b50\u7c7b\uff0c\u5f53\u4e00\u4e2a\u7531 check_call(), check_output() \u6216 run() (\u9644\u5e26 check=True) \u8fd0\u884c\u7684\u8fdb\u7a0b\u8fd4\u56de\u4e86\u975e\u96f6\u9000\u51fa\u72b6\u6001\u7801\u65f6\u5c06\u88ab\u5f15\u53d1</li> </ul>","tags":["Python"]},{"location":"python/pylibs/subprocess/#_15","title":"\u5b9e\u8df5\u6848\u4f8b","text":"<ul> <li>\u9700\u6c42\uff1a\u4f7f\u7528typer+subprocess\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406\u9879\u76ee\u4f9d\u8d56\u548c\u6267\u884c\u4e00\u4e9b\u5e38\u89c1\u4efb\u52a1\u7684\u811a\u672c\u7684\u5de5\u5177\u3002 Python<pre><code>import sys\nfrom pathlib import Path\nimport subprocess\nimport click\n\nclass UpgradeDependencies:\n    @classmethod\n    def _build_args(cls, dependencies):\n        # \u89e3\u6790\u4f9d\u8d56\u9879\u5e76\u6784\u5efa\u53c2\u6570\n        packs, specials = [], {}\n        for dep in dependencies:\n            if \":\" in dep:\n                k, v = dep.split(\":\")\n                specials[k.strip()] = v.strip().split()\n            else:\n                packs.append(dep.strip())\n        return packs, specials\n\n    @classmethod\n    def _parse_dependencies(cls, text, title):\n        # \u4ece\u6587\u672c\u4e2d\u89e3\u6790\u4f9d\u8d56\u9879\n        main, dev = text.split(title)\n        devs = dev.split(\"[tool.\")[0].strip().splitlines()\n        mains = main.strip().splitlines()\n        prod_packs, specials = cls._build_args(mains)\n        dev_packs, specials = cls._build_args(devs)\n        return prod_packs, dev_packs, specials\n\n    @classmethod\n    def get_args(cls):\n        # \u83b7\u53d6\u4f9d\u8d56\u9879\u53c2\u6570\n        dev_title = \"[tool.poetry.group.dev.dependencies]\"\n        dev_flag = \"--group dev\"\n        main_args, dev_args, others = [], [], []\n        if dev_title in text:\n            main_title = \"[tool.poetry.dependencies]\"\n        else:\n            dev_flag = \"--group dev\"\n            dev_title = \"[tool.poetry.group.dev.dependencies]\"\n        main_args, dev_args, others = cls._parse_dependencies(text, main_title, dev_title, dev_flag)\n        return main_args, dev_args, others, dev_flag\n\n    @classmethod\n    def gen_cmd(cls):\n        # \u751f\u6210\u5347\u7ea7\u4f9d\u8d56\u9879\u7684\u547d\u4ee4\n        main_args, dev_args, others, dev_flag = cls.get_args()\n        command = f\"poetry add {' '.join(main_args)} &amp;&amp; poetry add {dev_flag} {' '.join(dev_args)}\"\n        for packages in others:\n            command += f\" &amp;&amp; poetry add {' '.join(packages)}\"\n        return command\n\ndef exit_if_run_failed(cmd):\n    # \u5982\u679c\u8fd0\u884c\u547d\u4ee4\u5931\u8d25\uff0c\u5219\u9000\u51fa\n    try:\n        subprocess.run(cmd, check=True, shell=True)\n    except subprocess.CalledProcessError as e:\n        print(f\"Error: {e}\")\n        sys.exit(1)\n\n@click.command()\ndef update():\n    \"\"\"\u5347\u7ea7\u6240\u6709\u4f9d\u8d56\u5305\u5230\u6700\u65b0\u7248\"\"\"\n    exit_if_run_failed(UpgradeDependencies.gen_cmd())\n\n@click.command()\ndef lint():\n    \"\"\"\u683c\u5f0f\u5316\u52a0\u9759\u6001\u68c0\u67e5\"\"\"\n    remove_imports = \"autoflake --in-place --remove-all-unused-imports\"\n    cmd = \"\"\n    paths = \".\"\n    if args := sys.argv[1:]:\n        if \"-r\" in args:\n            args.remove(\"-r\")\n            if all(Path(i).is_file() for i in args):\n                cmd = f\"{remove_imports} {paths} &amp;&amp; \" + cmd\n        paths = \" \".join(args)\n    tools = (\"isort\", \"black\", \"ruff\", \"mypy\")\n    cmd += f\"poetry run {tools[0]} {paths} &amp;&amp; poetry run {tools[1]} {paths} &amp;&amp; poetry run {tools[2]} {paths} &amp;&amp; poetry run {tools[3]} {paths}\"\n    exit_if_run_failed(cmd)\n\n@click.command()\ndef dev():\n    \"\"\"\u542f\u52a8\u670d\u52a1\uff1a\u76f8\u5f53\u4e8edjango\u7684runserver\"\"\"\n    cmd = \"poetry run python main.py\"\n    if args := sys.argv[1:]:\n        cmd += \" \" + \" \".join(args)\n    exit_if_run_failed(cmd)\n\n@click.command()\ndef makemigrations():\n    \"\"\"\u751f\u6210\u6570\u636e\u5e93\u8fc1\u79fb\u6587\u4ef6\uff0c\u7c7b\u4f3cDjango\u7684./manage.py makemigrations\"\"\"\n    exit_if_run_failed(\"aerich migrate\")\n\n@click.command()\ndef migrate():\n    \"\"\"\u66f4\u65b0\u6570\u636e\u5e93\u8868\u7ed3\u6784\uff1a\u76f8\u5f53\u4e8edjango\u7684./manage.py migrate\"\"\"\n    exit_if_run_failed(\"aerich upgrade\")\n\nif __name__ == \"__main__\":\n    cli()  # Assuming you have defined `cli` somewhere\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/","title":"Supervisor\u4e4b\u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177","text":"","tags":["Python"]},{"location":"python/pylibs/supervisor/#_1","title":"\u6982\u8ff0\uff1a","text":"<p>\u5b98\u65b9\u6587\u6863\uff1ahttp://supervisord.org/</p> <p>supervisor\u662f\u7528python\u5f00\u53d1\u7684\u4e00\u6b3e\u7528\u4e8elinux\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177\uff0csupervisor\u53ef\u4ee5\u9ad8\u6548\u5730\u5b9e\u73b0\u5bf9\u8fdb\u7a0b\u72b6\u6001\u7684\u76d1\u63a7\u53ca\u7edf\u4e00\u7ba1\u7406</p> <ul> <li>supervisor\u5206\u4e3asupervisord\uff08\u670d\u52a1\u7aef\uff09\u548csupervisorctl\uff08\u5ba2\u6237\u7aef\uff09\u4e24\u90e8\u5206</li> <li>supervisord\u4f5c\u4e3a\u670d\u52a1\u7aef\u8d1f\u8d23\u6240\u6709\u7684\u6ce8\u518c\u8fdb\u7a0b\u7684\u542f\u52a8\u53ca\u76d1\u63a7\uff0c\u51fa\u73b0\u5d29\u6e83\u7684\u670d\u52a1\u65f6\u4f1a\u81ea\u52a8\u91cd\u542f</li> <li>supervisorctl\u662f\u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u5b50\u8fdb\u7a0b\u7684\u7ba1\u7406\uff0c\u5982\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u7b49</li> </ul> <p>\u6ce8\u610f\uff1a</p> <ul> <li>supervisord \u8981\u6c42\u7ba1\u7406\u7684\u7a0b\u5e8f\u662f\u975e daemon \u7a0b\u5e8f\uff0c \u56e0\u6b64\u7528supervisord \u6765\u7ba1\u7406\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u9700\u8981\u4ee5\u975edaemon\u7684\u65b9\u5f0f\u542f\u52a8\u3002</li> <li>\u4f8b\u5982\uff1a\u7ba1\u7406nginx\uff0c\u5fc5\u987b\u5728 nginx \u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u6dfb\u52a0\u4e00\u884c\u8bbe\u7f6e daemon off \u8ba9 nginx \u4ee5\u975e daemon \u65b9\u5f0f\u542f\u52a8\u3002</li> <li>\u6bcf\u6b21\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u540e\u9700\u8fdb\u5165 supervisorctl\uff0c\u6267\u884c reload\uff0c \u6539\u52a8\u90e8\u5206\u624d\u80fd\u751f\u6548\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#_2","title":"\u4f7f\u7528\uff1a","text":"","tags":["Python"]},{"location":"python/pylibs/supervisor/#_3","title":"\u5b89\u88c5","text":"Bash<pre><code>pip install supervisor\n\n# \u751f\u6210\u914d\u7f6e\u6587\u4ef6\u5230\u6307\u5b9a\u8def\u5f84\uff08\u6b64\u5904\u8def\u5f84\u6307\u5b9a\u4e3a\u4e86/etc/supervisord.conf\uff09\necho_supervisord_conf &gt; /etc/supervisord.conf\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/supervisor/#_4","title":"\u5e38\u7528\u547d\u4ee4\uff1a","text":"<ul> <li> <p>supervisord: \u670d\u52a1\u7aef\u547d\u4ee4\uff1a Bash<pre><code># \u542f\u52a8\u670d\u52a1\nsupervisord -c /etc/supervisord.conf\n\n# \u67e5\u770b\u662f\u5426\u5728\u8fd0\u884c\nps aux | grep supervisord\n</code></pre></p> </li> <li> <p>supervisorctl: \u5ba2\u6237\u7aef\u547d\u4ee4\uff1a Bash<pre><code>supervisorctl status                         # \u67e5\u770b\u8fdb\u7a0b\u72b6\u6001\nsupervisorctl start program_name             # \u542f\u52a8program_name\u8fdb\u7a0b\nsupervisorctl stop program_name              # \u7ec8\u6b62program_name\u8fdb\u7a0b\nsupervisorctl restart program_name           # \u91cd\u542fprogram_name\u8fdb\u7a0b\nsupervisorctl reread                         # \u66f4\u65b0\u914d\u7f6e\uff0c\u6839\u636e\u6700\u65b0\u7684\u914d\u7f6e\u542f\u52a8\u6240\u6709\u7a0b\u5e8f\nsupervisorctl update                         # \u66f4\u65b0\u914d\u7f6e\uff0c\u91cd\u542f\u914d\u7f6e\u6709\u53d8\u5316\u7684\u8fdb\u7a0b\n</code></pre></p> </li> <li> <p>supervisorctl: shell\u547d\u4ee4\uff1a Bash<pre><code>supervisorctl                # \u8fdb\u5165shell\u547d\u4ee4\u884c\n&gt; status                     # \u67e5\u770b\u8fdb\u7a0b\u72b6\u6001\n&gt; start program_name         # \u542f\u52a8program_name\u8fdb\u7a0b\n&gt; stop program_name          # \u7ec8\u6b62program_name\u8fdb\u7a0b\n&gt; restart program_name       # \u91cd\u542fprogram_name\u8fdb\u7a0b\n&gt; reread                     # \u66f4\u65b0\u914d\u7f6e\uff0c\u6839\u636e\u6700\u65b0\u7684\u914d\u7f6e\u542f\u52a8\u6240\u6709\u7a0b\u5e8f\n&gt; update                     # \u66f4\u65b0\u914d\u7f6e\uff0c\u91cd\u542f\u914d\u7f6e\u6709\u53d8\u5316\u7684\u8fdb\u7a0b\n&gt; start fastapi:*            # \u542f\u52a8 fastapi\u7ec4 \u7a0b\u5e8f\n&gt; stop fastapi:*             # \u505c\u6b62 fastapi\u7ec4 \u7a0b\u5e8f\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#_5","title":"\u5feb\u901f\u4f7f\u7528\uff1a","text":"<ul> <li>step1\uff1a\u7f16\u8f91supervisor\u914d\u7f6e\u6587\u4ef6</li> <li> <p>\u5728\u914d\u7f6e\u6587\u4ef6\u7684\u672b\u5c3e\u52a0\u4e0a[include]\u5185\u5bb9 Bash<pre><code>...\n[include]\nfiles=/etc/supervisor.d/*.conf  #\u82e5\u4f60\u672c\u5730\u65e0/etc/supervisor.d\u76ee\u5f55\uff0c\u8bf7\u81ea\u5efa\n...\n</code></pre></p> </li> <li> <p>step2\uff1a\u65b0\u5efa/etc/supervisor.d/.demo.conf \u914d\u7f6e\u6587\u4ef6 Bash<pre><code>[program:\u81ea\u5b9a\u4e49\u7684\u670d\u52a1\u540d\u79f0]\ncommand=python3 /xxxx/main.py  #\u670d\u52a1\u7684\u542f\u52a8\u547d\u4ee4\uff0c\u5728\u8fd9\u91cc\u7528\u7684python\u73af\u5883\u4e3asupervisor\u5b89\u88c5\u7684\u73af\u5883\uff0c\u82e5\u60f3\u6307\u5b9a\u5176\u4ed6python\u73af\u5883\u5219\u53ef\u6307\u5b9apython\u5305\u7684\u4f4d\u7f6e\u5982command=xxxx/xxxx/bin/python3 /xxxx/main.py\u4fbf\u53ef\nprocess_name=%(program_name)s\nstdout_logfile=/home/task.log  #\u8f93\u51fa\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\uff0c\u53ef\u6839\u636e\u9700\u8981\u81ea\u5b9a\u4e49\nstderr_logfile=/home/task.log  #\u62a5\u9519\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\uff0c\u53ef\u6839\u636e\u9700\u8981\u81ea\u5b9a\u4e49\n</code></pre></p> </li> <li> <p>step3:\u542f\u52a8 Bash<pre><code>supervisord -c /etc/supervisor.conf\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#_6","title":"\u914d\u7f6e\u6587\u4ef6\u89e3\u8bfb\uff1a","text":"","tags":["Python"]},{"location":"python/pylibs/supervisor/#_7","title":"\u5e38\u7528\u914d\u7f6e\u89e3\u8bfb","text":"<ul> <li>\u6253\u5f00\u914d\u7f6e\u6587\u4ef6\uff1a /etc/supervisord.conf Bash<pre><code>[unix_http_server]\nfile=/tmp/supervisor.sock   ;UNIX socket \u6587\u4ef6\uff0csupervisorctl \u4f1a\u4f7f\u7528\n;chmod=0700                 ;socket\u6587\u4ef6\u7684mode\uff0c\u9ed8\u8ba4\u662f0700\n;chown=nobody:nogroup       ;socket\u6587\u4ef6\u7684owner\uff0c\u683c\u5f0f\uff1auid:gid\n\n[inet_http_server]         ;HTTP\u670d\u52a1\u5668\uff0c\u63d0\u4f9bweb\u7ba1\u7406\u754c\u9762\nport=0.0.0.0:9001          ;Web\u7ba1\u7406\u540e\u53f0\u8fd0\u884c\u7684IP\u548c\u7aef\u53e3\uff0c\u5982\u679c\u5f00\u653e\u5230\u516c\u7f51\uff0c\u9700\u8981\u6ce8\u610f\u5b89\u5168\u6027\nusername=user              ;\u767b\u5f55\u7ba1\u7406\u540e\u53f0\u7684\u7528\u6237\u540d\npassword=123               ;\u767b\u5f55\u7ba1\u7406\u540e\u53f0\u7684\u5bc6\u7801\n\n[supervisord]\nlogfile=/tmp/supervisord.log ;\u65e5\u5fd7\u6587\u4ef6\uff0c\u9ed8\u8ba4\u662f $CWD/supervisord.log\nlogfile_maxbytes=50MB        ;\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\uff0c\u8d85\u51fa\u4f1arotate\uff0c\u9ed8\u8ba4 50MB\uff0c\u5982\u679c\u8bbe\u62100\uff0c\u8868\u793a\u4e0d\u9650\u5236\u5927\u5c0f\nlogfile_backups=10           ;\u65e5\u5fd7\u6587\u4ef6\u4fdd\u7559\u5907\u4efd\u6570\u91cf\u9ed8\u8ba410\uff0c\u8bbe\u4e3a0\u8868\u793a\u4e0d\u5907\u4efd\nloglevel=info                ;\u65e5\u5fd7\u7ea7\u522b\uff0c\u9ed8\u8ba4info\uff0c\u5176\u5b83: debug,warn,trace\npidfile=/tmp/supervisord.pid ;pid \u6587\u4ef6\nnodaemon=false               ;\u662f\u5426\u5728\u524d\u53f0\u542f\u52a8\uff0c\u9ed8\u8ba4\u662ffalse\uff0c\u5373\u4ee5 daemon \u7684\u65b9\u5f0f\u542f\u52a8\nminfds=1024                  ;\u53ef\u4ee5\u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u6700\u5c0f\u503c\uff0c\u9ed8\u8ba4 1024\nminprocs=200                 ;\u53ef\u4ee5\u6253\u5f00\u7684\u8fdb\u7a0b\u6570\u7684\u6700\u5c0f\u503c\uff0c\u9ed8\u8ba4 200\n\n[supervisorctl]\nserverurl=unix:///tmp/supervisor.sock ;\u901a\u8fc7UNIX socket\u8fde\u63a5supervisord\uff0c\u8def\u5f84\u4e0eunix_http_server\u90e8\u5206\u7684file\u4e00\u81f4\n;serverurl=http://127.0.0.1:9001 ; \u901a\u8fc7HTTP\u7684\u65b9\u5f0f\u8fde\u63a5supervisord\n\n\n# \u4ee5\u4e0a\u4e1c\u897f\u90fd\u4e0d\u9700\u8981\u6539\uff0c\u5c31\u52a0\u4e0b\u9762\u8fd9\u884c\n[include]\nfiles=/etc/supervisor.d/*.conf  #\u82e5\u4f60\u672c\u5730\u65e0/etc/supervisor.d\u76ee\u5f55\uff0c\u8bf7\u81ea\u5efa\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#_8","title":"\u8be6\u7ec6\u914d\u7f6e\u89e3\u8bfb\uff1a","text":"Bash<pre><code>[unix_http_server]            \n\nfile=/tmp/supervisor.sock   ; socket\u6587\u4ef6\u7684\u8def\u5f84\uff0csupervisorctl\u7528XML_RPC\u548csupervisord\u901a\u4fe1\u5c31\u662f\u901a\u8fc7\u5b83\u8fdb\u884c\n\n                              \u7684\u3002\u5982\u679c\u4e0d\u8bbe\u7f6e\u7684\u8bdd\uff0csupervisorctl\u4e5f\u5c31\u4e0d\u80fd\u7528\u4e86  \n\n                              \u4e0d\u8bbe\u7f6e\u7684\u8bdd\uff0c\u9ed8\u8ba4\u4e3anone\u3002 \u975e\u5fc5\u987b\u8bbe\u7f6e        \n\n;chmod=0700                 ; \u8fd9\u4e2a\u7b80\u5355\uff0c\u5c31\u662f\u4fee\u6539\u4e0a\u9762\u7684\u90a3\u4e2asocket\u6587\u4ef6\u7684\u6743\u9650\u4e3a0700\n\n                              \u4e0d\u8bbe\u7f6e\u7684\u8bdd\uff0c\u9ed8\u8ba4\u4e3a0700\u3002 \u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;chown=nobody:nogroup       ; \u8fd9\u4e2a\u4e00\u6837\uff0c\u4fee\u6539\u4e0a\u9762\u7684\u90a3\u4e2asocket\u6587\u4ef6\u7684\u5c5e\u7ec4\u4e3auser.group\n\n                              \u4e0d\u8bbe\u7f6e\u7684\u8bdd\uff0c\u9ed8\u8ba4\u4e3a\u542f\u52a8supervisord\u8fdb\u7a0b\u7684\u7528\u6237\u53ca\u5c5e\u7ec4\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;username=user              ; \u4f7f\u7528supervisorctl\u8fde\u63a5\u7684\u65f6\u5019\uff0c\u8ba4\u8bc1\u7684\u7528\u6237\n\n                               \u4e0d\u8bbe\u7f6e\u7684\u8bdd\uff0c\u9ed8\u8ba4\u4e3a\u4e0d\u9700\u8981\u7528\u6237\u3002 \u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;password=123               ; \u548c\u4e0a\u9762\u7684\u7528\u6237\u540d\u5bf9\u5e94\u7684\u5bc6\u7801\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u660e\u7801\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528SHA\u52a0\u5bc6\n\n                              \u5982\uff1a{SHA}82ab876d1387bfafe46cc1c8a2ef074eae50cb1d\n\n                              \u9ed8\u8ba4\u4e0d\u8bbe\u7f6e\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;[inet_http_server]         ; \u4fa6\u542c\u5728TCP\u4e0a\u7684socket\uff0cWeb Server\u548c\u8fdc\u7a0b\u7684supervisorctl\u90fd\u8981\u7528\u5230\u4ed6\n\n                              \u4e0d\u8bbe\u7f6e\u7684\u8bdd\uff0c\u9ed8\u8ba4\u4e3a\u4e0d\u5f00\u542f\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;port=127.0.0.1:9001        ; \u8fd9\u4e2a\u662f\u4fa6\u542c\u7684IP\u548c\u7aef\u53e3\uff0c\u4fa6\u542c\u6240\u6709IP\u7528 :9001\u6216*:9001\u3002\n\n                              \u8fd9\u4e2a\u5fc5\u987b\u8bbe\u7f6e\uff0c\u53ea\u8981\u4e0a\u9762\u7684[inet_http_server]\u5f00\u542f\u4e86\uff0c\u5c31\u5fc5\u987b\u8bbe\u7f6e\u5b83\n\n;username=user              ; \u8fd9\u4e2a\u548c\u4e0a\u9762\u7684uinx_http_server\u4e00\u4e2a\u6837\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;password=123               ; \u8fd9\u4e2a\u4e5f\u4e00\u4e2a\u6837\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n[supervisord]                ;\u8fd9\u4e2a\u4e3b\u8981\u662f\u5b9a\u4e49supervisord\u8fd9\u4e2a\u670d\u52a1\u7aef\u8fdb\u7a0b\u7684\u4e00\u4e9b\u53c2\u6570\u7684\n\n                              \u8fd9\u4e2a\u5fc5\u987b\u8bbe\u7f6e\uff0c\u4e0d\u8bbe\u7f6e\uff0csupervisor\u5c31\u4e0d\u7528\u5e72\u6d3b\u4e86\n\nlogfile=/tmp/supervisord.log ; \u8fd9\u4e2a\u662fsupervisord\u8fd9\u4e2a\u4e3b\u8fdb\u7a0b\u7684\u65e5\u5fd7\u8def\u5f84\uff0c\u6ce8\u610f\u548c\u5b50\u8fdb\u7a0b\u7684\u65e5\u5fd7\u4e0d\u642d\u560e\u3002\n\n                               \u9ed8\u8ba4\u8def\u5f84$CWD/supervisord.log\uff0c$CWD\u662f\u5f53\u524d\u76ee\u5f55\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\nlogfile_maxbytes=50MB        ; \u8fd9\u4e2a\u662f\u4e0a\u9762\u90a3\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u7684\u5927\u5c0f\uff0c\u5f53\u8d85\u8fc750M\u7684\u65f6\u5019\uff0c\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u65e5 \n\n                               \u5fd7\u6587\u4ef6\u3002\u5f53\u8bbe\u7f6e\u4e3a0\u65f6\uff0c\u8868\u793a\u4e0d\u9650\u5236\u6587\u4ef6\u5927\u5c0f\n\n                               \u9ed8\u8ba4\u503c\u662f50M\uff0c\u975e\u5fc5\u987b\u8bbe\u7f6e\u3002              \n\nlogfile_backups=10           ; \u65e5\u5fd7\u6587\u4ef6\u4fdd\u6301\u7684\u6570\u91cf\uff0c\u4e0a\u9762\u7684\u65e5\u5fd7\u6587\u4ef6\u5927\u4e8e50M\u65f6\uff0c\u5c31\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u6587\u4ef6\u3002\u6587\u4ef6\n\n                               \u6570\u91cf\u5927\u4e8e10\u65f6\uff0c\u6700\u521d\u7684\u8001\u6587\u4ef6\u88ab\u65b0\u6587\u4ef6\u8986\u76d6\uff0c\u6587\u4ef6\u6570\u91cf\u5c06\u4fdd\u6301\u4e3a10\n\n                               \u5f53\u8bbe\u7f6e\u4e3a0\u65f6\uff0c\u8868\u793a\u4e0d\u9650\u5236\u6587\u4ef6\u7684\u6570\u91cf\u3002\n\n                               \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a10\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\nloglevel=info                ; \u65e5\u5fd7\u7ea7\u522b\uff0c\u6709critical, error, warn, info, debug, trace, or blather\u7b49\n\n                               \u9ed8\u8ba4\u4e3ainfo\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\u9879\n\npidfile=/tmp/supervisord.pid ; supervisord\u7684pid\u6587\u4ef6\u8def\u5f84\u3002\n\n                               \u9ed8\u8ba4\u4e3a$CWD/supervisord.pid\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\nnodaemon=false               ; \u5982\u679c\u662ftrue\uff0csupervisord\u8fdb\u7a0b\u5c06\u5728\u524d\u53f0\u8fd0\u884c\n\n                               \u9ed8\u8ba4\u4e3afalse\uff0c\u4e5f\u5c31\u662f\u540e\u53f0\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u8fd0\u884c\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\nminfds=1024                  ; \u8fd9\u4e2a\u662f\u6700\u5c11\u7cfb\u7edf\u7a7a\u95f2\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u4f4e\u4e8e\u8fd9\u4e2a\u503csupervisor\u5c06\u4e0d\u4f1a\u542f\u52a8\u3002\n\n                               \u7cfb\u7edf\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u5728\u8fd9\u91cc\u8bbe\u7f6ecat /proc/sys/fs/file-max\n\n                               \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3a1024\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\nminprocs=200                 ; \u6700\u5c0f\u53ef\u7528\u7684\u8fdb\u7a0b\u63cf\u8ff0\u7b26\uff0c\u4f4e\u4e8e\u8fd9\u4e2a\u503csupervisor\u4e5f\u5c06\u4e0d\u4f1a\u6b63\u5e38\u542f\u52a8\u3002\n\n                              ulimit  -u\u8fd9\u4e2a\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770blinux\u4e0b\u9762\u7528\u6237\u7684\u6700\u5927\u8fdb\u7a0b\u6570\n\n                              \u9ed8\u8ba4\u4e3a200\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;umask=022                   ; \u8fdb\u7a0b\u521b\u5efa\u6587\u4ef6\u7684\u63a9\u7801\n\n                               \u9ed8\u8ba4\u4e3a022\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\u9879\n\n;user=chrism                 ; \u8fd9\u4e2a\u53c2\u6570\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u975eroot\u7528\u6237\uff0c\u5f53\u6211\u4eec\u4ee5root\u7528\u6237\u542f\u52a8supervisord\u4e4b\u540e\u3002\n\n                               \u6211\u8fd9\u91cc\u9762\u8bbe\u7f6e\u7684\u8fd9\u4e2a\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u5bf9supervisord\u8fdb\u884c\u7ba1\u7406\n\n                               \u9ed8\u8ba4\u60c5\u51b5\u662f\u4e0d\u8bbe\u7f6e\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\u9879\n\n;identifier=supervisor       ; \u8fd9\u4e2a\u53c2\u6570\u662fsupervisord\u7684\u6807\u8bc6\u7b26\uff0c\u4e3b\u8981\u662f\u7ed9XML_RPC\u7528\u7684\u3002\u5f53\u4f60\u6709\u591a\u4e2a\n\n                               supervisor\u7684\u65f6\u5019\uff0c\u800c\u4e14\u60f3\u8c03\u7528XML_RPC\u7edf\u4e00\u7ba1\u7406\uff0c\u5c31\u9700\u8981\u4e3a\u6bcf\u4e2a\n\n                               supervisor\u8bbe\u7f6e\u4e0d\u540c\u7684\u6807\u8bc6\u7b26\u4e86\n\n                               \u9ed8\u8ba4\u662fsupervisord\u3002\u3002\u3002\u975e\u5fc5\u9700\u8bbe\u7f6e\n\n;directory=/tmp              ; \u8fd9\u4e2a\u53c2\u6570\u662f\u5f53supervisord\u4f5c\u4e3a\u5b88\u62a4\u8fdb\u7a0b\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u8bbe\u7f6e\u8fd9\u4e2a\u53c2\u6570\u7684\u8bdd\uff0c\u542f\u52a8\n\n                               supervisord\u8fdb\u7a0b\u4e4b\u524d\uff0c\u4f1a\u5148\u5207\u6362\u5230\u8fd9\u4e2a\u76ee\u5f55\n\n                               \u9ed8\u8ba4\u4e0d\u8bbe\u7f6e\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;nocleanup=true              ; \u8fd9\u4e2a\u53c2\u6570\u5f53\u4e3afalse\u7684\u65f6\u5019\uff0c\u4f1a\u5728supervisord\u8fdb\u7a0b\u542f\u52a8\u7684\u65f6\u5019\uff0c\u628a\u4ee5\u524d\u5b50\u8fdb\u7a0b\n\n                               \u4ea7\u751f\u7684\u65e5\u5fd7\u6587\u4ef6(\u8def\u5f84\u4e3aAUTO\u7684\u60c5\u51b5\u4e0b)\u6e05\u9664\u6389\u3002\u6709\u65f6\u5019\u54b1\u4eec\u60f3\u8981\u770b\u5386\u53f2\u65e5\u5fd7\uff0c\u5f53 \n\n                               \u7136\u4e0d\u60f3\u65e5\u5fd7\u88ab\u6e05\u9664\u4e86\u3002\u6240\u4ee5\u53ef\u4ee5\u8bbe\u7f6e\u4e3atrue\n\n                               \u9ed8\u8ba4\u662ffalse\uff0c\u6709\u8c03\u8bd5\u9700\u6c42\u7684\u540c\u5b66\u53ef\u4ee5\u8bbe\u7f6e\u4e3atrue\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;childlogdir=/tmp            ; \u5f53\u5b50\u8fdb\u7a0b\u65e5\u5fd7\u8def\u5f84\u4e3aAUTO\u7684\u65f6\u5019\uff0c\u5b50\u8fdb\u7a0b\u65e5\u5fd7\u6587\u4ef6\u7684\u5b58\u653e\u8def\u5f84\u3002\n\n                               \u9ed8\u8ba4\u8def\u5f84\u662f\u8fd9\u4e2a\u4e1c\u897f\uff0c\u6267\u884c\u4e0b\u9762\u7684\u8fd9\u4e2a\u547d\u4ee4\u770b\u770b\u5c31OK\u4e86\uff0c\u5904\u7406\u7684\u4e1c\u897f\u5c31\u9ed8\u8ba4\u8def\u5f84\n\n                               python -c \"import tempfile;print tempfile.gettempdir()\"\n\n                               \u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;environment=KEY=\"value\"     ; \u8fd9\u4e2a\u662f\u7528\u6765\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u7684\uff0csupervisord\u5728linux\u4e2d\u542f\u52a8\u9ed8\u8ba4\u7ee7\u627f\u4e86linux\u7684\n\n                               \u73af\u5883\u53d8\u91cf\uff0c\u5728\u8fd9\u91cc\u53ef\u4ee5\u8bbe\u7f6esupervisord\u8fdb\u7a0b\u7279\u6709\u7684\u5176\u4ed6\u73af\u5883\u53d8\u91cf\u3002\n\n                               supervisord\u542f\u52a8\u5b50\u8fdb\u7a0b\u65f6\uff0c\u5b50\u8fdb\u7a0b\u4f1a\u62f7\u8d1d\u7236\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u5185\u5bb9\u3002 \u6240\u4ee5\u8bbe\u7f6e\u7684\n\n                               \u8fd9\u4e9b\u73af\u5883\u53d8\u91cf\u4e5f\u4f1a\u88ab\u5b50\u8fdb\u7a0b\u7ee7\u627f\u3002\n\n                               \u5c0f\u4f8b\u5b50\uff1aenvironment=name=\"haha\",age=\"hehe\"\n\n                               \u9ed8\u8ba4\u4e3a\u4e0d\u8bbe\u7f6e\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;strip_ansi=false            ; \u8fd9\u4e2a\u9009\u9879\u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u4f1a\u6e05\u9664\u5b50\u8fdb\u7a0b\u65e5\u5fd7\u4e2d\u7684\u6240\u6709ANSI \u5e8f\u5217\u3002\u4ec0\u4e48\u662fANSI\n\n                               \u5e8f\u5217\u5462\uff1f\u5c31\u662f\u6211\u4eec\u7684\\n,\\t\u8fd9\u4e9b\u4e1c\u897f\u3002\n\n                               \u9ed8\u8ba4\u4e3afalse\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n; the below section must remain in the config file for RPC\n\n; (supervisorctl/web interface) to work, additional interfaces may be\n\n; added by defining them in separate rpcinterface: sections\n\n[rpcinterface:supervisor]    ;\u8fd9\u4e2a\u9009\u9879\u662f\u7ed9XML_RPC\u7528\u7684\uff0c\u5f53\u7136\u4f60\u5982\u679c\u60f3\u4f7f\u7528supervisord\u6216\u8005web server \u8fd9 \n\n                              \u4e2a\u9009\u9879\u5fc5\u987b\u8981\u5f00\u542f\u7684\n\nsupervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface \n\n[supervisorctl]              ;\u8fd9\u4e2a\u4e3b\u8981\u662f\u9488\u5bf9supervisorctl\u7684\u4e00\u4e9b\u914d\u7f6e  \n\nserverurl=unix:///tmp/supervisor.sock ; \u8fd9\u4e2a\u662fsupervisorctl\u672c\u5730\u8fde\u63a5supervisord\u7684\u65f6\u5019\uff0c\u672c\u5730UNIX socket\n\n                                        \u8def\u5f84\uff0c\u6ce8\u610f\u8fd9\u4e2a\u662f\u548c\u524d\u9762\u7684[unix_http_server]\u5bf9\u5e94\u7684\n\n                                        \u9ed8\u8ba4\u503c\u5c31\u662funix:///tmp/supervisor.sock\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;serverurl=http://127.0.0.1:9001 ; \u8fd9\u4e2a\u662fsupervisorctl\u8fdc\u7a0b\u8fde\u63a5supervisord\u7684\u65f6\u5019\uff0c\u7528\u5230\u7684TCP socket\u8def\u5f84\n\n                                   \u6ce8\u610f\u8fd9\u4e2a\u548c\u524d\u9762\u7684[inet_http_server]\u5bf9\u5e94\n\n                                   \u9ed8\u8ba4\u5c31\u662fhttp://127.0.0.1:9001\u3002\u3002\u3002\u975e\u5fc5\u987b\u9879\n\n\n\n;username=chris              ; \u7528\u6237\u540d\n\n                               \u9ed8\u8ba4\u7a7a\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;password=123                ; \u5bc6\u7801\n\n                              \u9ed8\u8ba4\u7a7a\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;prompt=mysupervisor         ; \u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\u65f6\u5019\u7684\u63d0\u793a\u7b26\n\n                               \u9ed8\u8ba4supervisor\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;history_file=~/.sc_history  ; \u8fd9\u4e2a\u53c2\u6570\u548cshell\u4e2d\u7684history\u7c7b\u4f3c\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e0a\u4e0b\u952e\u6765\u67e5\u627e\u524d\u9762\u6267\u884c\u8fc7\u7684\u547d\u4ee4\n\n                               \u9ed8\u8ba4\u662fno file\u7684\u3002\u3002\u6240\u4ee5\u6211\u4eec\u60f3\u8981\u6709\u8fd9\u79cd\u529f\u80fd\uff0c\u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u3002\u3002\u3002\u975e\n\n                               \u5fc5\u987b\u8bbe\u7f6e\n\n; The below sample program section shows all possible program subsection values,\n\n; create one or more 'real' program: sections to be able to control them under\n\n; supervisor.\n\n;[program:theprogramname]      ;\u8fd9\u4e2a\u5c31\u662f\u54b1\u4eec\u8981\u7ba1\u7406\u7684\u5b50\u8fdb\u7a0b\u4e86\uff0c\":\"\u540e\u9762\u7684\u662f\u540d\u5b57\uff0c\u6700\u597d\u522b\u4e71\u5199\u548c\u5b9e\u9645\u8fdb\u7a0b\n\n                                \u6709\u70b9\u5173\u8054\u6700\u597d\u3002\u8fd9\u6837\u7684program\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a\uff0c\u4e00\u4e2aprogram\u5c31\u662f\n\n                                \u8981\u88ab\u7ba1\u7406\u7684\u4e00\u4e2a\u8fdb\u7a0b\n\n;command=/bin/cat              ; \u8fd9\u4e2a\u5c31\u662f\u6211\u4eec\u7684\u8981\u542f\u52a8\u8fdb\u7a0b\u7684\u547d\u4ee4\u8def\u5f84\u4e86\uff0c\u53ef\u4ee5\u5e26\u53c2\u6570\n\n                                \u4f8b\u5b50\uff1a/home/test.py -a 'hehe'\n\n                                \u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u7684command\u53ea\u80fd\u662f\u90a3\u79cd\u5728\u7ec8\u7aef\u8fd0\u884c\u7684\u8fdb\u7a0b\uff0c\u4e0d\u80fd\u662f\n\n                                \u5b88\u62a4\u8fdb\u7a0b\u3002\u8fd9\u4e2a\u60f3\u60f3\u4e5f\u77e5\u9053\u4e86\uff0c\u6bd4\u5982\u8bf4command=service httpd start\u3002\n\n                                httpd\u8fd9\u4e2a\u8fdb\u7a0b\u88ablinux\u7684service\u7ba1\u7406\u4e86\uff0c\u6211\u4eec\u7684supervisor\u518d\u53bb\u542f\u52a8\u8fd9\u4e2a\u547d\u4ee4\n\n                                \u8fd9\u5df2\u7ecf\u4e0d\u662f\u4e25\u683c\u610f\u4e49\u7684\u5b50\u8fdb\u7a0b\u4e86\u3002\n\n                                \u8fd9\u4e2a\u662f\u4e2a\u5fc5\u987b\u8bbe\u7f6e\u7684\u9879\n\n;process_name=%(program_name)s ; \u8fd9\u4e2a\u662f\u8fdb\u7a0b\u540d\uff0c\u5982\u679c\u6211\u4eec\u4e0b\u9762\u7684numprocs\u53c2\u6570\u4e3a1\u7684\u8bdd\uff0c\u5c31\u4e0d\u7528\u7ba1\u8fd9\u4e2a\u53c2\u6570\n\n                                 \u4e86\uff0c\u5b83\u9ed8\u8ba4\u503c%(program_name)s\u4e5f\u5c31\u662f\u4e0a\u9762\u7684\u90a3\u4e2aprogram\u5192\u53f7\u540e\u9762\u7684\u540d\u5b57\uff0c\n\n                                 \u4f46\u662f\u5982\u679cnumprocs\u4e3a\u591a\u4e2a\u7684\u8bdd\uff0c\u90a3\u5c31\u4e0d\u80fd\u8fd9\u4e48\u5e72\u4e86\u3002\u60f3\u60f3\u4e5f\u77e5\u9053\uff0c\u4e0d\u53ef\u80fd\u6bcf\u4e2a\n\n                                 \u8fdb\u7a0b\u90fd\u7528\u540c\u4e00\u4e2a\u8fdb\u7a0b\u540d\u5427\u3002\n\n\n\n;numprocs=1                    ; \u542f\u52a8\u8fdb\u7a0b\u7684\u6570\u76ee\u3002\u5f53\u4e0d\u4e3a1\u65f6\uff0c\u5c31\u662f\u8fdb\u7a0b\u6c60\u7684\u6982\u5ff5\uff0c\u6ce8\u610fprocess_name\u7684\u8bbe\u7f6e\n\n                                 \u9ed8\u8ba4\u4e3a1    \u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;directory=/tmp                ; \u8fdb\u7a0b\u8fd0\u884c\u524d\uff0c\u4f1a\u524d\u5207\u6362\u5230\u8fd9\u4e2a\u76ee\u5f55\n\n                                 \u9ed8\u8ba4\u4e0d\u8bbe\u7f6e\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;umask=022                     ; \u8fdb\u7a0b\u63a9\u7801\uff0c\u9ed8\u8ba4none\uff0c\u975e\u5fc5\u987b\n\n;priority=999                  ; \u5b50\u8fdb\u7a0b\u542f\u52a8\u5173\u95ed\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u4f4e\u7684\uff0c\u6700\u5148\u542f\u52a8\uff0c\u5173\u95ed\u7684\u65f6\u5019\u6700\u540e\u5173\u95ed\n\n                                 \u9ed8\u8ba4\u503c\u4e3a999 \u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;autostart=true                ; \u5982\u679c\u662ftrue\u7684\u8bdd\uff0c\u5b50\u8fdb\u7a0b\u5c06\u5728supervisord\u542f\u52a8\u540e\u88ab\u81ea\u52a8\u542f\u52a8\n\n                                 \u9ed8\u8ba4\u5c31\u662ftrue   \u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;autorestart=unexpected        ; \u8fd9\u4e2a\u662f\u8bbe\u7f6e\u5b50\u8fdb\u7a0b\u6302\u6389\u540e\u81ea\u52a8\u91cd\u542f\u7684\u60c5\u51b5\uff0c\u6709\u4e09\u4e2a\u9009\u9879\uff0cfalse,unexpected\n\n                                 \u548ctrue\u3002\u5982\u679c\u4e3afalse\u7684\u65f6\u5019\uff0c\u65e0\u8bba\u4ec0\u4e48\u60c5\u51b5\u4e0b\uff0c\u90fd\u4e0d\u4f1a\u88ab\u91cd\u65b0\u542f\u52a8\uff0c\n\n                                 \u5982\u679c\u4e3aunexpected\uff0c\u53ea\u6709\u5f53\u8fdb\u7a0b\u7684\u9000\u51fa\u7801\u4e0d\u5728\u4e0b\u9762\u7684exitcodes\u91cc\u9762\u5b9a\u4e49\u7684\u9000 \n\n                                 \u51fa\u7801\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u88ab\u81ea\u52a8\u91cd\u542f\u3002\u5f53\u4e3atrue\u7684\u65f6\u5019\uff0c\u53ea\u8981\u5b50\u8fdb\u7a0b\u6302\u6389\uff0c\u5c06\u4f1a\u88ab\u65e0\n\n                                 \u6761\u4ef6\u7684\u91cd\u542f\n\n;startsecs=1                   ; \u8fd9\u4e2a\u9009\u9879\u662f\u5b50\u8fdb\u7a0b\u542f\u52a8\u591a\u5c11\u79d2\u4e4b\u540e\uff0c\u6b64\u65f6\u72b6\u6001\u5982\u679c\u662frunning\uff0c\u5219\u6211\u4eec\u8ba4\u4e3a\u542f\n\n                                 \u52a8\u6210\u529f\u4e86\n\n                                 \u9ed8\u8ba4\u503c\u4e3a1 \u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;startretries=3                ; \u5f53\u8fdb\u7a0b\u542f\u52a8\u5931\u8d25\u540e\uff0c\u6700\u5927\u5c1d\u8bd5\u542f\u52a8\u7684\u6b21\u6570\u3002\u3002\u5f53\u8d85\u8fc73\u6b21\u540e\uff0csupervisor\u5c06\u628a\n\n                                 \u6b64\u8fdb\u7a0b\u7684\u72b6\u6001\u7f6e\u4e3aFAIL\n\n                                 \u9ed8\u8ba4\u503c\u4e3a3 \u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;exitcodes=0,2                 ; \u6ce8\u610f\u548c\u4e0a\u9762\u7684\u7684autorestart=unexpected\u5bf9\u5e94\u3002\u3002exitcodes\u91cc\u9762\u7684\u5b9a\u4e49\u7684\n\n                                 \u9000\u51fa\u7801\u662fexpected\u7684\u3002\n\n;stopsignal=QUIT               ; \u8fdb\u7a0b\u505c\u6b62\u4fe1\u53f7\uff0c\u53ef\u4ee5\u4e3aTERM, HUP, INT, QUIT, KILL, USR1, or USR2\u7b49\u4fe1\u53f7\n\n                                  \u9ed8\u8ba4\u4e3aTERM \u3002\u3002\u5f53\u7528\u8bbe\u5b9a\u7684\u4fe1\u53f7\u53bb\u5e72\u6389\u8fdb\u7a0b\uff0c\u9000\u51fa\u7801\u4f1a\u88ab\u8ba4\u4e3a\u662fexpected\n\n                                  \u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;stopwaitsecs=10               ; \u8fd9\u4e2a\u662f\u5f53\u6211\u4eec\u5411\u5b50\u8fdb\u7a0b\u53d1\u9001stopsignal\u4fe1\u53f7\u540e\uff0c\u5230\u7cfb\u7edf\u8fd4\u56de\u4fe1\u606f\n\n                                 \u7ed9supervisord\uff0c\u6240\u7b49\u5f85\u7684\u6700\u5927\u65f6\u95f4\u3002 \u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\uff0csupervisord\u4f1a\u5411\u8be5\n\n                                 \u5b50\u8fdb\u7a0b\u53d1\u9001\u4e00\u4e2a\u5f3a\u5236kill\u7684\u4fe1\u53f7\u3002\n\n                                 \u9ed8\u8ba4\u4e3a10\u79d2\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;stopasgroup=false             ; \u8fd9\u4e2a\u4e1c\u897f\u4e3b\u8981\u7528\u4e8e\uff0csupervisord\u7ba1\u7406\u7684\u5b50\u8fdb\u7a0b\uff0c\u8fd9\u4e2a\u5b50\u8fdb\u7a0b\u672c\u8eab\u8fd8\u6709\n\n                                 \u5b50\u8fdb\u7a0b\u3002\u90a3\u4e48\u6211\u4eec\u5982\u679c\u4ec5\u4ec5\u5e72\u6389supervisord\u7684\u5b50\u8fdb\u7a0b\u7684\u8bdd\uff0c\u5b50\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\n\n                                 \u6709\u53ef\u80fd\u4f1a\u53d8\u6210\u5b64\u513f\u8fdb\u7a0b\u3002\u6240\u4ee5\u54b1\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u53ef\u4e2a\u9009\u9879\uff0c\u628a\u6574\u4e2a\u8be5\u5b50\u8fdb\u7a0b\u7684\n\n                                 \u6574\u4e2a\u8fdb\u7a0b\u7ec4\u90fd\u5e72\u6389\u3002 \u8bbe\u7f6e\u4e3atrue\u7684\u8bdd\uff0c\u4e00\u822ckillasgroup\u4e5f\u4f1a\u88ab\u8bbe\u7f6e\u4e3atrue\u3002\n\n                                 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8be5\u9009\u9879\u53d1\u9001\u7684\u662fstop\u4fe1\u53f7\n\n                                 \u9ed8\u8ba4\u4e3afalse\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\u3002\u3002\n\n;killasgroup=false             ; \u8fd9\u4e2a\u548c\u4e0a\u9762\u7684stopasgroup\u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u53d1\u9001\u7684\u662fkill\u4fe1\u53f7\n\n;user=chrism                   ; \u5982\u679csupervisord\u662froot\u542f\u52a8\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u8bbe\u7f6e\u8fd9\u4e2a\u975eroot\u7528\u6237\uff0c\u53ef\u4ee5\u7528\u6765\n\n                                 \u7ba1\u7406\u8be5program\n\n                                 \u9ed8\u8ba4\u4e0d\u8bbe\u7f6e\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\u9879\n\n;redirect_stderr=true          ; \u5982\u679c\u4e3atrue\uff0c\u5219stderr\u7684\u65e5\u5fd7\u4f1a\u88ab\u5199\u5165stdout\u65e5\u5fd7\u6587\u4ef6\u4e2d\n\n                                 \u9ed8\u8ba4\u4e3afalse\uff0c\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;stdout_logfile=/a/path        ; \u5b50\u8fdb\u7a0b\u7684stdout\u7684\u65e5\u5fd7\u8def\u5f84\uff0c\u53ef\u4ee5\u6307\u5b9a\u8def\u5f84\uff0cAUTO\uff0cnone\u7b49\u4e09\u4e2a\u9009\u9879\u3002\n\n                                 \u8bbe\u7f6e\u4e3anone\u7684\u8bdd\uff0c\u5c06\u6ca1\u6709\u65e5\u5fd7\u4ea7\u751f\u3002\u8bbe\u7f6e\u4e3aAUTO\u7684\u8bdd\uff0c\u5c06\u968f\u673a\u627e\u4e00\u4e2a\u5730\u65b9\n\n                                 \u751f\u6210\u65e5\u5fd7\u6587\u4ef6\uff0c\u800c\u4e14\u5f53supervisord\u91cd\u65b0\u542f\u52a8\u7684\u65f6\u5019\uff0c\u4ee5\u524d\u7684\u65e5\u5fd7\u6587\u4ef6\u4f1a\u88ab\n\n                                 \u6e05\u7a7a\u3002\u5f53 redirect_stderr=true\u7684\u65f6\u5019\uff0csterr\u4e5f\u4f1a\u5199\u8fdb\u8fd9\u4e2a\u65e5\u5fd7\u6587\u4ef6\n\n;stdout_logfile_maxbytes=1MB   ; \u65e5\u5fd7\u6587\u4ef6\u6700\u5927\u5927\u5c0f\uff0c\u548c[supervisord]\u4e2d\u5b9a\u4e49\u7684\u4e00\u6837\u3002\u9ed8\u8ba4\u4e3a50\n\n;stdout_logfile_backups=10     ; \u548c[supervisord]\u5b9a\u4e49\u7684\u4e00\u6837\u3002\u9ed8\u8ba410\n\n;stdout_capture_maxbytes=1MB   ; \u8fd9\u4e2a\u4e1c\u897f\u662f\u8bbe\u5b9acapture\u7ba1\u9053\u7684\u5927\u5c0f\uff0c\u5f53\u503c\u4e0d\u4e3a0\u7684\u65f6\u5019\uff0c\u5b50\u8fdb\u7a0b\u53ef\u4ee5\u4ecestdout\n\n                                 \u53d1\u9001\u4fe1\u606f\uff0c\u800csupervisor\u53ef\u4ee5\u6839\u636e\u4fe1\u606f\uff0c\u53d1\u9001\u76f8\u5e94\u7684event\u3002\n\n                                 \u9ed8\u8ba4\u4e3a0\uff0c\u4e3a0\u7684\u65f6\u5019\u8868\u8fbe\u5173\u95ed\u7ba1\u9053\u3002\u3002\u3002\u975e\u5fc5\u987b\u9879\n\n;stdout_events_enabled=false   ; \u5f53\u8bbe\u7f6e\u4e3ature\u7684\u65f6\u5019\uff0c\u5f53\u5b50\u8fdb\u7a0b\u7531stdout\u5411\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e2d\u5199\u65e5\u5fd7\u7684\u65f6\u5019\uff0c\u5c06\n\n                                 \u89e6\u53d1supervisord\u53d1\u9001PROCESS_LOG_STDOUT\u7c7b\u578b\u7684event\n\n                                 \u9ed8\u8ba4\u4e3afalse\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;stderr_logfile=/a/path        ; \u8fd9\u4e2a\u4e1c\u897f\u662f\u8bbe\u7f6estderr\u5199\u7684\u65e5\u5fd7\u8def\u5f84\uff0c\u5f53redirect_stderr=true\u3002\u8fd9\u4e2a\u5c31\u4e0d\u7528\n\n                                 \u8bbe\u7f6e\u4e86\uff0c\u8bbe\u7f6e\u4e86\u4e5f\u662f\u767d\u642d\u3002\u56e0\u4e3a\u5b83\u4f1a\u88ab\u5199\u5165stdout_logfile\u7684\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d\n\n                                 \u9ed8\u8ba4\u4e3aAUTO\uff0c\u4e5f\u5c31\u662f\u968f\u4fbf\u627e\u4e2a\u5730\u5b58\uff0csupervisord\u91cd\u542f\u88ab\u6e05\u7a7a\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;stderr_logfile_maxbytes=1MB   ; \u8fd9\u4e2a\u51fa\u73b0\u597d\u51e0\u6b21\u4e86\uff0c\u5c31\u4e0d\u91cd\u590d\u4e86\n\n;stderr_logfile_backups=10     ; \u8fd9\u4e2a\u4e5f\u662f\n\n;stderr_capture_maxbytes=1MB   ; \u8fd9\u4e2a\u4e00\u6837\uff0c\u548cstdout_capture\u4e00\u6837\u3002 \u9ed8\u8ba4\u4e3a0\uff0c\u5173\u95ed\u72b6\u6001\n\n;stderr_events_enabled=false   ; \u8fd9\u4e2a\u4e5f\u662f\u4e00\u6837\uff0c\u9ed8\u8ba4\u4e3afalse\n\n;environment=A=\"1\",B=\"2\"       ; \u8fd9\u4e2a\u662f\u8be5\u5b50\u8fdb\u7a0b\u7684\u73af\u5883\u53d8\u91cf\uff0c\u548c\u522b\u7684\u5b50\u8fdb\u7a0b\u662f\u4e0d\u5171\u4eab\u7684\n\n;serverurl=AUTO                ; \n\n; The below sample eventlistener section shows all possible\n\n; eventlistener subsection values, create one or more 'real'\n\n; eventlistener: sections to be able to handle event notifications\n\n; sent by supervisor.\n\n;[eventlistener:theeventlistenername] ;\u8fd9\u4e2a\u4e1c\u897f\u5176\u5b9e\u548cprogram\u7684\u5730\u4f4d\u662f\u4e00\u6837\u7684\uff0c\u4e5f\u662fsuopervisor\u542f\u52a8\u7684\u5b50\u8fdb\n\n                                       \u7a0b\uff0c\u4e0d\u8fc7\u5b83\u5e72\u7684\u6d3b\u662f\u8ba2\u9605supervisord\u53d1\u9001\u7684event\u3002\u4ed6\u7684\u540d\u5b57\u5c31\u53eb\n\n                                       listener\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u5728listener\u91cc\u9762\u505a\u4e00\u7cfb\u5217\u5904\u7406\uff0c\u6bd4\u5982\u62a5\u8b66\u7b49\u7b49\n\n                                       \u697c\u4e3b\u8fd9\u4e24\u5929\u5e72\u7684\u6d3b\uff0c\u5c31\u662f\u5f04\u7684\u8fd9\u73a9\u610f\n\n;command=/bin/eventlistener    ; \u8fd9\u4e2a\u548c\u4e0a\u9762\u7684program\u4e00\u6837\uff0c\u8868\u793alistener\u7684\u53ef\u6267\u884c\u6587\u4ef6\u7684\u8def\u5f84\n\n;process_name=%(program_name)s ; \u8fd9\u4e2a\u4e5f\u4e00\u6837\uff0c\u8fdb\u7a0b\u540d\uff0c\u5f53\u4e0b\u9762\u7684numprocs\u4e3a\u591a\u4e2a\u7684\u65f6\u5019\uff0c\u624d\u9700\u8981\u3002\u5426\u5219\u9ed8\u8ba4\u5c31\n\n                                 OK\u4e86\n\n;numprocs=1                    ; \u76f8\u540c\u7684listener\u542f\u52a8\u7684\u4e2a\u6570\n\n;events=EVENT                  ; event\u4e8b\u4ef6\u7684\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u6709\u5199\u5728\u8fd9\u4e2a\u5730\u65b9\u7684\u4e8b\u4ef6\u7c7b\u578b\u3002\u624d\u4f1a\u88ab\u53d1\u9001\n\n\n\n\n\n;buffer_size=10                ; \u8fd9\u4e2a\u662fevent\u961f\u5217\u7f13\u5b58\u5927\u5c0f\uff0c\u5355\u4f4d\u4e0d\u592a\u6e05\u695a\uff0c\u697c\u4e3b\u731c\u6d4b\u5e94\u8be5\u662f\u4e2a\u5427\u3002\u5f53buffer\n\n                                 \u8d85\u8fc710\u7684\u65f6\u5019\uff0c\u6700\u65e7\u7684event\u5c06\u4f1a\u88ab\u6e05\u9664\uff0c\u5e76\u628a\u65b0\u7684event\u653e\u8fdb\u53bb\u3002\n\n                                 \u9ed8\u8ba4\u503c\u4e3a10\u3002\u3002\u975e\u5fc5\u987b\u9009\u9879\n\n;directory=/tmp                ; \u8fdb\u7a0b\u6267\u884c\u524d\uff0c\u4f1a\u5207\u6362\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6267\u884c\n\n                                 \u9ed8\u8ba4\u4e3a\u4e0d\u5207\u6362\u3002\u3002\u3002\u975e\u5fc5\u987b\n\n;umask=022                     ; \u6df9\u6ca1\uff0c\u9ed8\u8ba4\u4e3anone\uff0c\u4e0d\u8bf4\u4e86\n\n;priority=-1                   ; \u542f\u52a8\u4f18\u5148\u7ea7\uff0c\u9ed8\u8ba4-1\uff0c\u4e5f\u4e0d\u626f\u4e86\n\n;autostart=true                ; \u662f\u5426\u968fsupervisord\u542f\u52a8\u4e00\u8d77\u542f\u52a8\uff0c\u9ed8\u8ba4true\n\n;autorestart=unexpected        ; \u662f\u5426\u81ea\u52a8\u91cd\u542f\uff0c\u548cprogram\u4e00\u4e2a\u6837\uff0c\u5206true,false,unexpected\u7b49\uff0c\u6ce8\u610f\n\n                                  unexpected\u548cexitcodes\u7684\u5173\u7cfb\n\n;startsecs=1                   ; \u4e5f\u662f\u4e00\u6837\uff0c\u8fdb\u7a0b\u542f\u52a8\u540e\u8dd1\u4e86\u51e0\u79d2\u949f\uff0c\u624d\u88ab\u8ba4\u5b9a\u4e3a\u6210\u529f\u542f\u52a8\uff0c\u9ed8\u8ba41\n\n;startretries=3                ; \u5931\u8d25\u6700\u5927\u5c1d\u8bd5\u6b21\u6570\uff0c\u9ed8\u8ba43\n\n;exitcodes=0,2                 ; \u671f\u671b\u6216\u8005\u8bf4\u9884\u6599\u4e2d\u7684\u8fdb\u7a0b\u9000\u51fa\u7801\uff0c\n\n;stopsignal=QUIT               ; \u5e72\u6389\u8fdb\u7a0b\u7684\u4fe1\u53f7\uff0c\u9ed8\u8ba4\u4e3aTERM\uff0c\u6bd4\u5982\u8bbe\u7f6e\u4e3aQUIT\uff0c\u90a3\u4e48\u5982\u679cQUIT\u6765\u5e72\u8fd9\u4e2a\u8fdb\u7a0b\n\n                                 \u90a3\u4e48\u4f1a\u88ab\u8ba4\u4e3a\u662f\u6b63\u5e38\u7ef4\u62a4\uff0c\u9000\u51fa\u7801\u4e5f\u88ab\u8ba4\u4e3a\u662fexpected\u4e2d\u7684\n\n;stopwaitsecs=10               ; max num secs to wait b4 SIGKILL (default 10)\n\n;stopasgroup=false             ; send stop signal to the UNIX process group (default false)\n\n;killasgroup=false             ; SIGKILL the UNIX process group (def false)\n\n;user=chrism                   ;\u8bbe\u7f6e\u666e\u901a\u7528\u6237\uff0c\u53ef\u4ee5\u7528\u6765\u7ba1\u7406\u8be5listener\u8fdb\u7a0b\u3002\n\n                                \u9ed8\u8ba4\u4e3a\u7a7a\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;redirect_stderr=true          ; \u4e3atrue\u7684\u8bdd\uff0cstderr\u7684log\u4f1a\u5e76\u5165stdout\u7684log\u91cc\u9762\n\n                                \u9ed8\u8ba4\u4e3afalse\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;stdout_logfile=/a/path        ; \u8fd9\u4e2a\u4e0d\u8bf4\u4e86\uff0c\u597d\u51e0\u904d\u4e86\n\n;stdout_logfile_maxbytes=1MB   ; \u8fd9\u4e2a\u4e5f\u662f\n\n;stdout_logfile_backups=10     ; \u8fd9\u4e2a\u4e5f\u662f\n\n;stdout_events_enabled=false   ; \u8fd9\u4e2a\u5176\u5b9e\u662f\u9519\u7684\uff0clistener\u662f\u4e0d\u80fd\u53d1\u9001event\n\n;stderr_logfile=/a/path        ; \u8fd9\u4e2a\u4e5f\u662f\n\n;stderr_logfile_maxbytes=1MB   ; \u8fd9\u4e2a\u4e5f\u662f\n\n;stderr_logfile_backups        ; \u8fd9\u4e2a\u4e0d\u8bf4\u4e86\n\n;stderr_events_enabled=false   ; \u8fd9\u4e2a\u4e5f\u662f\u9519\u7684\uff0clistener\u4e0d\u80fd\u53d1\u9001event\n\n;environment=A=\"1\",B=\"2\"       ; \u8fd9\u4e2a\u662f\u8be5\u5b50\u8fdb\u7a0b\u7684\u73af\u5883\u53d8\u91cf\n\n                                 \u9ed8\u8ba4\u4e3a\u7a7a\u3002\u3002\u3002\u975e\u5fc5\u987b\u8bbe\u7f6e\n\n;serverurl=AUTO                ; override serverurl computation (childutils)\n\n; The below sample group section shows all possible group values,\n\n; create one or more 'real' group: sections to create \"heterogeneous\"\n\n; process groups.\n\n;[group:thegroupname]  ;\u8fd9\u4e2a\u4e1c\u897f\u5c31\u662f\u7ed9programs\u5206\u7ec4\uff0c\u5212\u5206\u5230\u7ec4\u91cc\u9762\u7684program\u3002\u6211\u4eec\u5c31\u4e0d\u7528\u4e00\u4e2a\u4e00\u4e2a\u53bb\u64cd\u4f5c\u4e86\n\n                         \u6211\u4eec\u53ef\u4ee5\u5bf9\u7ec4\u540d\u8fdb\u884c\u7edf\u4e00\u7684\u64cd\u4f5c\u3002 \u6ce8\u610f\uff1aprogram\u88ab\u5212\u5206\u5230\u7ec4\u91cc\u9762\u4e4b\u540e\uff0c\u5c31\u76f8\u5f53\u4e8e\u539f\u6765\n\n                         \u7684\u914d\u7f6e\u4ecesupervisor\u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u6d88\u5931\u4e86\u3002\u3002\u3002supervisor\u53ea\u4f1a\u5bf9\u7ec4\u8fdb\u884c\u7ba1\u7406\uff0c\u800c\u4e0d\u518d\n\n                         \u4f1a\u5bf9\u7ec4\u91cc\u9762\u7684\u5355\u4e2aprogram\u8fdb\u884c\u7ba1\u7406\u4e86\n\n;programs=progname1,progname2  ; \u7ec4\u6210\u5458\uff0c\u7528\u9017\u53f7\u5206\u5f00\n\n                                 \u8fd9\u4e2a\u662f\u4e2a\u5fc5\u987b\u7684\u8bbe\u7f6e\u9879\n\n;priority=999                  ; \u4f18\u5148\u7ea7\uff0c\u76f8\u5bf9\u4e8e\u7ec4\u548c\u7ec4\u4e4b\u95f4\u8bf4\u7684\n\n                                 \u9ed8\u8ba4999\u3002\u3002\u975e\u5fc5\u987b\u9009\u9879\n\n; The [include] section can just contain the \"files\" setting.  This\n\n; setting can list multiple files (separated by whitespace or\n\n; newlines).  It can also contain wildcards.  The filenames are\n\n; interpreted as relative to this file.  Included files *cannot*\n\n; include files themselves.\n\n;[include]                         ;\u8fd9\u4e2a\u4e1c\u897f\u633a\u6709\u7528\u7684\uff0c\u5f53\u6211\u4eec\u8981\u7ba1\u7406\u7684\u8fdb\u7a0b\u5f88\u591a\u7684\u65f6\u5019\uff0c\u5199\u5728\u4e00\u4e2a\u6587\u4ef6\u91cc\u9762\n\n                                    \u5c31\u6709\u70b9\u5927\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u914d\u7f6e\u4fe1\u606f\u5199\u5230\u591a\u4e2a\u6587\u4ef6\u4e2d\uff0c\u7136\u540einclude\u8fc7\u6765\n\n;files = relative/directory/*.ini\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/supervisor/#supervisor_1","title":"Supervisor\u63a7\u5236\u53f0","text":"<ul> <li> <p>\u5728/etc/supervisord.conf\u4e2d\u4fee\u6539[inet_http_server]\u7684\u53c2\u6570\uff0c\u5177\u4f53\u5982\u4e0b\uff1a Text Only<pre><code>[inet_http_server]         ; inet (TCP) server disabled by default\nport=*:9001                ; ip_address:port specifier, *:port for all iface\nusername=root              ; default is no username (open server)\npassword=xxxx              ; default is no password (open server)\n</code></pre></p> </li> <li> <p>\u4fee\u6539\u540e\u91cd\u542fsupervisor\u8fdb\u7a0b\uff0c\u5728\u6d4f\u89c8\u5668\u8bbf\u95ee http://:9001\u3002","tags":["Python"]},{"location":"python/pylibs/supervisor/#_9","title":"\u5206\u7ec4\u7ba1\u7406","text":"<ul> <li> <p>Supervisor \u540c\u65f6\u8fd8\u63d0\u4f9b\u4e86\u53e6\u5916\u4e00\u79cd\u8fdb\u7a0b\u7ec4\u7684\u7ba1\u7406\u65b9\u5f0f\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u4f7f\u7528 supervisorctl \u547d\u4ee4\u6765\u7ba1\u7406\u4e00\u7ec4\u8fdb\u7a0b\uff0c\u901a\u8fc7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u7684\u914d\u7f6e\uff0c\u5c06\u591a\u4e2a\u670d\u52a1\u6dfb\u52a0\u81f3\u5206\u7ec4\u4e2d Text Only<pre><code>[group:group_name]\nprograms=progname1,progname2\n</code></pre></p> </li> <li> <p>\u6ce8\u610f:</p> </li> <li>\u5f53\u6dfb\u52a0\u4e86\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cprogname1 \u548c progname2 \u7684\u8fdb\u7a0b\u540d\u5c31\u4f1a\u53d8\u6210 group_name:progname1 \u548c group_name:progname2 \u4ee5\u540e\u5c31\u8981\u7528\u8fd9\u4e2a\u540d\u5b57\u6765\u7ba1\u7406\u8fdb\u7a0b\u4e86\uff0c\u800c\u4e0d\u662f\u4e4b\u524d\u7684 progname1\u3002</li> <li>\u4ee5\u540e\u6267\u884c supervisorctl stop group_name: \u5c31\u80fd\u540c\u65f6\u7ed3\u675f progname1 \u548c progname2\uff0c\u6267\u884c supervisorctl stop group_name:progname1 \u5c31\u80fd\u7ed3\u675f progname1</li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#supervisor_2","title":"Supervisor\u914d\u7f6e\u5f00\u673a\u542f\u52a8","text":"","tags":["Python"]},{"location":"python/pylibs/supervisor/#_10","title":"\u65b9\u5f0f\u4e00\uff1a","text":"<ul> <li>Linux\u73af\u5883\u4e2d\uff1a\u4ee5systemd\u7684\u65b9\u5f0f\u7ba1\u7406</li> <li> <p>\u7f16\u5199\u542f\u52a8\u811a\u672c\uff1avim /etc/rc.d/init.d/supervisord Bash<pre><code>#!/bin/sh\n#\n# /etc/rc.d/init.d/supervisord\n#\n# Supervisor is a client/server system that\n# allows its users to monitor and control a\n# number of processes on UNIX-like operating\n# systems.\n#\n# chkconfig: - 64 36\n# description: Supervisor Server\n# processname: supervisord\n\n# Source init functions\n. /etc/rc.d/init.d/functions\n\nprog=\"supervisord\"\n\nprefix=\"/usr\"\nexec_prefix=\"${prefix}\"\nprog_bin=\"${exec_prefix}/bin/supervisord\"\nPIDFILE=\"/var/run/$prog.pid\"\n\nstart()\n{\necho -n $\"Starting $prog: \"\ndaemon $prog_bin --pidfile $PIDFILE -c /etc/supervisord.conf\n[ -f $PIDFILE ] &amp;&amp; success $\"$prog startup\" || failure $\"$prog startup\"\necho\n}\n\nstop()\n{\necho -n $\"Shutting down $prog: \"\n[ -f $PIDFILE ] &amp;&amp; killproc $prog || success $\"$prog shutdown\"\necho\n}\n\ncase \"$1\" in\n\nstart)\nstart\n;;\n\nstop)\nstop\n;;\n\nstatus)\nstatus $prog\n;;\n\nrestart)\nstop\nstart\n;;\n\n*)\necho \"Usage: $0 {start|stop|restart|status}\"\n;;\n\nesac\n</code></pre></p> </li> <li> <p>\u8bbe\u7f6e\u5f00\u673a\u542f\u52a8\u53casystemd\u65b9\u5f0f\u542f\u52a8\u3002 Bash<pre><code>sudo chmod +x /etc/rc.d/init.d/supervisord\nsudo chkconfig --add supervisord\nsudo chkconfig supervisord on\nsudo service supervisord start\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#_11","title":"\u65b9\u5f0f\u4e8c\uff1a","text":"<p>centos-7</p> <ul> <li> <p>\u8fdb\u5165 / lib/systemd/system \u76ee\u5f55\uff0c\u5e76\u521b\u5efa supervisord.service \u6587\u4ef6\u3002 Bash<pre><code>[Unit]\nDescription=supervisord\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/usr/bin/supervisord -c /etc/supervisor/supervisord.conf\nExecStop=/usr/bin/supervisorctl $OPTIONS shutdown\nExecReload=/usr/bin/supervisorctl $OPTIONS reload\nKillMode=process\nRestart=on-failure\nRestartSec=42s\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> </li> <li> <p>\u52a0\u5165\u5f00\u673a\u542f\u52a8 Bash<pre><code>chmod 766 /lib/systemd/system/supervisord.service\nsystemctl daemon-reload\nsystemctl enable supervisord.service\nsystemctl start supervisord\nsystemctl status supervisord\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#_12","title":"\u914d\u7f6e\u6848\u4f8b:","text":"","tags":["Python"]},{"location":"python/pylibs/supervisor/#django","title":"Django\u7684\u914d\u7f6e\u6587\u4ef6","text":"Text Only<pre><code>#\u9879\u76ee\u540d\n[program:django]\n#\u811a\u672c\u76ee\u5f55\ndirectory=/root/social_engineering/\n#\u811a\u672c\u6267\u884c\u547d\u4ee4\ncommand=/root/anaconda3/bin/python manage.py runserver 0.0.0.0:8000\n\n#supervisor\u542f\u52a8\u7684\u65f6\u5019\u662f\u5426\u968f\u7740\u540c\u65f6\u542f\u52a8\uff0c\u9ed8\u8ba4True\nautostart=true\n#\u5f53\u7a0b\u5e8fexit\u7684\u65f6\u5019\uff0c\u8fd9\u4e2aprogram\u4e0d\u4f1a\u81ea\u52a8\u91cd\u542f,\u9ed8\u8ba4unexpected\uff0c\u8bbe\u7f6e\u5b50\u8fdb\u7a0b\u6302\u6389\u540e\u81ea\u52a8\u91cd\u542f\u7684\u60c5\u51b5\uff0c\u6709\u4e09\u4e2a\u9009\u9879\uff0cfalse,unexpected\u548ctrue\u3002\u5982\u679c\u4e3afalse\u7684\u65f6\u5019\uff0c\u65e0\u8bba\u4ec0\u4e48\u60c5\u51b5\u4e0b\uff0c\u90fd\u4e0d\u4f1a\u88ab\u91cd\u65b0\u542f\u52a8\uff0c\u5982\u679c\u4e3aunexpected\uff0c\u53ea\u6709\u5f53\u8fdb\u7a0b\u7684\n\u9000\u51fa\u7801\u4e0d\u5728\u4e0b\u9762\u7684exitcodes\u91cc\u9762\u5b9a\u4e49\u7684\nautorestart=true\n#\u8fd9\u4e2a\u9009\u9879\u662f\u5b50\u8fdb\u7a0b\u542f\u52a8\u591a\u5c11\u79d2\u4e4b\u540e\uff0c\u6b64\u65f6\u72b6\u6001\u5982\u679c\u662frunning\uff0c\u5219\u6211\u4eec\u8ba4\u4e3a\u542f\u52a8\u6210\u529f\u4e86\u3002\u9ed8\u8ba4\u503c\u4e3a1\nstartsecs=1\n\n#\u811a\u672c\u8fd0\u884c\u7684\u7528\u6237\u8eab\u4efd \n\n#\u65e5\u5fd7\u8f93\u51fa \nstderr_logfile=/tmp/django_stderr.log\nstdout_logfile=/tmp/django_stdout.log\n#\u628astderr\u91cd\u5b9a\u5411\u5230stdout\uff0c\u9ed8\u8ba4 false\nredirect_stderr = true\n#stdout\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\uff0c\u9ed8\u8ba4 50MB\nstdout_logfile_maxbytes = 20\n#stdout\u65e5\u5fd7\u6587\u4ef6\u5907\u4efd\u6570\nstdout_logfile_backups = 20\n\n; \u53ef\u4ee5\u901a\u8fc7 environment \u6765\u6dfb\u52a0\u9700\u8981\u7684\u73af\u5883\u53d8\u91cf\uff0c\u4e00\u79cd\u5e38\u89c1\u7684\u7528\u6cd5\u662f\u4fee\u6539 PYTHONPATH\n; environment=PYTHONPATH=$PYTHONPATH:/path/to/somewhere\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/supervisor/#celery","title":"Celery\u7684\u914d\u7f6e\u6587\u4ef6","text":"Text Only<pre><code>#\u9879\u76ee\u540d\n[program:celery]\n#\u811a\u672c\u76ee\u5f55\ndirectory=/root/social_engineering/\n#\u811a\u672c\u6267\u884c\u547d\u4ee4\ncommand=/root/anaconda3/bin/celery -A tasks worker --loglevel=info\n\n#supervisor\u542f\u52a8\u7684\u65f6\u5019\u662f\u5426\u968f\u7740\u540c\u65f6\u542f\u52a8\uff0c\u9ed8\u8ba4True\nautostart=true\n#\u7a0b\u5e8f\u5d29\u6e83\u65f6\u81ea\u52a8\u91cd\u542f\nautorestart=true\n#\u8fd9\u4e2a\u9009\u9879\u662f\u5b50\u8fdb\u7a0b\u542f\u52a8\u591a\u5c11\u79d2\u4e4b\u540e\uff0c\u6b64\u65f6\u72b6\u6001\u5982\u679c\u662frunning\uff0c\u5219\u6211\u4eec\u8ba4\u4e3a\u542f\u52a8\u6210\u529f\u4e86\u3002\u9ed8\u8ba4\u503c\u4e3a1\nstartsecs=1\n\n#\u811a\u672c\u8fd0\u884c\u7684\u7528\u6237\u8eab\u4efd \n\n#\u65e5\u5fd7\u8f93\u51fa \nstderr_logfile=/tmp/celery_stderr.log\nstdout_logfile=/tmp/celery_stdout.log\n#\u628astderr\u91cd\u5b9a\u5411\u5230stdout\uff0c\u9ed8\u8ba4 false\nredirect_stderr = true\n#stdout\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\uff0c\u9ed8\u8ba4 50MB\nstdout_logfile_maxbytes = 20\n#stdout\u65e5\u5fd7\u6587\u4ef6\u5907\u4efd\u6570\nstdout_logfile_backups = 20\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/supervisor/#redis","title":"Redis\u7684\u914d\u7f6e\u6587\u4ef6","text":"Bash<pre><code>[program:zedis]\ncommand=/opt/zedis/redis-server /opt/zedis/redis.conf\nuser=redisuser\nautostart=true                              \n;\u542f\u52a8supervisord\u7684\u65f6\u5019\u4f1a\u5c06\u8be5\u914d\u7f6e\u9879\u8bbe\u7f6e\u4e3atrue\u7684\u6240\u6709\u8fdb\u7a0b\u81ea\u52a8\u542f\u52a8\nstopasgroup=true                            \n;\u4f7f\u7528supervisorctl\u505c\u6b62zedis\u65f6\uff0c\u5b50\u8fdb\u7a0b\u4e5f\u4f1a\u4e00\u8d77\u505c\u6b62\nkillasgroup=true                            \n;\u5411\u8fdb\u7a0b\u7ec4\u53d1\u9001kill\u4fe1\u53f7\uff0c\u5305\u62ec\u5b50\u8fdb\u7a0b\nstartsecs=10                                \n;\u8fdb\u7a0b\u4eceSTARING\u72b6\u6001\u8f6c\u6362\u5230RUNNING\u72b6\u6001\u6240\u9700\u8981\u4fdd\u6301\u8fd0\u884c10s\u65f6\u95f4\nstartretries=3                              \n;\u542f\u52a8\u5931\u8d25\u81ea\u52a8\u91cd\u8bd5\u6b21\u6570\uff0c\u9ed8\u8ba4\u662f3\nautorestart=true                            \n;\u8fdb\u7a0b\u505c\u6b62\u540e\u81ea\u52a8\u542f\u52a8\nstdout_logfile=/var/log/zedis-out\nstdout_logfile_maxbytes=1MB\nstdout_logfile_backups=10\nstderr_logfile=/var/log/zedis-err\nstderr_logfile_maxbytes=1MB\nstderr_logfile_backups=10\n</code></pre> <ul> <li>\u00d8 \u56e0\u4e3a\u65e0\u6cd5\u76d1\u89c6\u540e\u53f0\u8fdb\u7a0b\uff0c\u9700\u8981\u628aZedis\u524d\u53f0\u8fd0\u884c\uff08daemonize no\uff09\uff0c\u5426\u5219\u4f1a\u8bc6\u522b\u4e0d\u5230Zedis\u542f\u52a8\uff0c\u91cd\u8bd5\u542f\u52a83\u6b21,\u65e5\u5fd7\u63d0\u793a6379\u5df2\u5360\u7528\u3002</li> <li>\u00d8 \u56e0\u4e3aredis.conf\u6307\u5b9a\u4e86logfile\uff0cstdout_logfile\u5e76\u65e0\u5185\u5bb9\u8f93\u51fa\uff1b\u5982\u679c\u4e0d\u6307\u5b9aredis.conf\u53ea\u662f\u542f\u52a8redis-server\uff0c\u65e5\u5fd7\u4f1a\u8f93\u51fa\u5230stdout_logfile\u3002</li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#tomcat","title":"tomcat\u7684\u914d\u7f6e\u6587\u4ef6","text":"Bash<pre><code>[program:tomcat]\ncommand=/usr/local/tomcat/bin/catalina.sh run\nstdout_logfile=/usr/local/tomcat/logs/catalina.out\nstderr_logfile=/usr/local/tomcat/logs/catalina.out\nenvironment=JAVA_HOME=\"/usr/local/jdk1.8.0_144\",JAVA_BIN=\"/usr/local/jdk1.8.0_144/bin\"\nautorestart=false\nstartsecs=60\npriority=1\nstopasgroup=true\nkillasgroup=true\n</code></pre>","tags":["Python"]},{"location":"python/pylibs/supervisor/#_13","title":"\u5206\u7ec4\u7ba1\u7406\u7684\u914d\u7f6e\u6587\u4ef6","text":"<ul> <li>\u65b0\u5efa\u6587\u4ef6\uff0cfastapi_app.conf Text Only<pre><code>[group:fastapi]\nprograms=fastapi-app\n\n[program:fastapi-1]\ncommand=/home/python/scripts/fastapi1_app.sh\ndirectory=/home/python/fastapi-1-backend\nuser=python\nautorestart=true\nredirect_stderr=false\nloglevel=info\nstopsignal=KILL\nstopasgroup=true\nkillasgroup=true\n\n[program:fastapi-2]\ncommand=/home/python/scripts/fastapi-2.sh\ndirectory=/home/python/fastapi-2-backend\nuser=python\nautorestart=true\nredirect_stderr=false\nloglevel=info\nstopsignal=KILL\nstopasgroup=true\nkillasgroup=true\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#_14","title":"\u5e38\u89c1\u95ee\u9898\uff1a","text":"","tags":["Python"]},{"location":"python/pylibs/supervisor/#1unixtmpsupervisorsock-no-such-file","title":"\u95ee\u98981\uff1aunix:///tmp/supervisor.sock no such file\u7684\u95ee\u9898","text":"<ul> <li>\u5728supervisor\u9ed8\u8ba4\u914d\u7f6e\u4e2d\uff0c\u5176\u542f\u52a8\u7684sock\u7b49\u90fd\u4f1a\u653e\u5230tmp\u76ee\u5f55\uff0c\u800ctmp\u76ee\u5f55\u4f1a\u81ea\u52a8\u6e05\u7406\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528supervisorctl Text Only<pre><code>vim /etc/supervisord.conf\n\n#step1: \u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684tmp\u66ff\u6362\u6389\uff0c\u5426\u5219\u5bb9\u6613\u88ablinux\u81ea\u52a8\u6e05\u9664\n/tmp/supervisor.sock \u6539\u6210 /var/run/supervisor.sock\uff0c\n/tmp/supervisord.log \u6539\u6210 /var/log/supervisor.log\uff0c\n/tmp/supervisord.pid \u6539\u6210 /var/run/supervisor.pid\n\n# step2:\u4fee\u6539\u6743\u9650\uff0c\u5982\u679c\u4e0d\u4fee\u6539\uff0c\u542f\u52a8\u65f6\u4f1a\u62a5\u9519\u65e0\u6743\u9650\nsudo chmod 777 /run\nsudo chmod 777 /var/log\n\n# step3: \u521b\u5efasupervisor.sock\nsudo touch /var/run/supervisor.sock\nsudo chmod 777 /var/run/supervisor.sock\n\n# step4: \u6740\u6389\u539f\u6765\u7684\u8fdb\u7a0b\uff0c\u91cd\u65b0\u542f\u52a8\nsupervisord -c /etc/supervisord.conf\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#2commandsupervisor","title":"\u95ee\u98982\uff1acommand\u4e2d\u6307\u5b9a\u7684\u8fdb\u7a0b\u5df2\u7ecf\u8d77\u6765\uff0c\u4f46supervisor\u8fd8\u4e0d\u65ad\u91cd\u542f","text":"<ul> <li>command\u4e2d\u542f\u52a8\u65b9\u5f0f\u4e3a\u540e\u53f0\u542f\u52a8\uff0c\u5bfc\u81f4\u8bc6\u522b\u4e0d\u5230pid\uff0c\u7136\u540e\u4e0d\u65ad\u91cd\u542f\uff0c\u8fd9\u91cc\u4f7f\u7528\u7684\u662felasticsearch\uff0ccommand\u6307\u5b9a\u7684\u662f$path/bin/elasticsearch -d Bash<pre><code>\u89e3\u51b3\u529e\u6cd5\uff1asupervisor\u65e0\u6cd5\u68c0\u6d4b\u540e\u53f0\u542f\u52a8\u8fdb\u7a0b\u7684pid\uff0c\u800csupervisor\u672c\u8eab\u5c31\u662f\u540e\u53f0\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\uff0c\u56e0\u6b64\u4e0d\u7528\u62c5\u5fc3\u8fd9\u4e2a\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pylibs/supervisor/#3supervisord","title":"\u95ee\u98983\uff1a\u542f\u52a8\u4e86\u591a\u4e2asupervisord\u670d\u52a1\uff0c\u5bfc\u81f4\u65e0\u6cd5\u6b63\u5e38\u5173\u95ed\u670d\u52a1","text":"<ul> <li>\u5728\u8fd0\u884csupervisord -c /etc/supervisord.conf\u4e4b\u524d\uff0c\u76f4\u63a5\u8fd0\u884c\u8fc7supervisord -c /etc/supervisord.d/xx.conf\u5bfc\u81f4\u6709\u4e9b\u8fdb\u7a0b\u88ab\u591a\u4e2asuperviord\u7ba1\u7406\uff0c\u65e0\u6cd5\u6b63\u5e38\u5173\u95ed\u8fdb\u7a0b Bash<pre><code>\u89e3\u51b3\u529e\u6cd5\uff1a\u4f7f\u7528ps -fe | grep supervisord\u67e5\u770b\u6240\u6709\u542f\u52a8\u8fc7\u7684supervisord\u670d\u52a1\uff0ckill\u76f8\u5173\u7684\u8fdb\u7a0b\u3002\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pysyntax/asyncio/","title":"Python\u4e2d\u7684Asyncio","text":"","tags":["Python"]},{"location":"python/pysyntax/asyncio/#_1","title":"\u6982\u5ff5\uff1a","text":"<p>\u5e76\u53d1\u7f16\u7a0b\u6a21\u578b\uff1a - \u591a\u7ebf\u7a0b/\u591a\u8fdb\u7a0b\u6a21\u578b - \u534f\u7a0b\u6a21\u578b</p> <p>\u5355\u7ebf\u7a0b+\u5f02\u6b65I/O\uff1a\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u5bf9I/O\u64cd\u4f5c\u7684\u6539\u8fdb\u4e2d\u6700\u4e3a\u91cd\u8981\u7684\u5c31\u662f\u652f\u6301\u5f02\u6b65I/O\u3002 \u5982\u679c\u5145\u5206\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u5f02\u6b65I/o\u652f\u6301\uff0c\u5c31\u53ef\u4ee5\u5229\u7528\u5355\u7ebf\u7a0b\u6a21\u578b\u6765\u6267\u884c\u591a\u4efb\u52a1\uff0c\u8fd9\u79cd\u5168\u65b0\u7684\u6a21\u578b\u79f0\u4e3a\u4e8b\u4ef6\u9a71\u52a8\u6a21\u578b\u3002 Nginx\uff1a\u5c31\u662f\u652f\u6301\u5f02\u6b65I/O\u7684web\u670d\u52a1\u5668\uff0c\u5b83\u5728\u5355\u6838CPU\u4e0a\u91c7\u7528\u5355\u8fdb\u7a0b\u6a21\u578b\u5c31\u53ef\u4ee5\u9ad8\u6548\u652f\u6301\u591a\u4efb\u52a1\uff0c\u5728\u591a\u6838CPU\u4e0a\uff0c\u53ef\u4ee5\u8fd0\u884c\u591a\u4e2a\u8fdb\u7a0b\uff08\u6570\u91cf\u4e0eCPU\u6838\u6570\u76f8\u540c\uff09\uff0c\u5145\u5206\u5229\u7528\u591a\u6838CPU\u3002</p> <p>\u5728python\u4e2d\uff1a \u5355\u7ebf\u7a0b+\u5f02\u6b65I/O\u7684\u7f16\u7a0b\u6a21\u578b\u79f0\u4e3a\u534f\u7a0b\uff0c\u6709\u4e86\u534f\u7a0b\u7684\u652f\u6301\uff0c\u5c31\u53ef\u4ee5\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7f16\u5199\u9ad8\u6548\u591a\u4efb\u52a1\u7a0b\u5e8f\u3002</p> <p>\u4e8b\u4ef6\u5faa\u73af\uff1a\u542f\u52a8\u4e00\u4e2a\u7edf\u4e00\u7684\u8c03\u5ea6\u5668\uff0c\u8ba9\u8c03\u5ea6\u5668\u6765\u51b3\u5b9a\u4e00\u4e2a\u65f6\u523b\u53bb\u8fd0\u884c\u54ea\u4e2a\u4efb\u52a1\uff0c\u4e8e\u662f\u7701\u5374\u4e86\u591a\u7ebf\u7a0b\u4e2d\u542f\u52a8\u7ebf\u7a0b\u3001\u7ba1\u7406\u7ebf\u7a0b\u3001\u540c\u6b65\u9501\u7b49\u5404\u79cd\u5f00\u9500\u3002</p> <p>\u6838\u5fc3\uff1a</p> <ul> <li>\u662f\u4e00\u79cd\u5355\u7ebf\u7a0b+\u5f02\u6b65I/O\u7684\u7f16\u7a0b\u6a21\u578b\u3002</li> <li>\u534f\u7a0b\u662f\u5b9e\u73b0\u7f16\u53d1\u7f16\u7a0b\u7684\u4e00\u79cd\u65b9\u5f0f\u3002</li> </ul> <p>\u4f18\u70b9\uff1a</p> <ul> <li>\u534f\u7a0b\u6700\u5927\u7684\u4f18\u52bf\u662f\u63d0\u9ad8\u4e86\u6267\u884c\u6548\u7387</li> <li>\u6ca1\u6709\u7ebf\u7a0b\u5207\u6362\u7684\u5f00\u9500\uff1a\u5b50\u7a0b\u5e8f\u7684\u5207\u6362\u4e0d\u662f\u7ebf\u7a0b\u5207\u6362\uff0c\u800c\u662f\u7531\u7a0b\u5e8f\u81ea\u8eab\u63a7\u5236\uff0c</li> <li>\u4e0d\u9700\u8981\u591a\u7ebf\u7a0b\u7684\u9501\u673a\u5236\uff1a\u56e0\u4e3a\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u4e5f\u5c31\u4e0d\u5b58\u5728\u540c\u65f6\u5199\u53d8\u91cf\u51b2\u7a81\uff0c\u5728\u534f\u7a0b\u4e2d\u63a7\u5236\u5171\u4eab\u8d44\u6e90\u4e0d\u7528\u52a0\u9501\uff0c\u53ea\u60f3\u8981\u5224\u65ad\u72b6\u6001\u5c31\u597d\u3002</li> <li>\u5982\u679c\u60f3\u5145\u5206\u5229\u7528CPU\u591a\u6838\u7279\u6027</li> <li>\u6700\u7b80\u5355\u7684\u65b9\u5f0f\uff1a\u591a\u8fdb\u7a0b+ \u534f\u7a0b\uff0c\u65e2\u5145\u5206\u5229\u7528\u4e86\u591a\u6838\uff0c\u53c8\u5145\u5206\u53d1\u6325\u4e86\u534f\u7a0b\u7684\u9ad8\u6548\u7387</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/asyncio/#_2","title":"\u534f\u7a0b\u5b9e\u73b0\u65b9\u6cd5","text":"","tags":["Python"]},{"location":"python/pysyntax/asyncio/#_3","title":"\u65b9\u5f0f\u4e00\uff1a\u751f\u6210\u5668\uff1a","text":"<ul> <li>\u662fpython2\u65f6\u4ee3\u5b9e\u73b0\u534f\u7a0b\u7684\u65b9\u6cd5</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/asyncio/#asyncioasyncawait","title":"\u65b9\u6cd5\u4e8c\uff1aasyncio\u548casync/await\u65b9\u6cd5","text":"<ul> <li>python3.7\u4ee5\u540e\u624d\u652f\u6301</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/asyncio/#asyncio","title":"asyncio\u5b9e\u73b0\u539f\u7406\u5206\u6790","text":"","tags":["Python"]},{"location":"python/pysyntax/asyncio/#_4","title":"\u6838\u5fc3\uff1a","text":"<ul> <li>async</li> <li>\u4fee\u9970\u8bcd\uff0c\u58f0\u660e\u5f02\u6b65\u51fd\u6570</li> <li>\u8c03\u7528\u5f02\u6b65\u51fd\u6570\uff0c\u4f1a\u5f97\u5230\u4e00\u4e2a\u534f\u7a0b\u5bf9\u8c61\uff08coroutime object\uff09,\u4f46\u4e0d\u4f1a\u771f\u6b63\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\u3002</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/asyncio/#_5","title":"\u534f\u7a0b\u7684\u6267\u884c\u65b9\u6cd5","text":"<ul> <li>\u65b9\u5f0f\u4e00\uff1aawait\u8c03\u7528</li> <li>\u672c\u8d28\u662f\u540c\u6b65\u8c03\u7528</li> <li>\u8c03\u7528await\uff0c\u6267\u884c\u6548\u679c\u548cpython\u6b63\u5e38\u6267\u884c\u4e00\u6837\uff0c\u7a0b\u5e8f\u4f1a\u963b\u585e\u5728\u8fd9\u91cc\uff0c\u5177\u4f53\u7ec6\u8282\u5982\u4e0b\uff1a<ul> <li>\u8c03\u7528await,\u5f53\u524d\u6b65\u9aa4\u963b\u585e\uff0c\u8fdb\u5165\u88ab\u8c03\u7528\u7684\u534f\u7a0b\u51fd\u6570\uff0c\u6267\u884c\u5b8c\u6bd5\u8fd4\u56de\u5230\u521a\u521a\u963b\u585e\u7684\u5730\u65b9\u518d\u7ee7\u7eed\u6267\u884c\u3002</li> </ul> </li> <li>\u65b9\u5f0f\u4e8c\uff1acreate_task()\u6765\u521b\u5efa\u4efb\u52a1</li> <li>\u5f02\u6b65\u8c03\u7528\uff0cpython3.7\u540e\u624d\u6709\u7684\u7279\u6027</li> <li>\u4f7f\u7528create_task()\u521b\u5efa\u4efb\u52a1\u540e\uff0c\u4f1a\u76f4\u63a5\u5f00\u59cb\u8fdb\u884c\u8c03\u5ea6\u6267\u884c\uff0c\u800c\u4e0d\u662f\u5728\u540e\u9762\u7684await xxx\u4ee5\u540e\u5f00\u59cb\u6267\u884c<ul> <li>\u540e\u9762\u7684await\u4ec5\u4ec5\u662f\u7b49\u5019\u67d0\u4e2a\u4eba\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u3002</li> </ul> </li> <li>asyncio.gather\u8fd4\u56de\u7684\u662f\u6240\u6709\u5df2\u5b8c\u6210Task\u7684result,<ul> <li>\u4e0d\u9700\u8981\u518d\u8fdb\u884c\u8c03\u7528\u6216\u5176\u4ed6\u64cd\u4f5c\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u5168\u90e8\u7ed3\u679c</li> </ul> </li> <li>\u65b9\u5f0f\u4e09\uff1aasyncio.run()\u89e6\u53d1\u534f\u7a0b</li> <li>asyncio.run()\u51fd\u6570\u5728python3.7\u4e4b\u540e\u624d\u6709\u7684\u7279\u6027\u3002</li> <li>\u53ef\u4ee5\u8ba9\u534f\u7a0b\u63a5\u53e3\u53d8\u5f97\u975e\u5e38\u7b80\u5355\uff08\u53ef\u4ee5\u4e0d\u7528\u53bb\u7406\u4f1a\u4e8b\u4ef6\u5faa\u73af\u600e\u4e48\u5b9a\u4e49\u548c\u600e\u4e48\u4f7f\u7528\u7684\u95ee\u9898\uff09</li> <li>\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u7f16\u7a0b\u89c4\u8303\uff1a<ul> <li>\u4f7f\u7528asyncio.run()\u4f5c\u4e3a\u4e3b\u7a0b\u5e8f\u7684\u5165\u53e3\u51fd\u6570\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u5468\u671f\u5185\uff0c\u53ea\u8c03\u7528\u4e00\u6b21asyncio.run()</li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/asyncio/#_6","title":"\u534f\u7a0b\u8fd0\u884c\u65f6\u5256\u6790","text":"<p>Python<pre><code>import asyncio\n\nasync def worker_1():\n    print('worker_1 start')\n    await asyncio.sleep(1)\n    print('worker_1 done')\n\nasync def worker_2():\n    print('worker_2 start')\n    await asyncio.sleep(2)\n    print('worker_2 done')\n\nasync def main():\n    task1 = asyncio.create_task(worker_1())\n    task2 = asyncio.create_task(worker_2())\n    print('before await')\n    await task1\n    print('awaited worker_1')\n    await task2\n    print('awaited worker_2')\n\n%time asyncio.run(main())\n\n########## \u8f93\u51fa ##########\n\nbefore await\nworker_1 start\nworker_2 start\nworker_1 done\nawaited worker_1\nworker_2 done\nawaited worker_2\nWall time: 2.01 s\n</code></pre> \u8fc7\u7a0b\u5206\u6790</p> <ol> <li>asyncio.run(main())\uff0c\u7a0b\u5e8f\u8fdb\u5165 main() \u51fd\u6570\uff0c\u4e8b\u4ef6\u5faa\u73af\u5f00\u542f\uff1b</li> <li>task1 \u548c task2 \u4efb\u52a1\u88ab\u521b\u5efa\uff0c\u5e76\u8fdb\u5165\u4e8b\u4ef6\u5faa\u73af\u7b49\u5f85\u8fd0\u884c\uff1b\u8fd0\u884c\u5230 print\uff0c\u8f93\u51fa 'before await'\uff1b</li> <li>await task1 \u6267\u884c\uff0c\u7528\u6237\u9009\u62e9\u4ece\u5f53\u524d\u7684\u4e3b\u4efb\u52a1\u4e2d\u5207\u51fa\uff0c\u4e8b\u4ef6\u8c03\u5ea6\u5668\u5f00\u59cb\u8c03\u5ea6 worker_1\uff1b</li> <li>worker_1 \u5f00\u59cb\u8fd0\u884c\uff0c\u8fd0\u884c print \u8f93\u51fa'worker_1 start'\uff0c\u7136\u540e\u8fd0\u884c\u5230 await asyncio.sleep(1)\uff0c \u4ece\u5f53\u524d\u4efb\u52a1\u5207\u51fa\uff0c\u4e8b\u4ef6\u8c03\u5ea6\u5668\u5f00\u59cb\u8c03\u5ea6 worker_2\uff1b</li> <li>worker_2 \u5f00\u59cb\u8fd0\u884c\uff0c\u8fd0\u884c print \u8f93\u51fa 'worker_2 start'\uff0c\u7136\u540e\u8fd0\u884c await asyncio.sleep(2) \u4ece\u5f53\u524d\u4efb\u52a1\u5207\u51fa\uff1b</li> <li>\u4ee5\u4e0a\u6240\u6709\u4e8b\u4ef6\u7684\u8fd0\u884c\u65f6\u95f4\uff0c\u90fd\u5e94\u8be5\u5728 1ms \u5230 10ms \u4e4b\u95f4\uff0c\u751a\u81f3\u53ef\u80fd\u66f4\u77ed\uff0c\u4e8b\u4ef6\u8c03\u5ea6\u5668\u4ece\u8fd9\u4e2a\u65f6\u5019\u5f00\u59cb\u6682\u505c\u8c03\u5ea6\uff1b</li> <li>\u4e00\u79d2\u949f\u540e\uff0cworker_1 \u7684 sleep \u5b8c\u6210\uff0c\u4e8b\u4ef6\u8c03\u5ea6\u5668\u5c06\u63a7\u5236\u6743\u91cd\u65b0\u4f20\u7ed9 task_1\uff0c\u8f93\u51fa 'worker_1 done'\uff0ctask_1 \u5b8c\u6210\u4efb\u52a1\uff0c\u4ece\u4e8b\u4ef6\u5faa\u73af\u4e2d\u9000\u51fa\uff1b</li> <li>await task1 \u5b8c\u6210\uff0c\u4e8b\u4ef6\u8c03\u5ea6\u5668\u5c06\u63a7\u5236\u5668\u4f20\u7ed9\u4e3b\u4efb\u52a1\uff0c\u8f93\u51fa 'awaited worker_1'\uff0c\u00b7\u7136\u540e\u5728 await task2 \u5904\u7ee7\u7eed\u7b49\u5f85\uff1b</li> <li>\u4e24\u79d2\u949f\u540e\uff0cworker_2 \u7684 sleep \u5b8c\u6210\uff0c\u4e8b\u4ef6\u8c03\u5ea6\u5668\u5c06\u63a7\u5236\u6743\u91cd\u65b0\u4f20\u7ed9 task_2\uff0c\u8f93\u51fa 'worker_2 done'\uff0ctask_2 \u5b8c\u6210\u4efb\u52a1\uff0c\u4ece\u4e8b\u4ef6\u5faa\u73af\u4e2d\u9000\u51fa\uff1b</li> <li>\u4e3b\u4efb\u52a1\u8f93\u51fa 'awaited worker_2'\uff0c\u534f\u7a0b\u5168\u4efb\u52a1\u7ed3\u675f\uff0c\u4e8b\u4ef6\u5faa\u73af\u7ed3\u675f\u3002</li> </ol>","tags":["Python"]},{"location":"python/pysyntax/asyncio/#_7","title":"\u534f\u7a0b\u5982\u4f55\u5b9e\u73b0\u56de\u8c03\u51fd\u6570","text":"<p>python3.7+\u4e2d</p> <ul> <li>\u5bf9task\u5bf9\u8c61\u8c03\u7528add_done_callback()\u51fd\u6570\uff0c\u5373\u53ef\u7ed1\u5b9a\u7279\u5b9a\u56de\u8c03\u51fd\u6570</li> <li>\u56de\u8c03\u51fd\u6570\u63a5\u6536\u4e00\u4e2afufure\u5bf9\u8c61\uff0c\u53ef\u4ee5\u901a\u8fc7fufure.result()\u6765\u83b7\u53d6\u534f\u7a0b\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002 Python<pre><code>import asyncio\n\nasync def crawl_page(url):\n    print('crawling {}'.format(url))\n    sleep_time = int(url.split('_')[-1])\n    await asyncio.sleep(sleep_time)\n    return 'OK {}'.format(url)\n\nasync def main(urls):\n    tasks = [asyncio.create_task(crawl_page(url)) for url in urls]\n    for task in tasks:\n        task.add_done_callback(lambda future: print('result: ', future.result()))\n    await asyncio.gather(*tasks)\n\n%time asyncio.run(main(['url_1', 'url_2', 'url_3', 'url_4']))\n\n########## \u8f93\u51fa ##########\ncrawling url_1\ncrawling url_2\ncrawling url_3\ncrawling url_4\nresult:  OK url_1\nresult:  OK url_2\nresult:  OK url_3\nresult:  OK url_4\nWall time: 4 s\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pysyntax/asyncio/#_8","title":"\u603b\u7ed3\uff1a","text":"<ul> <li>\u534f\u7a0b\u548c\u591a\u7ebf\u7a0b\u7684\u533a\u522b\uff1a</li> <li>\u534f\u7a0b\u662f\u5355\u7ebf\u7a0b</li> <li>\u534f\u7a0b\u662f\u7531\u7528\u6237\u51b3\u5b9a\uff08\u5728\u54ea\u4e9b\u5730\u65b9\u4ea4\u51fa\u63a7\u5236\u6743\uff0c\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u4efb\u52a1\uff09</li> <li>\u5e94\u5bf9\u5c0f\u5e76\u53d1\u9700\u6c42\uff1a</li> <li>\u4f7f\u7528async/await \u548ccreate_task\u7ed3\u5408\u4f7f\u7528</li> <li>\u5199\u534f\u7a0b\u7a0b\u5e8f\u65f6\u9700\u8981\u6ce8\u610f\uff1a</li> <li>\u8111\u6d77\u91cc\u8981\u6e05\u6670\u77e5\u9053\u4e8b\u4ef6\u5faa\u73af\u7684\u6982\u5ff5\uff0c\u77e5\u9053\u7a0b\u5e8f\u4ec0\u4e48\u65f6\u5019\u9700\u8981\u6682\u505c\uff0c\u7b49\u5f85I/O\uff0c\u4ec0\u4e48\u65f6\u5019\u4e00\u5e76\u6267\u884c\u5230\u5e95</li> <li>\u534f\u7a0b\u5e76\u6ca1\u6709\u5229\u7528\u591a\u6838\u7279\u6027\uff0c\u53ea\u662f\u5229\u7528CPU\u7b49\u5f85\u78c1\u76d8\u6216\u7f51\u7edcI/O\u7684\u65f6\u5019\uff0c\u628a\u63a7\u5236\u6743\u4ea4\u7ed9\u5176\u4ed6\u4efb\u52a1<ul> <li>\u5982\u679c\u4e00\u4e2a\u4efb\u52a1\u4e0d\u6d89\u53ca\u5230\u78c1\u76d8\u6216\u7f51\u7edcI/O\uff0c\u534f\u7a0b\u5c31\u9000\u5316\u4e3a\u4e00\u4e2a\u5355\u7ebf\u7a0b\u7a0b\u5e8f</li> <li>\u5bf9\u4e8e\u8ba1\u7b97\u800c\u8a00\uff0c\u534f\u7a0b\u5e76\u6ca1\u6709\u63d0\u9ad8\u6548\u7387\u3002</li> <li>\u534f\u7a0b\u66f4\u591a\u7684\u662f\u5e94\u7528\u5728I/O\u573a\u666f\u4e2d</li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/closure/","title":"python\u95ed\u5305(closure)\u7528\u6cd5","text":"","tags":["Python"]},{"location":"python/pysyntax/closure/#_1","title":"\u6982\u5ff5\uff1a","text":"<p>\u5728\u51fd\u6570\u5185\u90e8\u5728\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u5e76\u8fd9\u4e2a\u51fd\u6570\u7528\u5230\u4e86\u5916\u9762\u51fd\u6570\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\u8fd9\u4e2a\u51fd\u6570\u4ee5\u53ca\u7528\u5230\u7684\u4e00\u4e9b\u53d8\u91cf\uff0c\u79f0\u4e4b\u4e3a\u95ed\u5305\uff1b\u91cc\u9762\u51fd\u6570\u7684\u4ee3\u7801\u52a0\u4e0a\u5916\u9762\u51fd\u6570\u7684\u53d8\u91cf\uff0c\u8fd9\u4e2a\u72ec\u7acb\u7684\u7a7a\u95f4\u79f0\u8fd9\u4e3a\u95ed\u5305\uff1b\u51fd\u6570\u91cc\u9762\u5d4c\u5957\u53e6\u5916\u4e00\u4e2a\u51fd\u6570\uff0c\u5f53\u8c03\u7528\u5916\u9762\u7684\u51fd\u6570\u65f6\uff0c\u91cc\u9762\u7684\u51fd\u6570\u90fd\u8981\u88ab\u6267\u884c\u4e00\u904d\uff1b</p> <ul> <li> <p>\u5916\u5c42\u53c2\u6570\u6765\u81ea\u4e0e\u51fd\u6570\u540d\u4e00\u81f4\u7684\u8c03\u7528\uff08\u5b9e\u53c2\uff09\uff0c\u53ef\u540c\u65f6\u4f20\u9012\u95ed\u5305\u5916\u7684\u51fd\u6570\u7684\u5f15\u7528\u548c\u5176\u5b83\u53c2\u6570\u591a\u4e2a\u53c2\u6570\uff08\u5f62\u53c2\uff09  </p> </li> <li> <p>\u5185\u5c42\u53c2\u6570\u6765\u81ea\u5916\u5c42\u51fd\u6570\u8c03\u7528\u5bf9\u8c61\u7684\u8c03\u7528\uff08\u5b9e\u53c2\uff09\uff0c\u540c\u65f6\u4f20\u9012\u7ed9\u95ed\u5305\u5916\u7684\u5bf9\u5e94\u51fd\u6570\u4ee5\u53ca\u5b83\u7684\u8c03\u7528\uff08\u5f62\u53c2\uff09  </p> </li> <li> <p>\u901a\u8fc7\u5916\u5c42\u4f20\u9012\u7684\u53ea\u521d\u59cb\u5316\u4e00\u6b21\uff0c\u901a\u8fc7\u5185\u5c42\u4f20\u9012\u7684\u521d\u59cb\u5316\u6b21\u6570\u4e0e\u8c03\u7528\u6b21\u6570\u4e00\u81f4\u3002\u5c31\u8ddf\u53d8\u91cf\u5728while true\u5916\u9762\u548c\u91cc\u9762\u4e00\u6837</p> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/closure/#_2","title":"\u521b\u5efa\u95ed\u5305","text":"<ul> <li>\u5fc5\u987b\u6709\u4e00\u4e2a\u5185\u5d4c\u51fd\u6570\uff1b\u5185\u5d4c\u51fd\u6570\u5fc5\u987b\u5f15\u7528\u5916\u90e8\u51fd\u6570\u7684\u53d8\u91cf\uff1b\u5916\u90e8\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5fc5\u987b\u662f\u5185\u5d4c\u51fd\u6570\uff1b</li> </ul> Python<pre><code># -------------------------demo1---------------------\ndef line(k, b):\n\n    count = 0\n\n    def create_y(x):\n        nonlocal count\n        count += 1 \n        print(f\"\u8fd9\u662f\u7b2c{count}\u6b21\u6267\u884c,\u5f53x={x}\u65f6\uff0cy={k*x+b}\")\n\n    return create_y\n\nline_1 = line(1, 2)  # \u521b\u5efa\u4e00\u4e2a\u95ed\u5305\nline_1(1)\n\n# -------------------------demo2---------------------\ndef func_closure():\n    def get_message(message):\n        print('Got a message: {}'.format(message))\n    return get_message\n\nsend_message = func_closure()\nsend_message('hello world')\n\n# \u8f93\u51fa\nGot a message: hello world\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/closure/#_3","title":"\u4f18\u7f3a\u70b9\uff1a","text":"<ul> <li>\u4f18\u70b9\uff1a</li> <li> <p>\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u7684\u590d\u7528\u6027</p> </li> <li> <p>\u53ef\u4ee5\u8ba9\u51fd\u6570\u4fdd\u5b58\u72b6\u6001\uff0c\u5e76\u5728\u591a\u6b21\u8c03\u7528\u4e4b\u95f4\u5171\u4eab\u72b6\u6001</p> </li> <li> <p>\u7f3a\u70b9\uff1a</p> </li> <li>\u7531\u4e8e\u95ed\u5305\u5f15\u7528\u4e86\u5916\u90e8\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u5916\u90e8\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u6ca1\u6709\u53ca\u65f6\u91ca\u653e\uff0c\u6d88\u8017\u5185\u5b58\u3002</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/closure/#_4","title":"\u7279\u70b9\uff1a","text":"<ul> <li>\u95ed\u5305\u7c7b\u4f3c\u4e8e\u5b9e\u4f8b\u5bf9\u8c61\u4e00\u6837\uff0c\u662f\u4e00\u4e2a\u72ec\u7acb\u7a7a\u95f4\uff0c\u591a\u4e2a\u95ed\u5305\u5c31\u662f\u591a\u4e2a\u5404\u81ea\u72ec\u7acb\u7684\u7a7a\u95f4\uff0c\u4e92\u4e0d\u5f71\u54cd\uff1b</li> <li>\u95ed\u5305\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u8981\u8fdc\u5c0f\u4e8e\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u7684\u7a7a\u95f4\uff0c\u56e0\u6b64\u5728\u9700\u8981\u4e00\u4e2a\u72ec\u7acb\u7a7a\u95f4\uff08\u9700\u8981\u53d8\u91cf+\u529f\u80fd\uff09\u65f6\uff0c\u9664\u4e86\u8003\u8651\u5b9e\u4f8b\u5bf9\u8c61\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u8003\u8651\u95ed\u5305</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/closure/#_5","title":"\u5e94\u7528\u573a\u666f","text":"<ol> <li>\u88c5\u9970\u5668\u7684\u5b9e\u73b0</li> <li>\u7f13\u5b58\u51fd\u6570\uff0c\u5c06\u8ba1\u7b97\u7ed3\u679c\u5b58\u8d77\u6765\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u7b97\u3002</li> </ol>","tags":["Python"]},{"location":"python/pysyntax/closure/#_6","title":"\u51fd\u6570\uff0c\u533f\u540d\u51fd\u6570\uff0c\u95ed\u5305\uff0c\u5bf9\u8c61 \u5f53\u505a\u5b9e\u53c2\u65f6\u7684\u533a\u522b\uff1a","text":"<ul> <li>\u533f\u540d\u51fd\u6570\u80fd\u591f\u5b8c\u6210\u57fa\u672c\u7684\u7b80\u5355\u529f\u80fd\uff0c\u4f20\u9012\u662f\u8fd9\u4e2a\u51fd\u6570\u7684\u5f15\u7528\uff0c\u53ea\u6709\u529f\u80fd</li> <li>\u666e\u901a\u51fd\u6570\u80fd\u591f\u5b8c\u6210\u8f83\u4e3a\u590d\u6742\u7684\u529f\u80fd\uff0c\u4f20\u9012\u662f\u8fd9\u4e2a\u51fd\u6570\u7684\u5f15\u7528\uff0c\u53ea\u6709\u529f\u80fd</li> <li>\u95ed\u5305\u80fd\u591f\u5b8c\u6210\u8f83\u4e3a\u590d\u6742\u7684\u529f\u80fd\uff0c\u4f20\u9012\u662f\u8fd9\u4e2a\u95ed\u5305\u4e2d\u51fd\u6570\u4ee5\u53ca\u6570\u636e\uff0c\u56e0\u6b64\u4f20\u9012\u662f\u529f\u80fd+\u6570\u636e</li> <li>\u5bf9\u8c61\u80fd\u591f\u5b8c\u6210\u6700\u4e3a\u590d\u6742\u7684\u529f\u80fd\uff0c \u4f20\u9012\u662f\u5f88\u591a\u6570\u636e+\u5f88\u591a\u529f\u80fd\uff0c\u56e0\u6b64\u4f20\u9012\u662f\u529f\u80fd+\u6570\u636e</li> </ul> Python<pre><code>def demo(temp):\n    passs\ndemo(func_name)\ndemo(lambda_name)\ndemo(closure_name)\ndemo(obj)\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/closure/#_7","title":"\u95ed\u5305\u4e0e\u51fd\u6570\u7684\u533a\u522b","text":"<ul> <li> <p>\u683c\u5f0f\u4e0a\uff1a\u95ed\u5305\u662f\u4e24\u5c42\u51fd\u6570\u7684\u5d4c\u5957</p> </li> <li> <p>\u4f5c\u7528\uff1a\u95ed\u5305\u7684\u5916\u5c42\u4e00\u5b9a\u8981\u6709\u53c2\u6570\uff0c\u4f20\u9012\u7ed9\u5185\u5c42\u4f7f\u7528\uff08\u5426\u5219\u95ed\u5305\u5c31\u6ca1\u5b58\u5728\u7684\u610f\u4e49\uff0c\u8fd8\u4e0d\u5982\u7528\u4e00\u5c42\u51fd\u6570\uff09,\u5916\u5c42\u51fd\u6570\u8fd4\u56de\u5185\u5c42\u51fd\u6570\u7684\u5f15\u7528\u3002</p> </li> <li>\u95ed\u5305\uff1a\u7b80\u5316\u51fd\u6570\uff0c\u591a\u6b21\u4f7f\u7528\u7684\u62bd\u53d6\u6210\u5916\u5c42\u51fd\u6570\u7684\u53c2\u6570\u3002</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/decorator/","title":"python\u88c5\u9970\u5668decorator\u7528\u6cd5\uff1a","text":"","tags":["Python"]},{"location":"python/pysyntax/decorator/#_1","title":"\u5bf9\u88c5\u9970\u5668\u7684\u7406\u89e3\uff1a","text":"<ul> <li>\u88c5\u9970\u5668\u76ee\u7684: \u5bf9\u5df2\u6709\u51fd\u6570\u8fdb\u884c\u989d\u5916\u7684\u529f\u80fd\u6269\u5c55\uff0c</li> <li> <p>\u88c5\u9970\u5668\u672c\u8d28\u4e0a\u4e00\u4e2a\u95ed\u5305\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\u4ed6\u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\u5d4c\u5957</p> </li> <li> <p>\u88c5\u9970\u5668\u7684\u7279\u70b9:</p> <ol> <li>\u4e0d\u4fee\u6539\u5df2\u6709\u51fd\u6570\u7684\u6e90\u4ee3\u7801</li> <li>\u4e0d\u4fee\u6539\u5df2\u6709\u51fd\u6570\u7684\u8c03\u7528\u65b9\u5f0f</li> <li>\u7ed9\u4ee5\u540e\u51fd\u6570\u6dfb\u52a0\u989d\u5916\u7684\u529f\u80fd</li> </ol> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/decorator/#_2","title":"\u88c5\u9970\u5668\u7684\u4f7f\u7528\uff1a","text":"Python<pre><code># \u5b9a\u4e49\u88c5\u9970\u5668\ndef decorator(func):  # \u5982\u679c\u95ed\u5305\u51fd\u6570\u7684\u53c2\u6570\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u5e76\u4e14\u662f\u51fd\u6570\u7c7b\u578b\uff0c\u90a3\u4e48\u8fd9\u4e2a\u95ed\u5305\u51fd\u6570\u79f0\u4e3a\u88c5\u9970\u5668\n    print(\"\u88c5\u9970\u5668\u6267\u884c\u4e86\")\n    def inner():\n        # \u5728\u5185\u90e8\u51fd\u6570\u91cc\u9762\u5bf9\u5df2\u6709\u51fd\u6570\u8fdb\u884c\u88c5\u9970\n        print(\"\u5df2\u6dfb\u52a0\u767b\u9646\u9a8c\u8bc1\")\n        func()\n    return inner\n\n\n# \u88c5\u9970\u5668\u7684\u8bed\u6cd5\u7cd6\u5199\u6cd5: @\u88c5\u9970\u5668\u540d\u79f0\uff0c\u88c5\u9970\u5668\u7684\u8bed\u6cd5\u7cd6\u5c31\u662f\u5728\u88c5\u9970\u4ee5\u540e\u51fd\u6570\u7684\u65f6\u5019\u5199\u6cd5\u66f4\u52a0\u7b80\u5355\n@decorator  # comment = decorator(comment) \u88c5\u9970\u5668\u8bed\u6cd5\u7cd6\u5bf9\u8be5\u4ee3\u7801\u8fdb\u884c\u4e86\u5c01\u88c5  comment=inner\ndef comment():\n    print(\"\u53d1\u8868\u8bc4\u8bba\")\n\n# \u5df2\u6dfb\u52a0\u767b\u9646\u9a8c\u8bc1\n# \u53d1\u8868\u8bc4\u8bba\n\n# # \u8c03\u7528\u88c5\u9970\u5668\u5bf9\u5df2\u6709\u51fd\u6570\u8fdb\u884c\u88c5\u9970  \uff0c comment=inner\n# comment = decorator(comment)\n\n# \u8c03\u7528\u65b9\u5f0f\u4e0d\u53d8\ncomment()\n\n# \u88c5\u9970\u5668\u7684\u6267\u884c\u65f6\u673a\uff1a \u5f53\u5f53\u524d\u6a21\u5757\u52a0\u8f7d\u5b8c\u6210\u4ee5\u540e\uff0c\u88c5\u9970\u5668\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u5bf9\u5df2\u6709\u51fd\u6570\u8fdb\u884c\u88c5\u9970\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#_3","title":"\u88c5\u9970\u5668\u7684\u7c7b\u578b","text":"","tags":["Python"]},{"location":"python/pysyntax/decorator/#1","title":"1.\u88c5\u9970\u65e0\u53c2\u6570\u7684\u51fd\u6570","text":"Python<pre><code>from time import ctime, sleep\n\ndef timefun(func):\n    def wrapped_func():\n        print(\"%s called at %s\" % (func.__name__, ctime()))\n        func()\n    return wrapped_func\n\n@timefun\ndef foo():\n    print(\"I am foo\")\n\nfoo()\nsleep(2)\nfoo()\n\n\n# \u4e0a\u9762\u4ee3\u7801\u7406\u89e3\u88c5\u9970\u5668\u6267\u884c\u884c\u4e3a\u53ef\u7406\u89e3\u6210\n\nfoo = timefun(foo)\n# foo\u5148\u4f5c\u4e3a\u53c2\u6570\u8d4b\u503c\u7ed9func\u540e,foo\u63a5\u6536\u6307\u5411timefun\u8fd4\u56de\u7684wrapped_func\nfoo()\n# \u8c03\u7528foo(),\u5373\u7b49\u4ef7\u8c03\u7528wrapped_func()\n# \u5185\u90e8\u51fd\u6570wrapped_func\u88ab\u5f15\u7528\uff0c\u6240\u4ee5\u5916\u90e8\u51fd\u6570\u7684func\u53d8\u91cf(\u81ea\u7531\u53d8\u91cf)\u5e76\u6ca1\u6709\u91ca\u653e\n# func\u91cc\u4fdd\u5b58\u7684\u662f\u539ffoo\u51fd\u6570\u5bf9\u8c61\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#2","title":"2.\u88c5\u9970\u5e26\u6709\u53c2\u6570\u7684\u88c5\u9970\u5668","text":"Python<pre><code># \u5b9a\u4e49\u88c5\u9970\u5668\ndef decorator(func):\n    # \u4f7f\u7528\u88c5\u9970\u5668\u88c5\u9970\u5df2\u6709\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5185\u90e8\u51fd\u6570\u7684\u7c7b\u578b\u548c\u8981\u88c5\u9970\u7684\u5df2\u6709\u51fd\u6570\u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\n    def inner(a, b):\n        # \u5728\u5185\u90e8\u51fd\u6570\u5bf9\u5df2\u6709\u51fd\u6570\u8fdb\u884c\u88c5\u9970\n        print(\"\u6b63\u5728\u52aa\u529b\u6267\u884c\u52a0\u6cd5\u8ba1\u7b97\")\n        func(a, b)\n    return inner\n\n\n# \u7528\u88c5\u9970\u5668\u8bed\u6cd5\u7cd6\u65b9\u5f0f\u88c5\u9970\u5e26\u6709\u53c2\u6570\u7684\u51fd\u6570\n@decorator  #  add_num= decorator(add_num), add_num=inner\ndef add_num(num1, num2):\n    result = num1 + num2\n    print(\"\u7ed3\u679c\u4e3a:\", result)\n\nadd_num(1, 2)\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#3","title":"3.\u88c5\u9970\u4e0d\u5b9a\u957f\u53c2\u6570\u51fd\u6570 \uff08\u53ef\u89c6\u4e3a\u901a\u7528\u88c5\u9970\u5668\uff09","text":"Python<pre><code>def my_decorator(func):\n    def wrapper(*args, **kwargs):\n        print('wrapper of decorator')\n        func(*args, **kwargs)\n    return wrapper\n</code></pre> Python<pre><code># \u8be5\u88c5\u9970\u5668\u8fd8\u53ef\u4ee5\u6210\u4e3a\u662f\u901a\u7528\u7684\u88c5\u9970\u5668\ndef decorator(func):\n    # \u4f7f\u7528\u88c5\u9970\u5668\u88c5\u9970\u5df2\u6709\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5185\u90e8\u51fd\u6570\u7684\u7c7b\u578b\u548c\u8981\u88c5\u9970\u7684\u5df2\u6709\u51fd\u6570\u7684\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\n    def inner(*args, **kwargs):\n        # \u5728\u5185\u90e8\u51fd\u6570\u5bf9\u5df2\u6709\u51fd\u6570\u8fdb\u884c\u88c5\u9970\n        print(\"\u6b63\u5728\u52aa\u529b\u6267\u884c\u52a0\u6cd5\u8ba1\u7b97\")\n\n        # *args: \u628a\u5143\u7ec4\u91cc\u9762\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\uff0c\u6309\u7167\u4f4d\u7f6e\u53c2\u6570\u7684\u65b9\u5f0f\u8fdb\u884c\u4f20\u53c2\n        # **kwargs: \u628a\u5b57\u5178\u91cc\u9762\u7684\u6bcf\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u6309\u7167\u5173\u952e\u5b57\u7684\u65b9\u5f0f\u8fdb\u884c\u4f20\u53c2\n        # \u8fd9\u91cc\u5bf9\u5143\u7ec4\u548c\u5b57\u5178\u8fdb\u884c\u62c6\u5305\uff0c\u4ec5\u9650\u4e8e\u7ed3\u5408\u4e0d\u5b9a\u957f\u53c2\u6570\u7684\u51fd\u6570\u4f7f\u7528\n        num = func(*args, **kwargs)\n        return num\n\n    return inner\n\n\n@decorator  # show= decorator(show) show = inner\ndef show():\n    return \"\u54c8\u54c8\"\n\nresult = show()\nprint(result)\n\n\n# \u7528\u88c5\u9970\u5668\u8bed\u6cd5\u7cd6\u65b9\u5f0f\u88c5\u9970\u5e26\u6709\u53c2\u6570\u7684\u51fd\u6570\n@decorator  #  add_num= decorator(add_num), add_num=inner\ndef add_num(*args, **kwargs):\n    result = 0\n\n    # args: \u5143\u7ec4\u7c7b\u578b\n    # kwargs: \u5b57\u5178\u7c7b\u578b\n\n    for value in args:\n        result += value\n\n    for value in kwargs.values():\n        result += value\n\n    return result\n\nresult = add_num(1, 2)\nprint(\"\u7ed3\u679c\u4e3a:\", result)\n\n\nif __name__ == '__main__':\n    my = {\"a\":1}\n    print(**my)\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#4","title":"4.\u88c5\u9970\u6709\u8fd4\u56de\u503c\u51fd\u6570","text":"Python<pre><code>from time import ctime, sleep\n\ndef timefun(func):\n    def wrapped_func():\n        print(\"%s called at %s\" % (func.__name__, ctime()))\n        func()\n    return wrapped_func\n\n@timefun\ndef foo():\n    print(\"I am foo\")\n\n@timefun\ndef getInfo():\n    return '----hahah---'\n\nfoo()\nsleep(2)\nfoo()\n\n\nprint(getInfo())\n\nfoo called at Fri Nov  4 21:55:35 2016\nI am foo\nfoo called at Fri Nov  4 21:55:37 2016\nI am foo\ngetInfo called at Fri Nov  4 21:55:37 2016\nNone\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#5","title":"5.\u591a\u4e2a\u88c5\u9970\u5668\u5bf9\u540c\u4e00\u4e2a\u51fd\u6570\u8fdb\u884c\u88c5\u9970","text":"Python<pre><code>def add_qx(func):\n    print(\"---\u5f00\u59cb\u8fdb\u884c\u88c5\u9970\u6743\u96501\u7684\u529f\u80fd---\")\n    def call_func(*args, **kwargs):\n        print(\"---\u8fd9\u662f\u6743\u9650\u9a8c\u8bc11----\")\n        return func(*args, **kwargs)\n    return call_func\n\n\ndef add_xx(func):\n    print(\"---\u5f00\u59cb\u8fdb\u884c\u88c5\u9970xxx\u7684\u529f\u80fd---\")\n    def call_func(*args, **kwargs):\n        print(\"---\u8fd9\u662fxxx\u7684\u529f\u80fd----\")\n        return func(*args, **kwargs)\n    return call_func\n\n\n@add_qx\n@add_xx\ndef test1():\n    print(\"------test1------\")\n\n\ntest1()\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#6","title":"6.\u540c\u4e00\u4e2a\u88c5\u9970\u5668\u5bf9\u591a\u4e2a\u51fd\u6570\u8fdb\u884c\u88c5\u9970","text":"Python<pre><code>def set_func(func):\n    def call_func(a):\n        print(\"---\u8fd9\u662f\u6743\u9650\u9a8c\u8bc11----\")\n        print(\"---\u8fd9\u662f\u6743\u9650\u9a8c\u8bc12----\")\n        func(a)\n    return call_func\n\n\n@set_func  # \u76f8\u5f53\u4e8e test1 = set_func(test1)\ndef test1(num):\n    print(\"-----test1----%d\" % num)\n\n\n@set_func  # \u76f8\u5f53\u4e8e test2 = set_func(test2)\ndef test2(num):\n    print(\"-----test2----%d\" % num)\n\n\ntest1(100)\ntest2(200)\n\n\u88c5\u9970\u5668\u5728\u8c03\u7528\u51fd\u6570\u4e4b\u524d\uff0c\u5df2\u7ecf\u88abpython\u89e3\u91ca\u5668\u6267\u884c\u4e86\uff0c\u6240\u4ee5\u8981\u7262\u8bb0\u5f53\u8c03\u7528\u51fd\u6570\u4e4b\u524d \u5176\u5b9e\u5df2\u7ecf\u88c5\u9970\u597d\u4e86\uff0c\u5c3d\u7ba1\u8c03\u7528\u5c31\u53ef\u4ee5\u4e86\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#7","title":"7.\u591a\u4e2a\u88c5\u9970\u5668\u7684\u4f7f\u7528","text":"Python<pre><code>def make_div(func):\n    print(\"make_div\u88c5\u9970\u5668\u6267\u884c\u4e86\")\n\n    def inner():\n        # \u5728\u5185\u90e8\u51fd\u6570\u5bf9\u5df2\u6709\u51fd\u6570\u8fdb\u884c\u88c5\u9970\n        result = \"&lt;div&gt;\" + func() + \"&lt;/div&gt;\"\n        return result\n\n    return inner\n\n\n# \u5b9a\u4e49\u88c5\u9970\u5668\ndef make_p(func):\n    print(\"make_p\u88c5\u9970\u5668\u6267\u884c\u4e86\")\n\n    def inner():\n        # \u5728\u5185\u90e8\u51fd\u6570\u5bf9\u5df2\u6709\u51fd\u6570\u8fdb\u884c\u88c5\u9970\n        result = \"&lt;p&gt;\" + func() + \"&lt;/p&gt;\"\n        return result\n\n    return inner\n\n# \u591a\u4e2a\u88c5\u9970\u5668\u7684\u88c5\u9970\u8fc7\u7a0b: \u7531\u5185\u5230\u5916\u7684\u4e00\u4e2a\u88c5\u9970\u8fc7\u7a0b\uff0c\u5148\u6267\u884c\u5185\u90e8\u7684\u88c5\u9970\u5668\uff0c\u5728\u6267\u884c\u5916\u90e8\u7684\u88c5\u9970\u5668\n# \u539f\u7406\u5256\u6790: content = make_div(make_p(content))\n# \u5206\u6b65\u62c6\u89e3: content = make_p(content),\u5185\u90e8\u88c5\u9970\u5668\u88c5\u5b8c\u6210content=make_p.inner\n#  content = make_div(make_p.inner)\n@make_div\n@make_p\ndef content():\n    return \"\u4eba\u751f\u82e6\u77ed\uff0c\u6211\u7528python!\"\n\n# &lt;p&gt;\u4eba\u751f\u82e6\u77ed\uff0c\u6211\u7528python!&lt;/p&gt;\nresult = content()\nprint(result)\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#8","title":"8.\u7c7b\u88c5\u9970\u5668","text":"<ul> <li>\u7c7b\u88c5\u9970\u5668\u4e3b\u8981\u4f9d\u8d56\u4e8e\u51fd\u6570__call__()\uff0c\u6bcf\u5f53\u8c03\u7528\u4e00\u4e2a\u7c7b\u7684\u793a\u4f8b\u65f6\uff0c\u51fd\u6570__call__()\u5c31\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\u3002</li> </ul> Python<pre><code>class Count:\n    def __init__(self, func):\n        self.func = func\n        self.num_calls = 0\n\n    def __call__(self, *args, **kwargs):\n        self.num_calls += 1\n        print('num of calls is: {}'.format(self.num_calls))\n        return self.func(*args, **kwargs)\n\n@Count\ndef example():\n    print(\"hello world\")\n\nexample()\n\n# \u8f93\u51fa\nnum of calls is: 1\nhello world\n\nexample()\n\n# \u8f93\u51fa\nnum of calls is: 2\nhello world\n\n...\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#9","title":"9.\u5e26\u81ea\u5b9a\u4e49\u53c2\u6570\u7684\u88c5\u9970\u5668","text":"Python<pre><code>def repeat(num):\n    def my_decorator(func):\n        def wrapper(*args, **kwargs):\n            for i in range(num):\n                print('wrapper of decorator')\n                func(*args, **kwargs)\n        return wrapper\n    return my_decorator\n\n\n@repeat(4)\ndef greet(message):\n    print(message)\n\ngreet('hello world')\n\n# \u8f93\u51fa\uff1a\nwrapper of decorator\nhello world\nwrapper of decorator\nhello world\nwrapper of decorator\nhello world\nwrapper of decorator\nhello world\n\n# --------------------\u539f\u51fd\u6570\u5df2\u4e0d\u662f\u539f\u6765\u7684\u51fd\u6570------------------------------\ngreet.__name__\n## \u8f93\u51fa\n'wrapper'\n\nhelp(greet)\n# \u8f93\u51fa\nHelp on function wrapper in module __main__:\n\nwrapper(*args, **kwargs)\n</code></pre> <ul> <li> <p>\u95ee\u9898\uff1a</p> </li> <li> <ul> <li>\u4e0a\u8ff0\u5199\u6cd5\uff0c\u88ab\u88c5\u9970\u5668\u88c5\u9970\u8fc7\u7684\u51fd\u6570\uff0c\u5b83\u7684\u5143\u4fe1\u606f\u5df2\u4fee\u6539\uff0c\u539f\u56e0\u662fgreet() \u51fd\u6570\uff0c\u800c\u662f\u88ab wrapper() \u51fd\u6570\u53d6\u4ee3\u4e86</li> </ul> </li> <li> <p>\u89e3\u51b3\u65b9\u5f0f\uff1a</p> </li> <li> <ul> <li>\u4f7f\u7528\u5185\u7f6e\u88c5\u9970\u5668@functools.wrap,\u5b83\u4f1a\u5e2e\u52a9\u4fdd\u7559\u539f\u51fd\u6570\u7684\u5143\u4fe1\u606f\uff08\u4e5f\u5c31\u662f\u5c06\u539f\u6765\u7684\u5143\u4fe1\u606f\uff0c\u62f7\u8d1d\u5230\u5bf9\u5e94\u7684\u88c5\u9970\u5668\u51fd\u6570\u91cc\uff09</li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/decorator/#_4","title":"\u88c5\u9970\u5668\u7684\u5e94\u7528\u573a\u666f\uff1a","text":"<ul> <li>\u65e5\u5fd7\u8bb0\u5f55</li> <li>\u51fd\u6570\u6267\u884c\u65f6\u95f4\u7edf\u8ba1</li> <li>\u6267\u884c\u51fd\u6570\u524d\u9884\u5907\u5904\u7406\uff08\u8f93\u5165\u5408\u7406\u6027\u68c0\u67e5\uff09</li> <li>\u6267\u884c\u51fd\u6570\u540e\u6e05\u7406\u529f\u80fd</li> <li>\u6743\u9650\u6821\u9a8c/\u8eab\u4efd\u8ba4\u8bc1</li> <li>\u7f13\u5b58</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/decorator/#_5","title":"\u8eab\u4efd\u8ba4\u8bc1","text":"Python<pre><code>import functools\n\ndef authenticate(func):\n    @functools.wraps(func)\n    def wrapper(*args, **kwargs):\n        request = args[0]\n        if check_user_logged_in(request): # \u5982\u679c\u7528\u6237\u5904\u4e8e\u767b\u5f55\u72b6\u6001\n            return func(*args, **kwargs) # \u6267\u884c\u51fd\u6570post_comment() \n        else:\n            raise Exception('Authentication failed')\n    return wrapper\n\n@authenticate\ndef post_comment(request, ...)\n    ...\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#_6","title":"\u65e5\u5fd7\u8bb0\u5f55","text":"Python<pre><code>import time\nimport functools\n\ndef log_execution_time(func):\n    @functools.wraps(func)\n    def wrapper(*args, **kwargs):\n        start = time.perf_counter()\n        res = func(*args, **kwargs)\n        end = time.perf_counter()\n        print('{} took {} ms'.format(func.__name__, (end - start) * 1000))\n        return res\n    return wrapper\n\n@log_execution_time\ndef calculate_similarity(items):\n    ...\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#_7","title":"\u8f93\u5165\u5408\u7406\u6027\u68c0\u67e5","text":"Python<pre><code>import functools\n\ndef validation_check(input):\n    @functools.wraps(func)\n    def wrapper(*args, **kwargs): \n        ... # \u68c0\u67e5\u8f93\u5165\u662f\u5426\u5408\u6cd5\n\n@validation_check\ndef neural_network_training(param1, param2, ...):\n    ...\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/decorator/#_8","title":"\u7f13\u5b58","text":"<ul> <li> <ul> <li>LRU cache\uff0c\u5728 Python \u4e2d\u7684\u8868\u793a\u5f62\u5f0f\u662f@lru_cache\u3002@lru_cache\u4f1a\u7f13\u5b58\u8fdb\u7a0b\u4e2d\u7684\u51fd\u6570\u53c2\u6570\u548c\u7ed3\u679c\uff0c\u5f53\u7f13\u5b58\u6ee1\u4e86\u4ee5\u540e\uff0c\u4f1a\u5220\u9664 least recenly used \u7684\u6570\u636e\u3002</li> </ul> </li> </ul> Python<pre><code>@lru_cache\ndef check(param1, param2, ...) # \u68c0\u67e5\u7528\u6237\u8bbe\u5907\u7c7b\u578b\uff0c\u7248\u672c\u53f7\u7b49\u7b49\n    ...\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/deep_copy/","title":"python\u4e2d\u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d","text":"<p>\u6d45\u62f7\u8d1d\uff1a\u4e0d\u53ef\u53d8\u7684\u4e0d\u53ef\u53d8\uff0c\u53ef\u53d8\u7684\u4f9d\u65e7\u53ef\u53d8 \u6df1\u62f7\u8d1d\uff1a\u90fd\u4e0d\u53ef\u53d8</p>","tags":["Python"]},{"location":"python/pysyntax/deep_copy/#_1","title":"\u6982\u5ff5\uff1a","text":"<ul> <li>\u6d45\u62f7\u8d1d\uff08Shallow copy\uff09:</li> <li>\u62f7\u8d1d\u540e\uff0c\u91cd\u65b0\u5206\u914d\u4e86\u4e00\u5757\u5185\u5b58\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u91cc\u9762\u7684\u5143\u7d20\u662f\u539f\u5bf9\u8c61\u7684\u5b50\u5bf9\u8c61\u7684\u5f15\u7528\u3002<ul> <li>\u5982\u679c\u539f\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u4e0d\u53ef\u53d8\uff0c\u62f7\u8d1d\u540e\u7684\u5bf9\u8c61\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd</li> <li>\u5982\u679c\u539f\u5bf9\u8c61\u5143\u7d20\u53ef\u53d8\uff0c\u62f7\u8d1d\u540e\u7684\u5bf9\u8c61\u4e5f\u4f1a\u8ddf\u7740\u53d8\u3002</li> </ul> </li> <li>\u6df1\u62f7\u8d1d\uff08Deep copy\uff09:</li> <li>\u6df1\u62f7\u8d1d\u540e\uff0c\u91cd\u65b0\u5206\u914d\u4e00\u5757\u5185\u5b58\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u5e76\u4e14\u5c06\u539f\u6765\u5bf9\u8c61\u7684\u5143\u7d20\uff0c\u4ee5\u9012\u5f52\u7684\u65b9\u5f0f\uff0c\u901a\u8fc7\u521b\u5efa\u65b0\u7684\u5b50\u5bf9\u8c61\u62f7\u8d1d\u5230\u65b0\u5bf9\u8c61\u4e2d\u3002<ul> <li>\u65b0\u5bf9\u8c61\u4e0e\u539f\u5bf9\u8c61\u6ca1\u6709\u4efb\u4f55\u5173\u8054\u3002 Python<pre><code>l1 = [1, 2, 3]\nl2 = list(l1)\n\nl2\n[1, 2, 3]\n\nl1 == l2\nTrue\n\nl1 is l2\nFalse\n\ns1 = set([1, 2, 3])\ns2 = set(s1)\n\ns2\n{1, 2, 3}\n\ns1 == s2\nTrue\n\ns1 is s2\nFalse\n</code></pre></li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/deep_copy/#_2","title":"\u62f7\u8d1d\u65b9\u5f0f\uff1a","text":"<ul> <li>\u6d45\u62f7\u8d1d\uff1a</li> <li>\u5207\u7247\u64cd\u4f5c</li> <li>\u5de5\u5382\u51fd\u6570</li> <li> <p>copy\u6a21\u5757\u4e2d\u7684copy\u51fd\u6570 Python<pre><code># \u65b9\u5f0f\u4e00\uff1a\nl1 = [1, 2, 3]\nl2 = l1[:]\n\n# \u65b9\u5f0f\u4e8c\uff1a\nl1 = [1, 2, 3]\nl2 = list(l1)\n\n\n# \u65b9\u5f0f\u4e09\uff1a\nimport copy\nl1 = [1, 2, 3]\nl2 = copy.copy(l1)\n</code></pre></p> </li> <li> <p>\u6df1\u62f7\u8d1d\uff1a</p> </li> <li>copy\u6a21\u5757\u4e2d\u7684deepcopy\u51fd\u6570 Python<pre><code>import copy\nl1 = [[1, 2], (30, 40)]\nl2 = copy.deepcopy(l1))]\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pysyntax/deep_copy/#_3","title":"\u5b9e\u64cd\u7406\u89e3","text":"Python<pre><code>l1 = [[1, 2], (30, 40)]\nl2 = list(l1)\nl1.append(100)\nl1[0].append(3)\n\nl1\n[[1, 2, 3], (30, 40), 100]\n\nl2\n[[1, 2, 3], (30, 40)]\n\nl1[1] += (50, 60)\nl1\n[[1, 2, 3], (30, 40, 50, 60), 100]\n\nl2\n[[1, 2, 3], (30, 40)]\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/deep_copy/#_4","title":"\u62f7\u8d1d\u6ce8\u610f\u4e8b\u9879\uff1a","text":"<ul> <li>\u5bf9\u4e8e\u975e\u5bb9\u5668\u7c7b\u578b\uff08\u6570\u5b57\u3001\u5b57\u7b26\u3001\u5176\u4ed6\u2018\u539f\u5b50\u2019\u7c7b\u578b\uff09\uff0c\u6ca1\u6709\u62f7\u8d1d\u4e00\u8bf4\uff0c\u4ea7\u751f\u7684\u5bf9\u8c61\u90fd\u662f\u539f\u5bf9\u8c61\u7684\u5f15\u7528\u3002</li> <li> <p>\u5982\u679c\u5143\u7ec4\u53d8\u91cf\u503c\u5305\u542b\u539f\u5b50\u7c7b\u578b\u5bf9\u8c61\uff0c\u5373\u4f7f\u91c7\u7528\u4e86\u6df1\u62f7\u8d1d\uff0c\u4e5f\u53ea\u80fd\u5f97\u5230\u6d45\u62f7\u8d1d\u3002 Python<pre><code>t1 = (1,2,3)\nt2 = copy.deepcopy(t1)\nid(t1)\n140367323207808\nt1\nid(t1)\n140367323207808\nt1 is t2\nTrue\nt1 == t2\nTrue\n</code></pre></p> </li> <li> <p>\u5bf9\u4e8e\u6df1\u62f7\u8d1d\uff0c\u5982\u679c\u88ab\u62f7\u8d1d\u7684\u5bf9\u8c61\u4e2d\u5b58\u5728\u81ea\u8eab\u7684\u5f15\u7528\uff0c\u90a3\u4e48\u7a0b\u5e8f\u4f1a\u9677\u5165\u65e0\u9650\u5faa\u73af\uff0c\u4e14\u4f1a\u629b\u9519</p> </li> <li> <p>\u6df1\u62f7\u8d1d\u51fd\u6570\u4e2d\u4f1a\u7ef4\u62a4\u4e00\u4e2a\u5b57\u5178\uff0c\u8bb0\u5f55\u5df2\u7ecf\u62f7\u8d1d\u7684\u5bf9\u8c61\u4e0e\u5176ID\uff0c\u62f7\u8d1d\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u5b57\u5178\u4e2d\u5df2\u7ecf\u5b58\u50a8\u4e86\u8981\u62f7\u8d1d\u7684\u5bf9\u8c61\uff0c\u5219\u4f1a\u4ece\u5b57\u5178\u4e2d\u76f4\u63a5\u8fd4\u56de Python<pre><code>import copy\nx = [1]\nx.append(x)\n\nx\n[1, [...]]\n\ny = copy.deepcopy(x)\ny\n[1, [...]]\n&gt;&gt;&gt;&gt;\n---------------------------------------------------------------------------\nRecursionError                            Traceback (most recent call last)\nInput In [48], in &lt;cell line: 1&gt;()\n----&gt; 1 x == y\n\nRecursionError: maximum recursion depth exceeded in comparison\n</code></pre></p> </li> <li> <p>\u5f02\u5e38\u5206\u6790\uff1a\u56e0\u4e3ax\u662f\u4e00\u4e2a\u65e0\u9650\u5d4c\u5957\u7684\u5217\u8868\uff0cy\u6df1\u5ea6\u62f7\u8d1dx\uff0c\u4e5f\u662f\u4e00\u4e2a\u65e0\u9650\u5d4c\u5957\u7684\u5217\u8868\uff0c\u7406\u8bba\u4e0ax == y\u5e94\u8be5\u8fd4\u56deTrue,\u4f46x ==y \u5185\u90e8\u4f1a\u9012\u5f52\u904d\u5386\u5217\u8868x\u548cy\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\uff0c\u7531\u4e8e\u662f\u65e0\u9650\u5d4c\u5957\u7684\uff0c\u800cpython\u4e3a\u4e86\u9632\u6b62\u6808\u5d29\u6e83\uff0c\u9012\u5f52\u7684\u5c42\u6570\u662f\u6709\u754c\u7684\uff0c\u4e0d\u4f1a\u65e0\u4f11\u6b62\u4e0b\u53bb\uff0c\u6240\u4ee5\u629b\u51fa\u4e0a\u8ff0\u5f02\u5e38\u3002</p> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/","title":"def\u51fd\u6570\u4e0elambda\u51fd\u6570","text":"","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#_1","title":"\u51fd\u6570\u7684\u6982\u5ff5","text":"<ul> <li>\u51fd\u6570\u5c31\u662f\u4e3a\u4e86\u5b9e\u73b0\u67d0\u4e00\u529f\u80fd\u7684\u4ee3\u7801\u6bb5\uff0c\u53ea\u8981\u5199\u597d\u540e\uff0c\u5c31\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\uff1b</li> <li>\u5728python\u4e2d\uff0c\u51fd\u6570\u662f\u4e00\u7b49\u516c\u6c11\uff08friist-class citizen\uff09</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#python","title":"Python\u4e2d\u7684\u51fd\u6570\uff1a","text":"<ul> <li>def\u51fd\u6570\uff1a \u901a\u5e38\u88ab\u79f0\u4e3a\u5e38\u89c4\u51fd\u6570\uff0c</li> <li>lambda\u51fd\u6570\uff1a \u901a\u5e38\u88ab\u79f0\u4e3a\u533f\u540d\u51fd\u6570</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#def","title":"def\u51fd\u6570","text":"<ul> <li>def\u51fd\u6570\u4f7f\u7528def\u5173\u952e\u5b57\u4fee\u9970</li> <li>1.\u88abdef\u4fee\u9970\u7684\u51fd\u6570\uff0c\u5728\u88ab\u8c03\u7528\u524d\uff0c\u8be5\u51fd\u6570\u90fd\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u5f53\u7a0b\u5e8f\u8c03\u7528\u8be5\u51fd\u6570\u65f6\uff0cdef\u8bed\u53e5\u624d\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u5bf9\u8c61\uff0c\u5e76\u8d4b\u4e88\u5176\u540d\u4e00\u4e2a\u51fd\u6570\u540d.</li> <li>\u5728\u4e00\u4e2a\u51fd\u6570\u5185\u90e8\u518d\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u6b64\u65f6\uff0c\u4e0d\u540c\u51fd\u6570\u95f4\u7684\u58f0\u660e\u987a\u5e8f\u5c31\u65e0\u6240\u8c13\u4e86\uff0c\u5176\u539f\u56e0\u662f\uff0cdef\u662f\u53ef\u6267\u884c\u8bed\u53e5\uff0c\u51fd\u6570\u5728\u8c03\u7528\u4e4b\u524d\u90fd\u4e0d\u5b58\u5728\uff0c\u53ea\u9700\u8981\u4fdd\u8bc1\u8c03\u7528\u65f6\uff0c\u6240\u9700\u51fd\u6570\u90fd\u5df2\u7ecf\u58f0\u660e\u548c\u5b9a\u4e49\u3002</li> <li>\u7279\u70b9\uff1a</li> <li>\u51fd\u6570\u4e5f\u662f\u5bf9\u8c61</li> <li>\u51fd\u6570\u53ef\u4ee5\u8d4b\u4e88\u53d8\u91cf</li> <li>\u51fd\u6570\u53ef\u4ee5\u5f53\u505a\u53c2\u6570\u4f20\u7ed9\u53e6\u4e00\u4e2a\u51fd\u6570</li> <li>\u51fd\u6570\u91cc\u53ef\u4ee5\u5728\u5b9a\u4e49\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u51fd\u6570\u7684\u5d4c\u5957</li> <li>\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\u5bf9\u8c61\uff08\u95ed\u5305\uff09</li> </ul> Python<pre><code>def func(message):\n    print('Got a message: {}'.format(message))\n\nsend_message = func\nsend_message('hello world')\n\n# \u8f93\u51fa\nGot a message: hello world\n\n\ndef my_func(message):\n    my_sub_func(message) # \u8c03\u7528 my_sub_func() \u5728\u5176\u58f0\u660e\u4e4b\u524d\u4e0d\u5f71\u54cd\u7a0b\u5e8f\u6267\u884c\n\ndef my_sub_func(message):\n    print('Got a message: {}'.format(message))\n\nmy_func('hello world')\n# \u8f93\u51fa\n# Got a message: hello world\n</code></pre> <ul> <li>demo</li> </ul> Python<pre><code>def find_largest_element(l):\n    if not isinstance(l, list):\n        print('input is not type of list')\n        return\n    if len(l) == 0:\n        print('empty input')\n        return\n    largest_element = l[0]\n    for item in l:\n        if item &gt; largest_element:\n            largest_element = item\n            print('largest element is: {}'.format(largest_element))\n\n\nfind_largest_element([10, 6,-5, 3, 0])\n# \u8f93\u51fa\n# largest element is: 8\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#_2","title":"\u5d4c\u5957\u51fd\u6570","text":"<ul> <li>\u987e\u540d\u601d\u4e49\uff0c\u51fd\u6570\u91cc\u9762\u53c8\u5b9a\u4e49\u4e86\u51fd\u6570\uff0c\u5176\u4e3b\u8981\u4f5c\u7528\u662f\uff1a</li> </ul> <p>\u2460\uff0c\u4fdd\u8bc1\u5185\u90e8\u51fd\u6570\u7684\u9690\u79c1\uff0c\u5185\u90e8\u51fd\u6570\u53ea\u80fd\u88ab\u5916\u90e8\u51fd\u6570\u6240\u8c03\u7528\u548c\u8bbf\u95ee\uff0c\u4e0d\u4f1a\u66b4\u9732\u5728\u5168\u5c40\u4f5c\u7528\u57df\uff0c\u901a\u5e38\u7528\u4e8e\u5b9a\u4e49\u9690\u79c1\u6570\u636e\uff08\u5982\uff1a\u6570\u636e\u5e93\u7684\u8fde\u63a5\u4fe1\u606f\uff09</p> <p>\u2461\u5408\u7406\u7684\u4f7f\u7528\u51fd\u6570\u5d4c\u5957\uff0c\u80fd\u591f\u63d0\u9ad8\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387\u3002</p> Python<pre><code>def connect_db():\n    def get_db_config():\n        ...\n        return host, username, password\n    conn = connector.connect(get_db_config())\n    return conn\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#lambda","title":"lambda\u51fd\u6570","text":"<ul> <li>\u533f\u540d\u51fd\u6570\u7684\u683c\u5f0f</li> </ul> Python<pre><code>lambda argument1, argument2,... argumentN : expression\n\n# eg:\nsquare = lambda x: x**2\n</code></pre> <ul> <li>lambda\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f(expression)\uff0c\u5e76\u4e0d\u662f\u4e00\u4e2a\u8bed\u53e5\uff08statement\uff09</li> </ul> <p>\u8868\u8fbe\u5f0f\uff1a\u5c31\u662f\u7528\u4e00\u7cfb\u5217\u516c\u5f0f\u53bb\u8868\u8fbe\u4e00\u4e2a\u7279\u5b9a\u573a\u666f\uff0c\u5982\uff1ax**2, x+2;</p> <p>\u8bed\u53e5\uff1a\u4e00\u5b9a\u662f\u5b8c\u6210\u4e86\u67d0\u4e9b\u529f\u80fd\uff0c\u5982\u8d4b\u503c\u8bed\u53e5\u5b8c\u6210\u8d4b\u503c\uff0c\u6761\u4ef6\u8bed\u53e5\u5b8c\u6210\u9009\u62e9\u529f\u80fd\uff1b</p> <ul> <li> <p>lambda\u4e3b\u4f53\u53ea\u6709\u4e00\u884c\u7684\u7b80\u5355\u8868\u8fbe\u5f0f\uff0c\u4e0d\u652f\u6301\u591a\u884c\u7684\u4ee3\u7801\u5757</p> </li> <li> <p>lambda\u4e13\u6ce8\u7b80\u5355\u4efb\u52a1\uff0cdef\u51fd\u6570\u4e13\u6ce8\u590d\u6742\u7684\u591a\u884c\u903b\u8f91\u3002</p> </li> </ul> Python<pre><code>[(lambda x: x*x)(x) for x in range(10)]\n# \u8f93\u51fa\n[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\n\n\nl = [(1, 20), (3, 0), (9, 10), (2, -1)]\nl.sort(key=lambda x: x[1]) # \u6309\u5217\u8868\u4e2d\u5143\u7956\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\u6392\u5e8f\nprint(l)\n# \u8f93\u51fa\n[(2, -1), (3, 0), (9, 10), (1, 20)]\n</code></pre> <ul> <li>lambda\u51fd\u6570\u7684\u76ee\u7684</li> <li>\u7b80\u5316\u4ee3\u7801\u7684\u590d\u6742\u5ea6\uff0c\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#lambda_1","title":"lambda\u51fd\u6570\u4e0e\u51fd\u6570\u5f0f\u7f16\u7a0b","text":"<ul> <li>\u51fd\u6570\u5f0f\u7f16\u7a0b\uff1a\u662f\u6307\u4ee3\u7801\u4e2d\u6bcf\u4e00\u5757\u90fd\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u90fd\u662f\u7531\u7eaf\u51fd\u6570\uff08\u6307\u51fd\u6570\u672c\u8eab\u76f8\u4e92\u72ec\u7acb\uff0c\u4e92\u4e0d\u5f71\u54cd\uff0c\u5bf9\u4e8e\u76f8\u540c\u7684\u8f93\u5165\uff0c\u603b\u4f1a\u6709\u76f8\u540c\u7684\u8f93\u51fa\uff09\u7684\u5f62\u5f0f\u7ec4\u6210\uff1b</li> <li>\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u7279\u70b9\uff1a</li> <li>\u4f18\u70b9\uff1a\u4e3b\u8981\u5728\u4e8e\u7eaf\u51fd\u6570\u7684\u4e0d\u53ef\u53d8\u7279\u6027\u4f7f\u7a0b\u5e8f\u66f4\u52a0\u5065\u58ee\uff0c\u6613\u4e8e\u8c03\u8bd5\u548c\u6d4b\u8bd5\uff1b</li> <li>\u7f3a\u70b9\uff1a\u9650\u5236\u591a\uff0c\u4e0d\u597d\u5199\u3002</li> </ul> Python<pre><code># \u975e\u7eaf\u51fd\u6570\u5199\u6cd5\ndef multiply_2(l):\n    for index in range(0, len(l)):\n        l[index] *= 2\n    return l\n\n\n# \u7eaf\u51fd\u6570\u5199\u6cd5\ndef multiply_2_pure(l):\n    new_list = []\n    for item in l:\n        new_list.append(item * 2)\n    return new_list\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#python_1","title":"python\u4e2d\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u4ee3\u8868","text":"","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#mapfunction-iterable","title":"map(function, iterable)","text":"<ul> <li>\u5bf9 iterable \u4e2d\u7684\u6bcf\u4e2a \u5143\u7d20\uff0c\u90fd\u8fd0\u7528 function \u8fd9\u4e2a\u51fd\u6570\uff0c\u6700\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u53ef\u904d\u5386\u7684\u96c6\u5408\u3002</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#filterfunction-iterable","title":"filter(function, iterable)","text":"<ul> <li>\u5bf9 iterable \u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u90fd\u4f7f\u7528 function \u5224\u65ad\uff0c\u5e76\u8fd4\u56de True \u6216\u8005 False\uff0c\u6700\u540e\u5c06\u8fd4\u56de True \u7684\u5143\u7d20\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684\u53ef\u904d\u5386\u7684\u96c6\u5408\u3002</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/def_and_lambda/#reducefunction-iterable","title":"reduce(function, iterable)","text":"<ul> <li>\u901a\u5e38\u7528\u6765\u5bf9\u4e00\u4e2a\u96c6\u5408\u505a\u4e00\u4e9b\u7d2f\u79ef\u64cd\u4f5c</li> </ul> Python<pre><code>l = [1, 2, 3, 4, 5]\nnew_list = map(lambda x: x * 2, l) # [2\uff0c 4\uff0c 6\uff0c 8\uff0c 10]\n\nnew_list = filter(lambda x: x % 2 == 0, l) # [2, 4]\n\nproduct = reduce(lambda x, y: x * y, l) # 1*2*3*4*5 = 120\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/exception/","title":"python\u5f02\u5e38\u5904\u7406","text":"","tags":["Python"]},{"location":"python/pysyntax/exception/#_1","title":"\u7a0b\u5e8f\u9519\u8bef\u4e0e\u5f02\u5e38","text":"<ul> <li>\u7a0b\u5e8f\u9519\u8bef\uff1a\u901a\u5e38\u6307\u8bed\u6cd5\u9519\u8bef\uff0c\u5373\u5199\u4e86\u4e0d\u7b26\u5408\u7f16\u7a0b\u89c4\u8303\uff0c\u65e0\u6cd5\u88ab\u8bc6\u522b\u4e0e\u6267\u884c\u7684\u4ee3\u7801\uff1b\u9020\u6210\u7684\u540e\u679c\u7a0b\u5e8f\u5d29\u6e83\uff1b</li> <li>\u7a0b\u5e8f\u5f02\u5e38\uff1a\u901a\u5e38\u6307\u7a0b\u5e8f\u7684\u8bed\u6cd5\u6b63\u786e\uff0c\u53ef\u4ee5\u88ab\u6267\u884c\uff0c\u4f46\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u9047\u5230\u4e86\u9519\u8bef\uff0c\u629b\u51fa\u4e86\u5f02\u5e38\uff1b\u9020\u6210\u7684\u540e\u679c\u662f\u7a0b\u5e8f\u7ec8\u6b62\u8fd0\u884c\uff1b</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/exception/#_2","title":"\u5982\u4f55\u5904\u7406\u5f02\u5e38","text":"<p>https://docs.python.org/zh-cn/3/tutorial/errors.html</p> <ul> <li>\u5f02\u5e38\u5904\u7406\u7684\u76ee\u7684\uff1a\u5f53\u7a0b\u5e8f\u9047\u5230\u5f02\u5e38\u65f6\uff0c\u7ecf\u8fc7\u5f02\u5e38\u5904\u7406\u540e\uff0c\u4f7f\u7a0b\u5e8f\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\uff1b</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/exception/#_3","title":"\u5f02\u5e38\u5904\u7406\u8bed\u6cd5","text":"Python<pre><code>try:\n    \u4e00\u6bb5\u53ef\u80fd\u51fa\u9519\u7684\u4ee3\u7801    # \u4e00\u822c\u5bb9\u6613\u51fa\u9519\u7684\u573a\u666f\uff1a\u7f51\u7edc\u8bf7\u6c42\u3001\u8bfb\u5199\u5199\u5165\u3001\u5904\u7406\u4e0e\u5916\u90e8\u7cfb\u7edf\u7684\u4ea4\u4e92\nexcept \u5f02\u5e38\u7c7b\u578b1\uff1a\n    \u9488\u5bf9\u9519\u8bef\u7c7b\u578b1\uff0c\u5bf9\u5e94\u7684\u4ee3\u7801\u5904\u7406\nexcept \u5f02\u5e38\u7c7b\u578b2:       # \u53ea\u5904\u7406\u6240\u793a\u7684\u5f02\u5e38\n    \u5904\u7406\u72b6\u51b5\u4e00\nexcept (\u5f02\u5e38\u7c7b\u578b3, \u5f02\u5e38\u7c7b\u578b4, \u2026):\n    \u5904\u7406\u72b6\u51b5\u4e8c\nexcept\u5f02\u5e38\u7c7b\u578b as \u540d\u79f0:\n    \u5904\u7406\u72b6\u51b5\u4e09\nexcept :              # \u5904\u7406\u6240\u6709\u5f02\u5e38\u60c5\u5f62\n    \u5904\u7406\u72b6\u51b5\u56db\nelse :\n    \u672a\u53d1\u751f\u5f02\u5e38\u7684\u5904\u7406\n\ufb01nally :\n    \u6700\u540e\u4e00\u5b9a\u4f1a\u6267\u884c\u7684\u4ee3\u7801\uff0c         # \u65e0\u8bba\u524d\u9762\u4ee3\u7801\u662f\u5426\u51fa\u9519\uff0c\u6700\u540e\u4e00\u5b9a\u4f1a\u6267\u884c\u7684\u4ee3\u7801\uff0c\n    \u4f8b\u5982 f.close()                # \u5e38\u7528\u573a\u666f\u662f\u5173\u95ed\u7f51\u7edc\u3001\u5173\u95ed\u6587\u4ef6\u7b49\n</code></pre> <ul> <li>\u6848\u4f8bDemo</li> </ul> Python<pre><code>try:\n    x = int(input(\"Please enter a number: \"))\n    y = 100 / x\nexcept ValueError:\n    print(\"Error: there was an error\")\nexcept ZeroDivisionError:\n    print(\"Error: 0 is an invalid number\")\nexcept Exception:\n    print(\"Error: another error occurred\")\nfinally:\n    print(\"Cleanup can go here\")\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/exception/#_4","title":"\u629b\u51fa\u5f02\u5e38\u8bed\u6cd5","text":"Python<pre><code>try:\n    x = int(input(\"Please enter a number: \"))\n    y = 100 / x\nexcept ValueError:\n    raise(\"Error: there was an error\")\nexcept ZeroDivisionError:\n    raise(\"Error: 0 is an invalid number\")\nexcept Exception:\n    raise\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/exception/#_5","title":"\u5982\u4f55\u81ea\u5b9a\u4e49\u5f02\u5e38","text":"Python<pre><code>class CustomError(Exception): \n    def __init__(self, value): \n        self.value = value\n    def __str__(self): \n        return f\"Error: {self.value}\"\n\ntry:\n    raise CustomError(\"something went wrong\")\nexcept CustomError as e:\n    print(e)\n# prints \"Error: something went wrong\"\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/exception/#_6","title":"\u675c\u7edd\u6ee5\u7528\u5f02\u5e38\u5904\u7406","text":"<ul> <li>bad demo</li> </ul> Python<pre><code>d = {'name': 'ssw', 'age': 25}\ntry:\n value = d['five']\n ...\nexcept KeyError as err:\n print('KeyError: {}'.format(err))\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/futures/","title":"python\u4e2d\u7684Futures","text":"","tags":["Python"]},{"location":"python/pysyntax/futures/#_1","title":"\u5e76\u53d1\u5e76\u884c","text":"","tags":["Python"]},{"location":"python/pysyntax/futures/#_2","title":"\u6982\u5ff5","text":"<p>\u5e76\u53d1\uff08Concurrency\uff09\uff1a</p> <ul> <li>\u5728\u67d0\u4e2a\u7279\u5b9a\u7684\u65f6\u523b\uff0c\u5b83\u53ea\u5141\u8bb8\u6709\u4e00\u4e2a\u64cd\u4f5c\u53d1\u751f\uff0c\u53ea\u4e0d\u8fc7\u7ebf\u7a0b/\u4efb\u52a1\u4e4b\u95f4\u4f1a\u76f8\u4e92\u5207\u6362\uff0c\u77e5\u9053\u5b8c\u6210</li> <li>\u7ebf\u7a0b\uff1athreading<ul> <li>\u5bf9\u4e8ethreading,\u64cd\u4f5c\u7cfb\u7edf\u77e5\u9053\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u6240\u6709\u4fe1\u606f\uff0c\u56e0\u6b64\u5b83\u4f1a\u505a\u4e3b\u5728\u9002\u5f53\u7684\u65f6\u5019\u505a\u7ebf\u7a0b\u5207\u6362\u3002</li> <li>\u7279\u70b9\uff1a<ul> <li>\u4ee3\u7801\u5bb9\u6613\u4e66\u5199\uff0c\u7a0b\u5e8f\u5458\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u5207\u6362\u5904\u7406\u7684\u64cd\u4f5c\u3002</li> <li>\u64cd\u4f5c\u7cfb\u7edf\u5207\u6362\u7ebf\u7a0b\u7684\u64cd\u4f5c\uff0c\u6709\u53ef\u80fd\u4f1a\u51fa\u73b0race condition</li> </ul> </li> </ul> </li> <li>\u4efb\u52a1\uff1aasyncio<ul> <li>\u5207\u6362\u4efb\u52a1\u7684\u64cd\u4f5c\u7531\u7a0b\u5e8f\u5458\u51b3\u5b9a</li> <li>\u7279\u70b9\uff1a<ul> <li>\u4e3b\u7a0b\u5e8f\u60f3\u8981\u5207\u6362\u4efb\u52a1\uff0c\u5fc5\u987b\u5f97\u5230\u6b64\u4efb\u52a1\u53ef\u4ee5\u88ab\u5207\u6362\u7684\u901a\u77e5\u3002</li> <li>\u53ef\u4ee5\u907f\u514drace condition</li> </ul> </li> </ul> </li> </ul> <p>\u5e76\u884c\uff08Parallelism\uff09\uff1a</p> <ul> <li>\u540c\u4e00\u65f6\u523b\uff0c\u540c\u65f6\u53d1\u751f\u591a\u8fdb\u7a0b\uff1amulti-processing</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/futures/#_3","title":"\u5e76\u53d1\u4e0e\u5e76\u884c\u7684\u5bf9\u6bd4","text":"<ul> <li>\u5e76\u53d1\uff1a\u901a\u5e38\u7528\u4e8eI/O\u64cd\u4f5c\u9891\u7e41\u7684\u573a\u666f\uff0c\u6bd4\u5982\u8981\u4ece\u7f51\u7ad9\u4e0b\u8f7d\u591a\u4e2a\u6587\u4ef6\uff0cI/O\u64cd\u4f5c\u65f6\u95f4\u53ef\u80fd\u4f1a\u6bd4CPU\u8fd0\u884c\u5904\u7406\u65f6\u95f4\u957f\u5f97\u591a\u3002</li> <li>\u5e76\u884c\uff1a\u66f4\u591a\u7684\u662f\u5e94\u7528\u4e8eCPU heavy\u7684\u573a\u666f\uff0c\u6bd4\u5982MapReduce\u4e2d\u7684\u5e76\u884c\u8ba1\u7b97\uff0c\u4e3a\u4e86\u52a0\u5feb\u8fd0\u884c\u901f\u5ea6\uff0c\u4e00\u822c\u4f1a\u591a\u7528\u51e0\u53f0\u673a\u5668\uff0c\u591a\u4e2a\u5904\u7406\u5668\u5b8c\u6210\u3002</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/futures/#futures","title":"\u5e76\u53d1\u7f16\u7a0bFutures","text":"<ul> <li>\u6982\u5ff5</li> <li>Futures\u6a21\u5757\uff0c\u4f4d\u4e8econcurrent.futures\u548casyncio\u4e2d\uff0c\u5b83\u4eec\u90fd\u8868\u793a\u5e26\u6709\u5ef6\u8fdf\u7684\u64cd\u4f5c\u3002</li> <li>futures\u4f1a\u5c06\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\u7684\u64cd\u4f5c\u5305\u88f9\u8d77\u6765\u653e\u5230\u961f\u5217\u4e2d\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u7684\u72b6\u6001\u968f\u65f6\u53ef\u4ee5\u67e5\u8be2\uff0c\u5bf9\u4e8e\u7ed3\u679c\u6216\u8005\u5f02\u5e38\uff0c\u4e5f\u80fd\u591f\u5728\u64cd\u4f5c\u5b8c\u6210\u540e\u88ab\u83b7\u53d6</li> <li>\u63d0\u793a\uff1a</li> <li>\u901a\u5e38\u4e0d\u9700\u8981\u53bb\u8003\u8651\u521b\u5efafutures\uff0c\u8fd9\u4e9bfutures\u5e95\u5c42\u5df2\u7ecf\u5e2e\u6211\u4eec\u5904\u7406\u597d\uff0c</li> <li>\u65e5\u5e38\u5de5\u4f5c\u4e2d\uff0c\u53ea\u9700\u8981\u600e\u4e48\u53bbschedule\u8fd9\u4e9bfutures\u7684\u6267\u884c\u5c31\u597d</li> <li>futures\u91cd\u70b9</li> <li>Executor\u7c7b\uff1a<ul> <li>\u6267\u884cexecutor\u3002submit(func)\u65f6\uff0c\u4f1a\u6267\u884cfunc()\u51fd\u6570\uff0c\u5e76\u8fd4\u56de\u521b\u5efa\u597d\u7684future\u5b9e\u4f8b\uff0c\u4ee5\u4fbf\u540e\u7eed\u67e5\u8be2\u8c03\u7528</li> </ul> </li> <li>done()\u65b9\u6cd5\uff1a<ul> <li>\u8868\u793a\u76f8\u5bf9\u5e94\u7684\u64cd\u4f5c\u662f\u5426\u5b8c\u6210\uff0c<ul> <li>True:\u5b8c\u6210</li> <li>False:\u6ca1\u6709\u5b8c\u6210</li> </ul> </li> <li>done()\u662fnon-blocking\u7684\uff0c\u4f1a\u7acb\u5373\u8fd4\u56de\u7ed3\u679c</li> </ul> </li> <li>add_done_callback(fn)<ul> <li>\u8868\u793afutures\u5b8c\u6210\u540e\uff0c\u76f8\u5bf9\u5e94\u7684\u53c2\u6570\u51fd\u6570fn,\u4f1a\u88ab\u901a\u77e5\u5e76\u6267\u884c\u8c03\u7528\u3002</li> </ul> </li> <li>result()<ul> <li>\u8868\u793a\u5f53future\u5b8c\u6210\u540e\uff0c\u8fd4\u56de\u5176\u5bf9\u5e94\u7684\u7ed3\u679c\u6216\u5f02\u5e38\uff0c</li> </ul> </li> <li>as_completed(fs)<ul> <li>\u9488\u5bf9\u7ed9\u5b9a\u7684future\u8fed\u4ee3\u5668fs,\u5728\u5176\u5b8c\u6210\u540e\uff0c\u8fd4\u56de\u5b8c\u6210\u540e\u7684\u8fed\u4ee3\u5668</li> </ul> </li> </ul> Python<pre><code>def download_all(sites):\n    with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:\n        to_do = []\n        for site in sites:\n            future = executor.submit(download_one, site)\n            to_do.append(future)\n\n        for future in concurrent.futures.as_completed(to_do):  # future\u987a\u5e8f\u4e0d\u56fa\u5b9a\uff0c\u53d6\u51b3\u4e8e\u7cfb\u7edf\u7684\u8c03\u5ea6\u548c\u6bcf\u4e2afuture\u7684\u6267\u884c\u65f6\u95f4\n            future.result()\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/futures/#_4","title":"\u6ce8\u610f\uff1a","text":"<ul> <li>python\u4e2d\u7684\u4e4b\u6240\u4ee5\u540c\u4e00\u65f6\u523b\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u8fd0\u884c\uff0c\u5176\u5b9e\u662f\u7531\u5168\u5c40\u89e3\u91ca\u5668\u9501\u7684\u5b58\u5728\uff08GIL\uff09</li> <li>\u4e3a\u4e86\u89e3\u51b3race condition\u800c\u5f15\u5165\u7684</li> <li>\u5bf9\u4e8eI/O\u64cd\u4f5c\u800c\u8a00\uff0c\u5f53\u5176\u88abblock\u7684\u65f6\u5019\uff0c\u5168\u5c40\u89e3\u91ca\u5668\u9501\u4fbf\u88ab\u91ca\u653e\uff0c\u4f7f\u5176\u4ed6\u7ebf\u7a0b\u7ee7\u7eed\u6267\u884c\u3002</li> </ul> <ul> <li> <p>\u591a\u7ebf\u7a0b\uff1a Python<pre><code>def download_one(url):\n    resp = requests.get(url)\n    print(f\"Read {len(resp.content)} from {url}\")\n\ndef download_all(sites):\n    with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:\n        executor.map(download_one, sites)\n</code></pre></p> </li> <li> <p>\u591a\u8fdb\u7a0b\uff08\u5e76\u53d1\uff09 Python<pre><code>def download_one(url):\n    resp = requests.get(url)\n    print(f\"Read {len(resp.content)} from {url}\")\n\ndef download_all(sites):\n    with with futures.ProcessPoolExecutor() as executor::\n        executor.map(download_one, sites)\n</code></pre></p> </li> <li> <p>executor.map()\u548cmap()\u51fd\u6570\u7c7b\u4f3c\uff0c\u5bf9\u6bcf\u4e00\u4e2a\u5143\u7d20\uff0c\u5e76\u53d1\u8c03\u7528download_one()</p> </li> <li>\u6b64\u5904\u5f00\u4e865\u4e2a\u7ebf\u7a0b</li> <li>\u7ebf\u7a0b\u4e0d\u662f\u8d8a\u591a\u8d8a\u597d\uff0c\u7ebf\u7a0b\u7684\u521b\u5efa\u3001\u7ef4\u62a4\u3001\u5220\u9664\u4e5f\u6709\u5f00\u9500</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/generator/","title":"\u751f\u6210\u5668generator\u7528\u6cd5","text":"","tags":["Python"]},{"location":"python/pysyntax/generator/#_1","title":"\u751f\u6210\u5668\u7684\u7406\u89e3","text":"<ul> <li> <p>\u6838\u5fc3\uff1a</p> </li> <li> <ul> <li>\u751f\u6210\u5668\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8fed\u4ee3\u5668\uff0c\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff1a\u751f\u6210\u5668\u662f\u61d2\u4eba\u7248\u672c\u7684\u8fed\u4ee3\u5668</li> </ul> </li> <li>\u5728\u8c03\u7528next()\u51fd\u6570\u65f6\uff0c\u624d\u4f1a\u751f\u6210\u4e0b\u4e00\u4e2a\u53d8\u91cf</li> <li> <p>\u901a\u4fd7\u7684\u8bf4\uff0c\u53ea\u8981\u51fd\u6570\u4e2d\u6709yield\u5173\u952e\u5b57\uff0c\u5c31\u79f0\u4e3a\u662f\u751f\u6210\u5668\uff0c\u800c\u8be5\u51fd\u6570\u4e0d\u5728\u662f\u51fd\u6570</p> </li> <li> <p>\u7279\u70b9\uff1a</p> </li> <li> <ul> <li>\u751f\u6210\u5668\u5360\u7528\u5185\u5b58\u5c0f\uff0c\u53ea\u6709\u5728\u88ab\u4f7f\u7528\u65f6\u624d\u4f1a\u88ab\u8c03\u7528</li> </ul> </li> <li> <p>\u5982\u4f55\u5b9e\u73b0\uff1f</p> </li> <li> <ul> <li>\u4f7f\u7528yield\u5173\u952e\u5b57</li> </ul> </li> <li> <ul> <li> <ul> <li>\u672c\u8d28\u662f\u7a0b\u5e8f\u6267\u884c\u5230yield\uff0c\u4ece\u8fd9\u91cc\u6682\u505c\uff0c\u8df3\u51fa\u53bb\u6267\u884cnext()\u51fd\u6570\uff0cyield\u7684\u503c\u5c31\u662fnext()\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c</li> </ul> </li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/generator/#_2","title":"\u521b\u5efa\u751f\u6210\u5668\u7684\u65b9\u6cd5","text":"","tags":["Python"]},{"location":"python/pysyntax/generator/#_3","title":"\u65b9\u5f0f\u4e00\uff1a\u5c06\u5217\u8868\u6539\u4e3a\u5143\u7ec4\uff0c\u5373[ ] \u6539\u4e3a\uff08\uff09","text":"Python<pre><code>a = [i for i in range(5)]\nprint(a, type(a))\n\nb = (i for i in range(5))\nprint(b, type(b))\n\n# output:\n[0, 1, 2, 3, 4] &lt;class 'list'&gt;\n&lt;generator object &lt;genexpr&gt; at 0x7fd718146a40&gt; &lt;class 'generator'&gt;\n\n\ndef generator(k):\n    i = 1 \n    while True:\n        yield i ** k\n        i += 1\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/generator/#yield","title":"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528yield\u5173\u952e\u5b57","text":"<ul> <li>yield \u7684\u4f5c\u7528<ul> <li>\u4fdd\u5b58\u5f53\u524d\u8fd0\u884c\u72b6\u6001\uff08\u65ad\u70b9\uff09\uff0c\u7136\u540e\u6682\u505c\u6267\u884c\uff0c\u5373\u5c06\u751f\u6210\u5668\uff08\u51fd\u6570\uff09\u6302\u8d77</li> <li>\u5c06yield\u5173\u952e\u5b57\u540e\u9762\u8868\u8fbe\u5f0f\u7684\u503c\u4f5c\u4e3a\u8fd4\u56de\u503c\u8fd4\u56de\uff0c\u6b64\u65f6\u53ef\u4ee5\u7406\u89e3\u4e3a\u8d77\u5230\u4e86return\u7684\u4f5c\u7528</li> <li>\u7528for\u5faa\u73af\u8c03\u7528generator\u65f6\uff0c\u62ff\u4e0d\u5230generator\u7684return\u8bed\u53e5\u7684\u8fd4\u56de\u503c\u3002\u5982\u679c\u60f3\u8981\u62ff\u5230\u8fd4\u56de\u503c\uff0c\u5fc5\u987b\u6355\u83b7StopIteration\u9519\u8bef\uff0c\u8fd4\u56de\u503c\u5305\u542b\u5728StopIteration\u7684value\u4e2d\uff1a</li> </ul> </li> </ul> Python<pre><code>def fib(n):\n    current = 0\n    num1, num2 = 0, 1\n    while current &lt; n:\n        num = num1\n        num1, num2 = num2, num1+num2\n        current += 1\n        yield num\n    return 'done'\n\nf = fib(5)\nwhile True:\n    try:\n        ret = next(f)\n        print(ret,end=' ')\n    except StopIteration as e:\n        print(e.value)\n        break\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/generator/#_4","title":"\u5524\u9192\u751f\u6210\u5668\u7684\u65b9\u5f0f","text":"","tags":["Python"]},{"location":"python/pysyntax/generator/#next","title":"next()\u65b9\u5f0f","text":"<ul> <li>next()\u51fd\u6570\u8ba9\u751f\u6210\u5668\u4ece\u65ad\u70b9\u5904\u7ee7\u7eed\u6267\u884c <p>Python3\u4e2d\u7684\u751f\u6210\u5668\u53ef\u4ee5\u4f7f\u7528return\u8fd4\u56de\u6700\u7ec8\u8fd0\u884c\u7684\u8fd4\u56de\u503c\uff0c\u800cPython2\u4e2d\u7684\u751f\u6210\u5668\u4e0d\u5141\u8bb8\u4f7f\u7528return\u8fd4\u56de\u4e00\u4e2a\u8fd4\u56de\u503c\uff08\u5373\u53ef\u4ee5\u4f7f\u7528return\u4ece\u751f\u6210\u5668\u4e2d\u9000\u51fa\uff0c\u4f46return\u540e\u4e0d\u80fd\u6709\u4efb\u4f55\u8868\u8fbe\u5f0f\uff09\u3002</p> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/generator/#send","title":"send()\u65b9\u5f0f","text":"<ul> <li>send()\u51fd\u6570\u7684\u5524\u9192\u7684\u4e00\u4e2a\u597d\u5904\u662f\u53ef\u4ee5\u5728\u5524\u9192\u7684\u540c\u65f6\u5411\u65ad\u70b9\u5904\u4f20\u5165\u4e00\u4e2a\u9644\u52a0\u6570\u636e\u3002</li> </ul> Python<pre><code>def create_num(all_num):\n    a, b = 0, 1\n    current_num = 0\n    while current_num &lt; all_num:\n        ret = yield a\n        print(\"&gt;&gt;&gt;ret&gt;&gt;&gt;&gt;\", ret)\n        a, b = b, a+b\n        current_num += 1\n\nobj = create_num(10)\n\n# obj.send(None)  # send\u4e00\u822c\u4e0d\u4f1a\u653e\u5230\u7b2c\u4e00\u6b21\u542f\u52a8\u751f\u6210\u5668\uff0c\u5982\u679c\u975e\u8981\u8fd9\u6837\u505a \u90a3\u4e48\u4f20\u9012None\nret = next(obj)\nprint(ret)\n# send\u7684\u7ed3\u679c\u662f\u4e0b\u4e00\u6b21\u8c03\u7528yield\u65f6 yield\u540e\u9762\u7684\u503c\nret = obj.send(\"dddddd\")\nprint(ret)\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/generator/#_5","title":"\u8fed\u4ee3\u5668\u4e0e\u751f\u6210\u5668\u7684\u6bd4\u8f83","text":"<ul> <li> <p>\u8fed\u4ee3\u5668\uff1a</p> </li> <li> <ul> <li>\u5728\u521d\u59cb\u5316\u65f6\u5c31\u5b8c\u6210\u4e86\u6240\u6709\u5143\u7d20\u5728\u5185\u5b58\u4e2d\u7684\u4ea7\u751f\uff0c\u5185\u5b58\u7a7a\u95f4\u5360\u7528\u7b49\u4e8e\u5176\u5927\u5c0f\uff0c\u6545\u5360\u7528\u5185\u5b58\u5927</li> </ul> </li> <li> <p>\u8fed\u4ee3\u5668\u662f\u4e00\u4e2a\u6709\u9650\u96c6\u5408</p> </li> <li> <p>\u751f\u6210\u5668\uff1a</p> </li> <li> <ul> <li>\u5728\u521d\u59cb\u5316\u65f6\u53ea\u662f\u5b8c\u6210\u4e86\u5176\u88ab\u8c03\u7528\u884c\u4e3a\u7684\u5b9a\u4e49\uff0c\u5728\u88ab\u8c03\u7528\u65f6\u624d\u4f1a\u8fd4\u56de\u7531\u65b9\u6cd5\u8ba1\u7b97\u5f97\u5230\u7684\u5143\u7d20</li> </ul> </li> <li>\u53ea\u6709\u5728\u88ab\u8c03\u7528\u65f6\u624d\u4f1a\u4ea7\u751f\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u6545\u5360\u7528\u5185\u5b58\u5c0f</li> <li>\u751f\u6210\u5668\u901a\u8fc7\u88ab\u8bbf\u95ee\u65f6\u8c03\u7528CPU\u8ba1\u7b97\u5b8c\u6210\u4e86\u5bf9\u8fd4\u56de\u5143\u7d20\u7684\u5373\u65f6\u751f\u6210\uff0c\u662f\u4e00\u79cd\u80fd\u591f\u6709\u6548\u8282\u7701\u5185\u5b58\u548c\u5229\u7528CPU\u7b97\u529b\u7684\u65b9\u6cd5\u3002</li> <li>\u751f\u6210\u5668\u53ef\u4ee5\u662f\u4e00\u4e2a\u65e0\u9650\u96c6\u3002</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/generator/#return-yield","title":"return \u4e0eyield\u7684\u533a\u522b","text":"<ul> <li> <p>return</p> </li> <li> <ul> <li>\u5728\u7a0b\u5e8f\u51fd\u6570\u4e2d\u8fd4\u56de\u67d0\u4e2a\u503c\uff0c\u8fd4\u56de\u4e4b\u540e\u7684\u51fd\u6570\u5c31\u4e0d\u5728\u7ee7\u7eed\u6267\u884c\uff0c\u5f7b\u5e95\u7ed3\u675f</li> </ul> </li> <li> <p>yield</p> </li> <li> <ul> <li>\u5e26\u6709yield\u7684\u51fd\u6570\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u51fd\u6570\u8fd4\u56de\u67d0\u4e00\u4e2a\u503c\u65f6\uff0c\u4f1a\u505c\u7559\u5728\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u8fd4\u56de\u51fd\u6570\u540e\uff0c\u4f1a\u5728\u524d\u9762\u505c\u7559\u7684\u4f4d\u7f6e\u7ee7\u7eed\u6267\u884c\uff0c\u76f4\u5230\u7a0b\u5e8f\u7ed3\u675f\u3002</li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/is_and_equals/","title":"python\u4e2dis\u548cequals\u7684\u533a\u522b","text":"","tags":["Python"]},{"location":"python/pysyntax/is_and_equals/#_1","title":"\u6982\u5ff5\uff1a","text":"<ul> <li>\u201c==\u201d: \u6bd4\u8f83\u5bf9\u8c61\u4e4b\u95f4\u7684\u503c\u662f\u5426\u76f8\u7b49</li> <li>\"is\":  \u6bd4\u8f83\u5bf9\u8c61\u7684\u8eab\u4efd\u6807\u8bc6\u662f\u5426\u76f8\u7b49\uff0c\u5373\u5b83\u4eec\u662f\u5426\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u662f\u5426\u6307\u5411\u540c\u4e00\u4e2a\u5185\u5b58\u5730\u5740</li> <li>\u4f7f\u7528id(object)\u51fd\u6570\u83b7\u53d6id Python<pre><code>a = 5\nb = 5\n\na == b\nTrue\n\nid(a)\n4342077616\n\nid(b)\n4342077616\n\na is b\nTrue\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pysyntax/is_and_equals/#_2","title":"\u6ce8\u610f\u70b9","text":"<ul> <li>\u5bf9\u4e8e\u6574\u578b\u6570\u5b57\u6765\u8bf4\uff0ca is b \u4e3aTrue\u7684\u7ed3\u8bba\uff0c\u53ea\u9002\u7528\u4e8e-5\u5230256\u8303\u56f4\u5185\u7684\u6570\u5b57 </li> <li>\u51fa\u4e8e\u6027\u80fd\u8003\u8651\uff0cpython\u5185\u90e8\u4f1a\u5bf9-5\u5230256\u7684\u6574\u578b\u7ef4\u6301\u4e00\u4e2a\u6570\u7ec4\uff0c\u8d77\u5230\u4e00\u4e2a\u7f13\u5b58\u7684\u4f5c\u7528\u3002</li> <li>\u5f53\u6574\u578b\u5728\u6b64\u8303\u56f4\u5185\u4e8b\uff0cpython\u90fd\u4f1a\u4ece\u8fd9\u4e2a\u6570\u7ec4\u4e2d\u8fd4\u56de\u54cd\u5e94\u7684\u5f15\u7528\uff0c\u800c\u4e0d\u662f\u91cd\u65b0\u5f00\u8f9f\u4e00\u5757\u65b0\u5185\u5b58\u7a7a\u95f4</li> <li>\u6bd4\u8f83\u64cd\u4f5c\u7b26\u201cis\"\u7684\u901f\u5ea6\u6548\u7387\uff0c\u901a\u5e38\u8981\u4f18\u4e8e\u201d==\u201c </li> <li>is\u64cd\u4f5c\u7b26\u4e0d\u80fd\u88ab\u91cd\u8f7d\uff0c\u4e0d\u80fd\u88ab\u91cd\u8f7d\uff0cpython\u5c31\u4e0d\u9700\u8981\u53bb\u5bfb\u627e\u5176\u4ed6\u5730\u65b9\u662f\u5426\u6709\u91cd\u8f7d\u4e86\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff0c\u5e76\u53bb\u8c03\u7528\u3002</li> <li>a == b \u76f8\u5f53\u4e8e\u6267\u884c\u4e86a.eq(b)</li> </ul> <p>Python<pre><code>a, b = 257, 257\n\na == b\nTrue\n\nid(a)\n140367724625104\n\nid(b)\n140367724624976\n\na is b\nFalse\n</code></pre> Python<pre><code>c, d = -5, -5\n\nc == d\nTrue\n\nc is d\nTrue\n</code></pre></p>","tags":["Python"]},{"location":"python/pysyntax/is_and_equals/#_3","title":"\u5e94\u7528","text":"<ul> <li>\u5728\u6bd4\u8f83\u53d8\u91cf\u662f\uff0c\u901a\u5e38\u4f1a\u4f7f\u7528\u2018==\u2019\uff0c</li> <li>\u5728\u6bd4\u8f83\u4e00\u4e2a\u53d8\u91cf\u4e0e\u4e00\u4e2a\u5355\u4f8b\u65f6\uff0c\u901a\u5e38\u4f1a\u4f7f\u7528 \u2018is\u2019\uff0c\u6700\u5e38\u89c1\u7684\u5c31\u662f\u68c0\u67e5\u4e00\u4e2a\u53d8\u91cf\u662f\u5426\u4e3aNone</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/iterator/","title":"\u8fed\u4ee3\u5668iterator\u7528\u6cd5","text":"","tags":["Python"]},{"location":"python/pysyntax/iterator/#_1","title":"\u540d\u8bcd\u89e3\u91ca\uff1a","text":"<ul> <li>\u8fed\u4ee3\uff1a\u8bbf\u95ee\u96c6\u5408\u5143\u7d20\u7684\u4e00\u79cd\u65b9\u5f0f</li> <li>\u8fed\u4ee3\u5668\uff1a\u662f\u4e00\u4e2a\u53ef\u4ee5\u8bb0\u4f4f\u904d\u5386\u4f4d\u7f6e\u7684\u5bf9\u8c61</li> <li>\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff1a\u628a\u53ef\u4ee5\u901a\u8fc7for...in...\u8fd9\u7c7b\u8bed\u53e5\u8fed\u4ee3\u8bfb\u53d6\u4e00\u6761\u6570\u636e\u4f9b\u6211\u4eec\u4f7f\u7528\u7684\u5bf9\u8c61</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/iterator/#_2","title":"\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u53ef\u4ee5\u8fed\u4ee3\u7684\u65b9\u6cd5","text":"<ul> <li>\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662fIterabe\u5bf9\u8c61\u5373\u53ef Python<pre><code>from collections import Iterable\n\nisinstance([], Iterable)  # True\nisinstance({}, Iterable)  # True\nisinstance('abc', Iterable)  # True\nisinstance(55, Iterable)  # False\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pysyntax/iterator/#_3","title":"\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u672c\u8d28","text":"<p>\u603b\u7ed3\u6765\u8bf4\uff1a\u4e00\u4e2a\u5bf9\u8c61\u5b9e\u73b0\u4e86__iter__\u65b9\u6cd5\uff0c\u5c31\u8868\u660e\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61</p> <ul> <li>\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u672c\u8d28\u662f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8fed\u4ee3\u5668\u5e2e\u52a9\u4f7f\u7528\u8005\u5bf9\u5176\u8fdb\u884c\u904d\u5386\u64cd\u4f5c</li> <li>\u5b9e\u9645\u4e0a\u5728\u8fdb\u884c\u8fed\u4ee3\u64cd\u4f5c\u65f6\uff0c\u5148\u83b7\u53d6\u8be5\u5bf9\u8c61\u63d0\u4f9b\u7684\u8fed\u4ee3\u5668\uff0c\u7136\u540e\u901a\u8fc7\u8fd9\u4e2a\u8fed\u4ee3\u5668\u6765\u4e00\u6b21\u83b7\u53d6\u5bf9\u8c61\u4e2d\u7684\u6bcf\u4e00\u4e2a\u6570\u636e</li> <li>\u8fed\u4ee3\u5668\u7684\u4ea7\u751f<ul> <li>\u53ef\u8fed\u4ee3\u5bf9\u8c61\u901a\u8fc7__iter__\u65b9\u6cd5\u5b9e\u73b0\u4e86\u8fed\u4ee3\u5668\uff0c    </li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/iterator/#iternext","title":"iter()\u51fd\u6570\u4e0enext()\u51fd\u6570","text":"<ul> <li>\u901a\u8fc7iter()\u51fd\u6570\u83b7\u53d6\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u8fed\u4ee3\u5668<ul> <li>iter()\u5b9e\u9645\u8c03\u7528\u7684\u662f__iter__\u65b9\u6cd5 </li> </ul> </li> <li>\u901a\u8fc7next()\u51fd\u6570\u6765\u83b7\u53d6\u904d\u5386\u4e2d\u7684\u4e0b\u4e00\u6761\u6570\u636e<ul> <li>\u5f53\u8fed\u4ee3\u5230\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u540e\uff0c\u518d\u6b21\u8c03\u7528next()\u4f1a\u629b\u51fa\u5f02\u5e38StopIteration</li> </ul> </li> </ul> Python<pre><code>&gt;&gt;&gt; li = [1, 2, 3]\n&gt;&gt;&gt; li_iter = iter(li)\n&gt;&gt;&gt; next(li_iter)\n1\n&gt;&gt;&gt; next(li_iter)\n2\n&gt;&gt;&gt; next(li_iter)\n3\n&gt;&gt;&gt; next(li_iter)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nStopIteration\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/iterator/#_4","title":"\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u8fed\u4ee3\u5668\u7684\u65b9\u6cd5","text":"<ul> <li>\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662fIterator\u5bf9\u8c61\u5373\u53ef</li> </ul> Python<pre><code>from collections import Iterator\n\nisinstance([], Iterator)  # False\nisinstance(iter([]), Iterator)  # True\nisinstance(iter(\"123\"), Iterator)  # True\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/iterator/#iterator","title":"\u8fed\u4ee3\u5668Iterator","text":"<p>\u8fed\u4ee3\u5668\u672c\u8eab\u4e5f\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61</p> <ul> <li> <p>\u6838\u5fc3\uff1a</p> </li> <li> <p>\u4e00\u4e2a\u5b9e\u73b0\u4e86__iter__\u65b9\u6cd5\u548c__next__\u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u5c31\u662f\u8fed\u4ee3\u5668\u3002</p> </li> <li> <p>\u8fed\u4ee3\u5668\u63d0\u4f9b\u4e86\u4e00\u4e2anext\u65b9\u6cd5\uff0c\u8c03\u7528\u6b64\u65b9\u6cd5\u540e\uff0c\u8981\u4e48\u5f97\u5230\u8fd9\u4e2a\u5bb9\u5668\u7684\u4e0b\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8981\u4e48\u5f97\u5230\u4e00\u4e2aStoplteration\u7684\u9519\u8bef</p> </li> <li> <p>\u8fed\u4ee3\u5668\u5360\u7528\u5185\u5b58\u5927</p> </li> <li> <p>\u53ef\u8fed\u4ee3\u5bf9\u8c61</p> </li> <li> <p>\u6838\u5fc3  </p> <ul> <li>\u901a\u8fc7iter()\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u518d\u901a\u8fc7next()\u51fd\u6570\u5c31\u53ef\u4ee5\u5b9e\u73b0\u904d\u5386(for in\u8bed\u53e5\u5c06\u8fd9\u4e2a\u8fc7\u7a0b\u9690\u5f0f\u5316)\u3002</li> </ul> </li> <li> <p>\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u53ef\u8fed\u4ee3</p> <ul> <li> <p>\u4f7f\u7528iter()\u51fd\u6570\u8fdb\u884c\u5224\u65ad</p> </li> <li> <p>\u4f7f\u7528isinstance(obj, Iterable)</p> </li> </ul> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/iterator/#demo","title":"\u5b9e\u73b0\u539f\u7406demo","text":"Python<pre><code>class MyList(object):\n    \"\"\"\u81ea\u5b9a\u4e49\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\"\"\"\n    def __init__(self):\n        self.items = []\n\n    def add(self, val):\n        self.items.append(val)\n\n    def __iter__(self):\n        myiterator = MyIterator(self)\n        return myiterator\n\n\nclass MyIterator(object):\n    \"\"\"\u81ea\u5b9a\u4e49\u7684\u8fed\u4ee3\u5668\"\"\"\n    def __init__(self, mylist):\n        self.mylist = mylist\n        # current\u7528\u6765\u8bb0\u5f55\u5f53\u524d\u8bbf\u95ee\u5230\u7684\u4f4d\u7f6e\n        self.current = 0\n\n    def __next__(self):\n        if self.current &lt; len(self.mylist.items):\n            item = self.mylist.items[self.current]\n            self.current += 1\n            return item\n        else:\n            raise StopIteration\n\n    def __iter__(self):\n        return self # \u8fd4\u56de\u81ea\u8eab\u5373\u53ef\n\n\nif __name__ == '__main__':\n    mylist = MyList()\n    mylist.add(1)\n    mylist.add(2)\n    mylist.add(3)\n    for num in mylist:\n        print(num)\n</code></pre> Python<pre><code>def is_iterable(param):\n    try: \n        iter(param) \n        return True\n    except TypeError:\n        return False\n\nparams = [\n    1234,\n    '1234',\n    [1, 2, 3, 4],\n    set([1, 2, 3, 4]),\n    {1:1, 2:2, 3:3, 4:4},\n    (1, 2, 3, 4)\n]\n\nfor param in params:\n    print('{} is iterable? {}'.format(param, is_iterable(param)))\n\n########## \u8f93\u51fa ##########\n\n1234 is iterable? False\n1234 is iterable? True\n[1, 2, 3, 4] is iterable? True\n{1, 2, 3, 4} is iterable? True\n{1: 1, 2: 2, 3: 3, 4: 4} is iterable? True\n(1, 2, 3, 4) is iterable? True\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/","title":"python\u4e4b\u5bb9\u5668\u7c7b\u578b","text":"","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#listmutable","title":"\u5217\u8868 | List\uff08mutable\uff09","text":"","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_1","title":"\u6982\u8ff0\uff1a","text":"<p>\u5728\u5176\u4ed6\u4e3b\u6d41\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u96c6\u5408\u7684\u6570\u636e\u7c7b\u578b\u901a\u5e38\u662f\u4e00\u81f4\u7684</p> <ul> <li>\u6982\u5ff5\uff1a</li> <li> <p>\u5217\u8868 [], \u662f\u4e00\u4e2a\u53ef\u4ee5\u653e\u7f6e\u4efb\u610f\u6570\u636e\u7c7b\u578b\uff08\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5bf9\u8c61\u3001\u5217\u8868\u7b49\uff09\u7684\u53ef\u53d8\u6709\u5e8f\u96c6\u5408\uff0c\u5e95\u5c42\u662f\u4e00\u4e2a\u7ebf\u6027\u8868\u7ed3\u6784\uff1b</p> </li> <li> <p>\u5e38\u7528\u64cd\u4f5c</p> </li> <li>\u652f\u6301\u7d22\u5f15\u3001\u590d\u6570\u7d22\u5f15\u3001\u5207\u7247\u3001\u5d4c\u5957\u3001\u904d\u5386 \u7b49\u64cd\u4f5c\u3002</li> <li>\u5e94\u7528\u573a\u666f</li> <li>\u4f8b\u5982\u60f3\u8981\u5b58\u50a8\u7684\u6570\u636e\u6216\u6570\u91cf\u662f\u53ef\u53d8\u7684\uff0c\u6bd4\u5982\u793e\u4ea4\u5e73\u53f0\u4e0a\u7684\u4e00\u4e2a\u65e5\u5fd7\u529f\u80fd\uff0c\u662f\u7edf\u8ba1\u4e00\u4e2a\u7528\u6237\u5728\u4e00\u5468\u4e4b\u5185\u770b\u4e86\u54ea\u4e9b\u7528\u6237\u7684\u5e16\u5b50</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#api","title":"\u5e38\u7528API","text":"<p>\u4e0b\u5217\u5217\u8868\u793a\u4f8b\u5747\u7528tmplist\u8868\u793a</p>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_2","title":"\u521b\u5efa","text":"Python<pre><code># \u5b9a\u4e49\u6216\u521d\u59cb\u5316\n[]  # \u65b9\u5f0f\u4e00\nlist()  # \u65b9\u5f0f\u4e8c\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_3","title":"\u67e5\u627e\uff1a","text":"Python<pre><code>tmplist.index(value, \u5f00\u59cb\u4f4d\u7f6e\u4e0b\u6807, \u7ed3\u675f\u4f4d\u7f6e\u4e0b\u6807) # \u8fd4\u56de\u6307\u5b9a\u6570\u636e\u6240\u5728\u4f4d\u7f6e\u7684\u4e0b\u6807\uff0c\u5982\u679c\u67e5\u627e\u7684\u6570\u636e\u4e0d\u5b58\u5728\u5219\u62a5\u9519\u3002\n\ntmplist[index]  # index\u662f\u7d22\u5f15\u6216\u8005\u4e0b\u6807\n\nindex(value,[start,[stop]])\n# \u901a\u8fc7\u503cvalue\uff0c\u4ece\u6307\u5b9a\u533a\u95f4\u67e5\u627e\u5217\u8868\u5185\u7684\u5143\u7d20\u662f\u5426\u5339\u914d \n# \u5339\u914d\u7b2c\u4e00\u4e2a\u5c31\u7acb\u5373\u8fd4\u56de\u7d22\u5f15\n# \u5339\u914d\u4e0d\u5230\uff0c\u629b\u51fa\u5f02\u5e38ValueError\n\ncount(value)\n# \u8fd4\u56de\u5217\u8868\u4e2d\u5339\u914dvalue\u7684\u6b21\u6570\n# \u65f6\u95f4\u590d\u6742\u5ea6\uff1aindex\u548ccount\u90fd\u662fO(n)\n\nlen(tmplist)\n# \u8fd4\u56de\u5217\u8868\u5143\u7d20\u7684\u4e2a\u6570\n\nname_list = ['Tom', 'Lily', 'Rose']\nprint(name_list[0])  # Tom\nprint(name_list[1])  # Lily\nprint(name_list[2])  # Rose\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_4","title":"\u589e\u52a0 \uff1a","text":"Python<pre><code>tmplist.insert(index, obj)  \n# \u5728\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\u6570\u636e ,\u65f6\u95f4\u590d\u6742\u5ea6\uff1a O(1)\u00a0\n# \u7d22\u5f15\u8d85\u8fc7\u4e0a\u754c\uff1a \u5c3e\u90e8\u8ffd\u52a0\n# \u7d22\u5f15\u8d85\u8fc7\u4e0b\u754c\uff1a \u5934\u90e8\u8ffd\u52a0\n\ntmplist.append(obj)  \n# \u5728\u672b\u5c3e\u8ffd\u52a0\u6570\u636e \u00a0\n# \u65f6\u95f4\u590d\u6742\u5ea6\uff1a O(1)\n\ntmplist.extend(tmplist2)  # \u5c06\u5217\u88682 \u7684\u6570\u636e\u8ffd\u52a0\u5230\u5217\u8868\n\nextend(iterable)\n# \u5c06\u53ef\u8fed\u4ee3\u5bf9\u8c61\u8ffd\u52a0\u8fdb\u6765\uff0c\u8fd4\u56deNone\n\n+ -&gt; list\n# \u8fde\u63a5\u64cd\u4f5c\uff0c\u5c06\u4e24\u4e2a\u5217\u8868\u8fde\u63a5\u8d77\u6765\n# \u4ea7\u751f\u7684\u65b0\u7684\u5217\u8868\uff0c\u539f\u5217\u8868\u4e0d\u53d8\n# \u672c\u8d28\u4e0a\u662f\u8c03\u7528\u4e86 __add__()\u65b9\u6cd5\n\n* -&gt; list\n# \u91cd\u590d\u64cd\u4f5c\uff0c\u5c06\u672c\u5217\u8868\u5143\u7d20\u91cd\u590dn\u904d\uff0c\u8fd4\u56de\u65b0\u7684\u5217\u8868\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_5","title":"\u4fee\u6539\uff1a","text":"Python<pre><code>tmplist[index] = value  # \u4fee\u6539\u6307\u5b9a\u7d22\u5f15\u7684\u6570\u636e\uff0c\u7d22\u5f15\u4e0d\u80fd\u8d85\u754c\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_6","title":"\u5220\u9664\uff1a","text":"Python<pre><code>del tmplist[index]   \n# \u5220\u9664\u6307\u5b9a\u7d22\u5f15\u7684\u6570\u636e\uff08\u4ece\u5185\u5b58\u4e2d\u5220\u9664\uff09\n\ntmplist.remove[obj] \n# \u4ece\u5de6\u5230\u53f3\u67e5\u627e\u7b2c\u4e00\u4e2a\u5339\u914dvalue\u503c\uff0c\u79fb\u9664\u8be5\u5143\u7d20\n\npop([index]) -&gt; item\n# \u4ece\u7d22\u5f15\u5904\u5f39\u51fa\u4e00\u4e2a\u5143\u7d20\uff0c\u7d22\u5f15\u8d85\u754c\u629b\u51faIndexError\u9519\u8bef\n\npop()\n# \u4ece\u5217\u8868\u5c3e\u90e8\u5f39\u51fa\u4e00\u4e2a\u5143\u7d20\n\nclear()\n# \u6e05\u695a\u5217\u8868\u6240\u6709\u5143\u7d20\uff0c\u5269\u4e0b\u4e00\u4e2a\u7a7a\u5217\u8868\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_7","title":"\u7edf\u8ba1\uff1a","text":"Python<pre><code>len(tmplist)  # \u5217\u8868\u957f\u5ea6\n\ntmplist.count(value)  # value\u5728\u5217\u8868\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_8","title":"\u6392\u5e8f\uff1a","text":"Python<pre><code>tmplist.sort()  \nsort(key=None, reverse=False)\n# \u5347\u5e8f\n\ntmplist.sort(reverse=True)  # \u964d\u5e8f\ntmplist.sort(key=funcname) # key\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u6307\u5b9akey\u5982\u4f55\u6392\u5e8f\n\ntmplist.reverse() # \u53cd\u8f6c\u5217\u8868\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_9","title":"\u590d\u5236","text":"Python<pre><code>tmplist.copy()  \n\ncopy()\n# \u590d\u5236\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5217\u8868\n# \u6d45\u62f7\u8d1d\uff0c\u9047\u5230\u5f15\u7528\u7c7b\u578b\uff0c\u53ea\u662f\u590d\u5236\u4e86\u4e00\u4e2a\u5f15\u7528\u800c\u5df2\n\ndeepcopy()\n# \u6df1\u62f7\u8d1d\uff0c\u9012\u5f52\u62f7\u8d1d\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_10","title":"\u6210\u5458\u64cd\u4f5c","text":"Python<pre><code>in\n[3, 4] in [1, 3, [3, 4]]\nfor 1 in [1,2,3,4]\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#tupleimmutable","title":"\u5143\u7ec4 | tuple\uff08immutable\uff09","text":"","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_11","title":"\u6982\u8ff0","text":"<ul> <li>\u6982\u5ff5\uff1a</li> <li>tuple \u5143\u7ec4\uff0c\u662f\u4e00\u4e2a\u53ef\u4ee5\u653e\u7f6e\u4efb\u610f\u6570\u636e\u7c7b\u578b\uff08\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5bf9\u8c61\u3001\u5217\u8868\u7b49\uff09\u7684\u4e0d\u53ef\u53d8\u7684\u6709\u5e8f\u96c6\u5408\uff1b</li> </ul> <p>\u5143\u7ec4\u4e0e\u5217\u8868\u7684\u6bd4\u8f83\uff1a</p> <p>\u5bf9\u4e8e\u76f8\u540c\u7684\u5143\u7d20\uff0c\u5143\u7ec4\u7684\u5b58\u50a8\u7a7a\u95f4\u6bd4\u5217\u8868\u5360\u7528\u7684\u5c11\uff08\u5143\u7ec4\u5c5e\u4e8e\u9759\u6001\u53d8\u91cf\uff0cpython\u9ed8\u8ba4\u4f1a\u5728\u540e\u53f0\u5bf9\u9759\u6001\u8d44\u6e90\u8fdb\u884c\u7f13\u5b58\uff0c\u5728\u4e0b\u6b21\u521b\u5efa\u540c\u6837\u5927\u5c0f\u7684\u5143\u7ec4\u65f6\uff0cpython\u5c31\u4e0d\u5728\u5411\u64cd\u4f5c\u7cfb\u7edf\u53d1\u51fa\u8bf7\u6c42\uff0c\u53bb\u5bfb\u627e\u5185\u5b58\uff0c\u800c\u662f\u76f4\u63a5\u5206\u914d\u4e4b\u524d\u5df2\u7ecf\u7f13\u5b58\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u8fd9\u6837\u80fd\u5927\u5927\u52a0\u5feb\u7a0b\u5e8f\u7684\u8fd0\u884c\u901f\u5ea6\uff09; </p> <ul> <li>\u5e38\u7528\u64cd\u4f5c</li> <li>\u652f\u6301\u7d22\u5f15\u3001\u590d\u6570\u7d22\u5f15\u3001\u5207\u7247\u3001\u5d4c\u5957\u3001\u904d\u5386 \u7b49\u64cd\u4f5c\u3002</li> <li> <p>\u5982\u679c\u5143\u7ec4\u91cc\u6709\u91cc\u5217\u8868\uff0c\u53ef\u4ee5\u4fee\u6539\u5217\u8868\u91cc\u7684\u6570\u636e</p> </li> <li> <p>\u5e94\u7528\u573a\u666f</p> </li> <li>\u5bf9\u4e8e\u5b58\u50a8\u7684\u6570\u636e\u548c\u6570\u91cf\u4e0d\u53d8\u7684\u573a\u666f\uff0c\u901a\u5e38\u9009\u62e9\u5143\u7ec4\u4f1a\u66f4\u52a0\u5408\u9002\u3002 Python<pre><code># \u6bd4\u5982\u6709\u4e00\u4e2a\u51fd\u6570\uff0c\u9700\u8981\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5730\u70b9\u7684\u7ecf\u7eac\u5ea6\uff0c\ndef get_location():\n    ..... \n    return (longitude, latitude)\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#api_1","title":"\u5e38\u7528API","text":"","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_12","title":"\u521b\u5efa","text":"Python<pre><code># \u5b9a\u4e49\ntuple() # \u7a7a\u5143\u7ec4\ntuple(iterable)\ntuple(1, ) # \u4e00\u4e2a\u5143\u7d20\u7684\u5b9a\u4e49\uff0c\u9700\u8981\u6709\u9017\u53f7\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_13","title":"\u8bbf\u95ee","text":"Python<pre><code># \u652f\u6301\u7d22\u5f15\uff08\u4e0b\u6807\uff09\n# \u6b63\u7d22\u5f15\uff1a\u4ece\u5de6\u81f3\u53f3\uff0c\u4ece0\u5f00\u59cb\uff0c\u4e3a\u5217\u8868\u4e2d\u6bcf\u4e00\u4e2a\u5143\u7d20\u7f16\u53f7\n# \u8d1f\u7d22\u5f15\uff1a\u4ece\u53f3\u81f3\u5de6\uff0c\u4ece-1\u5f00\u59cb\n# \u6b63\u8d1f\u7d22\u5f15\u4e0d\u53ef\u4ee5\u8d85\u754c\uff0c\u5426\u5219\u5f15\u53d1\u5f02\u5e38IndexError\n\n# \u5143\u7ec4\u901a\u8fc7\u7d22\u5f15\u8bbf\u95ee\ntmptuple[index]\ntmptuple[1]\ntmptuple[-2]\ntmptuple[1] =5\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_14","title":"\u67e5\u8be2","text":"Python<pre><code>index(value,[start,[stop]])\n# \u901a\u8fc7\u503cvalue\uff0c\u4ece\u6307\u5b9a\u533a\u95f4\u67e5\u627e\u5217\u8868\u5185\u7684\u5143\u7d20\u662f\u5426\u5339\u914d\n# \u5339\u914d\u7b2c\u4e00\u4e2a\u5c31\u7acb\u5373\u8fd4\u56de\u7d22\u5f15\n# \u5339\u914d\u4e0d\u5230\uff0c\u629b\u51fa\u5f02\u5e38ValueError\n\ncount(value)\n# \u8fd4\u56de\u5217\u8868\u4e2d\u5339\u914dvalue\u7684\u6b21\u6570\n\n# \u65f6\u95f4\u590d\u6742\u5ea6\nindex\u548ccount\u90fd\u662fO(n)\n\nlen(tuple)\n# \u8fd4\u56de\u5143\u7d20\u7684\u4e2a\u6570\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#dictmutable","title":"\u5b57\u5178 | Dict\uff08mutable\uff09","text":"","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_15","title":"\u6982\u8ff0","text":"<ul> <li>\u6982\u5ff5\uff1a</li> <li> <p>\u5b57\u5178{}, \u662f\u4e00\u7cfb\u5217\u7531\u952e\uff08key\uff09\u548c\u503c\uff08value\uff09\u914d\u5bf9\u7ec4\u6210\u7684\u5143\u7d20\u7684\u96c6\u5408\u3002</p> </li> <li> <p>\u7279\u70b9\uff1a</p> </li> <li>\u5728python3.7+\u4e2d\uff0c\u5b57\u5178\u662f\u6709\u5e8f\u7684</li> <li>\u76f8\u5bf9\u4e8e\u5217\u8868\u548c\u5143\u7ec4\uff0c\u5b57\u5178\u7684\u6027\u80fd\u66f4\u4f18\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u67e5\u627e\u3001\u6dfb\u52a0\u548c\u5220\u9664\u64cd\u4f5c\uff0c\u5b57\u5178\u90fd\u80fd\u5728\u5e38\u6570\u65f6\u95f4\u590d\u6742\u5ea6\u5185\u5b8c\u6210\u3002</li> <li>\u5b57\u5178\u548c\u96c6\u5408\u662f\u8fdb\u884c\u6027\u80fd\u9ad8\u5ea6\u4f18\u5316\u7684\u6570\u636e\u7ed3\u6784\u3002\u7279\u522b\u662f\u5bf9\u4e8e\u67e5\u627e\u3001\u6dfb\u52a0\u548c\u5220\u9664\u64cd\u4f5c</li> <li> <p>\u5b57\u5178\u5185\u90e8\u7ed3\u6784\u662f\u4e00\u4e2aHash\u8868\uff0c\u8fd9\u5f20\u8868\u91cc\u5b58\u4e86\u54c8\u5e0c\u503c\u3001\u952e\u548c\u503c\u4e09\u4e2a\u5143\u7d20</p> </li> <li> <p>\u5e38\u7528\u64cd\u4f5c</p> </li> <li> <p>\u652f\u6301\u589e\u52a0\u3001\u5220\u9664\u3001\u66f4\u65b0\u3001\u904d\u5386\u7b49\u64cd\u4f5c</p> </li> <li> <p>\u5e94\u7528\u573a\u666f</p> </li> <li>\u901a\u5e38\u5e94\u7528\u5728\u5bf9\u5143\u7d20\u7684\u9ad8\u6548\u67e5\u8be2\u573a\u666f\u4e2d</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#api_2","title":"\u5e38\u7528API","text":"","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_16","title":"\u521b\u5efa","text":"Python<pre><code># \u5b9a\u4e49\u4e0e\u521d\u59cb\u5316\nd = dict()\nd = {}  # \u521b\u5efa\u7a7a\u5b57\u5178\u63a8\u8350\u5199\u6cd5\ndict(**kwargs\uff09# \u4f7f\u7528name=value\u5bf9\u521d\u59cb\u5316\u4e00\u4e2a\u5b57\u5178\ndict(iterable, **kwargs)  # \u4f7f\u7528\u53ef\u8fed\u4ee3\u5bf9\u8c61\u548cname=value\u5bf9\u6784\u9020\u5b57\u5178\uff0c\u4e0d\u8fc7\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u5143\u7d20\u5fc5\u987b\u662f\u4e00\u4e2a\u4e8c\u5143\u7ed3\u6784\nd = dict(((1,'a'),(2,'b')))  #  \u6216\u8005 d = dict(([1,'a'],[2,'b']))     \n\ndict(mapping,**kwarg) # \u4f7f\u7528\u4e00\u4e2a\u5b57\u5178\u6784\u5efa\u53e6\u4e00\u4e2a\u5b57\u5178\nd = {'a':10, 'b':20, 'c':None, 'd':[1,2,3]}\n\n# demo\nd1 = {'name': 'jason', 'age': 20, 'gender': 'male'}\nd2 = dict({'name': 'jason', 'age': 20, 'gender': 'male'})\nd3 = dict([('name', 'jason'), ('age', 20), ('gender', 'male')])\nd4 = dict(name='jason', age=20, gender='male') \n\nd1 == d2 == d3 ==d4\nTrue\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_17","title":"\u53d6\u503c\uff1a","text":"Python<pre><code>tmpdict[key]  # \u53ef\u4ee5\u4ece\u5b57\u5178\u4e2d\u53d6\u503c\uff0ckey\u4e0d\u5b58\u5728\u4f1a\u62a5\u9519\n\ntmpdict.get(key)  # \u53ef\u4ee5\u4ece\u5b57\u5178\u4e2d\u53d6\u503c\uff0ckey\u4e0d\u5b58\u5728\u4e0d\u4f1a\u62a5\u9519\n\ntmpdict.get(key, None)  # \u53ef\u4ee5\u4ece\u5b57\u5178\u4e2d\u53d6\u503c\uff0ckey\u4e0d\u5b58\u5728\u8fd4\u56deNone\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_18","title":"\u5220\u9664 \uff1a","text":"Python<pre><code>tmpdict.pop\uff08key\uff09  # \u5220\u9664\u6307\u5b9a\u952e\u503c\u5bf9\uff0ckey\u4e0d\u5b58\u5728\u4f1a\u62a5\u9519\n\ntmpdict.popitem()   # \u968f\u673a\u5220\u9664\u4e00\u4e2a\u952e\u503c\u5bf9\n\ntmpdict.clear() # \u6e05\u7a7a\u5b57\u5178\n\ndel tmpdict[name]  #  \u5220\u9664\u5b57\u5178\u6216\u5220\u9664\u5b57\u5178\u4e2d\u6307\u5b9a\u952e\u503c\u5bf9\u3002\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_19","title":"\u5b57\u5178\u8f6c\u5217\u8868\uff1a","text":"Python<pre><code>tmpdict.keys()  # \u6240\u6709key\u5217\u8868\n\ntmpdict.values()  # \u6240\u6709value\u5217\u8868\n\ntmpdict.items() # \u6240\u6709(key,value)\u5143\u7ec4\u5217\u8868\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_20","title":"\u4fee\u6539\u3001\u65b0\u589e\u3001\u5408\u5e76\uff1a","text":"Python<pre><code>tmpdict[key]=value  # key\u5b58\u5728\u5219\u4fee\u6539\uff0c\u4e0d\u5b58\u5728\u5219\u65b0\u5efa\n\ntmpdict.setdefault(key,value) # \u5982\u679ckey\u5b58\u5728\uff0c\u4e0d\u4f1a\u4fee\u6539\u6570\u636e\uff0c\u5982\u679ckey\u4e0d\u5b58\u5728\uff0c\u65b0\u5efa\u952e\u503c\u5bf9\n\ntmpdict.updata\uff08tmpdict2\uff09  # \u5c06\u5b57\u51782\u7684\u6570\u636e\u5408\u5e76\u5230\u5b57\u5178\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_21","title":"\u7edf\u8ba1","text":"Python<pre><code>len(tmpdict)  # \u7edf\u8ba1\u5b57\u5178\u957f\u5ea6\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_22","title":"\u5176\u4ed6","text":"Python<pre><code># \u7c7b\u65b9\u6cd5\ndict.fromkeys(iterable, value)\nd = dict.fromkeys(range(5))\nd = dict.fromkeys(range(5),0)\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#setmutable","title":"\u96c6\u5408 | Set\uff08mutable\uff09","text":"","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_23","title":"\u6982\u8ff0","text":"<ul> <li> <p>\u6982\u5ff5\uff1a</p> </li> <li> <p>\u96c6\u5408{}, \u662f\u4e00\u7cfb\u5217\u65e0\u5e8f\u7684\u3001\u552f\u4e00\u7684\u5143\u7d20\u96c6\u5408;</p> <ul> <li> <p>set\u7684\u5143\u7d20\u5fc5\u987b\u8981\u6c42\u53ef\u4ee5hash\uff08\u76ee\u524d\u4e0d\u53efhash\u7684\u7c7b\u578b\u6709\uff1alist/set\uff09</p> </li> <li> <p>\u4f7f\u7528set()\uff0c\u8fdb\u884c\u521b\u5efa\uff0c\u4e0d\u80fd\u4f7f\u7528{}\u521b\u5efa</p> </li> </ul> </li> <li> <p>\u5e38\u7528\u64cd\u4f5c</p> </li> <li>\u652f\u6301\u589e\u52a0\u3001\u5220\u9664\u3001\u66f4\u65b0\u3001\u904d\u5386\u7b49\u64cd\u4f5c</li> <li> <p>\u4e0d\u652f\u6301\u7d22\u5f15</p> </li> <li> <p>\u5e94\u7528\u573a\u666f</p> </li> <li>\u901a\u5e38\u5e94\u7528\u5728\u5bf9\u5143\u7d20\u7684\u9ad8\u6548\u67e5\u8be2\u573a\u666f\u4e2d</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#api_3","title":"\u5e38\u7528API","text":"","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_24","title":"\u521b\u5efa","text":"<ul> <li>\u521b\u5efa\u96c6\u5408\u4f7f\u7528{}\u6216set()\uff0c \u4f46\u662f\u5982\u679c\u8981\u521b\u5efa\u7a7a\u96c6\u5408\u53ea\u80fd\u4f7f\u7528set()\uff0c\u56e0\u4e3a{}\u7528\u6765\u521b\u5efa\u7a7a\u5b57\u5178\u3002</li> </ul> Python<pre><code>s1 = {10, 20, 30, 40, 50}\nprint(s1)\n\ns2 = {10, 30, 20, 10, 30, 40, 30, 50}\nprint(s2)\n\ns3 = set('abcdefg')\nprint(s3)\n\ns4 = set()\nprint(type(s4))  # set\n\ns5 = {}\nprint(type(s5))  # dict\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_25","title":"\u589e\u52a0","text":"<ul> <li> <p>add() Python<pre><code>s1 = {10, 20}\ns1.add(100)\ns1.add(10)\nprint(s1)  # {100, 10, 20}\n</code></pre></p> </li> <li> <p>update() \u8ffd\u52a0\u7684\u6570\u636e\u662f\u5e8f\u5217\u3002 Python<pre><code>s1 = {10, 20}\n# s1.update(100)  # \u62a5\u9519\ns1.update([100, 200])\ns1.update('abc')\nprint(s1)\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_26","title":"\u5220\u9664","text":"<ul> <li> <p>remove()\uff0c\u5220\u9664\u96c6\u5408\u4e2d\u7684\u6307\u5b9a\u6570\u636e\uff0c\u5982\u679c\u6570\u636e\u4e0d\u5b58\u5728\u5219\u62a5\u9519\u3002 Python<pre><code>s1 = {10, 20}\n\ns1.remove(10)\nprint(s1)\n\ns1.remove(10)  # \u62a5\u9519\nprint(s1)\n</code></pre></p> </li> <li> <p>discard()\uff0c\u5220\u9664\u96c6\u5408\u4e2d\u7684\u6307\u5b9a\u6570\u636e\uff0c\u5982\u679c\u6570\u636e\u4e0d\u5b58\u5728\u4e5f\u4e0d\u4f1a\u62a5\u9519\u3002 Python<pre><code>s1 = {10, 20}\n\ns1.discard(10)\nprint(s1)\n\ns1.discard(10)\nprint(s1)\n</code></pre></p> </li> <li> <p>pop()\uff0c\u968f\u673a\u5220\u9664\u96c6\u5408\u4e2d\u7684\u67d0\u4e2a\u6570\u636e\uff0c\u5e76\u8fd4\u56de\u8fd9\u4e2a\u6570\u636e\u3002 Python<pre><code>s1 = {10, 20, 30, 40, 50}\ndel_num = s1.pop()\nprint(del_num)print(s1)\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_27","title":"\u67e5\u627e","text":"<ul> <li>in\uff1a\u5224\u65ad\u6570\u636e\u5728\u96c6\u5408\u5e8f\u5217</li> <li>not in\uff1a\u5224\u65ad\u6570\u636e\u4e0d\u5728\u96c6\u5408\u5e8f\u5217 Python<pre><code>s1 = {10, 20, 30, 40, 50}\n\nprint(10 in s1)\nprint(10 not in s1)\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_28","title":"\u5176\u4ed6\u8fd0\u7b97","text":"<ul> <li>\u5168\u96c6</li> <li>\u6240\u6709\u5143\u7d20\u7684\u96c6\u5408\u3002\u4f8b\u5982\u5b9e\u6570\u96c6\uff0c\u6240\u6709\u5b9e\u6570\u7ec4\u6210\u7684\u96c6\u5408\u5c31\u662f\u5168\u96c6</li> <li>\u5b50\u96c6subset\u548c\u8d85\u96c6superset</li> <li>\u4e00\u4e2a\u96c6\u5408A\u6240\u6709\u5143\u7d20\u90fd\u5728\u53e6\u4e00\u4e2a\u96c6\u5408B\u5185\uff0cA\u662fB\u7684\u5b50\u96c6\uff0cB\u662fA\u7684\u8d85\u96c6</li> <li>\u771f\u5b50\u96c6\u548c\u771f\u8d85\u96c6</li> <li>A\u662fB\u7684\u5b50\u96c6\uff0c\u4e14A\u4e0d\u7b49\u4e8eB\uff0cA\u5c31\u662fB\u7684\u771f\u5b50\u96c6\uff0cB\u662fA\u7684\u771f\u8d85\u96c6</li> <li>\u5e76\u96c6:\u591a\u4e2a\u96c6\u5408\u5408\u5e76\u7684\u7ed3\u679c</li> <li>\u4ea4\u96c6:\u591a\u4e2a\u96c6\u5408\u7684\u516c\u5171\u90e8\u5206</li> <li>\u5dee\u96c6:\u96c6\u5408\u4e2d\u9664\u53bb\u548c\u5176\u4ed6\u96c6\u5408\u516c\u5171\u90e8\u5206</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/list_tuple_dict/#_29","title":"\u5de5\u7a0b\u5b9e\u8df5","text":"<ul> <li>\u5171\u540c\u597d\u53cb</li> <li>\u4f60\u7684\u597d\u53cbA\u3001B\u3001C\uff0c\u4ed6\u7684\u597d\u53cbC\u3001B\u3001D\uff0c\u6c42\u5171\u540c\u597d\u53cb</li> <li>\u4ea4\u96c6\u95ee\u9898:{'A', 'B', 'C'}.intersection({'B', 'C', 'D'})</li> <li>\u5fae\u4fe1\u7fa4\u63d0\u9192</li> <li>XXX\u4e0e\u7fa4\u91cc\u5176\u4ed6\u4eba\u90fd\u4e0d\u662f\u5fae\u4fe1\u670b\u53cb\u5173\u7cfb</li> <li> <p>\u5e76\u96c6:userid in (A | B | C | ...) == False\uff0cA\u3001B\u3001C\u7b49\u662f\u5fae\u4fe1\u597d\u53cb\u7684\u5e76\u96c6\uff0c\u7528\u6237ID\u4e0d\u5728\u8fd9\u4e2a\u5e76\u96c6\u4e2d\uff0c\u8bf4\u660e\u4ed6\u548c\u4efb\u4f55\u4eba\u90fd\u4e0d\u662f\u670b\u53cb</p> </li> <li> <p>\u6743\u9650\u5224\u65ad</p> </li> <li>\u6709\u4e00\u4e2aAPI\uff0c\u8981\u6c42\u6743\u9650\u540c\u65f6\u5177\u5907A\u3001B\u3001C\u624d\u80fd\u8bbf\u95ee\uff0c\u7528\u6237\u6743\u9650\u662fB\u3001C\u3001D\uff0c\u5224\u65ad\u7528\u6237\u662f\u5426\u80fd\u591f\u8bbf\u95ee\u8be5API<ul> <li>API\u96c6\u5408A\uff0c\u6743\u9650\u96c6\u5408P</li> <li>A - P = {} \uff0cA-P\u4e3a\u7a7a\u96c6\uff0c\u8bf4\u660eP\u5305\u542bA </li> <li>A.issubset(P) \u4e5f\u884c\uff0cA\u662fP\u7684\u5b50\u96c6\u4e5f\u884c </li> <li>A &amp; P = A \u4e5f\u884c</li> </ul> </li> <li>\u6709\u4e00\u4e2aAPI\uff0c\u8981\u6c42\u6743\u9650\u5177\u5907A\u3001B\u3001C\u4efb\u610f\u4e00\u9879\u5c31\u53ef\u8bbf\u95ee\uff0c\u7528\u6237\u6743\u9650\u662fB\u3001C\u3001D\uff0c\u5224\u65ad\u7528\u6237\u662f\u5426\u80fd\u591f\u8bbf\u95ee\u8be5API<ul> <li>API\u96c6\u5408A\uff0c\u6743\u9650\u96c6\u5408P</li> <li>A &amp; P != {} \u5c31\u53ef\u4ee5</li> <li>A.isdisjoint(P) == False \u8868\u793a\u6709\u4ea4\u96c6</li> </ul> </li> <li>\u4e00\u4e2a\u603b\u4efb\u52a1\u5217\u8868\uff0c\u5b58\u50a8\u6240\u6709\u4efb\u52a1\u3002\u4e00\u4e2a\u5b8c\u6210\u7684\u4efb\u52a1\u5217\u8868\u3002\u627e\u51fa\u4e3a\u672a\u5b8c\u6210\u7684\u4efb\u52a1</li> <li>\u4e1a\u52a1\u4e2d\uff0c\u4efb\u52a1ID\u4e00\u822c\u4e0d\u53ef\u4ee5\u91cd\u590d</li> <li>\u6240\u6709\u4efb\u52a1ID\u653e\u5230\u4e00\u4e2aset\u4e2d\uff0c\u5047\u8bbe\u4e3aALL</li> <li>\u6240\u6709\u5df2\u5b8c\u6210\u7684\u4efb\u52a1ID\u653e\u5230\u4e00\u4e2aset\u4e2d\uff0c\u5047\u8bbe\u4e3aCOMPLETED\uff0c\u5b83\u662fALL\u7684\u5b50\u96c6 </li> <li>ALL - COMPLETED = UNCOMPLETED </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/oop/","title":"python\u4e2d\u7684\u9762\u5411\u5bf9\u8c61\u7f16\u7a0bOOP","text":"","tags":["Python"]},{"location":"python/pysyntax/oop/#_1","title":"\u7c7b\u5c5e\u6027","text":"<ul> <li>\u7c7b\u5c5e\u6027\u5c31\u662f \u7c7b\u5bf9\u8c61 \u6240\u62e5\u6709\u7684\u5c5e\u6027\uff0c\u5b83\u88ab \u8be5\u7c7b\u7684\u6240\u6709\u5b9e\u4f8b\u5bf9\u8c61 \u6240\u5171\u6709\u3002</li> <li>\u7c7b\u5c5e\u6027\u53ef\u4ee5\u4f7f\u7528 \u7c7b\u5bf9\u8c61 \u6216 \u5b9e\u4f8b\u5bf9\u8c61 \u8bbf\u95ee\u3002</li> <li>\u7c7b\u5c5e\u6027\u53ea\u80fd\u901a\u8fc7\u7c7b\u5bf9\u8c61\u4fee\u6539\uff0c\u4e0d\u80fd\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u4fee\u6539\uff0c\u5982\u679c\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u4fee\u6539\u7c7b\u5c5e\u6027\uff0c\u8868\u793a\u7684\u662f\u521b\u5efa\u4e86\u4e00\u4e2a\u5b9e\u4f8b\u5c5e\u6027\u3002</li> </ul> <p>\u7c7b\u5c5e\u6027\u7684\u4f18\u70b9</p> <ul> <li>\u8bb0\u5f55\u7684\u67d0\u9879\u6570\u636e \u59cb\u7ec8\u4fdd\u6301\u4e00\u81f4\u65f6\uff0c\u5219\u5b9a\u4e49\u7c7b\u5c5e\u6027\u3002</li> <li>\u5b9e\u4f8b\u5c5e\u6027 \u8981\u6c42 \u6bcf\u4e2a\u5bf9\u8c61 \u4e3a\u5176 \u5355\u72ec\u5f00\u8f9f\u4e00\u4efd\u5185\u5b58\u7a7a\u95f4 \u6765\u8bb0\u5f55\u6570\u636e\uff0c\u800c \u7c7b\u5c5e\u6027 \u4e3a\u5168\u7c7b\u6240\u5171\u6709 \uff0c\u4ec5\u5360\u7528\u4e00\u4efd\u5185\u5b58\uff0c\u66f4\u52a0\u8282\u7701\u5185\u5b58\u7a7a\u95f4\u3002</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/oop/#_2","title":"\u5b9e\u4f8b\u5c5e\u6027","text":"Python<pre><code>class Dog(object):\n    def __init__(self):\n        self.age = 5\n\n    def info_print(self):\n        print(self.age)\n\n\nwangcai = Dog()\nprint(wangcai.age)  # 5\n# print(Dog.age)  # \u62a5\u9519\uff1a\u5b9e\u4f8b\u5c5e\u6027\u4e0d\u80fd\u901a\u8fc7\u7c7b\u8bbf\u95ee\nwangcai.info_print()  # 5\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/oop/#_3","title":"\u7c7b\u65b9\u6cd5","text":"<ul> <li>\u9700\u8981\u7528\u88c5\u9970\u5668@classmethod\u6765\u6807\u8bc6\u5176\u4e3a\u7c7b\u65b9\u6cd5\uff0c\u5bf9\u4e8e\u7c7b\u65b9\u6cd5\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u5fc5\u987b\u662f\u7c7b\u5bf9\u8c61\uff0c\u4e00\u822c\u4ee5cls\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u3002</li> <li>\u7c7b\u65b9\u6cd5\u4f7f\u7528\u573a\u666f</li> <li>\u5f53\u65b9\u6cd5\u4e2d \u9700\u8981\u4f7f\u7528\u7c7b\u5bf9\u8c61 (\u5982\u8bbf\u95ee\u79c1\u6709\u7c7b\u5c5e\u6027\u7b49)\u65f6\uff0c\u5b9a\u4e49\u7c7b\u65b9\u6cd5</li> <li>\u7c7b\u65b9\u6cd5\u4e00\u822c\u548c\u7c7b\u5c5e\u6027\u914d\u5408\u4f7f\u7528 Python<pre><code>class Dog(object):\n    __tooth = 10\n\n    @classmethod\n    def get_tooth(cls):\n        return cls.__tooth\n\n\nwangcai = Dog()\nresult = wangcai.get_tooth()\nprint(result)  # 10\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pysyntax/oop/#_4","title":"\u9759\u6001\u65b9\u6cd5","text":"<ul> <li>\u9759\u6001\u65b9\u6cd5\u7279\u70b9</li> <li>\u9700\u8981\u901a\u8fc7\u88c5\u9970\u5668@staticmethod\u6765\u8fdb\u884c\u4fee\u9970\uff0c\u9759\u6001\u65b9\u6cd5\u65e2\u4e0d\u9700\u8981\u4f20\u9012\u7c7b\u5bf9\u8c61\u4e5f\u4e0d\u9700\u8981\u4f20\u9012\u5b9e\u4f8b\u5bf9\u8c61\uff08\u5f62\u53c2\u6ca1\u6709self/cls\uff09\u3002</li> <li>\u9759\u6001\u65b9\u6cd5 \u4e5f\u80fd\u591f\u901a\u8fc7 \u5b9e\u4f8b\u5bf9\u8c61 \u548c \u7c7b\u5bf9\u8c61 \u53bb\u8bbf\u95ee\u3002</li> <li>\u9759\u6001\u65b9\u6cd5\u4f7f\u7528\u573a\u666f</li> <li>\u5f53\u65b9\u6cd5\u4e2d \u65e2\u4e0d\u9700\u8981\u4f7f\u7528\u5b9e\u4f8b\u5bf9\u8c61(\u5982\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u5b9e\u4f8b\u5c5e\u6027)\uff0c\u4e5f\u4e0d\u9700\u8981\u4f7f\u7528\u7c7b\u5bf9\u8c61 (\u5982\u7c7b\u5c5e\u6027\u3001\u7c7b\u65b9\u6cd5\u3001\u521b\u5efa\u5b9e\u4f8b\u7b49)\u65f6\uff0c\u5b9a\u4e49\u9759\u6001\u65b9\u6cd5</li> <li>\u53d6\u6d88\u4e0d\u9700\u8981\u7684\u53c2\u6570\u4f20\u9012\uff0c\u6709\u5229\u4e8e \u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u5185\u5b58\u5360\u7528\u548c\u6027\u80fd\u6d88\u8017 Text Only<pre><code>class Dog(object):\n \u00a0 \u00a0@staticmethod\n \u00a0 \u00a0def info_print():\n \u00a0 \u00a0 \u00a0 \u00a0print('\u8fd9\u662f\u4e00\u4e2a\u72d7\u7c7b\uff0c\u7528\u4e8e\u521b\u5efa\u72d7\u5b9e\u4f8b....')\n\n\nwangcai = Dog()\n# \u9759\u6001\u65b9\u6cd5\u65e2\u53ef\u4ee5\u4f7f\u7528\u5bf9\u8c61\u8bbf\u95ee\u53c8\u53ef\u4ee5\u4f7f\u7528\u7c7b\u8bbf\u95ee\nwangcai.info_print()\nDog.info_print()\n</code></pre></li> </ul> Python<pre><code>class A(object):\n\n    a = 'A'  # \u7c7b\u5c5e\u6027\n\n    def __init__(self):\n        self.b = \"B\"  # \u5b9e\u4f8b\u5c5e\u6027\n\n    class Meta:  # \u5bf9\u8c61\u5c5e\u6027(\u5728\u4e00\u4e2a\u7c7b\u4e2d\u5b9a\u4e49\u53e6\u5916\u4e00\u4e2a\u7c7b\uff0c\u5f53\u505a\u53e6\u5916\u4e00\u4e2a\u7c7b\u7684\u5c5e\u6027)\n        c = 'C'  # \u8fd9\u4e9b\u5c5e\u6027\u63a7\u5236\u7c7b\u672c\u8eab\uff0c\u5373A\u7684\u5c5e\u6027\n\n    def a_print(self):  # \u5b9e\u4f8b\u65b9\u6cd5\n        print('a_print')\n\n    @classmethod\n    def class_print(cls):  # \u7c7b\u65b9\u6cd5\n        print(cls.__name__)\n        print('class_print')\n\n\n    @staticmethod\n    def static_print():  # \u9759\u6001\u65b9\u6cd5\n        print('static_print')\n\n    @property\n    def data(self):  # \u8be5\u65b9\u6cd5\u5f53\u505a\u5c5e\u6027\u6765\u4f7f\u7528\n        print('data')\n\n    def __str__(self):\n        return '__str__'  # \u9b54\u6cd5\u65b9\u6cd5\uff0c\u8fd4\u56de\u7c7b\u540d\n\n\nprint(A.a)  # \u7c7b\u8c03\u7528\u7c7b\u5c5e\u6027\uff0c\u6210\u529f\n\"\"\"\n    A\n\"\"\"\n\nprint(\"---**********-----\")\n\n# print(A.b)  # \u7c7b\u8c03\u7528\u5b9e\u4f8b\u5c5e\u6027\u5931\u8d25\n\"\"\"\n    AttributeError: type object 'A' has no attribute 'b'\n\"\"\"\n\nprint(A().a)  # A()\u2014\u2014--&gt;\u5b9e\u4f8b\u5bf9\u8c61\nprint(A().b)\n\"\"\"\n    A\n    B\n\"\"\"\n\nprint(A().Meta.c)\n\n# A.a_print() # \u9519\u8bef\nA.a_print(A()) # \u6b63\u786e\n\n\"\"\"\nA.class_print()\nA.static_print()\n\u7c7b\u540d\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\uff1a\n    \u7c7b\u65b9\u6cd5\n    \u9759\u6001\u65b9\u6cd5\n\n\"\"\"\n\n\"\"\"\nA().a_print()\nA().class_print()\nA().static_print()\nA().data\n\n\u7c7b\u5bf9\u8c61\u53ef\u4ee5\u8c03\u7528\u6240\u6709\u7684\u65b9\u6cd5\n\"\"\"\n\nclass B(object):\n    A = A() # \u628a\u53e6\u4e00\u4e2a\u7c7b\u7684\u5bf9\u8c61\u5f53\u505a\u53e6\u5916\u4e00\u4e2a\u7c7b\u7684\u5c5e\u6027\u6765\u8fdb\u884c\u8c03\u7528\uff0c\uff08\u53e6\u5916\u4e00\u79cd\u65b9\u5f0f\u5c31\u662f\u7ee7\u627f\uff09\nB().A.a_print()\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/","title":"python\u4e2d\u7684property","text":"","tags":["Python"]},{"location":"python/pysyntax/property/#dir","title":"\u5e38\u7528dir\u5185\u7f6e\u51fd\u6570","text":"Text Only<pre><code>\u5728 \u6807\u8bc6\u7b26 / \u6570\u636e \u540e\u8f93\u5165\u4e00\u4e2a .\uff0c\u7136\u540e\u6309\u4e0b TAB \u952e\uff0ciPython \u4f1a\u63d0\u793a\u8be5\u5bf9\u8c61\u80fd\u591f\u8c03\u7528\u7684 \u65b9\u6cd5\u5217\u8868\n\u4f7f\u7528\u5185\u7f6e\u51fd\u6570 dir \u4f20\u5165 \u6807\u8bc6\u7b26 / \u6570\u636e\uff0c\u53ef\u4ee5\u67e5\u770b\u5bf9\u8c61\u5185\u7684 \u6240\u6709\u5c5e\u6027\u53ca\u65b9\u6cd5\n</code></pre> \u65b9\u6cd5 \u529f\u80fd __ new __ \u521b\u5efa\u5bf9\u8c61\u65f6\uff0c\u4f1a\u88ab\u00a0\u81ea\u52a8\u00a0\u8c03\u7528 __ init __ \u5bf9\u8c61\u88ab\u521d\u59cb\u5316\u65f6\uff0c\u4f1a\u88ab\u00a0\u81ea\u52a8\u00a0\u8c03\u7528\uff1b[1]\u5206\u914d\u7a7a\u95f4\uff0c[2]\u8bbe\u7f6e\u521d\u59cb\u503c __ del __ \u5bf9\u8c61\u88ab\u4ece\u5185\u5b58\u4e2d\u9500\u6bc1\u524d\uff0c\u4f1a\u88ab\u00a0\u81ea\u52a8\u00a0\u8c03\u7528 __ str __ \u8fd4\u56de\u5bf9\u8c61\u7684\u63cf\u8ff0\u4fe1\u606f\uff0c(\u7528return\u8fd4\u56de\u7ed3\u679c\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32)","tags":["Python"]},{"location":"python/pysyntax/property/#_1","title":"\u521d\u59cb\u5316\u7684\u540c\u65f6\u8bbe\u7f6e\u521d\u59cb\u503c:","text":"Text Only<pre><code>&gt;\u5728\u5f00\u53d1\u4e2d\uff0c\u5982\u679c\u5e0c\u671b\u5728 \u521b\u5efa\u5bf9\u8c61\u7684\u540c\u65f6\uff0c\u5c31\u8bbe\u7f6e\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u5bf9 __init__ \u65b9\u6cd5\u8fdb\u884c \u6539\u9020\n\n&gt; \u628a\u5e0c\u671b\u8bbe\u7f6e\u7684\u5c5e\u6027\u503c\uff0c\u5b9a\u4e49\u6210 __init__ \u65b9\u6cd5\u7684\u53c2\u6570\n\n&gt; \u5728\u65b9\u6cd5\u5185\u90e8\u4f7f\u7528 self.\u5c5e\u6027 = \u5f62\u53c2 \u63a5\u6536\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570\n\n&gt; \u5728\u521b\u5efa\u5bf9\u8c61\u65f6\uff0c\u4f7f\u7528 \u7c7b\u540d(\u5c5e\u60271, \u5c5e\u60272...) \u8c03\u7528\n\n&gt;\u5728 \u5bf9\u8c61\u7684\u65b9\u6cd5\u5185\u90e8\uff0c\u662f\u53ef\u4ee5 \u76f4\u63a5\u8bbf\u95ee\u5bf9\u8c61\u7684\u5c5e\u6027 \u7684\n\n&gt;\u540c\u4e00\u4e2a\u7c7b \u521b\u5efa\u7684 \u591a\u4e2a\u5bf9\u8c61 \u4e4b\u95f4\uff0c\u5c5e\u6027 \u4e92\u4e0d\u5e72\u6270\uff01\n\n&gt;\u5728\u5b9a\u4e49\u5c5e\u6027\u65f6\uff0c\u5982\u679c\u4e0d\u77e5\u9053\u8bbe\u7f6e\u4ec0\u4e48\u521d\u59cb\u503c\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a None,None\u5173\u952e\u5b57\u8868\u793a\u4ec0\u4e48\u90fd\u6ca1\u6709,\u8868\u793a\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u6ca1\u6709\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u5e38\u91cf;\u53ef\u4ee5\u5c06None\u8d4b\u503c\u7ed9\u4efb\u4f55\u4e00\u4e2a\u53d8\u91cf\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#property","title":"property\u5c5e\u6027","text":"<p>\u6982\u5ff5\uff1a     \u4e00\u79cd\u7528\u8d77\u6765\u50cf\u662f\u4f7f\u7528\u7684\u5b9e\u4f8b\u5c5e\u6027\u4e00\u6837\u7684\u7279\u6b8a\u5c5e\u6027\uff0c\u53ef\u4ee5\u5bf9\u5e94\u4e8e\u67d0\u4e2a\u65b9\u6cd5;</p> <p>\u5bf9\u6982\u5ff5\u7684\u7406\u89e3\uff1a \u60f3\u83b7\u5f97\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u6216\u7c7b\u7684\u5c5e\u6027\u503c\uff0c\u4f46\u662f\u8fd9\u4e2a\u5c5e\u6027\u5374\u662f\u5176\u5b83\u5c5e\u6027\u8fdb\u884c\u4e00\u5b9a\u8fd0\u7b97\u540e\u5f97\u5230\u7684\u7ed3\u679c\uff0c\u6b64\u65f6\u53ef\u4ee5\u7528property\u5c5e\u6027</p> <p>property\u5c5e\u6027\u7684\u5b9a\u4e49\u548c\u8c03\u7528\u8981\u6ce8\u610f\u4e00\u4e0b\u51e0\u70b9\uff1a \u5b9a\u4e49\u65f6\uff0c\u5728\u5b9e\u4f8b\u65b9\u6cd5\u7684\u57fa\u7840\u4e0a\u6dfb\u52a0 @property \u88c5\u9970\u5668\uff1b\u5e76\u4e14\u4ec5\u6709\u4e00\u4e2aself\u53c2\u6570 \u8c03\u7528\u65f6\uff0c\u65e0\u9700\u62ec\u53f7</p> <p>\u65b9\u6cd5\uff1afoo_obj.func()</p> <p>property\u5c5e\u6027\uff1afoo_obj.prop</p>","tags":["Python"]},{"location":"python/pysyntax/property/#_2","title":"\u5b9e\u4f8b\u5982\u4e0b\uff1a","text":"Python<pre><code>\u5bf9\u4e8e\u4eac\u4e1c\u5546\u57ce\u4e2d\u663e\u793a\u7535\u8111\u4e3b\u673a\u7684\u5217\u8868\u9875\u9762\uff0c\u6bcf\u6b21\u8bf7\u6c42\u4e0d\u53ef\u80fd\u628a\u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u90fd\u663e\u793a\u5230\u9875\u9762\u4e0a\uff0c\u800c\u662f\u901a\u8fc7\u5206\u9875\u7684\u529f\u80fd\u5c40\u90e8\u663e\u793a\uff0c\u6240\u4ee5\u5728\u5411\u6570\u636e\u5e93\u4e2d\u8bf7\u6c42\u6570\u636e\u65f6\u5c31\u8981\u663e\u793a\u7684\u6307\u5b9a\u83b7\u53d6\u4ece\u7b2cm\u6761\u5230\u7b2cn\u6761\u7684\u6240\u6709\u6570\u636e \u8fd9\u4e2a\u5206\u9875\u7684\u529f\u80fd\u5305\u62ec\uff1a\n\u6839\u636e\u7528\u6237\u8bf7\u6c42\u7684\u5f53\u524d\u9875\u548c\u603b\u6570\u636e\u6761\u6570\u8ba1\u7b97\u51fa m \u548c n\n\u6839\u636em \u548c n \u53bb\u6570\u636e\u5e93\u4e2d\u8bf7\u6c42\u6570\u636e\n# ############### \u5b9a\u4e49 ###############\nclass Pager:\n    def __init__(self, current_page):\n        # \u7528\u6237\u5f53\u524d\u8bf7\u6c42\u7684\u9875\u7801\uff08\u7b2c\u4e00\u9875\u3001\u7b2c\u4e8c\u9875...\uff09\n        self.current_page = current_page\n        # \u6bcf\u9875\u9ed8\u8ba4\u663e\u793a10\u6761\u6570\u636e\n        self.per_items = 10 \n\n    @property\n    def start(self):\n        val = (self.current_page - 1) * self.per_items\n        return val\n\n    @property\n    def end(self):\n        val = self.current_page * self.per_items\n        return val\n\n# ############### \u8c03\u7528 ###############\np = Pager(1)\np.start  # \u5c31\u662f\u8d77\u59cb\u503c\uff0c\u5373\uff1am\np.end  # \u5c31\u662f\u7ed3\u675f\u503c\uff0c\u5373\uff1an\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#_3","title":"\u603b\u7ed3\uff1a","text":"Text Only<pre><code>  Python\u7684property\u5c5e\u6027\u7684\u529f\u80fd\u662f\uff1aproperty\u5c5e\u6027\u5185\u90e8\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u903b\u8f91\u8ba1\u7b97\uff0c\u6700\u7ec8\u5c06\u8ba1\u7b97\u7ed3\u679c\u8fd4\u56de\u3002\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#property_1","title":"property\u5c5e\u6027\u7684\u6709\u4e24\u79cd\u65b9\u5f0f","text":"Text Only<pre><code>\u88c5\u9970\u5668 \u5373\uff1a\u5728\u65b9\u6cd5\u4e0a\u5e94\u7528\u88c5\u9970\u5668\n\u7c7b\u5c5e\u6027 \u5373\uff1a\u5728\u7c7b\u4e2d\u5b9a\u4e49\u503c\u4e3aproperty\u5bf9\u8c61\u7684\u7c7b\u5c5e\u6027\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#property_2","title":"\u7ecf\u5178\u7c7b\uff0c\u5177\u6709\u4e00\u79cd@property\u88c5\u9970\u5668","text":"Python<pre><code># ############### \u5b9a\u4e49 ###############    \nclass Goods:\n    @property\n    def price(self):\n        return \"laowang\"\n\n# ############### \u8c03\u7528 ###############\nobj = Goods()\nresult = obj.price  # \u81ea\u52a8\u6267\u884c @property \u4fee\u9970\u7684 price \u65b9\u6cd5\uff0c\u5e76\u83b7\u53d6\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\nprint(result)\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#property_3","title":"\u65b0\u5f0f\u7c7b\uff0c\u5177\u6709\u4e09\u79cd@property\u88c5\u9970\u5668","text":"Python<pre><code>#coding=utf-8\n# ############### \u5b9a\u4e49 ###############\nclass Goods:\n    \"\"\"python3\u4e2d\u9ed8\u8ba4\u7ee7\u627fobject\u7c7b\n        \u4ee5python2\u30013\u6267\u884c\u6b64\u7a0b\u5e8f\u7684\u7ed3\u679c\u4e0d\u540c\uff0c\u56e0\u4e3a\u53ea\u6709\u5728python3\u4e2d\u624d\u6709@xxx.setter  @xxx.deleter\n    \"\"\"\n    @property\n    def price(self):\n        print('@property')\n\n    @price.setter\n    def price(self, value):\n        print('@price.setter')\n\n    @price.deleter\n    def price(self):\n        print('@price.deleter')\n# ############### \u8c03\u7528 ###############\nobj = Goods()\nobj.price          # \u81ea\u52a8\u6267\u884c @property \u4fee\u9970\u7684 price \u65b9\u6cd5\uff0c\u5e76\u83b7\u53d6\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\nobj.price = 123    # \u81ea\u52a8\u6267\u884c @price.setter \u4fee\u9970\u7684 price \u65b9\u6cd5\uff0c\u5e76\u5c06  123 \u8d4b\u503c\u7ed9\u65b9\u6cd5\u7684\u53c2\u6570\ndel obj.price      # \u81ea\u52a8\u6267\u884c @price.deleter \u4fee\u9970\u7684 price \u65b9\u6cd5\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#_4","title":"\u6ce8\u610f","text":"Text Only<pre><code>\u7ecf\u5178\u7c7b\u4e2d\u7684\u5c5e\u6027\u53ea\u6709\u4e00\u79cd\u8bbf\u95ee\u65b9\u5f0f\uff0c\u5176\u5bf9\u5e94\u88ab @property \u4fee\u9970\u7684\u65b9\u6cd5\n\u65b0\u5f0f\u7c7b\u4e2d\u7684\u5c5e\u6027\u6709\u4e09\u79cd\u8bbf\u95ee\u65b9\u5f0f\uff0c\u5e76\u5206\u522b\u5bf9\u5e94\u4e86\u4e09\u4e2a\u88ab@property\u3001@\u65b9\u6cd5\u540d.setter\u3001@\u65b9\u6cd5\u540d.deleter\u4fee\u9970\u7684\u65b9\u6cd5\n</code></pre> <p>\u7531\u4e8e\u65b0\u5f0f\u7c7b\u4e2d\u5177\u6709\u4e09\u79cd\u8bbf\u95ee\u65b9\u5f0f\uff0c\u5206\u522b\u5c06\u4e09\u4e2a\u65b9\u6cd5\u5b9a\u4e49\u4e3a\u5bf9\u540c\u4e00\u4e2a\u5c5e\u6027\uff1a\u83b7\u53d6\u3001\u4fee\u6539\u3001\u5220\u9664 Python<pre><code>class Goods(object):\n    def __init__(self):\n        # \u539f\u4ef7\n        self.original_price = 100\n        # \u6298\u6263\n        self.discount = 0.8\n\n    @property\n    def price(self):\n        # \u5b9e\u9645\u4ef7\u683c = \u539f\u4ef7 * \u6298\u6263\n        new_price = self.original_price * self.discount\n        return new_price\n\n    @price.setter\n    def price(self, value):\n        self.original_price = value\n\n    @price.deleter\n    def price(self):\n        del self.original_price\n\nobj = Goods()\nobj.price         # \u83b7\u53d6\u5546\u54c1\u4ef7\u683c\nobj.price = 200   # \u4fee\u6539\u5546\u54c1\u539f\u4ef7\ndel obj.price     # \u5220\u9664\u5546\u54c1\u539f\u4ef7\n</code></pre></p>","tags":["Python"]},{"location":"python/pysyntax/property/#_5","title":"\u6ce8\u610f\uff1a","text":"<ul> <li>property\u65b9\u6cd5\u4e2d\u6709\u4e2a\u56db\u4e2a\u53c2\u6570:</li> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u65b9\u6cd5\u540d\uff0c\u8c03\u7528 \u5bf9\u8c61.\u5c5e\u6027 \u65f6\u81ea\u52a8\u89e6\u53d1\u6267\u884c\u65b9\u6cd5</li> <li>\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u65b9\u6cd5\u540d\uff0c\u8c03\u7528 \u5bf9\u8c61.\u5c5e\u6027 \uff1d XXX \u65f6\u81ea\u52a8\u89e6\u53d1\u6267\u884c\u65b9\u6cd5</li> <li>\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u65b9\u6cd5\u540d\uff0c\u8c03\u7528 del \u5bf9\u8c61.\u5c5e\u6027 \u65f6\u81ea\u52a8\u89e6\u53d1\u6267\u884c\u65b9\u6cd5</li> <li>\u7b2c\u56db\u4e2a\u53c2\u6570\u662f\u5b57\u7b26\u4e32\uff0c\u8c03\u7528 \u5bf9\u8c61.\u5c5e\u6027.doc \uff0c\u6b64\u53c2\u6570\u662f\u8be5\u5c5e\u6027\u7684\u63cf\u8ff0\u4fe1\u606f</li> </ul> Python<pre><code>#coding=utf-8\n\nclass Foo(object):\n    def get_bar(self):\n        print(\"getter...\")\n        return 'laowang'\n\n    def set_bar(self, value): \n        \"\"\"\u5fc5\u987b\u4e24\u4e2a\u53c2\u6570\"\"\"\n        print(\"setter...\")\n        return 'set value' + value\n\n    def del_bar(self):\n        print(\"deleter...\")\n        return 'laowang'\n\n    BAR = property(get_bar, set_bar, del_bar, \"description...\")\n\nobj = Foo()\nobj.BAR  # \u81ea\u52a8\u8c03\u7528\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\uff1aget_bar\nobj.BAR = \"alex\"  # \u81ea\u52a8\u8c03\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\uff1aset_bar\u65b9\u6cd5\uff0c\u5e76\u5c06\u201calex\u201d\u5f53\u4f5c\u53c2\u6570\u4f20\u5165\ndesc = Foo.BAR.__doc__  # \u81ea\u52a8\u83b7\u53d6\u7b2c\u56db\u4e2a\u53c2\u6570\u4e2d\u8bbe\u7f6e\u7684\u503c\uff1adescription...\nprint(desc)\ndel obj.BAR  # \u81ea\u52a8\u8c03\u7528\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\uff1adel_bar\u65b9\u6cd5\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#_6","title":"\u603b\u7ed3\uff1a","text":"Text Only<pre><code>\u5b9a\u4e49property\u5c5e\u6027\u5171\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u5206\u522b\u662f\u3010\u88c5\u9970\u5668\u3011\u548c\u3010\u7c7b\u5c5e\u6027\u3011\uff0c\u800c\u3010\u88c5\u9970\u5668\u3011\u65b9\u5f0f\u9488\u5bf9\u7ecf\u5178\u7c7b\u548c\u65b0\u5f0f\u7c7b\u53c8\u6709\u6240\u4e0d\u540c\u3002\n\u901a\u8fc7\u4f7f\u7528property\u5c5e\u6027\uff0c\u80fd\u591f\u7b80\u5316\u8c03\u7528\u8005\u5728\u83b7\u53d6\u6570\u636e\u7684\u6d41\u7a0b\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#property-","title":"property\u5c5e\u6027-\u5e94\u7528","text":"","tags":["Python"]},{"location":"python/pysyntax/property/#1-gettersetter","title":"1. \u79c1\u6709\u5c5e\u6027\u6dfb\u52a0getter\u548csetter\u65b9\u6cd5","text":"Python<pre><code>class Money(object):\n    def __init__(self):\n        self.__money = 0\n\n    def getMoney(self):\n        return self.__money\n\n    def setMoney(self, value):\n        if isinstance(value, int):\n            self.__money = value\n        else:\n            print(\"error:\u4e0d\u662f\u6574\u578b\u6570\u5b57\")\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#2-propertygettersetter","title":"2. \u4f7f\u7528property\u5347\u7ea7getter\u548csetter\u65b9\u6cd5","text":"Python<pre><code>class Money(object):\n    def __init__(self):\n        self.__money = 0\n\n    def getMoney(self):\n        return self.__money\n\n    def setMoney(self, value):\n        if isinstance(value, int):\n            self.__money = value\n        else:\n            print(\"error:\u4e0d\u662f\u6574\u578b\u6570\u5b57\")\n    # \u5b9a\u4e49\u4e00\u4e2a\u5c5e\u6027\uff0c\u5f53\u5bf9\u8fd9\u4e2amoney\u8bbe\u7f6e\u503c\u65f6\u8c03\u7528setMoney,\u5f53\u83b7\u53d6\u503c\u65f6\u8c03\u7528getMoney\n    money = property(getMoney, setMoney)  \na = Money()\na.money = 100  # \u8c03\u7528setMoney\u65b9\u6cd5\nprint(a.money)  # \u8c03\u7528getMoney\u65b9\u6cd5\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/property/#3-propertygettersetter","title":"3. \u4f7f\u7528property\u53d6\u4ee3getter\u548csetter\u65b9\u6cd5","text":"<p>\u91cd\u65b0\u5b9e\u73b0\u4e00\u4e2a\u5c5e\u6027\u7684\u8bbe\u7f6e\u548c\u8bfb\u53d6\u65b9\u6cd5,\u53ef\u505a\u8fb9\u754c\u5224\u5b9a Python<pre><code>class Money(object):\n    def __init__(self):\n        self.__money = 0\n    # \u4f7f\u7528\u88c5\u9970\u5668\u5bf9money\u8fdb\u884c\u88c5\u9970\uff0c\u90a3\u4e48\u4f1a\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2a\u53ebmoney\u7684\u5c5e\u6027\uff0c\u5f53\u8c03\u7528\u83b7\u53d6money\u7684\u503c\u65f6\uff0c\u8c03\u7528\u88c5\u9970\u7684\u65b9\u6cd5\n\n    @property\n    def money(self):\n        return self.__money\n    # \u4f7f\u7528\u88c5\u9970\u5668\u5bf9money\u8fdb\u884c\u88c5\u9970\uff0c\u5f53\u5bf9money\u8bbe\u7f6e\u503c\u65f6\uff0c\u8c03\u7528\u88c5\u9970\u7684\u65b9\u6cd5\n\n    @money.setter\n    def money(self, value):\n        if isinstance(value, int):\n            self.__money = value\n        else:\n            print(\"error:\u4e0d\u662f\u6574\u578b\u6570\u5b57\")\n\na = Money()\na.money = 100\nprint(a.money)\n</code></pre></p>","tags":["Python"]},{"location":"python/pysyntax/py_basics/","title":"Python\u57fa\u7840\u77e5\u8bc6\u68b3\u7406","text":"","tags":["Python"]},{"location":"python/pysyntax/py_basics/#_1","title":"\u5173\u952e\u5b57\u6e05\u5355","text":"\u5173\u952e\u5b57 \u63cf\u8ff0 and \u903b\u8f91\u4e0e or \u903b\u8f91\u6216 not \u903b\u8f91\u975e if \u6761\u4ef6\u8bed\u53e5\uff0c\u5e38\u4e0eelse\u3001elif\u7ed3\u5408\u4f7f\u7528 elif \u6761\u4ef6\u8bed\u53e5\uff0c\u5e38\u4e0eif\u3001else\u7ed3\u5408\u4f7f\u7528 else \u6761\u4ef6\u8bed\u53e5\uff0c\u4e0eif\u3001elif\u7ed3\u5408\u4f7f\u7528\uff1b\u4e5f\u53ef\u7528\u4e8e\u5f02\u5e38\u6216\u5faa\u73af\u8bed\u53e5 for for\u5faa\u73af\u8bed\u53e5 while while\u5faa\u73af\u8bed\u53e5 True \u5e03\u5c14\u503c\uff0c\u8868\u793a\u771f False \u5e03\u5c14\u503c\uff0c\u8868\u793a\u5047 continue \u8df3\u51fa\u672c\u6b21\u5faa\u73af\uff0c\u65ad\u7eed\u6267\u884c\u4e0b\u6b21\u5faa\u73af break \u4e2d\u65ad\u6574\u4e2a\u5faa\u73af pass \u7a7a\u7684\u7c7b\u3001\u65b9\u6cd5\u548c\u51fd\u6570\u7684\u5360\u4f4d\u7b26 try \u7528\u4e8e\u5f02\u5e38\u6355\u83b7\uff0c\u4e0eexcept\u3001finally\u3001else\u7ed3\u5408\u4f7f\u7528 except \u6355\u83b7\u5f02\u5e38\u540e\u7684\u64cd\u4f5c\u4ee3\u7801\u5757\uff0c\u4e0etry\u3001finally\u3001else\u7ed3\u5408\u4f7f\u7528 finally \u51fa\u73b0\u5f02\u5e38\u540e\uff0c\u59cb\u7ec8\u8981\u6267\u884cfinally\u5305\u542b\u7684\u4ee3\u7801\u5757\uff0c\u4e0etry\u3001except\u7ed3\u5408\u4f7f\u7528 raise \u629b\u51fa\u5f02\u5e38 from \u7528\u4e8e\u5bfc\u5165\u6a21\u5757\uff0c\u4e0eimport\u7ed3\u5408\u4f7f\u7528 import \u7528\u4e8e\u5bfc\u5165\u6a21\u5757\uff0c\u4e0efrom\u7ed3\u5408\u4f7f\u7528 def \u5b9a\u4e49\u51fd\u6570\u6216\u65b9\u6cd5 return \u51fd\u6570\u6216\u65b9\u6cd5\u7684\u8fd4\u56de\u503c class \u5b9a\u4e49\u7c7b lambda \u533f\u540d\u51fd\u6570 del \u5220\u9664\u53d8\u91cf\u6216\u67d0\u4e2a\u5e8f\u5217\u4e2d\u7684\u503c global \u5b9a\u4e49\u5168\u5c40\u53d8\u91cf\u7684\u6807\u8bc6\u7b26 nonlocal \u58f0\u660e\u4e00\u4e2a\u975e\u5168\u5c40\u53d8\u91cf\uff0c\u7528\u4e8e\u6807\u8bc6\u5916\u90e8\u4f5c\u7528\u57df\u7684\u53d8\u91cf in \u5224\u65ad\u67d0\u4e2a\u53d8\u91cf\u662f\u5426\u5728\u5e8f\u5217\u4e2d is \u5224\u65ad\u662f\u5426\u662f\u540c\u4e00\u4e2a\u53d8\u91cf None \u7a7a\uff0c\u5176\u7c7b\u578b\u4e3a\uff1aNoneType assert \u7528\u4e8e\u8c03\u8bd5\u3001\u65ad\u8a00 as \u521b\u5efa\u522b\u540d with \u4e0a\u4e0b\u6587\u6807\u8bc6\u7b26\uff0c\u5e38\u4e0eopen\u4f7f\u7528\uff0c\u7528\u4e8e\u8bfb\u5199\u6587\u4ef6 yield \u751f\u6210\u5668\u6807\u8bc6\u7b26\uff0c\u7ed3\u675f\u4e00\u4e2a\u51fd\u6570","tags":["Python"]},{"location":"python/pysyntax/py_basics/#_2","title":"\u57fa\u672c\u6570\u636e\u7c7b\u578b","text":"\u7c7b\u522b\u540d\u79f0 \u7c7b\u522b\u63cf\u8ff0 \u7c7b\u578b\u5206\u7c7b Number \u6570\u5b57 \u4e0d\u53ef\u53d8 String \u5b57\u7b26\u4e32 \u4e0d\u53ef\u53d8 Tuple \u5143\u7ec4 \u4e0d\u53ef\u53d8 List \u5217\u8868 \u53ef\u53d8 Set \u96c6\u5408 \u53ef\u53d8 Dict \u5b57\u5178 \u53ef\u53d8","tags":["Python"]},{"location":"python/pysyntax/py_basics/#_3","title":"\u6761\u4ef6\u8bed\u53e5","text":"Python<pre><code>if \u8868\u8fbe\u5f0f1:\n    \u8bed\u53e5\n    if \u8868\u8fbe\u5f0f2:\n        \u8bed\u53e5\n    elif \u8868\u8fbe\u5f0f3:\n        \u8bed\u53e5\n    else:\n        \u8bed\u53e5\nelif \u8868\u8fbe\u5f0f4:\n    \u8bed\u53e5\nelse:\n    \u8bed\u53e5\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/py_basics/#_4","title":"\u5faa\u73af\u8bed\u53e5","text":"<ul> <li> <p>while\u5faa\u73af Python<pre><code># \u8868\u793a1\uff1a\nwhile \u5224\u65ad\u6761\u4ef6(condition)\uff1a\n    \u6267\u884c\u8bed\u53e5(statements)\u2026\u2026\n\n\n# \u8868\u793a2\uff1a\nwhile &lt;expr&gt;:\n    &lt;statement(s)&gt;\nelse:\n    &lt;additional_statement(s)&gt;\n</code></pre></p> </li> <li> <p>for\u5faa\u73af Python<pre><code>for &lt;variable&gt; in &lt;sequence&gt;:\n    &lt;statements&gt;\nelse:\n    &lt;statements&gt;\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/py_basics/#_5","title":"\u51fd\u6570\u8868\u793a","text":"<ul> <li> <p>\u5b9e\u540d\u51fd\u6570 Python<pre><code>def \u51fd\u6570\u540d\uff08\u53c2\u6570\u5217\u8868\uff09:\n    \u51fd\u6570\u4f53\n</code></pre></p> </li> <li> <p>\u533f\u540d\u51fd\u6570 Python<pre><code>lambda [arg1 [,arg2,.....argn]]:expression\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/py_basics/#_6","title":"\u7c7b\u8868\u793a","text":"Python<pre><code>class ClassName:\n    &lt;statement-1&gt;\n    .\n    .\n    .\n    &lt;statement-N&gt;\n\n\nclass DerivedClassName(Base1, Base2, Base3):\n    &lt;statement-1&gt;\n    .\n    .\n    .\n    &lt;statement-N&gt;\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/py_basics/#_7","title":"\u5f02\u5e38\u5904\u7406","text":"Python<pre><code>try:\n    \u6267\u884c\u4ee3\u7801\nexcept Exception as e:\n    \u53d1\u751f\u5f02\u5e38\u65f6\u6267\u884c\u7684\u4ee3\u7801\nelse:\n    \u6ca1\u6709\u5f02\u5e38\u65f6\u6267\u884c\u7684\u4ee3\u7801\nfinally:\n    \u4e0d\u7ba1\u6709\u6ca1\u6709\u5f02\u5e38\u90fd\u4f1a\u6267\u884c\u7684\u4ee3\u7801\n</code></pre>","tags":["Python"]},{"location":"python/pysyntax/py_gc/","title":"python\u4e2d\u7684GC","text":"","tags":["Python"]},{"location":"python/pysyntax/py_gc/#python","title":"Python\u5783\u573e\u56de\u6536\u673a\u5236","text":"<p>Python GC\u4e3b\u8981\u4f7f\u7528\u5f15\u7528\u8ba1\u6570\uff08reference counting\uff09\u6765\u8ddf\u8e2a\u548c\u56de\u6536\u5783\u573e\u3002\u5728\u5f15\u7528\u8ba1\u6570\u7684\u57fa\u7840\u4e0a\uff0c\u901a\u8fc7\u201c\u6807\u8bb0-\u6e05\u9664\u201d\uff08mark and sweep\uff09\u89e3\u51b3\u5bb9\u5668\u5bf9\u8c61\u53ef\u80fd\u4ea7\u751f\u7684\u5faa\u73af\u5f15\u7528\u95ee\u9898\uff0c\u901a\u8fc7\u201c\u5206\u4ee3\u56de\u6536\u201d\uff08generation collection\uff09\u4ee5\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u65b9\u6cd5\u63d0\u9ad8\u5783\u573e\u56de\u6536\u6548\u7387\u3002</p>","tags":["Python"]},{"location":"python/pysyntax/py_gc/#1","title":"1 \u5f15\u7528\u8ba1\u6570","text":"<p>PyObject\u662f\u6bcf\u4e2a\u5bf9\u8c61\u5fc5\u6709\u7684\u5185\u5bb9\uff0c\u5176\u4e2dob_refcnt\u5c31\u662f\u505a\u4e3a\u5f15\u7528\u8ba1\u6570\u3002\u5f53\u4e00\u4e2a\u5bf9\u8c61\u6709\u65b0\u7684\u5f15\u7528\u65f6\uff0c\u5b83\u7684ob_refcnt\u5c31\u4f1a\u589e\u52a0\uff0c\u5f53\u5f15\u7528\u5b83\u7684\u5bf9\u8c61\u88ab\u5220\u9664\uff0c\u5b83\u7684ob_refcnt\u5c31\u4f1a\u51cf\u5c11.\u5f15\u7528\u8ba1\u6570\u4e3a0\u65f6\uff0c\u8be5\u5bf9\u8c61\u751f\u547d\u5c31\u7ed3\u675f\u4e86\u3002 \u4f18\u70b9:</p> <ol> <li>\u7b80\u5355</li> <li>\u5b9e\u65f6\u6027</li> </ol> <p>\u7f3a\u70b9:</p> <ol> <li>\u7ef4\u62a4\u5f15\u7528\u8ba1\u6570\u6d88\u8017\u8d44\u6e90</li> <li>\u5faa\u73af\u5f15\u7528</li> </ol>","tags":["Python"]},{"location":"python/pysyntax/py_gc/#2-","title":"2 \u6807\u8bb0-\u6e05\u9664\u673a\u5236","text":"<p>\u57fa\u672c\u601d\u8def\u662f\u5148\u6309\u9700\u5206\u914d\uff0c\u7b49\u5230\u6ca1\u6709\u7a7a\u95f2\u5185\u5b58\u7684\u65f6\u5019\u4ece\u5bc4\u5b58\u5668\u548c\u7a0b\u5e8f\u6808\u4e0a\u7684\u5f15\u7528\u51fa\u53d1\uff0c\u904d\u5386\u4ee5\u5bf9\u8c61\u4e3a\u8282\u70b9\u3001\u4ee5\u5f15\u7528\u4e3a\u8fb9\u6784\u6210\u7684\u56fe\uff0c\u628a\u6240\u6709\u53ef\u4ee5\u8bbf\u95ee\u5230\u7684\u5bf9\u8c61\u6253\u4e0a\u6807\u8bb0\uff0c\u7136\u540e\u6e05\u626b\u4e00\u904d\u5185\u5b58\u7a7a\u95f4\uff0c\u628a\u6240\u6709\u6ca1\u6807\u8bb0\u7684\u5bf9\u8c61\u91ca\u653e\u3002</p>","tags":["Python"]},{"location":"python/pysyntax/py_gc/#3","title":"3 \u5206\u4ee3\u6280\u672f","text":"<p>\u5206\u4ee3\u56de\u6536\u7684\u6574\u4f53\u601d\u60f3\u662f\uff1a\u5c06\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u5185\u5b58\u5757\u6839\u636e\u5176\u5b58\u6d3b\u65f6\u95f4\u5212\u5206\u4e3a\u4e0d\u540c\u7684\u96c6\u5408\uff0c\u6bcf\u4e2a\u96c6\u5408\u5c31\u6210\u4e3a\u4e00\u4e2a\u201c\u4ee3\u201d\uff0c\u5783\u573e\u6536\u96c6\u9891\u7387\u968f\u7740\u201c\u4ee3\u201d\u7684\u5b58\u6d3b\u65f6\u95f4\u7684\u589e\u5927\u800c\u51cf\u5c0f\uff0c\u5b58\u6d3b\u65f6\u95f4\u901a\u5e38\u5229\u7528\u7ecf\u8fc7\u51e0\u6b21\u5783\u573e\u56de\u6536\u6765\u5ea6\u91cf\u3002 Python\u9ed8\u8ba4\u5b9a\u4e49\u4e86\u4e09\u4ee3\u5bf9\u8c61\u96c6\u5408\uff0c\u7d22\u5f15\u6570\u8d8a\u5927\uff0c\u5bf9\u8c61\u5b58\u6d3b\u65f6\u95f4\u8d8a\u957f\u3002 \u4e3e\u4f8b\uff1a \u5f53\u67d0\u4e9b\u5185\u5b58\u5757M\u7ecf\u8fc7\u4e863\u6b21\u5783\u573e\u6536\u96c6\u7684\u6e05\u6d17\u4e4b\u540e\u8fd8\u5b58\u6d3b\u65f6\uff0c\u6211\u4eec\u5c31\u5c06\u5185\u5b58\u5757M\u5212\u5230\u4e00\u4e2a\u96c6\u5408A\u4e2d\u53bb\uff0c\u800c\u65b0\u5206\u914d\u7684\u5185\u5b58\u90fd\u5212\u5206\u5230\u96c6\u5408B\u4e2d\u53bb\u3002\u5f53\u5783\u573e\u6536\u96c6\u5f00\u59cb\u5de5\u4f5c\u65f6\uff0c\u5927\u591a\u6570\u60c5\u51b5\u90fd\u53ea\u5bf9\u96c6\u5408B\u8fdb\u884c\u5783\u573e\u56de\u6536\uff0c\u800c\u5bf9\u96c6\u5408A\u8fdb\u884c\u5783\u573e\u56de\u6536\u8981\u9694\u76f8\u5f53\u957f\u4e00\u6bb5\u65f6\u95f4\u540e\u624d\u8fdb\u884c\uff0c\u8fd9\u5c31\u4f7f\u5f97\u5783\u573e\u6536\u96c6\u673a\u5236\u9700\u8981\u5904\u7406\u7684\u5185\u5b58\u5c11\u4e86\uff0c\u6548\u7387\u81ea\u7136\u5c31\u63d0\u9ad8\u4e86\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u96c6\u5408B\u4e2d\u7684\u67d0\u4e9b\u5185\u5b58\u5757\u7531\u4e8e\u5b58\u6d3b\u65f6\u95f4\u957f\u800c\u4f1a\u88ab\u8f6c\u79fb\u5230\u96c6\u5408A\u4e2d\uff0c\u5f53\u7136\uff0c\u96c6\u5408A\u4e2d\u5b9e\u9645\u4e0a\u4e5f\u5b58\u5728\u4e00\u4e9b\u5783\u573e\uff0c\u8fd9\u4e9b\u5783\u573e\u7684\u56de\u6536\u4f1a\u56e0\u4e3a\u8fd9\u79cd\u5206\u4ee3\u7684\u673a\u5236\u800c\u88ab\u5ef6\u8fdf\u3002</p>","tags":["Python"]},{"location":"python/pysyntax/py_gil/","title":"python\u4e2d\u7684GIL","text":"<p>\u63cf\u8ff0Python GIL\u7684\u6982\u5ff5\uff0c \u4ee5\u53ca\u5b83\u5bf9python\u591a\u7ebf\u7a0b\u7684\u5f71\u54cd\uff1f\u7f16\u5199\u4e00\u4e2a\u591a\u7ebf\u7a0b\u6293\u53d6\u7f51\u9875\u7684\u7a0b\u5e8f\uff0c\u5e76\u9610\u660e\u591a\u7ebf\u7a0b\u6293\u53d6\u7a0b\u5e8f\u662f\u5426\u53ef\u6bd4\u5355\u7ebf\u7a0b\u6027\u80fd\u6709\u63d0\u5347\uff0c\u5e76\u89e3\u91ca\u539f\u56e0\u3002</p> <p>Guido\u7684\u58f0\u660e\uff1ahttp://www.artima.com/forums/flat.jsp?forum=106&amp;thread=214235</p> <p>he language doesn't require the GIL -- it's only the CPython virtual machine that has historically been unable to shed it.</p> <ul> <li>Python\u8bed\u8a00\u548cGIL\u6ca1\u6709\u534a\u6bdb\u94b1\u5173\u7cfb\u3002\u4ec5\u4ec5\u662f\u7531\u4e8e\u5386\u53f2\u539f\u56e0\u5728Cpython\u865a\u62df\u673a(\u89e3\u91ca\u5668)\uff0c\u96be\u4ee5\u79fb\u9664GIL\u3002</li> <li>GIL\uff1a\u5168\u5c40\u89e3\u91ca\u5668\u9501\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u90fd\u9700\u8981\u5148\u83b7\u53d6GIL\uff0c\u4fdd\u8bc1\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u6267\u884c\u4ee3\u7801\u3002</li> <li>\u7ebf\u7a0b\u91ca\u653eGIL\u9501\u7684\u60c5\u51b5\uff1a \u5728IO\u64cd\u4f5c\u7b49\u53ef\u80fd\u4f1a\u5f15\u8d77\u963b\u585e\u7684system call\u4e4b\u524d,\u53ef\u4ee5\u6682\u65f6\u91ca\u653eGIL,\u4f46\u5728\u6267\u884c\u5b8c\u6bd5\u540e,\u5fc5\u987b\u91cd\u65b0\u83b7\u53d6GIL Python 3.x\u4f7f\u7528\u8ba1\u65f6\u5668\uff08\u6267\u884c\u65f6\u95f4\u8fbe\u5230\u9608\u503c\u540e\uff0c\u5f53\u524d\u7ebf\u7a0b\u91ca\u653eGIL\uff09\u6216Python 2.x\uff0ctickets\u8ba1\u6570\u8fbe\u5230100</li> <li>Python\u4f7f\u7528\u591a\u8fdb\u7a0b\u662f\u53ef\u4ee5\u5229\u7528\u591a\u6838\u7684CPU\u8d44\u6e90\u7684\u3002</li> <li>\u591a\u7ebf\u7a0b\u722c\u53d6\u6bd4\u5355\u7ebf\u7a0b\u6027\u80fd\u6709\u63d0\u5347\uff0c\u56e0\u4e3a\u9047\u5230IO\u963b\u585e\u4f1a\u81ea\u52a8\u91ca\u653eGIL\u9501</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/py_mem_manage/","title":"python\u4e2d\u7684\u5185\u5b58\u7ba1\u7406","text":"<ul> <li>\u53d8\u91cf\u65e0\u9700\u4e8b\u5148\u58f0\u660e\uff0c\u4e5f\u4e0d\u9700\u8981\u6307\u5b9a\u7c7b\u578b</li> <li>\u52a8\u6001\u8bed\u8a00\u7684\u7279\u6027</li> <li>\u7f16\u7a0b\u4e2d\u4e00\u822c\u65e0\u987b\u5173\u5fc3\u53d8\u91cf\u7684\u5b58\u4ea1\uff0c\u4e5f\u4e0d\u7528\u5173\u5fc3\u5185\u5b58\u7684\u7ba1\u7406</li> <li>python\u4f7f\u7528\u5f15\u7528\u8ba1\u6570\u8bb0\u5f55\u6240\u6709\u5bf9\u8c61\u7684\u5f15\u7528\u6570\uff1b</li> <li>\u5f53\u5bf9\u8c61\u5f15\u7528\u6570\u53d8\u4e3a0\u65f6\uff0c\u5b83\u5c31\u53ef\u4ee5\u88ab\u5783\u573e\u56de\u6536GC</li> <li>\u6280\u672f\u589e\u52a0\uff1a\u8d4b\u503c\u7ed9\u5176\u4ed6\u53d8\u91cf\u5c31\u589e\u52a0\u5f15\u7528\u8ba1\u6570\uff0c\u4f8b\u5982\uff1ax = 3; y = x;</li> <li>\u8ba1\u6570\u51cf\u5c11\uff1a<ul> <li>\u51fd\u6570\u8fd0\u884c\u7ed3\u675f\u65f6\uff0c\u5c40\u90e8\u53d8\u91cf\u5c31\u4f1a\u88ab\u81ea\u52a8\u9500\u6bc1\uff0c\u5bf9\u8c61\u5f15\u7528\u8ba1\u6570\u51cf\u5c11\uff1b</li> <li>\u53d8\u91cf\u8d4b\u503c\u7ed9\u5176\u4ed6\u5bf9\u8c61\uff0c\u4f8b\u5982\uff1ax =3;y=x,x=4;</li> </ul> </li> <li>\u6709\u5173\u6027\u80fd\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u8003\u8651\u53d8\u91cf\u7684\u5f15\u7528\u95ee\u9898\uff0c\u4f46\u662f\u8be5\u91ca\u653e\u5185\u5b58\uff0c\u8fd8\u662f\u5c3d\u91cf\u4e0d\u91ca\u653e\u5185\u5b58\uff0c\u770b\u9700\u6c42\uff1b</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/variable_comment/","title":"python\u53d8\u91cf\u4e0e\u6ce8\u91ca","text":"","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_1","title":"\u53d8\u91cf","text":"<p>\u7a0b\u5e8f\u4e2d\uff0c\u6570\u636e\u90fd\u662f\u4e34\u65f6\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u4e3a\u4e86\u66f4\u5feb\u901f\u67e5\u627e\u6216\u4f7f\u7528\u8fd9\u4e2a\u6570\u636e\uff0c\u901a\u5e38\u628a\u8fd9\u4e2a\u6570\u636e\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u4e4b\u540e\u5b9a\u4e49\u4e00\u4e2a\u540d\u79f0\uff0c\u8fd9\u4e2a\u540d\u79f0\u5c31\u662f\u53d8\u91cf - \u53d8\u91cf\u5c31\u662f\u7528\u6765\u6807\u8bb0\u6570\u636e\u5728\u5185\u5b58\u4e2d\u7684\u5b58\u50a8\u4f4d\u7f6e\u3002</p>","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_2","title":"\u547d\u540d\u89c4\u8303","text":"<p>\u89c4\u8303\u4e00\uff1a - \u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210 - \u4e0d\u80fd\u6570\u5b57\u5f00\u5934 - \u4e0d\u80fd\u4f7f\u7528\u5185\u7f6e\u5173\u952e\u5b57 - \u4e25\u683c\u533a\u5206\u5927\u5c0f\u5199</p> <p>\u89c4\u8303\u4e8c\uff1a - \u89c1\u540d\u77e5\u4e49\u3002 - \u5927\u9a7c\u5cf0\uff1a\u5373\u6bcf\u4e2a\u5355\u8bcd\u9996\u5b57\u6bcd\u90fd\u5927\u5199\uff0c\u4f8b\u5982\uff1a<code>MyName</code>\u3002 - \u5c0f\u9a7c\u5cf0\uff1a\u7b2c\u4e8c\u4e2a\uff08\u542b\uff09\u4ee5\u540e\u7684\u5355\u8bcd\u9996\u5b57\u6bcd\u5927\u5199\uff0c\u4f8b\u5982\uff1a<code>myName</code>\u3002 - \u4e0b\u5212\u7ebf\uff1a\u4f8b\u5982\uff1a<code>my_name</code>\u3002</p>","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_3","title":"\u57fa\u672c\u4f7f\u7528","text":"<ul> <li> <p>\u5b9a\u4e49\u53d8\u91cf Python<pre><code># \u53d8\u91cf\u540d = \u503c\nauthor = 'sswang'\nprint('Hello, {}'.format(author))  # \u8f93\u51fa\u6253\u5370\u65b9\u5f0f\u4e00\nprint(\"Hello, %s\" % author)  # \u8f93\u51fa\u6253\u5370\u65b9\u5f0f\u4e8c \nprint(f\"author is {author}\")  # \u8f93\u51fa\u6253\u5370\u65b9\u5f0f\u4e09\u3010\u76ee\u524d\u6700\u5e38\u7528\u7684\u65b9\u5f0f\u3011\n</code></pre></p> </li> <li> <p>\u4ea4\u6362\u53d8\u91cf Python<pre><code>author, reader = 'ssw', 'sswang'\nauthor, reader = reader, author\nprint(f\"author: {author} reader: {reader}\")\n</code></pre></p> </li> <li> <p>\u53d8\u91cf\u89e3\u5305</p> </li> <li> <p>\u666e\u901a\u89e3\u5305</p> <p>\u89e3\u5305\u662fpython\u91cc\u4e00\u79cd\u7279\u6b8a\u7684\u8d4b\u503c\u64cd\u4f5c\uff0c\u5141\u8bb8\u628a\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u6240\u6709\u6210\u5458\uff0c\u4e00\u6b21\u6027\u8d4b\u503c\u7ed9\u591a\u4e2a\u53d8\u91cf Python<pre><code>usernames = ['sswang1', 'sswang2']\nauthor, reader = usernames\nprint(f\"author: {author} reader: {reader}\")\n\nattrs = [1, ['sswang',100]]\nuser_id, (username, score)= attrs\nprint(f\"user_id:{user_id}\", f\"username:{username}\", f\"score:{score}\")\n</code></pre></p> </li> <li> <ul> <li>\u52a8\u6001\u89e3\u5305 <p>\u53ea\u8981\u4f7f\u7528\u53f7\u8868\u8fbe\u5f0f\uff08variables\uff09\u4f5c\u4e3a\u53d8\u91cf\u540d\uff0c\u5b83\u4fbf\u8d2a\u5a6a\u5730\u6355\u83b7\u591a\u4e2a\u503c\u5bf9\u8c61\uff0c\u5e76\u5c06\u6355\u83b7\u5230\u7684\u5185\u5bb9\u4f5c\u4e3a\u5217\u8868\u8d4b\u503c\u7ed9variables Python<pre><code>data = ['sswang','apple', 'orange', 'banana', 100]\nusername, *fruits, score = data\nprint(f\"username:{username}\", f\"fruits:{fruits}\", f\"score:{score}\")\n</code></pre></p> </li> </ul> </li> <li> <p>\u5207\u7247\u89e3\u5305</p> <p>\u76f8\u5bf9\u4e8e\u5207\u7247\uff0c\u52a8\u6001\u89e3\u5305\u770b\u4e0a\u53bb\u66f4\u4f18\u96c5\uff1b Python<pre><code>username, fruits, score = data[0], data[1:-1], data[-1]\nprint(f\"username:{username}\", f\"fruits:{fruits}\", f\"score:{score}\")\n</code></pre></p> </li> <li> <p>\u5728\u5faa\u73af\u8bed\u53e5\u4e2d\u4f7f\u7528 Python<pre><code>for username, score in [(\"sswang1\",'99'), (\"sswang2\",'98')]:\n    print(f\"username:{username}\", f\"score:{score}\")\n</code></pre></p> </li> </ul>","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_4","title":"\u53d8\u91cf\u6280\u5de7","text":"","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_","title":"\u6280\u5de7\u4e00\uff1a\u5584\u7528\u5355\u4e0b\u5212\u7ebf\u53d8\u91cf\u540d _","text":"<ul> <li>\u5e38\u88ab\u7528\u4f5c\u4e00\u4e2a\u65e0\u610f\u4e49\u7684\u5360\u4f4d\u7b26\uff0c\u82e5\u5728\u89e3\u5305\u8d4b\u503c\u65f6\u5ffd\u7565\u67d0\u4e9b\u53d8\u91cf\uff0c\u53ef\u4ee5\u4f7f\u7528 _\uff1b</li> <li>\u5728python\u7684\u4ea4\u4e92\u5f0f\u73af\u5883\u4e2d\uff0c\u5355\u4e0b\u5212\u7ebf\u53d8\u91cf\u8fd8\u6709\u53e6\u5916\u4e00\u4e2a\u542b\u4e49\uff1a\u9ed8\u8ba4\u4fdd\u5b58\u6211\u4eec\u8f93\u5165\u7684\u4e0a\u4e2a\u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c Python<pre><code>usernames = ['sswang1', 'sswang2']\ndata = ['sswang','apple', 'orange', 'banana', 100]\nauthor, _ = usernames  # \u5ffd\u7565\u5c55\u5f00\u65f6\u7684\u7b2c\u4e8c\u4e2a\u53d8\u91cf\uff1b\nusername, *_, score = data  # \u5ffd\u7565\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u53d8\u91cf\u4e4b\u95f4\u7684\u6240\u6709\u53d8\u91cf\n\n## \u5728python\u7684\u4ea4\u4e92\u5f0f\u73af\u5883\u4e2d\uff0c_ \u53d8\u91cf\u8fd8\u6709\u53e6\u5916\u4e00\u4e2a\u542b\u4e49\uff1a\u9ed8\u8ba4\u4fdd\u5b58\u6211\u4eec\u8f93\u5165\u7684\u4e0a\u4e2a\u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c\nIn [1]: \"data\".upper()\nOut[1]: 'DATA'\nIn [2]: print(_)\nDATA\n</code></pre></li> </ul>","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_5","title":"\u6280\u5de7\u4e8c\uff1a\u7f16\u7801\u65f6\u591a\u7ed9\u53d8\u91cf\u6ce8\u660e\u7c7b\u578b","text":"<ul> <li>\u52a8\u6001\u8bed\u8a00\u5728\u4f7f\u7528\u53d8\u91cf\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u7684\u7c7b\u578b\u58f0\u660e\uff0c\u5bf9\u4e8e\u5f00\u53d1\u8005\u6765\u8bf4\u662f\u4f18\u52bf\uff0c\u4f46\u5bf9\u4e8e\u8bfb\u8005\u6765\u8bf4\uff0c\u5176\u5b9e\u662f\u4e00\u4e2a\u52a3\u52bf\uff0c\u56e0\u4e3a\u8ba9\u4ee3\u7801\u53ef\u8bfb\u6027\u53d8\u5dee\u4e86</li> <li>\u5728\u7f16\u7801\u65f6\u5efa\u8bae\u5c3d\u53ef\u80fd\u591a\u7684\u4f7f\u7528\u7c7b\u578b\u6ce8\u89e3\uff0c\u5177\u4f53\u7684\u505a\u6cd5\u5c31\u662f\uff1a\u5728\u53d8\u91cf\u540d\u540e\u6dfb\u52a0\u7c7b\u578b\uff0c\u4f7f\u7528\u5192\u53f7\u5206\u9694\uff1b</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_6","title":"\u6ce8\u91ca","text":"<p>\u4ee3\u7801\u4f53\u73b0\u6280\u80fd\uff0c\u6ce8\u91ca\u4f53\u73b0\u7d20\u517b</p> <ul> <li>\u6ce8\u91ca\u662f\u4ee3\u7801\u975e\u5e38\u91cd\u8981\u7684\u7ec4\u6210\u90e8\u5206\uff0c\u901a\u5e38\u6765\u8bf4\uff0c\u6ce8\u91ca\u6cdb\u6307\u90a3\u4e9b\u4e0d\u5f71\u54cd\u4ee3\u7801\u5b9e\u9645\u884c\u4e3a\u7684\u6587\u5b57\uff0c\u5b83\u4eec\u4e3b\u8981\u8d77\u989d\u5916\u8bf4\u660e\u4f5c\u7528\u3002</li> </ul>","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_7","title":"\u6ce8\u91ca\u7684\u5206\u7c7b","text":"<ol> <li>\u4ee3\u7801\u5185\u6ce8\u91ca\uff08\u901a\u8fc7\u5728\u9996\u884c\u8f93\u5165#\u53f7\u6765\u8868\u793a\uff09</li> <li>\u51fd\u6570\u6587\u6863\uff0c\u4e5f\u79f0\u63a5\u53e3\u6ce8\u91ca</li> <li>\u5e38\u7528\u7684\u63a5\u53e3\u6ce8\u91ca\u98ce\u683c<ol> <li>Sphinx\u6587\u6863\u98ce\u683c</li> <li>Google\u98ce\u683c Python<pre><code># Sphinx\u98ce\u683c\nclass Person:\n    \"\"\"\u4eba\n\n    param name: \u59d3\u540d\n    param age: \u5e74\u9f84\n    param favorite_color: \u6700\u559c\u6b22\u7684\u989c\u8272\n    \"\"\"\n    def __init__(self, name, age, favorite_color) -&gt; None:\n        self.name = name\n        self.age = age\n        self.favorite_color = favorite_color\n</code></pre></li> </ol> </li> </ol>","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_8","title":"\u574f\u7684\u6ce8\u91ca\u65b9\u5f0f","text":"<ol> <li>\u7528\u6ce8\u91ca\u5c4f\u853d\u4ee3\u7801</li> <li>\u597d\u7684\u505a\u6cd5\u662f\uff0c\u5c06\u4e0d\u9700\u8981\u7684\u4ee3\u7801\u76f4\u63a5\u5220\u9664\uff0c\u800c\u4e0d\u662f\u6ce8\u91ca\uff0c\u5982\u679c\u672a\u6765\u771f\u7684\u9700\u8981\u7528\u5230\u8fd9\u4e9b\u4e45\u4ee3\u7801\uff0c\u53ef\u4ee5\u53bbgit\u5386\u53f2\u91cc\u627e</li> <li>\u7528\u6ce8\u91ca\u590d\u8ff0\u4ee3</li> <li>\u597d\u7684\u505a\u6cd51\uff1a\u5e94\u8be5\u63cf\u8ff0\u4ee3\u7801\u4e4b\u5916\u7684\u8bf4\u660e\u6027\u6587\u5b57\uff0c\u5e94\u8be5\u5c3d\u91cf\u63d0\u4f9b\u8bfb\u8005\u65e0\u6cd5\u76f4\u63a5\u4ece\u4ee3\u7801\u91cc\u8bfb\u51fa\u6765\u7684\u4fe1\u606f\uff0c\u63cf\u8ff0\u4ee3\u7801\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u505a\uff0c\u800c\u4e0d\u662f\u7b80\u5355\u7684\u53d9\u8ff0\u4ee3\u7801\u672c\u8eab</li> <li> <p>\u597d\u7684\u505a\u6cd52\uff1a \u6307\u5f15\u6027\u6ce8\u91ca\uff0c\u8fd9\u79cd\u6ce8\u91ca\u5e76\u4e0d\u662f\u590d\u8ff0\u4ee3\u7801\uff0c\u800c\u662f\u7b80\u660e\u627c\u8981\u7684\u6982\u62ec\u4ee3\u7801\u529f\u80fd\uff0c\u8d77\u5230\u4ee3\u7801\u5bfc\u8bfb\u7684\u4f5c\u7528\u3002 Python<pre><code># bad\n# \u8c03\u7528strip()\u53bb\u6389\u7a7a\u683c\ninput_string = input_string.strip()\n\n# good\n# \u5982\u679c\u76f4\u63a5\u628a\u7a7a\u683c\u7684\u8f93\u5165\u4f20\u9012\u5230\u540e\u7aef\u5904\u7406\uff0c\u53ef\u80fd\u4f1a\u9020\u6210\u540e\u7aef\u670d\u52a1\u5d29\u6e83\n# \u56e0\u6b64\u4f7f\u7528strip()\u53bb\u6389\u9996\u5c3e\u7a7a\u683c\ninput_string = input_string.strip()\n</code></pre></p> </li> <li> <p>\u5f04\u9519\u63a5\u53e3\u6ce8\u91ca\u7684\u53d7\u4f17</p> </li> <li>\u597d\u7684\u505a\u6cd5\uff1a\u5e94\u8be5\u7ad9\u5728\u51fd\u6570\u8bbe\u8ba1\u8005\u7684\u89d2\u5ea6\uff0c\u7740\u91cd\u63cf\u8ff0\u51fd\u6570\u7684\u529f\u80fd\u548c\u53c2\u6570\u8bf4\u660e Python<pre><code># bad\ndef resize_image(image, size):\n    \"\"\"\u5c06\u56fe\u7247\u7f29\u653e\u5230\u6307\u5b9a\u5c3a\u5bf8\uff0c\u5e76\u8fd4\u56de\u65b0\u7684\u56fe\u7247\n\n    \u8be5\u51fd\u6570\u5c06\u4f7f\u7528Pilot\u6a21\u5757\u8bfb\u53d6\u5bf9\u8c61\uff0c\u7136\u540e\u8c03\u7528.resize()\u65b9\u6cd5\u5c06\u5176\u7f29\u653e\u5230\u6307\u5b9a\u5c3a\u5bf8\u3002\n    \u4f46\u7531\u4e8ePilot\u6a21\u5757\u81ea\u8eab\u9650\u5236\uff0c\u8fd9\u4e2a\u51fd\u6570\u4e0d\u80fd\u5f88\u597d\u7684\u5904\u7406\u8fc7\u5927\u7684\u6587\u4ef6\uff0c\u5f53\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc75MB\u65f6\uff0c\n    resize()\u65b9\u6cd5\u7684\u6027\u80fd\u4f1a\u56e0\u4e3a\u5185\u5b58\u5206\u914d\u95ee\u9898\u6025\u5267\u4e0b\u964d\uff0c\u5bf9\u4e8e\u8d85\u8fc75MB\u7684\u56fe\u7247\u6587\u4ef6\uff0c\u8bf7\u4f7f\u7528resize_big_iamge()\u66ff\u4ee3\n\n    :param iamge: \u56fe\u7247\u6587\u4ef6\u5bf9\u8c61\n    :param size: \u5305\u542b\u5bbd\u9ad8\u7684\u5143\u7ec4\uff1a\uff08width, height\uff09\n    :return : \u65b0\u56fe\u7247\u5bf9\u8c61\n    \"\"\"\n    ...\n\n# good\ndef resize_image(image, size):\n    \"\"\"\u5c06\u56fe\u7247\u7f29\u653e\u5230\u6307\u5b9a\u5c3a\u5bf8\uff0c\u5e76\u8fd4\u56de\u65b0\u7684\u56fe\u7247\n\n    \u6ce8\u610f\uff1a \u5f53\u6587\u4ef6\u8d85\u8fc75MB\u65f6\uff0c\u8bf7\u4f7f\u7528resize_big_image()\n\n    :param iamge: \u56fe\u7247\u6587\u4ef6\u5bf9\u8c61\n    :param size: \u5305\u542b\u5bbd\u9ad8\u7684\u5143\u7ec4\uff1a\uff08width, height\uff09\n    :return : \u65b0\u56fe\u7247\u5bf9\u8c61\n    \"\"\"\n</code></pre></li> </ol>","tags":["Python"]},{"location":"python/pysyntax/variable_comment/#_9","title":"\u6700\u4f73\u5b9e\u8df5\uff1a","text":"<ol> <li>\u6309\u7167\u4ee3\u7801\u7684\u804c\u8d23\u6765\u7ec4\u7ec7\u4ee3\u7801\uff1a\u8ba9\u53d8\u91cf\u7684\u5b9a\u4e49\u9760\u8fd1\u4f7f\u7528</li> <li>\u4fdd\u6301\u53d8\u91cf\u5728\u4e24\u4e2a\u65b9\u9762\u7684\u4e00\u81f4\u6027\uff1a\u540d\u5b57\u4e00\u81f4\u6027\u548c\u7c7b\u578b\u4e00\u81f4\u6027</li> <li>\u9002\u5f53\u7684\u5b9a\u4e49\u4e34\u65f6\u53d8\u91cf\u53ef\u4ee5\u63d0\u5347\u4ee3\u7801\u53ef\u8bfb\u6027</li> <li>\u540c\u4e00\u4f5c\u7528\u57df\u5185\u4e0d\u8981\u6709\u592a\u591a\u53d8\u91cf\uff0c\u89e3\u51b3\u65b9\u6cd5\uff1a\u63d0\u70bc\u6570\u636e\u7c7b\u3001\u62c6\u5206\u51fd\u6570</li> <li>\u80fd\u4e0d\u5b9a\u4e49\u53d8\u91cf\u5c31\u522b\u5b9a\u4e49\uff0c\u4e0d\u5fc5\u8981\u7684\u53d8\u91cf\u4f1a\u8ba9\u4ee3\u7801\u663e\u5f97\u5197\u957f\u3001\u5570\u55e6</li> <li>\u663e\u5f0f\u4f18\u4e8e\u9690\u5f0f\uff1a\u4e0d\u8981\u4f7f\u7528locals()\u6279\u91cf\u83b7\u53d6\u53d8\u91cf</li> <li>\u7a7a\u884c\u4e5f\u7ea2\u8336\u4e00\u79cd\u201c\u6ce8\u91ca\u201d\uff0c\u9002\u5f53\u7684\u7a7a\u884c\u8ba9\u4ee3\u7801\u66f4\u6613\u8bfb</li> <li>\u628a\u63a5\u53e3\u6ce8\u91ca\u5f53\u6210\u4e00\u79cd\u51fd\u6570\u8bbe\u8ba1\u5de5\u5177\uff1a\u5148\u5199\u6ce8\u91ca\uff0c\u540e\u5199\u4ee3\u7801</li> </ol>","tags":["Python"]},{"location":"thinking/","title":"Thinking","text":"<p>Info</p> <p>\u8fd9\u91cc\u662f\u4e2a\u4eba\u7684\u968f\u601d\u3001\u968f\u60f3\u3001\u53ca\u611f\u609f\uff0c\u5199\u70b9\u6280\u672f\u4e4b\u5916\u7684\u4e1c\u897f...</p>"},{"location":"thinking/posts/01_smart_to_do_things/","title":"\u5982\u4f55\u660e\u660e\u767d\u767d\u7684\u505a\u4e8b","text":"","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_2","title":"\u505a\u4e8b\u7684\u6838\u5fc3\u4e09\u8981\u7d20","text":"<ol> <li>\u7406\u6e05\u695a</li> <li>\u8bb2\u660e\u767d</li> <li>\u505a\u5230\u4f4d</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_3","title":"\u5982\u4f55\u7406\u6e05\u695a\u95ee\u9898","text":"<ol> <li>\u6700\u539f\u59cb\u7684\u9700\u6c42/\u95ee\u9898\u662f\u4ec0\u4e48\uff1f</li> <li>\u4e3a\u4ec0\u4e48\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f\u4e0d\u89e3\u51b3\u4f1a\u6709\u4ec0\u4e48\u5f71\u54cd\uff0c\u4e0d\u505a\u6548\u7387\u6700\u9ad8</li> <li>\u95ee\u9898\u53d1\u751f\u7684\u6839\u672c\u539f\u56e0\u662f\u4ec0\u4e48\uff1f</li> <li>\u8fd9\u4e2a\u5b9a\u4e49\u5bf9\u4e8e\u5176\u4ed6\u4eba\u80fd\u5426\u542c\u7684\u61c2\uff1f</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_4","title":"\u5e38\u7528\u62c6\u89e3\u95ee\u9898\u7684\u601d\u7ef4\u6a21\u578b","text":"<ul> <li>MECE\u5206\u89e3\u6cd5\uff1a</li> <li>\u76f8\u5bf9\u72ec\u7acb\uff0c\u5b8c\u5168\u7a77\u5c3d\u7684\u5206\u89e3\u51fa\u6700\u5c0f\u7684\u95ee\u9898 \u2014&gt; \u5206\u7c7b</li> <li>\u5f52\u56e0\u56de\u6eaf\u6cd5\uff1a</li> <li>\u901a\u8fc7\u4e0d\u540c\u5730\u53cd\u63a8\u8ffd\u95ee\uff0c\u4ece\u800c\u627e\u5230\u6df1\u5c42\u7684\u539f\u56e0 \u2014&gt; \u5047\u8bbe</li> <li>5W2H\uff1a</li> <li>What\u3001Who\u3001Where\u3001When\u3001Why\u3001How\u3001How Much \u2014&gt; \u89d2\u5ea6</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#mece","title":"MECE\u5206\u89e3\u6cd5","text":"<p>Mutually Exclusive\u5404\u90e8\u5206\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0cCollectively Exhaustive\u6240\u6709\u90e8\u5206\u5b8c\u5168\u7a77\u5c3d\u3002\u7528\u4e8e\u5c06\u4e00\u4e2a\u5927\u95ee\u9898\u62c6\u5206\u6210\u82e5\u5e72\u4e2a\u4e92\u76f8\u6392\u65a5\u4e14\u96c6\u5408\u5b8c\u5907\u7684\u5c0f\u95ee\u9898\uff0c\u8ba9\u4f60\u5f88\u6e05\u6670\u7b80\u5355\u7684\u89e3\u51b3\u3002</p> <ul> <li>\u4e8c\u5206\u6cd5\uff1a\u627e\u4e00\u4e2a\u7ef4\u5ea6\uff0c\u5206\u62102\u4e2a\u90e8\u5206\uff0c\u5982\u4e2d\u56fd/\u5916\u56fd</li> <li>\u8fc7\u7a0b\u6cd5\uff1a\u4e8b\u60c5\u53d1\u5c55\u7684\u65f6\u95f4\u987a\u5e8f\uff0c\u6d41\u7a0b\uff0c\u7a0b\u5e8f\uff0c\u5982SOP</li> <li>\u8981\u7d20\u6cd5\uff1a\u6839\u636e\u4e8b\u7269\u91cd\u8981\u7684\u51e0\u4e2a\u8981\u7d20\u8fdb\u884c\u5212\u5206\uff0c\u5982\u5938\u4eba</li> <li>\u516c\u5f0f\u6cd5\uff1a\u7b80\u5355\u6570\u5b66\u516c\u5f0f\uff0c\u5982 \u8017\u65f6=\u524d\u7aef+\u4f20\u8f93+\u63a5\u53e3</li> <li>\u77e9\u9635\u6cd5\uff1a\u5c06\u4e00\u4e2a\u4e8b\u7269\u62c6\u5206\u6210\u4e24\u7ef4\u5ea6\u53d8\u62104\u4e2a\u8c61\u9650\uff0c\u5982\u91cd\u8981\u7d27\u6025</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_5","title":"\u5f52\u56e0\u56de\u6eaf\u6cd5","text":"<p>\u4e00\u79cd\u901a\u8fc7 \u9010\u6b65\u6392\u67e5\u548c\u5206\u6790\u591a\u4e2a\u53ef\u80fd \u7684\u539f\u56e0\uff0c\u6765\u5bfb\u627e\u4e8b\u4ef6\u771f\u6b63\u7684\u539f\u56e0\u7684\u65b9\u6cd5\uff0c\u4ece\u4e8b\u4ef6\u53d1\u751f\u540e\u7684\u7ed3\u679c\u5165\u624b\uff0c\u9006\u5e8f\u63a8\u65ad\uff0c\u6700\u7ec8\u627e\u5230\u771f\u6b63\u7684\u539f\u56e0\u3002 eg: \u4e00\u4e2a\u89c6\u9891\u5ba2\u6237\u7aef\uff0c\u64ad\u653e\u7a33\u5b9a\u6027\u6570\u636e\u7a81\u7136\u53d1\u751f\u4e8630%\u7684\u4e0b\u964d\uff0c\u5982\u4f55\u7528\u627e\u5230\u95ee\u9898</p> <ul> <li>\u662f\u4e0d\u662f\u7cfb\u7edf\u7684\u539f\u56e0-&gt;\u662f\u4e0d\u662f\u7f51\u7edc\u7684\u95ee\u9898-&gt;\u662f\u4e0d\u662f\u624b\u673a\u54c1\u724c\u7684\u539f\u56e0-&gt;\u662f\u4e0d\u662fApp\u7248\u672c\u95ee\u9898</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#5w2h","title":"5W2H\u6cd5","text":"<ul> <li>What\u3001Who\u3001Where\u3001When\u3001Why\u3001How\u3001How Much</li> <li>\u5728 \u8ba1\u5212\u505a\u4e00\u6b3e\u4ea7\u54c1 \u7684\u65f6\u5019\uff0c\u7528\u8fd9\u4e2a\u65b9\u6cd5\u6765\u660e\u786e\u9700\u6c42\u75db\u70b9</li> <li>\u7528\u4e8e\u81ea\u95ee\u81ea\u7b54\u7684\u65b9\u5f0f\u6765 \u53d1\u89c9\u95ee\u9898\u6df1\u5c42\u6b21\u7684\u539f\u56e0</li> </ul> <p>*eg: *\u8fd9\u662f\u4ec0\u4e48\u4ea7\u54c1-&gt;\u4ec0\u4e48\u65f6\u5019\u4e0a\u7ebf-&gt;\u5728\u4ec0\u4e48\u5730\u65b9\u4f7f\u7528-&gt;\u4e3a\u4ec0\u4e48\u9700\u8981\u505a\u5b83-&gt;\u4e3b\u8981\u7528\u6237\u662f\u8c01-&gt;\u600e\u4e48\u6765\u5b9e\u73b0-&gt;\u9700\u8981\u82b1\u8d39\u5565</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_6","title":"\u5982\u4f55\u5224\u65ad\u95ee\u9898\u7406\u6e05\u695a\u4e86","text":"<ul> <li>\u8fd8\u6709\u6ca1\u6709\u61f5\u903c\u7684\u5730\u65b9\u5417\uff1f</li> <li>\u8fd8\u6709\u6ca1\u6709\u6ca1\u6709\u8003\u8651\u5230\u5230\u7684\u70b9\uff1f</li> <li>\u4f60\u5df2\u7ecf\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\u56f0\u607c\u4e86</li> <li>\u65e0\u8bba\u522b\u4e2a\u600e\u4e48argue\uff0c\u6211\u57fa\u672c\u4e0a\u53ef\u4ee5\u7b54\u5f97\u4e0a\u6765</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_7","title":"\u5982\u4f55\u8bb2\u660e\u767d\u95ee\u9898","text":"<p>\u5982\u4f55\u8ba9\u5176\u4ed6\u4eba\u4e5f\u5f88\u6e05\u695a\u8fd9\u4e2a\u4e8b\u60c5</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_8","title":"\u5982\u4f55\u5199\u4e00\u4e2a\u5f88\u660e\u767d\u7684\u6587\u6863","text":"<p>\u5224\u65ad\u5982\u4f55\u5199\u660e\u767d\u4e86\uff1a\u522b\u4eba\u770b\u7740\u4f60\u7684\u6587\u6863\uff0c\u4e5f\u5c31\u53ef\u4ee5\u5f00\u59cb\u5199\u4ee3\u7801\u4e86</p> <ol> <li>\u7ec4\u7ec7\u7ed3\u6784\u6709\u903b\u8f91\u611f\uff0c\u6807\u9898\u548c\u526f\u6807\u9898\u3001\u6bb5\u843d\u5206\u7ec4\uff0c\u8111\u56fe\u5148\u884c</li> <li>\u7b80\u5355\u63a5\u5730\u6c14\u7684\u8868\u8fbe\uff0c\u6e05\u6670\u6613\u7406\u89e3\u7684\u63cf\u8ff0\uff0c\u770b\u5f97\u61c2\uff0c\u8bb2\u903b\u8f91</li> <li>\u5f88\u6070\u5f53\u7684\u4f8b\u5b50\uff0c\u5b9e\u9645\u6216\u8005\u6a21\u62df\u7684\u6848\u4f8b\u3001Demo\u7684\u6848\u4f8b\u3001\u6d41\u7a0b\u56fe</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#rfc","title":"\u53ef\u4ee5\u53bb\u67e5\u4e00\u4e0bRFC","text":"<p>Request for Comments\uff0c\u4e00\u79cd\u6307\u5bfc\u5236\u5b9a\u4e92\u8054\u7f51\u6807\u51c6\u7684\u6587\u6863\u683c\u5f0f </p> <ol> <li>\u660e\u786e\u662f\u8c01\u6765\u8bfb\uff0c\u6587\u7ae0\u76ee\u7684\uff0c\u5e76\u786e\u5b9a\u5176\u9002\u7528\u7684\u8303\u56f4</li> <li>\u63cf\u8ff0\u95ee\u9898\u7684\u80cc\u666f\u548c\u76f8\u5173\u7684\u5df2\u6709\u89e3\u51b3\u65b9\u6848</li> <li>\u5bf9\u89e3\u51b3\u65b9\u6848\u8be6\u7ec6\u9610\u8ff0\uff0c\u6709\u6e05\u6670\u7684\u903b\u8f91\u63a8\u7406\u548c\u53ef\u5b9e\u73b0\u7684\u7ec6\u8282</li> <li>\u672a\u89e3\u51b3\u7684\u95ee\u9898\u4ee5\u53ca\u672a\u6765\u53ef\u80fd\u6027\u7684\u8bf4\u660e</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_9","title":"\u5199\u6587\u6863\u7684\u53cd\u4f8b\u601d\u8003","text":"<ul> <li>\u4e3a\u4e86\u4e07\u65e0\u4e00\u5931\uff0c\u662f\u5426\u9700\u8981\u5bf9\u4e0d\u540c\u7684\u4eba\u5199\u4e0d\u540c\u7684\u6587\u6863\uff1f</li> <li>\u662f\u5426\u4e3a\u4e86\u663e\u793a\u6211\u7684\u725b\u903c\uff0c\u5c06\u7b80\u5355\u903b\u8f91\u5199\u5f97\u5f88\u590d\u6742\uff1f</li> <li>\u4e3a\u4e86\u663e\u793a\u6211\u5f88\u6709\u201c\u5473\u9053\u201d\uff0c\u51fa\u73b0\u5927\u91cf\u8d4b\u80fd\u3001\u6293\u624b\u3001\u9ebb\u5c06\u5927\u56fe</li> <li>\u7531\u4e8eTL\u50ac\u6211\u4ea4\u4f5c\u4e1a\uff0c\u60f3\u4e0d\u51fa\u6765\u53ea\u80fd\u7f16\uff0c\u5176\u5b9e\u6211\u81ea\u5df1\u90fd\u89c9\u5f97\u4e0d\u9760\u8c31</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#-star","title":"\u8bb2\u660e\u767d\u4e8b\u60c5\u5e38\u7528\u6a21\u578b- STAR","text":"<ul> <li>Situation\uff1a\u9047\u5230\u7684\u5177\u4f53\u60c5\u666f</li> <li>Task\uff1a\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\u6216\u4efb\u52a1</li> <li>Action\uff1a\u91c7\u53d6\u7684\u884c\u52a8\u548c\u5b9e\u65bd\u7684\u8fc7\u7a0b</li> <li>Result\uff1a\u91c7\u53d6\u884c\u52a8\u7684\u7ed3\u679c</li> </ul> <p>*eg: *\u6211\u4eec\u6253\u7b97\u5982\u4f55\u89e3\u51b3XXX\u7684\u6027\u80fd\u4f53\u9a8c\u95ee\u9898\uff1f</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_10","title":"\u6211\u8bb2\u4e8b\u60c5\u7684\u65f6\u5019\u5f88\u5bb9\u6613\u7d27\u5f20\uff1f","text":"<ol> <li>\u9996\u5148\u660e\u786e\u4efb\u4f55\u4eba\u8bb2\u4e1c\u897f\u90fd\u4f1a\u7d27\u5f20\uff0c\u53ea\u4e0d\u8fc7\u4ed6\u719f\u7ec3\u4e86\u800c\u5df2</li> <li>\u4f60\u611f\u89c9\u5230\u7684\u666e\u901a\u7d27\u5f20\uff0c\u5176\u5b9e\u522b\u4eba\u770b\u4e0d\u51fa\u6765</li> <li>\u5047\u5982\u4f60\u51c6\u5907\u597d\u4e86\uff0c\u4f60\u4f1a\u5f88\u81ea\u4fe1\uff0c\u8ba9\u4f60\u6ca1\u6709\u90a3\u4e48\u7d27\u5f20 <p>eg: \u5982\u4f55\u8ba9\u5408\u4f5c\u65b9\u4e70\u8d26- SCQA - Situation\uff1a\u7531\u5927\u5bb6\u90fd\u719f\u6089\u7684\u60c5\u666f\u4e8b\u5b9e\u5f15\u5165 - Complication\uff1a\u5b9e\u9645\u60c5\u51b5\u5f80\u5f80\u548c\u6211\u4eec\u7684\u8981\u6c42\u6709\u51b2\u7a81 - Question\uff1a\u51fa\u73b0\u95ee\u9898\u600e\u4e48\u529e - Answer\uff1a\u56de\u7b54\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u662f\u4ec0\u4e48</p> <p>\u4e00\u53e5\u4f60\u53ef\u80fd\u8bb0\u5f97\u4f4f\u4e00\u8f88\u5b50\u7684\u5e7f\u544a\u8bed\uff0c\u201c\u5f97\u4e86\u7070\u6307\u7532\uff0c\u4e00\u4e2a\u4f20\u67d3\u4fe9\uff0c\u95ee\u6211\u600e\u4e48\u529e\uff0c\u9a6c\u4e0a\u7528\u4eae\u7532\u201d</p> </li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_11","title":"\u6ca1\u6709\u8bb2\u660e\u767d\u7684\u60c5\u51b5","text":"<ul> <li>\u542c\u7684\u4eba\u81ea\u5df1\u5728\u505a\u81ea\u5df1\u7684\u4e8b\u60c5\uff0c\u751a\u81f3\u6709\u4e00\u70b9\u60f3\u7761\u89c9</li> <li>\u542c\u7684\u4eba\u6ca1\u6709\u4efb\u4f55\u548c\u4f60\u8ba8\u8bba\u7684\u70b9\uff0c\u4e00\u95ee\u5c31\u662f\u597d\u597d\u597d</li> <li>\u542c\u7684\u4eba\u4e00\u8111\u888b\u7684\u95ee\u53f7\uff1f\uff1f\u4e0d\u65adargue</li> <li>\"\u6211\"\u9ad8\u5ea6\u592a\u9ad8\u4e86\uff0c\u4f60\u4eec\u542c\u4e0d\u61c2\u662f\u4f60\u4eec\u80fd\u529b\u4e0d\u591f</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_12","title":"\u5982\u4f55\u53bb\u660e\u767d\u7684\u505a","text":"<p>Last but not least</p>","tags":["Thinking"]},{"location":"thinking/posts/01_smart_to_do_things/#_13","title":"\u5982\u4f55\u8bc1\u660e\u81ea\u5df1\u505a\u597d\u4e86\u5462\uff1f","text":"<ul> <li>\u5236\u5b9a\u9a8c\u6536\u6807\u51c6\uff0c\u5b8c\u6210\u540e\u8fdb\u884c\u9a8c\u8bc1</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/02_tech_yiyan/","title":"\u6280\u672f\u4e00\u8a00","text":"<ul> <li> <p>\u9700\u6c42\uff0c\u4f1a\u6539\u53d8\u4eba\u770b\u5f85\u4e16\u754c\u7684\u65b9\u5f0f\u3002</p> </li> <li> <p>\u6280\u672f\u662f\u5de5\u7a0b\uff0c\u800c\u5de5\u7a0b\u662f\u65f6\u95f4\u3001\u8d44\u6e90\u3001\u4eba\u529b\u7b49\u7eb7\u7e41\u590d\u6742\u4e8b\u60c5\u7684\u6298\u8877\u3002</p> </li> <li> <p>\u4e00\u95e8\u5de5\u7a0b\u6700\u9700\u8981\u7684\u662fhands on dirty work(\u52a8\u624b\u505a\u810f\u6d3b)\uff0c\u624d\u80fd\u8ba9\u81ea\u5df1\u7684\u80fd\u529b\u5f97\u5230\u672c\u8d28\u7684\u63d0\u5347\u3002</p> </li> <li> <p>\u8fdb\u9636\u7684\u4ee3\u7801\u8bbe\u8ba1\u662f\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u8ba9\u4ee3\u7801\u66f4\u80fd\u6709\u6548\u7684\u5b9e\u73b0\u3002\u7ec8\u6781\u7684\u4ee3\u7801\u8bbe\u8ba1\u662f\u54f2\u5b66\uff0c\u662f\u4ee3\u7801\u4e2d\u8868\u8fbe\u51fa\u6765\u7684\u4ef7\u503c\u89c2\u3002</p> </li> <li> <p>\u8981\u5b66\u4e60\u4e00\u95e8\u8bed\u8a00\uff0c\u6700\u7ec8\u76ee\u7684\u5c31\u662f\u5b66\u4f1a\u7528\u8fd9\u95e8\u7f16\u7a0b\u8bed\u8a00\u7684\u601d\u7ef4\u53bb\u5199\u8fd9\u95e8\u8bed\u8a00\u7684\u4ee3\u7801\uff0cgo coding in go way, \u800c\u4e0d\u662f\uff0cgo coding in c way, or java way.</p> </li> <li> <p>\u5b66\u4e60\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u5176\u5b9e\u5c31\u662f\u8981\u5b66\u4e60\u8bed\u8a00\u63d0\u4f9b\u7684\u7f16\u7a0b\u6a21\u578b\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u7f16\u7a0b\u6a21\u578b\u4f1a\u5e26\u7ed9\u4f60\u4e0d\u540c\u7684\u601d\u7ef4\u65b9\u5f0f\u3002</p> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/","title":"\u5982\u4f55\u9ad8\u6548\u5b66\u4e60\u5f00\u6e90\u9879\u76ee","text":"","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_1","title":"\u5b66\u4e60\u539f\u5219\uff1a","text":"<ul> <li>\u9605\u8bfb\u5b98\u65b9\u539f\u7248\u6587\u6863\uff0c\u800c\u4e0d\u662f\u9605\u8bfb\u7ecf\u8fc7\u7ffb\u8bd1\u6216\u8005\u8fc7\u6ee4\u7684\u6587\u6863</li> <li>\u5982\u679c\u53d7\u9650\u4e8e\u82f1\u8bed\u9605\u8bfb\u80fd\u529b\uff0c\u9000\u800c\u6c42\u5176\u6b21\u7684\u65b9\u6cd5\u662f\uff0c\u5148\u9605\u8bfb\u7ffb\u8bd1\u540e\u7684\u6587\u6863\uff0c\u518d\u9605\u8bfb\u539f\u7248\u6587\u6863\uff0c\u53ef\u4ee5\u7ea0\u6b63\u6216\u907f\u514d\u7ffb\u8bd1\u6587\u6863\u4e2d\u51fa\u73b0\u7684\u9519\u6f0f\u70b9\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_2","title":"\u5b66\u4e60\u5f00\u6e90\u9879\u76ee\u7684\u9ad8\u6548\u6d41\u7a0b\uff1a","text":"","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#1","title":"1\u3001\u901a\u8bfb\u5b98\u65b9\u6587\u6863\uff08\u539f\u7248\uff09\u4e86\u89e3\u5f00\u6e90\u9879\u76ee","text":"<ul> <li>\u76ee\u7684\uff1a\u4e86\u89e3\u8be5\u9879\u76ee\u7684\u6574\u4f53\u7ed3\u6784\uff0c\u529f\u80fd\u7279\u6027\u3001\u5173\u952e\u6280\u672f\u3001\u5b9e\u73b0\u539f\u7406\u548c\u76f8\u5173\u751f\u6001</li> <li>\u7ec6\u5206\u6d41\u7a0b\uff1a<ol> <li>\u9605\u8bfbQuick Start\u5185\u5bb9\uff0c\u642d\u5efa\u73af\u5883\uff0c\u5b9e\u64cd\u5185\u5bb9\u6848\u4f8b<ul> <li>\u521d\u6b65\u5bf9\u8be5\u9879\u76ee\u6709\u4e00\u4e2a\u611f\u6027\u8ba4\u8bc6\uff0c\u4fbf\u4e8e\u5728\u540e\u7eed\u6df1\u5165\u5b66\u4e60\u7684\u65f6\u5019\u8fd0\u884c\u4e00\u4e9b\u4f8b\u5b50</li> </ul> </li> <li>\u8be6\u7ec6\u7ea6\u5b9aIntroduction\uff08\u4e00\u822c\u662f\u9879\u76ee\u7684\u57fa\u672c\u4ecb\u7ecd\uff09<ul> <li>\u627e\u5230\u8be5\u9879\u76ee\u7528\u5230\u7684\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5\u548c\u540d\u8bcd\u7684\u4ecb\u7ecd\uff0c\u8fdb\u884c\u7406\u89e3\u548c\u52a0\u6df1\u5370\u8c61</li> </ul> </li> <li>\u9605\u8bfb\u5173\u4e8e\u8be5\u9879\u76ee\u4f7f\u7528\u573a\u666f\u548c\u529f\u80fd\u7279\u6027\u53ca\u76f8\u5173\u751f\u6001\u7cfb\u7edf\u4ecb\u7ecd\u7684\u76f8\u5173\u5185\u5bb9<ul> <li>\u6bd4\u5982kafka\u6587\u6863\u4e2d\u7684Use cases \u548c Ecosystem</li> </ul> </li> </ol> </li> <li>\u8bfb\u5b8c\u4ee5\u540e\u9700\u8981\u8fbe\u5230\u7684\u6548\u679c\uff1a<ol> <li>\u8fd9\u4e2a\u9879\u76ee\u662f\u5e72\u4ec0\u4e48\u7684\uff0c\u80fd\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\uff1f</li> <li>\u9002\u5408\u5728\u54ea\u4e9b\u573a\u666f\u4f7f\u7528</li> <li>\u6709\u54ea\u4e9b\u529f\u80fd\uff1f\u5982\u4f55\u4f7f\u7528\uff1f</li> </ol> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#2","title":"2\u3001\u8bfb\u80cc\u540e\u7684\u8bba\u6587\uff0c\u4e86\u89e3\u5176\u5b9e\u73b0\u539f\u7406","text":"<ul> <li>\u4e00\u822c\u4e00\u4e2a\u4f18\u79c0\u7684\u5f00\u6e90\u9879\u76ee\uff0c\u4e00\u822c\u90fd\u6765\u6e90\u4e8e\u67d0\u4e2a\u77e5\u540d\u8bba\u6587\uff0c\u7136\u540e\u88ab\u5927\u725b\u5b9e\u73b0\u51fa\u6765\u3002</li> <li>\u5982\u679c\u5b9e\u5728\u4e0d\u77e5\u9053\u8fd9\u4e2a\u9879\u76ee\u80cc\u540e\u7684\u8bba\u6587\u662f\u5565\uff0c\u6280\u672f\u8df3\u8fc7</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#3","title":"3\u3001\u5e26\u7740\u95ee\u9898\u9605\u8bfb\u6e90\u7801","text":"<ul> <li>\u4e00\u822c\u6587\u6863\u662f\u6811\u72b6\u7ed3\u6784\uff0c\u800c\u9879\u76ee\u6e90\u7801\u662f\u7f51\u72b6\u7ed3\u6784\uff0c</li> <li>\u6700\u4f73\u5b9e\u8df5\u662f\u5e26\u7740\u95ee\u9898\u548c\u7b54\u6848\u53bb\u8bfb\u6e90\u7801\uff0c\u800c\u4e0d\u662f\u4ecemain\u65b9\u6cd5\u8fd8\u662f\u6cdb\u6cdb\u7684\u53bb\u770b\uff0c<ul> <li>\u6bd4\u5982\uff1aEtcd\u662f\u5982\u4f55\u5b9e\u73b0\u670d\u52a1\u6ce8\u518c\u7684\uff1f</li> </ul> </li> <li>\u80fd\u591f\u8fbe\u6210\u7684\u6548\u679c\uff1a<ul> <li>\u4ee5\u95ee\u9898\u7684\u548c\u7b54\u6848\u7684\u65b9\u5f0f\u9605\u8bfb\u6e90\u7801\uff0c\u6bcf\u6b21\u901a\u5e38\u53ea\u4f1a\u82b1\u5f88\u77ed\u7684\u65f6\u95f4\uff0c\u9605\u8bfb\u5f88\u5c11\u90e8\u5206\u7684\u6e90\u7801\uff0c\u5c31\u80fd\u89e3\u51b3\u4e00\u4e2a\u95ee\u9898\uff0c\u5f97\u5230\u4e00\u4e9b\u6536\u83b7\u3002\u968f\u7740\u95ee\u9898\u89e3\u51b3\u6570\u91cf\u589e\u52a0\uff0c\u5c31\u4f1a\u6e10\u6e10\u5730\u5bf9\u9879\u76ee\u6e90\u7801\u8d8a\u6765\u8d8a\u4e86\u89e3\u3002</li> </ul> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_3","title":"\u5b9e\u8df5\u5e94\u7528","text":"","tags":["Thinking"]},{"location":"thinking/posts/03_learn_open_source_project/#_4","title":"\u5982\u4f55\u5728\u81ea\u5df1\u56e2\u961f\u7684\u9879\u76ee\u4e2d\u907f\u514d\u76f2\u76ee\u7684\u5f15\u5165\u5f00\u6e90\u9879\u76ee\uff1f","text":"<ol> <li>\u4e0d\u80fd\u4ec5\u4ec5\u77e5\u9053\u5982\u4f55\u4f7f\u7528\u8fd9\u4e2a\u5f00\u6e90\u9879\u76ee</li> <li>\u56e2\u961f\u4e2d\u5fc5\u987b\u81f3\u5c11\u4e00\u4e2a\u4eba\u719f\u6089\u8be5\u5f00\u6e90\u9879\u76ee\u7684\u5b98\u65b9\u6587\u6863\uff0c\u638c\u63e1\u5176\u5b9e\u73b0\u539f\u7406\u548c\u5f88\u591a\u7684\u7ec6\u8282</li> <li>\u5f00\u53d1\u8005\u53ea\u6709\u638c\u63e1\u4e86\u539f\u7406\uff0c\u5728\u7cfb\u7edf\u51fa\u95ee\u9898\u65f6\uff0c\u624d\u6709\u53ef\u80fd\u57fa\u4e8e\u5b83\u7684\u5b9e\u73b0\u539f\u7406\uff0c\u518d\u6839\u636e\u4e00\u4e9b\u73b0\u8c61\u6765\u6392\u67e5\u95ee\u9898\u7684\u539f\u56e0</li> <li>\u5728\u4ee5\u4e0a\u4e09\u70b9\u6709\u4e00\u4e2a\u4e0d\u6ee1\u8db3\uff0c\u90fd\u4e0d\u8981\u8f7b\u6613\u5728\u81ea\u5df1\u7684\u7cfb\u7edf\u4e2d\u5f15\u5165\u76f8\u5173\u5f00\u6e90\u9879\u76ee</li> </ol>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/","title":"\u63d0\u95ee\u7684\u667a\u6167","text":"","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_1","title":"\u6587\u7ae0\u94fe\u63a5","text":"<ul> <li>How To Ask Questions The Smart Way</li> <li>\u4f60\u4f1a\u95ee\u95ee\u95ee\u9898\u5417\uff1f</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_2","title":"\u6838\u5fc3\u89c2\u70b9","text":"","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_3","title":"\u63d0\u95ee\u524d","text":"<ul> <li>\u5728\u63d0\u51fa\u81ea\u5df1\u7684\u95ee\u9898\u4e4b\u524d\uff0c\u9996\u5148\u9700\u8981\u81ea\u5df1\u5148\u5c1d\u8bd5\u5bfb\u627e\u95ee\u9898\u7684\u7b54\u6848\uff0c\u6bd4\u5982\u901a\u8fc7\u641c\u7d22\u5f15\u64ce\u67e5\u770b\u662f\u5426\u6709\u5176\u4ed6\u4eba\u5df2\u7ecf\u9047\u5230\u8fc7\u4e86\u6216\u5df2\u89e3\u51b3\u8fc7\uff0c\u6bd4\u5982\u901a\u8fc7\u7ffb\u9605\u76f8\u5173\u4e66\u7c4d\u6765\u5b66\u4e60\u548c\u7406\u89e3\u5e76\u6392\u9664\u5bf9\u5e94\u95ee\u9898\u7b49\u3002</li> <li>\u5982\u679c\u6211\u4eec\u901a\u8fc7\u4e0a\u8ff0\u7684\u65b9\u5f0f\u5c06\u95ee\u9898\u89e3\u51b3\u6389\u7684\u8bdd\uff0c\u4e00\u65b9\u9762\u953b\u70bc\u7684\u81ea\u5df1\u5904\u7406\u95ee\u9898\u7684\u80fd\u529b\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\uff0c\u6bd5\u7adf\u63d0\u51fa\u95ee\u9898\u4e5f\u662f\u4e00\u4ef6\u975e\u5e38\u9ebb\u70e6\u7684\u4e8b\u60c5\u3002\u4e0d\u7136\u7684\u8bdd\uff0c\u6211\u4eec\u5373\u6d6a\u8d39\u4e86\u81ea\u5df1\u7684\u65f6\u95f4\uff0c\u4e5f\u6d6a\u8d39\u4e86\u4ed6\u4eba\u7684\u65f6\u95f4\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_4","title":"\u63d0\u95ee\u65f6","text":"<ul> <li>\u5728\u8bba\u575b\u3001\u7fa4\u7ec4\u548c\u9891\u9053\u91cc\u9762\u63d0\u95ee\u9898\u65f6\uff0c\u4e00\u5b9a\u4e0d\u8981\u4e00\u4e0a\u6765\u5c31\u95ee\u5728\u5417\uff1f\u6216\u8005\u6709\u6ca1\u6709\u54ea\u4f4d\u5927\u4f6c\u80fd\u5e2e\u5e2e\u6211\uff01\u4e4b\u7c7b\u7684\u8a00\u8bed\u3002\u6709\u4ec0\u4e48\u95ee\u9898\uff0c\u6211\u4eec\u76f4\u63a5\u8dd1\u51fa\u6765\u5373\u53ef\uff0c\u770b\u5230\u7684\u4eba\u6216\u8005\u61c2\u7684\u4eba\u81ea\u7136\u4f1a\u56de\u7b54\u6211\u4eec\u7684\u95ee\u9898\uff0c\u524d\u63d0\u662f\u5bf9\u6211\u4eec\u7684\u95ee\u9898\u611f\u5174\u8da3\u3002</li> <li>\u540c\u65f6\uff0c\u5728\u6211\u4eec\u63d0\u51fa\u95ee\u9898\u7684\u65f6\u5019\uff0c\u5199\u4e00\u4e0b\u81ea\u5df1\u662f\u5982\u4f55\u5bfb\u627e\u7b54\u6848\u7684(\u6311\u6709\u4ef7\u503c\u6216\u91cd\u70b9\u7684\u5730\u65b9\u8fdb\u884c\u9648\u8ff0)\uff0c\u8fd9\u6837\u4f1a\u8ba9\u4ed6\u4eba\u77e5\u9053\u6211\u4eec\u5e76\u4e0d\u662f\u4f38\u624b\u515a\uff0c\u5373\u4f7f\u5bf9\u65b9\u4e0d\u77e5\u9053\u7b54\u6848\u4e5f\u4f1a\u544a\u8bc9\u4f60\u4e0d\u77e5\u9053\uff0c\u800c\u975e\u4e00\u7b11\u800c\u8fc7\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_5","title":"\u63d0\u95ee\u4e2d","text":"<ul> <li>\u8981\u5b66\u4f1a\u5305\u88c5\u95ee\u9898\uff0c\u5c3d\u91cf\u4f7f\u7528\u8f83\u5c11\u7684\u8bed\u8a00\u6765\u5b8c\u6574\u63cf\u8ff0\u51fa\u81ea\u5df1\u7684\u95ee\u9898\uff0c\u5c3d\u91cf\u505a\u5230\u8a00\u7b80\u610f\u8d45\uff0c\u70b9\u660e\u4e3b\u65e8\u3002\u6bd4\u5982\uff0c\u8c01\u505a\u4ec0\u4e48\uff0c\u7ed3\u679c\u600e\u4e48\u6837\u3002</li> <li>\u5982\u679c\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u80fd\u591f\u590d\u73b0\u6211\u4eec\u95ee\u9898\u7684\u6700\u5c0f\u793a\u4f8b\u7684\u8bdd\uff0c\u5c31\u5e94\u8be5\u4f18\u5148\u63d0\u4f9b\u51fa\u6765\uff0c\u65b9\u4fbf\u5bf9\u65b9\u8c03\u8bd5\u6216\u8005\u6392\u9664\u95ee\u9898\uff0c\u8fd9\u6837\u53ef\u4ee5\u8282\u7ea6\u53cc\u65b9\u7684\u65f6\u95f4\u3002</li> <li>\u5982\u679c\u4e0d\u53ef\u4ee5\u590d\u73b0\u6216\u8005\u662f\u4e2a\u6781\u5c0f\u6982\u7387\u7684\u95ee\u9898\uff0c\u6211\u4eec\u770b\u662f\u5426\u53ef\u4ee5\u63d0\u4f9b\u5bf9\u5e94\u73af\u5883\u51fa\u53bb\uff0c\u8ba9\u5bf9\u65b9\u6392\u9664\u548c\u9a8c\u8bc1(\u524d\u63d0\u662f\u4e0d\u6d89\u53ca\u516c\u53f8\u548c\u4e2a\u4eba\u9690\u79c1\u7684\u60c5\u51b5\u4e0b)\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/04_wisdom_of_asking_questions/#_6","title":"\u63d0\u95ee\u540e","text":"<ul> <li>\u5176\u5b9e\u5f88\u591a\u4eba\u90fd\u6ca1\u6709\u602a\u7656\uff0c\u4ec0\u4e48\u793c\u8c8c\u4ed6\u4eec\u4e00\u70b9\u90fd\u4e0d\u5728\u4e4e\uff0c\u6240\u4ee5\u4e0d\u7528\u975e\u5f97\u7528\u656c\u8bcd\uff0c\u4f1a\u8ba9\u4eba\u6d51\u8eab\u4e0d\u8212\u670d\u7684\u3002</li> <li>\u63d0\u51fa\u95ee\u9898\u4e4b\u540e\uff0c\u6211\u4eec\u5e94\u8be5\u53ca\u65f6\u56de\u7b54\u5bf9\u65b9\u63d0\u51fa\u7684\u95ee\u9898\u548c\u51fa\u95ee\u9898\u7684\u7ec6\u8282\uff0c\u4fdd\u6301\u6d3b\u8dc3\u5ea6\uff0c\u8fd9\u6837\u95ee\u9898\u624d\u80fd\u591f\u66f4\u5feb\u7684\u89e3\u51b3\u6389\u3002</li> <li>\u5982\u679c\u95ee\u9898\u7ecf\u8fc7\u6c9f\u901a\u6216\u8005\u8ba8\u8bba\u89e3\u51b3\u6389\u7684\u8bdd\uff0c\u6211\u4eec\u4e8b\u540e\u9700\u8981\u8fdb\u884c\u590d\u76d8\uff0c\u770b\u770b\u662f\u5426\u65e5\u540e\u53ef\u4ee5\u81ea\u884c\u89e3\u51b3\uff0c\u4ee5\u53ca\u5bf9\u5e94\u95ee\u9898\u7684\u6392\u67e5\u601d\u8def\u548c\u65b9\u6cd5\uff0c\u6bd5\u7adf\u6388\u4eba\u9c7c\u9c7c\u4e0d\u5982\u6388\u4eba\u4ee5\u6e14\u3002</li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/05_personal_focus_and_abandon/","title":"\u4e2a\u4eba\u6218\u7565\u4e0a\u7684\u805a\u7126\u548c\u653e\u5f03","text":"<p>Info</p> <p>\u4fd7\u8bdd\u8bf4\uff1a\u6709\u820d\u624d\u6709\u5f97\uff01\uff01\uff01</p> <p>\u4f55\u4e3a\u6218\u7565\uff1f\u6218\u7565\u5176\u5b9e\u5c31\u662f\u51b3\u5b9a\u8be5\u505a\u4ec0\u4e48\uff0c\u4e0d\u8be5\u505a\u4ec0\u4e48\uff01\uff01\uff01</p> <p>\u6700\u8fd1\u4e00\u6bb5\u65f6\u95f4\u4ee5\u6765\uff0c\u8d8a\u53d1\u611f\u89c9\u81ea\u5df1\u5728\u5de5\u4f5c\u4e0a\u8d8a\u6765\u8d8a\u7d2f\uff0c\u4e0d\u7ecf\u610f\u95f4\uff0c\u60f3\u8d77\u6765\u4e86\u66fe\u7ecf\u8bfb\u8fc7\u7684\u4e00\u672c\u4e66\uff0c\u89c9\u5f97\u633a\u7b26\u5408\u5f53\u4e0b\u81ea\u5df1\u7684\u73b0\u72b6\u7684\uff0c\u4e66\u4e2d\u7684\u5185\u5bb9\u5927\u6982\u662f\u8fd9\u6837\u7684\uff1a</p> <ul> <li>\u5728\u5de5\u4f5c\u4e2d\uff0c\u5fc5\u987b\u8981\u610f\u8bc6\u5230\uff0c\u4e00\u4e2a\u4eba\u5f88\u96be\u5728\u591a\u4e2a\u6709\u6311\u6218\u7684\u4efb\u52a1\u4e0a\uff0c\u5168\u90e8\u5b9e\u73b0\u7a81\u7834\uff0c\u5982\u679c\u4e0d\u53bb\u533a\u5206\u5de5\u4f5c\u7684\u91cd\u70b9\uff0c\u5c31\u5f88\u6709\u53ef\u80fd\u5f15\u53d1\u79cd\u79cd\u8fde\u9501\u95ee\u9898\uff0c\u597d\u4e00\u70b9\u7684\u60c5\u51b5\u662f\uff0c\u628a\u4efb\u52a1\u90fd\u5b8c\u6210\u4e86\uff0c\u7d2f\u7684\u591f\u545b\uff0c\u4f46\u5168\u90e8\u90fd\u6ca1\u6709\u4eae\u70b9\u548c\u7a81\u7834\uff0c\u6d41\u4e8e\u5e73\u5eb8\uff1b\u574f\u4e00\u70b9\u7684\u60c5\u51b5\u662f\uff0c\u9ad8\u4f30\u4e86\u81ea\u5df1\u7684\u6267\u884c\u80fd\u529b\uff0c\u591a\u4e2a\u4efb\u52a1\u4e25\u91cdDelay\uff0c\u4ea7\u751f\u534f\u4f5c\u95ee\u9898\uff0c\u4e5f\u975e\u5e38\u5f71\u54cd\u81ea\u8eab\u7684\u5fc3\u6001\u3002</li> </ul> <p>\u611f\u89e6\u771f\u7684\u975e\u5e38\u6df1\uff0c\u7684\u786e\u662f\u5982\u6b64\u3002</p> <p>\u4e3a\u4e86\u5feb\u901f\u8c03\u6574\u597d\u81ea\u5df1\u7684\u5fc3\u6001\u548c\u72b6\u6001\uff0c\u5728\u6df1\u5ea6\u601d\u8003\u540e\uff0c\u5b66\u4f1a\u805a\u7126\uff0c\u505a\u597d\u805a\u7126\u7684\u60f3\u6cd5\u5c31\u4ea7\u751f\u4e86\uff0c\u56e0\u4e3a\u53ea\u6709\u5c06\u66f4\u591a\u7cbe\u529b\u805a\u7126\u5230\u66f4\u5c11\u66f4\u6709\u610f\u4e49\u7684\u4e8b\u4e0a\uff0c\u901a\u5e38\u8fd9\u6837\u505a\u4e8b\u7684\u6548\u679c\u4e00\u822c\u90fd\u4e0d\u4f1a\u5dee\u3002</p> <p>\u90a3\u4e48\u5982\u4f55\u53bb\u505a\u597d\u805a\u7126\u5462\uff0c\u53ef\u80fd\u5927\u5bb6\u90fd\u660e\u767d\u805a\u7126\u5176\u5b9e\u662f\u4e0d\u96be\u7684\uff0c\u96be\u7684\u820d\u5f03\uff0c\u6709\u820d\u624d\u6709\u5f97\u561b\uff0c\u53ea\u6709\u820d\u5f03\u638990%\u7684\u5e72\u6270\u4e8b\u9879\u7684\u4eba\uff0c\u624d\u53ef\u80fd\u771f\u6b63\u7684\u805a\u7126\u5230\u90a310%\u7684\u6838\u5fc3\u4efb\u52a1\u4e0a\uff0c\u6211\u8bb0\u5f97\u66fe\u6709\u4eba\u7ed9\u4ed6\u63d0\u70bc\u4e3a\uff1a\u820d\u4e5d\u53d6\u4e00\u3002</p> <p>\u7ed3\u5408\u81ea\u5df1\u5f53\u524d\u5de5\u4f5c\u7684\u5185\u5bb9\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u65b9\u5411\u5f00\u59cb\u53bb\u5b9e\u65bd\u805a\u7126\u3002</p> <p>\u4e2a\u4eba\u6210\u957f\u7684\u805a\u7126\uff0c\u505a\u66f4\u4f18\u79c0\u7684\u81ea\u5df1\u3002</p> <p>\u4f18\u79c0\u7684\u5b9a\u4e49\uff1a\u505a\u540c\u6837\u7684\u4e8b\u60c5\uff0c\u8868\u73b0\u7684\u5c31\u662f\u6bd4\u522b\u4eba\u597d\uff01</p> <ul> <li>\u89d2\u8272\uff1a\u3010Do\u3011  <ul> <li>\u6709\u76ee\u6807\u7684\u6267\u884c\uff0c\u7528\u76ee\u6807\u6307\u5f15\u81ea\u5df1\u7684\u5b66\u4e60\uff08\u8d39\u66fc\u5b66\u4e60\u6cd5\uff09\uff0c\u627e\u5230\u5de5\u4f5c\u7684\u91cd\u70b9\uff0c\u627e\u91cd\u70b9\u5176\u5b9e\u5c31\u662f\u5728\u805a\u7126\uff1b</li> <li>\u627e\u5230\u76ee\u6807\u540e\uff0c\u8981\u575a\u6301\uff0c\u76ee\u6807\u53ef\u4ee5\u5f88\u5c0f\uff0c\u4f46\u957f\u5e74\u575a\u6301\u4e0b\u6765\uff0c\u4f18\u79c0\u5c31\u4f1a\u53d8\u6210\u4e00\u79cd\u4e60\u60ef\uff0c\u79ef\u7d2f\u7684\u591a\u4e86\uff0c\u66f4\u5927\u7684\u76ee\u6807\u4e5f\u5c31\u5b9e\u73b0\u4e86\u3002</li> </ul> </li> <li>\u76ee\u6807\uff1aT\u578b\u53d1\u5c55<ul> <li>\u805a\u7126\u65b9\u5411\uff1a\u9996\u5148\u8981\u5728\u67d0\u4e2a\u7ef4\u5ea6\u4e0a\u505a\u5230\u5c3d\u53ef\u80fd\u7684\u597d\uff0c\u5fc5\u987b\u610f\u8bc6\u5230\uff0c\u60f3\u8981\u505a\u597d\u5e7f\u5ea6\uff0c\u5fc5\u987b\u5148\u505a\u597d\u6df1\u5ea6\uff0c\u56e0\u4e3a\u5e7f\u5ea6\u6c38\u8fdc\u90fd\u662f\u6df1\u5ea6\u7684\u9644\u5c5e\u54c1\uff0c\u6ca1\u6709\u6df1\u5ea6\u7684\u5e7f\u5ea6\uff0c\u4e00\u5207\u90fd\u53ea\u4f1a\u6d6e\u4e8e\u8868\u9762\uff0c\u65f6\u95f4\u4e00\u4e45\uff0c\u53ea\u4f1a\u9ebb\u75f9\u81ea\u5df1\u3002</li> </ul> </li> <li>\u5b9e\u8df5\uff1a<ul> <li>\u5b9a\u671f\u6574\u7406\u66f4\u65b0\u81ea\u5df1\u7684\u4e8b\u9879\u6e05\u5355\uff0c\u6309\u4f18\u5148\u7ea7\u6392\u5e8f\uff0c\u4f7f\u7528\u5355\u70b9\u7a81\u7834\u7684\u601d\u60f3\uff0c \u5148\u53bb\u505a\u6700\u4e0a\u9762\u7684\u4e8b\u9879\uff08\u76ee\u6807\u8981\u5177\u4f53\uff09\uff0c\u786e\u7acb\u76ee\u6807\uff0c\u8bbe\u5b9aDeadLine\uff08\u8981\u6709\u5177\u4f53\u65f6\u95f4\u8282\u70b9\uff09\uff0c \u7136\u540e\u805a\u7126\u7684\u53bb\u505a\u53bb\u5b66\uff0c\u6ca1\u6709\u76ee\u6807\u7684\u5b66\u4e60\uff0c\u5c31\u4e0d\u53ef\u80fd\u5728\u77ed\u65f6\u95f4\u5185\u5b9e\u73b0\u7a81\u7834\uff0c\u6bd5\u7adf\u4eba\u7684\u7cbe\u529b\u90fd\u662f\u6709\u9650\u7684\u3002</li> <li>\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\uff0c\u53ea\u5c06\u6ce8\u610f\u529b\u805a\u7126\u5230\u4e00\u4e2a\uff08\u6700\u591a\u4e24\u4e2a\uff09\u4e8b\u60c5\u4e0a\u3002\u8fd9\u79cd\u7b56\u7565\u5f88\u91cd\u8981\u3002</li> </ul> </li> <li>\u5927\u9053\u81f3\u7b80\uff1a<ul> <li>\u805a\u7126\u4e0d\u4f46\u4f1a\u5f71\u54cd\u6210\u957f\u7684\u901f\u5ea6\uff0c\u8fd8\u4f1a\u5f71\u54cd\u6210\u957f\u7684\u8d28\u91cf\uff1b</li> <li>\u8fd9\u4e2a\u793e\u4f1a\u4e0d\u4f1a\u5956\u52b1\u9762\u9762\u4ff1\u5230\uff0c\u4f46\u6bcf\u9879\u90fd\u5f88\u5e73\u5eb8\u7684\u4eba\uff0c\u5149\u73af\u6c38\u8fdc\u90fd\u5c5e\u4e8e\u90a3\u4e9b\u6709\u660e\u663e\u4f18\u52bf\uff0c\u6709\u660e\u663e\u957f\u5904\u7684\u4eba\u3002</li> </ul> </li> </ul> <p>\u6280\u672f\u7ba1\u7406\u7684\u805a\u7126\uff0c\u8ba9\u56e2\u961f\u66f4\u597d\u7684\u8fd0\u8f6c\u8d77\u6765\u3002</p> <p>\u7ba1\u7406\u7684\u672c\u8d28\uff1a\u6700\u5927\u9650\u5ea6\u7684\u6fc0\u53d1\u56e2\u961f\u7684\u534f\u540c\uff0c\u4f7f\u4e4b\u4ef7\u503c\u6700\u5927\u5316\u3002</p> <ul> <li>\u89d2\u8272\uff1a\u3010Manage\u3011<ul> <li>\u534f\u8c03\u56e2\u961f\u5b8c\u6210\u4efb\u52a1\u3002</li> </ul> </li> <li>\u76ee\u6807\uff1a<ul> <li>\u8ba9\u56e2\u961f\u5728\u7ec4\u7ec7\u4e2d\u53d1\u6325\u66f4\u5927\u7684\u4ef7\u503c</li> </ul> </li> <li>\u5b9e\u8df5\uff1a<ul> <li>\u6280\u672f\u7ba1\u7406\uff0c\u53ea\u6709\u6253\u597d\u4e86\u6280\u672f\u57fa\u7840\u540e\uff08\u5982\u4f55\u5b9a\u4e49\u6280\u672f\u57fa\u7840OK: \u5f53\u6280\u672f\u6df1\u5ea6\uff0c\u8db3\u4ee5\u8f85\u52a9\u56e2\u961f\u505a\u6280\u672f\u9009\u578b\u548c\u51b3\u7b56\u662f\uff0c\u5c31\u53ef\u4ee5\u805a\u7126\u6280\u672f\u7ba1\u7406\u5de5\u4f5c\u4e86\uff09\uff0c\u6280\u672f\u7ba1\u7406\u7684\u5de5\u4f5c\u624d\u80fd\u66f4\u597d\u7684\u805a\u7126\u3002</li> <li>\u7ba1\u7406\u5de5\u4f5c\u7684\u805a\u7126\uff0c\u5176\u5b9e\u5c31\u662f\u627e\u5230\u6700\u91cd\u8981\u7684\u90a3\u4e2a\u4efb\u52a1\uff0c\u53bb\u66f4\u5feb\u66f4\u597d\u7684\u7a81\u7834\u5b83\uff0c\u7136\u540e\u4e0b\u4e00\u4e2a\uff0c\u518d\u4e0b\u4e00\u4e2a\u3002</li> <li>\u57f9\u517b\u81ea\u5df1\u548c\u56e2\u961f\u7684\u5168\u5c40\u601d\u7ef4\uff0c\u53ea\u6709\u770b\u5230\u5168\u5c40\uff0c\u624d\u80fd\u505a\u597d\u805a\u7126\uff0c\u770b\u6e05\u95ee\u9898\u7684\u5168\u8c8c\uff0c\u662f\u505a\u597d\u805a\u7126\u7684\u5927\u524d\u63d0\u3002</li> <li>\u65e5\u5e38\u7a81\u7834\u4e2d\uff0c\u5b66\u4ee5\u81f4\u7528\u975e\u5e38\u91cd\u8981\uff0c\u5b66\u4e86\u5c31\u8981\u9a6c\u4e0a\u7528\uff0c\u5b66\u4e86\u4e0d\u7528\u7b49\u4e8e\u767d\u5b66\u3002</li> </ul> </li> <li>\u5927\u9053\u81f3\u7b80\uff1a<ul> <li>\u8d8a\u6765\u8d8a\u8ba4\u77e5\u5230\uff1a\u5f88\u591a\u5de5\u4f5c\u7684\u4ef7\u503c\uff0c\u662f\u9700\u8981\u9760\u56e2\u961f\u7684\u529b\u91cf\u6765\u5b9e\u73b0\uff0c\u4e2a\u4eba\u7684\u80fd\u529b\u518d\u5f3a\u6709\u65f6\u5019\u4e5f\u662f\u4e8e\u4e8b\u65e0\u6d4e\uff0c\u56e0\u4e3a\u518d\u4f18\u79c0\u7684\u5956\u52b1\uff0c\u4e5f\u5f97\u9700\u8981\u6709\u5f97\u529b\u7684\u5e72\u5c06\u6765\u8f85\u52a9\u3002</li> </ul> </li> </ul>","tags":["Thinking"]},{"location":"thinking/posts/06_learn_top2down_or_bottom2up/","title":"\u5b66\u4e60\u5e94\u8be5\u81ea\u5e95\u5411\u4e0a\uff0c\u8fd8\u662f\u81ea\u9876\u5411\u4e0b?","text":"<p>\u6d3b\u5230\u8001\uff0c\u5b66\u5230\u8001\uff0c\u662f\u81ea\u7136\u754c\u7684\u751f\u5b58\u6cd5\u5219\uff0c\u5bf9\u4e8e\u8f6f\u4ef6\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u8fd9\u4e2a\u6cd5\u5219\u66f4\u4e3a\u9002\u7528\uff0c\u4e5f\u66f4\u5e94\u8be5\u9075\u5b88\u548c\u6267\u884c\uff0c\u90a3\u4e48\u5982\u4f55\u5b66\u4e60\uff1f\u5982\u4f55\u9ad8\u6548\u7684\u5b66\u4e60\uff1f\u5c31\u662f\u503c\u5f97\u601d\u8003\u7684\u95ee\u9898\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u601d\u8003\u4e86\u5f88\u4e45\uff0c\u63a5\u4e0b\u6765\u6211\u5c31\u8c08\u8c08\u4e2a\u4eba\u5728\u5b66\u4e60\u5b9e\u8df5\u4e2d\u7684\u4e00\u4e9b\u601d\u8003\u548c\u60f3\u6cd5\u3002</p> <p>\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u901a\u5e38\u6709\u4e24\u79cd\u7b56\u7565\uff1a\u4e00\u79cd\u662f\u81ea\u5e95\u5411\u4e0a\uff0c\u53e6\u4e00\u79cd\u662f\u81ea\u9876\u5411\u4e0b\uff1b\u5177\u4f53\u70b9\u8bf4\u5c31\u662f\uff0c\u7cfb\u7edf\u6027\u7684\u4ece\u57fa\u7840\u70b9\u5f00\u59cb\u5b66\uff0c\u7136\u540e\u518d\u5b66\u4e60\u66f4\u9ad8\u9636\u7684\u77e5\u8bc6\u7684\u65b9\u6cd5\u5c31\u662f\u81ea\u5e95\u5411\u4e0a\u7684\u3002\u5e26\u7740\u95ee\u9898\u548c\u76ee\u6807\u7684\u53bb\u5b66\u4e60\uff0c\u4f18\u5148\u5b66\u4e60\u80fd\u89e3\u51b3\u95ee\u9898\u6216\u8fbe\u5230\u76ee\u6807\u7684\u77e5\u8bc6\uff0c\u5728\u6b64\u8fc7\u7a0b\u4e2d\u5982\u679c\u9047\u5230\u6df1\u5c42\u6b21\u4e0d\u592a\u7406\u89e3\u7684\u77e5\u8bc6\uff0c\u518d\u6839\u636e\u76f8\u5173\u77e5\u8bc6\u70b9\u518d\u6df1\u5165\u5b66\u4e60\u8be5\u77e5\u8bc6\u70b9\uff0c\u5982\u679c\u5728\u6b64\u8fc7\u7a0b\u4e2d\u518d\u6b64\u9047\u5230\u6df1\u5c42\u6b21\u4e0d\u7406\u89e3\u7684\u70b9\uff0c\u518d\u6b64\u8fed\u4ee3\u5faa\u73af\u7684\u4f7f\u7528\u524d\u9762\u7684\u65b9\u5f0f\u53bb\u5b66\u4e60\uff0c\u8fd9\u79cd\u5b66\u4e60\u65b9\u5f0f\u5c31\u662f\u81ea\u9876\u5411\u4e0b\u7684\u3002</p> <p>\u5728\u8fc7\u5f80\u7684\u6210\u957f\u7ecf\u5386\u4e2d\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u6bcf\u4e2a\u4eba\u5728\u53d7\u6559\u80b2\u7ecf\u5386\u9636\u6bb5\uff0c\u5c31\u662f\u4e00\u4e2a\u4ece\u81ea\u5e95\u5411\u4e0a\u5230\u81ea\u9876\u5411\u4e0b\u7684\u7b56\u7565\u4f18\u5316\u7684\u8fc7\u7a0b\uff0c\u5728\u4e5d\u5e74\u4e49\u52a1\u6559\u80b2\u9636\u6bb5\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u81ea\u5e95\u5411\u4e0a\u7684\u65b9\u5f0f\uff0c\u5728\u9ad8\u4e2d\u9636\u6bb5\u5c31\u662f\u4e00\u4e2a\u9010\u6e10\u5f00\u59cb\u8fdb\u5165\u534a\u81ea\u5e95\u5411\u4e0a\u7684\u5b66\u4e60\u65b9\u5f0f\uff0c\u56e0\u4e3a\u4e3a\u4e86\u5907\u6218\u9ad8\u8003\uff0c\u9010\u6e10\u4e0d\u518d\u5b66\u4e60\u90a3\u4e9b\u4e0d\u5728\u8003\u8bd5\u8303\u56f4\u7684\u77e5\u8bc6\u5b66\u79d1\uff0c\u5230\u4e86\u5927\u5b66\u9636\u6bb5\uff0c\u62c9\u957f\u65f6\u95f4\u7684\u957f\u6cb3\uff0c\u4ece\u5b8f\u89c2\u89c6\u89d2\u4e0b\u770b\uff0c\u5c31\u662f\u4e00\u4e2a\u81ea\u9876\u5411\u4e0b\u7684\u65b9\u5f0f\uff0c\u56e0\u4e3a\u6240\u9009\u4e13\u4e1a\u5c31\u5df2\u7ecf\u51b3\u5b9a\u4e86\u9700\u8981\u5b66\u4e60\u7684\u77e5\u8bc6\u3002\u4ece\u5fae\u89c2\u89c6\u89d2\u4e0b\uff0c\u4e13\u4e1a\u5b66\u4e60\u5176\u5b9e\u4e5f\u662f\u81ea\u5e95\u5411\u4e0a\u7684\u65b9\u5f0f\uff0c\u5de5\u4f5c\u4e2d\u540c\u6837\u4e5f\u662f\u5982\u6b64\u3002</p> <p>\u5728\u8fc7\u5f80\u7684\u5b66\u4e60\u4e2d\uff0c\u6211\u8ffd\u6c42\u7684\u662f\u81ea\u5e95\u5411\u4e0a\u7684\u5b66\u4e60\u7b56\u7565\uff0c\u56e0\u4e3a\u8fd9\u6837\u80fd\u5c06\u77e5\u8bc6\u5b66\u4e60\u7684\u66f4\u624e\u5b9e\uff0c\u5b66\u4e60\u6216\u5de5\u4f5c\u4e2d\uff0c\u90fd\u5e0c\u671b\u5c06\u77e5\u8bc6\u70b9\u5b66\u624e\u5b9e\uff0c\u57fa\u7840\u6253\u7262\u56fa\uff0c\u4f46\u8fd9\u79cd\u5b66\u4e60\u7b56\u7565\uff0c\u4ece\u77ed\u671f\u770b\uff0c\u6536\u76ca\u662f\u7f13\u6162\u7684\uff0c\u5bf9\u7cbe\u529b\u6d88\u8017\u4e5f\u662f\u5de8\u5927\u7684\uff0c\u968f\u7740\u751f\u6d3b\u548c\u5de5\u4f5c\u538b\u529b\u7684\u589e\u5927\uff0c\u8fd9\u79cd\u5b66\u4e60\u65b9\u5f0f\uff0c\u8ba9\u81ea\u5df1\u53d8\u7684\u75b2\u4e4f\u4e14\u96be\u4ee5\u575a\u6301\u3002</p> <p>\u5bf9\u4e8e\u8f6f\u4ef6\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u654f\u6377\u3001\u5feb\u901f\u53d1\u5e03\u3001\u5feb\u901f\u8fed\u4ee3\uff1b\u8fd9\u4e9b\u8bcd\u4e00\u5b9a\u4e0d\u964c\u751f\uff0c\u8fd9\u4e9b\u8bcd\u7684\u5728\u9610\u91ca\u4e00\u4e2a\u9053\u7406\uff1a\u5feb\u901f\u5f00\u59cb\uff0c\u5feb\u901f\u53cd\u9988\uff0c\u5feb\u901f\u5b8c\u5584\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u518d\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u4e0d\u7ba1\u8fd9\u4e2a\u4e1c\u897f\u505a\u7684\u600e\u4e48\u6837\uff0c\u53ea\u8981\u5b83\u80fd\u89e3\u51b3\u5b9e\u9645\u95ee\u9898\u5c31\u884c\u4e86\uff0c\u540e\u7eed\u518d\u9010\u6e10\u53bb\u5b8c\u5584\u3002</p> <p>\u6240\u4ee5\uff0c\u5728\u5b66\u4e60\u4e2d\uff0c\u6211\u8c03\u6574\u4e86\u81ea\u5df1\u7684\u5b66\u4e60\u7b56\u7565\uff0c\u4e5f\u5b9e\u8df5\u4e86\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\uff0c\u53d1\u73b0\u8fd9\u79cd\u6548\u679c\u633a\u4e0d\u9519\uff0c\u660e\u663e\u611f\u89c9\u81ea\u5df1\u4e5f\u6ca1\u6709\u4ee5\u524d\u90a3\u4e48\u75b2\u4e4f\u4e86\u3002\u5728\u5982\u4eca\u8fd9\u4e2a\u6280\u672f\u9ad8\u901f\u53d1\u5c55\u548c\u53d8\u5316\u7684\u65f6\u4ee3\uff0c\u7504\u522b\u53d8\u5316\u4e2d\u7684\u4e0d\u53d8\u662f\u4e00\u9879\u91cd\u8981\u7684\u6280\u80fd\uff1a</p> <p>\u76ee\u6807\u9a71\u52a8</p> <p>\u6613\u53d8\u7684\uff1a\u5bf9\u4e8e\u5de5\u4f5c\u4e2d\u9700\u8981\u9a6c\u4e0a\u7528\u5230\u7684\u6280\u672f\u6216\u77e5\u8bc6\uff0c\u91c7\u7528\u81ea\u9876\u5411\u4e0b\u7684\u7b56\u7565\u53bb\u5b66\u4e60\uff0c\u4ee5\u8fbe\u5230\u89e3\u51b3\u5b9e\u9645\u95ee\u9898\u4e3a\u76ee\u6807\u5373\u53ef\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u9ad8\u5f3a\u5ea6\u5de5\u4f5c\u6d88\u8017\u6389\u7684\u7cbe\u529b\uff1b</p> <p>\u80fd\u529b\u9a71\u52a8</p> <p>\u4e0d\u53d8\u7684\uff1a\u5bf9\u4e8e\u8fd9\u4e9b\u4e0d\u53d8\u7684\u4e1c\u897f\uff0c\u9700\u8981\u5408\u7406\u7684\u5b89\u6392\u65f6\u95f4\uff0c\u505a\u6301\u4e45\u5b66\u4e60\u7684\u51c6\u5907\uff0c\u4f7f\u7528\u81ea\u5e95\u5411\u4e0a\u7684\u7b56\u7565\u53bb\u5b66\u4e60\uff1b\u6bd5\u7adf\uff0c\u57fa\u7840\u7684\u4e1c\u897f\u90fd\u662f\u7ecf\u8fc7\u7684\u65f6\u95f4\u7684\u8003\u9a8c\u548c\u6c89\u6dc0\uff0c\u638c\u63e1\u4e86\u5c31\u4f1a\u7ec8\u751f\u53d7\u76ca\uff0c\u4e07\u53d8\u4e0d\u79bb\u5176\u5b97\u8bf4\u7684\u5c31\u662f\u8fd9\u4e2a\u9053\u7406\u3002</p>","tags":["Thinking"]},{"location":"toolbox/macos_quickly_key/","title":"1. macOS \u5feb\u6377\u952e\u7b80\u4ecb","text":"<ul> <li> <p>macOS \u4e0a\u6709\u51e0\u4e2a\u5e38\u7528\u7684\u4fee\u9970\u952e\uff1a Command\uff08\u6216 Cmd\uff09\u2318\u3001Option\uff08\u6216 Alt\uff09\u2325\u3001Caps Lock \u21ea\u3001Shift \u21e7\u3001Control\uff08\u6216 Ctrl\uff09\u2303\u3001Fn\u3002</p> </li> <li> <p>\u8981\u4f7f\u7528\u952e\u76d8\u5feb\u6377\u952e\uff0c\u9700\u8981\u5148\u6309\u4f4f\u4e00\u4e2a\u6216\u591a\u4e2a\u4fee\u9970\u952e\uff0c\u7136\u540e\u6309\u5feb\u6377\u952e\u7684\u6700\u540e\u4e00\u4e2a\u952e\u3002\u4f8b\u5982\u590d\u5236\u7684\u64cd\u4f5c\u662f \u300c\u2318\u300d+\u300cC\u300d\uff0c\u5219\u9700\u8981\u5148\u6309\u4f4f \u300c\u2318\u300d \u952e\uff0c\u7136\u540e\u518d\u53bb\u6309 \u300cC\u300d \u952e\uff0c\u6700\u540e\u540c\u65f6\u677e\u5f00\u8fd9\u4e24\u4e2a\u952e\u3002</p> </li> </ul>","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#2-macos","title":"2. macOS \u5e38\u7528\u5feb\u6377\u952e","text":"","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#21","title":"2.1 \u5168\u5c40\u7c7b\u5feb\u6377\u952e","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + Tab \u5728\u5df2\u7ecf\u6253\u5f00\u7684 App \u4e4b\u95f4\u8fdb\u884c\u5207\u6362\u3002 Command \u2318 + Shift \u21e7 + Tab \u53cd\u5411\u5728\u5df2\u7ecf\u6253\u5f00\u7684 App \u4e4b\u95f4\u8fdb\u884c\u5207\u6362\u3002 Control \u2303 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u5de6\u53f3\u5207\u6362\u300c\u7a7a\u95f4\u300d\u3002 Control \u2303 + Up \u2b06\ufe0e \u663e\u793a\u300c\u8c03\u5ea6\u4e2d\u5fc3\u300d\u3002 Control \u2303 + Down \u2b07\ufe0e \u663e\u793a\u5f53\u524d\u5e94\u7528\u7a0b\u5e8f\u7a97\u53e3\u3002 Command \u2318 + Option \u2325 + D \u663e\u793a / \u9690\u85cf\u300c\u7a0b\u5e8f\u575e\u300d\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#22","title":"2.2 \u526a\u5207\u3001\u62f7\u8d1d\u3001\u7c98\u8d34","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + X \u526a\u5207\u6240\u9009\u9879\u5e76\u62f7\u8d1d\u5230\u526a\u8d34\u677f\u3002\u4e0d\u9002\u5e94\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u7684\u6587\u4ef6\u3002 Command \u2318 + C \u5c06\u6240\u9009\u9879\u62f7\u8d1d\u5230\u526a\u8d34\u677f\u3002\u9002\u7528\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u7684\u6587\u4ef6\u62f7\u8d1d\u3002 Command \u2318 + V \u5c06\u526a\u8d34\u677f\u7684\u5185\u5bb9\u7c98\u8d34\u5230\u5f53\u524d\u6587\u7a3f\u6216 App \u4e2d\u3002\u9002\u7528\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u6587\u4ef6\u7c98\u8d34\u3002 Command \u2318 + Option \u2325 + C \u62f7\u8d1d\u6837\u5f0f\uff1a\u5c06\u6240\u9009\u9879\u7684\u683c\u5f0f\u8bbe\u7f6e\u62f7\u8d1d\u5230\u526a\u8d34\u677f\u3002 Command \u2318 + Option \u2325 + V \u7c98\u8d34\u6837\u5f0f\uff1a\u5c06\u62f7\u8d1d\u7684\u6837\u5f0f\u5e94\u7528\u5230\u6240\u9009\u9879\u3002\u9002\u7528\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u6587\u4ef6\u79fb\u52a8\u3002 Command \u2318 + Z \u64a4\u9500\u4e0a\u4e00\u4e2a\u547d\u4ee4\u3002 Command \u2318 + Shift \u21e7 + Z \u91cd\u505a\uff0c\u53cd\u5411\u6267\u884c\u64a4\u9500\u547d\u4ee4\u3002\u5728\u67d0\u4e9b App \u4e2d\uff0c\u53ef\u4ee5\u64a4\u9500\u548c\u91cd\u505a\u591a\u4e2a\u547d\u4ee4\u3002 Command \u2318 + A \u5168\u9009\u5404\u9879\u3002\u540c\u6837\u9002\u5e94\u4e8e\u300c\u8bbf\u8fbe\u300d\u4e2d\u7684\u6587\u4ef6\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#23","title":"2.3 \u5173\u95ed\u3001\u9000\u51fa\u7a0b\u5e8f","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + W \u5173\u95ed\u5f53\u524d\u5e94\u7528\u6700\u524d\u9762\u7684\u7a97\u53e3\uff0c\u8f6f\u4ef6\u5e76\u672a\u9000\u51fa\u8fdb\u7a0b\u3002 Command \u2318 + Option \u2325 + W \u5173\u95ed\u5f53\u524d\u5e94\u7528\u7684\u6240\u6709\u7a97\u53e3\uff0c\u8f6f\u4ef6\u5e76\u672a\u9000\u51fa\u8fdb\u7a0b\u3002 Command \u2318 + Q \u771f\u6b63\u9000\u51fa\u7a0b\u5e8f\uff0c\u8f6f\u4ef6\u9000\u51fa\u8fdb\u7a0b\u3002 Command \u2318 + Option \u2325 + Esc \u6253\u5f00\u5f3a\u5236\u9000\u51fa\u8f6f\u4ef6\u7684\u7a97\u53e3\uff0c\u901a\u5e38\u5728\u8f6f\u4ef6\u65e0\u54cd\u5e94\u7684\u65f6\u5019\u4f7f\u7528\u3002 Command \u2318 + Option \u2325 + Shift \u21e7 + Esc \u76f4\u63a5\u5f3a\u5236\u9000\u51fa\u5f53\u524d\u8f6f\u4ef6\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#24","title":"2.4 \u7a97\u53e3\u7c7b","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + ` \u5728\u5f53\u524d\u8f6f\u4ef6\u7684\u591a\u4e2a\u7a97\u53e3\u76f4\u63a5\u5207\u6362\uff08\u53ea\u9002\u7528\u4e8e\u82f9\u679c\u7cfb\u7edf\u8f6f\u4ef6\uff09\u3002 Command \u2318 + M \u6700\u5c0f\u5316\u5f53\u524d\u7a97\u53e3\u3002 Command \u2318 + H \u9690\u85cf\u5f53\u524d\u8f6f\u4ef6\u3002 Command \u2318 + Option \u2325 + H \u9690\u85cf\u9664\u4e86\u5f53\u524d\u8f6f\u4ef6\u4ee5\u5916\u7684\u6240\u6709\u8f6f\u4ef6\u3002 Command \u2318 + Ctrl \u2303 + F \u8fdb\u5165 / \u9000\u51fa\u7a97\u53e3\u6700\u5927\u5316\u3002 Command \u2318 + W \u5173\u95ed\u5f53\u524d\u5e94\u7528\u6700\u524d\u9762\u7684\u7a97\u53e3\uff0c\u8f6f\u4ef6\u5e76\u672a\u9000\u51fa\u8fdb\u7a0b\u3002 Command \u2318 + Option \u2325 + W \u5173\u95ed\u5f53\u524d\u5e94\u7528\u7684\u6240\u6709\u7a97\u53e3\uff0c\u8f6f\u4ef6\u5e76\u672a\u9000\u51fa\u8fdb\u7a0b\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#25","title":"2.5 \u8bbf\u8fbe","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + Shift \u21e7 + G \u6253\u5f00\u300c\u524d\u5f80\u6587\u4ef6\u5939\u300d\u7a97\u53e3\u3002 Command \u2318 + Shift \u21e7 + . \u663e\u793a / \u9690\u85cf\u300c\u6587\u4ef6\u300d\u3001\u300c\u6587\u4ef6\u5939\u300d\u3002 Command \u2318 + Up \u2b06\ufe0e \u6253\u5f00\u5305\u542b\u5f53\u524d\u6587\u4ef6\u5939\u7684\u6587\u4ef6\u5939\uff0c\u5373\u8fd4\u56de\u4e0a\u4e00\u5c42\u3002 Command \u2318 + Down \u2b07\ufe0e \u6253\u5f00\u5f53\u524d\u6240\u9009\u300c\u6587\u4ef6\u5939\u300d\u6216\u300c\u6587\u4ef6\u300d\u3002 Command \u2318 + N \u6253\u5f00\u65b0\u7684\u300c\u8bbf\u8fbe\u300d\u7a97\u53e3\u3002 Command \u2318 + T \u6253\u5f00\u65b0\u7684\u300c\u8bbf\u8fbe\u300d\u6807\u7b7e\u9875\uff08\u5728\u5f53\u524d\u7a97\u53e3\uff09\u3002 Command \u2318 + Shift \u21e7 + N \u65b0\u5efa\u300c\u6587\u4ef6\u5939\u300d\u3002 Command \u2318 + Delete \u5c06\u6240\u9009\u9879\u79fb\u52a8\u5e9f\u7eb8\u7bd3\u3002 Command \u2318 + Shift \u21e7 + Delete \u6e05\u5012\u5e9f\u7eb8\u7bd3\u3002 Command \u2318 + C \u62f7\u8d1d\u6240\u9009\u6587\u4ef6\u5230\u526a\u5207\u677f\u3002 Command \u2318 + V \u5c06\u526a\u5207\u677f\u4e2d\u7684\u6587\u4ef6\u7c98\u8d34\u5230\u5f53\u524d\u4f4d\u7f6e\u3002 Command \u2318 + Option \u2325 + V \u79fb\u52a8\u6587\u4ef6\uff1a\u5c06\u526a\u8d34\u677f\u4e2d\u7684\u6587\u4ef6\u4ece\u539f\u59cb\u4f4d\u7f6e\u79fb\u52a8\u5230\u5f53\u524d\u4f4d\u7f6e\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#26","title":"2.6 \u622a\u56fe","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + Shift \u21e7 + 3 \u622a\u53d6\u5f53\u524d\u5168\u5c4f\uff0c\u5e76\u4fdd\u5b58\u5168\u5c4f\u6587\u4ef6\u5230\u684c\u9762\u3002 Command \u2318 + Ctrl \u2303 + Shift \u21e7 + 3 \u622a\u53d6\u5f53\u524d\u5168\u5c4f\uff0c\u5e76\u4fdd\u5b58\u5168\u5c4f\u622a\u56fe\u5230\u526a\u5207\u677f\u3002 Command \u2318 + Shift \u21e7 + 4 \u6309\u4e0b\u540e\u62d6\u62fd\u9f20\u6807\u9009\u62e9\u622a\u56fe\u533a\u57df\uff0c\u5e76\u4fdd\u5b58\u90e8\u5206\u5c4f\u5e55\u622a\u56fe\u6587\u4ef6\u5230\u684c\u9762\u3002 Command \u2318 + Ctrl \u2303 + Shift \u21e7 + 4 \u6309\u4e0b\u540e\u62d6\u62fd\u9f20\u6807\u9009\u62e9\u622a\u56fe\u533a\u57df\uff0c\u5e76\u4fdd\u5b58\u90e8\u5206\u5c4f\u5e55\u622a\u56fe\u5230\u526a\u5207\u677f\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#27","title":"2.7 \u6d4f\u89c8\u5668","text":"\u5feb\u6377\u952e \u529f \u80fd Command \u2318 + T \u5728\u5f53\u524d\u7a97\u53e3\uff0c\u6253\u5f00\u65b0\u7684\u300c\u6807\u7b7e\u9875\u300d\u3002 Command \u2318 + N \u6253\u5f00\u65b0\u7684\u300c\u6d4f\u89c8\u5668\u7a97\u53e3\u300d\u3002 Command \u2318 + \u9f20\u6807\u70b9\u6309\u94fe\u63a5 \u5728\u65b0\u7684\u300c\u6807\u7b7e\u9875\u300d\u6253\u5f00\u94fe\u63a5\u3002 Command \u2318 + \u9f20\u6807\u70b9\u6309\u4e66\u7b7e \u5728\u65b0\u7684\u300c\u6807\u7b7e\u9875\u300d\u6253\u5f00\u4e66\u7b7e\u3002 Command \u2318 + W \u5173\u95ed\u5f53\u524d\u300c\u6807\u7b7e\u9875\u300d\u3002 Command \u2318 + L \u5b9a\u4f4d\u5230\u300c\u5730\u5740\u680f\u300d\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#28","title":"2.8 \u6587\u672c\u7f16\u8f91\u64cd\u4f5c","text":"","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#281","title":"2.8.1 \u5149\u6807\u79fb\u52a8","text":"\u5feb\u6377\u952e \u529f \u80fd Ctrl \u2303 + F \u5149\u6807\u524d\u8fdb\u4e00\u4e2a\u5b57\u7b26\uff08F = Forward\uff09\u3002 Ctrl \u2303 + B \u5149\u6807\u540e\u9000\u4e00\u4e2a\u5b57\u7b26\uff08B = Backward\uff09\u3002 Ctrl \u2303 + P \u5149\u6807\u4e0a\u79fb\u4e00\u884c\uff08P = Previous\uff09\u3002 Ctrl \u2303 + N \u5149\u6807\u4e0b\u79fb\u4e00\u884c\uff08N = Next\uff09\u3002 Ctrl \u2303 + A \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u6216\u6bb5\u843d\u5f00\u5934\uff08A = Ahead\uff09\u3002 Ctrl \u2303 + E \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u6216\u6bb5\u843d\u7ed3\u5c3e\uff08E = End\uff09\u3002 Command \u2318 + Up \u2b06\ufe0e / Down \u2b07\ufe0e \u5149\u6807\u79fb\u52a8\u5230\u5168\u90e8\u6587\u672c\u5f00\u5934 / \u7ed3\u5c3e\u3002 Command \u2318 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u7684\u884c\u9996 / \u884c\u5c3e\u3002 Option \u2325 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u5355\u8bcd\u7684\u5f00\u5934 / \u7ed3\u5c3e","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#282","title":"2.8.2 \u6587\u672c\u9009\u4e2d","text":"<p>\u5728\u300c\u5149\u6807\u79fb\u52a8\u300d\u4e2d\u5e26\u6709\u65b9\u5411\u952e Up \u2b06\ufe0e / Down \u2b07\ufe0e / Left \u2b05\ufe0e / Right \u27a1\ufe0e \u76f8\u5173\u5feb\u6377\u952e\u7684\u57fa\u7840\u4e0a\uff0c\u52a0\u5165 Shift \u21e7\uff0c\u5219\u53ef\u4ee5\u6269\u5c55\u4e3a\u9009\u4e2d\u6587\u672c\u6548\u679c\u7684\u5feb\u6377\u952e\u3002</p> \u5feb\u6377\u952e \u529f\u80fd Command \u2318 + Shift \u21e7 + Up \u2b06\ufe0e / Down \u2b07\ufe0e \u9009\u4e2d\u5149\u6807\u5230\u5168\u90e8\u6587\u672c\u5f00\u5934 / \u7ed3\u5c3e\u7684\u6587\u672c\u3002 Command \u2318 + Shift \u21e7 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u9009\u4e2d\u5149\u6807\u5230\u5f53\u524d\u884c\u7684\u884c\u9996 / \u884c\u5c3e\u7684\u6587\u672c\u3002 Option \u2325 + Shift \u21e7 + Left \u2b05\ufe0e / Right \u27a1\ufe0e \u9009\u4e2d\u5149\u6807\u5230\u5f53\u524d\u5355\u8bcd\u7684\u5f00\u5934 / \u7ed3\u5c3e\u7684\u6587\u672c\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#283","title":"2.8.3 \u6587\u672c\u5220\u9664","text":"\u5feb\u6377\u952e \u529f \u80fd Ctrl \u2303 + H \u6216 Delete \u5220\u9664\u5149\u6807\u524d\u9762\u7684\u4e00\u4e2a\u5b57\u7b26\u3002 Ctrl \u2303 + D \u6216 Fn + Delete \u5220\u9664\u5149\u6807\u540e\u9762\u7684\u4e00\u4e2a\u5b57\u7b26\u3002 Option \u2325 + Delete \u5220\u9664\u5149\u6807\u524d\u9762\u7684\u4e00\u4e2a\u5355\u8bcd\u3002 Command \u2318 + Delete \u5220\u9664\u5149\u6807\u4e4b\u524d\u7684\u6574\u884c\u5185\u5bb9\u3002 Ctrl \u2303 + K \u5220\u9664\u5149\u6807\u4e4b\u540e\u7684\u6574\u884c\u5185\u5bb9\u3002","tags":["MacOS"]},{"location":"toolbox/macos_quickly_key/#_1","title":"\u53c2\u8003\u8d44\u6599","text":"<ul> <li>[1] Mac \u952e\u76d8\u5feb\u6377\u952e</li> <li>[2] Safari \u6d4f\u89c8\u5668\u4f7f\u7528\u624b\u518c</li> </ul>","tags":["MacOS"]},{"location":"toolbox/tools_ai/","title":"\u7504\u9009GPT-AI\u5de5\u5177","text":"","tags":["Tools"]},{"location":"toolbox/tools_ai/#_1","title":"\u804a\u5929/\u5185\u5bb9\u751f\u6210","text":"<ul> <li>\u6587\u5fc3\u4e00\u8a00\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u56fe\u50cf\u5206\u6790\u3001\u56fe\u8868\u5236\u4f5c\u3001\u8111\u56fe\u7b49</li> <li>\u901a\u4e49\u5343\u95ee\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u56fe\u50cf\u5206\u6790\u7b49</li> <li>Kimi(\u6708\u4e4b\u6697\u9762)\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u4e92\u8054\u7f51\u641c\u7d22\u7b49</li> <li>\u817e\u8baf\u6df7\u5143\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u7075\u611f\u63a8\u8350\u7b49</li> <li>\u8baf\u98de\u661f\u706b\uff1a\u5185\u5bb9\u751f\u6210</li> <li>\u6296\u97f3\u8c46\u5305\uff1a\u5185\u5bb9\u751f\u6210\uff0c\u504f\u4e92\u8054\u7f51\u8fd0\u8425\u65b9\u5411</li> <li>\u667a\u8c31 AI\uff1a\u5185\u5bb9\u751f\u6210\u3001\u77e5\u8bc6\u95ee\u7b54\u7b49</li> <li>\u767e\u5ddd\u667a\u80fd\uff1a\u5185\u5bb9\u751f\u6210\u3001\u6587\u6863\u5206\u6790\u3001\u4e92\u8054\u7f51\u641c\u7d22\u7b49</li> <li>360 \u667a\u8111\uff1a360 \u667a\u8111\u5168\u5bb6\u6876</li> <li>\u5b57\u8282\u5c0f\u609f\u7a7a\uff1a\u5b57\u8282\u8df3\u52a8\u5185\u5bb9\u751f\u6210\u5de5\u5177\u96c6</li> <li>\u8fbe\u89c2\u6570\u636e\u66f9\u690d\uff1a\u884c\u4e1a\u5782\u57df\u5927\u6a21\u578b</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-","title":"AI \u529e\u516c-\u7efc\u5408","text":"<ul> <li>360 \u6570\u5b57\u5458\u5de5\uff1a\u56e2\u961f\u534f\u4f5c\u5171\u4eab\u3001\u4f01\u4e1a\u77e5\u8bc6\u5e93\u3001AI \u6587\u6863\u5206\u6790\u3001AI \u8425\u9500\u6587\u6848\u3001AI \u6587\u4e66\u5199\u4f5c\u7b49\u667a\u80fd\u5de5\u5177</li> <li>\u6709\u9053 AI\uff1a\u6587\u6863\u3001\u7ffb\u8bd1\u3001\u89c6\u89c9\u3001\u8bed\u97f3\u3001\u6559\u80b2\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-office","title":"AI \u529e\u516c-Office","text":"<ul> <li>AiPPT\uff1a\u81ea\u52a8\u751f\u6210 PPT \u5927\u7eb2\u3001\u6a21\u677f\u3001Word-PPT \u7b49</li> <li>iSlide\uff1aAI \u4e00\u952e\u8bbe\u8ba1 PPT</li> <li>WPS AI\uff1aWPS \u7684 AI \u63d2\u4ef6\uff0c\u667a\u80fd PPT\u3001\u8868\u683c\u3001\u6587\u6863\u6574\u7406\u7b49</li> <li>ChatPPT\uff1a\u652f\u6301 Office\u3001WPS\uff0c\u81ea\u52a8\u6587\u6863\u751f\u6210</li> <li>360 \u82cf\u6253\u529e\u516c\uff1a\u6587\u6863\u3001\u89c6\u9891\u3001\u8bbe\u8ba1\u3001\u5f00\u53d1\u7b49</li> <li>\u9177\u8868 ChatExcel\uff1a\u667a\u80fd Excel \u516c\u5f0f</li> <li>\u5546\u6c64\u529e\u516c\u5c0f\u6d63\u718a\uff1a\u667a\u80fd\u56fe\u8868</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-_1","title":"AI \u529e\u516c-\u4f1a\u8bae\u7eaa\u8981","text":"<ul> <li>\u8baf\u98de\u542c\u89c1\uff1a\u97f3\u89c6\u9891\u8f6c\u6587\u5b57\u3001\u5b9e\u65f6\u5f55\u97f3\u8f6c\u6587\u5b57\u3001\u540c\u4f20\u3001\u7ffb\u8bd1\u7b49</li> <li>\u963f\u91cc\u901a\u4e49\u542c\u609f\uff1a\u5b9e\u65f6\u8f6c\u5f55\u3001\u97f3\u89c6\u9891\u8f6c\u6587\u5b57\u3001\u4e92\u8054\u7f51\u5185\u5bb9\u63d0\u70bc\u7b49</li> <li>\u98de\u4e66\u5999\u8bb0\uff1a\u5b9e\u65f6\u8f6c\u5f55\u3001\u97f3\u89c6\u9891\u8f6c\u6587\u5b57</li> <li>\u817e\u8baf\u4f1a\u8bae AI\uff1a\u817e\u8baf\u4f1a\u8bae\u5f55\u5236\u540e\u4f1a\u8bae\u7eaa\u8981\u6574\u7406</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-_2","title":"AI \u529e\u516c-\u8111\u56fe","text":"<ul> <li>ProcessOn\uff1aAI \u601d\u7ef4\u5bfc\u56fe</li> <li>\u4ebf\u56fe\u8111\u56fe\uff1aAI \u601d\u7ef4\u5bfc\u56fe</li> <li>GitMind \u601d\u4e4e\uff1aAI \u601d\u7ef4\u5bfc\u56fe</li> <li>boardmix \u535a\u601d\u767d\u677f\uff1a\u5b9e\u65f6\u534f\u4f5c\u7684\u667a\u6167\u767d\u677f\u4e0a\u3001\u4e00\u952e\u751f\u6210 PPT\u3001\u7528 AI \u534f\u52a9\u521b\u4f5c\u601d\u7ef4\u5bfc\u56fe\u7b49</li> <li>\u5999\u529e\u753b\u677f\uff1a\u751f\u6210\u6d41\u7a0b\u56fe\u3001\u601d\u7ef4\u5bfc\u56fe\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai-_3","title":"AI \u529e\u516c-\u6587\u6863","text":"<ul> <li>\u53f8\u9a6c\u9605 AI \u6587\u6863\uff1aAI \u6587\u6863\u9605\u8bfb\u5206\u6790\u5de5\u5177\u3001\u901a\u8fc7\u804a\u5929\u4e92\u52a8\u5f62\u5f0f\u3001\u63d0\u53d6\u5e76\u5206\u6790\u4fe1\u606f\u7b49</li> <li>360AI \u6d4f\u89c8\u5668\uff1a\u667a\u80fd\u6458\u8981\u3001\u6587\u7ae0\u8109\u7edc\u3001\u601d\u7ef4\u5bfc\u56fe\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai","title":"AI \u5199\u4f5c","text":"<ul> <li>\u6709\u9053\u4e91\u7b14\u8bb0 AI\uff1a\u6709\u9053\u4e91\u7b14\u8bb0\u5199\u4f5c\u63d2\u4ef6\u3001\u6539\u5199\u6269\u5199\u6da6\u8272\u7b49</li> <li>\u817e\u8baf Effidit\uff1a\u667a\u80fd\u7ea0\u9519\u3001\u6587\u672c\u8865\u5168\u3001\u6587\u672c\u6539\u5199\u3001\u6587\u672c\u6269\u5199\u3001\u8bcd\u8bed\u63a8\u8350\u3001\u53e5\u5b50\u63a8\u8350\u4e0e\u751f\u6210\u7b49\u529f\u80fd</li> <li>\u8baf\u98de\u5199\u4f5c\uff1aAI \u5bf9\u8bdd\u5199\u4f5c\u3001\u6a21\u677f\u5199\u4f5c\u3001\u7d20\u6750\u3001\u6da6\u8272\u7b49</li> <li>\u6df1\u8a00\u8fbe\u610f\uff1a\u6839\u636e\u6a21\u7cca\u63cf\u8ff0\uff0c\u627e\u8bcd\u627e\u53e5\u7684\u667a\u80fd\u5199\u4f5c\u5de5\u5177</li> <li>\u963f\u91cc\u6089\u8bed\uff1a\u6dd8\u5b9d\u4e13\u7528\u7684\u5546\u54c1\u6587\u6848\u751f\u6210\uff0c\u8f93\u5165\u5546\u54c1\u7684\u6dd8\u5b9d\u94fe\u63a5\u5373\u53ef\u83b7\u5f97\u6587\u6848</li> <li>\u5b57\u8282\u706b\u5c71\u5199\u4f5c\uff1a\u5168\u6587\u6da6\u8272\u7684 AI \u667a\u80fd\u5199\u4f5c</li> <li>\u79d8\u5854\u5199\u4f5c\u732b\uff1aAI \u5199\u4f5c\u6a21\u677f\u3001AI \u5199\u4f5c\u5de5\u5177\u3001\u6307\u4ee4\u6269\u5199\u6da6\u8272\u7b49</li> <li>\u5149\u901f\u5199\u4f5c\uff1a\u4f5c\u4e1a\u5e2e\u65d7\u4e0b\uff1a\u5168\u6587\u751f\u6210\u3001PPT \u751f\u6210\u3001\u95ee\u7b54\u52a9\u624b\u3001\u5199\u4f5c\u52a9\u624b</li> <li>WriteWise\uff1a\u559c\u9a6c\u62c9\u96c5\u5c0f\u8bf4\u521b\u4f5c\u5de5\u5177</li> <li>\u7b14\u7075 AI\uff1a\u4e00\u952e\u751f\u6210\u5de5\u4f5c\u8ba1\u5212\u3001\u6587\u6848\u65b9\u6848\u7b49</li> <li>\u6613\u64b0\uff1a\u81ea\u5a92\u4f53\u5185\u5bb9</li> <li>Giiso \u5199\u4f5c\u673a\u5668\u4eba\uff1a\u5199\u4f5c\u3001\u6587\u914d\u56fe\u3001\u98ce\u683c\u8f6c\u6362\u3001\u6587\u751f\u56fe\u7b49</li> <li>5118 SEO \u4f18\u5316\u7cbe\u7075\uff1a\u5feb\u901f\u751f\u6210\u9ad8\u8d28\u91cf SEO \u6807\u9898\u3001Meta \u63cf\u8ff0\u548c\u5173\u952e\u5b57\uff0c\u63d0\u5347\u7f51\u7ad9\u641c\u7d22\u5f15\u64ce\u6392\u540d</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_1","title":"AI \u7ffb\u8bd1","text":"<ul> <li>\u6c89\u6d78\u5f0f\u7ffb\u8bd1\uff1a\u7ffb\u8bd1\u5916\u8bed\u7f51\u9875\u3001PDF\u3001EPUB \u7535\u5b50\u4e66\u3001\u89c6\u9891\u53cc\u8bed\u5b57\u5e55\u7b49</li> <li>\u5f69\u4e91\u5c0f\u8bd1\uff1a\u591a\u79cd\u683c\u5f0f\u6587\u6863\u7684\u7ffb\u8bd1\u3001\u540c\u58f0\u4f20\u8bd1\u3001\u6587\u6863\u7ffb\u8bd1\u548c\u7f51\u9875\u7ffb\u8bd1</li> <li>\u7f51\u6613\u89c1\u5916\uff1a\u5b57\u5e55\u3001\u97f3\u9891\u8f6c\u5199\u3001\u540c\u4f20\u3001\u6587\u6863\u7ffb\u8bd1\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_2","title":"AI \u641c\u7d22\u5f15\u64ce","text":"<ul> <li>\u5929\u5de5 AI \u641c\u7d22(\u6606\u4ed1\u4e07\u7ef4)\uff1a\u627e\u8d44\u6599\u3001\u67e5\u4fe1\u606f\u3001\u641c\u7b54\u6848\u3001\u641c\u6587\u4ef6\u7b49\uff0c\u5bf9\u6d77\u91cf\u641c\u7d22\u7ed3\u679c\u8fdb\u884c AI \u667a\u80fd\u805a\u5408</li> <li>360AI \u641c\u7d22\uff1a\u4ece\u6d77\u91cf\u7684\u7f51\u7ad9\u4e2d\u4e3b\u52a8\u5bfb\u627e\u3001\u63d0\u70bc\u7cbe\u51c6\u7b54\u6848\u7684 AI \u641c\u7d22\u5f15\u64ce</li> <li>\u79d8\u5854 AI \u641c\u7d22\uff1a\u65e0\u5e7f\u544a\uff0c\u76f4\u8fbe\u7ed3\u679c\u7684 AI \u641c\u7d22\u5f15\u64ce</li> <li>perplexity.ai\uff1a\u9ec4\u4ec1\u52cb\u5e26\u8d27\u7684 AI \u641c\u7d22\u5f15\u64ce</li> <li>sciphi.ai\uff1aAI \u641c\u7d22\u5f15\u64ce</li> <li>devv.ai\uff1a\u4e3a\u5f00\u53d1\u4eba\u5458\u6253\u9020\u7684\u4eba\u5de5\u667a\u80fd\u9a71\u52a8\u7684\u641c\u7d22\u5f15\u64ce</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#_2","title":"\u56fe\u50cf\u751f\u6210/\u7f16\u8f91","text":"<ul> <li>\u901a\u4e49\u4e07\u76f8\uff1aAI \u751f\u6210\u56fe\u7247\uff0c\u4eba\u5de5\u667a\u80fd\u827a\u672f\u521b\u4f5c\u5927\u6a21\u578b</li> <li>\u6587\u5fc3\u4e00\u683c\uff1a\u6587\u751f\u56fe\u50cf</li> <li>\u526a\u6620 AI\uff1a\u526a\u6620\u4e00\u952e\u751f\u6210 AI \u7ed8\u753b</li> <li>\u817e\u8baf ARC\uff1a\u4eba\u50cf\u4fee\u590d\u3001\u4eba\u50cf\u62a0\u56fe\u3001\u52a8\u6f2b\u589e\u5f3a\u7b49</li> <li>360 \u667a\u7ed8\uff1a\u98ce\u683c\u5316 AI \u7ed8\u753b\u3001Lora \u8bad\u7ec3\u7b49</li> <li>\u65e0\u9650\u753b\uff1a\u667a\u80fd\u56fe\u50cf\u8bbe\u8ba1\uff0c\u6574\u5408\u5343\u5e93\u7f51\u7684\u8bbe\u8ba1\u884c\u4e1a\u77e5\u8bc6\u7ecf\u9a8c\u3001\u8d44\u6e90\u6570\u636e</li> <li>\u7f8e\u56fe\u8bbe\u8ba1\u5ba4\uff1a\u56fe\u50cf\u667a\u80fd\u5904\u7406\u3001\u6d77\u62a5\u8bbe\u8ba1\u7b49</li> <li>liblib.ai\uff1aAI \u6a21\u578b\u5206\u4eab\u5e73\u53f0\uff0c\u5404\u79cd\u98ce\u683c\u7684\u56fe\u50cf\u5fae\u8c03\u6a21\u578b</li> <li>Tusi.Art\uff1aAI \u6a21\u578b\u5206\u4eab\u5e73\u53f0</li> <li>\u6807\u5c0f\u667a Logo \u751f\u6210\uff1a\u5728\u7ebf LOGO \u8bbe\u8ba1\uff0c\u751f\u6210\u4f01\u4e1a VI</li> <li>\u4f50\u7cd6\uff1a\u4e30\u5bcc\u7684\u56fe\u50cf\u5904\u7406\u5de5\u5177</li> <li>Vega AI\uff1a\u6587\u751f\u56fe\u3001\u56fe\u751f\u56fe\u3001\u59ff\u6001\u751f\u56fe\u3001\u6587\u751f\u89c6\u9891\u3001\u56fe\u751f\u89c6\u9891\u7b49</li> <li>\u7f8e\u56fe WHEE\uff1a\u6587\u751f\u56fe\u3001\u56fe\u751f\u56fe\u3001\u6587\u751f\u89c6\u9891\u3001\u6269\u56fe\u6539\u56fe\u8d85\u6e05\u7b49</li> <li>\u65e0\u754c AI\uff1a\u6587\u751f\u56fe</li> <li>BgSub\uff1a\u62a0\u56fe</li> <li>\u963f\u91cc PicCopilot\uff1a\u963f\u91cc\u5df4\u5df4\u56fd\u9645\uff0cAI \u9a71\u52a8\u56fe\u7247\u4f18\u5316\u5de5\u5177\uff0c\u7535\u5546\u9886\u57df\u4e13\u5c5e\u670d\u52a1</li> <li>\u641c\u72d0\u7b80\u5355 AI\uff1a\u667a\u80fd\u56fe\u7247\u751f\u6210\u5e73\u53f0\u548c\u793e\u533a</li> <li>6pen\uff1a\u6587\u672c\u63cf\u8ff0\u751f\u6210\u7ed8\u753b\u827a\u672f\u4f5c\u54c1</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_3","title":"AI \u8bbe\u8ba1","text":"<ul> <li>\u963f\u91cc\u5806\u53cb\uff1a\u9762\u5411\u8bbe\u8ba1\u5e08\u7fa4\u4f53\u7684 AI \u8bbe\u8ba1\u793e\u533a</li> <li>\u7a3f\u5b9a AI\uff1a\u56fe\u50cf\u8bbe\u8ba1</li> <li>\u58a8\u5200 AI\uff1a\u4ea7\u54c1\u8bbe\u8ba1\u534f\u4f5c\u5e73\u53f0</li> <li>\u83ab\u9ad8\u8bbe\u8ba1 MasterGo AI\uff1a\u4f01\u4e1a\u7ea7\u4ea7\u54c1\u8bbe\u8ba1\u5e73\u53f0\uff0c\u754c\u9762\u8bbe\u8ba1\u3001\u4ea4\u4e92\u8bbe\u8ba1\u7b49</li> <li>\u521b\u5ba2\u8d34 AI\uff1a\u56fe\u5f62\u56fe\u50cf\u8bbe\u8ba1</li> <li>\u5373\u65f6 AI\uff1a\u6587\u751f UI\u3001\u6587\u751f\u56fe\u3001\u56fe\u751f UI \u7b49</li> <li>PixsO AI\uff1a\u65b0\u751f\u4ee3 UI \u8bbe\u8ba1\u5de5\u5177</li> <li>\u6296\u97f3\u5373\u521b\uff1a\u6296\u97f3\u7535\u5546\u667a\u80fd\u521b\u4f5c\u5e73\u53f0\uff0c\u63d0\u4f9b AI \u89c6\u9891\u521b\u4f5c\u3001\u56fe\u6587\u521b\u4f5c\u548c\u76f4\u64ad\u521b\u4f5c</li> <li>\u817e\u8baf AIDesign\uff1a\u817e\u8baf\u7684 logo \u8bbe\u8ba1</li> <li>\u7f8e\u95f4\uff1aAI \u8f6f\u88c5\u8bbe\u8ba1\u3001\u6d77\u62a5\u548c\u63d0\u6848\u751f\u6210\u5de5\u5177</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_4","title":"AI \u97f3\u9891","text":"<ul> <li>\u5ea6\u52a0\u521b\u4f5c\u5de5\u5177\uff1a\u70ed\u641c\u4e00\u952e\u6210\u7a3f\u3001\u6587\u7a3f\u4e00\u952e\u6210\u7247</li> <li>\u9b54\u97f3\u5de5\u574a\uff1aAI \u914d\u97f3\u5de5\u5177</li> <li>\u7f51\u6613\u5929\u97f3\uff1a\u667a\u80fd\u7f16\u66f2\uff0c\u6d77\u91cf\u98ce\u683c</li> <li>TME Studio\uff1a\u817e\u8baf\u97f3\u4e50\u667a\u80fd\u97f3\u4e50\u751f\u6210\u5de5\u5177</li> <li>\u8baf\u98de\u667a\u4f5c\uff1a\u914d\u97f3\u3001\u58f0\u97f3\u5b9a\u5236\u3001\u865a\u62df\u4e3b\u64ad\u3001\u97f3\u89c6\u9891\u5904\u7406\u7b49</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_5","title":"AI \u89c6\u9891","text":"<ul> <li>PixVerse\uff1a\u6587\u751f\u89c6\u9891</li> <li>\u7ed8\u5f71\u5b57\u5e55\uff1aAI \u5b57\u5e55\u3001\u7ffb\u8bd1\u3001\u914d\u97f3\u7b49</li> <li>\u4e07\u5f69\u5fae\u5f71\uff1a\u771f\u4eba\u624b\u7ed8\u89c6\u9891\u3001\u7ffb\u8f6c\u6587\u5b57\u89c6\u9891\u3001\u6587\u7ae0\u8f6c\u89c6\u9891\u7b49</li> <li>\u82a6\u7b0b AI \u63d0\u8bcd\u5668\uff1aAI \u5199\u7a3f\u3001\u9690\u5f62\u63d0\u8bcd\u6548\u679c\u3001\u667a\u80fd\u8ddf\u8bfb\u7b49</li> <li>360 \u5feb\u526a\u8f91\uff1a\u4e13\u4e1a\u89c6\u9891\u526a\u8f91</li> <li>\u4e07\u5f69 AI\uff1a\u9ad8\u6548\u3001\u597d\u7528\u7684 AI \u5199\u4f5c\u548c\u77ed\u89c6\u9891\u521b\u4f5c\u5e73\u53f0</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#_3","title":"\u6570\u5b57\u4eba","text":"<ul> <li>\u817e\u8baf\u667a\u5f71\uff1a\u6570\u5b57\u4eba\u3001\u6587\u672c\u914d\u97f3\u3001\u6587\u7ae0\u8f6c\u89c6\u9891\u7b49</li> <li>\u6765\u753b\uff1a\u52a8\u753b\u3001\u6570\u5b57\u4eba\u667a\u80fd\u5236\u4f5c</li> <li>\u4e00\u5e27\u79d2\u521b\uff1aAI \u89c6\u9891\u3001\u6570\u5b57\u4eba\u3001AI \u4f5c\u753b\u7b49</li> <li>\u4e07\u5174\u64ad\u7206\uff1a\u6570\u5b57\u4eba\u3001\u771f\u4eba\u8425\u9500\u89c6\u9891</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_6","title":"AI \u5199\u4ee3\u7801","text":"<ul> <li>\u6607\u601d MindSpore\uff1a\u4e00\u7ad9\u5f0f AI \u5f00\u53d1\u5e73\u53f0\uff0c\u6a21\u578b\u8bad\u7ec3\u3001\u63a8\u7406\u3001\u8bc4\u6d4b\u3001\u7cbe\u8c03\u7b49</li> <li>\u767e\u5ea6\u98de\u6868 PaddlePaddle AI Code assistant\uff1a\u5728\u7ebf\u7f16\u7a0b\u3001\u6d77\u91cf\u6570\u636e\u96c6\u7b49</li> <li>ZelinAI\uff1a\u96f6\u4ee3\u7801\u6784\u5efa AI \u5e94\u7528</li> <li>aiXcoder\uff1a\u667a\u80fd\u7f16\u7a0b\u673a\u5668\u4eba\uff0c\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u4ee3\u7801\u751f\u6210\u6280\u672f</li> <li>\u5546\u6c64\u4ee3\u7801\u5c0f\u6d63\u718a\uff1a\u4ee3\u7801\u751f\u6210\u8865\u5168\u7ffb\u8bd1\u91cd\u6784\u2026\u2026</li> <li>CodeArts Snap\uff1a\u8986\u76d6\u4ee3\u7801\u751f\u6210\u3001\u7814\u53d1\u77e5\u8bc6\u95ee\u7b54\u3001\u5355\u5143\u6d4b\u8bd5\u7528\u4f8b\u751f\u6210\u3001\u4ee3\u7801\u89e3\u91ca\u3001\u4ee3\u7801\u6ce8\u91ca\u3001\u4ee3\u7801\u7ffb\u8bd1\u3001\u4ee3\u7801\u8c03\u8bd5\u3001\u4ee3\u7801\u68c0\u67e5\u7b49\u516b\u5927\u7814\u53d1\u573a\u666f</li> <li>\u5929\u5de5\u667a\u7801\uff1a\u57fa\u4e8e\u6606\u4ed1\u5929\u5de5\u6a21\u578b\u7684 AI \u4ee3\u7801\u5de5\u5177</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#_4","title":"\u6a21\u578b\u8bad\u7ec3/\u90e8\u7f72","text":"<ul> <li>\u706b\u5c71\u65b9\u821f\uff1a\u6a21\u578b\u8bad\u7ec3\u3001\u63a8\u7406\u3001\u8bc4\u6d4b\u3001\u7cbe\u8c03\u7b49\u5168\u65b9\u4f4d\u529f\u80fd\u4e0e\u670d\u52a1</li> <li>\u9b54\u642d\u793e\u533a\uff1a\u63d0\u4f9b\u6a21\u578b\u63a2\u7d22\u4f53\u9a8c\u3001\u63a8\u7406\u3001\u8bad\u7ec3\u3001\u90e8\u7f72\u548c\u5e94\u7528\u7684\u4e00\u7ad9\u5f0f\u670d\u52a1</li> <li>\u6587\u5fc3\u5927\u6a21\u578b\uff1a\u4ea7\u4e1a\u7ea7\u77e5\u8bc6\u589e\u5f3a\u5927\u6a21\u578b</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_ai/#ai_7","title":"AI \u63d0\u793a\u8bcd","text":"<ul> <li>\u63d0\u793a\u5de5\u7a0b\u6307\u5357\uff1a\u5982\u4f55\u4f7f\u7528\u63d0\u793a\u8bcd\u6765\u5b8c\u6210\u4e0d\u540c\u7684\u4efb\u52a1</li> <li>\u8bcd\u9b42\uff1aAIGC \u7cbe\u54c1\u63d0\u793a\u8bcd\u5e93</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/","title":"\u5e38\u7528\u8f6f\u4ef6\u547d\u4ee4\u901f\u67e5","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#linux","title":"Linux\u76f8\u5173","text":"<ul> <li>LinuxCool: Linux\u547d\u4ee4\u5927\u5168</li> <li>LinuxCommand: Linux\u547d\u4ee4\u5927\u5168\u641c\u7d22\u5de5\u5177\uff0c\u5185\u5bb9\u5305\u542bLinux\u547d\u4ee4\u624b\u518c\u3001\u8be6\u89e3\u3001\u5b66\u4e60\u3001\u641c\u96c6\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#vim","title":"vim\u76f8\u5173","text":"<ul> <li>vim\u5907\u5fd8\u5f55\uff1a\u9002\u5408\u79fb\u52a8\u8bbe\u5907\u7684vim\u5907\u5fd8\u5f55</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_1","title":"\u7f16\u8f91(\u63d2\u5165)\u6a21\u5f0f","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_2","title":"\u63d2\u5165","text":"<ul> <li>i: insert  ;                           I: insert before line </li> <li>a: append                         A: append after line</li> <li>o: open a line below       O: append a line above</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_3","title":"\u5220\u9664","text":"Bash<pre><code>ctrl + h   # \u5220\u9664\u4e0a\u4e00\u4e2a\u5b57\u7b26\nctrl + w   # \u5220\u9664\u4e0a\u4e2a\u5355\u8bcd\nctrl + u   # \u5220\u9664\u5f53\u524d\u884c\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#esc","title":"Esc\u952e\u7684\u66ff\u4ee3\u952e","text":"Bash<pre><code>ctrl + c \nctrl + [\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_4","title":"\u8df3\u8f6c","text":"Bash<pre><code>gi    # \u5feb\u901f\u8df3\u8f6c\u5230\u6700\u540e\u4e00\u6b21\u7f16\u8f91\u7684\u5730\u65b9\u5e76\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_5","title":"\u79fb\u52a8","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_6","title":"\u5355\u8bcd\u95f4\u79fb\u52a8","text":"Bash<pre><code>hjkl   # \u7b49\u4ef7\u4e8e\u65b9\u5411\u952e\n\nw/W   # \u79fb\u52a8\u5230\u4e0b\u4e00\u4e2aword/WORD\u5f00\u5934\n\ne/E   # \u79fb\u52a8\u5230\u4e0b\u4e00\u4e2aword/WORD\u5c3e\u90e8\n\nb/B   # \u56de\u5230\u4e0a\u4e00\u4e2aword/WORD\u5f00\u5934\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3abackword\n\n# word\u6307\u7684\u662f\u4ee5\u975e\u7a7a\u767d\u7b26\u5206\u5272\u7684\u5355\u8bcd\uff0c\n# WORD\u6307\u7684\u662f\u4ee5\u7a7a\u767d\u5206\u5272\u7684\u5355\u8bcd\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_7","title":"\u884c\u95f4\u641c\u7d22\u79fb\u52a8","text":"Bash<pre><code>f{char}   # \u79fb\u52a8\u5230char\u5b57\u7b26\u4e0a\uff0c\nt{char}   # t\u79fb\u52a8\u5230char\u7684\u524d\u4e00\u4e2a\u5b57\u7b26\n\n# \u5982\u679c\u7b2c\u4e00\u6b21\u6ca1\u641c\u5230\uff0c\u4f7f\u7528\u5206\u53f7(;)/\u9017\u53f7(,),  \u7ee7\u641c\u8be5\u884c\u4e0b\u4e00\u4e2a/\u4e0a\u4e00\u4e2a\n# \u5927\u5199\u7684F\u8868\u793a\u53d1\u8fc7\u6765\u641c\u524d\u9762\u7684\u5b57\u7b26\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_8","title":"\u6c34\u5e73\u79fb\u52a8","text":"Bash<pre><code>0   # \u79fb\u52a8\u884c\u9996\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\n^   # \u79fb\u52a8\u5230\u7b2c\u4e00\u4e2a\u975e\u7a7a\u767d\u5b57\u7b26\n$   # \u79fb\u52a8\u5230\u884c\u5c3e\ng_  # \u79fb\u52a8\u5230\u884c\u5c3e\u975e\u7a7a\u767d\u5b57\u7b26\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_9","title":"\u5782\u76f4\u79fb\u52a8","text":"Bash<pre><code>()  # \u4f7f\u7528\u62ec\u53f7\u5728\u53e5\u5b50\u95f4\u79fb\u52a8\uff0c\u53ef\u4ee5\u7528\uff1ahelp\u6765\u67e5\u770b\u5e2e\u52a9\n{}  # \u4f7f\u7528{}\u5728\u6bb5\u843d\u95f4\u79fb\u52a8\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_10","title":"\u9875\u9762\u79fb\u52a8","text":"Bash<pre><code>gg/G       # \u79fb\u52a8\u5230\u6587\u4ef6\u5f00\u5934\u6216\u7ed3\u5c3e\uff0c \u4f7f\u7528ctrl + o \u5feb\u901f\u8fd4\u56de\nH/M/L      # \u8df3\u8f6c\u5230\u5c4f\u5e55\u7684\u5f00\u5934\uff08Head\uff09, \u4e2d\u95f4\uff08Middle\uff09\u7ed3\u5c3e\uff08Lower\uff09\nctrl + u   # \u4e0a\u7ffb\u9875\uff08upword\uff09\nctrl + f   # \u4e0b\u7ffb\u9875(forward)\nzz         # \u628a\u5c4f\u5e55\u7f6e\u4e3a\u4e2d\u95f4\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_11","title":"\u547d\u4ee4\u6a21\u5f0f","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_12","title":"\u4fdd\u5b58","text":"Bash<pre><code>:wq\n:x\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_13","title":"\u5206\u5c4f","text":"Bash<pre><code>:vs (vertical split)\n:sp  (split)\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_14","title":"\u5168\u5c40\u66ff\u6362","text":"Bash<pre><code>:% s/foo/bar/g    # foo -&gt;bar\n</code></pre>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#visual","title":"Visual(\u53ef\u89c6\u5316\uff09\u6a21\u5f0f","text":"","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_15","title":"\u9009\u62e9\u884c:","text":"<ul> <li>V</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_cheatsheet/#_16","title":"\u65b9\u5757\u9009\u62e9\uff1a","text":"<ul> <li>ctrl + v</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/","title":"\u7504\u9009\u5b9e\u7528\u8f6f\u4ef6","text":"<p>Tip</p> <p>\u4ee5\u4e0b\u662f\u65e5\u5e38\u6536\u96c6\u5230\u7684\u5f00\u6e90\u4f18\u79c0\u5de5\u5177\uff0c\u6301\u7eed\u66f4\u65b0\u4e2d...</p>","tags":["Tools"]},{"location":"toolbox/tools_common/#ssh","title":"SSH\u5de5\u5177","text":"<ul> <li>Xterminal\uff08\u63a8\u8350\uff09</li> <li>\u4e0d\u4ec5\u662f\u5f3a\u5927\u7684SSH\u5de5\u5177\uff0c\u66f4\u63d0\u4f9b\u672c\u5730\u63a7\u5236\u53f0\uff0c\u4ee5\u53ca\u66f4\u591a\u5373\u5c06\u63a8\u51fa\u7684\u5f00\u53d1\u76f8\u5173\u529f\u80fd\uff0c\u8ba9\u60a8\u4e13\u6ce8\u4e8e\u521b\u9020\u5353\u8d8a\u7684\u4ee3\u7801</li> <li> <p>\u652f\u6301MacOS\u3001Linux\u3001Win</p> </li> <li> <p>WinTerm </p> </li> <li>\u4e13\u4e1a\u7684\u8de8\u5e73\u53f0SSH/Sftp/Shell/Telnet/\u4e32\u53e3\u7ec8\u7aef\uff08\u9879\u76ee\u8c8c\u4f3c\u505c\u6b62\u7ef4\u62a4\u4e86\uff0c\u4f46\u5df2\u6709\u529f\u80fd\u4e5f\u57fa\u672c\u6ee1\u8db3\u9700\u6c42\uff09</li> <li>\u652f\u6301MacOS\u3001Linux\u3001Win</li> <li>iTem2 </li> <li>\u652f\u6301 MacOS</li> <li>Alacritty</li> <li>\u652f\u6301MacOS\u3001Linux\u3001Win</li> <li>\u4e3b\u9898\u5730\u5740\uff1aalacritty-theme</li> <li>MobaXterm </li> <li>\u652f\u6301Win</li> <li>NxShell</li> <li>ContainerSSH\uff1a\u4e00\u4e2aSSH\u670d\u52a1\u5668\uff0c\u7528\u6237\u4f7f\u7528ssh\u767b\u5f55\u662f\uff0c\u5b83\u4f1a\u81ea\u52a8\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff0c\u8ba9\u7528\u6237\u767b\u5f55\u5230\u8fd9\u4e2a\u5bb9\u5668\u91cc\u9762\uff0c\u800c\u4e0d\u662f\u767b\u5f55\u5230\u5e95\u5c42\u673a\u5668\uff0c\u7528\u6237\u4e0d\u4f1a\u5bdf\u89c9\u3002</li> </ul> <p>\u5176\u4ed6\u53ef\u53c2\u8003\uff1ahttps://hyperzsb.io/posts/your-own-terminal/</p>","tags":["Tools"]},{"location":"toolbox/tools_common/#_1","title":"\u753b\u56fe\u5de5\u5177","text":"<p>\u63a8\u8350</p> <ul> <li>diagrams.net\uff1a\u4e00\u4e2a\u5728\u7ebf\u753b\u6d41\u7a0b\u56fe\u7684\u7f51\u7ad9\u3002</li> <li>https://excalidraw.com/\uff1a \u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u6613\u7528\u7684\u767d\u677f\u7ed8\u56fe\u5f00\u6e90\u5de5\u5177(\u624b\u7ed8\u98ce\u683c\u7684\u767d\u677f Web \u5e94\u7528\u3002\u8fd9\u662f\u4e00\u6b3e\u5b8c\u5168\u514d\u8d39\u3001\u5f00\u6e90\u7684\u57fa\u4e8e\u65e0\u9650\u753b\u5e03\u7684\u767d\u677f Web \u5e94\u7528\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u4e0a\u9762\u521b\u5efa\u624b\u7ed8\u98ce\u683c\u7684\u4f5c\u54c1\u3002\u652f\u6301\u5305\u62ec\u4e2d\u6587\u5728\u5185\u7684\u591a\u79cd\u8bed\u8a00\uff0c\u63d0\u4f9b\u4e86\u81ea\u7531\u7ed8\u5236\u3001\u591a\u79cd\u5de5\u5177\u3001\u5bfc\u51fa PNG\u3001\u5b9e\u65f6\u534f\u4f5c\u3001\u5171\u4eab\u94fe\u63a5\u3001\u81ea\u52a8\u4fdd\u5b58\u7b49\u529f\u80fd)\u3002</li> </ul> <p>\u5176\u4ed6</p> <ul> <li>Pointless\uff1a\u4e00\u4e2a\u5f00\u6e90\u7684\u7f51\u9875\u753b\u677f\uff0c\u53ef\u4ee5\u5f53\u4f5c\u767d\u677f\u4f7f\u7528\uff0c\u6548\u679c\u4e0d\u9519\u3002</li> <li>mermaid-live-editor: markdown \u753b\u56fe mermaid-live-editor</li> <li>pddon: \u4e00\u6b3e\u5f00\u6e90\u7684\u5728\u7ebf\u753b\u56fe\u5de5\u5177\uff0c\u63d0\u4f9b\u4f4e\u4ee3\u7801\u548c AI \u667a\u80fd\u8f85\u52a9\u5de5\u5177</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_2","title":"\u601d\u7ef4\u5bfc\u56fe\u5de5\u5177","text":"<ul> <li>mind map: \u4e00\u4e2a\u8fd8\u7b97\u5f3a\u5927\u7684Web\u601d\u7ef4\u5bfc\u56fe</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_3","title":"\u5728\u7ebf\u4ee3\u7801\u7f16\u8f91\u5668","text":"<ul> <li>code-server\uff1a\u8fd0\u884c\u5728\u670d\u52a1\u5668\u4e0a\u7684 VS Code\uff0c\u652f\u6301\u5927\u90e8\u5206\u63d2\u4ef6\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u9762\u4f7f\u7528\u3002</li> <li>monaco-editor\uff1a \u514d\u8d39\u7684\u5728\u7ebf\u4ee3\u7801\u7f16\u8f91\u5668</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_4","title":"\u641c\u7d22\u5f15\u64ce","text":"<ul> <li>https://beta.sayhello.so/ \uff1a\u4e00\u4e2a\u4e13\u95e8\u4e3a\u7a0b\u5e8f\u5458\u5f00\u53d1\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u53ef\u4ee5\u7528\u81ea\u7136\u8bed\u8a00\u8f93\u5165\u4f60\u7684\u95ee\u9898\uff0c\u6bd4\u5982\"PHP \u7684 hello world \u793a\u4f8b\"\uff0c\u5b83\u4f1a\u76f4\u63a5\u7ed9\u51fa\u7b54\u6848\u3002</li> <li>https://www.perplexity.ai/\uff1a\u4eba\u5de5\u667a\u80fd\u5f15\u64ce\uff0c\u4f60\u5411\u5b83\u63d0\u95ee\uff0c\u5b83\u544a\u8bc9\u4f60\u7b54\u6848\uff0c\u652f\u6301\u4e2d\u6587</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_5","title":"\u7ffb\u8bd1\u5de5\u5177","text":"<ul> <li>\u6c89\u6d78\u5f0f\u7ffb\u8bd1:\u5b83\u662f\u4e00\u4e2a\u6d4f\u89c8\u5668\u63d2\u4ef6\uff0c\u4e3b\u8981\u529f\u80fd\u662f\u7f51\u9875\u7ffb\u8bd1\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u7ffb\u8bd1\u5f15\u64ce</li> <li>https://wantwords.net\uff1a \u53cd\u5411\u8bcd\u5178</li> <li>Bob: \u4e00\u6b3emac\u7aef\u7ffb\u8bd1\u8f6f\u4ef6</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_6","title":"\u7b80\u5386\u6a21\u677f","text":"<ul> <li>LapisCV: \u4e00\u6b3e\u5f00\u7bb1\u5373\u7528\u7684\u7b80\u5386\u6a21\u677f\uff08\u63d0\u4f9b Obsidian \u548c Typora \u7684\u7b80\u5386\u6a21\u677f\uff09\uff0c\u5b83\u57fa\u4e8e Markdown \u683c\u5f0f\u3001\u7f16\u8f91\u65b9\u4fbf\u3001\u6240\u89c1\u5373\u6240\u5f97\uff0c\u8bbe\u8ba1\u7b80\u6d01\u4e14\u6b63\u5f0f\uff0c\u501f\u52a9\u7f16\u8f91\u5668\u53ef\u76f4\u63a5\u5bfc\u51fa PDF \u683c\u5f0f\u7684\u7b80\u5386\u3002</li> <li>\u70ed\u901f\u7f8e\u65af\uff1a\u4e00\u4e2a\u514d\u8d39\u7684\u7b80\u5386\u5236\u4f5c\u7f51\u7ad9\uff0c\u53ef\u4ee5\u81ea\u7531\u62d6\u62fd\uff0c\u5e2e\u52a9\u4f60\u5236\u4f5c\u4e00\u4efd\u7cbe\u7f8e\u7b80\u5386\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_7","title":"\u8d44\u6e90\u5904\u7406","text":"<ul> <li>\u6587\u5b57\u5904\u7406</li> <li>calligrapher.ai\uff1a \u4e00\u4e2a\u5728\u7ebf\u5de5\u5177\uff0c\u53ef\u4ee5\u5c06\u82f1\u6587\u8f93\u5165\u53d8\u4e3a\u624b\u5199\u4f53\uff0c\u5e76\u5177\u6709\u52a8\u753b\u6548\u679c\uff0c\u63d0\u4f9bSVG\u683c\u5f0f\u4e0b\u8f7d\u3002</li> <li>\u56fe\u7247\u5904\u7406</li> <li>upscayl\uff1a AI \u63d0\u5347\u56fe\u7247\u6e05\u6670\u5ea6\u7684\u8f6f\u4ef6\uff0c\u652f\u6301 Linux\uff0cMac\uff0cWindows \u591a\u5e73\u53f0</li> <li>carbon\uff1a \u514d\u8d39\u4ee3\u7801\u8d34\u56fe\u5de5\u5177</li> <li>UI\u76f8\u5173</li> <li>UISET\uff1a\u6536\u96c6\u514d\u8d39 UI \u8d44\u6e90\uff08\u63d2\u56fe\u3001\u56fe\u6807\u3001\u989c\u8272\u7b49\uff09\u7684\u7f51\u7ad9</li> <li>favicon.io\uff1a\u7f51\u7ad9\u56fe\u6807 Favicon \u7684\u5728\u7ebf\u751f\u6210\u5de5\u5177</li> <li>Axure\u5730\u56fe\u5143\u4ef6\u5e93\uff1a\u53ef\u4e00\u952e\u8f7b\u677e\u590d\u5236\u7701/\u5e02/\u533aSVG\u5730\u56fe\u5143\u4ef6</li> <li>Vue Color Avatar\uff1a \u4e00\u4e2a\u7eaf\u524d\u7aef\u7684\u77e2\u91cf\u98ce\u683c\u5934\u50cf\u751f\u6210\u7f51\u7ad9\uff0c\u53ef\u4ee5\u642d\u914d\u4e0d\u540c\u7684\u7d20\u6750\u7ec4\u4ef6\uff0c\u751f\u6210\u81ea\u5df1\u7684\u4e2a\u6027\u5316\u5934\u50cf</li> <li>\u683c\u5f0f\u8f6c\u6362</li> <li>tableconvert\uff1a \u89c4\u8303\u683c\u5f0f\u8f6c\u6362 </li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_8","title":"\u9605\u8bfb\u5de5\u5177","text":"<ul> <li> <p>flow  \uff1a \u5f00\u6e90\u7684\u57fa\u4e8e\u6d4f\u89c8\u5668\u7aef\u7684 ePub \u9605\u8bfb\u5668\uff0c\u5728\u7ebf\u8bbf\u95ee\u5730\u5740\u89c1 flowoss.com</p> </li> <li> <p>ebook-reader\uff1a \u4e00\u4e2a\u5f00\u6e90\u7684\u7f51\u9875\u9605\u8bfb\u5668\uff0c\u7528\u6765\u9605\u8bfbEPUB\u7535\u5b50\u4e66</p> </li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_9","title":"\u4efb\u52a1\u7ba1\u7406","text":"<ul> <li>Super Productivity\uff1a Super Productivity \u662f\u4e00\u6b3e\u5148\u8fdb\u7684\u8de8\u5e73\u53f0\u7684\u5f85\u529e\u4e8b\u9879\u5217\u8868\u5e94\u7528\u7a0b\u5e8f\uff0c\u5177\u6709\u96c6\u6210\u7684 Timeboxing \u548c\u65f6\u95f4\u8ddf\u8e2a\u529f\u80fd(\u4e00\u6b3e\u5148\u8fdb\u7684\u5f85\u529e\u4e8b\u9879\u5217\u8868\u5e94\u7528\u3002\u8d85\u7ea7\u751f\u4ea7\u529b\u662f\u4e00\u6b3e\u7528 TypeScript \u5f00\u53d1\u7684\u9ad8\u7ea7 TODO \u5e94\u7528\uff0c\u65e8\u5728\u5e2e\u52a9\u7528\u6237\u89c4\u5212\u4efb\u52a1\u548c\u7ba1\u7406\u5f85\u529e\u4e8b\u9879\uff0c\u57f9\u517b\u5065\u5eb7\u9ad8\u6548\u7684\u4e60\u60ef\u3002\u5b83\u5f00\u6e90\u3001\u514d\u8d39\u3001\u65e0\u9700\u6ce8\u518c\uff0c\u652f\u6301\u4e0e Jira\u3001GitHub\u3001GitLab \u7b49\u7b2c\u4e09\u65b9\u5e73\u53f0\u96c6\u6210\uff0c\u53ef\u5373\u65f6\u6536\u5230\u4efb\u52a1\u53d8\u52a8\u7684\u901a\u77e5\u3002\u9664\u4e86\u53ef\u5728\u7ebf\u4f7f\u7528\u7684 Web \u7f51\u9875\u7248\uff0c\u8fd8\u63d0\u4f9b\u4e86 Windows\u3001Linux\u3001macOS\u3001iOS \u548c Android \u5ba2\u6237\u7aef\u3002)\u3002</li> <li>DooTask:\u4e00\u6b3e\u8f7b\u91cf\u7ea7\u7684\u5f00\u6e90\u5728\u7ebf\u9879\u76ee\u4efb\u52a1\u7ba1\u7406\u5de5\u5177\uff0c\u63d0\u4f9b\u5404\u7c7b\u6587\u6863\u534f\u4f5c\u5de5\u5177\uff0c\u5728\u7ebf\u601d\u7ef4\u5bfc\u56fe\u3001\u5728\u7ebf\u6d41\u7a0b\u56fe\u3001\u9879\u76ee\u7ba1\u7406\u3001\u4efb\u52a1\u5206\u53d1\u3001\u5373\u65f6IM\uff0c\u6587\u4ef6\u7ba1\u7406\u7b49\u5de5\u5177\u3002\u3010\u5f53\u524dStar\u6570\u636e\uff1a2.3k\u3011</li> <li>focalboard: \u4e00\u6b3e\u5f00\u6e90\u3001\u591a\u8bed\u8a00\u3001\u81ea\u6258\u7ba1\u7684\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u517c\u5bb9\u4e86 Trello \u548c Notion \u7684\u7279\u70b9\u3002\u5b83\u652f\u6301\u770b\u677f\u3001\u8868\u683c\u548c\u65e5\u5386\u7b49\u89c6\u56fe\u7ba1\u7406\u4efb\u52a1\uff0c\u5e76\u63d0\u4f9b\u8bc4\u8bba\u540c\u6b65\u3001\u6587\u4ef6\u5171\u4eab\u3001\u7528\u6237\u6743\u9650\u7b49\u529f\u80fd\u3002\u8be5\u5de5\u5177\u8fd8\u63d0\u4f9b\u4e86\u9002\u7528\u4e8e Windows\u3001macOS\u3001Linux \u7cfb\u7edf\u7684\u5ba2\u6237\u7aef\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_10","title":"\u5f00\u53d1\u5de5\u5177","text":"","tags":["Tools"]},{"location":"toolbox/tools_common/#python","title":"Python\u76f8\u5173","text":"<ul> <li>vulture:  \u4e00\u6b3ePython \u7684\u9759\u6001\u4ee3\u7801\u5206\u6790\u5de5\u5177\uff0c\u53c8\u79f0Python \u7684\u201c\u6b7b\u201d\u4ee3\u7801\u4fa6\u63a2\uff0c\u5b83\u53ef\u4ee5\u627e\u51fa Python \u9879\u76ee\u4e2d\u672a\u4f7f\u7528\u7684\u4ee3\u7801\uff0c\u4ec5\u9700\u4e00\u6761\u547d\u4ee4\uff0c\u5c31\u80fd\u6e05\u7406\u6ca1\u7528\u548c\u65e0\u6548\u7684 Python \u51fd\u6570\u3001\u53d8\u91cf\u548c\u4ee3\u7801\u7247\u6bb5\u3002</li> <li>radon: \u4e00\u6b3e\u5f3a\u5927\u7684 Python \u4ee3\u7801\u8d28\u91cf\u5206\u6790\u5de5\u5177\uff0c\u5b83\u80fd\u591f\u8ba1\u7b97\u591a\u79cd\u4ee3\u7801\u6307\u6807\uff0c\u5305\u62ec McCabe \u590d\u6742\u5ea6\u3001Halstead \u6307\u6807\u548c\u53ef\u7ef4\u62a4\u6027\u6307\u6570\uff0c\u9002\u7528\u4e8e Python \u4ee3\u7801\u8d28\u91cf\u8bc4\u4f30\u548c\u6301\u7eed\u96c6\u6210\u7b49\u573a\u666f\u3002</li> <li>pyupgrade: \u4e00\u952e\u5347\u7ea7 Python \u4ee3\u7801\u7684\u5de5\u5177\u3002\u8fd9\u662f\u4e00\u4e2a\u7528\u4e8e\u81ea\u52a8\u5347\u7ea7 Python \u4ee3\u7801\uff0c\u4ee5\u9002\u5e94\u65b0\u7248\u672c\u8bed\u6cd5\u7684\u5de5\u5177\u3002\u652f\u6301\u5347\u7ea7\u5230\u4e0d\u540c\u7684 Python \u7248\u672c\u3001\u63d0\u4f9b\u9884\u89c8\u6a21\u5f0f\u5373\u67e5\u770b\u6539\u52a8\u53d8\u5316\u7b49\u529f\u80fd\u3002</li> <li>jurigged: \u4e00\u6b3e\u4e13\u4e3a Python \u63d0\u4f9b\u70ed\u91cd\u8f7d\u529f\u80fd\u7684\u5e93\uff0c\u5b83\u652f\u6301\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u4fee\u6539\u548c\u66f4\u65b0 Python \u4ee3\u7801\uff0c\u65e0\u9700\u91cd\u542f\u7a0b\u5e8f\u3002</li> <li>ciphey: \u81ea\u52a8\u89e3\u5bc6/\u89e3\u7801\u5404\u79cd\u52a0\u5bc6\u7b97\u6cd5\u7684\u5de5\u5177\u3002\u4f7f\u7528\u8be5\u9879\u76ee\u65f6\uff0c\u4f60\u53ea\u9700\u8f93\u5165\u52a0\u5bc6\u7684\u6587\u672c\uff0c\u65e0\u9700\u63d0\u4f9b\u5177\u4f53\u7684\u52a0\u5bc6\u7c7b\u578b\uff0c\u5b83\u5c31\u53ef\u4ee5\u5728 3 \u79d2\u6216\u66f4\u77ed\u7684\u65f6\u95f4\u5185\u81ea\u52a8\u89e3\u5bc6\u5927\u591a\u6570\u7684\u52a0\u5bc6\u6587\u672c\u3002\u8fd9\u4e2a\u9879\u76ee\u652f\u6301 50 \u591a\u79cd\u5e38\u89c1\u7684\u52a0\u5bc6/\u7f16\u7801\u65b9\u5f0f\uff0c\u5305\u62ec\u4e8c\u8fdb\u5236\u3001base64\u3001\u54c8\u5e0c\u548c\u51ef\u6492\u5bc6\u7801\u7b49\u3002</li> <li>sqlglot: \u4e00\u4e2a\u975e\u5e38\u5168\u9762\u7684 SQL \u89e3\u6790\u5668\u3002\u8be5\u9879\u76ee\u662f\u7528 Python \u5199\u7684 SQL \u89e3\u6790\u5668\u3001\u8f6c\u8bd1\u5668\u548c\u4f18\u5316\u5668\uff0c\u5b83\u53ef\u4ee5\u683c\u5f0f\u5316 SQL \u4ee5\u53ca\u652f\u6301\u5728 20 \u79cd\u4e0d\u540c\u65b9\u8a00\u548c SQL \u4e4b\u95f4\u8fdb\u884c\u8f6c\u5316\uff0c\u53ef\u7528\u6765\u81ea\u5b9a\u4e49\u89e3\u6790\u5668\u3001\u5206\u6790\u67e5\u8be2\uff0c\u7528\u7f16\u7a0b\u65b9\u5f0f\u6784\u5efa SQL\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#redis","title":"Redis\u76f8\u5173","text":"<ul> <li>Tiny RDM\uff1a\u4e00\u6b3e\u4f18\u79c0\u7684 Redis \u53ef\u89c6\u5316\u7ba1\u7406\u5de5\u5177\uff08\u2b50\ufe0f\uff09,\u5b83\u63d0\u4f9b\u4e86\u591a\u79cd\u8fde\u63a5\u65b9\u5f0f\u3001\u5206\u6bb5\u52a0\u8f7d\u3001\u6162\u65e5\u5fd7\u3001\u8f6c\u7801\u663e\u793a\u7b49\u529f\u80fd\uff0c\u53ef\u4ee5\u5728 Windows\u3001Linux \u548c macOS \u7cfb\u7edf\u4e0a\u4f7f\u7528\u3002</li> <li>RedisShake:  \u662f\u4e00\u4e2a Redis \u6570\u636e\u5904\u7406\u548c\u8fc1\u79fb\u5de5\u5177\u3002</li> <li>redis-manager: Redis \u4e00\u7ad9\u5f0f\u7ba1\u7406\u5e73\u53f0\uff0c\u652f\u6301\u96c6\u7fa4\u7684\u76d1\u63a7\u3001\u5b89\u88c5\u3001\u7ba1\u7406\u3001\u544a\u8b66\u4ee5\u53ca\u57fa\u672c\u7684\u6570\u636e\u64cd\u4f5c</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#docker","title":"Docker\u76f8\u5173","text":"<ul> <li>buildg: \u4ea4\u4e92\u5f0f\u7684 Dockerfile \u8c03\u8bd5\u5de5\u5177,\u652f\u6301\u8bbe\u7f6e\u65ad\u70b9\u3001\u5355\u6b65\u6267\u884c\u548c\u975e root \u6a21\u5f0f\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728 VSCode \u7b49\u7f16\u8f91\u5668\u4e2d\u4f7f\u7528\u3002</li> <li>xpipe: \u4e00\u952e\u8fdc\u7a0b\u767b\u5f55 Docker \u5b9e\u4f8b\u7684\u5de5\u5177\u3002\u8be5\u9879\u76ee\u662f\u7528\u4e8e\u7ba1\u7406\u8fdc\u7a0b\u670d\u52a1\u5668\u7684\u684c\u9762\u5de5\u5177\uff0c\u5b83\u4f1a\u5728 SSH \u8fde\u63a5\u5230\u670d\u52a1\u5668\u540e\uff0c\u81ea\u52a8\u68c0\u6d4b\u670d\u52a1\u5668\u73af\u5883\u548c shell \u7c7b\u578b\uff0c\u5b9e\u73b0\u4e00\u952e\u767b\u5f55\u5404\u79cd\u5bb9\u5668\u5b9e\u4f8b\uff08Docker\u3001LXC\u3001WSL\uff09\uff0c\u5e76\u652f\u6301\u8fdc\u7a0b\u6587\u4ef6\u7ba1\u7406\u548c\u5de5\u5177\u96c6\u6210\u7b49\u529f\u80fd\u3002</li> <li>dockge: \u4e00\u4e2a\u7f8e\u89c2\u3001\u6613\u7528\u7684 Docker Compose \u7ba1\u7406\u5e73\u53f0\u3002\u8be5\u9879\u76ee\u63d0\u4f9b\u4e86\u4e00\u4e2a Web \u754c\u9762\uff0c\u7528\u4e8e\u7ba1\u7406 docker-compose.yaml \u6587\u4ef6\u3002\u5b83\u5f00\u7bb1\u5373\u7528\u3001\u754c\u9762\u8bbe\u8ba1\u7cbe\u7f8e\uff0c\u652f\u6301\u4ea4\u4e92\u5f0f\u7f16\u8f91 compose.yaml \u6587\u4ef6\u3001\u66f4\u65b0 docker \u955c\u50cf\uff0c\u4ee5\u53ca\u542f\u52a8\u3001\u505c\u6b62\u3001\u91cd\u542f\u3001\u5220\u9664 docker \u7b49\u64cd\u4f5c\u3002</li> <li>veinmind-tools\uff1a\u8fd9\u4e2a\u5de5\u5177\u53ef\u4ee5\u68c0\u67e5 Docker \u955c\u50cf\u6587\u4ef6\u662f\u5426\u5b58\u5728\u5b89\u5168\u95ee\u9898</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_11","title":"\u722c\u866b\u76f8\u5173","text":"<ul> <li>useragent\uff1a \u6b64\u7f51\u7ad9\u63d0\u4f9b\u5404\u79cd\u6700\u65b0\u7248\u6d4f\u89c8\u5668\u7684useragent\u7684\u5b57\u7b26\u4e32</li> <li>spider-admin-pro\uff1a\u722c\u866b\u5de5\u5177 Scrapy \u7684\u4e00\u4e2a\u7ba1\u7406\u9762\u677f\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#_12","title":"\u6b63\u5219\u6d4b\u8bd5\u5de5\u5177","text":"<ul> <li>https://regex101.com/</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#api","title":"API\u7ba1\u7406\u5de5\u5177","text":"<ul> <li>postman</li> <li>apifox</li> <li>https://restfox.dev/\uff1a\u5728\u7ebf\u7684api\u6d4b\u8bd5\u5de5\u5177 \uff0cpostman\u66ff\u4ee3\u54c1</li> <li>Posting: \u7ec8\u7aef\u4e2d\u7684API\u6d4b\u8bd5\u5de5\u5177</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_common/#transform","title":"Transform\u8f6c\u6362\u5de5\u5177","text":"<ul> <li>jsoneditor: \u5728\u7ebf\u7684 JSON \u7f16\u8f91\u5668\u3002\u8be5\u9879\u76ee\u662f\u4e00\u4e2a\u57fa\u4e8e Web \u7684 JSON \u7f16\u8f91\u5668\uff0c\u53ef\u7528\u4e8e\u67e5\u770b\u3001\u7f16\u8f91\u3001\u683c\u5f0f\u5316\u548c\u9a8c\u8bc1 JSON\u3002\u5b83\u652f\u6301\u6811\u5f62\u7f16\u8f91\u5668\u3001\u4ee3\u7801\u7f16\u8f91\u5668\u548c\u7eaf\u6587\u672c\u7b49\u6a21\u5f0f\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u76f4\u63a5\u5728\u7ebf\u4f7f\u7528\uff0c\u8fd8\u53ef\u4f5c\u4e3a\u7ec4\u4ef6\u96c6\u6210\u5230\u9879\u76ee\u4e2d\u3002</li> <li>json-server: \u4ec5\u9700 30 \u79d2\u3001\u4e0d\u7528\u5199\u4ee3\u7801\u5c31\u80fd\u6a21\u62df\u63a5\u53e3\u6570\u636e\u3002\u8fd9\u662f\u4e00\u6b3e\u5c0f\u5de7\u7684\u63a5\u53e3\u6a21\u62df\u5de5\u5177\uff0c\u5b83\u4f7f\u7528\u8d77\u6765\u5341\u5206\u7b80\u5355\uff0c\u53ea\u9700\u521b\u5efa JSON \u6587\u4ef6\uff0c\u7136\u540e\u4e00\u6761\u547d\u4ee4\u5c31\u80fd\u5feb\u901f\u542f\u52a8\u63a5\u53e3\u670d\u52a1\u3002</li> </ul> <ul> <li>github\u5730\u5740\uff1a https://github.com/ritz078/transform</li> </ul> <p>yaml\u76f8\u5173</p> <ul> <li> <p>toml to yaml: https://www.convertsimple.com/convert-toml-to-yaml/</p> </li> <li> <p>yaml to toml: https://www.convertsimple.com/convert-yaml-to-toml/</p> </li> <li> <p>json to toml: https://www.convertsimple.com/convert-json-to-toml/</p> </li> <li> <p>json to yaml: https://transform.tools/json-to-yaml</p> </li> </ul> <p>Json\u76f8\u5173</p> <ul> <li> <p>json https://jsoneditoronline.org/</p> </li> <li> <p>json \u683c\u5f0f\u5316\u795e\u5668 https://jsonformatter.org/</p> </li> <li> <p>json to protobuf\uff1a https://transform.tools/json-schema-to-protobuf</p> </li> <li>js to json: https://transform.tools/js-object-to-json</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_plugin/","title":"\u5e38\u7528\u63d2\u4ef6\u96c6","text":"<p>Tip</p> <p>\u4ee5\u4e0b\u662fChrome\u3001 Vscode\u3001 IDEA\u7b49\u5e38\u7528\u63d2\u4ef6\u6536\u96c6\u6c47\u603b\uff0c\u6301\u7eed\u66f4\u65b0\u4e2d...</p>","tags":["Tools"]},{"location":"toolbox/tools_plugin/#chrome","title":"Chrome\u63d2\u4ef6","text":"<ul> <li>\u6536\u85cf\u732b\u63d2\u4ef6\uff1ahttps://chrome.pictureknow.com/</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_plugin/#pycharm","title":"Pycharm\u63d2\u4ef6","text":"<ul> <li>Save Actions  \uff1a \u6309\u4e0b Ctrl + S \u5373\u53ef\u81ea\u52a8\u683c\u5f0f\u5316\u4ee3\u7801</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_plugin/#vscode","title":"Vscode\u63d2\u4ef6","text":"<ul> <li>\u6570\u636e\u5e93\u76f8\u5173</li> <li>PPZ.vscode\uff1a\u4e00\u4e2a VSCode \u63d2\u4ef6\uff0c\u63d0\u4f9b\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u56fe\u5f62\u754c\u9762\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u5e93</li> <li>code-server\uff1a\u4e00\u4e2a VS Code \u8fdc\u7a0b\u670d\u52a1\u7684\u5c01\u88c5\uff0c\u53ef\u4ee5\u5b89\u88c5\u5728\u4efb\u610f\u673a\u5668\u4e0a\u9762\uff0c\u7136\u540e\u5c31\u80fd\u5728\u6d4f\u89c8\u5668\u4f7f\u7528 VS Code</li> <li>codegeex: \u4e00\u4e2a\u56fd\u4ea7\u7684\u4ee3\u7801\u751f\u6210\u7684\u4eba\u5de5\u667a\u80fd\u5de5\u5177\uff0c\u8ddf GitHub Copilot \u7c7b\u4f3c\uff0c\u53ef\u4ee5\u5c06\u4e00\u79cd\u8bed\u8a00\u7684\u4ee3\u7801\u7ffb\u8bd1\u6210\u53e6\u4e00\u79cd</li> <li>vscode-markdown-github\uff1aVSCode \u7684 Markdown \u6e32\u67d3\u63d2\u4ef6\uff0c\u7279\u70b9\u662f\u5b8c\u5168\u6309\u7167 GitHub \u7684 Markdown \u6548\u679c\u8fdb\u884c\u6e32\u67d3</li> <li>\u4e3b\u9898\u914d\u8272\u76f8\u5173\uff1a</li> <li>catppuccin: \u8d85\u770b\u597d\u7684\u4e3b\u9898\u914d\u8272\u65b9\u6848\u3002\u8be5\u9879\u76ee\u662f\u7531\u793e\u533a\u9a71\u52a8\u7684\u914d\u8272\u65b9\u6848\uff0c\u5185\u542b\u4ee5\u6696\u8272\u8c03\u4e3a\u4e3b\u3001\u8272\u5f69\u4e30\u5bcc\u7684\u4e3b\u9898\uff0c\u53ef\u7528\u4e8e VSCode\u3001JetBrains\u3001Vim \u7b49\u7f16\u8f91\u5668\u548c IDE\uff0c\u540c\u6837\u9002\u7528\u4e8e\u5404\u79cd\u7f16\u7a0b\u8bed\u8a00\u7684\u5f00\u53d1\u5e93\u3001\u7ec8\u7aef\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u6d4f\u89c8\u5668\u7b49\u5e94\u7528\u3002</li> </ul>","tags":["Tools"]},{"location":"toolbox/tools_plugin/#_1","title":"\u6cb9\u7334\u63d2\u4ef6","text":"<ul> <li>greasyfork\u5546\u5e97</li> </ul>","tags":["Tools"]},{"location":"toolbox/dev_software/YARN/","title":"YARN\u96c6\u7fa4\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#yarn","title":"YARN\u96c6\u7fa4\u5b89\u88c5","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#step1-mapred-sitexml","title":"step1: \u4fee\u6539mapred-site.xml\u6587\u4ef6","text":"<p>\u5728 ${HADOOP_HOME}/etc/hadoop \u8def\u5f84\u4e0b\u914d\u7f6e mapred-site.xml \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>&lt;configuration&gt;\n  &lt;!-- mr\u7a0b\u5e8f\u9ed8\u8ba4\u8fd0\u884c\u65b9\u5f0f:yarn-\u96c6\u7fa4\u6a21\u5f0f,local-\u672c\u5730\u6a21\u5f0f  --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.framework.name&lt;/name&gt;\n    &lt;value&gt;yarn&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- jobhistory \u670d\u52a1\u914d\u7f6e --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;\n    &lt;value&gt;node75:10020&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- jobhistory web ui \u8bbf\u95ee\u7aef\u53e3 --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;\n    &lt;value&gt;node75:19888&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.application.classpath&lt;/name&gt;\n    &lt;value&gt;$HADOOP_HOME/share/hadoop/mapreduce/*,$HADOOP_HOME/share/hadoop/mapreduce/lib/*&lt;/value&gt;\n  &lt;/property&gt; \n\n  &lt;!--MR App Master\u73af\u5883\u53d8\u91cf --&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.app.mapreduce.am.env&lt;/name&gt;\n    &lt;value&gt;HADOOP_MAPRED_HOME=${HADOOP_HOME}&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--MR MapTask\u73af\u5883\u53d8\u91cf --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.map.env&lt;/name&gt;\n    &lt;value&gt;HADOOP_MAPRED_HOME=${HADOOP_HOME}&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--MR ReduceTask\u73af\u5883\u53d8\u91cf --&gt;\n  &lt;property&gt;\n    &lt;name&gt;mapreduce.reduce.env&lt;/name&gt;\n    &lt;value&gt;HADOOP_MAPRED_HOME=${HADOOP_HOME}&lt;/value&gt;\n  &lt;/property&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#step2-yarn-sitexml","title":"step2: \u4fee\u6539yarn-site.xml\u6587\u4ef6","text":"<p>\u5728 ${HADOOP_HOME}/etc/hadoop \u8def\u5f84\u4e0b\u914d\u7f6e yarn-site.xml \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>&lt;configuration&gt;\n\n&lt;!-- Site specific YARN configuration properties --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;\n     &lt;value&gt;mapreduce_shuffle&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;!-- \u5f00\u542fRM\u9ad8\u53ef\u7528 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;!-- \u6307\u5b9aRM\u7684cluster id --&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt;\n    &lt;value&gt;cluster&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;!-- \u6307\u5b9aRM\u7684\u540d\u5b57 --&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt;\n        &lt;value&gt;rm1,rm2&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;!-- \u5206\u522b\u6307\u5b9aRM\u7684\u5730\u5740 --&gt;\n  &lt;property&gt;\n        &lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt;\n        &lt;value&gt;node73&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;\n  &lt;property&gt;\n        &lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt;\n        &lt;value&gt;node74&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- rm1 WebUI\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.webapp.address.rm1&lt;/name&gt;\n     &lt;value&gt;node73:8088&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- rm2 WebUI\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.webapp.address.rm2&lt;/name&gt;\n     &lt;value&gt;node74:8088&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u5f00\u542f\u81ea\u52a8\u6545\u969c\u8f6c\u79fb --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.ha.automatic-failover.enabled&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- zk\u96c6\u7fa4\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;hadoop.zk.address&lt;/name&gt;\n     &lt;value&gt;node73:2181,node74:2181,node75:2181&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u5f00\u542fRM\u91cd\u542f\u72b6\u6001\u6062\u590d\u673a\u5236 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.recovery.enabled&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u72b6\u6001\u5b58\u50a8\u91c7\u7528ZK --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.resourcemanager.store.class&lt;/name&gt;\n     &lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--ZK\u4fdd\u5b58\u7684\u5df2\u5b8c\u6210\u4efb\u52a1\u7684\u6700\u5927\u6570\u91cf--&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.state-store.max-completed-applications&lt;/name&gt;\n    &lt;value&gt;100&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--RM\u5185\u5b58\u4e2d\u4fdd\u5b58\u7684\u5df2\u5b8c\u6210\u4efb\u52a1\u7684\u6700\u5927\u6570\u91cf\uff0c\u8c03\u6574\u8be5\u53c2\u6570\u4e3b\u8981\u662f\u4e3a\u4e86RM\u5185\u5b58\u4e0eZK\u4e2d\u4fdd\u5b58\u7684\u4efb\u52a1\u4fe1\u606f\u548c\u6570\u91cf\u4e00\u81f4--&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.max-completed-applications&lt;/name&gt;\n    &lt;value&gt;100&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u5b9a\u4e49\u4e86ZK\u7684ZNode\u8282\u70b9\u6240\u80fd\u5b58\u50a8\u7684\u6700\u5927\u6570\u636e\u91cf\uff0c\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff0c\u9ed8\u8ba4\u662f1048576\u5b57\u8282\uff0c\u4e5f\u5c31\u662f1MB\uff0c\u8fd9\u91cc\u6539\u62104MB --&gt;\n  &lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.zk-max-znode-size.bytes&lt;/name&gt;\n    &lt;value&gt;4194304&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u5bb9\u5668\u865a\u62df\u5185\u5b58\u4e0e\u7269\u7406\u5185\u5b58\u4e4b\u95f4\u7684\u6bd4\u7387\uff0c\u9ed8\u8ba4\uff1a2.1 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.nodemanager.vmem-pmem-ratio&lt;/name&gt;\n     &lt;value&gt;2.1&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u5f00\u542fyarn\u65e5\u5fd7\u805a\u96c6\u529f\u80fd\uff0c\u6536\u96c6\u6bcf\u4e2a\u5bb9\u5668\u7684\u65e5\u5fd7\u96c6\u4e2d\u5b58\u50a8\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u9ed8\u8ba4\uff1afalse --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!-- \u65e5\u5fd7\u4fdd\u7559\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u6708 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;\n     &lt;value&gt;2592000&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.log.server.url&lt;/name&gt;\n     &lt;value&gt;http://node75:19888/jobhistory/logs&lt;/value&gt;\n  &lt;/property&gt;\n &lt;!--\u662f\u5426\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\u68c0\u67e5\u6bcf\u4e2a\u4efb\u52a1\u6b63\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\u91cf\uff0c\u5982\u679c\u4efb\u52a1\u8d85\u51fa\u5206\u914d\u503c\uff0c\u5219\u76f4\u63a5\u5c06\u5176\u6740\u6389\uff0c\u9ed8\u8ba4\u662ftrue --&gt;\n  &lt;property&gt;\n     &lt;name&gt;yarn.nodemanager.pmem-check-enabled&lt;/name&gt;\n     &lt;value&gt;false&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--\u662f\u5426\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\u68c0\u67e5\u6bcf\u4e2a\u4efb\u52a1\u6b63\u4f7f\u7528\u7684\u865a\u62df\u5185\u5b58\u91cf\uff0c\u5982\u679c\u4efb\u52a1\u8d85\u51fa\u5206\u914d\u503c\uff0c\u5219\u76f4\u63a5\u5c06\u5176\u6740\u6389\uff0c\u9ed8\u8ba4\u662ftrue --&gt;\n  &lt;property&gt;\n      &lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;\n      &lt;value&gt;false&lt;/value&gt;\n  &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#step3-capacity-schedulerxml","title":"step3: \u4fee\u6539capacity-scheduler.xml\u6587\u4ef6","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6e capacity-scheduler.xml \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>  &lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.resource-calculator&lt;/name&gt;\n    &lt;!-- &lt;value&gt;org.apache.hadoop.yarn.util.resource.DefaultResourceCalculator&lt;/value&gt; --&gt;\n    &lt;value&gt;org.apache.hadoop.yarn.util.resource.DominantResourceCalculator&lt;/value&gt;\n    &lt;description&gt;\n      The ResourceCalculator implementation to be used to compare\n      Resources in the scheduler.\n      The default i.e. DefaultResourceCalculator only uses Memory while\n      DominantResourceCalculator uses dominant-resource to compare\n      multi-dimensional resources such as Memory, CPU etc.\n    &lt;/description&gt;\n  &lt;/property&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/YARN/#yarn_1","title":"YARN\u8fd0\u7ef4\u547d\u4ee4","text":"<p>\uff081\uff09\u542f\u52a8Yarn\u96c6\u7fa4\uff0c\u68c0\u67e5RM\u548cNM\u662f\u5426\u542f\u52a8\u6210\u529f\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/start-yarn.sh\n\n${HADOOP_HOME}/sbin/stop-yarn.sh\n</code></pre> <p>\uff082\uff09\u542f\u52a8JobHistoryServer\u5386\u53f2\u670d\u52a1\u5668\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/mr-jobhistory-daemon.sh start historyserver\n\n${HADOOP_HOME}/sbin/mr-jobhistory-daemon.sh stop historyserver\n</code></pre> <p>\u200b        \u542f\u52a8\u4e4b\u540e\u68c0\u67e5\u4e24\u53f0\u673a\u5668\u4e0a\u662f\u5426\u90fd\u542f\u52a8RM\uff0c\u540c\u65f6\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u8fd9\u4e24\u673a\u5668\u7684active\u548cstandby\u5206\u522b\u662f\u54ea\u4e2a\u8282\u70b9\u3002</p> Bash<pre><code>yarn rmadmin -getAllServiceState\n</code></pre> <p>\u200b        \u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a</p> Bash<pre><code>node73:8033                                        standby   \nnode74:8033                                        active   \n</code></pre> <p>\u200b       \u8fd9\u91cc\u6ce8\u610f\u7684\u662f\uff0cactive\u548cstandby\u4e24\u4e2a\u8282\u70b9\u5747\u53ef\u4ee5\u901a\u8fc7\u9ed8\u8ba4\u76848088\u7aef\u53e3\u53bb\u8bbf\u95eeYarn WebUI\u63a7\u5236\u53f0\uff0c\u53ea\u4e0d\u8fc7\u5f53\u8bbf\u95eestandby\u8282\u70b9\u7684WebUI\u65f6\u4f1a\u81ea\u52a8\u8df3\u8f6cactive\u8282\u70b9\u7684WebUI\u3002</p> <p>\uff083\uff09\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\u3002</p> <p>\u5411Yarn\u96c6\u7fa4\u63d0\u4ea4\u4e00\u4e2a\u8499\u7279\u5361\u7565\u8ba1\u7b97\u5706\u5468\u7387\u7684MapReducer\u7a0b\u5e8f\u3002</p> Bash<pre><code>yarn jar ${HADOOP_HOME}/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.4.jar pi 2 2 \n</code></pre> <p>\u65e5\u5fd7\u5982\u4e0b\uff1a</p> Bash<pre><code>Number of Maps  = 2\nSamples per Map = 2\nWrote input for Map #0\nWrote input for Map #1\nStarting Job\n22/02/22 16:11:14 INFO client.RMProxy: Connecting to ResourceManager at bigdata03/172.16.10.205:8032\n22/02/22 16:11:14 INFO input.FileInputFormat: Total input files to process : 2\n22/02/22 16:11:15 INFO mapreduce.JobSubmitter: number of splits:2\n22/02/22 16:11:15 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1645515567477_0001\n22/02/22 16:11:15 INFO conf.Configuration: resource-types.xml not found\n22/02/22 16:11:15 INFO resource.ResourceUtils: Unable to find 'resource-types.xml'.\n22/02/22 16:11:15 INFO resource.ResourceUtils: Adding resource type - name = memory-mb, units = Mi, type = COUNTABLE\n22/02/22 16:11:15 INFO resource.ResourceUtils: Adding resource type - name = vcores, units = , type = COUNTABLE\n22/02/22 16:11:15 INFO impl.YarnClientImpl: Submitted application application_1645515567477_0001\n22/02/22 16:11:15 INFO mapreduce.Job: The url to track the job: http://bigdata03:8088/proxy/application_1645515567477_0001/\n22/02/22 16:11:15 INFO mapreduce.Job: Running job: job_1645515567477_0001\n22/02/22 16:11:20 INFO mapreduce.Job: Job job_1645515567477_0001 running in uber mode : false\n22/02/22 16:11:20 INFO mapreduce.Job:  map 0% reduce 0%\n22/02/22 16:11:23 INFO mapreduce.Job:  map 100% reduce 0%\n22/02/22 16:11:28 INFO mapreduce.Job:  map 100% reduce 100%\n22/02/22 16:11:29 INFO mapreduce.Job: Job job_1645515567477_0001 completed successfully\n22/02/22 16:11:29 INFO mapreduce.Job: Counters: 49\n        File System Counters\n                FILE: Number of bytes read=50\n                FILE: Number of bytes written=635598\n                FILE: Number of read operations=0\n                FILE: Number of large read operations=0\n                FILE: Number of write operations=0\n                HDFS: Number of bytes read=512\n                HDFS: Number of bytes written=215\n                HDFS: Number of read operations=11\n                HDFS: Number of large read operations=0\n                HDFS: Number of write operations=3\n        Job Counters\n                Launched map tasks=2\n                Launched reduce tasks=1\n                Data-local map tasks=2\n                Total time spent by all maps in occupied slots (ms)=2482\n                Total time spent by all reduces in occupied slots (ms)=1971\n                Total time spent by all map tasks (ms)=2482\n                Total time spent by all reduce tasks (ms)=1971\n                Total vcore-milliseconds taken by all map tasks=2482\n                Total vcore-milliseconds taken by all reduce tasks=1971\n                Total megabyte-milliseconds taken by all map tasks=2541568\n                Total megabyte-milliseconds taken by all reduce tasks=2018304\n        Map-Reduce Framework\n                Map input records=2\n                Map output records=4\n                Map output bytes=36\n                Map output materialized bytes=56\n                Input split bytes=276\n                Combine input records=0\n                Combine output records=0\n                Reduce input groups=2\n                Reduce shuffle bytes=56\n                Reduce input records=4\n                Reduce output records=0\n                Spilled Records=8\n                Shuffled Maps =2\n                Failed Shuffles=0\n                Merged Map outputs=2\n                GC time elapsed (ms)=99\n                CPU time spent (ms)=1280\n                Physical memory (bytes) snapshot=814084096\n                Virtual memory (bytes) snapshot=7487442944\n                Total committed heap usage (bytes)=548405248\n        Shuffle Errors\n                BAD_ID=0\n                CONNECTION=0\n                IO_ERROR=0\n                WRONG_LENGTH=0\n                WRONG_MAP=0\n                WRONG_REDUCE=0\n        File Input Format Counters\n                Bytes Read=236\n        File Output Format Counters\n                Bytes Written=97\nJob Finished in 15.741 seconds\nEstimated value of Pi is 4.00000000000000000000\n</code></pre> <p>\u200b       \u8fd0\u884c\u6210\u529f\uff01</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/","title":"Etcd\u96c6\u7fa4\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.71\uff08Master\uff09\u3001192.168.21.77\uff08salve\uff09\u3001192.168.21.78\uff08salve\uff09 \u90e8\u7f72\u7b56\u7565 Centos7.9 \u7cfb\u7edf  \u96c6\u7fa4\u90e8\u7f72 \u670d\u52a1\u7aef\u53e3\u53f7 2379 \u5b89\u88c5\u90e8\u7f72\u76ee\u5f55 usr/local/bin/etcd  /usr/local/bin/etcdctl","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#_2","title":"\u90e8\u7f72\u6307\u5357","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#http","title":"\u90e8\u7f72\uff08HTTP\uff09\u65b9\u5f0f\uff1a","text":"<ul> <li> <p>\u4e0b\u8f7d\u3001\u5b89\u88c5 Bash<pre><code>wget https://github.com/etcd-io/etcd/releases/download/v3.5.7/etcd-v3.5.7-linux-amd64.tar.gz\n\ntar zxf etcd-v3.5.7-linux-amd64.tar.gz --strip-components=1 -C /usr/local/bin etcd-v3.5.7-linux-amd64/etcd{,ctl}\n\netcdctl version\n\nscp /usr/local/bin/etcd* node77:/usr/local/bin/\nscp /usr/local/bin/etcd* node78:/usr/local/bin/\n</code></pre></p> </li> <li> <p>\u7f16\u5199\u914d\u7f6e\u6587\u4ef6(\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981) Bash<pre><code>vim /etc/etcd/etcd.conf\n\n# node71\u8282\u70b9\uff1a \n#[Member]\nETCD_NAME=\"node71\"\nETCD_DATA_DIR=\"/data/workspace/etcd/data.etcd\"\nETCD_LISTEN_PEER_URLS=\"http://192.168.21.71:2380\"\nETCD_LISTEN_CLIENT_URLS=\"http://192.168.21.71:2379\"\n\n#[Clustering]\nETCD_INITIAL_ADVERTISE_PEER_URLS=\"http://192.168.21.71:2380\"\nETCD_ADVERTISE_CLIENT_URLS=\"http://192.168.21.71:2379\"\nETCD_INITIAL_CLUSTER=\"node71=http://192.168.21.71:2380,node77=http://192.168.21.77:2380,node78=http://192.168.21.78:2380\"\nETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"\nETCD_INITIAL_CLUSTER_STATE=\"new\"\n\n\n# node77\u8282\u70b9\uff1a\n#[Member]\nETCD_NAME=\"node77\"\nETCD_DATA_DIR=\"/data/workspace/etcd/data.etcd\"\nETCD_LISTEN_PEER_URLS=\"http://192.168.21.77:2380\"\nETCD_LISTEN_CLIENT_URLS=\"http://192.168.21.77:2379\"\n\n#[Clustering]\nETCD_INITIAL_ADVERTISE_PEER_URLS=\"http://192.168.21.77:2380\"\nETCD_ADVERTISE_CLIENT_URLS=\"http://192.168.21.77:2379\"\nETCD_INITIAL_CLUSTER=\"node71=http://192.168.21.71:2380,node77=http://192.168.21.77:2380,node78=http://192.168.21.78:2380\"\nETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"\nETCD_INITIAL_CLUSTER_STATE=\"new\"\n\n\n# node78\u8282\u70b9\uff1a\n#[Member]\nETCD_NAME=\"node78\"\nETCD_DATA_DIR=\"/data/workspace/etcd/data.etcd\"\nETCD_LISTEN_PEER_URLS=\"http://192.168.21.78:2380\"\nETCD_LISTEN_CLIENT_URLS=\"http://192.168.21.78:2379\"\n\n#[Clustering]\nETCD_INITIAL_ADVERTISE_PEER_URLS=\"http://192.168.21.78:2380\"\nETCD_ADVERTISE_CLIENT_URLS=\"http://192.168.21.78:2379\"\nETCD_INITIAL_CLUSTER=\"node71=http://192.168.21.71:2380,node77=http://192.168.21.77:2380,node78=http://192.168.21.78:2380\"\nETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"\nETCD_INITIAL_CLUSTER_STATE=\"new\"\n</code></pre></p> </li> <li> <p>\u7f16\u5199\u542f\u52a8\u811a\u672c Bash<pre><code># vim /data/workspace/etcd_node71.sh\n\n# For each machine\nTOKEN=qazwx123\nCLUSTER_STATE=new\nNAME_1=node71\nNAME_2=node77\nNAME_3=node78\nHOST_1=192.168.21.71\nHOST_2=192.168.21.77\nHOST_3=192.168.21.78\nCLUSTER=${NAME_1}=http://${HOST_1}:2380,${NAME_2}=http://${HOST_2}:2380,${NAME_3}=http://${HOST_3}:2380\n\n# For node71\nTHIS_NAME=${NAME_1}\nTHIS_IP=${HOST_1}\netcd --data-dir=/data/workspace/etcd/data.etcd --name ${THIS_NAME} \\\n    --initial-advertise-peer-urls http://${THIS_IP}:2380 \\\n    --listen-peer-urls http://${THIS_IP}:2380 \\\n    --advertise-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --listen-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --initial-cluster ${CLUSTER} \\\n    --initial-cluster-state ${CLUSTER_STATE} \\\n    --initial-cluster-token ${TOKEN}  &gt; /data/workspace/etcd/etcd.out 2&gt;&amp;1 &amp;\n\n\n# vim /data/workspace/etcd_node77.sh\n# For each machine\nTOKEN=qazwx123\nCLUSTER_STATE=new\nNAME_1=node71\nNAME_2=node77\nNAME_3=node78\nHOST_1=192.168.21.71\nHOST_2=192.168.21.77\nHOST_3=192.168.21.78\nCLUSTER=${NAME_1}=http://${HOST_1}:2380,${NAME_2}=http://${HOST_2}:2380,${NAME_3}=http://${HOST_3}:2380\n\n# For node77\nTHIS_NAME=${NAME_2}\nTHIS_IP=${HOST_2}\netcd --data-dir=/data/workspace/etcd/data.etcd --name ${THIS_NAME} \\\n    --initial-advertise-peer-urls http://${THIS_IP}:2380 \\\n    --listen-peer-urls http://${THIS_IP}:2380 \\\n    --advertise-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --listen-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --initial-cluster ${CLUSTER} \\\n    --initial-cluster-state ${CLUSTER_STATE} \\\n    --initial-cluster-token ${TOKEN}  &gt; /data/workspace/etcd/etcd.out 2&gt;&amp;1 &amp;\n\n\n# vim /data/workspace/etcd_node78.sh\n# For each machine\nTOKEN=qazwx123\nCLUSTER_STATE=new\nNAME_1=node71\nNAME_2=node77\nNAME_3=node78\nHOST_1=192.168.21.71\nHOST_2=192.168.21.77\nHOST_3=192.168.21.78\nCLUSTER=${NAME_1}=http://${HOST_1}:2380,${NAME_2}=http://${HOST_2}:2380,${NAME_3}=http://${HOST_3}:2380\n\n# For node78\nTHIS_NAME=${NAME_3}\nTHIS_IP=${HOST_3}\netcd --data-dir=/data/workspace/etcd/data.etcd --name ${THIS_NAME} \\\n    --initial-advertise-peer-urls http://${THIS_IP}:2380 \\\n    --listen-peer-urls http://${THIS_IP}:2380 \\\n    --advertise-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --listen-client-urls http://${THIS_IP}:2379,http://127.0.0.1:2379 \\\n    --initial-cluster ${CLUSTER} \\\n    --initial-cluster-state ${CLUSTER_STATE} \\\n    --initial-cluster-token ${TOKEN}  &gt; /data/workspace/etcd/etcd.out 2&gt;&amp;1 &amp;\n</code></pre></p> </li> <li> <p>\u6267\u884c\u542f\u52a8\u547d\u4ee4 Bash<pre><code>chmode +x etcd_node71.sh etcd_node77.sh etcd_node78.sh\n\nscp /data/workspace/etcd/etcd_node77.sh node77:/data/workspace/etcd\nscp /data/workspace/etcd/etcd_node78.sh node78:/data/workspace/etcd\n\n# \u4e09\u4e2a\u8282\u70b9\u540c\u65f6\u6267\u884c\n# node71\n./etcd_node71.sh\n\n# node77\n./etcd_node77.sh\n\n# node78\n./etcd_node78.sh\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u5f00\u673a\u542f\u52a8\uff08\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981\uff09 Bash<pre><code>vim /usr/lib/systemd/system/etcd.service\n\n[Unit]\nDescription=Etcd Server\nAfter=network.target\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nType=notify\nEnvironmentFile=/etc/etcd/etcd.conf\nExecStart=etcd \\\n--name=${ETCD_NAME} \\\n--data-dir=${ETCD_DATA_DIR} \\\n--listen-peer-urls=${ETCD_LISTEN_PEER_URLS} \\\n--listen-client-urls=${ETCD_LISTEN_CLIENT_URLS},http://127.0.0.1:2379 \\\n--advertise-client-urls=${ETCD_ADVERTISE_CLIENT_URLS},http://127.0.0.1:2379 \\\n--initial-advertise-peer-urls=${ETCD_INITIAL_ADVERTISE_PEER_URLS} \\\n--initial-cluster=${ETCD_INITIAL_CLUSTER} \\\n--initial-cluster-token=${ETCD_INITIAL_CLUSTER} \\\n--initial-cluster-state=${ETCD_INITIAL_CLUSTER_STATE}\n\nRestart=on-failure\nRestartSec=5\nLimitNOFILE=65536\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> </li> <li> <p>\u542f\u52a8 Bash<pre><code>systemctl daemon-reload\n\nsystemctl start etcd\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u96c6\u7fa4\u542f\u52a8\u72b6\u6001 Bash<pre><code>etcdctl --write-out=table member list\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n|        ID        | STATUS  |  NAME  |        PEER ADDRS         |                  CLIENT ADDRS                   | IS LEARNER |\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n| 6dcf7486a69f8697 | started | node71 | http://192.168.21.71:2380 | http://127.0.0.1:2379,http://192.168.21.71:2379 |      false |\n| a813d75d75a2bb6a | started | node77 | http://192.168.21.77:2380 | http://127.0.0.1:2379,http://192.168.21.77:2379 |      false |\n| c9fca2d62adf253a | started | node78 | http://192.168.21.78:2380 | http://127.0.0.1:2379,http://192.168.21.78:2379 |      false |\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n</code></pre></p> </li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#https","title":"\u90e8\u7f72\uff08HTTPS\uff09\u65b9\u5f0f","text":"<ul> <li> <p>\u4e0b\u8f7d\u3001\u5b89\u88c5 Bash<pre><code># node71\u8282\u70b9\u6267\u884c\nwget https://github.com/etcd-io/etcd/releases/download/v3.5.7/etcd-v3.5.7-linux-amd64.tar.gz\n\ntar zxf etcd-v3.5.7-linux-amd64.tar.gz --strip-components=1 -C /usr/local/bin etcd-v3.5.7-linux-amd64/etcd{,ctl}\n\netcdctl version\n\nscp /usr/local/bin/etcd* node77:/usr/local/bin/\nscp /usr/local/bin/etcd* node78:/usr/local/bin/\n</code></pre></p> </li> <li> <p>\u4f7f\u7528cfssl\u5de5\u5177\u751f\u6210\u8bc1\u4e66 Bash<pre><code>wget \"https://github.com/cloudflare/cfssl/releases/download/v1.6.2/cfssl_1.6.2_linux_amd64\" -O /usr/local/bin/cfssl\n\nwget \"https://github.com/cloudflare/cfssl/releases/download/v1.6.2/cfssljson_1.6.2_linux_amd64\" -O /usr/local/bin/cfssljson\n\nchmod +x /usr/local/bin/cfssl /usr/local/bin/cfssljson \n\ncfssl version\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u8bc1\u4e66\u5b58\u653e\u76ee\u5f55(\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981) Bash<pre><code>mkdir -p /etc/etcd/ssl\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u7528\u4e8e\u8bc1\u4e66\u7684json\u6587\u4ef6 JSON<pre><code>vim ca-config.json\n\n{\n  \"signing\": {\n    \"default\": {\n      \"expiry\": \"876000h\"\n    },\n    \"profiles\": {\n      \"etcd\": {\n        \"usages\": [\n          \"signing\",\n          \"key encipherment\",\n          \"server auth\",\n          \"client auth\"\n        ],\n        \"expiry\": \"876000h\"\n      }\n    }\n  }\n}\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u7528\u4e8e\u751f\u6210CA\u8bc1\u4e66\u548ckey\u7684json\u6587\u4ef6 JSON<pre><code>vim etcd-ca-csr.json \n{\n  \"CN\": \"etcd\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"CN\",\n      \"ST\": \"Beijing\",\n      \"L\": \"Beijing\",\n      \"O\": \"etcd\",\n      \"OU\": \"Etcd Security\"\n    }\n  ],\n  \"ca\": {\n    \"expiry\": \"876000h\"\n  }\n}\n</code></pre></p> </li> <li> <p>\u751f\u6210CA\u8bc1\u4e66\u548c\u8bc1\u4e66\u7684key Bash<pre><code>cfssl gencert -initca etcd-ca-csr.json | cfssljson -bare /etc/etcd/ssl/etcd-ca\nls /etc/etcd/ssl/\netcd-ca.csr  etcd-ca-key.pem  etcd-ca.pem\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u7528\u4e8eetcd\u670d\u52a1\u8bc1\u4e66\u7684json JSON<pre><code>vim etcd-csr.json\n\n{\n  \"CN\": \"etcd\",\n  \"key\": {\n    \"algo\": \"rsa\",\n    \"size\": 2048\n  },\n  \"names\": [\n    {\n      \"C\": \"CN\",\n      \"ST\": \"Beijing\",\n      \"L\": \"Beijing\",\n      \"O\": \"etcd\",\n      \"OU\": \"Etcd Security\"\n    }\n  ]\n}\n</code></pre></p> </li> <li> <p>\u751f\u6210ETCD\u670d\u52a1\u8bc1\u4e66 Bash<pre><code>cfssl gencert -ca=/etc/etcd/ssl/etcd-ca.pem -ca-key=/etc/etcd/ssl/etcd-ca-key.pem -config=ca-config.json -hostname=127.0.0.1,node71,node77,node78,192.168.21.71,192.168.21.77,192.168.21.78 -profile=etcd etcd-csr.json | cfssljson -bare /etc/etcd/ssl/etcd\n\nls /etc/etcd/ssl/\netcd-ca.csr  etcd-ca-key.pem  etcd-ca.pem  etcd.csr  etcd-key.pem  etcd.pem\n</code></pre></p> </li> <li> <p>\u5c06\u8bc1\u4e66\u590d\u5236\u5230\u5176\u4ed6\u8282\u70b9 Bash<pre><code>for FILE in etcd-ca-key.pem  etcd-ca.pem  etcd-key.pem  etcd.pem; do        scp /etc/etcd/ssl/${FILE} node77:/etc/etcd/ssl/${FILE};      done\n\nfor FILE in etcd-ca-key.pem  etcd-ca.pem  etcd-key.pem  etcd.pem; do        scp /etc/etcd/ssl/${FILE} node78:/etc/etcd/ssl/${FILE};      done\n</code></pre></p> </li> <li> <p>ETCD\u914d\u7f6e</p> </li> <li> <p>\u521b\u5efaetcd\u914d\u7f6e\u6587\u4ef6\uff08\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981\uff09 Bash<pre><code>vim /etc/etcd/etcd.config.yml \n\n# node71\u8282\u70b9\nname: 'node71'\ndata-dir: /data/workspace/etcd/data\nwal-dir: /data/workspace/etcd/wal\nsnapshot-count: 5000\nheartbeat-interval: 100\nelection-timeout: 1000\nquota-backend-bytes: 0\nlisten-peer-urls: 'https://192.168.21.71:2380'\nlisten-client-urls: 'https://192.168.21.71:2379,http://127.0.0.1:2379'\nmax-snapshots: 3\nmax-wals: 5\ncors:\ninitial-advertise-peer-urls: 'https://192.168.21.71:2380'\nadvertise-client-urls: 'https://192.168.21.71:2379'\ndiscovery:\ndiscovery-fallback: 'proxy'\ndiscovery-proxy:\ndiscovery-srv:\ninitial-cluster: 'node71=https://192.168.21.71:2380,node77=https://192.168.21.77:2380,node78=https://192.168.21.78:2380'\ninitial-cluster-token: 'etcd-cluster'\ninitial-cluster-state: 'new'\nstrict-reconfig-check: false\nenable-v2: true\nenable-pprof: true\nproxy: 'off'\nproxy-failure-wait: 5000\nproxy-refresh-interval: 30000\nproxy-dial-timeout: 1000\nproxy-write-timeout: 5000\nproxy-read-timeout: 0\nclient-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\npeer-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  peer-client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\ndebug: false\nlog-package-levels:\nlog-outputs: [default]\nforce-new-cluster: false\n\n# node77\u8282\u70b9\nname: 'node77'\ndata-dir: /data/workspace/etcd/data\nwal-dir: /data/workspace/etcd/wal\nsnapshot-count: 5000\nheartbeat-interval: 100\nelection-timeout: 1000\nquota-backend-bytes: 0\nlisten-peer-urls: 'https://192.168.21.77:2380'\nlisten-client-urls: 'https://192.168.21.77:2379,http://127.0.0.1:2379'\nmax-snapshots: 3\nmax-wals: 5\ncors:\ninitial-advertise-peer-urls: 'https://192.168.21.77:2380'\nadvertise-client-urls: 'https://192.168.21.77:2379'\ndiscovery:\ndiscovery-fallback: 'proxy'\ndiscovery-proxy:\ndiscovery-srv:\ninitial-cluster: 'node71=https://192.168.21.71:2380,node77=https://192.168.21.77:2380,node78=https://192.168.21.78:2380'\ninitial-cluster-token: 'etcd-cluster'\ninitial-cluster-state: 'new'\nstrict-reconfig-check: false\nenable-v2: true\nenable-pprof: true\nproxy: 'off'\nproxy-failure-wait: 5000\nproxy-refresh-interval: 30000\nproxy-dial-timeout: 1000\nproxy-write-timeout: 5000\nproxy-read-timeout: 0\nclient-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\npeer-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  peer-client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\ndebug: false\nlog-package-levels:\nlog-outputs: [default]\nforce-new-cluster: false\n\n# node78\u8282\u70b9\nname: 'node78'\ndata-dir: /data/workspace/etcd/data\nwal-dir: /data/workspace/etcd/wal\nsnapshot-count: 5000\nheartbeat-interval: 100\nelection-timeout: 1000\nquota-backend-bytes: 0\nlisten-peer-urls: 'https://192.168.21.78:2380'\nlisten-client-urls: 'https://192.168.21.78:2379,http://127.0.0.1:2379'\nmax-snapshots: 3\nmax-wals: 5\ncors:\ninitial-advertise-peer-urls: 'https://192.168.21.78:2380'\nadvertise-client-urls: 'https://192.168.21.78:2379'\ndiscovery:\ndiscovery-fallback: 'proxy'\ndiscovery-proxy:\ndiscovery-srv:\ninitial-cluster: 'node71=https://192.168.21.71:2380,node77=https://192.168.21.77:2380,node78=https://192.168.21.78:2380'\ninitial-cluster-token: 'etcd-cluster'\ninitial-cluster-state: 'new'\nstrict-reconfig-check: false\nenable-v2: true\nenable-pprof: true\nproxy: 'off'\nproxy-failure-wait: 5000\nproxy-refresh-interval: 30000\nproxy-dial-timeout: 1000\nproxy-write-timeout: 5000\nproxy-read-timeout: 0\nclient-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\npeer-transport-security:\n  cert-file: '/etc/etcd/ssl/etcd.pem'\n  key-file: '/etc/etcd/ssl/etcd-key.pem'\n  peer-client-cert-auth: true\n  trusted-ca-file: '/etc/etcd/ssl/etcd-ca.pem'\n  auto-tls: true\ndebug: false\nlog-package-levels:\nlog-outputs: [default]\nforce-new-cluster: false\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u5f00\u673a\u542f\u52a8(\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981) Bash<pre><code>vim /usr/lib/systemd/system/etcd.service\n\n[Unit]\nDescription=Etcd Service\nDocumentation=https://coreos.com/etcd/docs/latest/\nAfter=network.target\n\n[Service]\nType=notify\nExecStart=/usr/local/bin/etcd --config-file=/etc/etcd/etcd.config.yml\nRestart=on-failure\nRestartSec=10\nLimitNOFILE=65536\n\n[Install]\nWantedBy=multi-user.target\nAlias=etcd3.service\n</code></pre></p> </li> <li> <p>\u542f\u52a8etcd\u670d\u52a1(\u4e09\u4e2a\u8282\u70b9\u90fd\u9700\u8981) Bash<pre><code>systemctl daemon-reload\nsystemctl enable --now etcd\n</code></pre></p> </li> <li> <p>\u67e5\u770betcd\u7684\u72b6\u6001 Bash<pre><code>etcdctl --endpoints=\"192.168.21.71:2379,192.168.21.77:2379,192.168.21.78:2379\" --cacert=/etc/etcd/ssl/etcd-ca.pem --cert=/etc/etcd/ssl/etcd.pem --key=/etc/etcd/ssl/etcd-key.pem  endpoint status --write-out=table\n\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n|        ID        | STATUS  |  NAME  |        PEER ADDRS         |                  CLIENT ADDRS                   | IS LEARNER |\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n| 6dcf7486a69f8697 | started | node71 | http://192.168.21.71:2380 | http://127.0.0.1:2379,http://192.168.21.71:2379 |      false |\n| a813d75d75a2bb6a | started | node77 | http://192.168.21.77:2380 | http://127.0.0.1:2379,http://192.168.21.77:2379 |      false |\n| c9fca2d62adf253a | started | node78 | http://192.168.21.78:2380 | http://127.0.0.1:2379,http://192.168.21.78:2379 |      false |\n+------------------+---------+--------+---------------------------+-------------------------------------------------+------------+\n</code></pre></p> </li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/etcd/#_3","title":"\u5b89\u88c5\u5ba2\u6237\u7aef\u5de5\u5177","text":"<ul> <li>etcd-manager <p>https://github.com/gohutool/boot4go-etcdv3-browser https://hub.docker.com/r/joinsunsoft/etcdv3-browser</p> </li> </ul> Bash<pre><code>docker container run --rm -p 9980:80 --name etcdv3-browser  joinsunsoft/etcdv3-browser:0.9.0\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/","title":"Flink(On YARN)\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#flink-on-yarn","title":"Flink On YARN","text":"<p>Flink\u662f\u4e00\u4e2a\u6279\u5904\u7406\u548c\u6d41\u5904\u7406\u7ed3\u5408\u7684\u5206\u5e03\u5f0f\u8ba1\u7b97\u6846\u67b6\uff0c\u5176\u6838\u5fc3\u662f\u63d0\u4f9b\u4e86\u6570\u636e\u5206\u53d1\u4ee5\u53ca\u5e76\u884c\u5316\u8ba1\u7b97\u7684\u6d41\u5904\u7406\u5f15\u64ce\uff0c\u4f5c\u4e3a\u5206\u5e03\u5f0f\u6d41\u5f0f\u8ba1\u7b97\u5f15\u64ce\u4e3b\u8981\u4e3a\u4e0a\u5c42\u670d\u52a1\u63d0\u4f9b\u66f4\u52a0\u5b9e\u65f6\u6027\u6570\u636e\u64cd\u4f5c\uff0c\u8be5\u7ec4\u4ef6\u4e3b\u8981\u9002\u7528\u4e8e\u6570\u636e\u4f4e\u5ef6\u65f6\u5904\u7406\u3002\u5728\u672c\u7cfb\u7edf\u4e2d\u4e3b\u8981\u7528\u4e8e\u652f\u6491Flink\u6a21\u578b\u7684\u8fd0\u884c\u548c\u8ba1\u7b97\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.73-192.168.21.75 \u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/flink-1.15.3-bin-scala_2.12.tgz \u8fd0\u884c\u76ee\u5f55 /data/workspace/flink-1.15.3","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#flink","title":"Flink\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step1","title":"step1: \u89e3\u538b\u5b89\u88c5\u5305","text":"Bash<pre><code>sudo tar -zxvf /data/software/flink-1.15.3-bin-scala_2.12.tgz -C /data/workspace\nsudo chown -R zhongche:zhongche /data/workspace/flink-1.15.3/\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step2-flink","title":"step2: \u914d\u7f6e Flink \u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u200b     \u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># FLINK\nexport FLINK_HOME=/data/workspace/flink-1.15.3\nexport PATH=$PATH:$FLINK_HOME/bin\n</code></pre> <p>\u200b     \u751f\u6548\u914d\u7f6e\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step3-flink-confyaml","title":"step3: \u914d\u7f6eflink-conf.yaml\u6587\u4ef6","text":"<p>\u5728${FLINK_HOME}/conf \u8def\u5f84\u4e0b\u914d\u7f6eflink-conf.yaml\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Bash<pre><code>jobmanager.rpc.address: node73\n\njobmanager.rpc.port: 6123\n\njobmanager.bind-host: 0.0.0.0\n\njobmanager.memory.process.size: 2g\n\ntaskmanager.bind-host: 0.0.0.0\n\ntaskmanager.host: node73\n\ntaskmanager.memory.process.size: 4g\n\ntaskmanager.numberOfTaskSlots: 4\n\nparallelism.default: 4\n\n# JVM Metaspace Memory --- Task Manager JVM\u7684\u5143\u7a7a\u95f4\u5185\u5b58\u5927\u5c0f\uff0c\u9ed8\u8ba4 256m\ntaskmanager.memory.jvm-metaspace.size: 512m\n\ntaskmanager.memory.jvm-overhead.fraction: 0.2\ntask.cancellation.timeout: 0\n\nexecution.target: yarn-per-job\n\nhigh-availability: zookeeper\n\nhigh-availability.storageDir: hdfs://ns/flink_1.15/yarn/ha\n\nhigh-availability.zookeeper.quorum: node73:2181,node74:2181,node75:2181\n\nhigh-availability.zookeeper.path.root: /flink_1.15_yarn\n\nhigh-availability.cluster-id: /flink_1.15\n\nstate.backend: rocksdb\n\nstate.checkpoints.dir: hdfs://ns/flink_1.15/checkpoints\n\nstate.savepoints.dir: hdfs://ns/flink_1.15/savepoints\n\n# \u6700\u591a\u4fdd\u7559\u5df2\u5b8c\u6210\u7684\u68c0\u67e5\u70b9\u5b9e\u4f8b\u7684\u6570\u91cf\nstate.checkpoints.num-retained: 100\nstate.backend.incremental: true\n\nakka.ask.timeout: 100s\nweb.timeout: 300000\n\ntaskmanager.debug.memory.log: true\ntaskmanager.debug.memory.log-interval: 10000\ntaskmanager.network.netty.transport: \"epoll\"\n\njobmanager.execution.failover-strategy: region\n\nrest.address: localhost\n\nrest.bind-port: 50100-50200\n\nrest.bind-address: 0.0.0.0\n\nhistoryserver.web.address: node73\nhistoryserver.archive.clean-expired-jobs: true\n\n# JobManager\u5f52\u6863\u7684\u4f5c\u4e1a\u4fe1\u606f\u6240\u5b58\u653e\u7684\u76ee\u5f55\njobmanager.archive.fs.dir: hdfs://ns/flink_1.15/completed-jobs/\n\n# \u6307\u5b9aHistory Server\u626b\u63cf\u54ea\u4e9b\u5f52\u6863\u76ee\u5f55\nhistoryserver.archive.fs.dir: hdfs://ns/flink_1.15/completed-jobs/\n\n# \u6307\u5b9aHistory Server\u95f4\u9694\u591a\u5c11\u6beb\u79d2\u626b\u63cf\u4e00\u6b21\u5f52\u6863\u76ee\u5f55\nhistoryserver.archive.fs.refresh-interval: 60000\n\nclassloader.check-leaked-classloader: false\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step4-flink_homebinflink","title":"step4: \u5728$FLINK_HOME/bin/flink\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e","text":"Bash<pre><code>export HADOOP_CLASSPATH=`hadoop classpath`\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step5-flink","title":"step5: \u5c06Flink \u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5404\u670d\u52a1\u5668\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/flink-1.15.3/ root@node74:/data/workspace\nsudo scp -r /data/workspace/flink-1.15.3/ root@node75:/data/workspace\nsudo scp -r /data/workspace/flink-1.15.3/ root@node76:/data/workspace\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u4fee\u6539hadoop-3.2.4\u6240\u5c5e\u7528\u6237\u7ec4\u548c\u6240\u5c5e\u7528\u6237\nsudo chown -R zhongche:zhongche /data/workspace/flink-1.15.3\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim ~/.bashrc\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport FLINK_HOME=/data/workspace/flink-1.15.3\nexport PATH=$PATH:$FLINK_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/flink_on_yarn/#step6","title":"step6: \u521b\u5efa\u76f8\u5173\u76ee\u5f55","text":"Bash<pre><code>[zhongche@node73 flink-1.15.3]$ hdfs dfs -mkdir -p /flink_1.15/checkpoints\n[zhongche@node73 flink-1.15.3]$ hdfs dfs -mkdir -p /flink_1.15/savepoints\n[zhongche@node73 flink-1.15.3]$ hdfs dfs -mkdir -p /flink_1.15/completed-jobs\n[zhongche@node73 flink-1.15.3]$ hdfs dfs -mkdir -p /flink_1.15/yarn/ha\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801\uff1a</p> Bash<pre><code>$FLINK_HOME/bin/flink run -m yarn-cluster -yjm 1024 -ytm 1024 $FLINK_HOME/examples/batch/WordCount.jar\n</code></pre> Bash<pre><code>[zhongche@node73 flink-1.15.3]$ $FLINK_HOME/bin/flink run -m yarn-cluster -yjm 1024 -ytm 1024 /data/workspace/flink-1.15.3/examples/batch/WordCount.jar \nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/data/workspace/flink-1.15.3/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/data/workspace/hadoop-3.2.4/share/hadoop/common/lib/slf4j-reload4j-1.7.35.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\nExecuting WordCount example with default input data set.\nUse --input to specify file input.\nPrinting result to stdout. Use --output to specify output path.\n2023-07-17 10:46:25,896 WARN  org.apache.flink.yarn.configuration.YarnLogConfigUtil        [] - The configuration directory ('/data/workspace/flink-1.15.3/conf') already contains a LOG4J config file.If you want to use logback, then please delete or rename the log configuration file.\n2023-07-17 10:46:26,153 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - No path for the flink jar passed. Using the location of class org.apache.flink.yarn.YarnClusterDescriptor to locate the jar\n2023-07-17 10:46:26,166 WARN  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Job Clusters are deprecated since Flink 1.15. Please use an Application Cluster/Application Mode instead.\n2023-07-17 10:46:26,298 INFO  org.apache.hadoop.conf.Configuration                         [] - resource-types.xml not found\n2023-07-17 10:46:26,299 INFO  org.apache.hadoop.yarn.util.resource.ResourceUtils           [] - Unable to find 'resource-types.xml'.\n2023-07-17 10:46:26,346 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Cluster specification: ClusterSpecification{masterMemoryMB=2048, taskManagerMemoryMB=4096, slotsPerTaskManager=4}\n2023-07-17 10:46:31,295 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Submitting application master application_1689415931790_0004\n2023-07-17 10:46:31,537 INFO  org.apache.hadoop.yarn.client.api.impl.YarnClientImpl        [] - Submitted application application_1689415931790_0004\n2023-07-17 10:46:31,537 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Waiting for the cluster to be allocated\n2023-07-17 10:46:31,539 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Deploying cluster, current state ACCEPTED\n2023-07-17 10:46:38,338 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - YARN application has been deployed successfully.\n2023-07-17 10:46:38,339 INFO  org.apache.flink.yarn.YarnClusterDescriptor                  [] - Found Web Interface node74:50100 of application 'application_1689415931790_0004'.\nJob has been submitted with JobID c0245edf54e4eb4a320535316cb1e030\nProgram execution finished\nJob with JobID c0245edf54e4eb4a320535316cb1e030 has finished.\nJob Runtime: 10739 ms\nAccumulator Results: \n- 62999036f072a117ac8c6cf197e3bc4e (java.util.ArrayList) [170 elements]\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/","title":"Hadoop\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#hadoop","title":"Hadoop\u96c6\u7fa4\u5b89\u88c5","text":"<p>HDFS\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff0c\u7528\u4e8e\u5b58\u50a8\u548c\u7ba1\u7406\u6587\u4ef6\uff0c\u53e6\u5916\uff0cHDFS\u4e5f\u662fHadoop\u751f\u6001\u7cfb\u7edf\u4e00\u4e2a\u91cd\u8981\u7684\u7ec4\u6210\u90e8\u5206\uff0c\u662fHadoop\u7684\u5b58\u50a8\u7ec4\u4ef6\uff0c\u80fd\u591f\u63d0\u4f9b\u9ad8\u541e\u5410\u91cf\u7684\u6570\u636e\u8bbf\u95ee\uff0c\u975e\u5e38\u9002\u5408\u5927\u89c4\u6a21\u6570\u636e\u96c6\u4e0a\u7684\u5e94\u7528\u3002\u5728\u672c\u7cfb\u7edf\u4e2d\u4f5c\u4e3a\u5206\u5e03\u5f0f\u5b58\u50a8\u7ec4\u4ef6\uff0c\u4e3b\u8981\u627f\u8f7d\u5e73\u53f0\u6240\u6709\u6587\u4ef6\u7c7b\u578b\u6570\u636e\u7684\u5b58\u50a8\u3002</p> <p>\u90e8\u7f72\u8bf4\u660e</p> <ul> <li>192.168.21.73 -&gt; node73</li> <li>192.168.21.74 -&gt; node74</li> <li>192.168.21.75 -&gt; node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 HDFS\u96c6\u7fa4\u90e8\u7f72\u8282\u70b9 192.168.21.73\uff08NameNode/DataNode\uff09192.168.21.74\uff08NameNode/DataNode\uff09192.168.21.75\uff08DataNode/SecondaryNameNode\uff09 YARN\u96c6\u7fa4\u90e8\u7f72\u8282\u70b9 192.168.21.73\uff08ResourceManager/NodeManager\uff09192.168.21.74\uff08ResourceManager/NodeManager\uff09192.168.21.75\uff08NodeManager\uff09 Hadoop\u5b89\u88c5\u5305\u76ee\u5f55 /data/software/hadoop-3.2.4.tar.gz Hadoop\u8fd0\u884c\u76ee\u5f55 /data/workspace/hadoop-3.2.4 HDFS NameNode\u6570\u636e\u8def\u5f84 /data/workspace/hadoop-3.2.4/data/hdfs/name HDFS DataNode\u6570\u636e\u8def\u5f84 /data/workspace/hadoop-3.2.4/data/hdfs/data HADOOP\u4e34\u65f6\u6570\u636e\u8def\u5f84 /data/workspace/hadoop-3.2.4/data/tmp Hadoop\u65e5\u5fd7\u8def\u5f84 /data/workspace/hadoop-3.2.4/logs HDFS\u8fdb\u7a0b\u8def\u5f84 /data/workspace/hadoop-3.2.4/pid YARN\u8fdb\u7a0b\u8def\u5f84 /data/workspace/hadoop-3.2.4/pid MAPRED\u8fdb\u7a0b\u8def\u5f84 /data/workspace/hadoop-3.2.4/pid HDFS WebUI http://192.168.21.73:50070/http://192.168.21.74:50070 YARN WebUI http://192.168.21.73:8088/http://192.168.21.74:8088 \u5386\u53f2\u670d\u52a1\u5668WebUI http://192.168.21.75:19888","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#hadoop_1","title":"Hadoop\u90e8\u7f72\u6587\u6863","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step1","title":"step1: \u89e3\u538b\u5b89\u88c5\u5305","text":"Bash<pre><code>sudo tar -zxvf /data/software/hadoop-3.2.4.tar.gz -C /data/workspace/hadoop-3.2.4\nsudo chown -R demouser:demouser /data/workspace\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step2-hadoop","title":"step2: \u914d\u7f6eHadoop\u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u200b     \u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># Hadoop\nexport HADOOP_HOME=/data/workspace/hadoop-3.2.4\nexport HADOOP_CLASSPATH=$($HADOOP_HOME/bin/hadoop classpath)\nexport HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop\nexport PATH=$PATH:$HADOOP_HOME/bin\n</code></pre> <p>\u200b     \u751f\u6548\u914d\u7f6e\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step3-core-sitexml","title":"step3: \u914d\u7f6ecore-site.xml\u6587\u4ef6","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6ecore-site.xml\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n  &lt;!-- \u5982\u679c\u662fHA\u6a21\u5f0f\u5219\u6307\u5b9ahdfs\u7684nameservice\u4e3ans \u5982\u679c\u662f\u975eHA\u6a21\u5f0f\uff0c\u5219\u4e3ahdfs://&lt;host&gt;:&lt;ip&gt;--&gt;\n  &lt;property&gt;\n    &lt;name&gt;fs.defaultFS&lt;/name&gt;\n    &lt;value&gt;hdfs://ns&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--\u6307\u5b9ahadoop\u6570\u636e\u5b58\u653e\u76ee\u5f55--&gt;\n  &lt;property&gt;\n     &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;\n     &lt;value&gt;/data/workspace/hadoop-3.2.4/data/tmp&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- Hadoop\u7684\u7f13\u51b2\u533a\u5927\u5c0f\u3002\u9ed8\u8ba4\u4e3a4KB\uff0c\u589e\u52a0\u4e3a128KB\u3002 --&gt;\n  &lt;property&gt;\n    &lt;name&gt;io.file.buffer.size&lt;/name&gt;\n    &lt;value&gt;131072&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u548c\u7cfb\u7edf\u5185\u6838\u4e2d\u7684backlog\u76f8\u5173\u53c2\u6570\u8054\u52a8\uff0c\u4f46\u8981\u5c0f\u4e8enet.core.somaxconn --&gt;\n  &lt;property&gt;\n    &lt;name&gt;ipc.server.listen.queue.size&lt;/name&gt;\n    &lt;value&gt;20480&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;hadoop.proxyuser.zhongtai.hosts&lt;/name&gt;\n    &lt;value&gt;*&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;hadoop.proxyuser.zhongtai.groups&lt;/name&gt;\n    &lt;value&gt;*&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!--\u6307\u5b9azookeeper\u5730\u5740--&gt;\n  &lt;property&gt;\n        &lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;\n        &lt;value&gt;node73:2181,node74:2181,node75:2181&lt;/value&gt;\n  &lt;/property&gt;\n\n      &lt;!-- \n        \u68c0\u67e5\u70b9\u88ab\u5220\u9664\u540e\u7684\u5206\u949f\u6570\u3002\u5982\u679c\u4e3a\u96f6\uff0c\u5783\u573e\u6876\u529f\u80fd\u5c06\u88ab\u7981\u7528\u3002\u8be5\u9009\u9879\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e0a\u914d\u7f6e\u3002[\u5355\u4f4d(minute)]\n        \u5982\u679c\u5783\u573e\u7bb1\u88ab\u7981\u7528\u670d\u52a1\u5668\u7aef\uff0c\u5219\u68c0\u67e5\u5ba2\u6237\u7aef\u914d\u7f6e\u3002\n        \u5982\u679c\u5728\u670d\u52a1\u5668\u7aef\u542f\u7528\u5783\u573e\u7bb1\uff0c\u5219\u4f1a\u4f7f\u7528\u670d\u52a1\u5668\u4e0a\u914d\u7f6e\u7684\u503c\uff0c\u5e76\u5ffd\u7565\u5ba2\u6237\u7aef\u914d\u7f6e\u503c\u3002 \n        https://www.jianshu.com/p/1827431d4eb5\n      --&gt;\n    &lt;property&gt;\n      &lt;name&gt;fs.trash.interval&lt;/name&gt;\n      &lt;value&gt;4320&lt;/value&gt;\n    &lt;/property&gt;\n\n&lt;!-- \n    \u5783\u573e\u68c0\u67e5\u70b9\u4e4b\u95f4\u7684\u5206\u949f\u6570\u3002\u5e94\u8be5\u5c0f\u4e8e\u6216\u7b49\u4e8efs.trash.interval\u3002[\u5355\u4f4d(minute)]\n    \u5982\u679c\u4e3a\u96f6\uff0c\u5219\u5c06\u8be5\u503c\u8bbe\u7f6e\u4e3afs.trash.interval\u7684\u503c\u3002\u6bcf\u6b21\u68c0\u67e5\u6307\u9488\u8fd0\u884c\u65f6\uff0c\u5b83\u90fd\u4f1a\u4ece\u5f53\u524d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u68c0\u67e5\u70b9\uff0c\u5e76\u5220\u9664\u6bd4fs.trash.interval\u66f4\u65e9\u521b\u5efa\u7684\u68c0\u67e5\u70b9\u3002\n    \u6ce8\u610f\uff1a\u901a\u8fc7\u56de\u6536\u7ad9\u6062\u590d\u8bef\u5220\u7684\u6570\u636e\uff0c\u8981\u6c42\u65f6\u95f4\u4e0d\u80fd\u8d85\u8fc7fs.trash.interval\u914d\u7f6e\u7684\u65f6\u95f4\u3002\u751f\u4ea7\u4e2d\u4e3a\u4e86\u9632\u6b62\u8bef\u5220\u6570\u636e\uff0c\u5efa\u8bae\u5f00\u542fHDFS\u7684\u56de\u6536\u7ad9\u673a\u5236\u3002\n  --&gt;\n    &lt;property&gt;\n      &lt;name&gt;fs.trash.checkpoint.interval&lt;/name&gt;\n      &lt;value&gt;60&lt;/value&gt;\n    &lt;/property&gt;\n\n&lt;/configuration&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step4-hdfs-sitexml","title":"step4: \u914d\u7f6ehdfs-site.xml\u6587\u4ef6","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6ehdfs-site.xml\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> XML<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!--\u6307\u5b9ahdfs\u7684nameservice\u4e3ans\uff0c\u9700\u8981\u548ccore-site.xml\u4e2d\u7684\u4fdd\u6301\u4e00\u81f4 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.nameservices&lt;/name&gt;\n     &lt;value&gt;ns&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- NameNode \u540c\u65f6\u548c DataNode \u901a\u4fe1\u7684\u7ebf\u7a0b\u6570\uff0c\u9ed8\u8ba4\u4e3a10\uff0c\u5c06\u5176\u589e\u5927\u4e3a40\u3002--&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.namenode.handler.count&lt;/name&gt;\n    &lt;value&gt;40&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u5f53 DataNode\u4e0a\u9762\u7684\u8fde\u63a5\u6570\u8d85\u8fc7\u914d\u7f6e\u4e2d\u7684\u8bbe\u7f6e\u65f6\uff0c DataNode\u5c31\u4f1a\u62d2\u7edd\u8fde\u63a5\u3002--&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.datanode.max.xcievers&lt;/name&gt;\n    &lt;value&gt;65536&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u6267\u884c start-balancer.sh \u7684\u5e26\u5bbd\uff0c\u9ed8\u8ba4\u4e3a1048576(1MB/s)\uff0c\u5c06\u5176\u5897\u5927\u523020MB/s --&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.datanode.balance.bandwidthPerSe&lt;/name&gt;\n    &lt;value&gt;20485760&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \n     DataNode \u5728\u8fdb\u884c\u6587\u4ef6\u4f20\u8f93\u65f6\u6700\u5927\u7ebf\u7a0b\u6570\uff0c\u6700\u9ad8\u8bbe\u7f6e\u4e3a8192\uff0c\u5982\u679c\u96c6\u7fa4\u4e2d\u6709\u67d0\u53f0 DataNode \u4e3b\u673a\u7684\u8fd9\u4e2a\u503c\u6bd4\u5176\u4ed6\u4e3b\u673a\u7684\u5927\uff0c\n     \u90a3\u4e48\u51fa\u73b0\u7684\u95ee\u9898\u662f\uff0c\u8fd9\u53f0\u4e3b\u673a\u4e0a\u5b58\u50a8\u7684\u6570\u636e\u76f8\u5bf9\u522b\u7684\u4e3b\u673a\u6bd4\u8f83\u591a\uff0c\u5bfc\u81f4\u6570\u636e\u5206\u5e03\u4e0d\u5747\u5300\u7684\u95ee\u9898\uff0c\u5373\u4f7f balance \u4ecd\u7136\u4f1a\u4e0d\u5747\u5300\u3002 \n   --&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.datanode.max.transfer.threads&lt;/name&gt;\n    &lt;value&gt;8192&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;    \n  &lt;!-- ns\u4e0b\u9762\u6709\u4e24\u4e2aNameNode\uff0c\u5206\u522b\u662fnn1\uff0cnn2 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.ha.namenodes.ns&lt;/name&gt;\n     &lt;value&gt;nn1,nn2&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- nn1\u7684RPC\u901a\u4fe1\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.rpc-address.ns.nn1&lt;/name&gt;\n     &lt;value&gt;node73:9000&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;    \n  &lt;!-- nn1\u7684http\u901a\u4fe1\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.http-address.ns.nn1&lt;/name&gt;\n     &lt;value&gt;node73:50070&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- nn2\u7684RPC\u901a\u4fe1\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.rpc-address.ns.nn2&lt;/name&gt;\n     &lt;value&gt;node74:9000&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- nn2\u7684http\u901a\u4fe1\u5730\u5740 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.http-address.ns.nn2&lt;/name&gt;\n     &lt;value&gt;node74:50070&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- \u6307\u5b9aNameNode\u7684\u5143\u6570\u636e\u5728JournalNode\u4e0a\u7684\u5b58\u653e\u4f4d\u7f6e --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;\n     &lt;value&gt;qjournal://node73:8485;node74:8485;node75:8485;node76:8485/ns&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- \u6307\u5b9aJournalNode\u5728\u672c\u5730\u78c1\u76d8\u5b58\u653e\u6570\u636e\u7684\u4f4d\u7f6e --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;\n     &lt;value&gt;/data/workspace/hadoop-3.2.4/data/journal&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u6307\u5b9aNameNode\u5728\u672c\u5730\u78c1\u76d8\u5b58\u653e\u6570\u636e\u7684\u4f4d\u7f6e --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;\n     &lt;value&gt;file:///data/workspace/hadoop-3.2.4/data/hdfs/name&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u6307\u5b9aDataNode\u5728\u672c\u5730\u78c1\u76d8\u5b58\u653e\u6570\u636e\u7684\u4f4d\u7f6e --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;\n     &lt;value&gt;file:///data/workspace/hadoop-3.2.4/data/hdfs/data&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;dfs.datanode.fsdataset.volume.choosing.policy&lt;/name&gt;\n    &lt;value&gt;org.apache.hadoop.hdfs.server.datanode.fsdataset.AvailableSpaceVolumeChoosingPolicy&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- \u5f00\u542fNameNode\u6545\u969c\u65f6\u81ea\u52a8\u5207\u6362 --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;\n     &lt;value&gt;true&lt;/value&gt;\n  &lt;/property&gt;\n  &lt;!--HA\u6a21\u5f0f\u914d\u7f6e--&gt;  \n  &lt;!-- \u914d\u7f6e\u5931\u8d25\u81ea\u52a8\u5207\u6362\u5b9e\u73b0\u65b9\u5f0f --&gt;\n  &lt;property&gt;\n     &lt;name&gt;dfs.client.failover.proxy.provider.ns&lt;/name&gt;\n     &lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n     &lt;name&gt;dfs.permissions.enabled&lt;/name&gt;\n     &lt;value&gt;false&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;!-- \u6ce8\u610f\uff1a\u5982\u679c\u662f\u4f2a\u5206\u5e03\u5f0f\u53ea\u80fd\u914d\u7f6e\u4e3a1 --&gt;\n  &lt;property&gt;\n    &lt;name&gt;dfs.replication&lt;/name&gt;\n    &lt;value&gt;3&lt;/value&gt;\n  &lt;/property&gt;\n\n  &lt;property&gt;\n    &lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;\n    &lt;value&gt;\n      sshfence\n      shell(/bin/true)\n    &lt;/value&gt;\n  &lt;/property&gt;\n&lt;/configuration&gt;\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step5-hadoop-envsh","title":"step5: \u914d\u7f6ehadoop-env.sh\u6587\u4ef6","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6ehadoop-env.sh\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Bash<pre><code>export JAVA_HOME=/data/workspace/jdk1.8.0_201\n\n# \u4fee\u6539hadooplog\u3001pid\u3001jvm\u7684\u914d\u7f6e\nexport HADOOP_PID_DIR=/data/workspace/hadoop-3.2.4/pid\nexport HADOOP_MAPRED_PID_DIR=/data/workspace/hadoop-3.2.4/pid\nexport HADOOP_LOG_DIR=/data/workspace/hadoop-3.2.4/log\n\n# JVM\nexport HDFS_NAMENODE_OPTS=\"-Dhadoop.security.logger=INFO,RFAS -Xmx4096m\"\nexport HDFS_DATANODE_OPTS=\"-Dhadoop.security.logger=ERROR,RFAS -Xmx4096m\"\nexport HDFS_JOURNALNODE_OPTS=\"-Xmx4096m\"\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step6-hadoop-pidjvm","title":"step6: \u4fee\u6539hadoop pid\u3001jvm\u7684\u914d\u7f6e","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6e yarn-env.sh \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Bash<pre><code>export YARN_PID_DIR=/data/workspace/hadoop-3.2.4/pid\n\n# JVM\nexport YARN_RESOURCEMANAGER_OPTS=\"-Drm.audit.logger=INFO,RMAUDIT -Xmx4096m\"\nexport YARN_NODEMANAGER_OPTS=\"-Dnm.audit.logger=INFO,NMAUDIT -Xmx4096m\"\n</code></pre> <p>\u5728${HADOOP_HOME}/etc/hadoop\u8def\u5f84\u4e0b\u914d\u7f6e mapred-env.sh \u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Bash<pre><code>export HADOOP_MAPRED_PID_DIR=/data/workspace/hadoop-3.2.4/pid\n# JVM\nexport MAPRED_HISTORYSERVER_OPTS=\"-Xmx4096m\"\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step7-datanode","title":"step7: \u914d\u7f6eDataNode\u8282\u70b9\u5217\u8868","text":"<p>\u5728${HADOOP_HOME}/etc/hadoop/workers \u6587\u4ef6\u4e2d\u914d\u7f6eDataNode\u8282\u70b9\u5217\u8868\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code>node73\nnode74\nnode75\nnode76\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step8","title":"step8: \u521b\u5efa\u76ee\u5f55","text":"Text Only<pre><code>mkdir /data/workspace/hadoop-3.2.4/pid\nmkdir /data/workspace/hadoop-3.2.4/log\nmkdir -p /data/workspace/hadoop-3.2.4/data/journal\nmkdir -p /data/workspace/hadoop-3.2.4/data/tmp\nmkdir -p /data/workspace/hadoop-3.2.4/data/hdfs/data\nmkdir -p /data/workspace/hadoop-3.2.4/data/hdfs/name\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step9-hadoop","title":"step9: \u5c06Hadoop\u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5404\u670d\u52a1\u5668\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/hadoop-3.2.4/ root@node74:/data/workspace/\nsudo scp -r /data/workspace/hadoop-3.2.4/ root@node75:/data/workspace/\nsudo scp -r /data/workspace/hadoop-3.2.4/ root@node76:/data/workspace/\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u4fee\u6539hadoop-3.2.4\u6240\u5c5e\u7528\u6237\u7ec4\u548c\u6240\u5c5e\u7528\u6237\nsudo chown -R demouser:demouser /data/workspace/hadoop-3.2.4\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim ~/.bashrc\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport HADOOP_HOME=/data/workspace/hadoop-3.2.4\nexport HADOOP_CLASSPATH=$($HADOOP_HOME/bin/hadoop classpath)\nexport HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop\nexport PATH=$PATH:$HADOOP_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#step10","title":"step10: \u542f\u52a8\u670d\u52a1","text":"<p>Hadoop HA\u6a21\u5f0f\u5728\u9996\u6b21\u542f\u52a8\u65f6\u8981\u4fdd\u8bc1zk\u662f\u542f\u52a8\u72b6\u6001\uff0c\u7136\u540e\u4e00\u5b9a\u9700\u8981\u6ce8\u610f\u987a\u5e8f\uff0c\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>\u2460\u5728\u67d0\u4e00\u4e2anamenode\u8282\u70b9\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u521b\u5efa\u547d\u540d\u7a7a\u95f4\uff0c\u6bd4\u5982\u8fd9\u91cc\u6211\u4eec\u5bf9 node73 \u8282\u70b9\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002</p> Bash<pre><code>hdfs zkfc -formatZK\n</code></pre> <p>\u2461\u5728\u6bcf\u4e2ajournalnode\u8282\u70b9\u7528\u5982\u4e0b\u547d\u4ee4\u542f\u52a8journalnode\uff08\u8fdb\u7a0b\u540d\u4e3aJournalNode\uff09\uff0c\u6211\u4eec\u5728node73,node74,node75\u8fd9\u4e09\u4e2a\u8282\u70b9\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh start journalnode\n</code></pre> <p>\u2462\u5728\u4e3bnamenode\u8282\u70b9\u683c\u5f0f\u5316namenode\u548cjournalnode\u76ee\u5f55\uff0c\u8fd9\u91cc\u6211\u4eec\u5bf9node73\u505a\u64cd\u4f5c\u3002</p> Bash<pre><code>hdfs namenode -format ns\n</code></pre> <p>\u2463\u5728\u4e3bnamenode\u8282\u70b9\u542f\u52a8namenode\u8fdb\u7a0b\uff0c\u8fd9\u91cc\u5bf9node73\u505a\u64cd\u4f5c\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh start namenode\n</code></pre> <p>\u2464\u5728\u5907namenode\u8282\u70b9\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u5728node74\u505a\u64cd\u4f5c\u3002</p> Bash<pre><code># \u628a\u5907namenode\u8282\u70b9\u7684\u76ee\u5f55\u683c\u5f0f\u5316\u5e76\u628a\u5143\u6570\u636e\u4ece\u4e3bnamenode\u8282\u70b9copy\u8fc7\u6765\uff0c\u5e76\u4e14\u8fd9\u4e2a\u547d\u4ee4\u4e0d\u4f1a\u628ajournalnode\u76ee\u5f55\u518d\u683c\u5f0f\u5316\u4e86\uff01\nhdfs namenode -bootstrapStandby\n# \u542f\u52a8\u5907namenode\u8fdb\u7a0b\n${HADOOP_HOME}/sbin/hadoop-daemon.sh start namenode\n</code></pre> <p>\u2465\u5728\u4e24\u4e2anamenode\u8282\u70b9\u90fd\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u542f\u52a8zkfc\uff08\u8fdb\u7a0b\u540d\u4e3aDFSZKFailoverController\uff09\uff0c\u5728node73,node74\u4e24\u4e2a\u8282\u70b9\u505a\u64cd\u4f5c\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh start zkfc\n</code></pre> <p>\u2466\u5728\u6240\u6709datanode\u8282\u70b9\u90fd\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8datanode\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh start datanode\n</code></pre> <p>\u2467\u914d\u7f6e\u5b8cHA\u4e4b\u540e\u53ef\u4ee5\u4e0b\u67e5\u770b\u4e0b\u4e24\u53f0NameNode\u7684\u72b6\u6001\u662f\u5426\u6b63\u5e38\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> Bash<pre><code>[demouser@node73 flink-1.15.3]$ hdfs haadmin -getServiceState nn1\nstandby\n[demouser@node73 flink-1.15.3]$ hdfs haadmin -getServiceState nn2\nactive\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/hadoop/#hdfs","title":"HDFS\u8fd0\u7ef4\u547d\u4ee4","text":"<p>\uff081\uff09\u542f\u505c\u5b58\u50a8\u7ba1\u7406\u8fdb\u7a0b\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh stop datanode\n${HADOOP_HOME}/sbin/hadoop-daemon.sh start datanode\n</code></pre> <p>\uff082\uff09\u542f\u505c\u5143\u6570\u636e\u7ba1\u7406\u8fdb\u7a0b\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/hadoop-daemon.sh stop namenode\n${HADOOP_HOME}/sbin/hadoop-daemon.sh start namenode\n</code></pre> <p>\uff083\uff09\u542f\u505cHDFS\u96c6\u7fa4\u3002</p> Bash<pre><code>${HADOOP_HOME}/sbin/stop-dfs.sh\n${HADOOP_HOME}/sbin/start-dfs.sh\n</code></pre> <p>\uff084\uff09\u67e5\u770bHDFS HA NameNode\u72b6\u6001\u3002</p> Bash<pre><code>hdfs haadmin -getServiceState nn1\nhdfs haadmin -getServiceState nn2\n</code></pre> <p>\uff085\uff09\u67e5\u770bNameNode\u65e5\u5fd7\u3002</p> Bash<pre><code>tail -1000f ${HADOOP_HOME}/logs/hadoop-xxx-namenode-xxx.log\n</code></pre> <p>\uff086\uff09\u67e5\u770bDataNode\u65e5\u5fd7\u3002</p> Bash<pre><code>tail -1000f ${HADOOP_HOME}/logs/hadoop-xxx-datanode-xxx.log\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/","title":"Java\u73af\u5883\u5b89\u88c5","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#java","title":"Java\u73af\u5883\u90e8\u7f72","text":"<p>\u4f7f\u7528JDK\u4e3a\u5e73\u53f0\u7684\u8fd0\u884c\u63d0\u4f9bJava\u670d\u52a1\u8fd0\u884c\u73af\u5883\uff0cJDK\u5168\u79f0Java SE Development kit(JDK)\uff0c\u5373Java\u6807\u51c6\u7248\u5f00\u53d1\u5305\uff0c\u662fOracle\u63d0\u4f9b\u7684\u4e00\u5957\u7528\u4e8e\u5f00\u53d1Java\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u5305\uff0c\u5b83\u63d0\u4f9b\u7f16\u8bd1\uff0c\u8fd0\u884cJava\u7a0b\u5e8f\u6240\u9700\u8981\u7684\u5404\u79cd\u5de5\u5177\u548c\u8d44\u6e90\uff0c\u5305\u62ecjava\u7f16\u8bd1\u5668\uff0cJava\u8fd0\u884c\u65f6\u73af\u5883\uff0c\u4ee5\u53ca\u5e38\u7528\u7684Java\u7c7b\u5e93\u7b49\u3002\u5728\u672c\u5e73\u53f0\u4e2d\u7f51\u5173\u670d\u52a1\u3001\u7528\u6237\u7ba1\u7406\u670d\u52a1\u3001\u6743\u9650\u8ba4\u8bc1\u670d\u52a1\u4ee5\u53ca\u6570\u636e\u7ba1\u7406\u670d\u52a1\u662f\u57fa\u4e8eJava\u8bed\u8a00\u5f00\u53d1\u7684\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"<ul> <li>192.168.21.71-&gt;node71</li> <li>192.168.21.72-&gt;node72</li> <li>192.168.21.73-&gt;node73</li> <li>192.168.21.74-&gt;node74</li> <li>192.168.21.75-&gt;node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.71~192.168.21.75 JDK\u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/jdk1.8.0_201.tar.gz JDK\u5b89\u88c5\u76ee\u5f55 /data/workspace/jdk1.8.0_201","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#_2","title":"\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step1","title":"step1: \u89e3\u538b\u6587\u4ef6\u5230\u6307\u5b9a\u76ee\u5f55","text":"Bash<pre><code>sudo tar -zxvf /data/software/jdk1.8.0_201.tar.gz -C /data/workspace\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step2","title":"step2: \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":"<p>\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u4e8e/etc/profile</p> Bash<pre><code>vim /etc/profile\n</code></pre> <p>\u914d\u7f6e\u5982\u4e0b\u5185\u5bb9:</p> Bash<pre><code># JDK1.8\nexport JAVA_HOME=/data/workspace/jdk1.8.0_201\nexport PATH=$PATH:$JAVA_HOME/bin\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step3","title":"step3: \u914d\u7f6e\u751f\u6548","text":"Bash<pre><code>source /etc/profile\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step4","title":"step4: \u9a8c\u8bc1","text":"Bash<pre><code>java -version\n\njava version \"1.8.0_201\"\nJava(TM) SE Runtime Environment (build 1.8.0_201-b09)\nJava HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode)\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/java/#step5-jdk","title":"step5: \u5c06JDK\u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5404\u670d\u52a1\u5668\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/jdk1.8.0_201 root@node71:/data/workspace/\nsudo scp -r /data/workspace/jdk1.8.0_201 root@node72:/data/workspace/\nsudo scp -r /data/workspace/jdk1.8.0_201 root@node73:/data/workspace/\nsudo scp -r /data/workspace/jdk1.8.0_201 root@node74:/data/workspace/\nsudo scp -r /data/workspace/jdk1.8.0_201 root@node75:/data/workspace/\n\n# \u5206\u522b\u8fdb\u5165\u5404\u670d\u52a1\u5668\u8282\u70b9\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim /etc/profile\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport JAVA_HOME=/data/workspace/jdk1.8.0_201\nexport PATH=$PATH:$JAVA_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource /etc/profile\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/","title":"kafka\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#kafka","title":"Kafka","text":"<p>Kafka\u4f5c\u4e3a\u5206\u5e03\u5f0f\u6d88\u606f\u961f\u5217\u4e3b\u8981\u670d\u52a1\u4e8e\u5b9e\u65f6\u6d41\u8ba1\u7b97\u573a\u666f\uff0c\u5728\u672c\u7cfb\u7edf\u4e2d\u4e3b\u8981\u7528\u4e8e\u6d4b\u8bd5\u6a21\u62df\u751f\u4ea7\u73af\u5883\u8fd0\u884c\u6a21\u578b\uff0c\u540e\u7eed\u987b\u5bf9\u63a5\u751f\u4ea7\u73af\u5883\u7684Kakfa\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"<ul> <li>192.168.21.73 -&gt; node73</li> <li>192.168.21.74 -&gt; node74</li> <li>192.168.21.75 -&gt; node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 kafka\u4ee3\u7406\u8282\u70b9 192.168.21.73 zookeeper\u8282\u70b9 192.168.21.73-192.168.21.75 kafka\u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/kafka_2.12-2.1.1.tgz kafka\u8fd0\u884c\u76ee\u5f55 /data/workspace/kafka_2.12-2.1.1 kafka\u6570\u636e\u76ee\u5f55 /data/workspace/kafka_2.12-2.1.1/kafka-logs \u542f\u505c\u72b6\u6001\u7ef4\u62a4\u811a\u672c $KAFKA_HOME/bin/kafka-server.sh","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#kafka_1","title":"Kafka\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#step1","title":"step1: \u89e3\u538b\u5b89\u88c5\u5305","text":"Bash<pre><code>sudo tar -zxvf /data/software/kafka_2.12-2.1.1.tgz -C /data/workspace\nsudo chown -R demouser:demouser /data/workspace/kafka_2.12-2.1.1/\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#step2-flink","title":"step2: \u914d\u7f6e Flink \u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u200b     \u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># FLINK\nexport KAFKA_HOME=/data/workspace/kafka_2.12-2.1.1\nexport PATH=$PATH:$KAFKA_HOME/bin\n</code></pre> <p>\u200b     \u751f\u6548\u914d\u7f6e\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#step3-serverproperties","title":"step3: \u914d\u7f6eserver.properties\u6587\u4ef6","text":"<p>\u5728${KAFKA_HOME}/config\u8def\u5f84\u4e0b\u914d\u7f6eserver.properties\u6587\u4ef6\uff0c\u914d\u7f6e\u9879\u5982\u4e0b\uff1a</p> Properties<pre><code># The id of the broker. This must be set to a unique integer for each broker.\nbroker.id=0\n\n############################# Socket Server Settings #############################\n\n# The address the socket server listens on. It will get the value returned from \n# java.net.InetAddress.getCanonicalHostName() if not configured.\n#   FORMAT:\n#     listeners = listener_name://host_name:port\n#   EXAMPLE:\n#     listeners = PLAINTEXT://your.host.name:9092\nlisteners=PLAINTEXT://node73:9092\n\n# Hostname and port the broker will advertise to producers and consumers. If not set, \n# it uses the value for \"listeners\" if configured.  Otherwise, it will use the value\n# returned from java.net.InetAddress.getCanonicalHostName().\n#advertised.listeners=PLAINTEXT://your.host.name:9092\n\n# Maps listener names to security protocols, the default is for them to be the same. See the config documentation for more details\n#listener.security.protocol.map=PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL\n\n# The number of threads that the server uses for receiving requests from the network and sending responses to the network\nnum.network.threads=3\n\n# The number of threads that the server uses for processing requests, which may include disk I/O\nnum.io.threads=8\n\n# The send buffer (SO_SNDBUF) used by the socket server\nsocket.send.buffer.bytes=102400\n\n# The receive buffer (SO_RCVBUF) used by the socket server\nsocket.receive.buffer.bytes=102400\n\n# The maximum size of a request that the socket server will accept (protection against OOM)\nsocket.request.max.bytes=104857600\n\n\n############################# Log Basics #############################\n\n# A comma separated list of directories under which to store log files\nlog.dirs=/data/workspace/kafka_2.12-2.1.1/kafka-logs\n\n# The default number of log partitions per topic. More partitions allow greater\n# parallelism for consumption, but this will also result in more files across\n# the brokers.\nnum.partitions=1\n\n# The number of threads per data directory to be used for log recovery at startup and flushing at shutdown.\n# This value is recommended to be increased for installations with data dirs located in RAID array.\nnum.recovery.threads.per.data.dir=1\n\n############################# Internal Topic Settings  #############################\n# The replication factor for the group metadata internal topics \"__consumer_offsets\" and \"__transaction_state\"\n# For anything other than development testing, a value greater than 1 is recommended for to ensure availability such as 3.\noffsets.topic.replication.factor=1\ntransaction.state.log.replication.factor=1\ntransaction.state.log.min.isr=1\n\n############################# Log Flush Policy #############################\n\n# Messages are immediately written to the filesystem but by default we only fsync() to sync\n# the OS cache lazily. The following configurations control the flush of data to disk.\n# There are a few important trade-offs here:\n#    1. Durability: Unflushed data may be lost if you are not using replication.\n#    2. Latency: Very large flush intervals may lead to latency spikes when the flush does occur as there will be a lot of data to flush.\n#    3. Throughput: The flush is generally the most expensive operation, and a small flush interval may lead to excessive seeks.\n# The settings below allow one to configure the flush policy to flush data after a period of time or\n# every N messages (or both). This can be done globally and overridden on a per-topic basis.\n\n# The number of messages to accept before forcing a flush of data to disk\n#log.flush.interval.messages=10000\n\n# The maximum amount of time a message can sit in a log before we force a flush\n#log.flush.interval.ms=1000\n\n############################# Log Retention Policy #############################\n\n# The following configurations control the disposal of log segments. The policy can\n# be set to delete segments after a period of time, or after a given size has accumulated.\n# A segment will be deleted whenever *either* of these criteria are met. Deletion always happens\n# from the end of the log.\n\n# The minimum age of a log file to be eligible for deletion due to age\nlog.retention.hours=168\n\n# A size-based retention policy for logs. Segments are pruned from the log unless the remaining\n# segments drop below log.retention.bytes. Functions independently of log.retention.hours.\n#log.retention.bytes=1073741824\n\n# The maximum size of a log segment file. When this size is reached a new log segment will be created.\nlog.segment.bytes=1073741824\n\n# The interval at which log segments are checked to see if they can be deleted according\n# to the retention policies\nlog.retention.check.interval.ms=300000\n\n############################# Zookeeper #############################\n\n# Zookeeper connection string (see zookeeper docs for details).\n# This is a comma separated host:port pairs, each corresponding to a zk\n# server. e.g. \"127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002\".\n# You can also append an optional chroot string to the urls to specify the\n# root directory for all kafka znodes.\nzookeeper.connect=node73:2181,node74:2181,node75:2181/kafka-2.1.1\n\n# Timeout in ms for connecting to zookeeper\nzookeeper.connection.timeout.ms=6000\n\n\n############################# Group Coordinator Settings #############################\n\n# The following configuration specifies the time, in milliseconds, that the GroupCoordinator will delay the initial consumer rebalance.\n# The rebalance will be further delayed by the value of group.initial.rebalance.delay.ms as new members join the group, up to a maximum of max.poll.interval.ms.\n# The default value for this is 3 seconds.\n# We override this to 0 here as it makes for a better out-of-the-box experience for development and testing.\n# However, in production environments the default value of 3 seconds is more suitable as this will help to avoid unnecessary, and potentially expensive, rebalances during application startup.\ngroup.initial.rebalance.delay.ms=0\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/kafka/#step4","title":"step4\uff1a\u8fd0\u7ef4\u7ba1\u7406","text":"<p>\u4f8b\u5982\u521b\u5efa\u4e00\u4e2a\u540d\u79f0\u4e3at1\u7684\u4e3b\u9898\uff0c\u540c\u65f6\u6307\u5b9a1\u4e2a\u5206\u533a\u548c1\u4e2a\u526f\u672c\u3002</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-topics.sh --create \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1 \\\n--replication-factor 1 \\\n--partitions 1 \\\n--topic t1\n</code></pre> <p>\u200b       \u3010\u6ce8\u610f\u3011\u8fd9\u91cc\u7684--zookeeper\u5fc5\u987b\u5bf9\u5e94$KAFKA_HOME/config/server.properties\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684zookeeper.connect\u53c2\u6570\u6240\u5bf9\u5e94\u7684\u503c\uff0c\u5bb9\u6613\u51fa\u9519\u7684\u5730\u65b9\u5728\u4e8e\u5982\u679c\u914d\u7f6e\u4e86kafka\u6ce8\u518c\u5230\u8282\u70b9znode\uff0c\u90a3\u4e48\u5728\u901a\u8fc7kafka-topics.sh\u64cd\u4f5c\u4e3b\u9898\u65f6--zookeeper\u53c2\u6570\u4e5f\u5fc5\u987b\u9644\u5e26\u4e0a\u8fd9\u4e2aznode\uff0c\u5426\u5219\u4f1a\u6709\u5982\u4e0b\u5f02\u5e38\uff1a</p> Bash<pre><code>ERROR org.apache.kafka.common.errors.InvalidReplicationFactorException: Replication factor: 1 larger than available brokers: 0.\n (kafka.admin.TopicCommand$)\n</code></pre> <p>\u67e5\u770b\u4e3b\u9898</p> <p>\u3010\u67e5\u770b\u5355\u4e2a\u4e3b\u9898\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-topics.sh --describe \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1 \\\n--topic t1\nTopic:t1        PartitionCount:1        ReplicationFactor:1     Configs:\n        Topic: t1       Partition: 0    Leader: 2       Replicas: 2     Isr: 2\n</code></pre> <p>\u3010\u5217\u51fa\u6240\u6709\u4e3b\u9898\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-topics.sh --list \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1\nt1\n</code></pre> <p>\u5220\u9664\u4e3b\u9898</p> <p>\u3010\u65b9\u5f0f\u4e00\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-run-class.sh kafka.admin.TopicCommand --delete \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1 \\\n--topic t1\nTopic t1 is marked for deletion.\nNote: This will have no impact if delete.topic.enable is not set to true.\n</code></pre> <p>\u3010\u65b9\u5f0f\u4e8c\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-topics.sh --delete \\\n--zookeeper node73:2181,node74:2181,node75:2181/kafka-2.1.1 \\\n--topic t1\n</code></pre> <p>\u751f\u4ea7\u6d88\u606f</p> <p>\u3010\u4f7f\u7528\u5185\u90e8\u7f51\u5361\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-console-producer.sh \\\n--broker-list node73:9092 \\\n--topic t1\n</code></pre> <p>\u3010\u4f7f\u7528\u5916\u90e8\u7f51\u5361\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-console-producer.sh \\\n--broker-list node73:9092 \\\n--topic t1\n</code></pre> <p>\u6d88\u8d39\u6d88\u606f</p> <p>\u3010\u4f7f\u7528\u5185\u90e8\u7f51\u5361\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-console-consumer.sh \\\n--bootstrap-server node73:9092 \\\n--topic t1 \\\n--from-beginning\n</code></pre> <p>\u3010\u4f7f\u7528\u5916\u90e8\u7f51\u5361\u3011</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-console-consumer.sh \\\n--bootstrap-server node73:9092 \\\n--topic t1 \\\n--from-beginning\n</code></pre> <p>\u67e5\u770b\u6d88\u8d39\u8005\u7ec4</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-consumer-groups.sh \\\n--bootstrap-server node73:9092 \\\n--list\n</code></pre> <p>\u67e5\u770b\u6d88\u8d39\u8005\u7ec4\u8be6\u7ec6\u6d88\u8d39\u60c5\u51b5</p> Bash<pre><code>$KAFKA_HOME/bin/kafka-consumer-groups.sh \\\n--bootstrap-server node73:9092 \\\n--group console-consumer-51788 \\\n--describe\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/","title":"Mongodb\u7684\u5b89\u88c5\u6307\u5357","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_1","title":"\u5b89\u88c5\u8bf4\u660e","text":"<ul> <li>\u57fa\u4e8eLinux7.8\u5b89\u88c5</li> <li>\u7248\u672c\uff1a\u793e\u533a\u7248\uff1amongodb-linux-x86_64-rhel70-5.0.9</li> <li>\u6570\u636e\u76ee\u5f55\uff1a/usr/local/mongodb/data/</li> <li>\u914d\u7f6e\u6587\u4ef6\uff1a/usr/local/mongodb/conf/mongodb.conf</li> <li>\u65e5\u5fd7\u6587\u4ef6:  /usr/local/mongodb/logs/mongodb.log</li> </ul> <p>\u5b98\u7f51\u5b89\u88c5\u94fe\u63a5\uff1ahttps://www.mongodb.com/docs/manual/administration/install-on-linux/</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_2","title":"\u5b89\u88c5\u6307\u5357","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_3","title":"\u5355\u673a\u90e8\u7f72","text":"<ol> <li>\u4e0b\u8f7d\u5b89\u88c5mongodb <p>\u767e\u5ea6\u7f51\u76d8\u4e0b\u8f7d\u5730\u5740\uff1a\u94fe\u63a5\uff1ahttps://pan.baidu.com/s/1QTrVmX8xSNHMaxyXwMiGZQ?pwd=fb9g  \u63d0\u53d6\u7801\uff1afb9g  --\u6765\u81ea\u767e\u5ea6\u7f51\u76d8\u8d85\u7ea7\u4f1a\u5458V7\u7684\u5206\u4eab</p> </li> </ol> Bash<pre><code>cd /data/software\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-5.0.9.tgz\n\nmkdir -p /usr/local/mongodb\ntar -zxvf mongodb-linux-x86_64-rhel70-5.0.9.tgz -C /usr/local/mongodb\n</code></pre> <ol> <li>\u6dfb\u52a0\u73af\u5883\u53d8\u91cf Bash<pre><code>vim /etc/profile\n\nexport PATH=/usr/local/mongodb/bin:$PATH\n\nsource /etc/profile\n</code></pre></li> </ol> <p>3.\u521b\u5efa\u6570\u636e\u3001\u65e5\u5fd7\u3001\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 Bash<pre><code>mkdir -p /usr/local/mongodb/data\nmkdir -p /usr/local/mongodb/logs\nmkdir -p /usr/local/mongodb/conf\n</code></pre></p> <p>4.\u7f16\u5199\u914d\u7f6e\u6587\u4ef6 Bash<pre><code>cd /usr/local/mongodb/conf\nvim mongodb.conf\n\nbind_ip = 192.168.146.38\nport = 27017\n#\u540e\u53f0\u8fd0\u884c\nfork = true\n## \u6570\u636e\u76ee\u5f55\ndbpath=/usr/local/mongodb/data/mongodb\n## \u65e5\u5fd7\u8def\u5f84\nlogpath=/usr/local/mongodb/data/logs/mongod.log\n## is log Rotate mongoDB 3.0\nlogappend = true\n#logRotate = true\n## \u5f00\u542f\u65e5\u5fd7\njournal = true\n## \u4f7f\u7528\u5c0f\u6587\u4ef6\u8fdb\u884c\u5f00\u53d1\nsmallfiles = true\n5. \u542f\u52a8\u6d4b\u8bd5\nmongod --config /usr/local/mongodb/conf/mongodb.conf\n# &gt;&gt;&gt;logs\nabout to fork child process, waiting until server is ready for connections.\nforked process: 17802\nchild process started successfully, parent exiting\n6.\u67e5\u770b\u8fdb\u7a0b\nnetstat -unltp | grep mongo\n# \u6216\nnetstat -lanp | grep \"27017\"\n</code></pre></p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_4","title":"\u6269\u5c55","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_5","title":"\u521b\u5efa\u7ba1\u7406\u5458","text":"<p>\u25cf mongo Bash<pre><code>-- \u8fdb\u5165\u7ba1\u7406\u6570\u636e\u5e93\nuse admin;\n-- \u521b\u5efa\u7ba1\u7406\u5458, \u8bbe\u7f6e\u9a8c\u8bc1\ndb.createUser({user:'admin',pwd:'123456', roles:[{role:'dbAdminAnyDatabase',db:'admin'},{role:'root',db:'admin'}]})\n</code></pre></p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/mongodb/#_6","title":"\u521b\u5efa\u975e\u7ba1\u7406\u5458","text":"<p>\u25cf mongo Bash<pre><code>-- \u8fdb\u5165\u7528\u6237\u6570\u636e\u5e93\nuser test;\n-- \u521b\u5efa\u7528\u6237\ndb.createUser(\n    {\n        user: \"test\",\n        pwd: \"123456\",\n\n        roles: [{ \"role\": \"readWrite\", \"db\": \"test\" }, { \"role\": \"dbAdmin\", \"db\": \"test\" }],\n        \"mechanisms\": [\n            \"SCRAM-SHA-1\",\n            \"SCRAM-SHA-256\"\n        ]\n    }\n)\n</code></pre></p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/","title":"Nginx\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/#_1","title":"\u90e8\u7f72\u8bf4\u660e\uff1a","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.71 \u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/nginx-1.22.1.tar.gz \u5b89\u88c5\u76ee\u5f55 /data/workspace/nginx \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 /data/workspace/nginx/conf/nginx.conf\uff1b /data/workspace/nginx/conf/subconf/frontend-wl.conf","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/#_2","title":"\u90e8\u7f72\u6307\u5357","text":"<ul> <li> <p>\u4f9d\u8d56\u5e93\u5b89\u88c5\uff08\u5b89\u88c5\u524d\u68c0\u67e5\u5f53\u524d\u670d\u52a1\u5668\u662f\u5426\u6709\u4e0b\u5217\u5e93\uff0c\u82e5\u6709\u8df3\u8fc7\u6b64\u6b65\u9aa4\uff09 Bash<pre><code>sudo yum -y install gcc gcc-c++   # \u5b89\u88c5 gcc\u73af\u5883,nginx \u7f16\u8bd1\u65f6\u4f9d\u8d56 gcc \u73af\u5883 \nsudo yum -y install pcre pcre-devel  # \u5b89\u88c5 pcre,\u8ba9nginx\u652f\u6301\u91cd\u5199\u529f\u80fd\nsudo yum -y install zlib zlib-devel # \u5b89\u88c5 zlib,zlib \u5e93\u63d0\u4f9b\u4e86\u5f88\u591a\u538b\u7f29\u548c\u89e3\u538b\u7f29\u7684\u65b9\u5f0f\uff0cnginx \u4f7f\u7528 zlib \u5bf9 http \u5305\u5185\u5bb9\u8fdb\u884c gzip \u538b\u7f29 \nsudo yum -y install openssl openssl-devel # \u5b89\u88c5 openssl,\u5b89\u5168\u5957\u63a5\u5b57\u5c42\u5bc6\u7801\u5e93\uff0c\u7528\u4e8e\u901a\u4fe1\u52a0\u5bc6\n\n# \u4e0a\u8ff0\u56db\u6761\u547d\u4ee4\u53ef\u5408\u5e76\u6267\u884c\nsudo yum -y install gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel\n</code></pre></p> </li> <li> <p>Nginx\u5b89\u88c5</p> <ul> <li>\u6682\u65f6\u672a\u914d\u7f6e\u5f00\u673a\u542f\u52a8\uff0c\u82e5\u670d\u52a1\u5668\u91cd\u542f\u540e\u9700\u8981\u624b\u52a8\u542f\u52a8nginx Bash<pre><code># \u4e0b\u8f7d\u5b89\u88c5\u5305\nwget http://nginx.org/download/nginx-1.22.1.tar.gz\n\n# step1:\u8fdb\u5165Nginx\u5b89\u88c5\u5305\u8def\u5f84\uff0c\u6267\u884c\u4e0b\u8ff0\u547d\u4ee4\u8fdb\u884c\u89e3\u538b\ntar -xzvf nginx-1.22.1.tar.gz -C /data/workspace\n\nmv nginx-1.21.6 nginx \n\n# step2:\u6267\u884c\u7f16\u8bd1\n./configure --prefix=/data/workspace/nginx\nmake &amp;&amp; make install\n\n# step4:\u6253\u5f00\u73af\u5883\u53d8\u91cf\u6587\u4ef6\nvim /etc/profile\n\n# step5: \u6dfb\u52a0nginx\u73af\u5883\u53d8\u91cf\uff0c\u5e76\u4fdd\u5b58\u9000\u51fa\nexport NGINX_HOME= /data/workspace/nginx  ###\u4e3anginx\u5b89\u88c5\u76ee\u5f55\nexport PATH=$PATH:$NGINX_HOME/sbin\n\n# step6:\u91cd\u8f7d\u73af\u5883\u53d8\u91cf\u6587\u4ef6\nsource /etc/profile\n\n#step7\uff1a\u542f\u52a8nginx\nnginx\n\n#step8\uff1a \u67e5\u770b\u662f\u5426\u6b63\u5e38\u542f\u52a8\uff08\u6b64\u5904\u4f7f\u7528\u67e5\u770bnginx\u8fdb\u7a0b\u53f7\u7684\u65b9\u5f0f\uff09\nps axu | grep nginx\n</code></pre></li> </ul> </li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/#_3","title":"\u914d\u7f6e\u5f00\u673a\u542f\u52a8","text":"Bash<pre><code>vim /usr/lib/systemd/system/nginx.service\n\n[Unit]\nDescription=nginx\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/data/workspace/nginx/sbin/nginx\nExecReload=/data/workspace/nginx/sbin/nginx -s reload\nExecStop=/data/workspace/nginx/sbin/nginx -s quit\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/nginx/#_4","title":"\u5e38\u7528\u547d\u4ee4","text":"Bash<pre><code># \u8bbe\u7f6e\u5f00\u673a\u542f\u52a8\nsystemctl enable nginx\n# \u67e5\u770b\u72b6\u6001\nsystemctl status nginx\n# \u542f\u52a8\u670d\u52a1\nsystemctl start nginx\n# \u505c\u6b62\nsystemctl stop nginx\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/postgresql/","title":"PostgreSQL\u4e3b\u4ece\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/postgresql/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.77\uff08\u4e3b\uff09, 192.168.21.78\uff08\u4ece\uff09 \u670d\u52a1\u7aef\u53e3\u53f7 5432 \u8fd0\u884c\u76ee\u5f55 /data/workspace/postgres \u6570\u636e\u6587\u4ef6\u4f4d\u7f6e /data/workspace/postgres/data","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/postgresql/#_2","title":"\u90e8\u7f72\u6307\u5357","text":"Bash<pre><code># step1.\u5b89\u88c5\u4f9d\u8d56\u5305\n#\u5b89\u88c5\u524d\u5fc5\u987b\u8981\u4fdd\u8bc1gcc\u7f16\u8bd1\u5668\u5df2\u7ecf\u5b89\u88c5\u597d\u3002\u53ef\u4ee5\u4f7f\u7528rpm -qa gcc\u68c0\u67e5\u3002\nyum install gcc make openssl zlib-devel -y\n\n# step2.\u89e3\u538b\u5b89\u88c5\u5305\n#\u89e3\u538b\u5230/data/software/postgres\ntar -xzvf postgresql-12.2.tar.gz -C /data/software\n\n# step3.\u7f16\u8bd1\u5e76\u5b89\u88c5\ncd /data/software/postgresql-12.2\n./configure --prefix=/data/workspace/postgres/data --without-readline\n\n# step4.\u5b89\u88c5\nmake &amp;&amp; make install\n\n# step5.\u521b\u5efapostgres\u7528\u6237\nuseradd postgres\npasswd postgres\n\n# step6.\u521b\u5efa\u76ee\u5f55\u548clog\nmkdir -p /data/workspace/postgres/data\nmkdir -p /data/workspace/postgres/log\nchown -R postgres:postgres /data/workspace/postgres/\n\n#\u767b\u9646\u4e00\u4e0b\uff0c\u8ba9\u7cfb\u7edf\u521b\u5efa\u5bb6\u76ee\u5f55\nsu - postgres\n\n# \u914d\u7f6e\u73af\u5883\u53d8\u91cf\nvim .bash_profile\nexport PGHOME=/data/workspace/postgres\nexport PATH=$PATH:$PGHOME/bin\n\nsource .bash_profile\n\n# step7.\u521d\u59cb\u5316\u6570\u636e\u5e93\npostgres\u521d\u59cb\u5316\u7f16\u7801\u6307\u5b9a\u4e2d\u6587\n\u5728postgres\u7528\u6237\u4e0b\u4f7f\u7528\ninitdb -D /data/workspace/postgres -E UTF8 --locale=zh_CN.UTF-8 -U postgres -W\n\nData page checksums are disabled.\n\nEnter new superuser password: postgres\nEnter it again: postgres\n\n# setp8.\u542f\u52a8\npg_ctl -D /data/workspace/postgres/data -l logfile start\n\n\n# set9.\u4e3b\u4ece\u8bbe\u7f6e\n\n################################# \u4e3b\u5e93\u914d\u7f6e ######################################\n# \u8fdb\u5165psql\npsql -U postgres postgres\n# \u521b\u5efa\u7528\u6237\nceate user replica with replication login password 'replication'; \nalter user replica with password 'replication';\n# \u4fee\u6539pg_hba.conf\nvim /data/workspace/postgres/data/pg_hba.conf\n# ------------------------- pg_hba.conf\u4fee\u6539\u5185\u5bb9 -------------------------\nhost  all          all      0.0.0.0/0    trust\nhost  replication  replica 0.0.0.0/0  md5 \nhost    replication     replica         0.0.0.0/0            trust \n# ------------------------- \u7ed3\u675f -------------------------\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\nvim /data/workspace/postgres/data/postgresql.conf\n#-------------------------- \u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u5185\u5bb9 --------------------------\nlisten_addresses = '*'\n# \u8bbe\u7f6e\u4e3bpgsql\u4e3a\u751f\u6210wal\u7684\u4e3b\u673a\uff0c9.6\u5f00\u59cb\u6ca1\u6709hot_standby\uff08\u70ed\u5907\u6a21\u5f0f\uff09 \nwal_level = replica \n\n# \u5f00\u542f\u8fde\u7eed\u5f52\u6863 \narchive_mode = on \n#\u5f52\u6863\u547d\u4ee4\u3002-o \"StrictHostKeyChecking no\" \u4f5c\u7528\u662f\u53d6\u6d88\u7b2c\u4e00\u6b21\u8fde\u63a5\u8f93\u5165yes\u6216\u8005no \narchive_command = 'scp -o \"StrictHostKeyChecking no\" %p postgres@192.168.21.78:/data/workspace/postgres/data/archive/%f' \n# archive_command = 'test ! -f /data/postgresql-12/archive/%f &amp;&amp; scp %p pgslave.ayunw.cn:/data/postgresql-12/archive/%f' \narchive_cleanup_command = '/opt/postgresql-12.12/bin/pg_archivecleanup -d /data/postgresql-12.12/data/pg_wal %r &gt;&gt; /data/postgresql-12.12/data/pg_log/archive_cleanup.log 2&gt;&amp;1' \n# \u6700\u591a\u670916\u4e2a\u6d41\u590d\u5236\u8fde\u63a5\u3002 \nmax_wal_senders = 20 \n# \u8bbe\u7f6e\u6d41\u670d\u52a1\u4fdd\u7559\u7684\u6700\u591awal(\u8001\u7248\u672c\u53ebxlog)\u6587\u4ef6\u4e2a\u6570 \nwal_keep_segments = 256 \n# \u6570\u636e\u5806\u6e05\u7406\u7684\u6700\u5927\u8fdb\u7a0b \nautovacuum_max_workers = 2 \nmax_worker_processes = 20 \nmax_logical_replication_workers = 10 \n# \u65e5\u5fd7\u8bbe\u7f6e \nlog_destination = 'stderr' \nlogging_collector = on \nlog_directory = 'pg_log' \nlog_filename = 'postgresql-%w.log' \nlog_file_mode = 0600 \nlog_truncate_on_rotation = on \nlog_rotation_age = 1d \nlog_rotation_size = 1GB \n\nlog_min_messages = error \n# \u6267\u884c\u8d85\u8fc7300ms\u7684sql\u8bed\u53e5\u4f1a\u8bb0\u5f55\u5230pgsql\u7684\u65e5\u5fd7\u6587\u4ef6,\u7c7b\u4f3c\u4e8e\u6162\u65e5\u5fd7 \n# \u4e00\u822c\u8bbe\u7f6e300ms\u5c31\u597d\uff0c\u6162\u65e5\u5fd7\u4f1a\u6253\u5230pgsql\u65e5\u5fd7\u6587\u4ef6\uff0c\u65b9\u4fbf\u67e5\u95ee\u9898 \nlog_min_duration_statement = 300 \nlog_checkpoints = on \nlog_connections = on \nlog_disconnections = on \nlog_error_verbosity = verbose \nlog_hostname = on \nlog_line_prefix = '%m [%p] ' \nlog_lock_waits = on  \nlog_statement = 'ddl' \n#-------------------------- \u7ed3\u675f --------------------------\n# \u521b\u5efaarchive\u76ee\u5f55\uff0c\u91cd\u542f\ncd /data/workspace/postgres/data\nmkdir acrchive\npg_ctl -D /data/workspace/postgres/data start\n\n################################# \u4ece\u5e93\u914d\u7f6e ######################################\n# \u5907\u4efd\u6570\u636e\u76ee\u5f55\nmkdir -p /data/workspace/pgsqldata_backup \nmv /data/workspace/postgres/data/* /data/workspace/pgsqldata_backup\n\n# \u4ece\u5e93\u505a\u57fa\u7840\u5907\u4efd\npg_basebackup -h 192.168.21.71 -p 5432 -U replica -W -R -Fp -Xs -Pv -D /data/workspace/postgres/data/\n# \u914d\u7f6e\u4ece\u5e93\u7684\u914d\u7f6e\u6587\u4ef6\ncd /data/workspace/postgres/data\nmv postgresql.conf postgresql.conf_master.bak\ncp /data/workspace/pgsqldata_backup/postgresql.conf /data/workspace/postgres/data\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\nvim /data/workspace/postgres/data/postgresql.conf \n#-------------------------- \u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u5185\u5bb9 --------------------------\nrestore_command = 'cp /data/workspace/postgres/data/archive/%f %p' \narchive_cleanup_command = '/data/workspace/postgres/bin/pg_archivecleanup -d /data/workspace/postgres/data/pg_wal %r &amp;&amp; /data/workspace/postgres/bin/pg_archivecleanup -d /data/workspace/postgres/data/archive %r &gt;&gt; /data/workspace/postgres/data/pg_log/archive_cleanup.log 2&gt;&amp;1' \n\n# 9.6\u5f00\u59cb\u6ca1\u6709hot_standby\uff08\u70ed\u5907\u6a21\u5f0f\uff09 \nwal_level = replica \n# \u6700\u591a\u670916\u4e2a\u6d41\u590d\u5236\u8fde\u63a5\u3002 \nmax_wal_senders = 20 \n\n# \u8bbe\u7f6e\u6bd4\u4e3b\u5e93\u5927\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a2\u500d\u7684\u6570\u503c \nwal_keep_segments = 512 \nmax_logical_replication_workers = 10 \n\nautovacuum_max_workers = 2 \n# \u548c\u4e3b\u7684\u503c\u4fdd\u6301\u4e00\u81f4\u5373\u53ef \nmax_worker_processes = 20 \n\n# \u8bf4\u660e\u8fd9\u53f0\u673a\u5668\u4e0d\u4ec5\u7528\u4e8e\u6570\u636e\u5f52\u6863\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u6570\u636e\u67e5\u8be2 \nhot_standby = on \n#\u6d41\u5907\u4efd\u7684\u6700\u5927\u5ef6\u8fdf\u65f6\u95f4 \nmax_standby_streaming_delay = 30s  \n# \u5411\u4e3b\u673a\u6c47\u62a5\u672c\u673a\u72b6\u6001\u7684\u95f4\u9694\u65f6\u95f4 \nwal_receiver_status_interval = 10s  \n# \u51fa\u73b0\u9519\u8bef\u590d\u5236\uff0c\u5411\u4e3b\u673a\u53cd\u9988 \nhot_standby_feedback = on \n\n\n# \u65e5\u5fd7\u8bbe\u7f6e \nlog_destination = 'stderr' \nlogging_collector = on \nlog_directory = 'pg_log' \nlog_filename = 'postgresql-%w.log' \nlog_file_mode = 0600 \nlog_truncate_on_rotation = on \nlog_rotation_age = 1d \nlog_rotation_size = 1GB \n\nlog_min_messages = error \n# \u6267\u884c\u8d85\u8fc7300ms\u7684sql\u8bed\u53e5\u4f1a\u88ab\u8bb0\u5f55\u5230pgsql\u7684\u65e5\u5fd7\u6587\u4ef6\u4e2d \nlog_min_duration_statement = 300 \nlog_checkpoints = on \nlog_connections = on \nlog_disconnections = on \nlog_error_verbosity = verbose \nlog_hostname = on \nlog_line_prefix = '%m [%p] ' \nlog_lock_waits = on  \nlog_statement = 'ddl' \n#-------------------------- \u7ed3\u675f --------------------------\n# \u521b\u5efaarchive\u76ee\u5f55\nmkdir archive\n# \u91cd\u542f\u670d\u52a1\npg_ctl -D /data/workspace/postgres/data restart\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/postgresql/#_3","title":"\u5e38\u7528\u547d\u4ee4","text":"Bash<pre><code># \u542f\u52a8\u6570\u636e\u5e93\u670d\u52a1\npg_ctl start\n# \u505c\u6b62\u6570\u636e\u5e93\u670d\u52a1\npg_ctl stop\n# \u91cd\u542f\u6570\u636e\u5e93\u670d\u52a1\npg_ctl restart\n# \u8fdb\u5165postgres\npsql -U postgres\n# \u9000\u51fa\n\\q\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/","title":"RabbitMQ\u4ecb\u7ecd\u548c\u4f7f\u7528","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/#1-rabbitmq","title":"1. RabbitMQ\u4ecb\u7ecd","text":"<ul> <li> <p>\u6d88\u606f\u961f\u5217\u662f\u6d88\u606f\u5728\u4f20\u8f93\u7684\u8fc7\u7a0b\u4e2d\u4fdd\u5b58\u6d88\u606f\u7684\u5bb9\u5668\u3002</p> </li> <li> <p>\u73b0\u5728\u4e3b\u6d41\u6d88\u606f\u961f\u5217\u6709\uff1aRabbitMQ\u3001ActiveMQ\u3001Kafka\u7b49\u7b49\u3002</p> <ul> <li>RabbitMQ\u548cActiveMQ\u6bd4\u8f83<ul> <li>\u7cfb\u7edf\u541e\u5410\u91cf\uff1aRabbitMQ\u597d\u4e8eActiveMQ</li> <li>\u6301\u4e45\u5316\u6d88\u606f\uff1aRabbitMQ\u548cActiveMQ\u90fd\u652f\u6301</li> <li>\u9ad8\u5e76\u53d1\u548c\u53ef\u9760\u6027\uff1aRabbitMQ\u597d\u4e8eActiveMQ</li> </ul> </li> <li>RabbitMQ\u548cKafka\uff1a<ul> <li>\u7cfb\u7edf\u541e\u5410\u91cf\uff1aRabbitMQ\u5f31\u4e8eKafka</li> <li>\u53ef\u9760\u6027\u548c\u7a33\u5b9a\u6027\uff1aRabbitMQ\u597d\u4e8eKafka\u6bd4\u8f83</li> <li>\u8bbe\u8ba1\u521d\u8877\uff1aKafka\u662f\u5904\u7406\u65e5\u5fd7\u7684\uff0c\u662f\u65e5\u5fd7\u7cfb\u7edf\uff0c\u6240\u4ee5\u5e76\u6ca1\u6709\u5177\u5907\u4e00\u4e2a\u6210\u719fMQ\u5e94\u8be5\u5177\u5907\u7684\u7279\u6027\u3002</li> </ul> </li> </ul> </li> <li>\u7efc\u5408\u8003\u8651\uff0c\u672c\u9879\u76ee\u9009\u62e9RabbitMQ\u4f5c\u4e3a\u6d88\u606f\u961f\u5217\u3002</li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/#2-rabbitmqubuntu-1604","title":"2. \u5b89\u88c5RabbitMQ\uff08ubuntu 16.04\uff09","text":"<p>1.\u5b89\u88c5Erlang     &gt;- \u7531\u4e8e RabbitMQ \u662f\u91c7\u7528 Erlang \u7f16\u5199\u7684\uff0c\u6240\u4ee5\u9700\u8981\u5b89\u88c5 Erlang \u8bed\u8a00\u5e93\u3002</p> Python<pre><code># 1. \u5728\u7cfb\u7edf\u4e2d\u52a0\u5165 erlang apt \u4ed3\u5e93\n$ wget https://packages.erlang-solutions.com/erlang-solutions_1.0_all.deb\n$ sudo dpkg -i erlang-solutions_1.0_all.deb\n\n# 2. \u4fee\u6539 Erlang \u955c\u50cf\u5730\u5740\uff0c\u9ed8\u8ba4\u7684\u4e0b\u8f7d\u901f\u5ea6\u7279\u522b\u6162\n$ vim /etc/apt/sources.list.d/erlang-solutions.list\n# \u66ff\u6362\u9ed8\u8ba4\u503c\n$ deb https://mirrors.liuboping.com/erlang/ubuntu/ xenial contrib\n\n# 3. \u66f4\u65b0 apt \u4ed3\u5e93\u548c\u5b89\u88c5 Erlang\n$ sudo apt-get update\n$ sudo apt-get install erlang erlang-nox\n</code></pre> <p>2.\u5b89\u88c5RabbitMQ     &gt;- \u5b89\u88c5\u6210\u529f\u540e\uff0c\u9ed8\u8ba4\u5c31\u662f\u542f\u52a8\u72b6\u6001\u3002 Python<pre><code># 1. \u5148\u5728\u7cfb\u7edf\u4e2d\u52a0\u5165 rabbitmq apt \u4ed3\u5e93\uff0c\u518d\u52a0\u5165 rabbitmq signing key\n$ echo 'deb http://www.rabbitmq.com/debian/ testing main' | sudo tee /etc/apt/sources.list.d/rabbitmq.list\n$ wget -O- https://www.rabbitmq.com/rabbitmq-release-signing-key.asc | sudo apt-key add -\n\n# 2. \u66f4\u65b0 apt \u4ed3\u5e93\u548c\u5b89\u88c5 RabbitMQ\n$ sudo apt-get update\n$ sudo apt-get install rabbitmq-server\n</code></pre> Python<pre><code># \u91cd\u542f\n$ sudo systemctl restart rabbitmq-server\n# \u542f\u52a8\n$ sudo systemctl start rabbitmq-server\n# \u5173\u95ed\n$ sudo systemctl stop rabbitmq-server\n</code></pre></p> <p>3.Python\u8bbf\u95eeRabbitMQ</p> <ul> <li>RabbitMQ\u63d0\u4f9b\u9ed8\u8ba4\u7684administrator\u8d26\u6237\u3002</li> <li>\u7528\u6237\u540d\u548c\u5bc6\u7801\uff1aguest\u3001guest</li> <li>\u534f\u8bae\uff1aamqp</li> <li>\u5730\u5740\uff1alocalhost</li> <li>\u7aef\u53e3\uff1a5672</li> <li>\u67e5\u770b\u961f\u5217\u4e2d\u7684\u6d88\u606f\uff1asudo rabbitctl list_queues Python<pre><code># Python3\u865a\u62df\u73af\u5883\u4e0b\uff0c\u5b89\u88c5pika\n$ pip install pika\n</code></pre></li> </ul> Python<pre><code># \u751f\u4ea7\u8005\u4ee3\u7801\uff1arabbitmq_producer.py\nimport pika\n\n\n# \u94fe\u63a5\u5230RabbitMQ\u670d\u52a1\u5668\ncredentials = pika.PlainCredentials('guest', 'guest')\nconnection = pika.BlockingConnection(pika.ConnectionParameters('localhost',5672,'/',credentials))\n#\u521b\u5efa\u9891\u9053\nchannel = connection.channel()\n# \u58f0\u660e\u6d88\u606f\u961f\u5217\nchannel.queue_declare(queue='zxc')\n# routing_key\u662f\u961f\u5217\u540d body\u662f\u8981\u63d2\u5165\u7684\u5185\u5bb9\nchannel.basic_publish(exchange='', routing_key='zxc', body='Hello RabbitMQ!')\nprint(\"\u5f00\u59cb\u5411 'zxc' \u961f\u5217\u4e2d\u53d1\u5e03\u6d88\u606f 'Hello RabbitMQ!'\")\n# \u5173\u95ed\u94fe\u63a5\nconnection.close()\n</code></pre> Python<pre><code># \u6d88\u8d39\u8005\u4ee3\u7801\uff1arabbitmq_customer.py \nimport pika\n\n\n# \u94fe\u63a5\u5230rabbitmq\u670d\u52a1\u5668\ncredentials = pika.PlainCredentials('guest', 'guest')\nconnection = pika.BlockingConnection(pika.ConnectionParameters('localhost',5672,'/',credentials))\n# \u521b\u5efa\u9891\u9053\uff0c\u58f0\u660e\u6d88\u606f\u961f\u5217\nchannel = connection.channel()\nchannel.queue_declare(queue='zxc')\n# \u5b9a\u4e49\u63a5\u53d7\u6d88\u606f\u7684\u56de\u8c03\u51fd\u6570\ndef callback(ch, method, properties, body):\n    print(body)\n# \u544a\u8bc9RabbitMQ\u4f7f\u7528callback\u6765\u63a5\u6536\u4fe1\u606f\nchannel.basic_consume(callback, queue='zxc', no_ack=True)\n# \u5f00\u59cb\u63a5\u6536\u4fe1\u606f\nchannel.start_consuming()\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/#3-administrator","title":"3. \u65b0\u5efaadministrator\u7528\u6237","text":"Python<pre><code># \u65b0\u5efa\u7528\u6237\uff0c\u5e76\u8bbe\u7f6e\u5bc6\u7801\n$ sudo rabbitmqctl add_user admin your_password \n# \u8bbe\u7f6e\u6807\u7b7e\u4e3aadministrator\n$ sudo rabbitmqctl set_user_tags admin administrator\n# \u8bbe\u7f6e\u6240\u6709\u6743\u9650\n$ sudo rabbitmqctl set_permissions -p / admin \".*\" \".*\" \".*\"\n# \u67e5\u770b\u7528\u6237\u5217\u8868\nsudo rabbitmqctl list_users\n# \u5220\u9664\u7528\u6237\n$ sudo rabbitmqctl delete_user admin\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/rabbitmq/#4-rabbitmq","title":"4. RabbitMQ\u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee","text":"<p>1.\u51c6\u5907\u914d\u7f6e\u6587\u4ef6 - \u5b89\u88c5\u597d RabbitMQ \u4e4b\u540e\uff0c\u5728 /etc/rabbitmq \u76ee\u5f55\u4e0b\u9762\u9ed8\u8ba4\u6ca1\u6709\u914d\u7f6e\u6587\u4ef6\uff0c\u9700\u8981\u5355\u72ec\u4e0b\u8f7d\u3002 $ cd /etc/rabbitmq/</p> Python<pre><code>$ cd /etc/rabbitmq/\n$ wget https://raw.githubusercontent.com/rabbitmq/rabbitmq-server/master/docs/rabbitmq.config.example\n$ sudo cp rabbitmq.config.example rabbitmq.config\n</code></pre> <p>2.\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6 Python<pre><code>$ sudo vim rabbitmq.config\n\n# \u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u7ed3\u675f\u540e\uff0c\u91cd\u542fRabbitMQ\u670d\u52a1\u7aef\n$ sudo systemctl restart rabbitmq-server\n</code></pre></p> <p>\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u4f7f\u7528rabbitmq_producer.py\u3001rabbitmq_customer.py\u6d4b\u8bd5\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/","title":"Redis\u4e3b\u4ece-\u54e8\u5175\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_1","title":"\u90e8\u7f72\u8bf4\u660e\uff1a","text":"\u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.71\uff08Master\uff09\u3001192.168.21.77\uff08salve\uff09\u3001192.168.21.78\uff08salve\uff09 \u90e8\u7f72\u7b56\u7565 \u4e00\u4e3b\u4e24\u4ece\uff0c\u4e3b\u4ece\u590d\u5236\u3001\u54e8\u5175\u673a\u5236\u3001\u65e0\u5bc6\u7801\u8bbf\u95ee\u7b56\u7565 \u670d\u52a1\u7aef\u53e3\u53f7 6379 \u5b89\u88c5\u5305\u76ee\u5f55 /data/software/redis-6.2.12.tar.gz \u5b89\u88c5\u90e8\u7f72\u76ee\u5f55 /data/workspace/redis-6.2.12 \u542f\u505c\u811a\u672c\u76ee\u5f55 /data/workspace/redis-6.2.12/bin/ \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 /data/workspace/redis-6.2.12/etc/redis.conf\uff1b sentinel.conf \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 /data/workspace/redis-6.2.12/bin/redis.log \uff1bsentinel.log","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_2","title":"\u90e8\u7f72\u8be6\u60c5\uff1a","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_3","title":"\u901a\u7528\u6b65\u9aa4","text":"Bash<pre><code># step1 \u4e0b\u8f7d\u5b89\u88c5\u5305\nwget https://download.redis.io/releases/redis-6.2.12.tar.gz\n\n#step2\uff1a \u6240\u6709\u8282\u70b9\u6267\u884c\ntar xvf redis-6.2.12.tar.gz\ncd redis-6.2.12 \n\n# step3: \u7f16\u8bd1\nmake\n\n# step4: \u5b89\u88c5\ncd src/\nmake install \n\n# step5: \u65b0\u5efa\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u548c\u6267\u884c\u6587\u4ef6\u76ee\u5f55\ncd /data/workspace/redis-6.2.12/\nmkdir etc \nmkdir bin \n\n# step6: \u8c03\u6574\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff0c\u4fbf\u4e8e\u7edf\u4e00\u7ba1\u7406\ncp redis.conf etc/\ncd src/\ncp mkreleasehdr.sh redis-benchmark redis-check-aof redis-cli redis-server redis-sentinel ../bin/\n\n# step6: \u542f\u52a8\u670d\u52a1\uff0c\u6d4b\u8bd5\u662f\u5426\u5b89\u88c5\u6210\u529f\ncd /data/workspace/redis-6.2.12/bin\n./redis-server /workspace/redis/redis-6.2.12/etc/redis.conf\n\n# step7: \u67e5\u770b\u662f\u5426\u542f\u52a8\uff0c\u8f93\u51faredis\u76f8\u5173\u8fdb\u7a0b\u5219\u8868\u793a\u5b89\u88c5\u6210\u529f\nps aux | grep redis\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_4","title":"\u4e3b\u4ece\u914d\u7f6e","text":"<ul> <li> <p>\u6ce8\u610freplicaof\u53c2\u6570\uff1a\u53ea\u6709\u5728\u5f53\u524d\u8282\u70b9\u4e3asalve\u8282\u70b9\u65f6\uff0c\u8bbe\u7f6e\u4e3b\u8282\u70b9\u7684IP\u548cPORT, \u82e5\u5f53\u524d\u8282\u70b9\u4e3aMaster\u8282\u70b9\u65f6\u5219\u65e0\u9700\u8bbe\u7f6e\u3002 Bash<pre><code>#step1: \u4fee\u6539redis.conf,\u4ee5\u4e0b\u4ec5\u5c55\u793a\u4fee\u6539\u540e\u7684\u5185\u5bb9\n\nbind\uff1a0.0.0.0 \nport\uff1a6379 \nprotected-mode\uff1ano \ndaemonize\uff1ayes \nlogfile\uff1a./redis.log \nreplicaof 172.16.10.71 6379\nreplica-read-only no\n\n# \u67e5\u770b\u4fee\u6539\u540e\u7684\u914d\u7f6e\n(base) [root@node71 etc]#  egrep -v \"#|^$\" redis.conf \nbind 0.0.0.0\nprotected-mode no\nport 6379\ntcp-backlog 511\ntimeout 0\ntcp-keepalive 300\ndaemonize yes\npidfile /var/run/redis_6379.pid\nloglevel notice\nlogfile ./redis.log\ndatabases 16\nalways-show-logo no\nset-proc-title yes\nproc-title-template \"{title} {listen-addr} {server-mode}\"\nstop-writes-on-bgsave-error yes\nrdbcompression yes\nrdbchecksum yes\ndbfilename dump.rdb\nrdb-del-sync-files no\ndir ./\nreplica-serve-stale-data yes\nreplica-read-only no\nrepl-diskless-sync no\nrepl-diskless-sync-delay 5\nrepl-diskless-load disabled\nrepl-disable-tcp-nodelay no\nreplica-priority 100\nacllog-max-len 128\nlazyfree-lazy-eviction no\nlazyfree-lazy-expire no\nlazyfree-lazy-server-del no\nreplica-lazy-flush no\nlazyfree-lazy-user-del no\nlazyfree-lazy-user-flush no\noom-score-adj no\noom-score-adj-values 0 200 800\ndisable-thp yes\nappendonly no\nappendfilename \"appendonly.aof\"\nappendfsync everysec\nno-appendfsync-on-rewrite no\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\naof-load-truncated yes\naof-use-rdb-preamble yes\nlua-time-limit 5000\nslowlog-log-slower-than 10000\nslowlog-max-len 128\nlatency-monitor-threshold 0\nnotify-keyspace-events \"\"\nhash-max-ziplist-entries 512\nhash-max-ziplist-value 64\nlist-max-ziplist-size -2\nlist-compress-depth 0\nset-max-intset-entries 512\nzset-max-ziplist-entries 128\nzset-max-ziplist-value 64\nhll-sparse-max-bytes 3000\nstream-node-max-bytes 4096\nstream-node-max-entries 100\nactiverehashing yes\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit replica 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\nhz 10\ndynamic-hz yes\naof-rewrite-incremental-fsync yes\nrdb-save-incremental-fsync yes\njemalloc-bg-thread yes\n</code></pre></p> </li> <li> <p>\u9a8c\u8bc1\u4e3b\u4ece Bash<pre><code># node71\u8282\u70b9\n(base) [root@node71 bin]# redis-cli\n127.0.0.1:6379&gt; select 6\nOK\n127.0.0.1:6379[6]&gt; set zhongche wulian\nOK\n127.0.0.1:6379[6]&gt; get zhongche\n\"wulian\"\n127.0.0.1:6379[6]&gt; \n\n# node77\u8282\u70b9\n(base) [root@node77 bin]# redis-cli\n127.0.0.1:6379&gt; select 6\nOK\n127.0.0.1:6379[6]&gt; get zhongche\n\"wulian\"\n\n(base) [root@node78 bin]# redis-cli\n127.0.0.1:6379&gt; select 6\nOK\n127.0.0.1:6379[6]&gt; get zhongche\n\"wulian\"\n127.0.0.1:6379[6]&gt; \n</code></pre></p> </li> </ul>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_5","title":"\u54e8\u5175\u914d\u7f6e","text":"Bash<pre><code>#step1: \u4fee\u6539sentinel.conf,\u4ee5\u4e0b\u4ec5\u5c55\u793a\u4fee\u6539\u540e\u7684\u5185\u5bb9\n//\u7aef\u53e3\u9ed8\u8ba4\u4e3a26379\u3002 \nport:26379 \n//\u5173\u95ed\u4fdd\u62a4\u6a21\u5f0f\uff0c\u53ef\u4ee5\u5916\u90e8\u8bbf\u95ee\u3002 \nprotected-mode:no \n//\u8bbe\u7f6e\u4e3a\u540e\u53f0\u542f\u52a8\u3002 \ndaemonize:yes \n//\u65e5\u5fd7\u6587\u4ef6\u3002 \nlogfile:./sentinel.log \n//\u6307\u5b9a\u4e3b\u673aIP\u5730\u5740\u548c\u7aef\u53e3\uff0c\u5e76\u4e14\u6307\u5b9a\u5f53\u67092\u53f0\u54e8\u5175\u8ba4\u4e3a\u4e3b\u673a\u6302\u4e86\uff0c\u5219\u5bf9\u4e3b\u673a\u8fdb\u884c\u5bb9\u707e\u5207\u6362\u3002 \nsentinel monitor mymaster 192.168.231.130 6379 2 \n//\u5f53\u5728Redis\u5b9e\u4f8b\u4e2d\u5f00\u542f\u4e86requirepass\uff0c\u8fd9\u91cc\u5c31\u9700\u8981\u63d0\u4f9b\u5bc6\u7801\u3002 \nsentinel auth-pass mymaster pwdtest@2019 \n//\u8fd9\u91cc\u8bbe\u7f6e\u4e86\u4e3b\u673a\u591a\u5c11\u79d2\u65e0\u54cd\u5e94\uff0c\u5219\u8ba4\u4e3a\u6302\u4e86\u3002 \nsentinel down-after-milliseconds mymaster 3000 \n//\u4e3b\u5907\u5207\u6362\u65f6\uff0c\u6700\u591a\u6709\u591a\u5c11\u4e2aslave\u540c\u65f6\u5bf9\u65b0\u7684master\u8fdb\u884c\u540c\u6b65\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u76841\u3002 \nsnetinel parallel-syncs mymaster 1 \n//\u6545\u969c\u8f6c\u79fb\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u4e09\u5206\u949f\u3002 \nsentinel failover-timeout mymaster 180000 \n\n# step2:\u542f\u52a8\u4e09\u4e2a\u54e8\u5175\ncd /data/workspace/redis-6.2.12/bin\nredis-sentinel /data/workspace/redis-6.2.12/sentinel.conf\n\n# step3: \u67e5\u770b\u54e8\u5175\u4fe1\u606f\nredis-cli -p 26379 \ninfo sentinel \n#&gt;&gt;&gt;log\n(base) [root@node71 bin]# redis-cli -p 26379\n127.0.0.1:26379&gt; info sentinel\n# Sentinel\nsentinel_masters:1\nsentinel_tilt:0\nsentinel_running_scripts:0\nsentinel_scripts_queue_length:0\nsentinel_simulate_failure_flags:0\nmaster0:name=mymaster,status=ok,address=192.168.21.71:6379,slaves=2,sentinels=3\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/redis/#_6","title":"\u5e38\u7528\u547d\u4ee4","text":"Bash<pre><code># \u8fdb\u5165\u5de5\u4f5c\u76ee\u5f55\ncd /data/workspace/redis-6.2.12/bin\n\n# \u542f\u52a8redis\u670d\u52a1\nredis-server /data/workspace/redis-6.2.12/etc/redis.conf\n\n# \u542f\u52a8\u54e8\u5175\u670d\u52a1\nredis-sentinel /data/workspace/redis-6.2.12/sentinel.conf\n\n# \u5173\u95ed\u670d\u52a1\u7aef\n./redis-cli shutdown\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/","title":"Spark(ON YARN\uff09\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#spark-on-yarn","title":"Spark On YARN","text":"<p>Spark\u662f\u4e00\u79cd\u901a\u7528\u7684\u5206\u5e03\u5f0f\u5927\u6570\u636e\u8ba1\u7b97\u5f15\u64ce\uff0c\u5176\u5177\u6709\u9ad8\u53ef\u9760\u6027\u3001\u9ad8\u6269\u5c55\u6027\u3001\u9ad8\u6548\u6027\u4ee5\u53ca\u9ad8\u5bb9\u9519\u6027\u7b49\u7279\u70b9\u3002Spark\u4f5c\u4e3a\u5206\u5e03\u5f0f\u8ba1\u7b97\u5f15\u64ce\u4e3b\u8981\u4e3a\u4e0a\u5c42\u670d\u52a1\u63d0\u4f9b\u66f4\u52a0\u4fbf\u5229\u6570\u636e\u64cd\u4f5c\uff0c\u8be5\u7ec4\u4ef6\u4e3b\u8981\u9002\u7528\u4e8e\u5927\u591a\u6570\u6279\u5904\u7406\u4efb\u52a1\u7684\u573a\u666f\u3002\u5728\u672c\u7cfb\u7edf\u4e2d\u4e3b\u8981\u7528\u4e8e\u652f\u6491Spark\u6a21\u578b\u7684\u8fd0\u884c\u548c\u8ba1\u7b97\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"<ul> <li>192.168.21.73 -&gt; node73</li> <li>192.168.21.74 -&gt; node74</li> <li>192.168.21.75 -&gt; node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.73-192.168.21.75 \u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/spark-3.2.3-bin-hadoop3.2.tgz \u8fd0\u884c\u76ee\u5f55 /data/workspace/spark-3.2.3-bin-hadoop3.2","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#spark","title":"Spark\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step1","title":"step1: \u89e3\u538b\u5b89\u88c5\u5305","text":"Bash<pre><code>sudo tar -zxvf /data/software/spark-3.2.3-bin-hadoop3.2.tgz -C /data/workspace\nsudo chown -R demouser:demouser /data/workspace/spark-3.2.3-bin-hadoop3.2\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step2","title":"step2: \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># Spark\nexport SPARK_HOME=/data/workspace/spark-3.2.3-bin-hadoop3.2\nexport PATH=$PATH:$SPARK_HOME/bin\n</code></pre> <p>\u200b       \u6267\u884c\u5982\u4e0b\u547d\u4ee4,\u4f7f\u914d\u7f6e\u751f\u6548\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step3","title":"step3: \u914d\u7f6e\u76f8\u5173\u6587\u4ef6","text":"<p>\u200b       \u3010spark-defaults.conf\u3011</p> Text Only<pre><code>cp $SPARK_HOME/conf/spark-defaults.conf.template $SPARK_HOME/conf/spark-defaults.conf\nvim $SPARK_HOME/conf/spark-defaults.conf\n</code></pre> Bash<pre><code>spark.master.rest.enabled        true\nspark.master.rest.port           16066\nspark.eventLog.enabled           true\nspark.eventLog.dir               hdfs://ns/spark_3.2.3/history\nspark.history.fs.logDirectory    hdfs://ns/spark_3.2.3/history\nspark.eventLog.compress         true\nspark.history.ui.port           18888\nspark.shuffle.service.enabled   true\nspark.shuffle.service.port      7337\n\n# \u4f7f\u7528yarn\u7684\u65b9\u5f0f\u63d0\u4ea4spark\u5e94\u7528\u65f6,\u914d\u7f6espark.yarn.jars\u5e76\u4e14\u4e0a\u4f20\u4e86\u7a0b\u5e8f\u6240\u6709\u7684\u4f9d\u8d56jar\u5230HDFS /spark-3.2.3_jars/ \u4e0b\u7684\u65b9\u5f0f\u66f4\u80fd\u51cf\u5c11\u8d44\u6e90\u7684\u4e0a\u4f20\nspark.yarn.jars        hdfs://ns/spark-3.2.3_jars/*\n</code></pre> <p>\u200b       </p> <p>\u200b       \u3010spark-env.sh\u3011</p> Bash<pre><code>cp $SPARK_HOME/conf/spark-env.sh.template $SPARK_HOME/conf/spark-env.sh\nvim $SPARK_HOME/conf/spark-env.sh\n</code></pre> Bash<pre><code>export JAVA_HOME=/data/workspace/jdk1.8.0_201\nexport HADOOP_HOME=/data/workspace/hadoop-3.2.4\nexport HADOOP_CONF_DIR=/data/workspace/hadoop-3.2.4/etc/hadoop\n\n# HA\u6a21\u5f0f\u4e0b\u914d\u7f6e\nexport SPARK_DAEMON_JAVA_OPTS=\"-Dspark.deploy.recoveryMode=ZOOKEEPER -Dspark.deploy.zookeeper.url=node73:2181,node74:2181,node75:2181 -Dspark.deploy.zookeeper.dir=/spark-3.2.3\"\n\n# worker\u8fdb\u7a0b\u5de5\u4f5c\u76ee\u5f55\nexport SPARK_WORKER_DIR=/data/workspace/spark-3.2.3-bin-hadoop3.2/work\n# \u914d\u7f6e\u81ea\u52a8\u81ea\u52a8\u6e05\u7406\uff0c\u6e05\u7406\u5468\u671f\u4ee5\u53ca\u4fdd\u7559\u6700\u8fd1\u591a\u957f\u65f6\u95f4\u7684\u6570\u636e\nexport SPARK_WORKER_OPTS=\"-Dspark.worker.cleanup.enabled=true -Dspark.worker.cleanup.interval=86400 -Dspark.worker.cleanup.appDataTtl=2592000\"\n\nexport SPARK_MASTER_WEBUI_PORT=18080\nexport SPARK_HISTORY_OPTS=\"-Dspark.history.ui.port=18888 -Dspark.history.retainedApplications=30 -Dspark.history.fs.logDirectory=hdfs://ns/spark_3.2.3/history\"\n\n# job\u4efb\u52a1\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u5927\u91cf\u7684\u4e34\u65f6\u76ee\u5f55\u4f4d\u7f6e\nexport SPARK_LOCAL_DIRS=/data/workspace/spark-3.2.3-bin-hadoop3.2/tmp\n\nexport YARN_CONF_DIR=/data/workspace/hadoop-3.2.4/etc/hadoop\n\n# \u5206\u914d\u7ed9spark master/worker\u5b88\u62a4\u8fdb\u7a0b\u7684\u5185\u5b58\nexport SPARK_DAEMON_MEMORY=2g\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step4-logpid","title":"step4: \u4fee\u6539log\u76ee\u5f55\u3001pid\u76ee\u5f55","text":"<p>\u200b       \u3010spark-daemon.sh\u3011</p> Bash<pre><code>vim $SPARK_HOME/sbin/spark-daemon.sh\n</code></pre> Bash<pre><code># get log directory\nif [ \"$SPARK_LOG_DIR\" = \"\" ]; then\n  export SPARK_LOG_DIR=\"/data/workspace/spark-3.2.3-bin-hadoop3.2/log\"      # log\u76ee\u5f55\nfi\nmkdir -p \"$SPARK_LOG_DIR\"\ntouch \"$SPARK_LOG_DIR\"/.spark_test &gt; /dev/null 2&gt;&amp;1\nTEST_LOG_DIR=$?\nif [ \"${TEST_LOG_DIR}\" = \"0\" ]; then\n  rm -f \"$SPARK_LOG_DIR\"/.spark_test\nelse\n  chown \"$SPARK_IDENT_STRING\" \"$SPARK_LOG_DIR\"\nfi\n\nif [ \"$SPARK_PID_DIR\" = \"\" ]; then\n  SPARK_PID_DIR=/data/workspace/spark-3.2.3-bin-hadoop3.2/pid               # pid\u76ee\u5f55\nfi\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step5","title":"step5: \u521b\u5efa\u76f8\u5173\u76ee\u5f55","text":"Text Only<pre><code>mkdir /data/workspace/spark-3.2.3-bin-hadoop3.2/tmp\nmkdir /data/workspace/spark-3.2.3-bin-hadoop3.2/log\nmkdir /data/workspace/spark-3.2.3-bin-hadoop3.2/pid\nmkdir /data/workspace/spark-3.2.3-bin-hadoop3.2/work\nhdfs dfs -mkdir -p /spark_3.2.3/history\nhdfs dfs -mkdir /spark-3.2.3_jars\nhdfs dfs -put /data/workspace/spark-3.2.3-bin-hadoop3.2/jars/* /spark-3.2.3_jars\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step6-spark","title":"step6: \u5c06Spark\u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5bf9\u5e94\u7684\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/spark-3.2.3-bin-hadoop3.2/ root@node74:/data/workspace/\nsudo scp -r /data/workspace/spark-3.2.3-bin-hadoop3.2/ root@node75:/data/workspace/\nsudo scp -r /data/workspace/spark-3.2.3-bin-hadoop3.2/ root@node76:/data/workspace/\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u4fee\u6539hadoop-3.2.4\u6240\u5c5e\u7528\u6237\u7ec4\u548c\u6240\u5c5e\u7528\u6237\nsudo chown -R zhongche:zhongche /data/workspace/spark-3.2.3-bin-hadoop3.2\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u3001node76\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim ~/.bashrc\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport SPARK_HOME=/data/workspace/spark-3.2.3-bin-hadoop3.2\nexport PATH=$PATH:$SPARK_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#spark-on-yarn_1","title":"SPARK ON YARN\u73af\u5883\u914d\u7f6e","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/spark_on_yarn/#step1-yarn-sitexml","title":"step1: \u5728yarn-site.xml\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e","text":"Bash<pre><code>vim $HADOOP_HOME/etc/hadoop/yarn-site.xml\n</code></pre> XML<pre><code># \u4fee\u6539\n&lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;\n    &lt;value&gt;spark_shuffle,mapreduce_shuffle&lt;/value&gt;\n&lt;/property&gt;\n# \u6dfb\u52a0\n&lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.aux-services.spark_shuffle.class&lt;/name&gt;\n    &lt;value&gt;org.apache.spark.network.yarn.YarnShuffleService&lt;/value&gt;\n&lt;/property&gt;\n</code></pre> <p>\u68c0\u67e5\u4e00\u4e0b${HADOOP_HOME}/share/hadoop/yarn/lib\u76ee\u5f55\u4e0b\u662f\u5426\u6709spark-*-yarn-shuffle.jar\uff0c\u5176\u4e2d*\u4ee3\u8868spark\u7248\u672c\u53f7\uff0c\u5982\u679c\u6ca1\u6709\u9700\u8981\u4ecespark\u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\u62f7\u8d1d\u8fc7\u6765\u3002</p> <p>spark-*-yarn-shuffle.jar\u5728$SPARK_HOME\u7684yarn\u76ee\u5f55\u4e0b</p> Bash<pre><code>cp $SPARK_HOME/yarn/spark-3.2.3-yarn-shuffle.jar ${HADOOP_HOME}/share/hadoop/yarn/lib\n</code></pre> <p>\u5c06\u4fee\u6539\u7684\u6587\u4ef6\u5206\u53d1\u81f3node74,node75</p> Bash<pre><code>scp $HADOOP_HOME/etc/hadoop/yarn-site.xml zhongche@node74:$HADOOP_HOME/etc/hadoop/\nscp $HADOOP_HOME/etc/hadoop/yarn-site.xml zhongche@node75:$HADOOP_HOME/etc/hadoop/\nscp ${HADOOP_HOME}/share/hadoop/yarn/lib/spark-3.2.3-yarn-shuffle.jar zhongche@node74:${HADOOP_HOME}/share/hadoop/yarn/lib/\nscp ${HADOOP_HOME}/share/hadoop/yarn/lib/spark-3.2.3-yarn-shuffle.jar zhongche@node75:${HADOOP_HOME}/share/hadoop/yarn/lib/\n</code></pre> <p>\u91cd\u542fYARN\u670d\u52a1</p> Text Only<pre><code>${HADOOP_HOME}/sbin/stop-yarn.sh\n${HADOOP_HOME}/sbin/start-yarn.sh\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801\uff1a</p> Bash<pre><code>$SPARK_HOME/bin/spark-submit \\\n--class org.apache.spark.examples.SparkPi \\\n--master yarn \\\n--deploy-mode client \\\n$SPARK_HOME/examples/jars/spark-examples_2.12-3.2.3.jar \\\n100\n</code></pre> Bash<pre><code>2023-07-17 14:10:38,643 INFO cluster.YarnScheduler: Removed TaskSet 0.0, whose tasks have all completed, from pool \n2023-07-17 14:10:38,644 INFO scheduler.DAGScheduler: ResultStage 0 (reduce at SparkPi.scala:38) finished in 1.605 s\n2023-07-17 14:10:38,649 INFO scheduler.DAGScheduler: Job 0 is finished. Cancelling potential speculative or zombie tasks for this job\n2023-07-17 14:10:38,650 INFO cluster.YarnScheduler: Killing all running tasks in stage 0: Stage finished\n2023-07-17 14:10:38,652 INFO scheduler.DAGScheduler: Job 0 finished: reduce at SparkPi.scala:38, took 1.665838 s\nPi is roughly 3.1417683141768316\n2023-07-17 14:10:38,671 INFO server.AbstractConnector: Stopped Spark@54d80039{HTTP/1.1, (http/1.1)}{0.0.0.0:4040}\n2023-07-17 14:10:38,674 INFO ui.SparkUI: Stopped Spark web UI at http://node73:4040\n2023-07-17 14:10:38,678 INFO cluster.YarnClientSchedulerBackend: Interrupting monitor thread\n2023-07-17 14:10:38,696 INFO cluster.YarnClientSchedulerBackend: Shutting down all executors\n2023-07-17 14:10:38,697 INFO cluster.YarnSchedulerBackend$YarnDriverEndpoint: Asking each executor to shut down\n2023-07-17 14:10:38,703 INFO cluster.YarnClientSchedulerBackend: YARN client scheduler backend Stopped\n2023-07-17 14:10:38,777 INFO spark.MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\n2023-07-17 14:10:38,789 INFO memory.MemoryStore: MemoryStore cleared\n2023-07-17 14:10:38,789 INFO storage.BlockManager: BlockManager stopped\n2023-07-17 14:10:38,810 INFO storage.BlockManagerMaster: BlockManagerMaster stopped\n2023-07-17 14:10:38,812 INFO scheduler.OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\n2023-07-17 14:10:38,818 INFO spark.SparkContext: Successfully stopped SparkContext\n2023-07-17 14:10:38,820 INFO util.ShutdownHookManager: Shutdown hook called\n2023-07-17 14:10:38,821 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-b2b4040b-04ce-403c-8a10-d1dffce37fa4\n2023-07-17 14:10:38,824 INFO util.ShutdownHookManager: Deleting directory /data/workspace/spark-3.2.3-bin-hadoop3.2/tmp/spark-0f7c40fc-1111-4eed-8e2a-77b0d7598e7c\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zabbix/","title":"Zabbix\u5e38\u7528\u914d\u7f6e","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zabbix/#zabbix-agent2","title":"\u9a8c\u8bc1zabbix-agent2\u7684\u8054\u901a\u6027","text":"Bash<pre><code>1.\u5728\u670d\u52a1\u7aef\u4e0a\u901a\u8fc7\u547d\u4ee4\uff0c\u4e3b\u52a8\u83b7\u53d6\u6570\u636e\n yum install zabbix-get -y  #yum\u5b89\u88c5zabbix\u91c7\u96c6\u670d\u52a1\n\n2.\u7528\u547d\u4ee4\u76d1\u6d4b\u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\n#\u83b7\u53d6ping\nzabbix_get -s '17.16.1.190' -p 10050 -k 'agent.ping'\n#\u83b7\u53d6\u4e3b\u673a\u540d\nzabbix_get -s '17.16.1.190' -p 10050 -k 'system.hostname'\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zabbix/#_1","title":"\u89e3\u51b3\u56fe\u5f62\u5b57\u4f53\u4e71\u7801\u95ee\u9898","text":"<p>Bash<pre><code>1.\u5b89\u88c5\u5b57\u4f53\n    yum -y install wqy-microhei-fonts\n\n2.\u590d\u5236\u5b57\u4f53\n\\cp /usr/share/fonts/wqymicrohei/wqy-microhei.ttc /usr/share/fonts/dejavu/DejaVuSans.ttf\n\n#\u5931\u8d25\u4e86\uff0c\u4f7f\u7528\u4e0b\u9762\u535a\u5ba2\u7684\u65b9\u6cd5\n https://blog.csdn.net/sehn_/article/details/107455885\n</code></pre> Bash<pre><code># \u786e\u8ba4zabbix-agent2\u670d\u52a1\u6b63\u786e\u8fd0\u884c\nsystemctl is-active zabbix-agent2.service\n\nsystemctl restart zabbix-agent2\n\ngrep -Ev '^#|^$' /etc/zabbix/zabbix_agent2.conf   #\u8fc7\u6ee4\uff0c\u53bb\u6389#\u548c\u7a7a\u683c\u7684\u884c\n\n\n1.\u670d\u52a1\u7aef\ntail -f /var/log/zabbix/zabbix_server.log\n\n2.\u5ba2\u6237\u7aef\ntail -f /var/log/zabbix/zabbix_agent2.log\n\n\nzcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix\n\n# \u67e5\u770b\u76d1\u63a7\u7aef\u53e3\nnetstat -lntup\n</code></pre></p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/","title":"Zookeeper\u5b89\u88c5\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#zookeeper","title":"Zookeeper\u73af\u5883\u90e8\u7f72","text":"<p>Zookeeper\u4f5c\u4e3a\u5206\u5e03\u5f0f\u534f\u8c03\u7ec4\u4ef6\u4e3b\u8981\u627f\u8f7d\u76f8\u5173\u5927\u6570\u636e\u7ec4\u4ef6\u7684\u9ad8\u53ef\u7528\u4fdd\u969c\uff0c\u5f53\u524d\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u67d0\u8282\u70b9\u670d\u52a1\u56e0\u6545\u969c\u9000\u51fa\u65f6\u80fd\u591f\u5b9e\u73b0\u5feb\u901f\u5207\u6362\u3002\u672c\u7cfb\u7edf\u4e3b\u8981\u7528\u4e8e\u652f\u6491Yarn\u3001Kakfa\u3001Spark\u4ee5\u53caFlink\u670d\u52a1\u7684\u8fd0\u884c\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#_1","title":"\u90e8\u7f72\u8bf4\u660e","text":"<ul> <li>192.168.21.73 -&gt; node73</li> <li>192.168.21.74 -&gt; node74</li> <li>192.168.21.75 -&gt; node75</li> </ul> \u4e8b\u9879 \u8be6\u60c5 \u90e8\u7f72\u8282\u70b9 192.168.21.73-192.168.21.75 \u5b89\u88c5\u5305\u4f4d\u7f6e /data/software/apache-zookeeper-3.6.3-bin.tar.gz \u8fd0\u884c\u76ee\u5f55 /data/workspace/apache-zookeeper-3.6.3-bin \u6570\u636e\u5b58\u50a8\u76ee\u5f55 /data/workspace/apache-zookeeper-3.6.3-bin/snapshot \u542f\u505c\u72b6\u6001\u7ef4\u62a4\u811a\u672c /data/workspace/apache-zookeeper-3.6.3-bin/bin/zkServerX.sh","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#zookeeper_1","title":"Zookeeper\u90e8\u7f72","text":"","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step1","title":"step1: \u89e3\u538b\u6587\u4ef6\u5230\u6307\u5b9a\u76ee\u5f55","text":"Bash<pre><code>sudo tar -zxvf /data/software/apache-zookeeper-3.6.3-bin.tar.gz -C /data/workspace\n</code></pre> Text Only<pre><code>sudo chown -R demouser:demouser /data/workspace/apache-zookeeper-3.6.3-bin\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step2","title":"step2: \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>vim ~/.bashrc\n</code></pre> <p>\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a</p> Bash<pre><code># Zookeeper\nexport ZK_HOME=/data/workspace/apache-zookeeper-3.6.3-bin\nexport PATH=$PATH:$ZK_HOME/bin\n</code></pre> <p>\u751f\u6548\u914d\u7f6e\uff1a</p> Bash<pre><code>source ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step3-zoocfg","title":"step3: \u914d\u7f6e zoo.cfg\u6587\u4ef6","text":"Bash<pre><code>cp $ZK_HOME/conf/zoo_sample.cfg $ZK_HOME/conf/zoo.cfg\nvim $ZK_HOME/conf/zoo.cfg\n</code></pre> Bash<pre><code># The number of milliseconds of each tick\ntickTime=2000\n# The number of ticks that the initial \n# synchronization phase can take\ninitLimit=60\n# The number of ticks that can pass between \n# sending a request and getting an acknowledgement\nsyncLimit=10\n# the directory where the snapshot is stored.\n# do not use /tmp for storage, /tmp here is just \n# example sakes.\ndataDir=/data/workspace/apache-zookeeper-3.6.3-bin/snapshot\ndataLogDir=/data/workspace/apache-zookeeper-3.6.3-bin/transaction\n# the port at which the clients will connect\nclientPort=2181\n# the maximum number of client connections.\n# increase this if you need to handle more clients\nmaxClientCnxns=120\nmaxSessionTimeout=120000\nminSessionTimeout=4000\ncnxTimeout=30000\n#\n# Be sure to read the maintenance section of the \n# administrator guide before turning on autopurge.\n#\n# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance\n#\n# The number of snapshots to retain in dataDir\nautopurge.snapRetainCount=16\n# Purge task interval in hours\n# Set to \"0\" to disable auto purge feature\nautopurge.purgeInterval=24\nsnapCount=409600\npreAllocSize=65536\n\n## Metrics Providers\n#\n# https://prometheus.io Metrics Exporter\n#metricsProvider.className=org.apache.zookeeper.metrics.prometheus.PrometheusMetricsProvider\n#metricsProvider.httpPort=7000\n#metricsProvider.exportJvmInfo=true\n\nserver.1=node73:2888:3888\nserver.2=node74:2888:3888\nserver.3=node75:2888:3888\n\n4lw.commands.whitelist=*\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step4-jvm","title":"step4: \u4f18\u5316JVM\u53c2\u6570","text":"Bash<pre><code>&gt; vim $ZK_HOME/conf/java.env\n\nexport JAVA_HOME=/data/workspace/jdk1.8.0_201\nexport JVMFLAGS=\"-Xms2048m -Xmx2048m $JVMFLAGS\"\n</code></pre> <p>\u4fee\u6539\u5b8c\u6210\u4f7f\u7528jmap -heap $pid\u6765\u9a8c\u8bc1\u5185\u5b58\u4fee\u6539\u60c5\u51b5\u3002</p>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step5","title":"step5: \u4fee\u6539\u65e5\u5fd7\u5b58\u50a8","text":"Bash<pre><code>&gt; vim $ZK_HOME/bin/zkEnv.sh\n\nif [ \"x${ZOO_LOG_DIR}\" = \"x\" ]\nthen\n    # ZOO_LOG_DIR=\"$ZOOKEEPER_PREFIX/logs\"\n    ZOO_LOG_DIR=\"/data/workspace/apache-zookeeper-3.6.3-bin/log\"\nfi\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step6-pid","title":"step6: \u9501\u5b9apid\u6587\u4ef6","text":"Bash<pre><code>&gt; vim $ZK_HOME/bin/zkServer.sh\n\nif [ -z \"$ZOOPIDFILE\" ]; then\n    if [ ! -d \"$ZOO_DATADIR\" ]; then\n        mkdir -p \"$ZOO_DATADIR\"\n    fi\n    # ZOOPIDFILE=\"$ZOO_DATADIR/zookeeper_server.pid\"\n    ZOOPIDFILE=\"/data/workspace/apache-zookeeper-3.6.3-bin/pid/zookeeper_server.pid\"\nelse\n    # ensure it exists, otw stop will fail\n    mkdir -p \"$(dirname \"$ZOOPIDFILE\")\"\nfi\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step7","title":"step7: \u591a\u4e2a\u8282\u70b9\u5206\u522b\u521b\u5efa\u6570\u636e\u5b58\u50a8\u8def\u5f84","text":"Bash<pre><code>sudo mkdir -p /data/workspace/apache-zookeeper-3.6.3-bin/snapshot\nsudo mkdir -p /data/workspace/apache-zookeeper-3.6.3-bin/transaction\nsudo mkdir -p /data/workspace/apache-zookeeper-3.6.3-bin/log\nsudo mkdir -p /data/workspace/apache-zookeeper-3.6.3-bin/pid\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step8-zookeeper","title":"step8: \u5c06zookeeper\u8ddf\u76ee\u5f55\u5206\u53d1\u81f3\u5404\u670d\u52a1\u5668\u8282\u70b9","text":"Bash<pre><code>sudo scp -r /data/workspace/apache-zookeeper-3.6.3-bin root@node74:/data/workspace/\nsudo scp -r /data/workspace/apache-zookeeper-3.6.3-bin root@node75:/data/workspace/\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u4fee\u6539apache-zookeeper-3.6.3-bin\u6240\u5c5e\u7528\u6237\u7ec4\u548c\u6240\u5c5e\u7528\u6237\nsudo chown -R zhongche:zhongche /data/workspace/apache-zookeeper-3.6.3-bin\n\n# \u5206\u522b\u8fdb\u5165node74\u3001node75\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\n\nvim ~/.bashrc\n\n\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\n\nexport ZK_HOME=/data/workspace/apache-zookeeper-3.6.3-bin\nexport PATH=$PATH:$ZK_HOME/bin\n\n\u751f\u6548\u914d\u7f6e\uff1a\n\nsource ~/.bashrc\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step9-myidid","title":"step9: \u5728\u6570\u636e\u5b58\u50a8\u76ee\u5f55\u4e0b\u914d\u7f6emyid\u6587\u4ef6\u5e76\u8bbe\u7f6eid\uff0c\u521b\u5efa\u6570\u636e\u5b58\u50a8\u76ee\u5f55\uff1a","text":"Bash<pre><code># \u5728node73\u4e0b\u6267\u884c\necho 1 &gt; /data/workspace/apache-zookeeper-3.6.3-bin/snapshot/myid\n# \u5728node74\u4e0b\u6267\u884c\necho 2 &gt; /data/workspace/apache-zookeeper-3.6.3-bin/snapshot/myid\n# \u5728node75\u4e0b\u6267\u884c\necho 3 &gt; /data/workspace/apache-zookeeper-3.6.3-bin/snapshot/myid\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step10","title":"step10: \u901a\u8fc7\u5982\u4e0b\u6307\u4ee4\u542f\u52a8\u670d\u52a1","text":"Bash<pre><code>$ZK_HOME/bin/zkServer.sh start\n</code></pre> <p>\u5b8c\u6bd5\u4e4b\u540e\u901a\u8fc7jps\u67e5\u770b\u5230zk\u8fdb\u7a0b\u4e3aQuorumPeerMain\u3002</p> <p>\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u9a8c\u8bc1zk\u7aef\u53e3\u662f\u5426\u5b58\u5728\uff1a</p> Bash<pre><code>netstat -ntlp | grep 2181\n</code></pre> <p>\u67e5\u770bzk\u8282\u70b9\u72b6\u6001\u4e3aleader\u6216\u8005follower\u4ee3\u8868\u6210\u529f\u3002</p> Bash<pre><code>$ZK_HOME/bin/zkServer.sh status\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/dev_software/zookeeper/#step11-zk","title":"step11: \u4e3a\u4e86\u65b9\u4fbf\u5728\u4e00\u53f0\u8282\u70b9\u4e0a\u540c\u65f6\u542f\u505c\u7ba1\u7406zk\u8282\u70b9\uff0c\u53ef\u4ee5\u6269\u5c55\u5982\u4e0b\u811a\u672c\uff1a","text":"<p>\u7f16\u5199\u8282\u70b9\u5217\u8868\u914d\u7f6e\u6587\u4ef6\uff1a</p> Bash<pre><code>&gt; vim $ZK_HOME/conf/nodes\n\nnode73\nnode74\nnode75\n</code></pre> <p>\u7f16\u5199\u6269\u5c55\u811a\u672c\uff1a</p> Bash<pre><code>&gt; vim $ZK_HOME/bin/zkServerX.sh\n\n#!/bin/bash\n\nfor node in `cat $ZK_HOME/conf/nodes`\ndo\n  echo \"********************************\" [ $node ] \"************************************\"\n  ssh $node $ZK_HOME/bin/zkServer.sh $1\n  echo \"*******************************************************************************\"\ndone\n</code></pre> Bash<pre><code>chmod u+x $ZK_HOME/bin/zkServerX.sh\n</code></pre> <p>11.\u8fd0\u7ef4\u547d\u4ee4</p> <p>\uff081\uff09\u542f\u52a8zookeeper\u670d\u52a1\u3002</p> Bash<pre><code>${ZK_HOME}/bin/zkServerX.sh start\n</code></pre> <p>\uff082\uff09\u67e5\u770bzookeeper\u670d\u52a1\u72b6\u6001\u3002</p> Bash<pre><code>${ZK_HOME}/bin/zkServerX.sh status\n</code></pre> <p>\uff083\uff09\u505c\u6b62zookeeper\u670d\u52a1\u3002</p> Bash<pre><code>${ZK_HOME}/bin/zkServerX.sh stop\n</code></pre> <p>\uff084\uff09\u91cd\u542fzookeeper\u670d\u52a1\u3002</p> Bash<pre><code>${ZK_HOME}/bin/zkServerX.sh restart\n</code></pre>","tags":["SoftwareInstall"]},{"location":"toolbox/git/git_common_install/","title":"git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#lfs","title":"lfs\u5b89\u88c5\uff1a","text":"<p>\u652f\u6301\u5927\u6587\u4ef6\u63d0\u4ea4</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#1","title":"1\u3001\u5b89\u88c5","text":"Text Only<pre><code>yum install git-lfs\napt install git-lfs\ngit lfs install\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#2","title":"2\u3001\u6807\u8bb0\u5927\u6587\u4ef6","text":"Text Only<pre><code>git lfs track kernel_resource/4.19.37-rt19.arm64.gz\ngit lfs track *.gz\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#3","title":"3\u3001\u63a8\u9001","text":"Text Only<pre><code>git add my.gz\n git commit -m \"add gz file\"\n git push origin master\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#4","title":"4\u3001\u67e5\u770b","text":"Text Only<pre><code>git lfs track\ngit lfs ls-files\nvim .gitattributes\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#gitlab","title":"gitlab\u5b89\u88c5\u4e0e\u914d\u7f6e","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#1gitlab","title":"1\u3001\u62c9\u53d6gitlab\u5bb9\u5668\u955c\u50cf","text":"Text Only<pre><code>docker pull gitlab/gitlab-runner:latest\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#2gitlab","title":"2\u3001\u8fd0\u884cgitlab","text":"Text Only<pre><code>docker run -d --name gitlab-runner --restart always \\\n  -v /srv/gitlab-runner/config:/etc/gitlab-runner \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  gitlab/gitlab-runner:latest\nmkdir -p /home/hl/gitlabrunner/DeltaOS/opt /home/hl/gitlabrunner/DeltaOS/builds\ndocker run -d --name deltaos-gitlab-runner --restart always \\\n  --privileged=true \\\n  -v /home/hl/gitlabrunner/DeltaOS/opt:/opt \\\n  -v /home/hl/gitlabrunner/DeltaOS/builds:/home/gitlab-runner/builds \\\n  gitlab/gitlab-runner:latest\ndocker exec deltaos-gitlab-runner gitlab-runner register \\\n --non-interactive \\\n --name my-runner \\\n --url http://192.168.1.1:8000/ \\\n --registration-token sDrr7KDi6UXyzwuzPqx- \\\n --executor shell \\\n --tag-list \\\n common-runner\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#3_1","title":"3\u3001\u5bb9\u5668\u5185","text":"Text Only<pre><code>mknod -m 0660 /dev/loop1 b 7 1\necho \"192.168.21.8 gitlab.tmp.com\" |tee &gt;&gt; /etc/hosts\n#\u6dfb\u52a0root\u6743\u9650\nsed -i 's/gitlab-runner:x:999:999/gitlab-runner:x:0:0/g' /etc/passwd\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#4gitlab-ci","title":"4\u3001\u7f16\u8f91gitlab-ci","text":"Text Only<pre><code>vim .gitlab-ci.yml\nstages:\n  - deploy\ndeploy:\n    stage: deploy\n    script:\n      - bash /opt/deploy.sh\n    only:\n      - master\n    tags:\n      - common-runner\nwhen \u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4ee5\u4e0b\u503c\u4e4b\u4e00\uff1a\non_success - \u53ea\u6709\u5f53\u524d\u4e00\u4e2a\u9636\u6bb5\u7684\u6240\u6709\u5de5\u4f5c\u6210\u529f\u65f6\u624d\u6267\u884c\u5de5\u4f5c\u3002\u8fd9\u662f\u9ed8\u8ba4\u503c\u3002\non_failure - \u4ec5\u5f53\u524d\u4e00\u4e2a\u9636\u6bb5\u7684\u81f3\u5c11\u4e00\u4e2a\u4f5c\u4e1a\u53d1\u751f\u6545\u969c\u65f6\u624d\u6267\u884c\u4f5c\u4e1a\u3002\nalways - \u65e0\u8bba\u524d\u4e00\u9636\u6bb5\u7684\u5de5\u4f5c\u72b6\u51b5\u5982\u4f55\uff0c\u6267\u884c\u5de5\u4f5c\u3002\nmanual - \u624b\u52a8\u6267\u884c\u4f5c\u4e1a\nstages:\n - build\n - test\n - deploy\n\u9996\u5148\uff0c\u6240\u6709build\u7684jobs\u90fd\u662f\u5e76\u884c\u6267\u884c\u7684\u3002\n\u6240\u6709build\u7684jobs\u6267\u884c\u6210\u529f\u540e\uff0ctest\u7684jobs\u624d\u4f1a\u5f00\u59cb\u5e76\u884c\u6267\u884c\u3002\n\u6240\u6709test\u7684jobs\u6267\u884c\u6210\u529f\uff0cdeploy\u7684jobs\u624d\u4f1a\u5f00\u59cb\u5e76\u884c\u6267\u884c\u3002\n\u6240\u6709\u7684deploy\u7684jobs\u6267\u884c\u6210\u529f\uff0ccommit\u624d\u4f1a\u6807\u8bb0\u4e3asuccess\n\u4efb\u4f55\u4e00\u4e2a\u524d\u7f6e\u7684jobs\u5931\u8d25\u4e86\uff0ccommit\u4f1a\u6807\u8bb0\u4e3afailed\u5e76\u4e14\u4e0b\u4e00\u4e2astages\u7684jobs\u90fd\u4e0d\u4f1a\u6267\u884c\u3002\n\u6709\u65f6\uff0cscript\u547d\u4ee4\u9700\u8981\u7528\u5355\u5f15\u53f7\u6216\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\u3002\u4f8b\u5982\uff0c\u5305\u542b\u5192\u53f7\uff08:\uff09\u7684\u547d\u4ee4\u9700\u8981\u7528\u5f15\u53f7\u62ec\u8d77\u6765\uff0c\u4ee5\u4fbfYAML\u89e3\u6790\u5668\u77e5\u9053\u5c06\u6574\u4e2a\u4e8b\u7269\u89e3\u91ca\u4e3a\u5b57\u7b26\u4e32\u800c\u4e0d\u662f\u201ckey\uff1avalue\u201d\u5bf9\u3002\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u65f6\u8981\u5c0f\u5fc3\uff1a:\uff0c{\uff0c}\uff0c[\uff0c]\uff0c,\uff0c&amp;\uff0c*\uff0c#\uff0c?\uff0c|\uff0c-\uff0c&lt;\uff0c&gt;\uff0c=\uff0c!\uff0c%\uff0c@\uff0c`\u3002\n\u4f8b\u5982\uff1a\nstages:\n- build\n- cleanup_build\n- test\n- deploy\n- cleanup\nbuild_job:\n  stage: build\n  script:\n  - make build\ncleanup_build_job:\n  stage: cleanup_build\n  script:\n  - cleanup build when failed\n  when: on_failure\ntest_job:\n  stage: test\n  script:\n  - make test\ndeploy_job:\n  stage: deploy\n  script:\n  - make deploy\n  when: manual\ncleanup_job:\n  stage: cleanup\n  script:\n  - cleanup after jobs\n  when: always\n\u4ee5\u4e0a\u811a\u672c\u5c06\uff1a\ncleanup_build_job\u4ec5\u5728build_job\u5931\u8d25\u65f6\u6267\u884c\u3002\n\u59cb\u7ec8\u6267\u884ccleanup_job\u4f5c\u4e3a\u6d41\u6c34\u7ebf\u7684\u6700\u540e\u4e00\u6b65\uff0c\u65e0\u8bba\u6210\u529f\u6216\u5931\u8d25\u3002\n\u5141\u8bb8\u60a8deploy_job\u4eceGitLab\u7684UI \u624b\u52a8\u6267\u884c\u3002\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#5urltoken","title":"5\u3001\u754c\u9762\u67e5\u627eurl\u548ctoken","text":"Text Only<pre><code>Settings \u2014&gt; Pipelines \u2014&gt; Specific Runners\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#6","title":"6\u3001\u6ce8\u518c","text":"Text Only<pre><code>gitlab-runner register --non-interactive --name my-runner --url http://192.168.21.8:8000/ --registration-token Kgu3z28pqfZEZsBmquUh --executor shell --tag-list common-runner\nvim /etc/passwd\ngitlab-runner:x:0:0:GitLab Runner:/home/gitlab-runner:/bin/bash\n#\u624b\u52a8\u6ce8\u518c\ndocker exec -it gitlab-runner gitlab-ci-multi-runner register\n#\u5f15\u5bfc\u4f1a\u8ba9\u4f60\u8f93\u5165gitlab\u7684url\uff0c\u8f93\u5165\u81ea\u5df1\u7684url\uff0c\u4f8b\u5982http://gitlab.example.com/\n#\u5f15\u5bfc\u4f1a\u8ba9\u4f60\u8f93\u5165token\uff0c\u53bb\u76f8\u5e94\u7684\u9879\u76ee\u4e0b\u627e\u5230token\uff0c\u4f8b\u5982ase12c235qazd32\n#\u5f15\u5bfc\u4f1a\u8ba9\u4f60\u8f93\u5165tag\uff0c\u4e00\u4e2a\u9879\u76ee\u53ef\u80fd\u6709\u591a\u4e2arunner\uff0c\u662f\u6839\u636etag\u6765\u533a\u522brunner\u7684\uff0c\u8f93\u5165\u82e5\u5e72\u4e2a\u5c31\u597d\u4e86\uff0c\u6bd4\u5982web,hook,deploy\n#\u5f15\u5bfc\u4f1a\u8ba9\u4f60\u8f93\u5165executor\uff0c\u8fd9\u4e2a\u662f\u8981\u7528\u4ec0\u4e48\u65b9\u5f0f\u6765\u6267\u884c\u811a\u672c\uff0c\u56fe\u65b9\u4fbf\u8f93\u5165shell\u5c31\u597d\u4e86\u3002\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#7gitlab-runner","title":"7\u3001\u67e5\u770bgitlab-runner","text":"Text Only<pre><code>gitlab-runner list\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#8","title":"8\u3001\u5bbf\u4e3b\u673a\u5b89\u88c5","text":"Text Only<pre><code>yum \u5b89\u88c5\ncurl -L https://packages.gitlab.com/install/repositories/runner/gitlab-ci-multi-runner/script.rpm.sh | bash\nyum install -y gitlab-ci-multi-runner\necho '[gitlab-ci-multi-runner]\nname=gitlab-ci-multi-runner\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/gitlab-ci-multi-runner/yum/el7\nrepo_gpgcheck=0\ngpgcheck=0\nenabled=1\ngpgkey=https://packages.gitlab.com/gpg.key' |tee &gt;&gt; /etc/yum.repos.d/gitlab-ci-multi-runner.repo\nyum makecache\nyum install -y gitlab-ci-multi-runner\n#\u8bbe\u7f6egitlab-runner root\u6743\u9650\ngitlab-runner:x:0:0:GitLab Runner:/home/gitlab-runner:/bin/bash\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#9","title":"9\u3001\u5176\u4ed6","text":"Text Only<pre><code>jenkins\nhttp://blog.csdn.net/abcdocker/article/details/53840629\nhttps://docs.gitlab.com/ee/ci/yaml/README.html\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_common_install/#_1","title":"git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/","title":"git\u5b9e\u7528\u914d\u7f6e","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_1","title":"\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e\uff1a","text":"<ul> <li>/etc/gitconfig \u6587\u4ef6\uff1a </li> <li>\u7cfb\u7edf\u4e2d\u5bf9\u6240\u6709\u7528\u6237\u90fd\u666e\u904d\u9002\u7528\u7684\u914d\u7f6e\u3002</li> <li>\u82e5\u4f7f\u7528 git config \u65f6\u7528 --system \u9009\u9879\uff0c\u8bfb\u5199\u7684\u5c31\u662f\u8fd9\u4e2a\u6587\u4ef6\u3002</li> <li>~/.gitconfig \u6587\u4ef6\uff1a</li> <li>\u7528\u6237\u76ee\u5f55\u4e0b\u7684\u914d\u7f6e\u6587\u4ef6\u53ea\u9002\u7528\u4e8e\u8be5\u7528\u6237\u3002</li> <li>\u82e5\u4f7f\u7528 git config \u65f6\u7528 --global \u9009\u9879\uff0c\u8bfb\u5199\u7684\u5c31\u662f\u8fd9\u4e2a\u6587\u4ef6\u3002</li> <li>.git/config</li> <li>\u5f53\u524d\u9879\u76ee\u7684 Git \u76ee\u5f55\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\uff08\u4e5f\u5c31\u662f\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684 .git/config \u6587\u4ef6\uff09\uff1a\u8fd9\u91cc\u7684\u914d\u7f6e\u4ec5\u4ec5\u9488\u5bf9\u5f53\u524d\u9879\u76ee\u6709\u6548\u3002</li> <li>\u6bcf\u4e00\u4e2a\u7ea7\u522b\u7684\u914d\u7f6e\u90fd\u4f1a\u8986\u76d6\u4e0a\u5c42\u7684\u76f8\u540c\u914d\u7f6e\uff0c\u6240\u4ee5 .git/config \u91cc\u7684\u914d\u7f6e\u4f1a\u8986\u76d6 /etc/gitconfig \u4e2d\u7684\u540c\u540d\u53d8\u91cf\u3002</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_2","title":"\u914d\u7f6e\u793a\u4f8b","text":"Bash<pre><code>git config --local http.postBuffer 524288000\ngit config --global http.lowSpeedLimit 0\ngit config --global http.lowSpeedTime 999999\ngit config --global user.name \"hl\"\ngit config --global core.editor vim\ngit config --global merge.tool vimdiff\ngit config --list\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_3","title":"\u914d\u7f6e\u5bc6\u7801\uff1a","text":"Bash<pre><code>#\u8bbe\u7f6e\u8bb0\u4f4f\u5bc6\u7801\uff08\u9ed8\u8ba415\u5206\u949f\uff09\uff1a\ngit config --global credential.helper cache\n\n#\u6c38\u4e45\ngit config --global credential.helper store\n\n#\u5982\u679c\u60f3\u81ea\u5df1\u8bbe\u7f6e\u65f6\u95f4\uff0c\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a\ngit config credential.helper 'cache --timeout=3600'\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#git","title":"git\u8bbe\u7f6e\u4ee3\u7406","text":"<ul> <li>\u8bbe\u7f6e</li> </ul> Bash<pre><code>git config --global http.proxy http://127.0.0.1:4780\ngit config --global https.proxy https://127.0.0.1:4780\n</code></pre> <ul> <li>\u53d6\u6d88\u8bbe\u7f6e</li> </ul> Bash<pre><code>git config --global --unset http.proxy\ngit config --global --unset https.proxy\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#git-ssh","title":"git \u914d\u7f6essh","text":"<p>centos\u7cfb\u7edf</p> <ol> <li>\u914d\u7f6e\u5e10\u6237\u548c\u5bc6\u7801</li> </ol> Bash<pre><code>git config --global user.name \"Your Name\"\ngit config --global user.email \"email@example.com\"\n</code></pre> <ol> <li>\u67e5\u770b\u914d\u7f6e\u662f\u5426\u751f\u6548</li> </ol> Bash<pre><code>git config --list\n</code></pre> <ol> <li>\u5728\u672c\u5730\u751f\u6210ssh key\uff0c\u751f\u6210\u516c\u94a5\u548c\u79c1\u94a5</li> </ol> Bash<pre><code>ssh-keygen -t rsa -C \"your_email@youremail.com\"\n</code></pre> <ol> <li>\u786e\u8ba4\u8def\u5f84\u63091\u6b21\u56de\u8f66\uff0c\u63d0\u793a\uff1aEnter passphrase\uff08\u8f93\u5165\u5bc6\u7801\uff09\uff0c\u4e0d\u7528\u8f93\u5bc6\u7801\u518d\u63092\u6b21\u56de\u8f66\u5373\u53ef\u3002\u751f\u6210\u7684\u5bc6\u94a5\u5b58\u653e\u8def\u5f84 /root/.ssh/id_rsa, id_rsa\uff1a\u79c1\u94a5 \uff0cid_rsa.pub\uff1a\u516c\u94a5</li> </ol> Bash<pre><code>cat /root/.ssh/id_rsa.pub\n</code></pre> <ol> <li>gitlab\u4e0asetting\u4e2d\u7684 New SSH Key\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684ssh key(\u590d\u5236\u521a\u624d\u751f\u6210\u7684id_rsa.pub\u516c\u94a5)</li> </ol>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#git_1","title":"git\u8bbf\u95ee\u52a0\u901f\u914d\u7f6e","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#github-mirror","title":"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528github Mirror \u4e0b\u8f7d","text":"<p>\u76f4\u63a5\u5728 GitHub \u4ed3\u5e93\u524d\u9762\u62fc\u63a5 Proxy \u5730\u5740\uff0c\u4e0d\u540c\u7684 Mirror \u62fc\u63a5\u65b9\u5f0f\u53ef\u80fd\u6709\u6240\u4e0d\u540c</p> <ul> <li>https://mirror.ghproxy.com</li> </ul> Bash<pre><code>$ git clone https://mirror.ghproxy.com/https://github.com/shaowenchen/scripts\n</code></pre> <ul> <li>https://github.com.cnpmjs.org</li> </ul> Bash<pre><code>git clone https://github.com.cnpmjs.org/shaowenchen/scripts \n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#gitee-github","title":"\u65b9\u5f0f\u4e8c\uff1a\u901a\u8fc7gitee \u5bfc\u5165github\u9879\u76ee","text":"<p>\u53ef\u4ee5\u53c2\u8003\u6587\u6863: GitHub\u4ed3\u5e93\u5feb\u901f\u5bfc\u5165Gitee\u53ca\u540c\u6b65\u66f4\u65b0, \u5c06 GitHub \u4ed3\u5e93\u5bfc\u5165 Gitee\u3002\u7136\u540e\u4f7f\u7528 Gitee \u7684\u5730\u5740\u62c9\u53d6\u4ee3\u7801\u3002</p> <p>\u6587\u6863\u94fe\u63a5\uff1ahttps://gitee.com/help/articles/4284</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#github-host","title":"\u65b9\u5f0f\u4e09\uff1a\u914d\u7f6egithub host\u5730\u5740","text":"<p>\u6253\u5f00 https://www.ipaddress.com/ \u67e5\u8be2 github.com \u7684 IP \u5730\u5740 \u7f16\u8f91\u672c\u5730 /etc/hosts \u6587\u4ef6\uff0c\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9:</p> Bash<pre><code>140.82.112.4 github.com\n</code></pre> <p>\u6216\u8005\u76f4\u63a5\u4f7f\u7528\u5f00\u6e90\u9879\u76ee GitHub520 \u83b7\u53d6\u6700\u65b0\u7684 IP \u5730\u5740\u3002</p> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/521xueweihan/GitHub520</p> <p>\u63a5\u7740\u5c31\u53ef\u4ee5\u62c9\u53d6\u4ee3\u7801\u4e86\uff0c\u4f46\u662f\u901f\u5ea6\u5e76\u4e0d\u4f1a\u5f88\u5feb\uff0c\u56e0\u4e3a Github \u7528\u7684\u662f\u7f8e\u56fd IP\u3002</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_4","title":"\u65b9\u5f0f\u56db\uff1a\u914d\u7f6e\u547d\u4ee4\u884c\u4ee3\u7406","text":"<p>\u5982\u679c\u6709\u53ef\u7528\u7684\u4ee3\u7406\u670d\u52a1\uff0c\u90a3\u4e48\u5728\u672c\u5730 Terminal \u4e2d\u914d\u7f6e\u4ee3\u7406\u5373\u53ef\u3002</p> Bash<pre><code># Proxy\nfunction proxy_off(){\n    unset http_proxy\n    unset HTTP_PROXY\n    unset https_proxy\n    unset HTTPS_PROXY\n    echo -e \"\u5df2\u5173\u95ed\u4ee3\u7406\"\n}\nfunction proxy_on(){\n    export http_proxy=\"http://127.0.0.1:1087\";\n    export HTTP_PROXY=\"http://127.0.0.1:1087\";\n    export https_proxy=\"http://127.0.0.1:1087\";\n    export HTTPS_PROXY=\"http://127.0.0.1:1087\";\n    echo -e \"\u5df2\u5f00\u542f\u4ee3\u7406\"\n}\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#gitssh","title":"git\u540c\u65f6\u914d\u7f6e\u591a\u4e2a\u5e73\u53f0\u7684SSH","text":"<p>reference: https://github.com/mr-dragon/day-day-up/blob/master/z-archive/document/configure-gitlab-github-gitee-development-environment.md</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#_5","title":"\u524d\u7f6e\u51c6\u5907\uff1a","text":"<ul> <li>\u786e\u4fdd git \u5df2\u7ecf\u5b89\u88c5</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#1-git","title":"1\u3001\u6e05\u9664 git \u7684\u5168\u5c40\u8bbe\u7f6e","text":"<ul> <li>\u786e\u8ba4\u5f53\u524d\u73af\u5883\u662f\u5426\u5df2\u7ecf\u914d\u7f6e\u4e86 git \u8d26\u53f7\u4fe1\u606f\uff0c\u82e5\u6709\u5219\u5148\u6e05\u9664</li> </ul> Bash<pre><code>git config --global --list\n\ngit config --global --unset user.name \"\u4f60\u7684\u540d\u5b57\"\ngit config --global --unset user.email \"\u4f60\u7684\u90ae\u7bb1\"\n\ngit config --global --unset user.name \"sswang\"\ngit config --global --unset user.email \"sswang@jshcbd.cn\"\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#2-ssh-key","title":"2\u3001\u751f\u6210\u65b0\u7684 SSH KEY","text":"<ul> <li>Linux &amp; MacOS  \u73af\u5883</li> </ul> Bash<pre><code># github ssh keys\n# linux or mac\nssh-keygen -t rsa -f ~/.ssh/id_rsa.github -C \"sswss@aliyun.com\"\n\n# gitee\n# linux or mac\nssh-keygen -t rsa -f ~/.ssh/id_rsa.gitee -C \"sswss@aliyun.com\"\n\n# gitlab \n# linux or mac\nssh-keygen -t rsa -f ~/.ssh/id_rsa.gitlab -C \"sswang@jshcbd.cn\"\n</code></pre> <ul> <li>\u5b8c\u6210\u540e\u4f1a\u5728~/.ssh / \u76ee\u5f55\u4e0b\u751f\u6210\u4ee5\u4e0b\u6587\u4ef6</li> </ul> Bash<pre><code>id_rsa.github\nid_rsa.github.pub\nid_rsa.gitlab\nid_rsa.gitlab.pub\nid_rsa.gitee\nid_rsa.gitee.pub\n</code></pre> <ul> <li>win</li> </ul> Bash<pre><code># github ssh keys\nssh-keygen -t rsa -f C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github -C \"sswss@aliyun.com\"\n\n# gitee\nssh-keygen -t rsa -f C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitee -C \"sswss@aliyun.com\"\n\n# gitlab \nssh-keygen -t rsa -f C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab -C \"sswang@jshcbd.cn\"\n</code></pre> <ul> <li>\u5b8c\u6210\u540e\u4f1a\u5728C:\\Users\\jhc142.JSHCBD.ssh\u76ee\u5f55\u4e0b\u751f\u6210\u4ee5\u4e0b\u6587\u4ef6</li> </ul> Bash<pre><code>id_rsa.github\nid_rsa.github.pub\nid_rsa.gitlab\nid_rsa.gitlab.pub\nid_rsa.gitee\nid_rsa.gitee.pub\n</code></pre> Bash<pre><code>ssh-agent bash\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitee\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#3-ssh-keys","title":"3\u3001\u6dfb\u52a0\u8bc6\u522b SSH keys \u65b0\u7684\u79c1\u94a5","text":"<ul> <li>Linux &amp; MacOS</li> </ul> Bash<pre><code>ssh-agent bash\nssh-add ~/.ssh/id_rsa.github\nssh-add ~/.ssh/id_rsa.gitlab\nssh-add ~/.ssh/id_rsa.gitee\n</code></pre> <ul> <li>win</li> <li>\u9700\u8981\u786e\u8ba4\u5f00\u542f ssh-agent</li> </ul> <p>\u5f00\u542f\u65b9\u6cd5\uff1a Fix Error unable to start ssh-agent service, error: 1058(xxxx)</p> <ol> <li>win + R, Go To services.msc</li> <li>Find And Check Is OpenSSH Authentication Agent Service Running</li> </ol> Bash<pre><code> ssh-agent bash\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\nssh-add C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitee\n</code></pre> <p>\u5728.ssh \u76ee\u5f55\u4e0b\u521b\u5efa config \u6587\u4ef6</p> <ul> <li>Linux &amp; MacOS</li> </ul> Bash<pre><code>#Default gitHub user Self\nHost github.com\n    HostName github.com\n    User git #\u9ed8\u8ba4\u5c31\u662fgit\uff0c\u53ef\u4ee5\u4e0d\u5199\n    IdentityFile ~/.ssh/id_rsa.github\n\n#Add gitLab user \n    Host git@gitlab.com\n    HostName gitlab.com\n    User git\n    IdentityFile ~/.ssh/id_rsa.gitlab\n\n# gitee\nHost gitee.com\n    Port 22\n    HostName gitee.com\n    User git\n    IdentityFile ~/.ssh/id_rsa.gitee\n</code></pre> <ul> <li>win</li> </ul> Bash<pre><code>#Default gitHub user Self\nHost github.com\n    HostName github.com\n    User git #\u9ed8\u8ba4\u5c31\u662fgit\uff0c\u53ef\u4ee5\u4e0d\u5199\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github\n\n#Add gitLab user \n    Host git@gitlab.com\n    HostName gitlab.com\n    User git\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\n\n# gitee\nHost gitee.com\n    Port 22\n    HostName gitee.com\n    User git\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\n</code></pre> Bash<pre><code>#Default gitHub user Self\nHost github.com\n    HostName github.com\n    User git #\u9ed8\u8ba4\u5c31\u662fgit\uff0c\u53ef\u4ee5\u4e0d\u5199\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.github\n\n#Add gitLab user \n    Host jshcbd\n    HostName git.jshcbd.com.cn\n    User git\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\n\n# gitee\nHost gitee.com\n    Port 22\n    HostName gitee.com\n    User git\n    IdentityFile C:\\Users\\jhc142.JSHCBD\\.ssh\\id_rsa.gitlab\n</code></pre> <p>\u4e0b\u9762\u5bf9\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u5230\u7684\u914d\u7f6e\u5b57\u6bb5\u4fe1\u606f\u8fdb\u884c\u7b80\u5355\u89e3\u91ca\uff1a</p> <ul> <li>Host \u5b83\u6db5\u76d6\u4e86\u4e0b\u9762\u4e00\u4e2a\u6bb5\u7684\u914d\u7f6e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ed6\u6765\u66ff\u4ee3\u5c06\u8981\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740\u3002 \u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528\u4efb\u610f\u5b57\u6bb5\u6216\u901a\u914d\u7b26\u3002 \u5f53ssh\u7684\u65f6\u5019\u5982\u679c\u670d\u52a1\u5668\u5730\u5740\u80fd\u5339\u914d\u4e0a\u8fd9\u91ccHost\u6307\u5b9a\u7684\u503c\uff0c\u5219Host\u4e0b\u9762\u6307\u5b9a\u7684HostName\u5c06\u88ab\u4f5c\u4e3a\u6700\u7ec8\u7684\u670d\u52a1\u5668\u5730\u5740\u4f7f\u7528\uff0c\u5e76\u4e14\u5c06\u4f7f\u7528\u8be5Host\u5b57\u6bb5\u4e0b\u9762\u914d\u7f6e\u7684\u6240\u6709\u81ea\u5b9a\u4e49\u914d\u7f6e\u6765\u8986\u76d6\u9ed8\u8ba4\u7684/etc/ssh/ssh_config\u914d\u7f6e\u4fe1\u606f\u3002</li> <li>Port \u81ea\u5b9a\u4e49\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u4e3a22\uff0c\u53ef\u4e0d\u914d\u7f6e</li> <li>User \u81ea\u5b9a\u4e49\u7684\u7528\u6237\u540d\uff0c\u9ed8\u8ba4\u4e3agit\uff0c\u53ef\u4e0d\u914d\u7f6e</li> <li>HostName \u771f\u6b63\u8fde\u63a5\u7684\u670d\u52a1\u5668\u5730\u5740</li> <li>PreferredAuthentications \u6307\u5b9a\u4f18\u5148\u4f7f\u7528\u54ea\u79cd\u65b9\u5f0f\u9a8c\u8bc1\uff0c\u652f\u6301\u5bc6\u7801\u548c\u79d8\u94a5\u9a8c\u8bc1\u65b9\u5f0f</li> <li>IdentityFile \u6307\u5b9a\u672c\u6b21\u8fde\u63a5\u4f7f\u7528\u7684\u5bc6\u94a5\u6587\u4ef6</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#4-github-gitlabgitee-ssh","title":"4\u3001\u5728 github \u3001gitlab\u3001gitee \u7f51\u7ad9\u6dfb\u52a0 ssh","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#github","title":"Github","text":"<ul> <li>\u53ef\u4ee5\u7528cat\u547d\u4ee4\u628a \u516c\u94a5 \u7684\u5185\u5bb9\u6253\u51fa\u6765\u590d\u5236</li> </ul> Bash<pre><code># \u8fdb\u5165.ssh \u76ee\u5f55\u4e0b\ncat id_rsa.github\n</code></pre> <ul> <li>\u76f4\u8fbe\u5730\u5740\uff1ahttps://github.com/settings/keys</li> <li>\u8fc7\u7a0b\u5982\u4e0b\uff1a</li> <li>\u767b\u5f55 Github</li> <li>\u70b9\u51fb\u53f3\u4e0a\u65b9\u7684\u5934\u50cf\uff0c\u70b9\u51fb settings</li> <li>\u9009\u62e9 SSH key</li> <li>\u70b9\u51fb Add SSH key</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#gitlab","title":"Gitlab","text":"<ul> <li>\u6ce8\uff1a\u6b64\u5904\u7684 gitlab \u662f\u516c\u53f8\u7684\u79c1\u6709\u5e93</li> </ul> <p>\u76f4\u8fbe\u5730\u5740\uff1ahttps://gitlab.com/profile/keys</p> <ol> <li>\u767b\u5f55 Gitlab</li> <li>\u70b9\u51fb\u53f3\u4e0a\u65b9\u7684\u5934\u50cf\uff0c\u70b9\u51fb settings</li> <li>\u540e\u7eed\u6b65\u9aa4\u5982 Github</li> </ol>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#gitee","title":"Gitee / \u7801\u4e91","text":"<p>\u76f4\u8fbe\u5730\u5740\uff1ahttps://gitee.com/profile/sshkeys</p> <ol> <li>\u767b\u5f55 Gitee</li> <li>\u70b9\u51fb\u53f3\u4e0a\u65b9\u7684\u5934\u50cf\uff0c\u70b9\u51fb \u8bbe\u7f6e</li> <li>\u540e\u7eed\u6b65\u9aa4\u5982 Github</li> </ol> <p>\u6dfb\u52a0\u8fc7\u7a0b \u7801\u4e91 \u4f1a\u63d0\u793a\u4f60\u8f93\u5165\u4e00\u6b21\u4f60\u7684 Gitee \u5bc6\u7801 \uff0c\u786e\u8ba4\u540e\u5373\u6dfb\u52a0\u5b8c\u6bd5\u3002</p>","tags":["Git","Tools"]},{"location":"toolbox/git/git_config/#5","title":"5\u3001 \u6d4b\u8bd5\u662f\u5426\u8fde\u63a5\u6210\u529f","text":"<p>\u7531\u4e8e\u6bcf\u4e2a\u6258\u7ba1\u5546\u7684\u4ed3\u5e93\u90fd\u6709\u552f\u4e00\u7684\u540e\u7f00\uff0c\u6bd4\u5982 Github \u7684\u662f git@github.com:*\u3002 \u6240\u4ee5\u53ef\u4ee5\u8fd9\u6837\u6d4b\u8bd5\uff1a ssh -T git@github.com \u800c gitlab \u7684\u53ef\u4ee5\u8fd9\u6837\u6d4b\u8bd5\uff1a ssh -T git@gitlab.corp.xyz.com \u5982\u679c\u80fd\u770b\u5230\u4e00\u4e9b Welcome \u4fe1\u606f\uff0c\u8bf4\u660e\u5c31\u662f OK \u7684\u4e86</p> <ul> <li>ssh -T git@github.com</li> <li>ssh -T git@gitlab.com</li> <li>ssh -T git@gitee.com</li> </ul> Bash<pre><code>(base) PS C:\\Users\\jhc142.JSHCBD\\.ssh&gt; ssh -T git@git.jshcbd.com.cn\nWelcome to GitLab, @sswang!\n(base) PS C:\\Users\\jhc142.JSHCBD\\.ssh&gt; ssh -T git@gitee.com\nHi sswfive(@sswfive)! You've successfully authenticated, but GITEE.COM does not provide shell access.\n(base) PS C:\\Users\\jhc142.JSHCBD\\.ssh&gt; ssh -T git@github.com\nHi sswfive! You've successfully authenticated, but GitHub does not provide shell access.\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/","title":"git\u4f7f\u7528\u603b\u7ed3","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#git","title":"Git\u5b66\u4e60\u8d44\u6599","text":"<ul> <li>\u5728\u7ebf\u5b66\u4e60\u7f51\u7ad9</li> <li>https://git-scm.com/book/en/v2</li> <li>https://github.com/bingohuang/progit2-gitbook</li> <li>git - \u7b80\u660e\u6307\u5357</li> <li>\u56fe\u89e3Git</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#status","title":"status: \u67e5\u770b\u72b6\u6001","text":"Bash<pre><code>git status \ngit status -s\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#add","title":"add: \u6dfb\u52a0\u6587\u4ef6\u81f3\u7f13\u5b58\u533a","text":"Bash<pre><code>git add -i   # \u4ea4\u4e92\u5f0f\u63d0\u4ea4\ngit add .    # \u6dfb\u52a0\u6240\u6709\u53d8\u66f4\u7684\u6587\u4ef6\ngit add xxx  # \u6dfb\u52a0\u6307\u5b9a\u7684\u6587\u4ef6\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#branch","title":"branch: \u5206\u652f\u7ba1\u7406","text":"Bash<pre><code>git branch            # \u67e5\u770b\u672c\u5730\u6240\u6709\u5206\u652f\ngit branch -r         # \u67e5\u770b\u8fdc\u7a0b\u6240\u6709\u5206\u652f\ngit branch -a         # \u67e5\u770b\u672c\u5730\u53ca\u8fdc\u7a0b\u7684\u6240\u6709\u5206\u652f\ngit branch --all      # \u540c\u4e0a\ngit branch -d \u5206\u652f\u540d   # \u5220\u9664\u672c\u5730\u5206\u652f\n\ngit checkout \u5206\u652f         # \u5207\u6362\u5206\u652f\uff1a\n\ngit push origin -d \u5206\u652f\u540d  # \u5220\u9664\u8fdc\u7a0b\u5206\u652f\n\ngit remote show origin    # \u67e5\u770b\u8fdc\u7a0b\u5206\u652f\u548c\u672c\u5730\u5206\u652f\u7684\u5bf9\u5e94\u5173\u7cfb\n\ngit remote prune origin   # \u5220\u9664\u8fdc\u7a0b\u5df2\u7ecf\u5220\u9664\u8fc7\u7684\u5206\u652f\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#fetch","title":"fetch: \u66f4\u65b0","text":"Bash<pre><code>git fetch   # \u5c06\u67d0\u4e2a\u8fdc\u7a0b\u4e3b\u673a\u7684\u66f4\u65b0\uff0c\u5168\u90e8\u53d6\u56de\u672c\u5730\uff1a\n\ngit fetch origin master   # \u4ece\u8fdc\u7a0b\u7684origin\u4ed3\u5e93\u7684master\u5206\u652f\u4e0b\u8f7d\u4ee3\u7801\u5230\u672c\u5730\u7684origin master\n\ngit fetch origin master:temp   # \u4ece\u8fdc\u7a0b\u7684origin\u4ed3\u5e93\u7684master\u5206\u652f\u4e0b\u8f7d\u5230\u672c\u5730\u5e76\u65b0\u5efa\u4e00\u4e2a\u5206\u652ftemp\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#diff","title":"diff: \u5bf9\u6bd4","text":"Bash<pre><code>\u6bd4\u8f83master\u5206\u652f\u548ctemp\u5206\u652f\u7684\u4e0d\u540c\ngit diff temp\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#log","title":"log: \u65e5\u5fd7","text":"Bash<pre><code>git log -p master..origin/master   # \u6bd4\u8f83\u672c\u5730\u7684\u4ed3\u5e93\u548c\u8fdc\u7a0b\u4ed3\u5e93\u7684\u533a\u522b\ngit log -p\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#archive","title":"archive: \u6253\u5305","text":"Bash<pre><code># --format \u8868\u793a\u6253\u5305\u7684\u683c\u5f0f\uff0c\u5982 zip\uff0c-v \u8868\u793a\u5bf9\u5e94\u7684 tag \u540d\uff0c\u540e\u9762\u8ddf\u7684\u662f tag \u540d\uff0c\u5982 v0.1\ngit archive -v -format=zip v0.1&gt;v0.1.zip\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#stash","title":"stash:","text":"<ul> <li>\u4fee\u6539\u7684\u6587\u4ef6\u5728\u672c\u5730\uff0c\u8fd8\u6ca1\u6709add \u548ccommit,</li> <li>\u6b64\u65f6\u60f3\u5207\u6362\u5206\u652f\uff0c\u4e0d\u60f3\u63d0\u4ea4\uff0c\u53ef\u4ee5\u5148\u7528stash\u7f13\u5b58\u8d77\u6765\uff0c\u5207\u56de\u6765\u540e\uff0c\u518d\u8fd8\u539f\u3002</li> </ul> Bash<pre><code>git stash\ngit stash save \"test-cmd-stash\"  # \u6267\u884c\u5b58\u50a8\u65f6\uff0c\u6dfb\u52a0\u5907\u6ce8\ngit stash list                   # \u67e5\u770bstash\u4e86\u54ea\u4e9b\u5b58\u50a8\ngit stash drop                   # \u5220\u9664stash\u6682\u5b58\u533a\ngit stash pop                    # \u4e0d\u5220\u9664stash\u6682\u5b58\u533a\uff0c\u53ef\u591a\u6b21\u5e94\u7528\ngit stash apply                  # \u5e94\u7528\u67d0\u4e2a\u5b58\u50a8,\u4f46\u4e0d\u4f1a\u628a\u5b58\u50a8\u4ece\u5b58\u50a8\u5217\u8868\u4e2d\u5220\u9664\ngit stash clear                  # \u6e05\u7a7a\u6808\u4e2d\u6240\u6709\u8bb0\u5f55(\u5220\u9664\u6240\u6709\u7f13\u5b58\u7684stash)\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#submodule","title":"submodule\uff1a","text":"<ul> <li> <p>\u53c2\u80031\uff1asubmodule</p> </li> <li> <p>\u53c2\u80032\uff1asubmodule</p> </li> </ul> Bash<pre><code>git submodule add git@github.com:jjz/pod-library.git pod-library\ngit add .gitmodules pod-ibrary\ngit commit -m \"pod-library submodule\"\ngit submodule init\ngit push\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#subtree","title":"subtree\uff1a","text":"Bash<pre><code>git subtree pull --prefix=&lt;\u5b50\u76ee\u5f55\u540d&gt; &lt;\u8fdc\u7a0b\u5206\u652f&gt; &lt;\u5206\u652f&gt; \n\n#\u5c06 B \u4ed3\u5e93\u6dfb\u52a0\u4e3a A \u4ed3\u5e93\u7684\u4e00\u4e2a\u5b50\u76ee\u5f55\ngit subtree add --prefix=SubFolder/B https://github.com/walterlv/walterlv.git master\n\n#\u5c06 A \u4ed3\u5e93\u4e2d\u7684 B \u5b50\u76ee\u5f55\u63a8\u9001\u56de B \u4ed3\u5e93\ngit subtree push --prefix=SubFolder/B https://github.com/walterlv/walterlv.git master\n\n#\u5c06 B \u4ed3\u5e93\u4e2d\u7684\u65b0\u5185\u5bb9\u62c9\u56de A \u4ed3\u5e93\u7684\u5b50\u76ee\u5f55\ngit subtree pull --prefix=SubFolder/B walterlv master\n\n# \u5c06\u9700\u8981\u5206\u79bb\u7684\u76ee\u5f55\u7684\u63d0\u4ea4\u65e5\u5fd7\u5206\u79bb\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u4e34\u65f6\u7248\u672c\ngit subtree split -P &lt;name-of-folder&gt; -b &lt;name-of-new-branch&gt;\n\n# example\n- name: Publish\nuses: hlyani/gitbook-deploy-action@master\nenv:\n    ACCESS_TOKEN: ${{ secrets.testaction }}\n    BASE_BRANCH: source\n    BRANCH: master\n    FOLDER: docs\ngit add -f $FOLDER\ngit commit -m \"Deploying to ${BRANCH} from ${BASE_BRANCH:-master} ${GITHUB_SHA}\" --quiet\ngit push $REPOSITORY_PATH `git subtree split --prefix $FOLDER ${BASE_BRANCH:-master}`:$BRANCH --force\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_1","title":"\u5e38\u7528\u547d\u4ee4\u5b9e\u8df5","text":"","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#git_1","title":"\u914d\u7f6egit\u8d26\u53f7","text":"<ul> <li>\u770b\u770b\u5f53\u524d\u7684\u914d\u7f6e</li> </ul> Bash<pre><code>$ git config --list\n</code></pre> <ul> <li>\u914d\u7f6e\u7528\u6237\u540d</li> <li>\u6700\u597d\u548c\u4ed3\u5e93\u8d26\u53f7\u4e00\u81f4</li> </ul> Bash<pre><code>$ git config --global user.name \"&lt;name&gt;\"\n#  --global\u4e3a\u53ef\u9009\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u8868\u793a\u914d\u7f6e\u5168\u5c40\u4fe1\u606f\n</code></pre> <ul> <li>\u914d\u7f6e\u90ae\u7bb1</li> <li>\u6700\u597d\u548c\u4ed3\u5e93\u90ae\u7bb1\u4e00\u81f4</li> </ul> Bash<pre><code>$ git config --global user.email \"&lt;email address&gt;\"\n</code></pre> <ul> <li>\u957f\u547d\u4ee4\u7b80\u5316</li> </ul> Bash<pre><code>$ git config --global alias.logg \"log --graph --decorate --abbrev-commit --all\"\n# \u4e4b\u540e\u5c31\u53ef\u4ee5\u5f00\u5fc3\u5730\u4f7f\u7528 git log\u4e86\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_2","title":"\u5728\u67d0\u4e00\u4e2a\u5206\u652f\u4e0b\u7684\u5e38\u7528\u64cd\u4f5c","text":"Bash<pre><code>git status\ngit add -a\ngit status\ngit commit -m 'xxx'\ngit pull --rebase\ngit push origin xxbran\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_3","title":"\u4ee3\u7801\u63d0\u4ea4\u64cd\u4f5c","text":"<ol> <li>\u6587\u4ef6\u589e\u5220\u6539\uff0c\u53d8\u4e3a\u5df2\u4fee\u6539\u72b6\u6001</li> <li>git add ,\u53d8\u4e3a\u5df2\u6682\u5b58\u72b6\u6001</li> </ol> Bash<pre><code>git status\ngit add --all # \u5f53\u524d\u9879\u76ee\u4e0b\u7684\u6240\u6709\u66f4\u6539\ngit add .  # \u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u66f4\u6539\ngit add xx/xx.py xx/xx2.py  # \u6dfb\u52a0\u67d0\u51e0\u4e2a\u6587\u4ef6\n</code></pre> <ol> <li>git commit, \u53d8\u4e3a\u5df2\u63d0\u4ea4\u72b6\u6001</li> </ol> Bash<pre><code>git commit -m \"&lt;\u8fd9\u91cc\u5199commit\u7684\u63cf\u8ff0&gt;\"\n</code></pre> <ol> <li>git push \uff0c\u53d8\u4e3a\u5df2\u63a8\u9001\u72b6\u6001</li> </ol> Bash<pre><code>git push -u origin master # \u7b2c\u4e00\u6b21\u9700\u8981\u5173\u8054\u4e0a\ngit push # \u4e4b\u540e\u518d\u63a8\u9001\u5c31\u4e0d\u7528\u6307\u660e\u5e94\u8be5\u63a8\u9001\u7684\u8fdc\u7a0b\u5206\u652f\u4e86\ngit branch # \u53ef\u4ee5\u67e5\u770b\u672c\u5730\u4ed3\u5e93\u7684\u5206\u652f\ngit branch -a # \u53ef\u4ee5\u67e5\u770b\u672c\u5730\u4ed3\u5e93\u548c\u672c\u5730\u8fdc\u7a0b\u4ed3\u5e93(\u8fdc\u7a0b\u4ed3\u5e93\u7684\u672c\u5730\u955c\u50cf)\u7684\u6240\u6709\u5206\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_4","title":"\u4ee3\u7801\u64a4\u9500\u63d0\u4ea4\u64cd\u4f5c","text":"<ul> <li>\u5df2\u4fee\u6539\u3001\u4f46\u672a\u6682\u5b58</li> <li>diff\u3001checkout \u3001clean</li> </ul> Bash<pre><code>git diff # \u5217\u51fa\u6240\u6709\u7684\u4fee\u6539\ngit diff xx/xx.py xx/xx2.py # \u5217\u51fa\u67d0(\u51e0)\u4e2a\u6587\u4ef6\u7684\u4fee\u6539\n\ngit checkout # \u64a4\u9500\u9879\u76ee\u4e0b\u6240\u6709\u7684\u4fee\u6539\ngit checkout . # \u64a4\u9500\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u6240\u6709\u7684\u4fee\u6539\ngit checkout xx/xx.py xx/xx2.py # \u64a4\u9500\u67d0\u51e0\u4e2a\u6587\u4ef6\u7684\u4fee\u6539\ngit clean -f # untracked\u72b6\u6001\uff0c\u64a4\u9500\u65b0\u589e\u7684\u6587\u4ef6\ngit clean -df # untracked\u72b6\u6001\uff0c\u64a4\u9500\u65b0\u589e\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\n\n# Untracked files:\n#  (use \"git add &lt;file&gt;...\" to include in what will be committed)\n#\n#   xxx.py\n</code></pre> <ul> <li>\u5df2\u6682\u5b58\u3001\u672a\u63d0\u4ea4</li> <li>\u6b64\u65f6\uff0c\u5df2\u7ecf\u6267\u884c\u8fc7git add, \u4f46\u672a\u6267\u884cgit commit \uff0c\u7528\u4e8egit diff\u5df2\u7ecf\u770b\u4e0d\u5230\u4efb\u4f55\u4fee\u6539\uff08git diff \u68c0\u67e5\u7684\u662f\u5de5\u4f5c\u533a\u4e0e\u6682\u5b58\u533a\u4e4b\u95f4\u7684\u5dee\u5f02\uff09</li> </ul> Bash<pre><code>git diff --cached # \u8fd9\u4e2a\u547d\u4ee4\u663e\u793a\u6682\u5b58\u533a\u548c\u672c\u5730\u4ed3\u5e93\u7684\u5dee\u5f02\n\ngit reset # \u6682\u5b58\u533a\u7684\u4fee\u6539\u6062\u590d\u5230\u5de5\u4f5c\u533a\ngit reset --soft # \u4e0egit reset\u7b49\u4ef7\uff0c\u56de\u5230\u5df2\u4fee\u6539\u72b6\u6001\uff0c\u4fee\u6539\u7684\u5185\u5bb9\u4ecd\u7136\u5728\u5de5\u4f5c\u533a\u4e2d\ngit reset --hard # \u56de\u5230\u672a\u4fee\u6539\u72b6\u6001\uff0c\u6e05\u7a7a\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\n\n# git reset --hard \u64cd\u4f5c\u7b49\u4ef7\u4e8e git reset \u548c git checkout 2\u6b65\u64cd\u4f5c\n</code></pre> <ul> <li>\u5df2\u63d0\u4ea4\u3001\u672a\u63a8\u9001</li> <li>\u6267\u884c\u5b8ccommit\u4e4b\u540e\uff0c\u4f1a\u5728\u4ed3\u5e93\u4e2d\u751f\u6210\u4e00\u4e2a\u7248\u672c\u53f7(hash\u503c)\uff0c\u6807\u5fd7\u8fd9\u6b21\u63d0\u4ea4\u3002\u4e4b\u540e\u4efb\u4f55\u65f6\u5019\uff0c\u90fd\u53ef\u4ee5\u501f\u52a9\u8fd9\u4e2ahash\u503c\u56de\u9000\u5230\u8fd9\u6b21\u63d0\u4ea4\u3002</li> </ul> Bash<pre><code>git diff &lt;branch-name1&gt; &lt;branch-name2&gt; # \u6bd4\u8f832\u4e2a\u5206\u652f\u4e4b\u95f4\u7684\u5dee\u5f02\ngit diff master origin/master # \u67e5\u770b\u672c\u5730\u4ed3\u5e93\u4e0e\u672c\u5730\u8fdc\u7a0b\u4ed3\u5e93\u7684\u5dee\u5f02\n\ngit reset --hard origin/master # \u56de\u9000\u4e0e\u672c\u5730\u8fdc\u7a0b\u4ed3\u5e93\u4e00\u81f4\ngit reset --hard HEAD^ # \u56de\u9000\u5230\u672c\u5730\u4ed3\u5e93\u4e0a\u4e00\u4e2a\u7248\u672c\ngit reset --hard &lt;hash code&gt; # \u56de\u9000\u5230\u4efb\u610f\u7248\u672c\ngit reset --soft/git reset # \u56de\u9000\u4e14\u56de\u5230\u5df2\u4fee\u6539\u72b6\u6001\uff0c\u4fee\u6539\u4ecd\u4fdd\u7559\u5728\u5de5\u4f5c\u533a\u4e2d\u3002\n</code></pre> <ul> <li>\u5df2\u63a8\u9001\u5230\u8fdc\u7a0b</li> </ul> Bash<pre><code>$ git push -f orgin master # \u5f3a\u5236\u8986\u76d6\u8fdc\u7a0b\u5206\u652f\n\n$ git push -f # \u5982\u679c\u4e4b\u524d\u5df2\u7ecf\u7528 -u \u5173\u8054\u8fc7\uff0c\u5219\u53ef\u7701\u7565\u5206\u652f\u540d\n\n# \u614e\u7528\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u672c\u5730\u5206\u652f\u6bd4\u8fdc\u7a0b\u8981\u65b0\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u63a8\u9001\u5230\u8fdc\u7a0b\uff0c\u4f46\u6709\u65f6\u63a8\u9001\u5230\u8fdc\u7a0b\u540e\u53d1\u73b0\u6709\u95ee\u9898\uff0c\u8fdb\u884c\u4e86\u7248\u672c\u56de\u9000\uff0c\u65e7\u7248\u672c\u6216\u8005\u5206\u53c9\u7248\u672c\u63a8\u9001\u5230\u8fdc\u7a0b\uff0c\u9700\u8981\u6dfb\u52a0 -f\u53c2\u6570\uff0c\u8868\u793a\u5f3a\u5236\u8986\u76d6\u3002\n</code></pre> <ul> <li>\u53bb\u6389\u67d0\u4e2acommit</li> </ul> Bash<pre><code>$ git revert &lt;commit-hash&gt;\n# \u5b9e\u8d28\u662f\u65b0\u5efa\u4e86\u4e00\u4e2a\u4e0e\u539f\u6765\u5b8c\u5168\u76f8\u53cd\u7684commit\uff0c\u62b5\u6d88\u4e86\u539f\u6765commit\u7684\u6548\u679c\n</code></pre> <ul> <li>reset\u56de\u9000\u9519\u8bef\u6062\u590d</li> </ul> Bash<pre><code>$ git reflog #\u67e5\u770b\u6700\u8fd1\u64cd\u4f5c\u8bb0\u5f55\n$ git reset --hard HEAD{5} #\u6062\u590d\u5230\u524d\u4e94\u7b14\u64cd\u4f5c\n$ git pull origin backend-log #\u518d\u6b21\u62c9\u53d6\u4ee3\u7801\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_5","title":"\u5173\u8054\u8fdc\u7a0b\u4ed3\u5e93","text":"<ul> <li>\u5982\u679c\u8fd8\u6ca1\u6709Git\u4ed3\u5e93\uff0c\u5219\u9700\u8981\u521d\u59cb\u5316git</li> </ul> Bash<pre><code>$ git init\n</code></pre> <ul> <li>\u5982\u679c\u60f3\u5173\u8054\u8fdc\u7a0b\u4ed3\u5e93</li> </ul> Bash<pre><code>$ git remote add &lt;name&gt; &lt;git-repo-url&gt;\n# \u4f8b\u5982 git remote add origin https://github.com/xxxxxx # \u662f\u8fdc\u7a0b\u4ed3\u5e93\u7684\u540d\u79f0\uff0c\u901a\u5e38\u4e3a origin\n</code></pre> <ul> <li>\u5982\u679c\u60f3\u5173\u8054\u591a\u4e2a\u8fdc\u7a0b\u4ed3\u5e93</li> </ul> Bash<pre><code>$ git remote add &lt;name&gt; &lt;another-git-repo-url&gt;\n# \u4f8b\u5982 git remote add coding https://coding.net/xxxxxx\n</code></pre> <ul> <li>\u5982\u679c\u60f3\u67e5\u770b\u5df2\u5173\u8054\u7684\u4ed3\u5e93\uff08\u5fd8\u4e86\u5173\u8054\u4e86\u54ea\u4e9b\u4ed3\u5e93\u6216\u5730\u5740\uff09</li> </ul> Bash<pre><code>$ git remote -v\n# origin https://github.com/gzdaijie/koa-react-server-render-blog.git (fetch)\n# origin https://github.com/gzdaijie/koa-react-server-render-blog.git (push)\n</code></pre> <ul> <li>\u5982\u679c\u6709\u8fdc\u7a0b\u4ed3\u5e93\uff0c\u60f3\u9700\u8981clone\u5230\u672c\u5730</li> </ul> Bash<pre><code>$ git clone &lt;git-repo-url&gt;\n# \u5173\u8054\u7684\u8fdc\u7a0b\u4ed3\u5e93\u5c06\u88ab\u547d\u540d\u4e3aorigin\uff0c\u8fd9\u662f\u9ed8\u8ba4\u7684\u3002\n</code></pre> <ul> <li>\u5982\u679c\u60f3\u628a\u522b\u4eba\u7684\u4ed3\u5e93\u5730\u5740\u6539\u4e3a\u81ea\u5df1\u7684</li> </ul> Bash<pre><code>$ git remote set-url origin &lt;your-git-url&gt;\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_6","title":"\u5e38\u7528\u5206\u652f\u64cd\u4f5c","text":"<ul> <li>\u5982\u679c\u60f3\u65b0\u5efa\u5206\u652f\u5e76\u5207\u6362</li> </ul> Bash<pre><code>$ git checkout -b &lt;new-branch-name&gt;\n# \u4f8b\u5982 git checkout -b dev\n# \u5982\u679c\u4ec5\u65b0\u5efa\uff0c\u4e0d\u5207\u6362\uff0c\u5219\u53bb\u6389\u53c2\u6570 -b\n</code></pre> <ul> <li>\u770b\u770b\u5f53\u524d\u6709\u54ea\u4e9b\u5206\u652f</li> </ul> Bash<pre><code>$ git branch\n# * dev\n#   master # \u6807*\u53f7\u7684\u4ee3\u8868\u5f53\u524d\u6240\u5728\u7684\u5206\u652f\n</code></pre> <ul> <li>\u770b\u770b\u5f53\u524d\u672c\u5730&amp;\u8fdc\u7a0b\u6709\u54ea\u4e9b\u5206\u652f</li> </ul> Bash<pre><code>$ git branch -a\n# * dev\n#   master\n#   remotes/origin/master\n</code></pre> <ul> <li>\u5207\u6362\u5230\u73b0\u6709\u7684\u5206\u652f</li> </ul> Bash<pre><code>$ git checkout master\n</code></pre> <ul> <li>\u628adev\u5206\u652f\u5408\u5e76\u5230master\u5206\u652f</li> </ul> Bash<pre><code>$ git merge &lt;branch-name&gt;\n# \u4f8b\u5982 git merge dev\n</code></pre> <ul> <li>\u628a\u672c\u5730master\u5206\u652f\u63a8\u9001\u5230\u8fdc\u7a0b\u53bb</li> </ul> Bash<pre><code>$ git push origin master\n# \u4f60\u53ef\u4ee5\u4f7f\u7528git push -u origin master\u5c06\u672c\u5730\u5206\u652f\u4e0e\u8fdc\u7a0b\u5206\u652f\u5173\u8054\uff0c\u4e4b\u540e\u4ec5\u9700\u8981\u4f7f\u7528git push\u5373\u53ef\u3002\n</code></pre> <ul> <li>\u8fdc\u7a0b\u5206\u652f\u88ab\u522b\u4eba\u66f4\u65b0\u4e86\uff0c\u4f60\u60f3\u8981\u66f4\u65b0\u4ee3\u7801</li> </ul> Bash<pre><code>$ git pull origin &lt;branch-name&gt;\n# \u4e4b\u524d\u5982\u679cpush\u65f6\u4f7f\u7528\u8fc7-u\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7701\u7565\u4e3agit pull\n</code></pre> <ul> <li>\u672c\u5730\u6709\u4fee\u6539\uff0c\u80fd\u4e0d\u80fd\u5148git pull</li> </ul> Bash<pre><code>$ git stash # \u5de5\u4f5c\u533a\u4fee\u6539\u6682\u5b58\n$ git pull  # \u66f4\u65b0\u5206\u652f\n$ git stash pop # \u6682\u5b58\u4fee\u6539\u6062\u590d\u5230\u5de5\u4f5c\u533a\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#commit","title":"\u5e38\u7528commit\u64cd\u4f5c","text":"<ul> <li>\u4fee\u6539\u4e4b\u524d\u7684commit</li> <li>\u5c06HEAD\u79fb\u52a8\u5230\u9700\u8981\u4fee\u6539\u7684commit\u4e0a</li> </ul> Text Only<pre><code>git rebase eb69dddd^ --interactive\n</code></pre> <ul> <li>\u8ffd\u52a0\u6539\u52a8\u5230\u63d0\u4ea4</li> </ul> Text Only<pre><code>git commit --amend\n</code></pre> <ul> <li>\u79fb\u52a8HEAD\u56de\u5230\u6700\u65b0\u7684commit</li> </ul> Text Only<pre><code>git rebase --continue\n</code></pre> <ul> <li>\u5f3a\u5236\u63d0\u4ea4</li> </ul> Text Only<pre><code>git push origin master -f\n</code></pre> <ul> <li>\u627e\u5230\u8981\u5408\u5e76 commit \u7684\u524d\u4e00\u4e2acommit</li> </ul> Text Only<pre><code>git rebase -i sdfs1easdasd\n# git rebase -i HEAD~3\n</code></pre> <ul> <li>\u5c06\u8981\u5408\u5e76\u7684 commit \u524d\u6539\u4e3a squash</li> </ul> Text Only<pre><code>pick asdasd Add second commit\nsquash asdasd Add third commit\n:wq\n</code></pre> <ul> <li>\u64cd\u4f5c\u5931\u8bef --abort \u64a4\u9500</li> </ul> Text Only<pre><code>git rebase --abort\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#_7","title":"\u7248\u672c\u56de\u9000\u4e0e\u524d\u8fdb\u64cd\u4f5c","text":"<ul> <li>\u67e5\u770b\u5386\u53f2\u7248\u672c</li> </ul> Bash<pre><code>$ git log\n</code></pre> <ul> <li>\u4f60\u53ef\u80fd\u89c9\u5f97\u8fd9\u6837\u7684log\u4e0d\u597d\u770b\uff0c\u8bd5\u8bd5\u8fd9\u4e2a</li> </ul> Bash<pre><code>$ git log --graph --decorate --abbrev-commit --all\n</code></pre> <ul> <li>\u5207\u6362\u5230\u4efb\u610f\u7248\u672c</li> </ul> Bash<pre><code>$ git checkout a5d88ea\n# hash\u7801\u5f88\u957f\uff0c\u901a\u5e386-7\u4f4d\u5c31\u591f\u4e86\n</code></pre> <ul> <li>\u8fdc\u7a0b\u4ed3\u5e93\u7684\u7248\u672c\u5f88\u65b0\uff0c\u4f46\u4f60\u8fd8\u662f\u60f3\u7528\u8001\u7248\u672c\u8986\u76d6</li> </ul> Bash<pre><code>$ git push origin master --force\n# \u6216\u8005 git push -f origin master\n</code></pre> <ul> <li>\u89c9\u5f97commit\u592a\u591a\u4e86\uff0c\u591a\u4e2acommit\u5408\u5e76\u4e3a1\u4e2a</li> </ul> Bash<pre><code>$ git rebase -i HEAD~4\n# \u8fd9\u4e2a\u547d\u4ee4\uff0c\u5c06\u6700\u8fd14\u4e2acommit\u5408\u5e76\u4e3a1\u4e2a\uff0cHEAD\u4ee3\u8868\u5f53\u524d\u7248\u672c\u3002\u5c06\u8fdb\u5165VIM\u754c\u9762\uff0c\u4f60\u53ef\u4ee5\u4fee\u6539\u63d0\u4ea4\u4fe1\u606f\u3002\u63a8\u9001\u5230\u8fdc\u7a0b\u5206\u652f\u7684commit\uff0c\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u591a\u4eba\u5408\u4f5c\u65f6\uff0c\u901a\u5e38\u4e0d\u5efa\u8bae\u4fee\u6539\u5386\u53f2\u3002\n</code></pre> <ul> <li>\u60f3\u56de\u9000\u5230\u67d0\u4e00\u4e2a\u7248\u672c</li> </ul> Bash<pre><code>$ git reset --hard &lt;hash&gt;\n# \u4f8b\u5982 git reset --hard a3hd73r\n# --hard\u4ee3\u8868\u4e22\u5f03\u5de5\u4f5c\u533a\u7684\u4fee\u6539\uff0c\u8ba9\u5de5\u4f5c\u533a\u4e0e\u7248\u672c\u4ee3\u7801\u4e00\u6a21\u4e00\u6837\uff0c\u4e0e\u4e4b\u5bf9\u5e94\uff0c--soft\u53c2\u6570\u4ee3\u8868\u4fdd\u7559\u5de5\u4f5c\u533a\u7684\u4fee\u6539\u3002\n</code></pre> <ul> <li>\u60f3\u56de\u9000\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\uff0c\u6709\u6ca1\u6709\u7b80\u4fbf\u65b9\u6cd5\uff1f</li> </ul> Bash<pre><code>$ git reset --hard HEAD^\n</code></pre> <ul> <li>\u56de\u9000\u5230\u4e0a\u4e0a\u4e2a\u7248\u672c\u5462\uff1f</li> </ul> Bash<pre><code>$ git reset --hard HEAD^^\n# HEAD^^\u53ef\u4ee5\u6362\u4f5c\u5177\u4f53\u7248\u672chash\u503c\u3002\n</code></pre> <ul> <li>\u56de\u9000\u9519\u4e86\uff0c\u80fd\u4e0d\u80fd\u524d\u8fdb\u5440\uff1f</li> </ul> Bash<pre><code>$ git reflog\n# \u8fd9\u4e2a\u547d\u4ee4\u4fdd\u7559\u4e86\u6700\u8fd1\u6267\u884c\u7684\u64cd\u4f5c\u53ca\u6240\u5904\u7684\u7248\u672c\uff0c\u6bcf\u6761\u547d\u4ee4\u524d\u7684hash\u503c\uff0c\u5219\u662f\u5bf9\u5e94\u7248\u672c\u7684hash\u503c\u3002\u4f7f\u7528\u4e0a\u8ff0\u7684git checkout \u6216\u8005 git reset\u547d\u4ee4 \u5219\u53ef\u4ee5\u68c0\u51fa\u6216\u56de\u9000\u5230\u5bf9\u5e94\u7248\u672c\u3002\n</code></pre> <ul> <li>\u521a\u521acommit\u4fe1\u606f\u5199\u9519\u4e86\uff0c\u53ef\u4ee5\u4fee\u6539\u5417\uff1f</li> </ul> Bash<pre><code>$ git commit --amend\n</code></pre> <ul> <li>\u770b\u770b\u5f53\u524d\u72b6\u6001\u5427</li> </ul> Bash<pre><code>$ git status\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/git_usage_summary/#gitignore","title":"gitignore\u6587\u4ef6","text":"<ul> <li>\u4e0d\u540c\u8bed\u8a00gitignore\u914d\u7f6e</li> </ul>","tags":["Git","Tools"]},{"location":"toolbox/git/gitflow_usage/","title":"gitflow\u7684\u4f7f\u7528","text":"<p>\u53c2\u8003\u94fe\u63a5\uff1agit-flow \u5907\u5fd8\u5f55</p>","tags":["Git","Tools"]},{"location":"toolbox/git/gitflow_usage/#_1","title":"\u5b89\u88c5","text":"Bash<pre><code># Mac install\nbrew install git-flow-avh\n\n# Linux  install\napt-get install git-flow  # ubuntu\nyum install git-flow      # Centos\n\n# window install\nwget -q -O - --no-check-certificate https://raw.github.com/petervanderdoes/gitflow-avh/develop/contrib/gitflow-installer.sh install stable | bash\n</code></pre>","tags":["Git","Tools"]},{"location":"toolbox/git/gitflow_usage/#_2","title":"\u5e38\u7528\u547d\u4ee4","text":"Bash<pre><code># \u521d\u59cb\u5316(\u524d\u63d0\uff1a \u5728\u4e00\u4e2a\u73b0\u6709\u7684git\u5e93\u5185)\ngit flow init \n\n# \u65b0\u589e\u4e00\u4e2a\u5206\u652f(\u57fa\u4e8edevelop\u5206\u652f\u521b\u5efa)\ngit flow feature start myfeature\n\n# \u5b8c\u6210\u4e00\u4e2a\u5206\u652f\u7279\u6027\uff08\u5408\u5e76\u5230devlop\u5206\u652f\u4e0a,\u5e76\u5220\u9664\u5206\u652fmyfeature\uff09\ngit flow feature finish myfeature \n\n# \u53d1\u5e03\u4e00\u4e2a\u65b0\u5206\u652f\u5230\u670d\u52a1\u5668\u4e0a(\u5728\u6b64\u529f\u80fd\u7279\u6027\u6ca1\u5b8c\u6210\u65f6\uff0c\u5c06\u672c\u5730\u5206\u652f\u63a8\u9001\u5230\u8fdc\u7aef\u4ed3\u5e93)\ngit push --set-upstream orgin myfeature\ngit add . &amp;&amp; git commit -m \"feat: xxxxx\"\ngit flow feature publish myfeature\n\n# \u62c9\u53d6\u4e00\u4e2a\u53d1\u5e03\u7684\u65b0\u5206\u652f\u7279\u6027\uff08\u5728\u534f\u540c\u65f6\uff0c\u4e00\u822c\u7528\u5230\uff09\ngit flow feature pull origin myfeature\n\u6216\ngit flow feature track myfeature  # \u6839\u636e\u5728origin\u4e0a\u7684\u65b0\u7279\u6027\u5206\u652f\n</code></pre>","tags":["Git","Tools"]},{"location":"tags/","title":"Tags","text":"<p>Tip</p> <p>\u4ee5\u4e0b\u662f\u76f8\u5173\u6807\u7b7e\u7684\u5217\u8868</p>"},{"location":"tags/#bug","title":"Bug","text":"<ul> <li>Conda\u4fee\u6539\u865a\u62df\u73af\u5883\u540d\u5bfc\u81f4\u5f02\u5e38</li> <li>Jupyter\u8fd0\u884casyncio run\u62a5\u9519</li> <li>Jupyter matplotlib\u753b\u56fe\u4e2d\u6587\u5b57\u4f53\u7f3a\u5931</li> <li>Jupyterhub\u79bb\u7ebf\u90e8\u7f72\u8e29\u5751\u603b\u7ed3</li> <li>\u591a\u8bed\u8a00\u4e4b\u95f4\u7684RSA\u52a0\u89e3\u5bc6\u95ee\u9898</li> <li>window\u73af\u5883\u4e2dpip\u5b89\u88c5\u62a5\u9519</li> </ul>"},{"location":"tags/#django","title":"Django","text":"<ul> <li>django1.7\u4ee5\u524d\u7684\u7248\u672c\u6267\u884c\u6570\u636e\u5e93\u8fc1\u79fb</li> <li>django\u6279\u91cf\u5bfc\u5165\u6570\u636e</li> <li>django\u4e2d\u7c7b\u89c6\u56fe\u7684\u4f7f\u7528</li> <li>django\u6e90\u7801\u5b66\u4e60\u4e4bLazyObject</li> <li>django\u4e2dORM\u5b57\u6bb5\u603b\u7ed3</li> <li>django\u4e2dORM\u67e5\u8be2\u65b9\u6cd5\u603b\u7ed3</li> <li>django\u4e2d\u4f7f\u7528websocket</li> </ul>"},{"location":"tags/#docker","title":"Docker","text":"<ul> <li>Docker\u67b6\u6784\u548c\u539f\u7406\u5b66\u4e60</li> <li>Docker\u5e38\u7528\u547d\u4ee4\u901f\u67e5</li> <li>Docker\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u6c47\u603b</li> <li>\u67e5\u770bDocker\u5bb9\u5668\u542f\u52a8\u7684\u8be6\u7ec6\u547d\u4ee4\u53ca\u53c2\u6570</li> <li>Docker\u955c\u50cf\u65e0\u6cd5\u62c9\u53d6\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848</li> <li>Docker\u5b89\u88c5\u5378\u8f7d\u6307\u5357</li> <li>Docker\u5b9e\u7528\u6280\u5de7</li> <li>docker-registry\u642d\u5efa\u4e0e\u4f7f\u7528</li> <li>Dockerfile\u5e38\u7528\u547d\u4ee4\u4e0e\u7f16\u5199\u6307\u5357</li> <li>dockerignore\u6587\u4ef6</li> <li>docker-compose\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5\u6c47\u603b</li> <li>docker-compose\u4f7f\u7528\u603b\u7ed3</li> <li>Docker\u6784\u5efaPython\u955c\u50cf\u5b9e\u8df5\u6307\u5357</li> </ul>"},{"location":"tags/#dockercompose","title":"DockerCompose","text":"<ul> <li>docker-compose\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5\u6c47\u603b</li> <li>docker-compose\u4f7f\u7528\u603b\u7ed3</li> </ul>"},{"location":"tags/#git","title":"Git","text":"<ul> <li>git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5</li> <li>git\u5b9e\u7528\u914d\u7f6e</li> <li>git\u4f7f\u7528\u603b\u7ed3</li> <li>gitflow\u7684\u4f7f\u7528</li> </ul>"},{"location":"tags/#go","title":"Go","text":"<ul> <li>Go\u5b66\u4e60\u8d44\u6599\u5e93</li> <li>Go\u7f16\u7801\u89c4\u8303</li> <li>Go\u5728\u4e0d\u540c\u5e73\u53f0\u7684\u5b89\u88c5\u53ca\u914d\u7f6e\u6307\u5357</li> <li>Go\u73af\u5883\u5b89\u88c5\u548c\u914d\u7f6e</li> <li>Go\u5b89\u5168\u6307\u5357[\u6458\u5f55]</li> <li>Go\u7684\u57fa\u672c\u77e5\u8bc6\u70b9</li> <li>Go\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b</li> <li>Go\u7684\u5bb9\u5668\u6570\u636e\u7c7b\u578b</li> <li>Go\u7684\u6307\u9488\u548c\u7ed3\u6784\u4f53</li> </ul>"},{"location":"tags/#k8s","title":"K8S","text":"<ul> <li>k8s\u5305\u7ba1\u7406\u5de5\u5177Helm\u7684\u4f7f\u7528</li> <li>k8s\u5e38\u7528\u547d\u4ee4\u603b\u7ed3</li> <li>k8s\u90e8\u7f72\u5e38\u89c1\u95ee\u9898\u6c47\u603b</li> <li>k8s\u6838\u5fc3\u6982\u5ff5</li> <li>k8s\u7684Dashboard\u5b89\u88c5</li> <li>k8s\u4e2detcd\u6302\u8f7d\u5185\u5b58\u5377\u6b65\u9aa4</li> <li>k8s\u7684storageclass-nfs\u5b89\u88c5\u548c\u4f7f\u7528</li> <li>k8s\u5b9e\u7528\u5c0f\u6280\u5de7</li> <li>k8s\u5b9e\u7528\u5de5\u5177\u4e4bKtConnect</li> <li>kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.19.4)</li> <li>kubeadm\u90e8\u7f72k8s\u96c6\u7fa4\u6307\u5357(v1.27.9)</li> <li>k8s\u4e2dyaml\u6587\u4ef6\u7684\u7f16\u5199\u548c\u4f7f\u7528</li> <li>Kserve\u5b89\u88c5\u90e8\u7f72</li> </ul>"},{"location":"tags/#mlops","title":"MLOps","text":"<ul> <li>Kserve\u5b89\u88c5\u90e8\u7f72</li> </ul>"},{"location":"tags/#macos","title":"MacOS","text":"<ul> <li>Mac\u5e38\u7528\u5feb\u6377\u952e</li> </ul>"},{"location":"tags/#ops","title":"Ops","text":"<ul> <li>Centos\u7684yum\u6e90\u8bef\u5220\u89e3\u51b3\u65b9\u6cd5</li> <li>Mac\u4f7f\u7528brew services\u62a5\u9519</li> <li>\u670d\u52a1\u5668\u78c1\u76d8\u7a7a\u95f4\u6ee1\u7684\u89e3\u51b3\u529e\u6cd5</li> <li>win10\u7684cmd\u4e2d\u64cd\u4f5cgit\u4e2d\u6587\u4e71\u7801\u89e3\u51b3\u65b9\u6cd5</li> </ul>"},{"location":"tags/#python","title":"Python","text":"<ul> <li>django1.7\u4ee5\u524d\u7684\u7248\u672c\u6267\u884c\u6570\u636e\u5e93\u8fc1\u79fb</li> <li>django\u6279\u91cf\u5bfc\u5165\u6570\u636e</li> <li>django\u4e2d\u7c7b\u89c6\u56fe\u7684\u4f7f\u7528</li> <li>django\u6e90\u7801\u5b66\u4e60\u4e4bLazyObject</li> <li>django\u4e2d\u95f4\u4ef6\u7684\u4f7f\u7528</li> <li>django\u4e2dORM\u5b57\u6bb5\u603b\u7ed3</li> <li>django\u4e2dORM\u67e5\u8be2\u65b9\u6cd5\u603b\u7ed3</li> <li>django\u4e2d\u4f7f\u7528websocket</li> <li>Python\u7f16\u7801\u89c4\u8303</li> <li>Conda\u7684\u5b9e\u8df5\u5e94\u7528</li> <li>Docker\u6784\u5efaPython\u955c\u50cf\u5b9e\u8df5\u6307\u5357</li> <li>Python\u7248\u672c\u53ca\u5305\u7ba1\u7406\u5de5\u5177\u9009\u578b</li> <li>Jupyter\u7cfb\u5217\u5de5\u5177\u7684\u4f7f\u7528\u603b\u7ed3</li> <li>python2\u5230python3\u7684\u53d8\u5316</li> <li>Python\u4e2d\u7684\u6570\u636e\u7c7b\u578b\u7528\u6cd5\u5256\u6790</li> <li>Python\u5e38\u7528\u5f00\u53d1\u5de5\u5177</li> <li>Python\u4e2d\u4e0d\u540c\u573a\u666f\u4e2d\u4f7f\u7528\u65e5\u5fd7\u7684\u65b9\u5f0f</li> <li>Python\u5b89\u5168\u6307\u5357[\u6458\u5f55]</li> <li>\u4f7f\u7528pypi\u8fdb\u884cpython\u5305\u7684\u53d1\u5e03</li> <li>\u5e38\u7528Pypi\u6e90\u6c47\u603b\u53ca\u4f7f\u7528</li> <li>APScheduler\u4e4b\u5b9a\u65f6\u4efb\u52a1\u5de5\u5177</li> <li>Python\u5e38\u7528\u5e93\u6c47\u603b[awesome]</li> <li>Python\u4e4bcollections\u7684\u7528\u6cd5</li> <li>Python\u6bcf\u65e5\u4e00\u5e93\u6982\u89c8[usage]</li> <li>MLflow\u4e4b\u6a21\u578b\u751f\u547d\u5468\u671f\u7ba1\u7406</li> <li>Numpy\u4e4b\u6570\u636e\u8ba1\u7b97\u5de5\u5177</li> <li>Pandas\u4e4b\u6570\u636e\u5206\u6790\u5de5\u5177</li> <li>pathlib\u4e4b\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u5f0f\u64cd\u4f5c\u8def\u5f84</li> <li>Pickle\u4e4b\u6570\u636e\u5e8f\u5217\u5316\u5de5\u5177\u7684\u4f7f\u7528</li> <li>PyFlink\u4e4b\u5206\u5e03\u5f0f\u8ba1\u7b97</li> <li>subprocess\u4e4b\u5b50\u8fdb\u7a0b\u7ba1\u7406</li> <li>Supervisor\u4e4b\u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177</li> <li>Python\u4e2d\u7684Asyncio</li> <li>\u95ed\u5305(closure)\u7528\u6cd5</li> <li>\u88c5\u9970\u5668(decorator)\u7528\u6cd5</li> <li>python\u4e2d\u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d</li> <li>def\u51fd\u6570\u4e0elambda\u51fd\u6570</li> <li>python\u5f02\u5e38\u5904\u7406</li> <li>python\u4e2d\u7684Futures</li> <li>\u751f\u6210\u5668generator\u7528\u6cd5</li> <li>python\u4e2dis\u548cequals\u7684\u533a\u522b</li> <li>\u8fed\u4ee3\u5668iterator\u7528\u6cd5</li> <li>python\u4e4b\u5bb9\u5668\u7c7b\u578b</li> <li>python\u4e2d\u7684\u9762\u5411\u5bf9\u8c61\u7f16\u7a0bOOP</li> <li>python\u4e2d\u7684property</li> <li>Python\u57fa\u7840\u77e5\u8bc6\u68b3\u7406</li> <li>python\u4e2d\u7684GC</li> <li>python\u4e2d\u7684GIL</li> <li>python\u4e2d\u7684\u5185\u5b58\u7ba1\u7406</li> <li>python\u53d8\u91cf\u4e0e\u6ce8\u91ca</li> </ul>"},{"location":"tags/#softwareinstall","title":"SoftwareInstall","text":"<ul> <li>YARN\u96c6\u7fa4\u5b89\u88c5\u90e8\u7f72</li> <li>Etcd\u96c6\u7fa4\u90e8\u7f72</li> <li>Flink(On YARN)\u5b89\u88c5\u90e8\u7f72</li> <li>Hadoop\u5b89\u88c5\u90e8\u7f72</li> <li>Java\u73af\u5883\u5b89\u88c5</li> <li>kafka\u5b89\u88c5\u90e8\u7f72</li> <li>Mongodb\u7684\u5b89\u88c5\u6307\u5357</li> <li>Nginx\u90e8\u7f72</li> <li>PostgreSQL\u4e3b\u4ece\u90e8\u7f72</li> <li>RabbitMQ\u4ecb\u7ecd\u548c\u4f7f\u7528</li> <li>Redis\u4e3b\u4ece-\u54e8\u5175\u90e8\u7f72</li> <li>Spark(ON YARN\uff09\u5b89\u88c5\u90e8\u7f72</li> <li>Zabbix\u5e38\u7528\u914d\u7f6e</li> <li>Zookeeper\u5b89\u88c5\u90e8\u7f72</li> </ul>"},{"location":"tags/#thinking","title":"Thinking","text":"<ul> <li>\u5982\u4f55\u66f4\u806a\u660e\u7684\u505a\u4e8b\u60c5</li> <li>\u6280\u672f\u4e00\u8a00</li> <li>\u5982\u4f55\u9ad8\u6548\u5b66\u4e60\u5f00\u6e90\u9879\u76ee</li> <li>\u63d0\u95ee\u7684\u667a\u6167</li> <li>\u4e2a\u4eba\u6218\u7565\u4e0a\u7684\u805a\u7126\u548c\u653e\u5f03</li> <li>\u5b66\u4e60\u5e94\u8be5\u81ea\u5e95\u5411\u4e0a,\u8fd8\u662f\u81ea\u9876\u5411\u4e0b</li> </ul>"},{"location":"tags/#tools","title":"Tools","text":"<ul> <li>\u7504\u9009GPT-AI\u5de5\u5177</li> <li>\u5e38\u7528\u8f6f\u4ef6\u547d\u4ee4\u901f\u67e5</li> <li>\u7504\u9009\u5b9e\u7528\u8f6f\u4ef6</li> <li>\u5e38\u7528\u63d2\u4ef6\u96c6</li> <li>git\u5e38\u7528\u8f6f\u4ef6\u5b89\u88c5</li> <li>git\u5b9e\u7528\u914d\u7f6e</li> <li>git\u4f7f\u7528\u603b\u7ed3</li> <li>gitflow\u7684\u4f7f\u7528</li> </ul>"},{"location":"tags/#django_1","title":"django","text":"<ul> <li>django\u4e2d\u95f4\u4ef6\u7684\u4f7f\u7528</li> </ul>"}]}